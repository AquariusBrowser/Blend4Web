b4w.register("flight_main",function(K,a){function w(){L.resize_to_container()}function M(){var d=x.get_std_assets_path();y.set_debug_resources_root("/flight_over_island/");y.load(d+"flight_over_island/flight_over_island.json",N,O,!1);w()}function N(){e=z.get_active_camera();var d=z.get_object_by_dupli_name,r=b.set_behavior,a=b.apply;f=d("Cessna Rig","Cessna Armature");t=d("Cessna Rig","Engine Speaker");h=d("golf_player_fmale_rig","rig");a(e,"CameraAction.001");r(e,b.AB_CYCLIC);a(f,"fly_cessna");r(f,
b.AB_FINISH_STOP);a(h,"fly_girl");r(h,b.AB_FINISH_STOP);A(f,t,h);u();v.set_render_callback(P);k=!0}function A(d,a,c){b.set_first_frame(d);b.play(d,Q);b.stop(c);b.set_first_frame(c);b.play(c);n.speaker_reset_speed(a,40)}function u(){switch(c){case B:c=l;b.stop(e);break;case l:c=p;b.stop(e);break;case p:c=m;b.play(e);break;case m:c=l,b.stop(e)}C();switch(c){case l:n.listener_reset_speed(40);break;case p:n.listener_reset_speed(0);break;case m:n.listener_reset_speed(0)}}function D(d,a){var b=document.getElementById(d),
c=b.cloneNode(!0);b.parentNode.replaceChild(c,b);c.addEventListener("mouseup",function(c){var b=document.getElementById(d),e=document.querySelector("#glow_down"),f=document.createElement("div");f.id="glow";f.style.top=c.target.offsetTop-25+"px";e&&(g.removeChild(e),g.appendChild(f));b.className=b.className.replace("button_down","");a()},!1);c.addEventListener("mouseover",function(d){if(!("ontouchstart"in window||0<window.navigator.a)){d=d.target;var a=document.querySelector("#glow");a||(a=document.createElement("div"),
a.id="glow",a.style.top=d.offsetTop,g.appendChild(a));a.style.top=d.offsetTop-20+"px"}},!1);c.addEventListener("mouseout",function(){var a=document.getElementById(d);a.className=a.className.replace("button_down","");E()},!1);c.addEventListener("mousedown",function(a){if(!("ontouchstart"in window||0<window.navigator.a)){E();var c=document.getElementById(d),b=document.createElement("div");b.id="glow_down";b.style.marginTop=a.target.offsetTop-28+"px";g.appendChild(b);c.className+=" button_down"}},!1)}
function E(){var a=document.querySelector("#glow_down"),b=document.querySelector("#glow");b&&g.removeChild(b);a&&g.removeChild(a)}function F(a){document.getElementById("pause_resume").className=a+" controls_button"}function O(a){G.update_preloader(a)}function Q(){c!=m&&u();A(f,t,h)}function P(){C()}function C(){if(c!=m){R.get_bone_tsr(f,"Root",H);var a=I.get_trans_view(H);if(c==p)var b=S;else c==l&&(b=T,U.add(a,V,b));W.eye_set_look_at(e,b,a)}}var b=a("animation"),R=a("armature"),J=a("app"),W=a("camera"),
x=a("config"),L=a("container"),y=a("data"),v=a("main"),G=a("preloader"),z=a("scenes"),n=a("sfx"),I=a("tsr"),q=a("version"),U=a("vec3"),q="DEBUG"===q.type(),V=new Float32Array([13,4.5,13]),S=new Float32Array([-20,2,120]),X={canvas_container_id:"main_canvas_container",callback:function(a,b){b?(g=document.querySelector("#hover_panel"),G.create_advanced_preloader({img_width:165,preloader_width:460,preloader_bar_id:"preloader_bar",fill_band_id:"fill_band",preloader_caption_id:"preloader_caption",preloader_container_id:"preloader_container",
background_container_id:"background_image_container",canvas_container_id:"main_canvas_container"}),document.querySelector("#preloader_frame").style.visibility="visible",D("pause_resume",function(){k?(k=!1,v.pause(),F("resume")):(k=!0,v.resume(),F("pause"))}),D("camera_view",function(){k&&u()}),window.addEventListener("resize",w,!1),document.addEventListener("keydown",function(a){13==a.keyCode&&J.request_fullscreen(document.body)},!1),M()):console.log("b4w init failure")},gl_debug:!1,show_fps:!1,alpha:!1,
physics_enabled:!1,console_verbose:q,assets_dds_available:!q,assets_min50_available:!1,quality:x.P_HIGH},B=10,l=20,p=30,m=40,T=new Float32Array(3),H=I.create(),f=null,t=null,h=null,e=null,k=!1,c=B,g;K.init=function(){J.init(X)}});b4w.require("flight_main").init();
