b4w.module["shader_texts"] = function(exports, require) {exports["anchors.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["void","main","(",")","{","gl_FragColor","=","vec4","(","1.0",")",";","}"]}]},exports["anchors.glslv"] = {type:"group",parts:[{type:"var",name:"ANCHOR_NUM",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_index",";","uniform","vec3","u_position","[","ANCHOR_NUM","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec4","a",";","a","=","u_view_matrix","*","vec4","(","u_position","[","int","(","a_index",")","]",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","a",";","gl_PointSize","=","4.0",";","}"]}]},exports["color_id.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"pack.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec3","u_color_id",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_outline_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bu",";","varying","vec4","bv",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","by",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";","varying","vec4","bA",";","varying","vec4","bB",";","varying","vec4","bC",";","varying","vec4","bD",";","uniform","float","u_perspective_cast_far_bound",";","uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";","uniform","sampler2D","u_shadow_map1",";","uniform","sampler2D","u_shadow_map2",";","uniform","sampler2D","u_shadow_map3",";","uniform","sampler2D","u_shadow_mask",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bE",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","qP",",","qQ",";","vec3","qR",",","qS",",","qT",",","qU",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["qR","=","u_camera_eye_frag","-","bu",";","qR","=","normalize","(","qR",")",";","qO","(","qR",",","qS",",","qT",",","qU",",","qP",",","qQ",")",";","qQ","=","qQ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["qQ","=","(","texture2D","(","u_sampler",",","bE",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qQ","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","qQ","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_outline_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bu",";","varying","vec4","bv",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","by",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bz",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bE",";"]}]}}]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","tx",";","float","ty",",","tz",",","tA",";","mat4","tB",";","vec3","tC",",","tD",",","tE",",","tF",",","tG",",","tH",";","tC","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["tD","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tE","=","vec3","(","a_tangent",")",";","tF","=","a_tangent","[","3","]","*","cross","(","tD",",","tE",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tE","=","vec3","(","0.0",")",";","tF","=","vec3","(","0.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tD","=","vec3","(","0.0",")",";","tE","=","vec3","(","0.0",")",";","tF","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["tC","=","mix","(","tC",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["tD","=","mix","(","tD",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tG","=","vec3","(","a_tangent",")",";","tH","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","tG",")",";","tE","=","mix","(","tE",",","tG",",","u_va_frame_factor",")",";","tF","=","mix","(","tF",",","tH",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sD","(","tC",",","tE",",","tF",",","tD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tF","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tF","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["tE","=","(","u_model_matrix","*","vec4","(","tF",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tB","=","rw","(","u_camera_eye",",","tE",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tB","=","rq","(","u_camera_eye",",","tE",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tH","=","(","u_model_matrix","*","vec4","(","tF",",","1.0",")",")",".","xyz",";","tB","=","tB","*","ri","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","tH",")",";"]}]}}]},{type:"textline",tokens:["aM","tI","=","rD","(","tC","-","tF",",","tF",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","tB",")",";","tI",".","b","=","tE",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aM","tI","=","rD","(","tC",",","tF",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tr","(","tI",".","a",",","tI",".","b",",","tD",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tD","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tD","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tr","(","tI",".","a",",","tI",".","b",",","tD",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","rG","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bu","=","tI",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["bw","=","tI",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["ty","=","(","dot","(","cross","(","tI",".","e",",","tI",".","c",")",",","tI",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bx","=","vec4","(","tI",".","c",",","ty",")",";"]}]}}]},{type:"textline",tokens:["bv","=","u_view_matrix","*","vec4","(","tI",".","a",",","1.0",")",";","tx","=","u_proj_matrix","*","bv",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["tx",".","xy","+=","u_subpixel_jitter","*","tx",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ty","=","tx",".","x",";","tz","=","tx",".","y",";","tA","=","tx",".","w",";","by",".","x","=","(","ty","+","tA",")","/","2.0",";","by",".","y","=","(","tz","+","tA",")","/","2.0",";","by",".","z","=","tA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bz","=","-","bv",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["tw","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","tI",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bu",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bx",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bE",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bA",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","by",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bz",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","tx",",","ty",";","vec3","tz",",","tA",",","tB",",","tC",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["tz","=","u_camera_eye_frag","-","bu",";","tz","=","normalize","(","tz",")",";","qO","(","tz",",","tA",",","tB",",","tC",",","tx",",","ty",")",";","ty","=","ty",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["ty","=","(","texture2D","(","u_colormap0",",","bE",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ty","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","ty","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","NO_SHADOWS",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","du","(","bv",".","z",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor",".","a","+=","0.00001","*","bx",".","r",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_shadow_cast_billboard_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bu",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bx",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bE",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bA",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","by",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bz",";"]}]}}]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","um",";","vec4","un",",","uo",";","float","up",";","mat4","uq",",","ur",";","vec3","us",",","ut",",","uu",",","uv",",","uw",",","ux",";","us","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["ut","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ut","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uu","=","vec3","(","a_tangent",")",";","uv","=","a_tangent","[","3","]","*","cross","(","ut",",","uu",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uu","=","vec3","(","0.0",")",";","uv","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["us","=","mix","(","us",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["ut","=","mix","(","ut",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["uw","=","vec3","(","a_tangent",")",";","ux","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","uw",")",";","uu","=","mix","(","uu",",","uw",",","u_va_frame_factor",")",";","uv","=","mix","(","uv",",","ux",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sD","(","us",",","uu",",","uv",",","ut",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uv","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uv","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["aM","uy","=","ub","(","us",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ut",",","uv",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uu","=","(","u_model_matrix","*","vec4","(","uv",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD",{type:"logic_negative_expr",places:1},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uq","=","u_shadow_cast_billboard_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uq","=","u_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ur","=","rw","(","u_camera_eye",",","uu",",","uq",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ur","=","rq","(","u_camera_eye",",","uu",",","uq",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ux","=","(","u_model_matrix","*","vec4","(","uv",",","1.0",")",")",".","xyz",";","ur","=","ur","*","ri","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","ux",")",";"]}]}}]},{type:"textline",tokens:["aM","uy","=","rD","(","us","-","uv",",","uv",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ut",",","ur",")",";","uy",".","b","=","uu",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aM","uy","=","rD","(","us",",","uv",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ut",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ut","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ut","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tr","(","uy",".","a",",","uy",".","b",",","ut",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bu","=","uy",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["bw","=","uy",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["up","=","(","dot","(","cross","(","uy",".","e",",","uy",".","c",")",",","uy",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bx","=","vec4","(","uy",".","c",",","up",")",";"]}]}}]}]}}]},{type:"textline",tokens:["un","=","u_view_matrix","*","vec4","(","uy",".","a",",","1.0",")",";","uo","=","u_proj_matrix","*","un",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uo",".","xy","+=","u_subpixel_jitter","*","uo",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["by","=","bt","(","uo",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bz","=","-","bv",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["tw","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","rG","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ul","(","uy",".","a",",","uy",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bv","=","un",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["um","=","(","u_proj_matrix","*","u_view_matrix","[","3","]",")",".","xy",";","up","=","SHADOW_TEX_RES","/","2.0",";","um","=","floor","(","um","*","up","+","0.5",")","/","up","-","um",";","uo",".","xy","+=","um",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","uo",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","um",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","um",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","um",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","um",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","um",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","um",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","um",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","um",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","um",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","un",";","mat4","uo",";","vec3","up",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["up","=","(","u_model_matrix","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","uo","=","rq","(","u_camera_eye",",","up",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uo","=","uo","*","ri","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["aM","uq","=","rD","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","uo",")",";","uq",".","b","=","up",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aM","uq","=","rD","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["un","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","uq",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["um","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["um","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["um","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","un",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","un",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bE",";","varying","float","uo",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","NUM_LINES",{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","int","up","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","up","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","ur","(","float","uq",")","{","return","uq","-","floor","(","uq","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","uA","(","inout","float","us",",","in","float","ut","[","up","]",",","in","float","uu",")","{","float","uv",",","uw",",","ux",",","uy",";","for","(","int","uz","=","0",";","uz","<","NUM_RINGS",";","uz","++",")","{","uv","=","40.0","*","ut","[","uz","]",";","uw","=","300.0","*","(","ur","(","uv",")","-","0.005",")",";","ux","=","uv",";","uy","=","abs","(","ux","*","(","u_halo_size","*","uw","-","uu",")",")",";","us","+=","1.0","-","min","(","uy",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","uJ","(","inout","float","uB",",","in","float","uC","[","up","]",",","in","float","uD",")","{","float","uE",",","uF",",","uG",",","uH",";","for","(","int","uI","=","0",";","uI","<","NUM_LINES",";","uI","++",")","{","uE","=","uC","[","uI","]",";","uF","=","uE",";","uG","=","1000.0","*","(","ur","(","uE",")","-","0.005",")",";","uH","=","20.0","*","abs","(","uF","*","bE",".","x","+","uG","*","bE",".","y",")",";","uB","+=","1.0","-","min","(","uH",",","1.0",")",";","}","uB","*=","uD",";","}"]}]}}]},{type:"textline",tokens:["void","uQ","(","inout","float","uK",",","in","vec2","uL",")","{","float","uM",",","uN",",","uO",",","uP",";","uN","=","atan","(","uL",".","y",",","uL",".","x",")",";","uN","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","uO","=","cos","(","uN",")",";","uP","=","sin","(","uN",")",";","uN","=","(","uO","*","uL",".","x","+","uP","*","uL",".","y",")","*","(","uO","*","uL",".","y","-","uP","*","uL",".","x",")",";","uM","=","abs","(","uN",")",";","if","(","uM","<","1.0",")","{","uM","=","(","0.01","*","u_halo_size",")","/","(","uM",")",";","uK","*=","sqrt","(","min","(","uM",",","1.0",")",")",";","}","}","void","main","(",")","{","vec3","uR",";","float","uS",",","uT",",","uU",",","uV",";","uS","=","(","bE",".","x","*","bE",".","x","+","bE",".","y","*","bE",".","y",")",";","uT","=","sqrt","(","uS",")",";","uS","=","max","(","1.0","-","uS",",","0.0",")",";","uS","=","pow","(","uS",",","u_halo_hardness",")",";","uU","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","NUM_LINES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","uW","[","up","]",";","for","(","int","uX","=","0",";","uX","<","up",";","uX","++",")","{","uW","[","uX","]","=","fract","(","uo","/","(","float","(","uX",")","+","0.01",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["uV","=","0.0",";","uA","(","uV",",","uW",",","uT",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["uT","=","0.0",";","uJ","(","uT",",","uW",",","uS",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uQ","(","uS",",","bE",")",";"]}]}}]},{type:"textline",tokens:["uS","*=","uU",";","uR","=","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["uV","*=","uS",";","uR","+=","u_halo_rings_color","*","uV",";","uS","+=","uV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["uT","*=","uU",";","uR","+=","u_halo_lines_color","*","uT",";","uS","+=","uT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uS","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uT","=","u_halo_stars_blend","*","(","un",".","y","-","u_halo_stars_height",")",";","uS","*=","clamp","(","uT",",","0.0",",","1.0",")",";","uS","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["aG","(","uR",")",";","aJ","(","uR",",","uS",")",";","gl_FragColor","=","vec4","(","uR",",","uS",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","bE",";","varying","float","uo",";"]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","un",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","up",",","uq",";","mat4","ur",",","us",";","vec3","ut",";","ut","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","bE","=","a_halo_bb_vertex","*","2.0",";","uo","=","fract","(","ut",".","x","+","ut",".","y","+","ut",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["ur","=","qV","(","ut",",","u_view_matrix",")",";","us","=","u_view_matrix",";","us","[","3","]","[","0","]","=","0.0",";","us","[","3","]","[","1","]","=","0.0",";","us","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ur","=","qV","(","ut",",","u_view_matrix",")",";"]}]}}]},{type:"textline",tokens:["up","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","up","=","ur","*","up",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uq","=","u_proj_matrix","*","us","*","up",";","uq",".","z","=","0.99999","*","uq",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["un","=","up",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uq","=","u_proj_matrix","*","u_view_matrix","*","up",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","uq",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec3","up",";","up","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","up",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_VECTOR_VIEW",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION","REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bu",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bw",";"]}]}}]},{type:"textline",tokens:["varying","vec4","bv",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bA",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","by",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bz",";"]}]}}]},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"nodes.glslf"},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","vd",";","vec3","ve",",","vf",",","vg",",","vh",",","vi",";","float","vj",",","vk",",","vl",",","vm",";","vj","=","length","(","bv",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vk","=","bu",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["ve","=","u_sun_intensity",";"]}]}}]},{type:"textline",tokens:["vf","=","normalize","(","u_camera_eye_frag","-","bu",")",";","qO","(","vf",",","vg",",","vh",",","vi",",","vl",",","vm",")",";","vg","=","vg",";","vm","=","vm",";","vi","=","vi",";","vl","=","vl",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["vg","=","max","(","vg","-","sqrt","(","0.01","*","-","min","(","vk",",","0.0",")",")",",","0.5","*","vg",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["aC","(","vg",",","vk",",","u_time",",","vl",",","vi",",","u_sun_direction",",","ve",",","u_sun_quaternion",",","bu",",","vj",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","vm","<=","0.5",")","discard",";","vm","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES_GLOW",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vm","=","1.0",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vc","(","vg",",","length","(","bv",")",",","vf",",","vk",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vc","(","vg",",","length","(","bv",")",",","vf",",","1.0",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vd","=","texture2DProj","(","u_shadow_mask",",","by",")",".","rg",";","vk","=","vd",".","g",";","vg","=","vec3","(","vk",")",";"]}]}}]},{type:"textline",tokens:["aG","(","vg",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2},"NODES_GLOW",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["aJ","(","vg",",","vm",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","vg",",","vm",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bu",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vd",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ve",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bA",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","by",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bz",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","vf",",","vg",";","float","vh",";","mat4","vi",";","vec3","vj",",","vk",",","vl",",","vm",",","vn",",","vo",",","vp",";","vj","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"NODES",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vk","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vk","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vl","=","vec3","(","a_tangent",")",";","vm","=","a_tangent","[","3","]","*","cross","(","vk",",","vl",")",";"]}]}},{type:"elif",expression:["NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vn","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vo","=","normalize","(","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","vn","=","vn","-","u_camera_eye",";","vm","=","cross","(","vn",",","vo",")",";","vl","=","cross","(","vo",",","vm",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vl","=","vec3","(","0.0",")",";","vm","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["vj","=","mix","(","vj",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["vk","=","mix","(","vk",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vo","=","vec3","(","a_tangent",")",";","vn","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","vo",")",";","vl","=","mix","(","vl",",","vo",",","u_va_frame_factor",")",";","vm","=","mix","(","vm",",","vn",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sD","(","vj",",","vl",",","vm",",","vk",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vn","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vn","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["aM","vq","=","ub","(","vj",",","vl",",","vm",",","vk",",","vn",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vo","=","(","u_model_matrix","*","vec4","(","vn",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vi","=","rw","(","u_camera_eye",",","vo",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vi","=","rq","(","u_camera_eye",",","vo",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vp","=","(","u_model_matrix","*","vec4","(","vn",",","1.0",")",")",".","xyz",";","vi","=","vi","*","ri","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vp",")",";"]}]}}]},{type:"textline",tokens:["aM","vq","=","rD","(","vj","-","vn",",","vn",",","vl",",","vm",",","vk",",","vi",")",";","vq",".","b","=","vo",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aM","vq","=","rD","(","vj",",","vn",",","vl",",","vm",",","vk",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vh","=","(","dot","(","cross","(","vq",".","e",",","vq",".","c",")",",","vq",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bx","=","vec4","(","vq",".","c",",","vh",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tr","(","vq",".","a",",","vq",".","b",",","vk",")",";"]}]}}]},{type:"textline",tokens:["bu","=","vq",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bw","=","vq",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vd","=","u_camera_eye","-","vq",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","rG","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["ve","=","vq",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["ve","=","a_color",";"]}]}}]}]}}]},{type:"textline",tokens:["vf","=","u_view_matrix","*","vec4","(","vq",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bv","=","vf",";"]}]}}]},{type:"textline",tokens:["vg","=","u_proj_matrix","*","vf",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["vg",".","xy","+=","u_subpixel_jitter","*","vg",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["by","=","bt","(","vg",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ul","(","vq",".","a",",","vq",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bz","=","-","vf",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["tw","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vg",";","}"]}]},exports["main_stack.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","ALPHA_AS_SPEC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bu",";","varying","vec3","bw",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bx",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vd",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ve",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bA",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","by",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"lighting_nodes.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","xn",",","xo",",","xp",",","xq",";","mat3","xr",";","vec2","xs",",","xt",",","xu",",","xv",";","vec3","xw",",","xx",",","xy",",","xz",",","xA",",","xB",",","xC",",","xD",",","xE",";","float","xF",",","xG",",","xH",",","xI",",","xJ",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["xF","=","length","(","bv",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["xG","=","bu",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["xw","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xs","=","bE",";"]}]}}]},{type:"textline",tokens:["xx","=","bw",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","xx","=","xx",";","else","xx","=","-","xx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["xy","=","cross","(","xx",",","bx",".","xyz",")","*","bx",".","w",";","xr","=","mat3","(","bx",".","xyz",",","xy",",","xx",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xt","=","normalize","(","u_view_matrix_frag","*","vec4","(","bw",",","0.0",")",")",".","st",";","xt","=","xt","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","xF","<","PARALLAX_LOD_DIST",")","{","xH","=","clamp","(","0.5","*","(","PARALLAX_LOD_DIST","-","xF",")",",","0.0",",","1.0",")",";","xH","=","u_parallax_scale","*","xH",";","xy","=","normalize","(","vd","*","xr",")",";","xI","=","1.0","/","PARALLAX_STEPS",";","xu","=","xy",".","xy","*","xH","/","(","PARALLAX_STEPS","*","xy",".","z",")",";","xH","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xv","=","xt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xv","=","xs",";"]}]}}]},{type:"textline",tokens:["xJ","=","texture2D","(","u_normalmap0",",","xv",")",".","a",";","for","(","float","xK","=","1.0",";","xK","<=","PARALLAX_STEPS",";","xK","++",")","{","if","(","xJ","<","xH",")","{","xH","-=","xI",";","xv","-=","xu",";","xJ","=","texture2D","(","u_normalmap0",",","xv",")",".","a",";","}","}","xu","=","xv","+","xu",";","xI","=","texture2D","(","u_normalmap0",",","xu",")",".","a","-","(","xH","+","xI",")",";","xH","=","xJ","-","xH",";","xI","=","xH","/","(","xH","-","xI",")",";","xv","=","xI","*","xu","+","(","1.0","-","xI",")","*","xv",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xs","+=","xv","-","xt",";"]}]}}]},{type:"textline",tokens:["xt","=","xv",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xt","+=","xv","-","xs",";"]}]}}]},{type:"textline",tokens:["xs","=","xv",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xn","=","texture2D","(","u_normalmap0",",","xt",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xn","=","texture2D","(","u_normalmap0",",","xs",")",";"]}]}}]},{type:"textline",tokens:["xy","=","xn",".","rgb","-","0.5",";","xy","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","xy",",","u_normal_factor",")",";","xy","=","xr","*","xy",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xy","=","xx",";"]}]}}]},{type:"textline",tokens:["xy","=","normalize","(","xy",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xt","=","normalize","(","u_view_matrix_frag","*","vec4","(","xy",",","0.0",")",")",".","st",";","xt","=","xt","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"textline",tokens:["xx","=","normalize","(","vd",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xz","=","ve",";","aE","(","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xn","=","vec4","(","xz",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xn","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["xI","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xo","=","texture2D","(","u_colormap0",",","xt",")",";"]}]}},{type:"elif",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xo","=","texture2D","(","u_colormap0",",","xs",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["aE","(","xo",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR1_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xp","=","texture2D","(","u_colormap1",",","xt",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xp","=","texture2D","(","u_colormap1",",","xs",")",";"]}]}}]},{type:"textline",tokens:["aE","(","xp",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xq","=","texture2D","(","u_stencil0",",","xt",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xq","=","texture2D","(","u_stencil0",",","xs",")",";"]}]}}]},{type:"textline",tokens:["xo","=","mix","(","xo",",","xp",",","xq",".","r",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xn",".","rgb","=","mix","(","xn",".","rgb",",","xo",".","rgb",",","u_diffuse_color_factor",")",";","xH","=","u_alpha_factor","*","xo",".","a",";","xH","+=","(","1.0","-","step","(","0.0",",","xH",")",")",";","xn",".","a","=","mix","(","xH",",","1.0",",","u_diffuse_color",".","a",")",";","xI","=","xo",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xn",".","rgb","*=","mix","(","vec3","(","1.0",")",",","xo",".","rgb",",","u_diffuse_color_factor",")",";","xn",".","a","=","xo",".","a",";","xI","=","xo",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["xz","=","u_diffuse_intensity","*","xn",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["xA","=","xz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xB","=","u_environment_energy","*","dW","(","xy",")",";","xB","=","u_ambient","*","xB",";","xH","=","dz","(","xz",")",";","xC","=","u_emit","*","xn",".","rgb",";","xD","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["xE","=","vec3","(","xI",")",";"]}]}},{type:"elif",expression:["TEXTURE_SPEC_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xE","=","texture2D","(","u_specmap0",",","xt",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xE","=","texture2D","(","u_specmap0",",","xs",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["aE","(","xE",".","rgb",")",";","xD","=","mix","(","xD",",","xE",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["xI","=","u_specular_params","[","0","]",";","xs","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","xD","=","xI","*","xD",";","xm","(","xC",",","xB",",","xz",",","xD",",","bu",",","xy",",","xx",",","xs",",","u_diffuse_params",",","xH",",","0.0",",","vec4","(","0.0",")",",","xA",",","xE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dT","(","xA",",","xx",",","xy",",","u_reflect_factor",")",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dT","(","xA",",","xx",",","xy",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["xA","+=","xE",";"]}]}}]},{type:"textline",tokens:["xI","=","xn",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["xA","=","max","(","xA","-","sqrt","(","0.01","*","-","min","(","xG",",","0.0",")",")",",","0.5","*","xA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["aC","(","xA",",","xG",",","u_time",",","xH",",","xy",",","u_sun_direction",",","xw",",","u_sun_quaternion",",","bu",",","xF",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","xI","<=","0.5",")","discard",";","xI","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["xH","=","max","(","max","(","xE",".","r",",","xE",".","g",")",",","xE",".","b",")","*","u_specular_alpha",";","xI","=","xn",".","a","*","(","1.0","-","xH",")","+","xH",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xI","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["xA","=","mix","(","ej","(","by",",","xy",".","xz","*","u_refr_bump",")",",","xA",",","xI",")",";","xI","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vc","(","xA",",","xF",",","xx",",","xG",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vc","(","xA",",","xF",",","xx",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["aG","(","xA",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["aJ","(","xA",",","xI",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","xA",",","xI",")",";","}"]}]},exports["main_stack.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bu",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vd",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ve",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bA",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","by",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bz",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","xn",",","xo",";","float","xp",";","mat4","xq",";","vec3","xr",",","xs",",","xt",",","xu",",","xv",",","xw",",","xx",";","xr","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"NODES",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["xs","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xs","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xt","=","vec3","(","a_tangent",")",";","xu","=","a_tangent","[","3","]","*","cross","(","xs",",","xt",")",";"]}]}},{type:"elif",expression:["NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xv","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","xw","=","normalize","(","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","xv","=","xv","-","u_camera_eye",";","xu","=","cross","(","xv",",","xw",")",";","xt","=","cross","(","xw",",","xu",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xt","=","vec3","(","0.0",")",";","xu","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["xr","=","mix","(","xr",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["xs","=","mix","(","xs",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["xw","=","vec3","(","a_tangent",")",";","xv","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","xw",")",";","xt","=","mix","(","xt",",","xw",",","u_va_frame_factor",")",";","xu","=","mix","(","xu",",","xv",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sD","(","xr",",","xt",",","xu",",","xs",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["xv","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xv","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["aM","xy","=","ub","(","xr",",","xt",",","xu",",","xs",",","xv",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["xw","=","(","u_model_matrix","*","vec4","(","xv",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xq","=","rw","(","u_camera_eye",",","xw",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xq","=","rq","(","u_camera_eye",",","xw",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xx","=","(","u_model_matrix","*","vec4","(","xv",",","1.0",")",")",".","xyz",";","xq","=","xq","*","ri","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","xx",")",";"]}]}}]},{type:"textline",tokens:["aM","xy","=","rD","(","xr","-","xv",",","xv",",","xt",",","xu",",","xs",",","xq",")",";","xy",".","b","=","xw",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aM","xy","=","rD","(","xr",",","xv",",","xt",",","xu",",","xs",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xp","=","(","dot","(","cross","(","xy",".","e",",","xy",".","c",")",",","xy",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bx","=","vec4","(","xy",".","c",",","xp",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tr","(","xy",".","a",",","xy",".","b",",","xs",")",";"]}]}}]},{type:"textline",tokens:["bu","=","xy",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bw","=","xy",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vd","=","u_camera_eye","-","xy",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","rG","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["ve","=","xy",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["ve","=","a_color",";"]}]}}]}]}}]},{type:"textline",tokens:["xn","=","u_view_matrix","*","vec4","(","xy",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bv","=","xn",";"]}]}}]},{type:"textline",tokens:["xo","=","u_proj_matrix","*","xn",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["xo",".","xy","+=","u_subpixel_jitter","*","xo",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["by","=","bt","(","xo",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ul","(","xy",".","a",",","xy",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bz","=","-","xn",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["tw","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","xo",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec2","u_texel_size",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","float","xn",";","varying","vec3","ve",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bv",";","varying","vec3","by",";","varying","float","xo",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","xp",";","vec3","xq",";","float","xr",",","xs",",","xt",";","vec2","xu",",","xv",";","xu","=","gl_PointCoord","-","0.5",";","xr","=","2.0","*","length","(","xu",")",";","xr","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","xr",")",";","xr","=","u_diffuse_color",".","a","*","xn","*","(","1.0","-","xr",")",";","xq","=","ve","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["xv","=","by",".","xy","/","by",".","z",";","xu","=","vec2","(","xu",".","x",",","-","xu",".","y",")","*","xo","*","u_texel_size",";","xu","=","vec2","(","xv","+","xu",")",";","xp","=","texture2D","(","u_scene_depth",",","xu",")",";","xs","=","k","(","xp",")",";","xt","=","-","bv",".","z","/","u_view_max_depth",";","xt","=","xs","-","xt",";","xt","=","u_view_max_depth","/","SOFT_STRENGTH","*","xt",";","xr","=","xr","*","min","(","xt",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["aG","(","xq",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["aJ","(","xq",",","xr",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","xq",",","xr",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","float","u_p_wind_fac",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_wind",";","uniform","float","u_height",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["varying","float","xn",";","varying","vec3","ve",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bv",";","varying","vec3","by",";","varying","float","xo",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["void","main","(",")","{","float","yb",",","yc",",","yd",",","ye",";","vec4","yf",",","yg",";","xp","yh",";","yh","=","ya","(",")",";","yf","=","u_view_matrix","*","vec4","(","yh",".","b",",","1.0",")",";","yg","=","u_proj_matrix","*","yf",";","gl_Position","=","yg",";","xn","=","yh",".","c",";","ve","=","yh",".","d",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["bv","=","yf",";"]}]}}]},{type:"textline",tokens:["yb","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","yb","=","yh",".","a","*","yb",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["yc","=","yg",".","x",";","yd","=","yg",".","y",";","ye","=","yg",".","w",";","by",".","x","=","(","yc","+","ye",")","/","2.0",";","by",".","y","=","(","yd","+","ye",")","/","2.0",";","by",".","z","=","ye",";","xo","=","yb",";"]}]}}]},{type:"textline",tokens:["gl_PointSize","=","yb",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","varying","float","xn",";","varying","vec3","ve",";","varying","vec2","bE",";","varying","vec3","bu",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vd",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","by",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"lighting_nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","yb",";","float","yc",",","yd",",","ye",";","vec3","yf",",","yg",",","yh",",","yi",",","yj",",","yk",",","yl",",","ym",";","vec4","yn",",","yo",";","yn","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["yo","=","texture2D","(","u_sampler",",","bE",")",";","aE","(","yo",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["yn",".","rgb","=","mix","(","yn",".","rgb",",","yo",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["yn",".","rgb","*=","mix","(","vec3","(","1.0",")",",","yo",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["yn",".","a","=","yo",".","a",";"]}]}}]},{type:"textline",tokens:["yn",".","rgb","*=","ve",";","yf","=","u_diffuse_intensity","*","yn",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["yg","=","normalize","(","vd",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["yh","=","u_emit","*","yn",".","rgb",";","yi","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logic_negative_expr",places:1},"SKY_COLOR",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["yj","=","u_environment_energy","*","dW","(","vec3","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yj","=","u_environment_energy","*","dW","(","yi",")",";"]}]}}]},{type:"textline",tokens:["yj","=","u_ambient","*","yj",";","yc","=","u_specular_params","[","0","]",";","yb","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","yk","=","yc","*","u_specular_color",";","xm","(","yh",",","yj",",","yf",",","yk",",","bu",",","yi",",","yg",",","yb",",","u_diffuse_params",",","1.0",",","0.0",",","vec4","(","0.0",")",",","yl",",","ym",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yl","=","yf",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vc","(","yl",",","length","(","bv",")",",","yg",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["yc","=","yn",".","a","*","xn",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["yd","=","-","bv",".","z","/","u_view_max_depth",";","yn","=","texture2DProj","(","u_scene_depth",",","by",")",";","ye","=","k","(","yn",")",";","yd","=","ye","-","yd",";","yd","=","u_view_max_depth","/","SOFT_STRENGTH","*","yd",";","yc","=","yc","*","min","(","yd",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["aG","(","yl",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["aJ","(","yl",",","yc",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","yl",",","yc",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","float","u_p_wind_fac",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","vec3","u_camera_eye",";","uniform","vec3","u_wind",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["varying","float","xn",";","varying","vec3","ve",";","varying","vec2","bE",";","varying","vec3","vd",";","varying","vec3","bu",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","by",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["float","yd","(","vec2","yb",",","vec2","yc",")","{","return","(","atan","(","yc",".","y",",","yc",".","x",")","-","atan","(","yb",".","y",",","yb",".","x",")",")",";","}","void","main","(",")","{","vec4","ye",",","yf",",","yg",";","mat4","yh",";","float","yi",",","yj",",","yk",";","xp","yl",";","yl","=","ya","(",")",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","yi","=","yl",".","e",";","yh","=","qV","(","yl",".","b",",","u_view_matrix",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","yi","=","yl",".","e",";","yh","=","bf","(",")",";","yh","[","3","]","=","vec4","(","yl",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","yi","=","yl",".","e",";","yh","=","bj","(","radians","(","90.0",")",")",";","yh","[","3","]","=","vec4","(","yl",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","yi","=","yd","(","vec2","(","EPSILON",",","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","yl",".","e",";","yh","=","bh","(","radians","(","-","90.0",")",")",";","yh","[","3","]","=","vec4","(","yl",".","b",",","1.0",")",";","}","ye","=","vec4","(","a_p_bb_vertex","*","2.0","*","yl",".","a","*","u_p_size",",","0.0",",","1.0",")",";","ye","=","yh","*","bl","(","yi",")","*","ye",";","yf","=","u_view_matrix","*","ye",";","yg","=","u_proj_matrix","*","yf",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["yi","=","yg",".","x",";","yj","=","yg",".","y",";","yk","=","yg",".","w",";","by",".","x","=","(","yi","+","yk",")","/","2.0",";","by",".","y","=","(","yj","+","yk",")","/","2.0",";","by",".","z","=","yk",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","yg",";","xn","=","yl",".","c",";","ve","=","yl",".","d",";","bE","=","a_p_bb_vertex","+","0.5",";","bu","=","ye",".","xyz",";","vd","=","u_camera_eye","-","ye",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bv","=","yf",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","yb",";","const","float","yc","=","0.99",";","const","float","yd","=","1.8",";","const","int","ye","=","8",";","float","yk","(","vec3","yf",",","vec3","yg",")","{","float","yh",",","yi",",","yj",";","yh","=","dot","(","yg",",","yg",")",";","yi","=","2.0","*","dot","(","yg",",","yf",")",";","yj","=","dot","(","yf",",","yf",")","-","1.0",";","yh","=","yi","*","yi","-","4.0","*","yh","*","yj",";","yh","=","sqrt","(","yh",")",";","yh","=","(","-","yi","-","yh",")","/","2.0",";","yh","=","yj","/","yh",";","return","yh",";","}","float","yr","(","float","yl",",","float","ym",")","{","float","yn",",","yo",",","yp",",","yq",";","yn","=","3.0","*","(","1.0","-","ym","*","ym",")",";","yo","=","2.0","*","(","2.0","+","ym","*","ym",")",";","yp","=","1.0","+","yl","*","yl",";","yq","=","pow","(","1.0","+","ym","*","ym","-","2.0","*","ym","*","yl",",","1.5",")",";","yq","=","max","(","yq",",","0.00001",")",";","return","(","yn","/","yo",")","*","(","yp","/","yq",")",";","}","float","yx","(","vec3","ys",",","vec3","yt",",","float","yu",")","{","vec3","yv",";","float","yw",";","yw","=","dot","(","yt",",","-","ys",")",";","if","(","yw","<","0.0",")","{","return","1.0",";","}","yv","=","ys","+","yw","*","yt",";","if","(","length","(","yv",")","<","yu",")","{","return","0.0",";","}","else","if","(","length","(","yv",")",">=","yu",")","{","yv","=","normalize","(","yv",")","*","yu","-","ys",";","yw","=","acos","(","dot","(","normalize","(","yv",")",",","yt",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","yw","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","yB","(","float","yy",",","vec3","yz",",","float","yA",")","{","return","yz","-","yz","*","pow","(","u_sky_color",",","vec3","(","yA","/","yy",")",")",";","}","void","main","(",")","{","float","yC",",","yD",",","yE",",","yF",",","yG",",","yH",",","yI",",","yJ",",","yK",";","vec3","yL",",","yM",",","yN",",","yO",",","yP",",","yQ",",","yR",";","yL","=","normalize","(","yb",")",";","yM","=","u_sun_direction",";","yC","=","dot","(","yL",",","yM",")",";","yD","=","yr","(","yC",",","-","0.01",")","*","u_rayleigh_brightness","*","yM",".","y",";","yE","=","yr","(","yC","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","yM",".","y",")",";","yC","=","smoothstep","(","0.0",",","100.0",",","yr","(","yC",",","0.9995",")",")","*","u_spot_brightness",";","yN","=","vec3","(","0.0",",","yc",",","0.0",")",";","yF","=","yk","(","yN",",","yL",")",";","yG","=","yF","/","float","(","ye",")",";","yH","=","yx","(","yN",",","yL",",","yc","-","0.3",")",";","yO","=","vec3","(","0.0",",","0.0",",","0.0",")",";","yP","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","yS","=","0",";","yS","<","ye",";","yS","++",")","{","yI","=","yG","*","float","(","yS",")",";","yQ","=","yN","+","yL","*","yI",";","yJ","=","yx","(","yQ",",","yM",",","yc","-","0.2",")",";","yK","=","yk","(","yQ",",","yM",")",";","yR","=","yB","(","yK",",","vec3","(","yd",")",",","u_scatter_strength",")","*","yJ",";","yO","+=","yB","(","sqrt","(","yI",")",",","u_sky_color","*","yR",",","u_rayleigh_strength",")",";","yP","+=","yB","(","yI",",","yR",",","u_mie_strength",")",";","}","yO","=","yO","*","yH","*","pow","(","yF",",","u_rayleigh_collection_power",")","/","float","(","ye",")",";","yP","=","(","yP","*","yH","*","pow","(","yF",",","u_mie_collection_power",")",")","/","float","(","ye",")",";","yO","=","vec3","(","yC","*","yP","+","yE","*","yP","+","yD","*","yO",")",";","aG","(","yO",")",";","gl_FragColor","=","vec4","(","yO",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","yb",";","void","main","(",")","{","vec4","yc",",","yd",";","yc","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","yd","=","u_cube_view_matrix","*","yc",";","yb","=","yd",".","xyz",";","gl_Position","=","yc",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","bE",";","void","main","(",")","{","vec4","yc",";","yc","=","texture2D","(","u_sampler",",","bE",")",";","aG","(","yc",".","rgb",")",";","aJ","(","yc",".","rgb",",","yc",".","a",")",";","gl_FragColor","=","yc",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","bE",";","void","main","(",")","{","vec2","yc",";","float","yd",";","vec4","ye",";","vec3","yf",";","bE","=","a_texcoord",";","yf","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","ye","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","yf",",","0.0",")",";","ye",".","x","/=","ye",".","w",";","ye",".","y","/=","ye",".","w",";","ye","+=","99999.0","*","step","(","ye",".","z",",","0.0",")",";","ye","+=","100.0","*","(","step","(","1.0",",","abs","(","ye",".","x",")",")","+","step","(","1.0",",","abs","(","ye",".","y",")",")",")",";","ye",".","x","=","-","a_lf_dist","*","ye",".","x",";","ye",".","y","=","-","a_lf_dist","*","ye",".","y",";","yd","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","yc","=","vec2","(","a_lf_bb_vertex",".","x","/","yd",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","yg","=","1.9",";","yc","*=","(","1.0","+","yg","*","length","(","ye",".","xy",")",")",";","}","gl_Position","=","vec4","(","ye",".","xy","+","yc",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"define",name:"INV_PI",tokens:["0.318309886"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX","PROCEDURAL_SKYDOME",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"blending.glslf"},{type:"textline",tokens:["uniform","vec4","u_sky_tex_fac",";","uniform","vec3","u_sky_tex_color",";","uniform","float","u_sky_tex_dvar",";","vec3","Ai","(","vec3","Ad",",","vec3","Ae",",","float","Af",",","float","Ag",")","{","float","Ah",";","Ah","=","Af","*","Ag",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","ys","(","Ae",",","Ad",",","Ah",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yw","(","Ad",",","Ae",",","Ah",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yA","(","Ad",",","Ae",",","Ah",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yF","(","Ad",",","Ae",",","Ah",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yK","(","Ad",",","Ae",",","Ah",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yP","(","Ad",",","Ae",",","Ah",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yT","(","Ad",",","Ae",",","Ah",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yX","(","Ad",",","Ae",",","Ah",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","za","(","Ad",",","Ae",",","Ah",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","ze","(","Ad",",","Ae",",","Ah",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","HUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zk","(","Ae",",","Ad",",","Ah",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SATURATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zq","(","Ae",",","Ad",",","Ah",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","VALUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zw","(","Ae",",","Ad",",","Ah",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","COLOR",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zC","(","Ae",",","Ad",",","Ah",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zH","(","Ae",",","Ad",",","Ah",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zL","(","Ae",",","Ad",",","Ah",")",";"]}]}}]},{type:"textline",tokens:["return","vec3","(","1.0",",","0.0",",","1.0",")",";","}","float","Aq","(","float","Aj",",","float","Ak",",","float","Al",",","float","Am",")","{","float","An",";","vec3","Ao",",","Ap",";","Ao","=","vec3","(","Aj",")",",","Ap","=","vec3","(","Ak",")",";","An","=","Al","*","Am",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","ys","(","Ap",",","Ao",",","An",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yw","(","Ao",",","Ap",",","An",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yA","(","Ao",",","Ap",",","An",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zR","(","Aj",",","Ak",",","An",",","Am",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zX","(","Aj",",","Ak",",","An",",","Am",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Ac","(","Aj",",","Ak",",","An",",","Am",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yT","(","Ao",",","Ap",",","An",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","yX","(","Ao",",","Ap",",","An",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","za","(","Ao",",","Ap",",","An",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","ze","(","Ao",",","Ap",",","An",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zH","(","Ap",",","Ao",",","An",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","zL","(","Ap",",","Ao",",","An",")",".","x",";"]}]}}]},{type:"textline",tokens:["return","0.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","yb",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bE",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Ar",";","float","As",",","At",",","Au",";","vec3","Av",",","Aw",",","Ax",",","Ay",",","Az",";","Aw","=","normalize","(","yb",")",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME"],group:{type:"group",parts:[{type:"textline",tokens:["Av","=","textureCube","(","u_sky",",","Aw",")",".","rgb",";"]}]}},{type:"elif",expression:["WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Av","=","u_horizon_color",";","aG","(","Av",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"textline",tokens:["Ax","=","vec3","(","bE",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ax","=","vec3","(","yb",".","xy",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["As","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["As","=","abs","(","bE",".","y",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["As","=","(","bE",".","y","+","1.0",")","*","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["At","=","acos","(","Aw",".","y",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["As","=","abs","(","At","*","INV_PI","-","0.5",")","*","2.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["As","=","1.0","-","At","*","INV_PI",";"]}]}}]}]}}]}]}}]},{type:"textline",tokens:["Ay","=","u_horizon_color",";","Az","=","u_zenith_color",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX"],group:{type:"group",parts:[{type:"textline",tokens:["At","=","1.0",";","Ar","=","textureCube","(","u_sky",",","Aw",")",";","aE","(","Ar",".","rgb",")",";","At","=","Ar",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["At","=","dot","(","Ar",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MTEX_NEGATIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","vec4","(","vec3","(","1.0",")","-","Ar",".","rgb",",","Ar",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["At","=","1.0","-","At",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ","WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","vec4","(","u_sky_tex_color",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["At","=","Ar",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ"],group:{type:"group",parts:[{type:"textline",tokens:["Ay","=","Ai","(","Ar",".","rgb",",","Ay",",","At",",","u_sky_tex_fac","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Au","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","Ax",",","vec3","(","0.0",",","1.0",",","0.0",")",")",">=","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["Au","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["else","Au","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["Au","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"elif",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["Au","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","Au","!=","0.0",")","Az","=","Ai","(","Ar",".","rgb",",","Az",",","At",",","Au",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_BLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["At","=","dot","(","Ar",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";"]}]}}]},{type:"textline",tokens:["As","=","Aq","(","u_sky_tex_dvar",",","As",",","At",",","u_sky_tex_fac","[","0","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["Av","=","mix","(","Ay",",","Az",",","As",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Av","=","Ay",";"]}]}}]},{type:"textline",tokens:["aG","(","Av",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aG","(","Ay",")",";","aG","(","Az",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["Av","=","mix","(","Ay",",","Az",",","As",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Av","=","Ay",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["aE","(","Av",")",";","As","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","As","=","min","(","-","As","*","0.03",",","0.8",")",";","At","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";","Ay","=","vec3","(","0.0",")",";","Ar","=","u_underwater_fog_color_density",";","Ar",".","rgb","=","mix","(","Ar",".","rgb",",","Ay",",","min","(","-","Aw",".","y","+","As",",","1.0",")",")","*","At",";","As","=","clamp","(","sign","(","Aw",".","y","-","0.05","*","As",")",",","0.0",",","1.0",")",";","Av","=","mix","(","Ar",".","rgb",",","Av",",","As",")",";","aG","(","Av",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Av",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","yb",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bE",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Ad",",","Ae",";","Ad","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","Ae","=","u_sky_vp_inverse","*","Ad",";","yb","=","Ae",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","a_position",".","xy",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","Ad",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0005"]},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHORE_SMOOTHING","WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_norm_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Ad","=","1.0",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vd",";","varying","vec3","bu",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bx",";","varying","vec3","Ae",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Af",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Ag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","by",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Ah",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","SHORE_SMOOTHING","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["vec3","At","(","in","vec2","Ai",",","in","vec3","Aj",",","in","vec3","Ak",",","in","vec3","Al",",","out","float","Am",")","{","float","An",",","Ao",",","Ap",";","vec2","Aq",";","vec3","Ar",",","As",";","Am","=","0.0",";","Ar","=","reflect","(","-","Ak",",","Aj",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Aq","=","Ai",".","xy","+","Aj",".","xz","*","REFL_BUMP","/","bz",";","Am","=","u_reflect_factor",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["As","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["As","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["}","else","{","As","=","texture2D","(","u_plane_reflection",",","Aq",")",".","rgb",";","aE","(","As",")",";","}"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Am","=","u_mirror_factor",";","As","=","Al","*","textureCube","(","u_mirrormap",",","Ar",")",".","rgb",";","aE","(","As",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Am","=","u_reflect_factor",";","As","=","Al","*","vec3","(","0.3",",","0.5",",","1.0",")",";","aE","(","As",")",";"]}]}}]},{type:"textline",tokens:["Ar","=","normalize","(","Ar","+","Ak",")",";","An","=","1.0","-","dot","(","Ak",",","Ar",")",";","Ao","=","u_fresnel_params","[","3","]",";","Ap","=","u_fresnel_params","[","2","]",";","Ap","=","Ao","+","(","1.0","-","Ao",")","*","pow","(","An",",","Ap",")",";","Am","=","min","(","Am","*","Ap",",","1.0",")",";","return","As",";","}"]},{type:"include",file:"lighting_nodes.glslf"},{type:"textline",tokens:["void","main","(",")","{","vec4","Au",";","vec2","Av",",","Aw",",","Ax",";","float","Ay",",","Az",",","AA",",","AB",",","AC",",","AD",";","vec3","AE",",","AF",",","AG",",","AH",",","AI",",","AJ",",","AK",",","AL",",","AM",";","mat3","AN",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AN","=","mat3","(","bx",",","Ae",",","bw",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["AE","=","normalize","(","bw",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AE","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","FOAM",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ay","=","bu",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Av","=","vec2","(","Af",".","x",",","-","Af",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Av","=","vec2","(","bu",".","x",",","-","bu",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Av","=","bE",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AF","=","vec3","(","0.0",")",";","AG","=","texture2D","(","u_normalmap0",",","Av","*","u_normalmap0_scale","+","vec2","(","0.3",",","0.5",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","AF","+=","AG",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["AH","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["AH","+=","AG",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AG","=","texture2D","(","u_normalmap0",",","Av","*","u_normalmap1_scale","+","vec2","(","-","0.3",",","0.7",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","AF","+=","AG",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["AH","+=","AG",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AG","=","texture2D","(","u_normalmap0",",","Av","*","u_normalmap2_scale","+","vec2","(","0.0",",","1.1",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","AF","+=","AG",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["AH","+=","AG",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AG","=","texture2D","(","u_normalmap0",",","Av","*","u_normalmap3_scale","+","vec2","(","-","0.66",",","-","0.3",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","AF","+=","AG",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["AH","+=","AG",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["AH","=","AN","*","AH",";","if","(","!","aP","(","AH",",","vec3","(","0.0",")",")",")","AH","=","normalize","(","AH",")",";","AH","=","mix","(","AE",",","AH",",","0.2",")",";","AH","=","normalize","(","AH",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["AE","=","mix","(","AE",",","normalize","(","AN","*","AF",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AE","=","mix","(","AE",",","normalize","(","AN","*","AF",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["AE","=","normalize","(","AE",")",";"]}]}}]},{type:"textline",tokens:["AF","=","normalize","(","vd",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Aw","=","by",".","xy","/","by",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Az","=","bz","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["AA","=","u_diffuse_color",".","a",";","Au","=","texture2DProj","(","u_scene_depth",",","by",")",";","AB","=","k","(","Au",")",";","AC","=","max","(","AB","-","bz",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Ax","=","Aw","+","AE",".","xz","*","u_refr_bump","/","bz",";","AB","=","eb","(","AB",",","Ax",",","Aw",")",";","AB","=","max","(","AB","-","bz",",","0.0",")",";","AB","=","u_view_max_depth","/","ABSORB","*","AB",";","if","(","u_cam_water_depth","<","0.0",")","AD","=","0.0",";","else","AD","=","min","(","AA","*","AB",",","1.0",")",";","AB","=","u_view_max_depth","/","ABSORB","*","AC",";","AA","=","min","(","15.0","*","AA","*","u_view_max_depth","*","AC",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AB","=","u_view_max_depth","/","ABSORB","*","AC",";","if","(","u_cam_water_depth",">","0.0",")","AA","=","min","(","AA","*","AB",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["AA","*=","min","(","5.0","*","Az",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AA","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["AD","=","1.0","-","AA",";","Ax","=","Aw","+","AE",".","xz","*","u_refr_bump","/","bz",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["AG","=","texture2D","(","u_refractmap",",","Ax",")",".","rgb",";","aE","(","AG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["AB","=","pow","(","min","(","Ag",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","AI","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","AB",")",";","AB","=","pow","(","min","(","Ag",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","AI","=","mix","(","u_shore_water_col",",","AI",",","AB",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AI","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["AC","=","max","(","1.0","-","u_view_max_depth","*","AC",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AC","=","1.0","-","AA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Ay","=","max","(","Ay","/","WAVES_HEIGHT","+","0.1",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["AJ","=","normalize","(","vec3","(","Ag",".","r",",","0.0",",","Ag",".","g",")",")",";","AJ","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","AJ",",","0.8",")",")",";","AB","=","1.25","*","max","(","dot","(","AH",",","AJ",")","-","0.2",",","0.0",")",";","AB","+=","max","(","dot","(","AH",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",",","0.0",")",";","AC","+=","AB","*","(","1.0","-","Ag",".","b",")",";","Ay","*=","(","1.0","-","0.95","*","pow","(","Ag",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["AC","+=","Ay",";","AC","=","min","(","u_foam_factor","*","AC",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["Au","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","Av","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["Ay","=","u_specular_params","[","0","]",";","Av","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","AH","=","Ay","*","u_specular_color",";","AJ","=","u_environment_energy","*","dW","(","AE",")",";","AJ","=","u_ambient","*","AJ",";","AJ","=","AJ","+","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AK","=","At","(","Aw",",","AE",",","AF",",","AJ",",","Ay",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AK","=","At","(","vec2","(","0.0",")",",","AE",",","AF",",","AJ",",","Ay",")",";"]}]}}]},{type:"textline",tokens:["AI","=","u_diffuse_intensity","*","AI",";","xm","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","AI",",","AH",",","bu",",","AE",",","AF",",","Av",",","u_diffuse_params",",","1.0",",","0.0",",","vec4","(","0.0",")",",","AL",",","AM",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["AB","=","max","(","dot","(","u_sun_direction",",","-","bw",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","AF",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","AB","=","clamp","(","SSS_STRENGTH","*","AB",",","0.0",",","1.0",")",";","AL","=","mix","(","AL",",","u_shallow_water_col",",","AB",")",";","AL","=","mix","(","AL",",","u_shore_water_col",",","AB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["AL","=","mix","(","AG",",","AL",",","AD",")",";"]}]}}]},{type:"textline",tokens:["AL","=","mix","(","AL",",","AK",",","Ay",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["Ay","=","mix","(","Au",".","g",",","Au",".","r",",","max","(","4.0","*","(","AC","-","0.75",")",",","0.0",")",")",";","Ay","=","mix","(","Au",".","b",",","Ay",",","max","(","2.0","*","AC","-","1.0",",","0.0",")",")",";","Ay","=","mix","(","0.0",",","Ay",",","AC",")",";","AL","=","mix","(","AL",",","AJ",",","Ay",")",";"]}]}}]},{type:"textline",tokens:["AL","+=","AM",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","uW","(","AL",",","Az",",","u_cam_water_depth",")",";","}","else","{","vc","(","AL",",","Az",",","AF",",","1.0",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vc","(","AL",",","Az",",","AF",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["aG","(","AL",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["AA","=","max","(","AA",",","AM",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["AA","+=","Ay",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["aJ","(","AL",",","AA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["AM","=","fwidth","(","Ah",")",";","AM","=","smoothstep","(","vec3","(","0.0",")",",","AM","*","Ad",",","Ah",")",";","Ay","=","min","(","min","(","AM",".","x",",","AM",".","y",")",",","AM",".","z",")",";","Ay","=","clamp","(","Ay",",","0.0",",","1.0",")",";","AL","=","mix","(","u_wireframe_edge_color",",","AL",",","Ay",")",";","AA","=","mix","(","1.0",",","AA",",","Ay",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","AL",",","AA",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Y",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Y",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"DYNAMIC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";","attribute","vec3","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH",{type:"logic_negative_expr",places:1},"NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_polyindex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vd",";","varying","vec3","bu",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bx",";","varying","vec3","Ae",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Af",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Ag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","by",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Ah",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Am","(","in","vec2","Ad",")","{","float","Ai",";","vec4","Aj",";","vec2","Ak",";","Ak","=","0.5","+","vec2","(","(","Ad",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","Ad",".","y","+","SHORE_MAP_CENTER_Y",")","/","SHORE_MAP_SIZE_Y",")",";","Aj","=","texture2D","(","u_shore_dist_map",",","Ak",")",";","const","vec2","Al","=","vec2","(","1.0","/","255.0",",","1.0",")",";","Ai","=","dot","(","Aj",".","ba",",","Al",")",";","Ak","=","normalize","(","Aj",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","Ak",",","Ai",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"SMALL_WAVES_FAC",tokens:["0.3"]},{type:"textline",tokens:["void","Ay","(","inout","vec3","An",",","in","float","Ao",",","in","vec3","Ap",")","{","vec2","Aq",",","Ar",",","As",";","float","At",",","Au",",","Av",",","Aw",",","Ax",";","At","=","ag","(","DST_NOISE_SCALE_0","*","(","An",".","xz","+","DST_NOISE_FREQ_0","*","Ao",")",")","*","ag","(","DST_NOISE_SCALE_1","*","(","An",".","zx","-","DST_NOISE_FREQ_1","*","Ao",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Au","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","Av","=","Ap",".","b",";","Aw","=","sqrt","(","Av",")",";","Au","=","max","(","Av",",","DIR_MIN_SHR_FAC",")","*","sin","(","Aw","/","Au","+","DIR_FREQ","*","Ao",")",";","Ax","=","max","(","ag","(","DIR_NOISE_SCALE","*","(","An",".","xz","+","DIR_NOISE_FREQ","*","Ao",")",")",",","DIR_MIN_NOISE_FAC",")",";","Au","*=","Ax",";","Aw","=","WAVES_HEIGHT","*","mix","(","Au",",","At",",","max","(","Aw",",","DST_MIN_FAC",")",")",";","Aq","=","Ap",".","rg",";","Au","=","WAVES_HOR_FAC","*","Au","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","Av",")",",","0.0",")",";","Aq","=","Au","*","Aq",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Aw","=","WAVES_HEIGHT","*","At",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["Ar","=","2.0","*","(","An",".","xz","-","0.1","*","Ao",")",";","As","=","1.3","*","(","An",".","zx","+","0.03","*","Ao",")",";","At","=","L","(","0.5","*","Ar",")",".","x","+","L","(","0.5","*","As",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["An",".","xz","+=","Aq",";","At","*=","Av",";"]}]}}]},{type:"textline",tokens:["Aw","+=","SMALL_WAVES_FAC","*","At",";"]}]}}]},{type:"textline",tokens:["An",".","y","+=","Aw",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Az",",","AA",";","vec2","AB",";","float","AC",",","AD",",","AE",";","vec3","AF",",","AG",",","AH",",","AI",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_polyindex","==","0.0",")","Ah","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","Ah","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","Ah","=","vec3","(","0.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["AF","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["AC","=","abs","(","AF",".","y",")",";","AB","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","AC",")",";","AF",".","y","=","WATER_LEVEL",";","AF",".","xz","+=","AB",";"]}]}},{type:"elif",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["aM","AJ","=","rD","(","AF",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Ag","=","Am","(","AJ",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["AD","=","length","(","u_wind",")",";","AE","=","u_time",";","AE","*=","AD",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["AC","=","AC",";","AF","=","AJ",".","a","+","vec3","(","AC",",","0.0",",","0.0",")",";","AG","=","AJ",".","a","+","vec3","(","0.0",",","0.0",",","AC",")",";","if","(","a_position",".","y","<","0.0",")","{","AJ",".","a",".","y","=","WATER_LEVEL","-","1.0",";","AF",".","y","=","AJ",".","a",".","y",";","AG",".","y","=","AJ",".","a",".","y",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Af","=","AJ",".","a",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AF","=","AJ",".","a","+","vec3","(","0.05",",","0.0",",","0.0",")",";","AG","=","AJ",".","a","+","vec3","(","0.0",",","0.0",",","0.05",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["AH","=","Am","(","AF",".","xz",")",";","AI","=","Am","(","AG",".","xz",")",";","Ay","(","AF",",","AE",",","AH",")",";","Ay","(","AG",",","AE",",","AI",")",";","Ay","(","AJ",".","a",",","AE",",","Ag",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ay","(","AF",",","AE",",","vec3","(","0.0",")",")",";","Ay","(","AG",",","AE",",","vec3","(","0.0",")",")",";","Ay","(","AJ",".","a",",","AE",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["AF","=","normalize","(","AF","-","AJ",".","a",")",";","AG","=","normalize","(","AG","-","AJ",".","a",")",";","bw","=","normalize","(","cross","(","AG",",","AF",")",")",";","AE","=","dot","(","bw",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","AE","=","clamp","(","0.8","-","AE",",","0.0",",","1.0",")",";","bw","=","mix","(","bw",",","vec3","(","0.0",",","1.0",",","0.0",")",",","AE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["AG","=","a_tangent",";","bw","=","a_normal",";"]}]}}]},{type:"textline",tokens:["bx","=","AG",";","Ae","=","cross","(","bw",",","bx",")",";"]}]}}]},{type:"textline",tokens:["bu","=","AJ",".","a",";","vd","=","u_camera_eye","-","AJ",".","a",";","Az","=","u_view_matrix","*","vec4","(","AJ",".","a",",","1.0",")",";","AA","=","u_proj_matrix","*","Az",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AE","=","AA",".","x",";","AC","=","AA",".","y",";","AD","=","AA",".","w",";","by",".","x","=","(","AE","+","AD",")","/","2.0",";","by",".","y","=","(","AC","+","AD",")","/","2.0",";","by",".","z","=","AD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bz","=","-","Az",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","AA",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["0"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["2"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","Ah",";","const","float","Ad","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","Ai","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","Ai","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","Aj","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","Ak","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","Al","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","Am",",","An",";","vec3","Ao",",","Ap",";","Ao","=","vec3","(","0.0",")",";","Am","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","sign","(","Ah","-","vec3","(","0.02","*","Ad",")",")",";","if","(","Ap",".","x","<","0.0","||","Ap",".","y","<","0.0","||","Ap",".","z","<","0.0",")","{","Ao","=","Ai",";","Am","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY",0,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ap","=","sign","(","Ah","-","vec3","(","0.02","*","Ad",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","Ap",".","x","<","0.0","||","Ap",".","y","<","0.0","||","Ap",".","z","<","0.0",")","Ao","=","u_wireframe_edge_color",";","else","Ao","=","Al",";","Am","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","Ap",".","x","<","0.0","||","Ap",".","y","<","0.0","||","Ap",".","z","<","0.0",")","Am","=","1.0",";","else","Am","=","0.0",";","Ao","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","Ap",".","x","<","0.0","||","Ap",".","y","<","0.0","||","Ap",".","z","<","0.0",")","Ao","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","Ao","=","Aj",";","else","Ao","=","Ak",";","Am","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["Ap","=","fwidth","(","Ah",")",";","Ap","=","smoothstep","(","vec3","(","0.0",")",",","Ap","*","Ad",",","Ah",")",";","An","=","min","(","min","(","Ap",".","x",",","Ap",".","y",")",",","Ap",".","z",")",";","An","=","clamp","(","An",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","Ao","=","vec3","(","mix","(","u_wireframe_edge_color",",","Al",",","An",")",")",";","Am","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","Ao","=","u_wireframe_edge_color",";","Am","=","mix","(","1.0",",","0.0",",","An",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","Ao","=","mix","(","u_wireframe_edge_color",",","Aj",",","An",")",";","else","Ao","=","mix","(","u_wireframe_edge_color",",","Ak",",","An",")",";","Am","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["aG","(","Ao",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["aJ","(","Ao",",","Am",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ao",",","Am",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","Ah",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Ad",";","mat4","Ai",";","vec3","Aj",",","Ak",",","Al",",","Am",",","An",";","if","(","a_polyindex","==","0.0",")","Ah","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","Ah","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","Ah","=","vec3","(","0.0",",","0.0",",","1.0",")",";","Aj","=","a_position",";","Ak","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["aM","Ao","=","rD","(","Aj",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["Aj","=","mix","(","Aj",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["Al","=","vec3","(","0.0",")",";","Am","=","vec3","(","0.0",")",";","sD","(","Aj",",","Al",",","Am",",","Ak",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["Am","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Am","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["aM","Ao","=","ub","(","Aj",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Am",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["Al","=","(","u_model_matrix","*","vec4","(","Am",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ai","=","rw","(","u_camera_eye",",","Al",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ai","=","rq","(","u_camera_eye",",","Al",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["An","=","(","u_model_matrix","*","vec4","(","Am",",","1.0",")",")",".","xyz",";","Ai","=","Ai","*","ri","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","An",")",";"]}]}}]},{type:"textline",tokens:["aM","Ao","=","rD","(","Aj","-","Am",",","Am",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Ai",")",";","Ao",".","b","=","Al",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aM","Ao","=","rD","(","Aj",",","Am",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tr","(","Ao",".","a",",","Ao",".","b",",","Ak",")",";"]}]}}]}]}}]},{type:"textline",tokens:["Ad","=","u_view_matrix","*","vec4","(","Ao",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","Ad",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","bE",";","void","main","(",")","{","vec4","Ad",",","Ai",";","Ad","=","texture2D","(","u_sampler_left",",","bE",")",";","Ai","=","texture2D","(","u_sampler_right",",","bE",")",";","gl_FragColor","=","vec4","(","Ad","[","0","]",",","Ai","[","1","]",",","Ai","[","2","]",",","Ad","[","3","]","+","Ai","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"AA_METHOD_PASS",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["2"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["3"]},{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","bE",";","vec4","Ak","(","float","Ad",",","float","Ai",")","{","vec2","Aj",";","Aj","=","bE","+","vec2","(","Ad",",","Ai",")","*","u_texel_size",";","return","texture2D","(","u_color",",","Aj",")",";","}","float","Ao","(","vec4","Al",")","{","float","Am",";","vec3","An",";","An","=","vec3","(","0.299",",","0.587",",","0.114",")",";","Am","=","dot","(","Al",".","rgb",",","An",")",";","return","Am",";","}","vec4","AB","(",")","{","vec2","Ap",";","float","Aq",",","Ar",",","As",",","At",",","Au",",","Av",";","vec4","Aw",",","Ax",",","Ay",",","Az",",","AA",";","Aw","=","Ak","(","-","1.0",",","-","1.0",")",";","Ax","=","Ak","(","1.0",",","-","1.0",")",";","Ay","=","Ak","(","-","1.0",",","1.0",")",";","Az","=","Ak","(","1.0",",","1.0",")",";","AA","=","Ak","(","0.0",",","0.0",")",";","Aq","=","Ao","(","Aw",")",";","Ar","=","Ao","(","Ax",")",";","As","=","Ao","(","Ay",")",";","At","=","Ao","(","Az",")",";","Au","=","Ao","(","AA",")",";","Av","=","min","(","Au",",","min","(","min","(","Aq",",","Ar",")",",","min","(","As",",","At",")",")",")",";","Au","=","max","(","Au",",","max","(","max","(","Aq",",","Ar",")",",","max","(","As",",","At",")",")",")",";","Ap",".","x","=","-","(","(","Aq","+","Ar",")","-","(","As","+","At",")",")",";","Ap",".","y","=","(","(","Aq","+","As",")","-","(","Ar","+","At",")",")",";","At","=","max","(","(","Aq","+","Ar","+","As","+","At",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","At","=","1.0","/","(","min","(","abs","(","Ap",".","x",")",",","abs","(","Ap",".","y",")",")","+","At",")",";","Ap","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","Ap","*","At",")",")","*","u_texel_size",";","AA","=","0.5","*","(","texture2D","(","u_color",",","bE","+","Ap","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","bE","+","Ap","*","(","2.0","/","3.0","-","0.5",")",")",")",";","Az","=","AA","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","bE","+","Ap","*","-","0.5",")","+","texture2D","(","u_color",",","bE","+","Ap","*","0.5",")",")",";","At","=","Ao","(","Az",")",";","if","(","(","At","<","Av",")","||","(","At",">","Au",")",")","return","AA",";","else","return","Az",";","}"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["(","1.0","/","6.0",")"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["(","1.0","/","12.0",")"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["(","3.0","/","4.0",")"]},{type:"textline",tokens:["vec4","Bf","(",")","{","bool","AC",",","AD",",","AE",",","AF",",","AG",";","float","AH",",","AI",",","AJ",",","AK",",","AL",",","AM",",","AN",",","AO",",","AP",",","AQ",",","AR",",","AS",",","AT",",","AU",",","AV",";","vec4","AW",",","AX",",","AY",",","AZ",",","A_",";","vec2","Ba",",","Bb",",","Bc",",","Bd",",","Be",";","Ba",".","x","=","bE",".","x",";","Ba",".","y","=","bE",".","y",";","AW","=","texture2D","(","u_color",",","Ba",")",";","AX","=","Ak","(","0.0",",","1.0",")",";","AY","=","Ak","(","1.0",",","0.0",")",";","AZ","=","Ak","(","0.0",",","-","1.0",")",";","A_","=","Ak","(","-","1.0",",","0.0",")",";","AH","=","Ao","(","AX",")",";","AI","=","Ao","(","AY",")",";","AJ","=","Ao","(","AZ",")",";","AK","=","Ao","(","A_",")",";","AL","=","Ao","(","AW",")",";","AM","=","max","(","AH",",","AL",")",";","AN","=","min","(","AH",",","AL",")",";","AM","=","max","(","AI",",","AM",")",";","AN","=","min","(","AI",",","AN",")",";","AO","=","max","(","AJ",",","AK",")",";","AP","=","min","(","AJ",",","AK",")",";","AM","=","max","(","AO",",","AM",")",";","AN","=","min","(","AP",",","AN",")",";","AP","=","AM","*","FXAA_QUALITY_EDGE_THRESHOLD",";","AN","=","AM","-","AN",";","AP","=","max","(","FXAA_QUALITY_EDGE_THRESHOLD_MIN",",","AP",")",";","AC","=","AN","<","AP",";","if","(","AC",")","return","AW",";","AW","=","Ak","(","-","1.0",",","-","1.0",")",";","A_","=","Ak","(","1.0",",","1.0",")",";","AZ","=","Ak","(","1.0",",","-","1.0",")",";","AY","=","Ak","(","-","1.0",",","1.0",")",";","AP","=","Ao","(","AW",")",";","AM","=","Ao","(","A_",")",";","AO","=","Ao","(","AZ",")",";","AQ","=","Ao","(","AY",")",";","AR","=","AJ","+","AH",";","AS","=","AK","+","AI",";","AN","=","1.0","/","AN",";","AT","=","AR","+","AS",";","AR","=","(","-","2.0","*","AL",")","+","AR",";","AS","=","(","-","2.0","*","AL",")","+","AS",";","AU","=","AO","+","AM",";","AO","=","AP","+","AO",";","AV","=","(","-","2.0","*","AI",")","+","AU",";","AO","=","(","-","2.0","*","AJ",")","+","AO",";","AP","=","AP","+","AQ",";","AM","=","AQ","+","AM",";","AV","=","(","abs","(","AR",")","*","2.0",")","+","abs","(","AV",")",";","AO","=","(","abs","(","AS",")","*","2.0",")","+","abs","(","AO",")",";","AS","=","(","-","2.0","*","AK",")","+","AP",";","AM","=","(","-","2.0","*","AH",")","+","AM",";","AV","=","abs","(","AS",")","+","AV",";","AO","=","abs","(","AM",")","+","AO",";","AU","=","AP","+","AU",";","AP","=","u_texel_size",".","x",";","AC","=","AV",">=","AO",";","AU","=","AT","*","2.0","+","AU",";","if","(","!","AC",")","AJ","=","AK",";","if","(","!","AC",")","AH","=","AI",";","if","(","AC",")","AP","=","u_texel_size",".","y",";","AU","=","(","AU","*","(","1.0","/","12.0",")",")","-","AL",";","AI","=","AJ","-","AL",";","AK","=","AH","-","AL",";","AJ","=","AJ","+","AL",";","AH","=","AH","+","AL",";","AD","=","abs","(","AI",")",">=","abs","(","AK",")",";","AK","=","max","(","abs","(","AI",")",",","abs","(","AK",")",")",";","if","(","AD",")","AP","=","-","AP",";","AN","=","clamp","(","abs","(","AU",")","*","AN",",","0.0",",","1.0",")",";","Bb",".","x","=","Ba",".","x",";","Bb",".","y","=","Ba",".","y",";","Bc",".","x","=","(","!","AC",")","?","0.0",":","u_texel_size",".","x",";","Bc",".","y","=","(","AC",")","?","0.0",":","u_texel_size",".","y",";","if","(","!","AC",")","Bb",".","x","+=","AP","*","0.5",";","if","(","AC",")","Bb",".","y","+=","AP","*","0.5",";","Bd",".","x","=","Bb",".","x","-","Bc",".","x",";","Bd",".","y","=","Bb",".","y","-","Bc",".","y",";","Be",".","x","=","Bb",".","x","+","Bc",".","x",";","Be",".","y","=","Bb",".","y","+","Bc",".","y",";","AU","=","(","(","-","2.0",")","*","AN",")","+","3.0",";","AI","=","Ao","(","texture2D","(","u_color",",","Bd",")",")",";","AN","=","AN","*","AN",";","AT","=","Ao","(","texture2D","(","u_color",",","Be",")",")",";","if","(","!","AD",")","AJ","=","AH",";","AK","=","AK","*","1.0","/","4.0",";","AL","=","AL","-","AJ","*","0.5",";","AN","=","AU","*","AN",";","AD","=","AL","<","0.0",";","AI","-=","AJ","*","0.5",";","AT","-=","AJ","*","0.5",";","AE","=","abs","(","AI",")",">=","AK",";","AF","=","abs","(","AT",")",">=","AK",";","if","(","!","AE",")","Bd",".","x","-=","Bc",".","x","*","1.5",";","if","(","!","AE",")","Bd",".","y","-=","Bc",".","y","*","1.5",";","AG","=","(","!","AE",")","||","(","!","AF",")",";","if","(","!","AF",")","Be",".","x","+=","Bc",".","x","*","1.5",";","if","(","!","AF",")","Be",".","y","+=","Bc",".","y","*","1.5",";","if","(","AG",")","{","if","(","!","AE",")","AI","=","Ao","(","texture2D","(","u_color",",","Bd",".","xy",")",")",";","if","(","!","AF",")","AT","=","Ao","(","texture2D","(","u_color",",","Be",".","xy",")",")",";","if","(","!","AE",")","AI","=","AI","-","AJ","*","0.5",";","if","(","!","AF",")","AT","=","AT","-","AJ","*","0.5",";","AE","=","abs","(","AI",")",">=","AK",";","AF","=","abs","(","AT",")",">=","AK",";","if","(","!","AE",")","Bd",".","x","-=","Bc",".","x","*","2.0",";","if","(","!","AE",")","Bd",".","y","-=","Bc",".","y","*","2.0",";","AG","=","(","!","AE",")","||","(","!","AF",")",";","if","(","!","AF",")","Be",".","x","+=","Bc",".","x","*","2.0",";","if","(","!","AF",")","Be",".","y","+=","Bc",".","y","*","2.0",";","if","(","AG",")","{","if","(","!","AE",")","AI","=","Ao","(","texture2D","(","u_color",",","Bd",".","xy",")",")",";","if","(","!","AF",")","AT","=","Ao","(","texture2D","(","u_color",",","Be",".","xy",")",")",";","if","(","!","AE",")","AI","=","AI","-","AJ","*","0.5",";","if","(","!","AF",")","AT","=","AT","-","AJ","*","0.5",";","AE","=","abs","(","AI",")",">=","AK",";","AF","=","abs","(","AT",")",">=","AK",";","if","(","!","AE",")","Bd",".","x","-=","Bc",".","x","*","2.0",";","if","(","!","AE",")","Bd",".","y","-=","Bc",".","y","*","2.0",";","AG","=","(","!","AE",")","||","(","!","AF",")",";","if","(","!","AF",")","Be",".","x","+=","Bc",".","x","*","2.0",";","if","(","!","AF",")","Be",".","y","+=","Bc",".","y","*","2.0",";","if","(","AG",")","{","if","(","!","AE",")","AI","=","Ao","(","texture2D","(","u_color",",","Bd",".","xy",")",")",";","if","(","!","AF",")","AT","=","Ao","(","texture2D","(","u_color",",","Be",".","xy",")",")",";","if","(","!","AE",")","AI","=","AI","-","AJ","*","0.5",";","if","(","!","AF",")","AT","=","AT","-","AJ","*","0.5",";","AE","=","abs","(","AI",")",">=","AK",";","AF","=","abs","(","AT",")",">=","AK",";","if","(","!","AE",")","Bd",".","x","-=","Bc",".","x","*","4.0",";","if","(","!","AE",")","Bd",".","y","-=","Bc",".","y","*","4.0",";","AG","=","(","!","AE",")","||","(","!","AF",")",";","if","(","!","AF",")","Be",".","x","+=","Bc",".","x","*","4.0",";","if","(","!","AF",")","Be",".","y","+=","Bc",".","y","*","4.0",";","if","(","AG",")","{","if","(","!","AE",")","AI","=","Ao","(","texture2D","(","u_color",",","Bd",".","xy",")",")",";","if","(","!","AF",")","AT","=","Ao","(","texture2D","(","u_color",",","Be",".","xy",")",")",";","if","(","!","AE",")","AI","=","AI","-","AJ","*","0.5",";","if","(","!","AF",")","AT","=","AT","-","AJ","*","0.5",";","AE","=","abs","(","AI",")",">=","AK",";","AF","=","abs","(","AT",")",">=","AK",";","if","(","!","AE",")","Bd",".","x","-=","Bc",".","x","*","2.0",";","if","(","!","AE",")","Bd",".","y","-=","Bc",".","y","*","2.0",";","if","(","!","AF",")","Be",".","x","+=","Bc",".","x","*","2.0",";","if","(","!","AF",")","Be",".","y","+=","Bc",".","y","*","2.0",";","}","}","}","}","AK","=","Ba",".","x","-","Bd",".","x",";","AJ","=","Be",".","x","-","Ba",".","x",";","if","(","!","AC",")","AK","=","Ba",".","y","-","Bd",".","y",";","if","(","!","AC",")","AJ","=","Be",".","y","-","Ba",".","y",";","AF","=","(","AI","<","0.0",")","!=","AD",";","AI","=","(","AJ","+","AK",")",";","AD","=","(","AT","<","0.0",")","!=","AD",";","AI","=","1.0","/","AI",";","AE","=","AK","<","AJ",";","AJ","=","min","(","AK",",","AJ",")",";","AD","=","AE","?","AF",":","AD",";","AN","=","AN","*","AN",";","AI","=","(","AJ","*","(","-","AI",")",")","+","0.5",";","AN","=","AN","*","FXAA_QUALITY_SUBPIX",";","AI","=","AD","?","AI",":","0.0",";","AN","=","max","(","AI",",","AN",")",";","if","(","!","AC",")","Ba",".","x","+=","AN","*","AP",";","if","(","AC",")","Ba",".","y","+=","AN","*","AP",";","return","texture2D","(","u_color",",","Ba",")",";","}"]},{type:"define",name:"FXAA_CONSOLE_EDGE_SHARPNESS",tokens:["8.0"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD",tokens:["0.125"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD_MIN",tokens:["0.05"]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_PASS",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","bE",")",";"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","AB","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","Bf","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","0.0",",","1.0",")","*","texture2D","(","u_color",",","bE",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","bE",";","void","main","(",")","{","vec4","Ad",";","vec2","Ai",",","Aj",";","Ai","=","vec2","(","0.0",",","0.0",")",";","Aj","=","u_texel_size",";","Ad","=","texture2D","(","u_color",",","bE",")",";","gl_FragColor","=","Ad","*","0.0875447373698",";","Ai","+=","Aj",";","gl_FragColor","+=","texture2D","(","u_color",",","bE","+","Ai",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","bE","-","Ai",")","*","0.0858112354248",";","Ai","+=","Aj",";","gl_FragColor","+=","texture2D","(","u_color",",","bE","+","Ai",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","bE","-","Ai",")","*","0.0808139781061",";","Ai","+=","Aj",";","gl_FragColor","+=","texture2D","(","u_color",",","bE","+","Ai",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","bE","-","Ai",")","*","0.0731235112908",";","Ai","+=","Aj",";","gl_FragColor","+=","texture2D","(","u_color",",","bE","+","Ai",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","bE","-","Ai",")","*","0.0635705267419",";","Ai","+=","Aj",";","gl_FragColor","+=","texture2D","(","u_color",",","bE","+","Ai",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","bE","-","Ai",")","*","0.0530985673112",";","Ai","+=","Aj",";","gl_FragColor","+=","texture2D","(","u_color",",","bE","+","Ai",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","bE","-","Ai",")","*","0.0426125984122",";","Ai","+=","Aj",";","gl_FragColor","+=","texture2D","(","u_color",",","bE","+","Ai",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","bE","-","Ai",")","*","0.0328565115809",";","Ai","+=","Aj",";","gl_FragColor","+=","texture2D","(","u_color",",","bE","+","Ai",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","bE","-","Ai",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","Ad",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","bE",";","void","main","(",")","{","vec4","Ad",",","Ai",";","Ad","=","texture2D","(","u_main",",","bE",")",";","Ai","=","texture2D","(","u_bloom",",","bE",")",";","Ad","=","Ad",";","Ad","+=","Ai",";","gl_FragColor","=","vec4","(","Ad",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","bE",";","void","main","(",")","{","float","Ad",";","vec3","Ai",",","Aj",";","vec4","Ak",";","Ak","=","texture2D","(","u_color",",","bE",")",";","Ai","=","Ak",".","rgb",";","if","(","u_brightness","<","0.0",")","Ai","=","Ai","*","(","1.0","+","u_brightness",")",";","else","Ai","=","Ai","+","(","(","1.0","-","Ai",")","*","u_brightness",")",";","Ai","=","(","Ai","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","Ai","*=","u_exposure",";","Aj","=","vec3","(","0.299",",","0.587",",","0.114",")",";","Ad","=","dot","(","Ai",",","Aj",")",";","Ai","=","mix","(","vec3","(","Ad",")",",","Ai",",","u_saturation",")",";","gl_FragColor","=","vec4","(","Ai",",","Ak",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","bE",";","void","main","(",")","{","gl_FragColor","=","g","(","clamp","(","Ao","(","u_depth",",","bE",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","bE",";","void","main","(",")","{","float","Ad",",","Ap",";","vec4","Aq",",","Ar",";","Aq","=","texture2D","(","u_sharp",",","bE",")",";","if","(","u_dof_dist",">","0.0",")","{","Ad","=","Ao","(","u_depth",",","bE",",","u_camera_range",")",";","Ad","*=","u_view_max_depth",";","if","(","Ad","<","u_dof_dist",")","Ap","=","(","u_dof_dist","-","Ad",")","/","u_dof_front",";","else","Ap","=","(","Ad","-","u_dof_dist",")","/","u_dof_rear",";","Ap","=","clamp","(","Ap",",","0.0",",","1.0",")",";","Ar","=","texture2D","(","u_blurred",",","bE",")",";","gl_FragColor","=","mix","(","Aq",",","Ar",",","Ap",")",";","}","else","gl_FragColor","=","Aq",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_src_color",";","uniform","sampler2D","u_glow_mask_small",";","uniform","sampler2D","u_glow_mask_large",";","uniform","float","u_glow_mask_small_coeff",";","uniform","float","u_glow_mask_large_coeff",";","varying","vec2","bE",";","void","main","(",")","{","float","Ad",";","vec4","Ap",",","Aq",",","Ar",";","Ap","=","texture2D","(","u_src_color",",","bE",")",";","Aq","=","texture2D","(","u_glow_mask_small",",","bE",")",";","Ar","=","texture2D","(","u_glow_mask_large",",","bE",")",";","gl_FragColor","=","Ap",";","if","(","Ar",".","a","!=","0.0",")","{","Ad","=","u_glow_mask_large_coeff","*","Ar",".","a",";","Ad","=","clamp","(","Ad",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","Ar",".","rgb","/","Ar",".","a",",","Ad",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","Ad",")",";","}","if","(","Aq",".","a","!=","0.0",")","{","Ad","=","u_glow_mask_small_coeff","*","Aq",".","a",";","Ad","=","clamp","(","Ad",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","Aq",".","rgb","/","Aq",".","a",",","Ad",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","Ad",")",";","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","Ap",";","varying","vec2","Aq",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bE",";","varying","vec4","Ar",";","void","main","(",")","{","vec4","As",";","float","At",",","Au",",","Av",",","Aw",",","Ax",";","vec2","Ay",",","Az",",","AA",";","Ay","=","(","Ar",".","xy","-","bE",")",";","At","=","length","(","Ay",")",";","Ay","=","u_radial_blur_step","*","Ay","/","At",";","Au","=","At","/","u_radial_blur_step",";","Ay","*=","min","(","Au",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","Au","=","max","(","Au",",","STEPS_PER_PASS",")",";","Az","=","bE",";","Av","=","0.0",";","for","(","float","AB","=","0.0",";","AB","<","STEPS_PER_PASS",";","AB","+=","1.0",")","{","if","(","AB","<=","Au",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["Aw","=","Ao","(","u_input",",","Az",",","u_camera_range",")",";","Av","+=","max","(","(","1.0","-","pow","(","At",",","0.3",")",")","*","step","(","0.9",",","Aw",")",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["As","=","texture2D","(","u_input",",","Az",")",";","Av","+=","k","(","As",")",";"]}]}}]},{type:"textline",tokens:["}","Az","+=","Ay",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AA","=","bE","+","Aq",";","Ax","=","L","(","vec2","(","2.5","*","(","AA",".","x",")",",","2.5","*","(","AA",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","L","(","vec2","(","5.0","*","(","AA",".","x",")","-","0.66","*","u_time",",","5.0","*","(","AA",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","ag","(","vec2","(","7.5","*","(","AA",".","x",")","+","0.33","*","u_time",",","7.5","*","(","AA",".","y",")","-","0.33","*","u_time",")",")",";","Ax","*=","clamp","(","1.2","-","sqrt","(","0.2","*","At",")",",","0.0",",","1.0",")","*","Ap",";","Av","=","max","(","Ax",",","Av",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","g","(","Av","/","STEPS_PER_PASS",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","float","u_cam_water_depth",";","varying","float","Ap",";","varying","vec2","Aq",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bE",";","varying","vec4","Ar",";","void","main","(",")","{","float","Ad",",","As",";","vec3","At",";","bE","=","a_bb_vertex","+","0.5",";","At","=","normalize","(","u_sun_direction",")",";","Ar","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","At",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","Ap","=","1.0",";","At","=","vec3","(","0.0",",","1.0",",","0.0",")",";","At","=","aS","(","u_camera_quat",",","At",")",";","At","=","normalize","(","At",")",";","Ad","=","dot","(","At",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","As","=","atan","(","At",".","x",",","At",".","z",")",";","Aq","=","vec2","(","-","As",",","acos","(","Ad",")",")",";","}","else","{","Ap","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["Ar",".","xy","=","0.5","*","(","Ar",".","xy","/","Ar",".","w","+","1.0",")",";","Ar","+=","99999.0","*","step","(","Ar",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","uniform","vec3","u_sun_intensity",";","varying","vec2","bE",";","void","main","(",")","{","float","Ad",";","vec3","As",";","vec4","At",";","At","=","texture2D","(","u_main",",","bE",")",";","As","=","clamp","(","u_sun_intensity",",","0.4",",","0.8",")",";","aE","(","At",".","rgb",")",";","Ad","=","k","(","texture2D","(","u_god_rays",",","bE",")",")",";","As","=","At",".","rgb","+","u_god_rays_intensity","*","vec3","(","Ad",")","*","As",";","aG","(","As",")",";","gl_FragColor",".","rgb","=","As",";","gl_FragColor",".","a","=","At",".","a",";","}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","bE",";","void","main","(",")","{","float","Ad",";","vec4","As",";","As","=","texture2D","(","u_input",",","bE",")",";","Ad","=","dot","(","As",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","Ad",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","Ad",",","As",";","As","=","0.0",";","for","(","float","At","=","0.025",";","At","<","1.0",";","At","+=","0.05",")","for","(","float","Au","=","0.025",";","Au","<","1.0",";","Au","+=","0.05",")","{","Ad","=","max","(","texture2D","(","u_input",",","vec2","(","At",",","Au",")",")",".","r",",","0.01",")",";","As","+=","log","(","Ad",")",";","}","As","=","exp","(","As","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","As",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","bE",";","varying","float","As",";","void","main","(",")","{","vec4","At",";","float","Au",",","Av",";","Au","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","Av","=","texture2D","(","u_luminance",",","bE",")",".","r",";","At","=","texture2D","(","u_main",",","bE",")",";","Au","=","Av","/","Au",";","Av","=","u_bloom_edge_lum",";","gl_FragColor","=","At","*","max","(","Au","-","Av",",","0.0",")","*","As",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","bE",";","varying","float","As",";","const","vec3","Ad","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","AA","(","in","vec4","At",",","in","vec3","Au",",","out","vec3","Av",")","{","float","Aw",",","Ax",",","Ay",",","Az",";","Aw","=","At",".","w","*","Au",".","x","+","At",".","y","*","Au",".","z","-","At",".","z","*","Au",".","y",";","Ax","=","At",".","w","*","Au",".","y","+","At",".","z","*","Au",".","x","-","At",".","x","*","Au",".","z",";","Ay","=","At",".","w","*","Au",".","z","+","At",".","x","*","Au",".","y","-","At",".","y","*","Au",".","x",";","Az","=","-","At",".","x","*","Au",".","x","-","At",".","y","*","Au",".","y","-","At",".","z","*","Au",".","z",";","Av",".","x","=","Aw","*","At",".","w","-","Az","*","At",".","x","-","Ax","*","At",".","z","+","Ay","*","At",".","y",";","Av",".","y","=","Ax","*","At",".","w","-","Az","*","At",".","y","-","Ay","*","At",".","x","+","Aw","*","At",".","z",";","Av",".","z","=","Ay","*","At",".","w","-","Az","*","At",".","z","-","Aw","*","At",".","y","+","Ax","*","At",".","x",";","}","void","main","(",")","{","vec3","AB",";","bE","=","2.0","*","a_position",";","AA","(","u_camera_quat",",","Ad",",","AB",")",";","As","=","dot","(","-","AB",",","u_sun_direction",")","*","u_bloom_key",";","As","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","uniform","float","u_motion_blur_decay_threshold",";","varying","vec2","bE",";","float","Ad","=","0.0042",";","void","main","(",")","{","vec4","At",",","Au",",","Av",",","Aw",";","At","=","texture2D","(","u_mb_tex_curr",",","bE",")",";","Au","=","texture2D","(","u_mb_tex_accum",",","bE",")",";","if","(","length","(","At","-","Au",")",">","u_motion_blur_decay_threshold",")","{","Av","=","(","1.0","-","u_motion_blur_exp",")","*","At","+","u_motion_blur_exp","*","Au",";","Av","=","Av","-","Au",";","Aw","=","At","-","Au",";","Av","=","min","(","max","(","abs","(","Av",")",",","vec4","(","Ad",")",")",",","abs","(","Aw",")",")","*","sign","(","Av",")",";","gl_FragColor","=","Au","+","Av",";","}","else","{","gl_FragColor","=","At",";","}","}"]}]},exports["postprocessing/outline.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_outline_src",";","uniform","sampler2D","u_outline_mask",";","uniform","sampler2D","u_outline_mask_blurred",";","uniform","vec3","u_outline_color",";","uniform","float","u_draw_outline",";","varying","vec2","bE",";","void","main","(",")","{","vec3","Ad",";","float","At",";","vec4","Au",",","Av",",","Aw",";","Au","=","texture2D","(","u_outline_src",",","bE",")",";","gl_FragColor","=","Au",";","if","(","u_draw_outline","!=","0.0",")","{","Av","=","texture2D","(","u_outline_mask",",","bE",")",";","Aw","=","texture2D","(","u_outline_mask_blurred",",","bE",")",";","At","=","Aw",".","a","-","Av",".","a",";","if","(","At","!=","0.0",")","{","At","=","smoothstep","(","0.0",",","1.0",",","Aw",".","a",")",";","if","(","Av",".","a","==","0.0",")","{","Ad","=","u_outline_color",";","aG","(","Ad",")",";","Av","=","vec4","(","clamp","(","Ad",",","0.0",",","1.0",")",",","1.0",")",";","gl_FragColor","=","mix","(","Au",",","Av",",","At",")",";","}","}","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","bE",";","void","main","(",")","{","vec2","Ad",",","At",";","vec4","Au",";"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","POST_EFFECT_NONE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","bE",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_GRAYSCALE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Au","=","texture2D","(","u_color",",","bE",")",";","gl_FragColor",".","rgb","=","vec3","(","(","Au",".","r","+","Au",".","g","+","Au",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ad","=","vec2","(","0.0",",","0.0",")",";","At","=","u_texel_size",";","Au","=","texture2D","(","u_color",",","bE",")",";","gl_FragColor","=","Au","*","0.2270270270",";","Ad","+=","At",";","Au","=","texture2D","(","u_color",",","bE","+","Ad",")",";","gl_FragColor","+=","Au","*","0.1945945946",";","Au","=","texture2D","(","u_color",",","bE","-","Ad",")",";","gl_FragColor","+=","Au","*","0.1945945946",";","Ad","+=","At",";","Au","=","texture2D","(","u_color",",","bE","+","Ad",")",";","gl_FragColor","+=","Au","*","0.1216216216",";","Au","=","texture2D","(","u_color",",","bE","-","Ad",")",";","gl_FragColor","+=","Au","*","0.1216216216",";","Ad","+=","At",";","Au","=","texture2D","(","u_color",",","bE","+","Ad",")",";","gl_FragColor","+=","Au","*","0.0540540541",";","Au","=","texture2D","(","u_color",",","bE","-","Ad",")",";","gl_FragColor","+=","Au","*","0.0540540541",";","Ad","+=","At",";","Au","=","texture2D","(","u_color",",","bE","+","Ad",")",";","gl_FragColor","+=","Au","*","0.0162162162",";","Au","=","texture2D","(","u_color",",","bE","-","Ad",")",";","gl_FragColor","+=","Au","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_GLOW_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_GLOW_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ad","=","vec2","(","0.0",",","0.0",")",";","At","=","u_texel_size",";","Au","=","texture2D","(","u_color",",","bE",")",";","gl_FragColor","=","Au","*","(","1.0","-","step","(","0.0",",","-","Au",".","a",")",")","*","0.152507",";","Ad","+=","At",";","Au","=","texture2D","(","u_color",",","bE","+","Ad",")",";","gl_FragColor","+=","Au","*","(","1.0","-","step","(","0.0",",","-","Au",".","a",")",")","*","0.141763",";","Au","=","texture2D","(","u_color",",","bE","-","Ad",")",";","gl_FragColor","+=","Au","*","(","1.0","-","step","(","0.0",",","-","Au",".","a",")",")","*","0.141763",";","Ad","+=","At",";","Au","=","texture2D","(","u_color",",","bE","+","Ad",")",";","gl_FragColor","+=","Au","*","(","1.0","-","step","(","0.0",",","-","Au",".","a",")",")","*","0.113861",";","Au","=","texture2D","(","u_color",",","bE","-","Ad",")",";","gl_FragColor","+=","Au","*","(","1.0","-","step","(","0.0",",","-","Au",".","a",")",")","*","0.113861",";","Ad","+=","At",";","Au","=","texture2D","(","u_color",",","bE","+","Ad",")",";","gl_FragColor","+=","Au","*","(","1.0","-","step","(","0.0",",","-","Au",".","a",")",")","*","0.079019",";","Au","=","texture2D","(","u_color",",","bE","-","Ad",")",";","gl_FragColor","+=","Au","*","(","1.0","-","step","(","0.0",",","-","Au",".","a",")",")","*","0.079019",";","Ad","+=","At",";","Au","=","texture2D","(","u_color",",","bE","+","Ad",")",";","gl_FragColor","+=","Au","*","(","1.0","-","step","(","0.0",",","-","Au",".","a",")",")","*","0.047383",";","Au","=","texture2D","(","u_color",",","bE","-","Ad",")",";","gl_FragColor","+=","Au","*","(","1.0","-","step","(","0.0",",","-","Au",".","a",")",")","*","0.047383",";","Ad","+=","At",";","Au","=","texture2D","(","u_color",",","bE","+","Ad",")",";","gl_FragColor","+=","Au","*","(","1.0","-","step","(","0.0",",","-","Au",".","a",")",")","*","0.024549",";","Au","=","texture2D","(","u_color",",","bE","-","Ad",")",";","gl_FragColor","+=","Au","*","(","1.0","-","step","(","0.0",",","-","Au",".","a",")",")","*","0.024549",";","Ad","+=","At",";","Au","=","texture2D","(","u_color",",","bE","+","Ad",")",";","gl_FragColor","+=","Au","*","(","1.0","-","step","(","0.0",",","-","Au",".","a",")",")","*","0.01099",";","Au","=","texture2D","(","u_color",",","bE","-","Ad",")",";","gl_FragColor","+=","Au","*","(","1.0","-","step","(","0.0",",","-","Au",".","a",")",")","*","0.01099",";","Ad","+=","At",";","Au","=","texture2D","(","u_color",",","bE","+","Ad",")",";","gl_FragColor","+=","Au","*","(","1.0","-","step","(","0.0",",","-","Au",".","a",")",")","*","0.00425",";","Au","=","texture2D","(","u_color",",","bE","-","Ad",")",";","gl_FragColor","+=","Au","*","(","1.0","-","step","(","0.0",",","-","Au",".","a",")",")","*","0.00425",";","Ad","+=","At",";","Au","=","texture2D","(","u_color",",","bE","+","Ad",")",";","gl_FragColor","+=","Au","*","(","1.0","-","step","(","0.0",",","-","Au",".","a",")",")","*","0.00142",";","Au","=","texture2D","(","u_color",",","bE","-","Ad",")",";","gl_FragColor","+=","Au","*","(","1.0","-","step","(","0.0",",","-","Au",".","a",")",")","*","0.00142",";","gl_FragColor","=","clamp","(","gl_FragColor",",","0.0",",","1.0",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_EXTEND",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_EXTEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["At","=","u_texel_size",";","Au","=","texture2D","(","u_color",",","bE",")",";","gl_FragColor","=","Au",";","if","(","Au",".","a","==","0.0",")","{","Au","=","texture2D","(","u_color",",","bE","+","At",")",";","if","(","Au",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","Au",".","a",")",";","else","{","Au","=","texture2D","(","u_color",",","bE","-","At",")",";","if","(","Au",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","Au",".","a",")",";","}","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","varying","vec2","bE",";","void","main","(",")","{","bE","=","2.0","*","a_position",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2},"SMAA_PREDICATION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","bE",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","At",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Au",";","varying","vec4","Av",";","varying","vec4","Aw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","Ax",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","AD","(","vec2","Ay",",","sampler2D","Az",")","{","float","AA",",","AB",",","AC",";","AA","=","texture2D","(","Az",",","Ay",")",".","r",";","AB","=","texture2D","(","Az",",","Au",".","xy",")",".","r",";","AC","=","texture2D","(","Az",",","Au",".","zw",")",".","r",";","return","vec3","(","AA",",","AB",",","AC",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","AI","(","vec2","AE",",","sampler2D","AF",")","{","vec2","AG",";","vec3","AH",";","AH","=","AD","(","AE",",","AF",")",";","AG","=","abs","(","AH",".","xx","-","AH",".","yz",")",";","AG","=","step","(","SMAA_PREDICATION_THRESHOLD",",","AG",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","AG",")",";","}"]}]}}]},{type:"textline",tokens:["void","AM","(","bvec2","AJ",",","inout","vec2","AK",",","vec2","AL",")","{","if","(","AJ",".","x",")","AK",".","x","=","AL",".","x",";","if","(","AJ",".","y",")","AK",".","y","=","AL",".","y",";","}","void","AM","(","bvec4","AN",",","inout","vec4","AO",",","vec4","AP",")","{","AM","(","AN",".","xy",",","AO",".","xy",",","AP",".","xy",")",";","AM","(","AN",".","zw",",","AO",".","zw",",","AP",".","zw",")",";","}","vec2","AR","(","vec2","AQ",")","{","return","sign","(","AQ",")","*","floor","(","abs","(","AQ",")","+",".5",")",";","}","vec4","AR","(","vec4","AS",")","{","return","sign","(","AS",")","*","floor","(","abs","(","AS",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Be","(","vec2","AT",",","sampler2D","AU"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","AV"]}]}}]},{type:"textline",tokens:[")","{","vec4","AW",";","float","AX",",","AY",",","AZ",",","A_",",","Ba",";","vec3","Bb",";","vec2","Bc",",","Bd",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["Bc","=","AI","(","AT",",","AV",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Bc","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["Bb","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","AX","=","dot","(","texture2D","(","AU",",","AT",")",".","rgb",",","Bb",")",";","AY","=","dot","(","texture2D","(","AU",",","Au",".","xy",")",".","rgb",",","Bb",")",";","AZ","=","dot","(","texture2D","(","AU",",","Au",".","zw",")",".","rgb",",","Bb",")",";","AW",".","xy","=","abs","(","AX","-","vec2","(","AY",",","AZ",")",")",";","Bc","=","step","(","Bc",",","AW",".","xy",")",";","if","(","dot","(","Bc",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","A_","=","dot","(","texture2D","(","AU",",","Av",".","xy",")",".","rgb",",","Bb",")",";","Ba","=","dot","(","texture2D","(","AU",",","Av",".","zw",")",".","rgb",",","Bb",")",";","AW",".","zw","=","abs","(","AX","-","vec2","(","A_",",","Ba",")",")",";","Bd","=","max","(","AW",".","xy",",","AW",".","zw",")",";","Ba","=","dot","(","texture2D","(","AU",",","Aw",".","xy",")",".","rgb",",","Bb",")",";","A_","=","dot","(","texture2D","(","AU",",","Aw",".","zw",")",".","rgb",",","Bb",")",";","AW",".","zw","=","abs","(","vec2","(","AY",",","AZ",")","-","vec2","(","Ba",",","A_",")",")",";","Bd","=","max","(","Bd",".","xy",",","AW",".","zw",")",";","A_","=","max","(","Bd",".","x",",","Bd",".","y",")",";","Bc",".","xy","*=","step","(","A_",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","AW",".","xy",")",";","return","Bc",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Bg","(","vec2","Bf",")","{","Bf",".","r","=","Bf",".","r","*","abs","(","5.0","*","Bf",".","r","-","5.0","*","0.75",")",";","return","AR","(","Bf",")",";","}","vec4","Bg","(","vec4","Bh",")","{","Bh",".","rb","=","Bh",".","rb","*","abs","(","5.0","*","Bh",".","rb","-","5.0","*","0.75",")",";","return","AR","(","Bh",")",";","}","vec2","Bp","(","sampler2D","Bi",",","vec2","Bj",",","vec2","Bk",",","out","vec2","Bl",")","{","vec3","Bm",";","vec4","Bn",";","Bn","=","vec4","(","Bj",",","-","1.0",",","1.0",")",";","Bm","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","Bo","=","0",";","Bo","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","Bo","++",")","{","if","(","Bn",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","Bn",".","w",">","0.9",")","{","Bn",".","xyz","+=","Bm","*","vec3","(","Bk",",","1.0",")",";","Bl","=","texture2D","(","Bi",",","Bn",".","xy",",","0.0",")",".","rg",";","Bn",".","w","=","dot","(","Bl",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","Bn",".","zw",";","}","vec2","Bx","(","sampler2D","Bq",",","vec2","Br",",","vec2","Bs",",","out","vec2","Bt",")","{","vec3","Bu",";","vec4","Bv",";","Bv","=","vec4","(","Br",",","-","1.0",",","1.0",")",";","Bv",".","x","+=","0.25","*","u_texel_size",".","x",";","Bu","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","Bw","=","0",";","Bw","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","Bw","++",")","{","if","(","Bv",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","Bv",".","w",">","0.9",")","{","Bv",".","xyz","=","Bu","*","vec3","(","Bs",",","1.0",")","+","Bv",".","xyz",";","Bt","=","texture2D","(","Bq",",","Bv",".","xy",",","0.0",")",".","rg",";","Bt","=","Bg","(","Bt",")",";","Bv",".","w","=","dot","(","Bt",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","Bv",".","zw",";","}","vec2","BD","(","sampler2D","By",",","vec2","Bz",",","vec2","BA",",","float","BB",")","{","vec2","BC",";","BC","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","BA","+","Bz",";","BC","=","SMAA_AREATEX_PIXEL_SIZE","*","BC","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","BC",".","x","+=","0.5",";","BC",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","BB",";","return","texture2D","(","By",",","BC",",","0.0",")",".","rg",";","}","vec2","BP","(","sampler2D","BE",",","sampler2D","BF",",","vec2","BG",",","vec2","BH",",","vec4","BI",")","{","vec4","BJ",",","BK",",","BL",";","vec2","BM",",","BN",",","BO",";","BM","=","vec2","(","0.0",",","0.0",")",";","if","(","BH",".","r",">","0.0",")","{","BJ",".","xz","=","Bp","(","BE",",","BG",",","vec2","(","-","1.0",",","1.0",")",",","BN",")",";","BJ",".","x","+=","float","(","BN",".","y",">","0.9",")",";","}","else","BJ",".","xz","=","vec2","(","0.0",",","0.0",")",";","BJ",".","yw","=","Bp","(","BE",",","BG",",","vec2","(","1.0",",","-","1.0",")",",","BN",")",";","if","(","BJ",".","x","+","BJ",".","y",">","2.0",")","{","BK","=","vec4","(","-","BJ",".","x","+","0.25",",","BJ",".","x",",","BJ",".","y",",","-","BJ",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","BG",".","xyxy",";","BL",".","xy","=","texture2D","(","BE",",","BK",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","BL",".","zw","=","texture2D","(","BE",",","BK",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","BL",".","yxwz","=","Bg","(","BL",".","xyzw",")",";","BO","=","vec2","(","2.0",",","2.0",")","*","BL",".","xz","+","BL",".","yw",";","AM","(","bvec2","(","step","(","0.9",",","BJ",".","zw",")",")",",","BO",",","vec2","(","0.0",",","0.0",")",")",";","BM","+=","BD","(","BF",",","BJ",".","xy",",","BO",",","BI",".","z",")",";","}","BJ",".","xz","=","Bx","(","BE",",","BG",",","vec2","(","-","1",",","-","1",")",",","BN",")",";","if","(","texture2D","(","BE",",","BG","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","BJ",".","yw","=","Bx","(","BE",",","BG",",","vec2","(","1",",","1",")",",","BN",")",";","BJ",".","y","+=","float","(","BN",".","y",">","0.9",")",";","}","else","BJ",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","BJ",".","x","+","BJ",".","y",">","2.0",")","{","BL","=","vec4","(","-","BJ",".","x",",","-","BJ",".","x",",","BJ",".","y",",","BJ",".","y",")","*","u_texel_size",".","xyxy","+","BG",".","xyxy",";","BK",".","x","=","texture2D","(","BE",",","BL",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","BK",".","y","=","texture2D","(","BE",",","BL",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","BK",".","zw","=","texture2D","(","BE",",","BL",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","BN","=","vec2","(","2.0",",","2.0",")","*","BK",".","xz","+","BK",".","yw",";","AM","(","bvec2","(","step","(","0.9",",","BJ",".","zw",")",")",",","BN",",","vec2","(","0",",","0",")",")",";","BM","+=","BD","(","BF",",","BJ",".","xy",",","BN",",","BI",".","w",")",".","gr",";","}","return","BM",";","}"]}]}}]},{type:"textline",tokens:["float","BV","(","sampler2D","BQ",",","vec2","BR",",","float","BS",")","{","vec2","BT",",","BU",";","BT","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","BU","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","BS",",","1.0",")",";","BT","+=","vec2","(","-","1.0",",","1.0",")",";","BU","+=","vec2","(","0.5",",","-","0.5",")",";","BT","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","BU","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","BQ",",","BT","*","BR","+","BU",",","0.0",")",".","r",";","}","float","Cc","(","sampler2D","BW",",","sampler2D","BX",",","vec2","BY",",","float","BZ",")","{","float","B_",";","vec2","Ca",";","Ca","=","vec2","(","0.0",",","1.0",")",";","for","(","int","Cb","=","0",";","Cb","<","SMAA_MAX_SEARCH_STEPS",";","Cb","++",")","{","if","(","BY",".","x",">","BZ","&&","Ca",".","g",">","0.8281","&&","Ca",".","r","==","0.0",")","{","Ca","=","texture2D","(","BW",",","BY",",","0.0",")",".","rg",";","BY","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","BY",";","}","}","B_","=","-","(","255.0","/","127.0",")","*","BV","(","BX",",","Ca",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","B_","+","BY",".","x",";","}","float","Ck","(","sampler2D","Cd",",","sampler2D","Ce",",","vec2","Cf",",","float","Cg",")","{","float","Ch",";","vec2","Ci",";","Ci","=","vec2","(","0.0",",","1.0",")",";","for","(","int","Cj","=","0",";","Cj","<","SMAA_MAX_SEARCH_STEPS",";","Cj","++",")","{","if","(","Cf",".","x","<","Cg","&&","Ci",".","g",">","0.8281","&&","Ci",".","r","==","0.0",")","{","Ci","=","texture2D","(","Cd",",","Cf",",","0.0",")",".","rg",";","Cf","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","Cf",";","}","}","Ch","=","-","(","255.0","/","127.0",")","*","BV","(","Ce",",","Ci",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","Ch","+","Cf",".","x",";","}","float","Cs","(","sampler2D","Cl",",","sampler2D","Cm",",","vec2","Cn",",","float","Co",")","{","float","Cp",";","vec2","Cq",";","Cq","=","vec2","(","1.0",",","0.0",")",";","for","(","int","Cr","=","0",";","Cr","<","SMAA_MAX_SEARCH_STEPS",";","Cr","++",")","{","if","(","Cn",".","y",">","Co","&&","Cq",".","r",">","0.8281","&&","Cq",".","g","==","0.0",")","{","Cq","=","texture2D","(","Cl",",","Cn",",","0.0",")",".","rg",";","Cn","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","Cn",";","}","}","Cp","=","-","(","255.0","/","127.0",")","*","BV","(","Cm",",","Cq",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","Cp","+","Cn",".","y",";","}","float","CA","(","sampler2D","Ct",",","sampler2D","Cu",",","vec2","Cv",",","float","Cw",")","{","float","Cx",";","vec2","Cy",";","Cy","=","vec2","(","1.0",",","0.0",")",";","for","(","int","Cz","=","0",";","Cz","<","SMAA_MAX_SEARCH_STEPS",";","Cz","++",")","{","if","(","Cv",".","y","<","Cw","&&","Cy",".","r",">","0.8281","&&","Cy",".","g","==","0.0",")","{","Cy","=","texture2D","(","Ct",",","Cv",",","0.0",")",".","rg",";","Cv","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","Cv",";","}","}","Cx","=","-","(","255.0","/","127.0",")","*","BV","(","Cu",",","Cy",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","Cx","+","Cv",".","y",";","}","vec2","CH","(","sampler2D","CB",",","vec2","CC",",","float","CD",",","float","CE",",","float","CF",")","{","vec2","CG",";","CG","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","AR","(","4.0","*","vec2","(","CD",",","CE",")",")","+","CC",";","CG","=","SMAA_AREATEX_PIXEL_SIZE","*","CG","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","CG",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","CF","+","CG",".","y",";","return","texture2D","(","CB",",","CG",",","0.0",")",".","rg",";","}","void","CO","(","sampler2D","CI",",","inout","vec2","CJ",",","vec4","CK",",","vec2","CL",")","{","vec2","CM",",","CN",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["CM","=","step","(","CL",".","xy",",","CL",".","yx",")",";","CN","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","CM",";","CN","/=","CM",".","x","+","CM",".","y",";","CM","=","vec2","(","1.0",",","1.0",")",";","CM",".","x","-=","CN",".","x","*","texture2D","(","CI",",","CK",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","CM",".","x","-=","CN",".","y","*","texture2D","(","CI",",","CK",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","CM",".","y","-=","CN",".","x","*","texture2D","(","CI",",","CK",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","CM",".","y","-=","CN",".","y","*","texture2D","(","CI",",","CK",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","CJ","*=","clamp","(","CM",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","CV","(","sampler2D","CP",",","inout","vec2","CQ",",","vec4","CR",",","vec2","CS",")","{","vec2","CT",",","CU",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["CT","=","step","(","CS",".","xy",",","CS",".","yx",")",";","CU","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","CT",";","CU","/=","CT",".","x","+","CT",".","y",";","CT","=","vec2","(","1.0",",","1.0",")",";","CT",".","x","-=","CU",".","x","*","texture2D","(","CP",",","CR",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","CT",".","x","-=","CU",".","y","*","texture2D","(","CP",",","CR",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","CT",".","y","-=","CU",".","x","*","texture2D","(","CP",",","CR",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","CT",".","y","-=","CU",".","y","*","texture2D","(","CP",",","CR",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","CQ","*=","clamp","(","CT",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Di","(","vec2","CW",",","vec2","CX",",","sampler2D","CY",",","sampler2D","CZ",",","sampler2D","C_",",","vec4","Da",")","{","float","Db",",","Dc",";","vec3","Dd",";","vec2","De",",","Df",",","Dg",";","vec4","Dh",";","Dh","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","De","=","texture2D","(","CY",",","CW",")",".","rg",";","if","(","De",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Dh",".","rg","=","BP","(","CY",",","CZ",",","CW",",","De",",","Da",")",";","if","(","Dh",".","r","==","-","Dh",".","g",")","{"]}]}}]},{type:"textline",tokens:[";","Dd",".","x","=","Cc","(","CY",",","C_",",","Au",".","xy",",","Aw",".","x",")",";","Dd",".","y","=","Av",".","y",";","Df",".","x","=","Dd",".","x",";","Db","=","texture2D","(","CY",",","Dd",".","xy",",","0.0",")",".","r",";","Dd",".","z","=","Ck","(","CY",",","C_",",","Au",".","zw",",","Aw",".","y",")",";","Df",".","y","=","Dd",".","z",";","Df","=","abs","(","AR","(","Df","/","u_texel_size",".","xx","-","CX",".","xx",")",")",";","Dg","=","sqrt","(","Df",")",";","Dc","=","texture2D","(","CY",",","Dd",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","Dh",".","rg","=","CH","(","CZ",",","Dg",",","Db",",","Dc",",","Da",".","y",")",";","Dd",".","y","=","CW",".","y",";","CO","(","CY",",","Dh",".","rg",",","Dd",".","xyzy",",","Df",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["}","else","De",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","De",".","r",">","0.0",")","{",";","Dd",".","y","=","Cs","(","CY",",","C_",",","Av",".","xy",",","Aw",".","z",")",";","Dd",".","x","=","Au",".","x",";","De",".","x","=","Dd",".","y",";","Dc","=","texture2D","(","CY",",","Dd",".","xy",",","0.0",")",".","g",";","Dd",".","z","=","CA","(","CY",",","C_",",","Av",".","zw",",","Aw",".","w",")",";","De",".","y","=","Dd",".","z",";","De","=","abs","(","AR","(","De","/","u_texel_size",".","yy","-","CX",".","yy",")",")",";","Df","=","sqrt","(","De",")",";","Db","=","texture2D","(","CY",",","Dd",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","Dh",".","ba","=","CH","(","CZ",",","Df",",","Dc",",","Db",",","Da",".","x",")",";","Dd",".","x","=","CW",".","x",";","CV","(","CY",",","Dh",".","ba",",","Dd",".","xyxz",",","De",")",";","}","return","Dh",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Du","(","vec2","Dj",",","sampler2D","Dk",",","sampler2D","Dl"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","Dm"]}]}}]},{type:"textline",tokens:[")","{","bool","Dn",";","vec2","Do",",","Dp",",","Dq",";","vec4","Dr",",","Ds",",","Dt",";","Dr",".","x","=","texture2D","(","Dl",",","At",".","xy",")",".","a",";","Dr",".","y","=","texture2D","(","Dl",",","At",".","zw",")",".","g",";","Dr",".","wz","=","texture2D","(","Dl",",","Dj",")",".","xz",";","if","(","dot","(","Dr",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","Ds","=","texture2D","(","Dk",",","Dj",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["Dt","=","texture2D","(","Dm",",","bE",")",";","Do","=","2.0","*","s","(","Dt",")","-","1.0",";","Ds",".","a","=","sqrt","(","2.0","*","length","(","Do",")",")",";"]}]}}]},{type:"textline",tokens:["return","Ds",";","}","else","{","Dn","=","max","(","Dr",".","x",",","Dr",".","z",")",">","max","(","Dr",".","y",",","Dr",".","w",")",";","Ds","=","vec4","(","0.0",",","Dr",".","y",",","0.0",",","Dr",".","w",")",";","Do","=","Dr",".","yw",";","AM","(","bvec4","(","Dn",",","Dn",",","Dn",",","Dn",")",",","Ds",",","vec4","(","Dr",".","x",",","0.0",",","Dr",".","z",",","0.0",")",")",";","AM","(","bvec2","(","Dn",",","Dn",")",",","Do",",","Dr",".","xz",")",";","Do","/=","dot","(","Do",",","vec2","(","1.0",",","1.0",")",")",";","Ds","=","Ds","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","Dj",".","xyxy",";","Dr","=","Do",".","x","*","texture2D","(","Dk",",","Ds",".","xy",",","0.0",")",";","Dr","+=","Do",".","y","*","texture2D","(","Dk",",","Ds",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["Dt","=","texture2D","(","Dm",",","Ds",".","xy",")",";","Dp","=","2.0","*","s","(","Dt",")","-","1.0",";","Dq","=","Do",".","x","*","Dp",";","Dt","=","texture2D","(","Dm",",","Ds",".","zw",")",";","Dp","=","2.0","*","s","(","Dt",")","-","1.0",";","Dq","+=","Do",".","y","*","Dp",";","Dr",".","a","=","sqrt","(","2.0","*","length","(","Dq",")",")",";"]}]}}]},{type:"textline",tokens:["return","Dr",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","DE","(","vec2","Dv",",","sampler2D","Dw",",","sampler2D","Dx"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","Dy"]}]}}]},{type:"textline",tokens:[")","{","float","Dz",";","vec2","DA",";","vec4","DB",",","DC",",","DD",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["DB","=","texture2D","(","Dy",",","bE",")",";","DA","=","2.0","*","s","(","DB",")","-","1.0",";","DB","=","texture2D","(","Dw",",","Dv",")",";","DC","=","texture2D","(","Dx",",","Dv","-","DA",")",";","Dz","=","abs","(","DB",".","a","*","DB",".","a","-","DC",".","a","*","DC",".","a",")","/","2.0",";","Dz","=","0.5","*","clamp","(","1.0","-","sqrt","(","Dz",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","DD","=","mix","(","DB",",","DC",",","Dz",")",";","DD",".","a","=","1.0",";","return","DD",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["DB","=","texture2D","(","Dw",",","Dv",")",";","DC","=","texture2D","(","Dx",",","Dv",")",";","return","mix","(","DB",",","DC",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","DF",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["DF","=","vec4","(","Be","(","bE",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["DF","=","Di","(","bE",",","Ax",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["DF","=","Du","(","bE",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["DF","=","vec4","(","DE","(","bE",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["DF","=","texture2D","(","u_color",",","bE",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","DF",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec2","u_texel_size",";","varying","vec2","bE",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","At",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Au",";","varying","vec4","Av",";","varying","vec4","Aw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","Ax",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Ay","(","vec2","Ad",")","{","Au","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","Ad",".","xyxy",";","Av","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","Ad",".","xyxy",";","Aw","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","Ad",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","AB","(","vec2","Az",",","out","vec2","AA",")","{","AA","=","Az","/","u_texel_size",";","Au","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","Az",".","xyxy",";","Av","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","Az",".","xyxy",";","Aw","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","Au",".","xz",",","Av",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","AD","(","vec2","AC",")","{","At","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","AC",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","bE","=","2.0","*","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ay","(","bE",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AB","(","bE",",","Ax",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AD","(","bE",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"define",name:"SSAO_QUALITY_8",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_16",tokens:["2"]},{type:"define",name:"SSAO_QUALITY_24",tokens:["3"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","sampler2D","u_ssao_special_tex",";","uniform","vec2","u_camera_range",";","uniform","vec2","u_texel_size",";","varying","vec2","bE",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","float","Ay","(","in","vec2","Ad",")","{","return","Ao","(","u_depth",",","Ad",",","u_camera_range",")",";","}","void","main","(",")","{","vec3","Az",",","AA",",","AB",";","float","AC",",","AD",",","AE",",","AF",",","AG",",","AH",",","AI",";","AC","=","texture2D","(","u_color",",","bE",")",".","r",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","AC",",","1.0",",","0.0",",","1.0",")",";","return",";"]}]}}]},{type:"textline",tokens:["Az","=","normalize","(","2.0","*","texture2D","(","u_ssao_special_tex",",","bE","*","0.25","/","u_texel_size",")",".","rgb","-","1.0",")",";","AD","=","Ay","(","bE",")",";","AE","=","AD","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","SSAO_QUALITY_8",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","AJ","=","8.0",";","const","int","AK","=","1",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_16",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","AJ","=","16.0",";","const","int","AK","=","2",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_24",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","AJ","=","24.0",";","const","int","AK","=","3",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_32",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","AJ","=","32.0",";","const","int","AK","=","4",";"]}]}}]},{type:"textline",tokens:["AF","=","u_ssao_radius_increase","*","0.001",";","const","float","AL","=","1.0","+","2.4","/","AJ",";","AG","=","0.0",";","for","(","int","AM","=","0",";","AM","<","AK",";","AM","++",")","for","(","int","AN","=","-","1",";","AN","<=","1",";","AN","+=","2",")","for","(","int","AO","=","-","1",";","AO","<=","1",";","AO","+=","2",")","for","(","int","AP","=","-","1",";","AP","<=","1",";","AP","+=","2",")","{","AA","=","reflect","(","normalize","(","vec3","(","AN",",","AO",",","AP",")",")",",","Az",")","*","(","AF","*=","AL",")",";","AB","=","vec3","(","bE",",","AE",")",";","AB","+=","vec3","(","AA",".","xy",",","AA",".","z","*","AE","*","2.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["AB",".","z","-=","1.4","*","(","AB",".","z","-","AE",")","*","step","(","AE",",","AB",".","z",")",";"]}]}}]},{type:"textline",tokens:["AH","=","Ay","(","AB",".","xy",")","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";","AI","=","clamp","(","(","AE","-","AH",")","/","AH",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["AG","+=","mix","(","1.0",",","AI",",","step","(","AH",",","AB",".","z",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AG","+=","mix","(","step","(","AB",".","z",",","AH",")",",","0.5",",","AI",")",";"]}]}}]},{type:"textline",tokens:["}","AG","=","AG","/","AJ",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["AG","=","clamp","(","AG","*","AG","+","0.6","*","AG",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AG","=","clamp","(","AG","*","AG","+","AG",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["AD","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","AD",")",";","AG","=","mix","(","1.0",",","AG",",","AD",")",";","gl_FragColor","=","vec4","(","AC",",","AG",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao_blur.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"include",file:"depth_fetch.glslf"}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_ssao_mask",";","uniform","vec2","u_texel_size",";","varying","vec2","bE",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","uniform","float","u_ssao_blur_discard_value",";","float","Ay","(","in","vec2","Ad",")","{","return","Ao","(","u_depth",",","Ad",",","u_camera_range",")",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Az",",","AA",";","float","AB",",","AC",",","AD",",","AE",",","AF",",","AG",",","AH",";","AB","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["AC","=","Ay","(","bE",")",";","AD","=","0.0",";","AE","=","u_ssao_blur_discard_value","*","100.0",";"]}]}}]},{type:"textline",tokens:["Az","=","vec2","(","-","2.0",")",";","for","(","int","AI","=","0",";","AI","<","4",";","++","AI",")","{","for","(","int","AJ","=","0",";","AJ","<","4",";","++","AJ",")","{","AA","=","(","Az","+","vec2","(","float","(","AI",")",",","float","(","AJ",")",")",")","*","u_texel_size",";","AF","=","texture2D","(","u_ssao_mask",",","bE","+","AA",")",".","g",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["AG","=","Ay","(","bE","+","AA",")",";","AH","=","1.0","-","clamp","(","abs","(","AG","-","AC",")","*","AE",",","0.0",",","1.0",")",";","AB","+=","AF","*","AH",";","AD","+=","AH",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["AB","+=","AF",";"]}]}}]},{type:"textline",tokens:["}","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","bE",")",".","r",",","AB","/","AD",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","bE",")",".","r",",","AB","/","16.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","bE",";","void","main","(",")","{","vec2","Ad",";","vec4","Ay",",","Az",";","float","AA",";","AA","=","texture2D","(","u_depth",",","bE",")",".","x",";","Ay","=","vec4","(","bE","*","2.0","-","1.0",",","2.0","*","AA","-","1.0",",","1.0",")",";","Az","=","u_view_proj_inverse","*","Ay",";","Az","=","Az","/","Az",".","w",";","Az","=","u_view_proj_prev","*","Az",";","Az","/=","Az",".","w",";","Ad","=","(","Ay",".","xy","-","Az",".","xy",")","/","4.0","+","0.5",";","Ad","=","clamp","(","Ad",",","0.0",",","1.0",")",";","gl_FragColor","=","g","(","Ad",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV_ORCO",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["3"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["3"]},{type:"define",name:"NO_SHADOWS",tokens:["1"]},{type:"define",name:"SHADOW_CASTING",tokens:["2"]},{type:"define",name:"SHADOW_MASK_GENERATION",tokens:["3"]},{type:"define",name:"SHADOW_MAPPING_OPAQUE",tokens:["4"]},{type:"define",name:"SHADOW_MAPPING_BLEND",tokens:["5"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"SPECULAR_BLINN",tokens:["4"]},{type:"define",name:"SPECULAR_TOON",tokens:["5"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]},{type:"define",name:"DIFFUSE_MINNAERT",tokens:["4"]},{type:"define",name:"DIFFUSE_TOON",tokens:["5"]},{type:"define",name:"MAPPING_TYPE_TEXTURE",tokens:["0.0"]},{type:"define",name:"MAPPING_TYPE_POINT",tokens:["1.0"]},{type:"define",name:"MAPPING_TYPE_VECTOR",tokens:["2.0"]},{type:"define",name:"MAPPING_TYPE_NORMAL",tokens:["3.0"]},{type:"define",name:"MIX",tokens:["0"]},{type:"define",name:"ADD",tokens:["1"]},{type:"define",name:"SUBTRACT",tokens:["2"]},{type:"define",name:"MULTIPLY",tokens:["3"]},{type:"define",name:"SCREEN",tokens:["4"]},{type:"define",name:"OVERLAY",tokens:["5"]},{type:"define",name:"DIFFERENCE",tokens:["6"]},{type:"define",name:"DIVIDE",tokens:["7"]},{type:"define",name:"DARKEN",tokens:["8"]},{type:"define",name:"LIGHTEN",tokens:["9"]},{type:"define",name:"HUE",tokens:["10"]},{type:"define",name:"SATURATION",tokens:["11"]},{type:"define",name:"VALUE",tokens:["12"]},{type:"define",name:"COLOR",tokens:["13"]},{type:"define",name:"SOFT_LIGHT",tokens:["14"]},{type:"define",name:"LINEAR_LIGHT",tokens:["15"]},{type:"define",name:"REFL_NONE",tokens:["0"]},{type:"define",name:"REFL_MIRRORMAP",tokens:["1"]},{type:"define",name:"REFL_PLANE",tokens:["2"]},{type:"define",name:"REFL_CUBE",tokens:["3"]},{type:"define",name:"INVERSE_QUADRATIC",tokens:["0"]},{type:"define",name:"LINEAR",tokens:["1"]},{type:"define",name:"QUADRATIC",tokens:["2"]},{type:"define",name:"HEMI",tokens:["1"]},{type:"define",name:"SPOT",tokens:["2"]},{type:"define",name:"POINT",tokens:["3"]},{type:"define",name:"SUN",tokens:["4"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","a","=","255.0",";","float","b","=","0.0",";","float","c","=","1.0",";","vec4","g","(","const","in","float","d",")","{","vec4","e",",","f",";","e","=","vec4","(","a","*","a","*","a",",","a","*","a",",","a",",","c",")",";","f","=","vec4","(","b",",","c","/","a",",","c","/","a",",","c","/","a",")",";","e","=","fract","(","d","*","e",")",";","e","-=","e",".","xxyz","*","f",";","return","e",";","}","float","k","(","const","in","vec4","h",")","{","vec4","i",";","float","j",";","i","=","vec4","(","c","/","(","a","*","a","*","a",")",",","c","/","(","a","*","a",")",",","c","/","a",",","c",")",";","j","=","dot","(","h",",","i",")",";","return","j",";","}","vec4","g","(","const","in","vec2","l",")","{","vec4","m",";","vec2","n",",","o",";","n","=","vec2","(","a",",","c",")",";","o","=","vec2","(","b",",","c","/","a",")",";","m","=","fract","(","l",".","xxyy","*","n",".","xyxy",")",";","m","-=","m",".","xxzz","*","o",".","xyxy",";","if","(","l",".","r","==","c",")","m",".","rg","=","vec2","(","b",",","c",")",";","if","(","l",".","g","==","c",")","m",".","ba","=","vec2","(","b",",","c",")",";","return","m",";","}","vec2","s","(","const","in","vec4","p",")","{","vec2","q",",","r",";","r","=","vec2","(","c","/","a",",","c",")",";","q",".","r","=","dot","(","p",".","rg",",","r",")",";","q",".","g","=","dot","(","p",".","ba",",","r",")",";","return","q",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","t","=","0.0",";","float","u","=","1.0",";","vec4","w","(","vec4","v",")","{","return","v","-","floor","(","v","*","(","u","/","289.0",")",")","*","289.0",";","}","vec3","w","(","vec3","x",")","{","return","x","-","floor","(","x","*","(","u","/","289.0",")",")","*","289.0",";","}","vec2","w","(","vec2","y",")","{","return","y","-","floor","(","y","*","(","u","/","289.0",")",")","*","289.0",";","}","vec4","A","(","vec4","z",")","{","return","z","-","floor","(","z","*","(","u","/","7.0",")",")","*","7.0",";","}","vec4","C","(","vec4","B",")","{","return","w","(","(","34.0","*","B","+","5.0",")","*","B",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","L","(","vec2","D",")","{","vec4","E",",","F",",","G",",","H",";","vec2","I",",","J",";","I","=","w","(","floor","(","D",")",")",";","J","=","fract","(","D",")",";","E","=","J",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","F","=","J",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","G","=","C","(","I",".","x","+","vec4","(","t",",","u",",","t",",","u",")",")",";","G","=","C","(","G","+","I",".","y","+","vec4","(","t",",","t",",","u",",","u",")",")",";","H","=","A","(","G",")","*","K","+","K2",";","G","=","A","(","floor","(","G","*","K",")",")","*","K","+","K2",";","H","=","E","+","JITTER","*","H",";","G","=","F","+","JITTER","*","G",";","G","=","H","*","H","+","G","*","G",";"]},{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"textline",tokens:["G",".","xy","=","min","(","G",".","xy",",","G",".","zw",")",";","G",".","x","=","min","(","G",".","x",",","G",".","y",")",";","return","G",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["G",".","xy","=","(","G",".","x","<","G",".","y",")","?","G",".","xy",":","G",".","yx",";","G",".","xz","=","(","G",".","x","<","G",".","z",")","?","G",".","xz",":","G",".","zx",";","G",".","xw","=","(","G",".","x","<","G",".","w",")","?","G",".","xw",":","G",".","wx",";","G",".","y","=","min","(","G",".","y",",","G",".","z",")",";","G",".","y","=","min","(","G",".","y",",","G",".","w",")",";","return","sqrt","(","G",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","U","(","vec2","M",",","float","N",")","{","vec4","O",",","P",",","Q",",","R",";","vec2","S",",","T",";","S","=","w","(","floor","(","M",")",")",";","T","=","fract","(","M",")",";","O","=","T",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","P","=","T",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","Q","=","C","(","S",".","x","+","vec4","(","t",",","u",",","t",",","u",")",")",";","Q","=","C","(","Q","+","S",".","y","+","vec4","(","t",",","t",",","u",",","u",")",")",";","R","=","A","(","Q",")","*","K","+","K2",";","Q","=","A","(","floor","(","Q","*","K",")",")","*","K","+","K2",";","R","=","O","+","JITTER","*","R",";","Q","=","P","+","JITTER","*","Q",";","P","=","R","*","R","+","Q","*","Q",";","R","+=","N",";","Q","+=","N",";","O","=","R","*","R","+","Q","*","Q",";","R","+=","N",";","Q","+=","N",";","Q","=","R","*","R","+","Q","*","Q",";","P",".","xy","=","min","(","P",".","xy",",","P",".","zw",")",";","P",".","x","=","min","(","P",".","x",",","P",".","y",")",";","O",".","xy","=","min","(","O",".","xy",",","O",".","zw",")",";","O",".","x","=","min","(","O",".","x",",","O",".","y",")",";","Q",".","xy","=","min","(","Q",".","xy",",","Q",".","zw",")",";","Q",".","x","=","min","(","Q",".","x",",","Q",".","y",")",";","return","vec3","(","P",".","x",",","O",".","x",",","Q",".","x",")",";","}","vec3","W","(","vec3","V",")","{","return","w","(","(","(","V","*","34.0",")","+","u",")","*","V",")",";","}","float","ag","(","vec2","X",")","{","vec3","Y",",","Z",",","_",",","aa",";","vec4","ab",";","vec2","ac",",","ad",",","ae",";","const","vec4","af","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","ac","=","floor","(","X","+","dot","(","X",",","af",".","yy",")",")",";","ad","=","X","-","ac","+","dot","(","ac",",","af",".","xx",")",";","ae","=","(","ad",".","x",">","ad",".","y",")","?","vec2","(","u",",","t",")",":","vec2","(","t",",","u",")",";","ab","=","ad",".","xyxy","+","af",".","xxzz",";","ab",".","xy","-=","ae",";","ac","=","w","(","ac",")",";","Y","=","W","(","W","(","ac",".","y","+","vec3","(","t",",","ae",".","y",",","u",")",")","+","ac",".","x","+","vec3","(","t",",","ae",".","x",",","u",")",")",";","Z","=","max","(","0.5","-","vec3","(","dot","(","ad",",","ad",")",",","dot","(","ab",".","xy",",","ab",".","xy",")",",","dot","(","ab",".","zw",",","ab",".","zw",")",")",",","t",")",";","Z","=","Z","*","Z",";","Z","=","Z","*","Z",";","Y","=","2.0","*","fract","(","Y","*","af",".","www",")","-","u",";","_","=","abs","(","Y",")","-","0.5",";","aa","=","floor","(","Y","+","0.5",")",";","aa","=","Y","-","aa",";","Z","*=","1.79284291400159","-","0.85373472095314","*","(","aa","*","aa","+","_","*","_",")",";","Y",".","x","=","aa",".","x","*","ad",".","x","+","_",".","x","*","ad",".","y",";","Y",".","yz","=","aa",".","yz","*","ab",".","xz","+","_",".","yz","*","ab",".","yw",";","return","130.0","*","dot","(","Z",",","Y",")",";","}","vec2","ak","(","vec2","ah",")","{","float","ai",",","aj",";","ai","=","dot","(","ah",",","vec2","(","12.9898",",","78.233",")",")",";","aj","=","dot","(","ah",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","ai","=","fract","(","sin","(","ai",")","*","43758.5453",")","*","2.0","-","u",";","aj","=","fract","(","sin","(","aj",")","*","43758.5453",")","*","2.0","-","u",";","return","vec2","(","ai",",","aj",")",";","}"]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","aC","(","inout","vec3","al",",","float","am",",","float","an",",","float","ao",",","vec3","ap",",","vec3","aq",",","vec3","ar",",","vec4","as",",","vec3","at",",","float","au",")","{","float","av",",","aw",",","ax",";","vec2","ay",",","az",";","vec3","aA",";","vec4","aB",";","if","(","au",">","CAUSTICS_VIEW_DISTANCE",")","return",";","aB","=","as",";","aA","=","at","+","ap",";","aA",".","xz","=","10.0","*","sin","(","0.1","*","aA",".","xz",")",";","aA","=","aA","+","2.0","*","cross","(","-","aB",".","xyz",",","cross","(","-","aB",".","xyz",",","aA",")","+","aB",".","w","*","aA",")",";","ay","=","aA",".","xz",";","aA","=","aq",";","av","=","max","(","dot","(","ap",",","aA",")",",","0.0",")",";","aw","=","0.025",";","az","=","CAUST_SPEED","*","an",";","ay",".","s","+=","0.25","*","sin","(","dot","(","at","+","an",",","vec3","(","1.0",")",")",")",";","ay",".","t","+=","0.35","*","(","-","sin","(","dot","(","at","-","an",",","vec3","(","-","0.7",")",")",")",")",";","ay",".","st","+=","0.15","*","cos","(","4.0","*","am","-","az",".","x",")","+","1.5","*","sin","(","am","-","0.3","*","az",".","y",")",";","ax","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","am",",","0.0",")",")",";","aA","=","U","(","(","ay","/","ax",")",",","aw",")",";","aA","*=","CAUST_BRIGHT",";","aA","*=","aA",";","aw","=","min","(","0.25","*","am",",","-","am",")","+","1.0",";","aw","=","max","(","aw",",","0.0",")",";","av","=","ao","*","av",";","ax","=","max","(","sign","(","am",")",",","0.0",")",";","av","=","av","+","max","(","0.5","*","sign","(","-","ap",".","y",")","*","ax",",","0.0",")",";","av","=","min","(","av",",","1.0",")",";","al","+=","ar","*","aA","*","aw","*","av",";","}"]}]},exports["include/gamma.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","aE","(","inout","vec3","aD",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["aD","=","max","(","vec3","(","0.0",")",",","aD",")",";","aD","=","pow","(","aD",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","aG","(","inout","vec3","aF",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["aF","=","max","(","vec3","(","0.0",")",",","aF",")",";","aF","=","pow","(","aF",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","aJ","(","inout","vec3","aH",",","in","float","aI",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["aH","=","aH","*","aI",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","aK","=","0.0",";","float","aL","=","1.0",";","struct","aM","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","aP","(","vec3","aN",",","vec3","aO",")","{","return","any","(","lessThan","(","abs","(","aN","-","aO",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","aS","(","in","vec4","aQ",",","in","vec3","aR",")","{","return","aR","+","2.0","*","cross","(","aQ",".","xyz",",","cross","(","aQ",".","xyz",",","aR",")","+","aQ",".","w","*","aR",")",";","}","vec4","aU","(","in","vec4","aT",")","{","return","vec4","(","-","aT",".","xyz",",","aT",".","w",")","/","dot","(","aT",",","aT",")",";","}","vec3","aZ","(","vec4","aV",",","vec4","aW",",","vec4","aX",")","{","vec3","aY",";","aY","=","aX",".","xyz","*","aV",".","w",";","aY","=","aS","(","aW",",","aY",")",";","aY","+=","aV",".","xyz","*","aX",".","w",";","return","aY",";","}","vec3","be","(","vec4","a_",",","vec4","ba",",","vec4","bb",")","{","vec4","bc",";","vec3","bd",";","bd","=","bb",".","xyz","-","a_",".","xyz","*","bb",".","w",";","bc","=","aU","(","ba",")",";","bd","=","aS","(","bc",",","bd",")",";","bd","/=","a_",".","w",";","return","bd",";","}","mat4","bf","(",")","{","return","mat4","(","aL",",","aK",",","aK",",","aK",",","aK",",","aL",",","aK",",","aK",",","aK",",","aK",",","aL",",","aK",",","aK",",","aK",",","aK",",","aL",")",";","}","mat4","bh","(","float","bg",")","{","return","mat4","(","aL",",","aK",",","aK",",","aK",",","aK",",","cos","(","bg",")",",","sin","(","bg",")",",","aK",",","aK",",","-","sin","(","bg",")",",","cos","(","bg",")",",","aK",",","aK",",","aK",",","aK",",","aL",")",";","}","mat4","bj","(","float","bi",")","{","return","mat4","(","cos","(","bi",")",",","aK",",","-","sin","(","bi",")",",","aK",",","aK",",","aL",",","aK",",","aK",",","sin","(","bi",")",",","aK",",","cos","(","bi",")",",","aK",",","aK",",","aK",",","aK",",","aL",")",";","}","mat4","bl","(","float","bk",")","{","return","mat4","(","cos","(","bk",")",",","sin","(","bk",")",",","aK",",","aK",",","-","sin","(","bk",")",",","cos","(","bk",")",",","aK",",","aK",",","aK",",","aK",",","aL",",","aK",",","aK",",","aK",",","aK",",","aL",")",";","}","aM","bn","(","in","aM","bm",")","{","return","aM","(","bm",".","a",",","bm",".","b",",","normalize","(","bm",".","c",")",",","normalize","(","bm",".","d",")",",","normalize","(","bm",".","e",")",",","bm",".","f",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","bt","(","vec4","bo",")","{","vec3","bp",";","float","bq",",","br",",","bs",";","bq","=","bo",".","x",";","br","=","bo",".","y",";","bs","=","bo",".","w",";","bp",".","x","=","(","bq","+","bs",")","/","2.0",";","bp",".","y","=","(","br","+","bs",")","/","2.0",";","bp",".","z","=","bs",";","return","bp",";","}"]}]}}]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"CSM_BLEND_BETWEEN_CASCADES",tokens:["1.0"]},{type:"var",name:"CSM_FADE_LAST_CASCADE",tokens:["1.0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","bG","=","0.1",";","const","float","bH","=","0.1",";","const","float","bI","=","-","0.01",";","const","float","bJ","=","0.05",";","vec4","bK","=","vec4","(","0.14383161",",","0.34495938",",","-","0.38277543",",","-","0.26496911",")",";","vec4","bL","=","vec4","(","0.53742981",",","0.19984126",",","0.79197514",",","-","0.094184101",")",";","vec4","bM","=","vec4","(","-","0.94201624",",","-","0.91588581",",","-","0.2418884",",","0.44323325",")",";","vec4","bN","=","vec4","(","-","0.81544232",",","0.94558609",",","-","0.81409955",",","0.97484398",")",";","vec4","bO","=","vec4","(","-","0.1410079",",","0.2938776",",","0.27676845",",","-","0.41893023",")",";","vec4","bP","=","vec4","(","-","0.4737342",",","0.78641367",",","0.19090188",",","-","0.9293887",")",";","vec4","bQ","=","vec4","(","-","0.39906216",",","0.45771432",",","0.99706507",",","-","0.97511554",")",";","vec4","bR","=","vec4","(","-","0.87912464",",","-","0.76890725",",","0.9143759",",","0.7564837",")",";","bool","bU","(","vec2","bS",",","float","bT",")","{","return","all","(","lessThanEqual","(","bS",",","vec2","(","1.0","+","bT",")",")",")","&&","all","(","greaterThanEqual","(","bS",",","vec2","(","0.0","-","bT",")",")",")",";","}","float","cc","(","float","bV",",","float","bW",",","mat2","bX",",","vec3","bY",",","float","bZ",",","PRECISION","sampler2D","b_",")","{","vec2","ca",",","cb",";","cb",".","x","=","bV",";","cb",".","y","=","bW",";","cb","=","bX","*","cb",";","ca","=","bY",".","xy","+","cb","*","bZ","/","SHADOW_TEX_RES",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","bU","(","ca",",","bI",")",")","return","1.0",";","else"]}]}}]},{type:"textline",tokens:["return","step","(","bY",".","z",",","texture2D","(","b_",",","ca",")",".","r",")",";","}","void","cq","(","inout","float","cd",",","inout","float","ce",",","float","cf",",","float","cg",",","mat2","ch",",","vec3","ci",",","vec3","cj",",","float","ck",",","float","cl",",","PRECISION","sampler2D","cm",",","PRECISION","sampler2D","cn",")","{","vec2","co",",","cp",";","cp",".","x","=","cf",";","cp",".","y","=","cg",";","cp","=","ch","*","cp",";","co","=","ci",".","xy","+","cp","*","ck","/","SHADOW_TEX_RES",";","cd","+=","step","(","ci",".","z",",","texture2D","(","cm",",","co",")",".","r",")",";","co","=","cj",".","xy","+","cp","*","cl","/","SHADOW_TEX_RES",";","ce","+=","step","(","cj",".","z",",","texture2D","(","cn",",","co",")",".","r",")",";","}","float","cz","(","vec3","cr",",","PRECISION","sampler2D","cs",",","float","ct",")","{","mat2","cu",";","float","cv",",","cw",",","cx",";"]},{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","cr",".","z",">","u_perspective_cast_far_bound",")","return","1.0",";","else","{"]}]}}]},{type:"textline",tokens:["cr",".","z","=","clamp","(","cr",".","z",",","0.0",",","1.0",")",";","cv","=","0.0",";","cw","=","ak","(","cr",".","xy",")",".","x","*","M_PI",";","cx","=","cos","(","cw",")",";","cw","=","sin","(","cw",")",";","cu","=","mat2","(","cx",",","cw",",","-","cw",",","cx",")",";","for","(","int","cy","=","0",";","cy","<","4",";","cy","++",")","{","cv","+=","cc","(","bK","[","cy","]",",","bO","[","cy","]",",","cu",",","cr",",","ct",",","cs",")",";","cv","+=","cc","(","bL","[","cy","]",",","bP","[","cy","]",",","cu",",","cr",",","ct",",","cs",")",";","cv","+=","cc","(","bM","[","cy","]",",","bQ","[","cy","]",",","cu",",","cr",",","ct",",","cs",")",";","cv","+=","cc","(","bN","[","cy","]",",","bR","[","cy","]",",","cu",",","cr",",","ct",",","cs",")",";","}","cv","/=","16.0",";","return","clamp","(","cv",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","1.0",";","}","float","cN","(","vec3","cA",",","PRECISION","sampler2D","cB",",","vec3","cC",",","PRECISION","sampler2D","cD",",","float","cE",",","float","cF",",","float","cG",")","{","mat2","cH",";","float","cI",",","cJ",",","cK",",","cL",";","cA",".","z","=","clamp","(","cA",".","z",",","0.0",",","1.0",")",";","cC",".","z","=","clamp","(","cC",".","z",",","0.0",",","1.0",")",";","cI","=","0.0",";","cJ","=","0.0",";","cK","=","ak","(","cA",".","xy",")",".","x","*","M_PI",";","cL","=","cos","(","cK",")",";","cK","=","sin","(","cK",")",";","cH","=","mat2","(","cL",",","cK",",","-","cK",",","cL",")",";","for","(","int","cM","=","0",";","cM","<","4",";","cM","++",")","{","cq","(","cI",",","cJ",",","bK","[","cM","]",",","bO","[","cM","]",",","cH",",","cA",",","cC",",","cE",",","cF",",","cB",",","cD",")",";","cq","(","cI",",","cJ",",","bL","[","cM","]",",","bP","[","cM","]",",","cH",",","cA",",","cC",",","cE",",","cF",",","cB",",","cD",")",";","cq","(","cI",",","cJ",",","bM","[","cM","]",",","bQ","[","cM","]",",","cH",",","cA",",","cC",",","cE",",","cF",",","cB",",","cD",")",";","cq","(","cI",",","cJ",",","bN","[","cM","]",",","bR","[","cM","]",",","cH",",","cA",",","cC",",","cE",",","cF",",","cB",",","cD",")",";","}","cI","=","mix","(","cI",",","cJ",",","cG",")",";","cI","/=","16.0",";","return","clamp","(","cI",",","0.0",",","1.0",")",";","}","float","cR","(","vec2","cO",")","{","float","cP",",","cQ",";","cP","=","min","(","cO",".","x",",","cO",".","y",")",";","cQ","=","min","(","1.0","-","cO",".","x",",","1.0","-","cO",".","y",")",";","return","min","(","cP",",","cQ",")",";","}","float","cU","(","float","cS",",","float","cT",")","{","if","(","cT",">=","0.0","&&","cT","<=","bH",")","cS","=","(","cS","-","1.0",")","/","bH","*","cT","+","1.0",";","return","cS",";","}","float","de","(","vec3","cV",",","vec3","cW",",","PRECISION","sampler2D","cX",",","PRECISION","sampler2D","cY",",","float","cZ",",","float","c_",",","float","da",",","float","db",")","{","float","dc",",","dd",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_BLEND_BETWEEN_CASCADES"],group:{type:"group",parts:[{type:"textline",tokens:["dd","=","cR","(","cV",".","xy",")",";","if","(","-","db",">","da","&&","dd",">=","0.0","&&","dd","<=","bG","&&","bU","(","cW",".","xy",",","0.0",")",")","{","dd","=","1.0","-","dd","/","bG",";","dc","=","cN","(","cV",",","cX",",","cW",",","cY",",","cZ",",","c_",",","dd",")",";","}","else"]}]}}]},{type:"textline",tokens:["dc","=","cz","(","cV",",","cX",",","cZ",")",";","return","dc",";","}","float","dm","(","vec3","df",",","PRECISION","sampler2D","dg",",","float","dh",",","float","di",",","float","dj",")","{","float","dk",",","dl",";","dk","=","cz","(","df",",","dg",",","dh",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_FADE_LAST_CASCADE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","-","dj",">","di",")","{","dl","=","cR","(","df",".","xy",")",";","dk","=","cU","(","dk",",","dl",")",";","}"]}]}}]},{type:"textline",tokens:["return","dk",";","}","float","du","(","float","dn",")","{","vec3","dp",",","dq",",","dr",",","ds",";","float","dt",";","dt","=","1.0",";","dp","=","bA",".","xyz","/","bA",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["dq","=","bB",".","xyz","/","bB",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["dr","=","bC",".","xyz","/","bC",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["ds","=","bD",".","xyz","/","bD",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","bU","(","dp",".","xy",",","0.0",")",")","{","dt","=","de","(","dp",",","dq",",","u_shadow_map0",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","0","]",",","dn",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","bU","(","dp",".","xy",",","bJ",")",")","{","dt","=","dm","(","dp",",","u_shadow_map0",",","u_pcf_blur_radii","[","0","]",",","u_csm_center_dists","[","0","]",",","dn",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","bU","(","dq",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["dt","=","de","(","dq",",","dr",",","u_shadow_map1",",","u_shadow_map2",",","u_pcf_blur_radii","[","1","]",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","1","]",",","dn",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dt","=","dm","(","dq",",","u_shadow_map1",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","1","]",",","dn",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","bU","(","dr",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["dt","=","de","(","dr",",","ds",",","u_shadow_map2",",","u_shadow_map3",",","u_pcf_blur_radii","[","2","]",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","2","]",",","dn",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dt","=","dm","(","dr",",","u_shadow_map2",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","2","]",",","dn",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","bU","(","ds",".","xy",",","0.0",")",")","dt","=","dm","(","ds",",","u_shadow_map3",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","3","]",",","dn",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","dt",";","}"]}]}}]},{type:"textline",tokens:["float","dz","(","inout","vec3","dv",")","{","float","dw",";","vec3","dx",";","vec2","dy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dy","=","texture2DProj","(","u_shadow_mask",",","by",")",".","rg",";","dx","=","vec3","(","dy",".","r",")",";","dw","=","dy",".","g",";","bF","=","vec4","(","dx",",","dw",")",";","dv","*=","bF",".","a",";","return","bF",".","r",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","du","(","bv",".","z",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","dG","(","in","vec3","dA",",","vec3","dB",",","float","dC",",","float","dD",")","{","float","dE",";","vec3","dF",";","dF","=","normalize","(","dB","+","dA",")",";","dE","=","1.0","-","dot","(","dA",",","dF",")",";","dE","=","dD","+","(","1.0","-","dD",")","*","pow","(","dE",",","dC",")",";","return","dE",";","}","void","dT","(","inout","vec3","dH",",","vec3","dI",",","vec3","dJ",",","float","dK",")","{","vec2","dL",",","dM",";","float","dN",",","dO",",","dP",";","vec3","dQ",",","dR",",","dS",";","dQ","=","reflect","(","-","dI",",","dJ",")",";","dN","=","u_fresnel_params","[","2","]",";","dO","=","u_fresnel_params","[","3","]",";","dP","=","1.0",";","if","(","dN","!=","0.0",")","dP","=","dG","(","dI",",","dQ",",","dN",",","dO",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dR","=","textureCube","(","u_cube_reflection",",","dQ",")",".","xyz",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dS","=","u_refl_plane",".","xyz","*","dot","(","dJ",",","u_refl_plane",".","xyz",")",";","dS","=","dJ","-","dS",";","dL","=","(","u_view_matrix_frag","*","vec4","(","dS",",","0.0",")",")",".","xy",";","dM","=","by",".","xy","/","by",".","z",";","dM","+=","dL","*","REFL_BUMP",";","dR","=","texture2D","(","u_plane_reflection",",","dM",")",".","rgb",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dR","=","textureCube","(","u_mirrormap",",","dQ",")",".","xyz",";","dK","=","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["aE","(","dR",".","rgb",")",";","dH","=","mix","(","dH",",","dR",",","dK","*","dP",")",";","}"]}]}}]}]},exports["include/environment.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec3","dW","(","vec3","dU",")","{","float","dV",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["return","textureCube","(","u_sky_texture",",","dU",")",".","rgb",";"]}]}},{type:"elif",expression:["SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["dV","=","0.5","*","dU",".","y","+","0.5",";","return","mix","(","u_horizon_color",",","u_zenith_color",",","dV",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["float","eb","(","in","float","dX",",","inout","vec2","dY",",","in","vec2","dZ",")","{","float","d_",";","vec4","ea",";","ea","=","texture2D","(","u_scene_depth",",","dY",")",";","d_","=","k","(","ea",")",";","if","(","d_","<","bz",")","{","dY","=","dZ",";","return","dX",";","}","else","{","return","d_",";","}","return","dX",";","}"]}]}}]},{type:"textline",tokens:["vec3","ej","(","in","vec3","ec",",","in","vec2","ed",")","{","vec3","ee",";","float","ef",";","vec4","eg",";","vec2","eh",",","ei",";","eh","=","ec",".","xy","/","ec",".","z",";","ei","=","eh","+","ed",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["eg","=","texture2DProj","(","u_scene_depth",",","ec",")",";","ef","=","k","(","eg",")",";","eb","(","ef",",","ei",",","eh",")",";"]}]}}]},{type:"textline",tokens:["ee","=","texture2D","(","u_refractmap",",","ei",")",".","rgb",";","aE","(","ee",")",";","return","ee",";","}"]}]}}]}]},exports["include/nodes.glslf"] = {type:"group",parts:[{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ek",";"]}]}}]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","el","=","0.5",";","vec3","em","=","vec3","(","ZERO_VALUE_NODES",")",";","vec3","en","=","vec3","(","UNITY_VALUE_NODES",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","er","(","in","vec3","eo",",","in","float","ep",")","{","vec3","eq",";","eq","=","em",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["eq","=","ej","(","by",",","eo",".","xz","*","ep",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eq","=","texture2D","(","u_refractmap",",","by",".","xy","/","by",".","z",")",".","rgb",";","aE","(","eq",")",";"]}]}}]},{type:"textline",tokens:["return","eq",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ew","(","vec3","es",")","{","float","et",",","eu",";","vec4","ev",";","ev","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","ev","=","mix","(","vec4","(","es",".","bg",",","ev",".","wz",")",",","vec4","(","es",".","gb",",","ev",".","xy",")",",","step","(","es",".","b",",","es",".","g",")",")",";","ev","=","mix","(","vec4","(","ev",".","xyw",",","es",".","r",")",",","vec4","(","es",".","r",",","ev",".","yzx",")",",","step","(","ev",".","x",",","es",".","r",")",")",";","et","=","ev",".","x","-","min","(","ev",".","w",",","ev",".","y",")",";","eu","=","1.0e-10",";","return","vec3","(","abs","(","ev",".","z","+","(","ev",".","w","-","ev",".","y",")","/","(","6.0","*","et","+","eu",")",")",",","et","/","(","ev",".","x","+","eu",")",",","ev",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eA","(","vec3","ex",")","{","vec3","ey",";","vec4","ez",";","ez","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","ey","=","abs","(","fract","(","vec3","(","ex",".","r",",","ex",".","r",",","ex",".","r",")","+","ez",".","xyz",")","*","6.0","-","ez",".","www",")",";","return","ex",".","b","*","mix","(","ez",".","xxx",",","clamp","(","ey","-","ez",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ex",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eC","(","vec2","eB",")","{","return","vec3","(","eB","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","eE","(","vec3","eD",")","{","return","vec2","(","eD",".","xy","*","0.5","+","vec2","(","0.5",",","0.5",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"fq",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"fr",qualifier:["float"],is_optional:true},{type:"node_out",name:"fs",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fq"],statements:[{type:"textline",tokens:["fq","=","normalize","(","fi",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fr"],statements:[{type:"textline",tokens:["fr","=","abs","(","fi",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fs"],statements:[{type:"textline",tokens:["fs","=","length","(","fi",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"ft",qualifier:["float"],is_optional:false},{type:"node_in",name:"fu",qualifier:["float"],is_optional:false},{type:"node_in",name:"fv",qualifier:["float"],is_optional:false},{type:"node_out",name:"fw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fw","=","vec3","(","ft",",","fu",",","fv",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"fx",qualifier:["float"],is_optional:false},{type:"node_in",name:"fy",qualifier:["float"],is_optional:false},{type:"node_in",name:"fz",qualifier:["float"],is_optional:false},{type:"node_out",name:"fA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fA","=","eA","(","vec3","(","fx",",","fy",",","fz",")",")",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"fB",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eF",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["fB","=","eC","(","eF",")",";"]}]},{type:"node",name:"GEOMETRY_OR",declarations:[{type:"node_out",name:"fC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fC","=","2.0","*","clamp","(","ek",",","0.0",",","1.0",")","-","en",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"fD",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eG",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["fD","=","eG",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"fE",qualifier:["float"],is_optional:false},{type:"node_param",name:"eH",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["fE","=","eH",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"fF",qualifier:["float"],is_optional:false},{type:"node_out",name:"fG",qualifier:["float"],is_optional:false},{type:"node_param",name:"eI",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["fF","=","eI","[","0","]",";","fG","=","eI","[","1","]",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"fH",qualifier:["float"],is_optional:false},{type:"node_out",name:"fI",qualifier:["float"],is_optional:false},{type:"node_out",name:"fJ",qualifier:["float"],is_optional:false},{type:"node_param",name:"eJ",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["fH","=","eJ","[","0","]",";","fI","=","eJ","[","1","]",";","fJ","=","eJ","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"fK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fK","=","fm",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"fL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["fL","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"fM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fM","=","eS",";"]}]},{type:"node",name:"GEOMETRY_LO",declarations:[{type:"node_out",name:"fN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fN","[","0","]","=","fi","[","0","]",";","fN","[","1","]","=","fi","[","1","]",";","fN","[","2","]","=","fi","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"fO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fO","=","vec3","(","fl",".","r",",","-","fl",".","b",",","fl",".","g",")",";"]}]},{type:"node",name:"NEW_GEOMETRY",declarations:[{type:"node_out",name:"fP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fV",qualifier:["float"],is_optional:false},{type:"node_out",name:"fW",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["fP","=","em",";","fQ","=","em",";","fR","=","em",";","fS","=","em",";","fT","=","em",";","fU","=","em",";","fV","=","ZERO_VALUE_NODES",";","fW","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"fX",qualifier:["float"],is_optional:false},{type:"node_in",name:"fY",qualifier:["float"],is_optional:false},{type:"node_in",name:"fZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"f_",qualifier:["float"],is_optional:false},{type:"node_in",name:"ga",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fn","=","ew","(","ga",")",";","fn","[","0","]","+=","(","fX","-","0.5",")",";","if","(","fn","[","0","]",">","UNITY_VALUE_NODES",")","fn","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","fn","[","0","]","<","ZERO_VALUE_NODES",")","fn","[","0","]","+=","UNITY_VALUE_NODES",";","fn","*=","vec3","(","UNITY_VALUE_NODES",",","fY",",","fZ",")",";","fn","=","mix","(","en",",","mix","(","em",",","fn",",","step","(","em",",","fn",")",")",",","step","(","fn",",","en",")",")",";","gb","=","mix","(","ga",",","eA","(","fn",")",",","f_",")",";"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"gc",qualifier:["float"],is_optional:false},{type:"node_in",name:"gd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ge",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ge","=","mix","(","gd",",","en","-","gd",",","gc",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"gf",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"gg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gh",qualifier:["float"],is_optional:false},{type:"node_out",name:"gi",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gf"],statements:[{type:"textline",tokens:["gf","=","u_lamp_light_color_intensities","[","LAMP_INDEX","]",";"]}]}]},{type:"textline",tokens:["fj","=","u_lamp_light_factors","[","LAMP_INDEX","]",";","fn","=","u_lamp_light_directions","[","LAMP_INDEX","]",";","fo","=","u_lamp_light_positions","[","LAMP_INDEX","]",";","fb","=","fj",".","z",";","if","(","fb","!=","-","UNITY_VALUE_NODES",")","{"]},{type:"textline",tokens:["gg","=","fo","-","bu",";","gh","=","length","(","gg",")",";","gg","=","normalize","(","gg",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gi"],statements:[{type:"textline",tokens:["gi","=","fb","/","(","fb","+","gh","*","gh",")",";","fb","=","fj",".","x",";","fc","=","fj",".","y",";","if","(","fb",">","-","UNITY_VALUE_NODES",")","{","fd","=","dot","(","gg",",","fn",")",";","fd","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","fd","-","fb",")","/","fc",")",";","gi","*=","fd",";","}"]}]}]},{type:"textline",tokens:["}","else","{"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gg"],statements:[{type:"textline",tokens:["gg","=","fn",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gh"],statements:[{type:"textline",tokens:["gh","=","length","(","fo","-","bu",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gi"],statements:[{type:"textline",tokens:["gi","=","UNITY_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"gj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gk",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"gl",qualifier:["float"],is_optional:true},{type:"node_param",name:"eK",qualifier:["vec3"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gk"],statements:[{type:"textline",tokens:["gk","=","eK",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gl"],statements:[{type:"textline",tokens:["gl","=","-","dot","(","gj",",","eK",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"gm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gn",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gn","=","-","(","u_view_matrix_frag","*","vec4","(","gm",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"BSDF_ANISOTROPIC",declarations:[{type:"node_in",name:"go",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gp",qualifier:["float"],is_optional:false},{type:"node_in",name:"gq",qualifier:["float"],is_optional:false},{type:"node_in",name:"gr",qualifier:["float"],is_optional:false},{type:"node_in",name:"gs",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gu",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gu","=","go",";"]},{type:"textline",tokens:["gp",";","gq",";","gr",";","gs",";","gt",";"]}]},{type:"node",name:"BSDF_DIFFUSE",declarations:[{type:"node_in",name:"gv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gw",qualifier:["float"],is_optional:false},{type:"node_in",name:"gx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gy",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gy","=","gv",";"]},{type:"textline",tokens:["gw",";","gx",";"]}]},{type:"node",name:"BSDF_GLASS",declarations:[{type:"node_in",name:"gz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gA",qualifier:["float"],is_optional:false},{type:"node_in",name:"gB",qualifier:["float"],is_optional:false},{type:"node_in",name:"gC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gD",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gD","=","gz",";"]},{type:"textline",tokens:["gA",";","gB",";","gC",";"]}]},{type:"node",name:"BSDF_GLOSSY",declarations:[{type:"node_in",name:"gE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gF",qualifier:["float"],is_optional:false},{type:"node_in",name:"gG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gH","=","gE",";"]},{type:"textline",tokens:["gF",";","gG",";"]}]},{type:"node",name:"BSDF_HAIR",declarations:[{type:"node_in",name:"gI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"gK",qualifier:["float"],is_optional:false},{type:"node_in",name:"gL",qualifier:["float"],is_optional:false},{type:"node_out",name:"gM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gM","=","gI",";"]},{type:"textline",tokens:["gJ",";","gK",";","gL",";"]}]},{type:"node",name:"BSDF_TRANSPARENT",declarations:[{type:"node_in",name:"gN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gO","=","gN",";"]}]},{type:"node",name:"BSDF_TRANSLUCENT",declarations:[{type:"node_in",name:"gP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gR","=","gP",";"]},{type:"textline",tokens:["gQ",";"]}]},{type:"node",name:"BSDF_REFRACTION",declarations:[{type:"node_in",name:"gS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gT",qualifier:["float"],is_optional:false},{type:"node_in",name:"gU",qualifier:["float"],is_optional:false},{type:"node_in",name:"gV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gW","[","0","]","=","gW","[","1","]","=","gW","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["gS",";","gT",";","gU",";","gV",";"]}]},{type:"node",name:"BSDF_TOON",declarations:[{type:"node_in",name:"gX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gY",qualifier:["float"],is_optional:false},{type:"node_in",name:"gZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"g_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ha",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ha","=","gX",";"]},{type:"textline",tokens:["gY",";","gZ",";","g_",";"]}]},{type:"node",name:"BSDF_VELVET",declarations:[{type:"node_in",name:"hb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hc",qualifier:["float"],is_optional:false},{type:"node_in",name:"hd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"he",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["he","=","hb",";"]},{type:"textline",tokens:["hc",";","hd",";"]}]},{type:"node",name:"SUBSURFACE_SCATTERING",declarations:[{type:"node_in",name:"hf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hg",qualifier:["float"],is_optional:false},{type:"node_in",name:"hh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hi",qualifier:["float"],is_optional:false},{type:"node_in",name:"hj",qualifier:["float"],is_optional:false},{type:"node_in",name:"hk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hl",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hl","[","0","]","=","hl","[","1","]","=","hl","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hf",";","hh",";","hi",";","hj",";","hk",";","hg",";"]}]},{type:"node",name:"EMISSION",declarations:[{type:"node_in",name:"hm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hn",qualifier:["float"],is_optional:false},{type:"node_out",name:"ho",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ho","=","hm",";"]},{type:"textline",tokens:["hn",";"]}]},{type:"node",name:"AMBIENT_OCCLUSION",declarations:[{type:"node_in",name:"hp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hq","[","0","]","=","hq","[","1","]","=","hq","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hp",";"]}]},{type:"node",name:"HOLDOUT",declarations:[{type:"node_out",name:"hr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hr","[","0","]","=","hr","[","1","]","=","hr","[","2","]","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"VOLUME_ABSORPTION",declarations:[{type:"node_in",name:"hs",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ht",qualifier:["float"],is_optional:false},{type:"node_out",name:"hu",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hu","[","0","]","=","hu","[","1","]","=","hu","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hs",";","ht",";"]}]},{type:"node",name:"VOLUME_SCATTER",declarations:[{type:"node_in",name:"hv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hw",qualifier:["float"],is_optional:false},{type:"node_in",name:"hx",qualifier:["float"],is_optional:false},{type:"node_out",name:"hy",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hy","[","0","]","=","hy","[","1","]","=","hy","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hv",";","hw",";","hx",";"]}]},{type:"node",name:"BUMP",declarations:[{type:"node_in",name:"hz",qualifier:["float"],is_optional:false},{type:"node_in",name:"hA",qualifier:["float"],is_optional:false},{type:"node_in",name:"hB",qualifier:["float"],is_optional:false},{type:"node_in",name:"hC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hD",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hD","=","hC",";"]},{type:"textline",tokens:["hz",";","hA",";","hB",";"]}]},{type:"node",name:"NORMAL_MAP",declarations:[{type:"node_in",name:"hE",qualifier:["float"],is_optional:false},{type:"node_in",name:"hF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hG","=","hF",";"]},{type:"textline",tokens:["hE",";"]}]},{type:"node",name:"VECT_TRANSFORM",declarations:[{type:"node_in",name:"hH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hI","[","0","]","=","hI","[","1","]","=","hI","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hH",";"]}]},{type:"node",name:"BLACKBODY",declarations:[{type:"node_in",name:"hJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"hK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hK","[","0","]","=","hK","[","1","]","=","hK","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hJ",";"]}]},{type:"node",name:"WAVELENGTH",declarations:[{type:"node_in",name:"hL",qualifier:["float"],is_optional:false},{type:"node_out",name:"hM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hM","[","0","]","=","hM","[","1","]","=","hM","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hL",";"]}]},{type:"node",name:"SEPXYZ",declarations:[{type:"node_in",name:"hN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hO",qualifier:["float"],is_optional:false},{type:"node_out",name:"hP",qualifier:["float"],is_optional:false},{type:"node_out",name:"hQ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["hO","=","hN","[","0","]",";","hP","=","hN","[","1","]",";","hQ","=","hN","[","2","]",";"]}]},{type:"node",name:"COMBXYZ",declarations:[{type:"node_in",name:"hR",qualifier:["float"],is_optional:false},{type:"node_in",name:"hS",qualifier:["float"],is_optional:false},{type:"node_in",name:"hT",qualifier:["float"],is_optional:false},{type:"node_out",name:"hU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hU","[","0","]","=","hR",";","hU","[","1","]","=","hS",";","hU","[","2","]","=","hT",";"]}]},{type:"node",name:"BRIGHTCONTRAST",declarations:[{type:"node_in",name:"hV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hW",qualifier:["float"],is_optional:false},{type:"node_in",name:"hX",qualifier:["float"],is_optional:false},{type:"node_out",name:"hY",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","hW","-","hX","*","0.5",";","hY","=","max","(","(","UNITY_VALUE_NODES","+","hX",")","*","hV","+","fd",",","em",")",";"]}]},{type:"node",name:"LIGHT_FALLOFF",declarations:[{type:"node_in",name:"hZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"h_",qualifier:["float"],is_optional:false},{type:"node_out",name:"ia",qualifier:["float"],is_optional:false},{type:"node_out",name:"ib",qualifier:["float"],is_optional:false},{type:"node_out",name:"ic",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ia","=","ib","=","ic","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hZ",";","h_",";"]}]},{type:"node",name:"TEX_IMAGE",declarations:[{type:"node_in",name:"id",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ie",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ig",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ie","[","0","]","=","ie","[","1","]","=","ie","[","2","]","=","ZERO_VALUE_NODES",";","ig","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["id",";"]}]},{type:"node",name:"TEX_ENVIRONMENT",declarations:[{type:"node_in",name:"ih",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ii",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ii","[","0","]","=","ii","[","1","]","=","ii","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ih",";"]}]},{type:"node",name:"TEX_SKY",declarations:[{type:"node_in",name:"ij",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ik",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ik","[","0","]","=","ik","[","1","]","=","ik","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ij",";"]}]},{type:"node",name:"TEX_NOISE",declarations:[{type:"node_in",name:"il",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"im",qualifier:["float"],is_optional:false},{type:"node_in",name:"io",qualifier:["float"],is_optional:false},{type:"node_in",name:"ip",qualifier:["float"],is_optional:false},{type:"node_out",name:"iq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ir",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iq","[","0","]","=","iq","[","1","]","=","iq","[","2","]","=","ZERO_VALUE_NODES",";","ir","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["il",";","im",";","io",";","ip",";"]}]},{type:"node",name:"TEX_WAVE",declarations:[{type:"node_in",name:"is",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"it",qualifier:["float"],is_optional:false},{type:"node_in",name:"iu",qualifier:["float"],is_optional:false},{type:"node_in",name:"iv",qualifier:["float"],is_optional:false},{type:"node_in",name:"iw",qualifier:["float"],is_optional:false},{type:"node_out",name:"ix",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iy",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ix","[","0","]","=","ix","[","1","]","=","ix","[","2","]","=","ZERO_VALUE_NODES",";","iy","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["is",";","it",";","iu",";","iv",";","iw",";"]}]},{type:"node",name:"TEX_VORONOI",declarations:[{type:"node_in",name:"iz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iA",qualifier:["float"],is_optional:false},{type:"node_out",name:"iB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iC",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iB","[","0","]","=","iB","[","1","]","=","iB","[","2","]","=","ZERO_VALUE_NODES",";","iC","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iz",";","iA",";"]}]},{type:"node",name:"TEX_MUSGRAVE",declarations:[{type:"node_in",name:"iD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iE",qualifier:["float"],is_optional:false},{type:"node_in",name:"iF",qualifier:["float"],is_optional:false},{type:"node_in",name:"iG",qualifier:["float"],is_optional:false},{type:"node_in",name:"iH",qualifier:["float"],is_optional:false},{type:"node_in",name:"iI",qualifier:["float"],is_optional:false},{type:"node_in",name:"iJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"iK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iK","[","0","]","=","iK","[","1","]","=","iK","[","2","]","=","ZERO_VALUE_NODES",";","iL","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iD",";","iE",";","iF",";","iG",";","iH",";","iI",";","iJ",";"]}]},{type:"node",name:"TEX_GRADIENT",declarations:[{type:"node_in",name:"iM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iN","[","0","]","=","iN","[","1","]","=","iN","[","2","]","=","ZERO_VALUE_NODES",";","iO","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iM",";"]}]},{type:"node",name:"TEX_MAGIC",declarations:[{type:"node_in",name:"iP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"iR",qualifier:["float"],is_optional:false},{type:"node_out",name:"iS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iT",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iS","[","0","]","=","iS","[","1","]","=","iS","[","2","]","=","ZERO_VALUE_NODES",";","iT","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iP",";","iQ",";","iR",";"]}]},{type:"node",name:"TEX_CHECKER",declarations:[{type:"node_in",name:"iU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iX",qualifier:["float"],is_optional:false},{type:"node_out",name:"iY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iZ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iY","[","0","]","=","iY","[","1","]","=","iY","[","2","]","=","ZERO_VALUE_NODES",";","iZ","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iU",";","iV",";","iW",";","iX",";"]}]},{type:"node",name:"TEX_BRICK",declarations:[{type:"node_in",name:"i_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ja",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jd",qualifier:["float"],is_optional:false},{type:"node_in",name:"je",qualifier:["float"],is_optional:false},{type:"node_in",name:"jf",qualifier:["float"],is_optional:false},{type:"node_in",name:"jg",qualifier:["float"],is_optional:false},{type:"node_in",name:"jh",qualifier:["float"],is_optional:false},{type:"node_out",name:"ji",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ji","[","0","]","=","ji","[","1","]","=","ji","[","2","]","=","ZERO_VALUE_NODES",";","jj","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["i_",";","ja",";","jb",";","jc",";","jd",";","je",";","jf",";","jg",";","jh",";"]}]},{type:"node",name:"ADD_SHADER",declarations:[{type:"node_in",name:"jk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jm","=","clamp","(","jk","+","jl",",","em",",","en",")",";"]}]},{type:"node",name:"MIX_SHADER",declarations:[{type:"node_in",name:"jn",qualifier:["float"],is_optional:false},{type:"node_in",name:"jo",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","jn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","jq","=","fd","*","jo","+","(","UNITY_VALUE_NODES","-","fd",")","*","jp",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_out",name:"jr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"js",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eL",qualifier:["varying","vec2"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jr"],statements:[{type:"textline",tokens:["jr","=","eC","(","eL",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_js"],statements:[{type:"textline",tokens:["js","=","vec3","(","eL",",","ZERO_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_out",name:"jt",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eM",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["jt","=","vec3","(","eM",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_NO",declarations:[{type:"node_out",name:"ju",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ju","=","fm",";"]}]},{type:"node",name:"TEX_COORD_GE",declarations:[{type:"node_out",name:"jv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jv","=","abs","(","ek",")",";"]}]},{type:"node",name:"TEX_COORD_OB",declarations:[{type:"node_out",name:"jw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jw","[","0","]","=","jw","[","1","]","=","jw","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_CA",declarations:[{type:"node_out",name:"jx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jx","[","0","]","=","fi","[","0","]",";","jx","[","1","]","=","fi","[","1","]",";","jx","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_WI",declarations:[{type:"node_out",name:"jy",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jy","[","0","]","=","jy","[","1","]","=","jy","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_RE",declarations:[{type:"node_out",name:"jz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jz","[","0","]","=","jz","[","1","]","=","jz","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_out",name:"jA",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eN",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["jA","=","vec3","(","eN",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_out",name:"jB",qualifier:["float"],is_optional:false},{type:"node_out",name:"jC",qualifier:["float"],is_optional:false},{type:"node_out",name:"jD",qualifier:["float"],is_optional:false},{type:"node_out",name:"jE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jF",qualifier:["float"],is_optional:false},{type:"node_out",name:"jG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jB","=","ZERO_VALUE_NODES",";","jC","=","ZERO_VALUE_NODES",";","jD","=","ZERO_VALUE_NODES",";","jE","=","vec3","(","ZERO_VALUE_NODES",")",";","jF","=","ZERO_VALUE_NODES",";","jG","=","jE",";","jH","=","jE",";"]}]},{type:"node",name:"HAIR_INFO",declarations:[{type:"node_out",name:"jI",qualifier:["float"],is_optional:false},{type:"node_out",name:"jJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"jK",qualifier:["float"],is_optional:false},{type:"node_out",name:"jL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jI","=","ZERO_VALUE_NODES",";","jJ","=","ZERO_VALUE_NODES",";","jK","=","ZERO_VALUE_NODES",";","jL","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"OBJECT_INFO",declarations:[{type:"node_out",name:"jM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jN",qualifier:["float"],is_optional:false},{type:"node_out",name:"jO",qualifier:["float"],is_optional:false},{type:"node_out",name:"jP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jN","=","ZERO_VALUE_NODES",";","jO","=","ZERO_VALUE_NODES",";","jP","=","ZERO_VALUE_NODES",";","jM","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"WIREFRAME",declarations:[{type:"node_in",name:"jQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"jR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jR","=","jQ",";"]}]},{type:"node",name:"TANGENT",declarations:[{type:"node_out",name:"jS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jS","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LAYER_WEIGHT",declarations:[{type:"node_in",name:"jT",qualifier:["float"],is_optional:false},{type:"node_in",name:"jU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jV",qualifier:["float"],is_optional:false},{type:"node_out",name:"jW",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jV","=","jW","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["jU",";","jT",";"]}]},{type:"node",name:"LIGHT_PATH",declarations:[{type:"node_out",name:"jX",qualifier:["float"],is_optional:false},{type:"node_out",name:"jY",qualifier:["float"],is_optional:false},{type:"node_out",name:"jZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"j_",qualifier:["float"],is_optional:false},{type:"node_out",name:"ka",qualifier:["float"],is_optional:false},{type:"node_out",name:"kb",qualifier:["float"],is_optional:false},{type:"node_out",name:"kc",qualifier:["float"],is_optional:false},{type:"node_out",name:"kd",qualifier:["float"],is_optional:false},{type:"node_out",name:"ke",qualifier:["float"],is_optional:false},{type:"node_out",name:"kf",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jX","=","jY","=","jZ","=","ZERO_VALUE_NODES",";","j_","=","ka","=","kb","=","ZERO_VALUE_NODES",";","kc","=","kc","=","ke","=","kf","=","ZERO_VALUE_NODES",";","kd","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"ATTRIBUTE",declarations:[{type:"node_out",name:"kg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ki",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kg","=","kh","=","vec3","(","ZERO_VALUE_NODES",")",";","ki","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"SCRIPT",declarations:[],statements:[]},{type:"node",name:"CURVE_VEC",declarations:[{type:"node_in",name:"kj",qualifier:["float"],is_optional:false},{type:"node_in",name:"kk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kl",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kl","=","kk",";"]},{type:"textline",tokens:["kj",";"]}]},{type:"node",name:"CURVE_RGB",declarations:[{type:"node_in",name:"km",qualifier:["float"],is_optional:false},{type:"node_in",name:"kn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ko",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ko","=","kn",";"]},{type:"textline",tokens:["km",";"]}]},{type:"node",name:"VALTORGB",declarations:[{type:"node_in",name:"kp",qualifier:["float"],is_optional:false},{type:"node_out",name:"kq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kr",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kq","[","0","]","=","kq","[","1","]","=","kq","[","2","]","=","clamp","(","kp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","kr","=","kq","[","0","]",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"ks",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kt",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kt","=","ks",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["kt","=","(","MAPPING_TRS_MATRIX","*","vec4","(","kt",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["kt","=","kt","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["kt","=","kt","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["kt","=","max","(","kt",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["kt","=","min","(","kt",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["kt","=","normalize","(","kt",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"ku",qualifier:["float"],is_optional:false},{type:"node_in",name:"kv",qualifier:["float"],is_optional:false},{type:"node_out",name:"kw",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kw","=","ku","+","kv",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kw","=","clamp","(","kw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"kx",qualifier:["float"],is_optional:false},{type:"node_in",name:"ky",qualifier:["float"],is_optional:false},{type:"node_out",name:"kz",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kz","=","kx","-","ky",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kz","=","clamp","(","kz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"kA",qualifier:["float"],is_optional:false},{type:"node_in",name:"kB",qualifier:["float"],is_optional:false},{type:"node_out",name:"kC",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kC","=","kA","*","kB",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kC","=","clamp","(","kC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"kD",qualifier:["float"],is_optional:false},{type:"node_in",name:"kE",qualifier:["float"],is_optional:false},{type:"node_out",name:"kF",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kF","=","(","kE","!=","ZERO_VALUE_NODES",")","?","kD","/","kE",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kF","=","clamp","(","kF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"kG",qualifier:["float"],is_optional:false},{type:"node_in",name:"kH",qualifier:["float"],is_optional:false},{type:"node_out",name:"kI",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kI","=","sin","(","kG",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kI","=","clamp","(","kI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kH",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"kJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"kK",qualifier:["float"],is_optional:false},{type:"node_out",name:"kL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kL","=","cos","(","kJ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kL","=","clamp","(","kL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kK",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"kM",qualifier:["float"],is_optional:false},{type:"node_in",name:"kN",qualifier:["float"],is_optional:false},{type:"node_out",name:"kO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kO","=","tan","(","kM",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kO","=","clamp","(","kO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kN",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"kP",qualifier:["float"],is_optional:false},{type:"node_in",name:"kQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"kR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kR","=","(","kP","<=","UNITY_VALUE_NODES","&&","kP",">=","-","UNITY_VALUE_NODES",")","?","asin","(","kP",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kR","=","clamp","(","kR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kQ",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"kS",qualifier:["float"],is_optional:false},{type:"node_in",name:"kT",qualifier:["float"],is_optional:false},{type:"node_out",name:"kU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kU","=","(","kS","<=","UNITY_VALUE_NODES","&&","kS",">=","-","UNITY_VALUE_NODES",")","?","acos","(","kS",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kU","=","clamp","(","kU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kT",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"kV",qualifier:["float"],is_optional:false},{type:"node_in",name:"kW",qualifier:["float"],is_optional:false},{type:"node_out",name:"kX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kX","=","atan","(","kV",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kX","=","clamp","(","kX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kW",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"kY",qualifier:["float"],is_optional:false},{type:"node_in",name:"kZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"k_",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","kY","<","ZERO_VALUE_NODES","||","kY","==","ZERO_VALUE_NODES","&&","kZ","==","ZERO_VALUE_NODES",")","k_","=","ZERO_VALUE_NODES",";","else","k_","=","pow","(","kY",",","kZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["k_","=","clamp","(","k_",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"la",qualifier:["float"],is_optional:false},{type:"node_in",name:"lb",qualifier:["float"],is_optional:false},{type:"node_out",name:"lc",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lc","=","(","la",">","ZERO_VALUE_NODES","&&","lb",">","ZERO_VALUE_NODES",")","?","log2","(","la",")","/","log2","(","lb",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lc","=","clamp","(","lc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"ld",qualifier:["float"],is_optional:false},{type:"node_in",name:"le",qualifier:["float"],is_optional:false},{type:"node_out",name:"lf",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lf","=","min","(","ld",",","le",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lf","=","clamp","(","lf",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"lg",qualifier:["float"],is_optional:false},{type:"node_in",name:"lh",qualifier:["float"],is_optional:false},{type:"node_out",name:"li",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["li","=","max","(","lg",",","lh",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["li","=","clamp","(","li",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"lj",qualifier:["float"],is_optional:false},{type:"node_in",name:"lk",qualifier:["float"],is_optional:false},{type:"node_out",name:"ll",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ll","=","floor","(","lj","+","0.5",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ll","=","clamp","(","ll",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["lk",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"lm",qualifier:["float"],is_optional:false},{type:"node_in",name:"ln",qualifier:["float"],is_optional:false},{type:"node_out",name:"lo",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lo","=","(","lm","<","ln",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lo","=","clamp","(","lo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"lp",qualifier:["float"],is_optional:false},{type:"node_in",name:"lq",qualifier:["float"],is_optional:false},{type:"node_out",name:"lr",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lr","=","(","lp",">","lq",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lr","=","clamp","(","lr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"ls",qualifier:["float"],is_optional:false},{type:"node_in",name:"lt",qualifier:["float"],is_optional:false},{type:"node_out",name:"lu",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lu","=","abs","(","lt",")",">","0.000001","?","mod","(","ls",",","lt",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lu","=","clamp","(","lu",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"lv",qualifier:["float"],is_optional:false},{type:"node_in",name:"lw",qualifier:["float"],is_optional:false},{type:"node_out",name:"lx",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lx","=","abs","(","lv",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lx","=","clamp","(","lx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["lw",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"ly",qualifier:["float"],is_optional:false},{type:"node_in",name:"lz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","ly",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lB","=","mix","(","lz",",","lA",",","fd",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lB","=","clamp","(","lB",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"lC",qualifier:["float"],is_optional:false},{type:"node_in",name:"lD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","lC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lF","=","mix","(","lD",",","lD","+","lE",",","fd",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lF","=","clamp","(","lF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"lG",qualifier:["float"],is_optional:false},{type:"node_in",name:"lH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","lG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lJ","=","mix","(","lH",",","lH","*","lI",",","fd",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lJ","=","clamp","(","lJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"lK",qualifier:["float"],is_optional:false},{type:"node_in",name:"lL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","lK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lN","=","mix","(","lL",",","lL","-","lM",",","fd",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lN","=","clamp","(","lN",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"lO",qualifier:["float"],is_optional:false},{type:"node_in",name:"lP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","lO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fc","=","UNITY_VALUE_NODES","-","fd",";","lR","=","en","-","(","vec3","(","fc",")","+","fd","*","(","en","-","lQ",")",")","*","(","en","-","lP",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lR","=","clamp","(","lR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"lS",qualifier:["float"],is_optional:false},{type:"node_in",name:"lT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lV",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","lS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fc","=","UNITY_VALUE_NODES","-","fd",";","lU","+=","step","(","lU",",","em",")",";","lV","=","fc","*","lT","+","fd","*","lT","/","lU",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lV","=","clamp","(","lV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"lW",qualifier:["float"],is_optional:false},{type:"node_in",name:"lX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","lW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lZ","=","mix","(","lX",",","abs","(","lX","-","lY",")",",","fd",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lZ","=","clamp","(","lZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"l_",qualifier:["float"],is_optional:false},{type:"node_in",name:"ma",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","l_",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mc","=","min","(","ma",".","rgb",",","mb",".","rgb","*","fd",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mc","=","clamp","(","mc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"md",qualifier:["float"],is_optional:false},{type:"node_in",name:"me",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","md",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mg","=","max","(","me",".","rgb",",","mf",".","rgb","*","fd",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mg","=","clamp","(","mg",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"mh",qualifier:["float"],is_optional:false},{type:"node_in",name:"mi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mk",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","mh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fo","=","vec3","(","UNITY_VALUE_NODES","-","fd",")",";","mk","=","mix","(","mi","*","(","fo","+","2.0","*","fd","*","mj",")",",","en","-","(","fo","+","2.0","*","fd","*","(","en","-","mj",")",")","*","(","en","-","mi",")",",","step","(","0.5",",","mi",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mk","=","clamp","(","mk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"ml",qualifier:["float"],is_optional:false},{type:"node_in",name:"mm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mo",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","ml",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fo","=","en","-","fd","*","mn",";","fn","=","clamp","(","mm","/","fo",",","0.0",",","1.0",")",";","mo","=","mix","(","mix","(","fn",",","en",",","step","(","fo",",","em",")",")",",","mm",",","step","(","mm",",","em",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mo","=","clamp","(","mo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"mp",qualifier:["float"],is_optional:false},{type:"node_in",name:"mq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ms",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","mp",",","0.0",",","1.0",")",";","fo","=","vec3","(","1.0","-","fd",")",";","fo","=","fo","+","fd","*","mr",";","fn","=","clamp","(","en","-","(","en","-","mq",")","/","fo",",","0.0",",","1.0",")",";","ms","=","mix","(","fn",",","em",",","step","(","fo",",","em",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["ms","=","clamp","(","ms",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"mt",qualifier:["float"],is_optional:false},{type:"node_in",name:"mu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","mt",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mw","=","mu",";","fn","=","ew","(","mv",")",";","if","(","fn",".","y","!=","ZERO_VALUE_NODES",")","{","fo","=","ew","(","mw",")",";","fo",".","x","=","fn",".","x",";","fp","=","eA","(","fo",")",";","mw","=","mix","(","mw",",","fp",",","fd",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mw","=","clamp","(","mw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"mx",qualifier:["float"],is_optional:false},{type:"node_in",name:"my",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","mx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fc","=","UNITY_VALUE_NODES","-","fd",";","mA","=","my",";","fp","=","ew","(","mA",")",";","if","(","fp",".","y","!=","ZERO_VALUE_NODES",")","{","fo","=","ew","(","mz",")",";","fp",".","y","=","fc","*","fp",".","y","+","fd","*","fo",".","y",";","mA","=","eA","(","fp",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mA","=","clamp","(","mA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"mB",qualifier:["float"],is_optional:false},{type:"node_in",name:"mC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","mB",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fc","=","UNITY_VALUE_NODES","-","fd",";","fp","=","ew","(","mC",")",";","fo","=","ew","(","mD",")",";","fp",".","z","=","fc","*","fp",".","z","+","fd","*","fo",".","z",";","mE","=","eA","(","fp",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mE","=","clamp","(","mE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"mF",qualifier:["float"],is_optional:false},{type:"node_in",name:"mG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","mF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mI","=","mG",";","fo","=","ew","(","mH",")",";","if","(","fo",".","y","!=","ZERO_VALUE_NODES",")","{","fp","=","ew","(","mI",")",";","fp",".","x","=","fo",".","x",";","fp",".","y","=","fo",".","y",";","fn","=","eA","(","fp",")",";","mI","=","mix","(","mI",",","fn",",","fd",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mI","=","clamp","(","mI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"mJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"mK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","mJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fc","=","UNITY_VALUE_NODES","-","fd",";","fn","=","mL","+","mK","-","mL","*","mK",";","mM","=","mK","*","(","vec3","(","fc",")","+","vec3","(","fd",")","*","(","(","en","-","mK",")","*","mL","+","fn",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mM","=","clamp","(","mM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"mN",qualifier:["float"],is_optional:false},{type:"node_in",name:"mO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fd","=","clamp","(","mN",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mQ","=","mO","+","fd","*","(","2.0","*","mP","-","en",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mQ","=","clamp","(","mQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"mR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["eT","=","mR",";","eX","=","mS",";"]}]},{type:"node",name:"MATERIAL_BEGIN",declarations:[{type:"node_in",name:"mT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mV",qualifier:["float"],is_optional:false},{type:"node_in",name:"mW",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"mX",qualifier:["float"],is_optional:true},{type:"node_out",name:"mY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mZ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"m_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"na",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nc",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nd",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ne",qualifier:["float"],is_optional:false},{type:"node_param",name:"eO",qualifier:["const","vec2"]},{type:"node_param",name:"eP",qualifier:["const","vec3"]}],statements:[{type:"textline",tokens:["m_","=","clamp","(","mT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["na","=","eP","[","0","]","*","clamp","(","mU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"textline",tokens:["mY","=","mX","*","m_",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["mY","=","e_","*","m_",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["m_","*=","mV",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["nb","=","normalize","(","mW",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nb","=","fm",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["SHADELESS_MAT",{type:"logic_negative_expr",places:1},"NODES_GLOW",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],statements:[{type:"textline",tokens:["mZ","=","fa","*","u_environment_energy","*","dW","(","nb",")",";","ne","=","dz","(","m_",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],statements:[{type:"textline",tokens:["nc","=","vec2","(","eO","[","0","]",",","eO","[","1","]",")",";"]},{type:"textline",tokens:["nd","=","vec2","(","eP","[","1","]",",","eP","[","2","]",")",";"]}]}]},{type:"textline",tokens:["eW","=","ne",";"]}]}]}]},{type:"node",name:"MATERIAL_END",declarations:[{type:"node_in",name:"nf",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"ng",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ni",qualifier:["float"],is_optional:true},{type:"node_in",name:"nj",qualifier:["float"],is_optional:true},{type:"node_in",name:"nk",qualifier:["float"],is_optional:true},{type:"node_out",name:"nl",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nm",qualifier:["float"],is_optional:true},{type:"node_out",name:"nn",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"no",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"np",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"eQ",qualifier:["float"]},{type:"node_param",name:"eR",qualifier:["float"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nl"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["nl","=","nf",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nl","=","em",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT","REFLECTION_TYPE","REFL_NONE",{type:"non_equal_expr",places:2},{type:"logical_and_expr",places:2}],statements:[{type:"textline",tokens:["dT","(","nl",",","eS",",","nh",",","ni",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["nl","+=","ng",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nn"],statements:[{type:"textline",tokens:["nn","=","nh",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_no"],statements:[{type:"textline",tokens:["no","=","nf",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_np"],statements:[{type:"textline",tokens:["np","=","ng",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nm"],statements:[{type:"textline",tokens:["nm","=","clamp","(","nk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["fd","=","max","(","max","(","ng",".","r",",","ng",".","g",")",",","ng",".","b",")","*","nj",";","nm","=","clamp","(","nk","*","(","UNITY_VALUE_NODES","-","fd",")","+","fd",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]}]},{type:"node_else",statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nm"],statements:[{type:"textline",tokens:["nm","=","clamp","(","eQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["fd","=","max","(","max","(","ng",".","r",",","ng",".","g",")",",","ng",".","b",")","*","eR",";","nm","=","eQ","*","(","UNITY_VALUE_NODES","-","fd",")","+","fd",";"]}]}]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["eU","=","ng",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["eU","=","em",";"]}]}]},{type:"textline",tokens:["eV","=","nh",";"]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"nq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ns",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nt",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"nu",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["SHADELESS_MAT",{type:"logic_negative_expr",places:1},"NODES_GLOW",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],statements:[{type:"textline",tokens:["nt","=","vec4","(","nq","+","ns","*","nr",",","ZERO_VALUE_NODES",")",";","nu","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nt","=","vec4","(","ns",",","ZERO_VALUE_NODES",")",";","nu","=","em",";"]}]}]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"nv",qualifier:["float"],is_optional:false},{type:"node_out",name:"nw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nx",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ny",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nz",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["NODES_GLOW",{type:"logic_negative_expr",places:1},"NUM_LIGHTS",0,{type:"g_expr",places:2},{type:"logical_and_expr",places:2}],statements:[{type:"textline",tokens:["nx","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["nz","=","el",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nz","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["ny","=","u_light_color_intensities","[","LAMP_IND","]",";","if","(","LAMP_SHADOW_MAP_IND","!=","-","1",")","ny","*=","nv",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["fn","=","u_light_positions","[","LAMP_IND","]",";","nw","=","fn","-","fl",";"]},{type:"textline",tokens:["fd","=","length","(","nw",")",";","ny","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","fd","*","fd",")",";","nw","=","normalize","(","nw",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["fn","=","u_light_directions","[","LAMP_IND","]",";","fd","=","dot","(","nw",",","fn",")",";","fd","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","fd","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","ny","*=","fd",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["nw","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"nA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nB",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nD",qualifier:["float"],is_optional:false},{type:"node_in",name:"nE",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nF",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nF","=","ZERO_VALUE_NODES",";","if","(","nB",".","r","!=","ZERO_VALUE_NODES",")","{","fd","=","(","UNITY_VALUE_NODES","-","nD",")","*","dot","(","nC",",","nA",")","+","nD",";","if","(","nE","[","0","]","==","ZERO_VALUE_NODES",")","{","nF","=","UNITY_VALUE_NODES",";","}","else","{","fd","=","UNITY_VALUE_NODES","+","abs","(","fd",")",";","fd","=","nE","[","1","]","+","(","UNITY_VALUE_NODES","-","nE","[","1","]",")","*","pow","(","fd",",","nE","[","0","]",")",";","nF","=","clamp","(","fd",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","nF","=","max","(","nF",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"nG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nH",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"nK",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nK","=","ZERO_VALUE_NODES",";","if","(","nH",".","r","!=","ZERO_VALUE_NODES",")","{","fd","=","(","UNITY_VALUE_NODES","-","nJ",")","*","dot","(","nI",",","nG",")","+","nJ",";","nK","=","max","(","fd",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"nL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nM",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nO",qualifier:["float"],is_optional:false},{type:"node_in",name:"nP",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nQ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nQ","=","ZERO_VALUE_NODES",";","if","(","nM",".","r","!=","ZERO_VALUE_NODES",")","{","fd","=","(","UNITY_VALUE_NODES","-","nO",")","*","dot","(","nN",",","nL",")","+","nO",";","if","(","nP","[","0","]",">","ZERO_VALUE_NODES",")","{","fc","=","max","(","dot","(","nN",",","eS",")",",","ZERO_VALUE_NODES",")",";","fb","=","nP","[","0","]","*","nP","[","0","]",";","fe","=","UNITY_VALUE_NODES","-","el","*","(","fb","/","(","fb","+","0.33",")",")",";","fn","=","nL","-","fd","*","nN",";","fp","=","eS","-","fc","*","nN",";"]},{type:"textline",tokens:["if","(","length","(","fn",")","==","ZERO_VALUE_NODES","||","length","(","fp",")","==","ZERO_VALUE_NODES","||","abs","(","fd",")",">","UNITY_VALUE_NODES","||","abs","(","fc",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["nQ","=","fd","*","fe",";","else","{","ff","=","acos","(","fd",")",";","fc","=","acos","(","fc",")",";","fn","=","normalize","(","fn",")",";","fp","=","normalize","(","fp",")",";","fg","=","max","(","ff",",","fc",")",";","fh","=","min","(","ff",",","fc",")",";","fh","*=","0.95",";","fc","=","max","(","dot","(","fn",",","fp",")",",","ZERO_VALUE_NODES",")",";","fb","=","0.45","*","(","fb","/","(","fb","+","0.09",")",")",";","nQ","=","fd","*","(","fe","+","(","fb","*","fc","*","sin","(","fg",")","*","tan","(","fh",")",")",")",";","}","}","else","nQ","=","fd",";","nQ","=","max","(","nQ",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"nR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nS",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nU",qualifier:["float"],is_optional:false},{type:"node_in",name:"nV",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nW",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nW","=","ZERO_VALUE_NODES",";","if","(","nS",".","r","!=","ZERO_VALUE_NODES",")","{","fd","=","(","UNITY_VALUE_NODES","-","nU",")","*","dot","(","nT",",","nR",")","+","nU",";","fh","=","max","(","dot","(","nT",",","eS",")",",","ZERO_VALUE_NODES",")",";","if","(","nV","[","0","]","<=","UNITY_VALUE_NODES",")","nW","=","fd","*","pow","(","max","(","fh","*","fd",",","0.1",")",",","nV","[","0","]","-","UNITY_VALUE_NODES",")",";","else","nW","=","fd","*","pow","(","1.0001","-","fh",",","nV","[","0","]","-","UNITY_VALUE_NODES",")",";","nW","=","max","(","nW",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"nX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nY",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"n_",qualifier:["float"],is_optional:false},{type:"node_in",name:"oa",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ob",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ob","=","ZERO_VALUE_NODES",";","if","(","nY",".","r","!=","ZERO_VALUE_NODES",")","{","fh","=","(","UNITY_VALUE_NODES","-","n_",")","*","dot","(","nZ",",","nX",")","+","n_",";","fh","=","acos","(","fh",")",";","if","(","fh","<","oa","[","0","]",")","ob","=","UNITY_VALUE_NODES",";","else","if","(","fh",">","(","oa","[","0","]","+","oa","[","1","]",")","||","oa","[","1","]","==","ZERO_VALUE_NODES",")","ob","=","ZERO_VALUE_NODES",";","else","ob","=","UNITY_VALUE_NODES","-","(","(","fh","-","oa","[","0","]",")","/","oa","[","1","]",")",";","ob","=","max","(","ob",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"oc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"od",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"oe",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"of",qualifier:["float"],is_optional:false},{type:"node_in",name:"og",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"oh",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oh","=","ZERO_VALUE_NODES",";","if","(","od",".","g","==","UNITY_VALUE_NODES",")","{","fp","=","normalize","(","oc","+","eS",")",";","oh","=","(","UNITY_VALUE_NODES","-","of",")","*","max","(","dot","(","oe",",","fp",")",",","ZERO_VALUE_NODES",")","+","of",";","oh","=","pow","(","oh",",","og","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"oi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oj",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"ok",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ol",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"om",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["om","=","ZERO_VALUE_NODES",";","if","(","oj",".","g","==","UNITY_VALUE_NODES",")","{","fp","=","normalize","(","oi","+","eS",")",";","fh","=","max","(","dot","(","ok",",","fp",")",",","0.001",")",";"]},{type:"textline",tokens:["fd","=","max","(","dot","(","ok",",","eS",")",",","0.01",")",";","fg","=","max","(","dot","(","ok",",","oi",")",",","0.01",")",";","fh","=","tan","(","acos","(","fh",")",")",";","fc","=","max","(","ol","[","0","]",",","0.001",")",";","om","=","fg","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","fc","*","fc",")",")","*","(","exp","(","-","(","fh","*","fh",")","/","(","fc","*","fc",")",")","/","(","sqrt","(","fd","*","fg",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"on",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oo",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"op",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oq",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"or",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["or","=","ZERO_VALUE_NODES",";","if","(","oo",".","g","==","UNITY_VALUE_NODES",")","{","fp","=","normalize","(","on","+","eS",")",";","fg","=","acos","(","dot","(","fp",",","op",")",")",";","if","(","fg","<","oq","[","0","]",")","or","=","UNITY_VALUE_NODES",";","else","if","(","fg",">=","oq","[","0","]","+","oq","[","1","]","||","oq","[","1","]","==","ZERO_VALUE_NODES",")","or","=","ZERO_VALUE_NODES",";","else","or","=","UNITY_VALUE_NODES","-","(","fg","-","oq","[","0","]",")","/","oq","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"os",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ot",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"ou",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ov",qualifier:["float"],is_optional:false},{type:"node_in",name:"ow",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ox",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ox","=","ZERO_VALUE_NODES",";","if","(","ot",".","g","==","UNITY_VALUE_NODES",")","{","if","(","ow","[","0","]","<","1.0","||","ow","[","1","]","==","ZERO_VALUE_NODES",")","ox","=","ZERO_VALUE_NODES",";","else","{","if","(","ow","[","1","]","<","100.0",")","ow","[","1","]","=","sqrt","(","1.0","/","ow","[","1","]",")",";","else","ow","[","1","]","=","10.0","/","ow","[","1","]",";","fp","=","normalize","(","eS","+","os",")",";","fg","=","(","UNITY_VALUE_NODES","-","ov",")","*","max","(","dot","(","ou",",","fp",")",",","ZERO_VALUE_NODES",")","+","ov",";","if","(","fg","<","ZERO_VALUE_NODES",")","ox","=","ZERO_VALUE_NODES",";","else","{","fd","=","max","(","dot","(","ou",",","eS",")",",","0.01",")",";","fc","=","dot","(","ou",",","os",")",";","if","(","fc","<=","0.01",")","ox","=","ZERO_VALUE_NODES",";","else","{","fh","=","max","(","dot","(","eS",",","fp",")",",","0.01",")",";","fb","=","UNITY_VALUE_NODES",";","fd","=","(","2.0","*","fg","*","fd",")","/","fh",";","fc","=","(","2.0","*","fg","*","fc",")","/","fh",";","fc","=","min","(","min","(","fb",",","fd",")",",","fc",")",";","fd","=","sqrt","(","pow","(","ow","[","0","]",",","2.0",")","+","pow","(","fh",",","2.0",")","-","UNITY_VALUE_NODES",")",";","fh","=","pow","(","fd","-","fh",",","2.0",")","/","pow","(","fd","+","fh",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","fh","*","(","fd","+","fh",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","fh","*","(","fd","-","fh",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","fg","=","acos","(","fg",")",";","ox","=","max","(","fh","*","fc","*","exp","(","-","pow","(","fg",",","2.0",")","/","(","2.0","*","pow","(","ow","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"oy",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"oz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oA",qualifier:["float"],is_optional:false},{type:"node_in",name:"oB",qualifier:["float"],is_optional:false},{type:"node_in",name:"oC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oE",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"oF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oI",qualifier:["float"],is_optional:false},{type:"node_out",name:"oJ",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"oK",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_NODE_B4W_TRANSLUCENCY"],statements:[{type:"textline",tokens:["if","(","dot","(","oC",",","oD",")","*","dot","(","eS",",","oD",")","<","ZERO_VALUE_NODES",")","{","fg","=","oE",".","x",";","fc","=","oE",".","y",";","fh","=","oE",".","z",";","fd","=","oE",".","w",";"]},{type:"textline",tokens:["fb","=","clamp","(","abs","(","dot","(","oC",",","oD",")",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fe","=","clamp","(","dot","(","eS",",","-","oC",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fc","=","pow","(","fe",",","fc",")",";"]},{type:"textline",tokens:["oJ","=","oy","+","oI","*","vec4","(","oH","*","fb","*","pow","(","oF",",","vec3","(","fg",")",")",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["oJ","+=","fh","*","mix","(","vec4","(","oF",",","UNITY_VALUE_NODES",")",",","vec4","(","UNITY_VALUE_NODES",")",",","fd",")","*","oI","*","vec4","(","oH","*","fb","*","vec3","(","fc",")",",","UNITY_VALUE_NODES",")",";","oK","=","oz",";","}","else","{"]},{type:"textline",tokens:["oK","=","oz","+","oH","*","oG","*","oB",";","oJ","=","oy","+","vec4","(","oH","*","oF","*","oA",",","oB",")",";","}"]}]},{type:"node_else",statements:[{type:"textline",tokens:["oK","=","oz","+","oH","*","oG","*","oB",";","oJ","=","oy","+","vec4","(","oH","*","oF","*","oA",",","oB",")",";"]}]}]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"oL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oL","=","u_node_rgbs","[","RGB_IND","]",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"oM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oN",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oN","=","dot","(","oM",",","vec3","(","0.35",",","0.45",",","0.2",")",")",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"oO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oP",qualifier:["float"],is_optional:true},{type:"node_out",name:"oQ",qualifier:["float"],is_optional:true},{type:"node_out",name:"oR",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oP"],statements:[{type:"textline",tokens:["oP","=","oO",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oQ"],statements:[{type:"textline",tokens:["oQ","=","oO",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oR"],statements:[{type:"textline",tokens:["oR","=","oO",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"oS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oT",qualifier:["float"],is_optional:true},{type:"node_out",name:"oU",qualifier:["float"],is_optional:true},{type:"node_out",name:"oV",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["fp","=","ew","(","oS",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oT"],statements:[{type:"textline",tokens:["oT","=","fp",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oU"],statements:[{type:"textline",tokens:["oU","=","fp",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oV"],statements:[{type:"textline",tokens:["oV","=","fp",".","b",";"]}]}]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"oW",qualifier:["float"],is_optional:false},{type:"node_in",name:"oX",qualifier:["float"],is_optional:false},{type:"node_in",name:"oY",qualifier:["float"],is_optional:false},{type:"node_out",name:"oZ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oZ","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","(","oW","-","oY",")","*","oX",")",")",")",";"]}]},{type:"node",name:"GAMMA",declarations:[{type:"node_in",name:"o_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pa",qualifier:["float"],is_optional:false},{type:"node_out",name:"pb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pb","=","max","(","em",",","o_",")",";","pb","=","pow","(","pb",",","vec3","(","pa",")",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"pc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pd",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pd","=","max","(","em",",","pc",")",";","pd","=","pow","(","pd",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"pe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pf",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pf","=","max","(","em",",","pe",")",";","pf","=","pow","(","pf",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_EMPTY",declarations:[{type:"node_out",name:"pg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ph",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pi",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pi"],statements:[{type:"textline",tokens:["pg","[","2","]","=","pg","[","1","]","=","pg","[","0","]","=","0.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pi"],statements:[{type:"textline",tokens:["ph","[","2","]","=","ph","[","1","]","=","ph","[","0","]","=","0.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pi"],statements:[{type:"textline",tokens:["pi","=","0.0",";"]}]}]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"pj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pk",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pl",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]}],statements:[{type:"textline",tokens:["fj","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","pj",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pk"],statements:[{type:"textline",tokens:["pk","=","fj",".","xyz",";","aE","(","pk",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pl"],statements:[{type:"textline",tokens:["pl","=","fj",".","w",";"]}]}]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"pm",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pn",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"po",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pp",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pq",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pr",qualifier:["float"],is_optional:true},{type:"node_out",name:"ps",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pt",qualifier:["float"],is_optional:true},{type:"node_out",name:"pu",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pv",qualifier:["float"],is_optional:true},{type:"node_out",name:"pw",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"px",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["fj","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","eE","(","pm",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pq"],statements:[{type:"textline",tokens:["pq","=","fj",".","xyz",";","aE","(","pq",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pr"],statements:[{type:"textline",tokens:["pr","=","fj",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["fj","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","eE","(","pn",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ps"],statements:[{type:"textline",tokens:["ps","=","fj",".","xyz",";","aE","(","ps",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pt"],statements:[{type:"textline",tokens:["pt","=","fj",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["fj","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","eE","(","po",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pu"],statements:[{type:"textline",tokens:["pu","=","fj",".","xyz",";","aE","(","pu",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pv"],statements:[{type:"textline",tokens:["pv","=","fj",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["fj","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","eE","(","pp",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pw"],statements:[{type:"textline",tokens:["pw","=","fj",".","xyz",";","aE","(","pw",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_px"],statements:[{type:"textline",tokens:["px","=","fj",".","w",";"]}]}]}]}]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"py",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pz",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pA",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pB",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pC",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pD",qualifier:["float"],is_optional:true},{type:"node_out",name:"pE",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pF",qualifier:["float"],is_optional:true},{type:"node_out",name:"pG",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pH",qualifier:["float"],is_optional:true},{type:"node_out",name:"pI",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pJ",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["fj","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","eE","(","py",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pC"],statements:[{type:"textline",tokens:["pC","=","normalize","(","fk","*","(","fj",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pD"],statements:[{type:"textline",tokens:["pD","=","fj",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["fj","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","eE","(","pz",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pE"],statements:[{type:"textline",tokens:["pE","=","normalize","(","fk","*","(","fj",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pF"],statements:[{type:"textline",tokens:["pF","=","fj",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["fj","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","eE","(","pA",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pG"],statements:[{type:"textline",tokens:["pG","=","normalize","(","fk","*","(","fj",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pH"],statements:[{type:"textline",tokens:["pH","=","fj",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["fj","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","eE","(","pB",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pI"],statements:[{type:"textline",tokens:["pI","=","normalize","(","fk","*","(","fj",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pJ"],statements:[{type:"textline",tokens:["pJ","=","fj",".","w",";"]}]}]}]}]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"pK",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pK","=","u_node_values","[","VALUE_IND","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"pL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pO",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pN","=","pL","+","pM",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pO"],statements:[{type:"textline",tokens:["pO","=","(","abs","(","pN","[","0","]",")","+","abs","(","pN","[","1","]",")","+","abs","(","pN","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"pP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pS",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pR","=","pP","-","pQ",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pS"],statements:[{type:"textline",tokens:["pS","=","(","abs","(","pR","[","0","]",")","+","abs","(","pR","[","1","]",")","+","abs","(","pR","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"pT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pW",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pV","=","pT","+","pU",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pW"],statements:[{type:"textline",tokens:["pW","=","length","(","pV",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pV"],statements:[{type:"textline",tokens:["pV","=","normalize","(","pV",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"pX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pZ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"p_",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pZ","=","em",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_p_"],statements:[{type:"textline",tokens:["p_","=","dot","(","pX",",","pY",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"qa",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qd",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qc","=","cross","(","qa",",","qb",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qd"],statements:[{type:"textline",tokens:["qd","=","length","(","qc",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"qe",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qh",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qg","=","normalize","(","qe",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qh"],statements:[{type:"textline",tokens:["qh","=","length","(","qe",")",";"]}]}]},{type:"textline",tokens:["qf",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"qi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qk",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qk","=","reflect","(","-","qi",",","qj",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"ql",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qm",qualifier:["float"],is_optional:false},{type:"node_in",name:"qn",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"qo",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"qp",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["fc","=","length","(","fi",")",";","if","(","fc","<","qo",")","{","eY","=","eE","(","ql",")",";","fc","=","clamp","(","0.5","*","(","qo","-","fc",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fc","=","qm","*","fc",";"]},{type:"textline",tokens:["fp","=","normalize","(","eS","*","fk",")",";"]},{type:"textline",tokens:["fb","=","UNITY_VALUE_NODES","/","qn",";"]},{type:"textline",tokens:["eZ","=","fp",".","xy","*","fc","/","(","qn","*","fp",".","z",")",";","fc","=","UNITY_VALUE_NODES",";","fd","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eY",")",".","a",";"]},{type:"textline",tokens:["for","(","float","qq","=","1.0",";","qq","<=","qn",";","qq","++",")","{","if","(","fd","<","fc",")","{","fc","-=","fb",";","eY","-=","eZ",";","fd","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eY",")",".","a",";","}","}"]},{type:"textline",tokens:["eZ","=","eY","+","eZ",";","fb","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eZ",")",".","a","-","(","fc","+","fb",")",";","fc","=","fd","-","fc",";","fb","=","fc","/","(","fc","-","fb",")",";"]},{type:"textline",tokens:["eY","=","fb","*","eZ","+","(","UNITY_VALUE_NODES","-","fb",")","*","eY",";","qp","=","eC","(","eY",")",";","}","else","qp","=","ql",";"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"qr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qs","=","clamp","(","qr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"qt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qu",qualifier:["float"],is_optional:false},{type:"node_out",name:"qv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qv","=","er","(","qt",",","qu",")",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"qw",qualifier:["float"],is_optional:false},{type:"node_in",name:"qx",qualifier:["float"],is_optional:false},{type:"node_in",name:"qy",qualifier:["float"],is_optional:false},{type:"node_in",name:"qz",qualifier:["float"],is_optional:false},{type:"node_in",name:"qA",qualifier:["float"],is_optional:false},{type:"node_out",name:"qB",qualifier:["float"],is_optional:true},{type:"node_out",name:"qC",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qB"],statements:[{type:"textline",tokens:["qB","=","qw",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qC"],statements:[{type:"textline",tokens:["qC","=","vec4","(","qx",",","qy",",","qz",",","qA",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"qD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qD","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"qE",qualifier:["float"],is_optional:false},{type:"node_in",name:"qF",qualifier:["float"],is_optional:false},{type:"node_in",name:"qG",qualifier:["float"],is_optional:false},{type:"node_out",name:"qH",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qH","=","smoothstep","(","qF",",","qG",",","qE",")",";"]}]},{type:"node",name:"B4W_GLOW_OUTPUT",declarations:[{type:"node_in",name:"qI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["eT","=","qI",";","eX","=","qJ",";"]}]},{type:"node",name:"B4W_VECTOSCAL",declarations:[{type:"node_in",name:"qK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qL","=","(","qK",".","r","+","qK",".","g","+","qK",".","b",")","/","3.0",";"]}]},{type:"node",name:"B4W_SCALTOVEC",declarations:[{type:"node_in",name:"qM",qualifier:["float"],is_optional:false},{type:"node_out",name:"qN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qN","[","0","]","=","qM",";","qN","[","1","]","=","qM",";","qN","[","2","]","=","qM",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","qO","(","in","vec3","eS",",","out","vec3","eT",",","out","vec3","eU",",","out","vec3","eV",",","out","float","eW",",","out","float","eX",")","{","vec2","eY",",","eZ",";","float","e_",",","fa",",","fb",",","fc",",","fd",",","fe",",","ff",",","fg",",","fh",";","vec4","fi",",","fj",";","mat3","fk",";","vec3","fl",",","fm",",","fn",",","fo",",","fp",";","eT","=","em",";","eU","=","em",";","eV","=","em",";","eW","=","ZERO_VALUE_NODES",";","eX","=","ZERO_VALUE_NODES",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["fl","=","bw",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","fl","=","fl",";","else","fl","=","-","fl",";"]}]}}]},{type:"textline",tokens:["fm","=","normalize","(","fl",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["fn","=","cross","(","fl",",","bx",".","xyz",")","*","bx",".","w",";","fk","=","mat3","(","bx",".","xyz",",","fn",",","fl",")",";","fk","=","fk",";"]}]}}]},{type:"textline",tokens:["fl","=","bu",";","fi","=","bv",";","e_","=","u_emit",";","fa","=","u_ambient",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","qP","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","qV","(","vec3","qQ",",","mat4","qR",")","{","vec3","qS",",","qT",",","qU",";","qS","=","vec3","(","qR","[","0","]","[","0","]",",","qR","[","1","]","[","0","]",",","qR","[","2","]","[","0","]",")",";","qT","=","vec3","(","qR","[","0","]","[","1","]",",","qR","[","1","]","[","1","]",",","qR","[","2","]","[","1","]",")",";","qU","=","vec3","(","qR","[","0","]","[","2","]",",","qR","[","1","]","[","2","]",",","qR","[","2","]","[","2","]",")",";","qT","=","cross","(","qU",",","qS",")",";","qS","=","normalize","(","qS",")",";","qT","=","normalize","(","qT",")",";","qU","=","normalize","(","qU",")",";","return","mat4","(","vec4","(","qS",",","0.0",")",",","vec4","(","qT",",","0.0",")",",","vec4","(","qU",",","0.0",")",",","vec4","(","qQ",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","ra","(","vec3","qW",",","vec3","qX",")","{","vec3","qY",",","qZ",",","q_",";","qY","=","qW","-","qX",";","qY",".","y","=","0.0",";","qZ","=","cross","(","qP",",","qY",")",";","q_","=","cross","(","qY",",","qZ",")",";","qZ","=","normalize","(","qZ",")",";","q_","=","normalize","(","q_",")",";","qY","=","normalize","(","qY",")",";","return","mat4","(","vec4","(","qZ",",","0.0",")",",","vec4","(","q_",",","0.0",")",",","vec4","(","qY",",","0.0",")",",","vec4","(","qX",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","ri","(","in","vec3","rb",",","float","rc",",","float","rd",",","float","re",",","vec3","rf",")","{","float","rg",",","rh",";","rg","=","fract","(","length","(","rf",")","/","0.17",")",";","rh","=","re","+","rg","/","10.0",";","rg","=","rg",";","if","(","re","!=","0.0",")","rg","/=","re",";","rb","*=","1.0","+","0.5","*","sin","(","rc",")",";","rg","=","length","(","rb",")","*","rd","*","sin","(","2.0","*","3.14","*","rc","*","rh","+","rg",")",";","return","bl","(","rg",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","rq","(","in","vec3","rj",",","in","vec3","rk",",","in","mat4","rl",")","{","vec3","rm",";","float","rn",",","ro",";","mat4","rp",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["rp","=","qV","(","rk",",","rl",")",";"]}]}},{type:"elif",expression:["BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["rn","=","fract","(","(","rk",".","x","*","1.43","+","rk",".","y","*","0.123","+","rk",".","z","*","6.1",")",")",";","rn","=","2.0","*","M_PI","*","rn",";","rm","=","normalize","(","vec3","(","rl","[","0","]","[","2","]",",","0.0",",","rl","[","2","]","[","2","]",")",")",";","ro","=","acos","(","rm","[","2","]",")",";","if","(","rm","[","0","]","<","0.0",")","ro","=","2.0","*","M_PI","-","ro",";","ro","=","ro","-","rn",";","if","(","ro","<","0.0",")","ro","=","2.0","*","M_PI","+","ro",";","rn","=","rn",";","if","(","ro","<=","MAX_BILLBOARD_ANGLE",")","rn","+=","ro",";","else","if","(","ro","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","rn","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","ro","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","ro","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","rn","+=","ro","-","M_PI",";","else","if","(","ro","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","rn","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","ro","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","rn","+=","ro","-","2.0","*","M_PI",";","rp","=","bj","(","rn",")",";","rp","[","3","]","=","vec4","(","rk",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["rp","=","ra","(","rj",",","rk",")",";"]}]}}]},{type:"textline",tokens:["return","rp",";","}"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","rw","(","in","vec3","rr",",","in","vec3","rs",",","in","mat4","rt",",","mat4","ru",")","{","mat4","rv",";","rv","=","rq","(","rr",",","rs",",","rt",")",";","ru","[","3","]","=","vec4","(","0.0",",","0.0",",","0.0",",","1.0",")",";","rv","=","rv","*","ru",";","return","rv",";","}"]}]}}]},{type:"textline",tokens:["aM","rD","(","in","vec3","rx",",","in","vec3","ry",",","in","vec3","rz",",","in","vec3","rA",",","in","vec3","rB",",","in","mat4","rC",")","{","rx","=","(","rC","*","vec4","(","rx",",","1.0",")",")",".","xyz",";","ry","=","(","rC","*","vec4","(","ry",",","1.0",")",")",".","xyz",";","rz","=","(","rC","*","vec4","(","rz",",","0.0",")",")",".","xyz",";","rA","=","(","rC","*","vec4","(","rA",",","0.0",")",")",".","xyz",";","rB","=","(","rC","*","vec4","(","rB",",","0.0",")",")",".","xyz",";","return","bn","(","aM","(","rx",",","ry",",","rz",",","rA",",","rB",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","rG","(","vec2","rE",",","vec3","rF",")","{","return","(","rE","+","0.5",")","*","rF",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","rN","(","in","vec4","rH",",","in","vec4","rI",",","in","float","rJ",")","{","float","rK",",","rL",",","rM",";","rK","=","rH","[","0","]","*","rI","[","0","]","+","rH","[","1","]","*","rI","[","1","]","+","rH","[","2","]","*","rI","[","2","]","+","rH","[","3","]","*","rI","[","3","]",";","if","(","rK","<","0.0",")","{","rI","*=","-","1.0",";","rK","=","-","rK",";","}","if","(","abs","(","rK",")",">=","1.0",")","return","rH",";","rL","=","acos","(","rK",")",";","rK","=","sqrt","(","1.0","-","rK","*","rK",")",";","if","(","abs","(","rK",")","<","0.001",")","return","vec4","(","rH","*","0.5","+","rI","*","0.5",")",";","rM","=","sin","(","(","1.0","-","rJ",")","*","rL",")","/","rK",";","rK","=","sin","(","rJ","*","rL",")","/","rK",";","return","rH","*","rM","+","rI","*","rK",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","rZ","(","in","vec3","rO",",","in","vec4","rP",",","in","vec4","rQ",",","in","vec4","rR",",","in","vec4","rS",",","in","float","rT",")","{","vec4","rU",",","rV",";","vec3","rW",",","rX",",","rY",";","rW","=","aZ","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rO",",","1.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["rU","=","rN","(","rP",",","rQ",",","rT",")",";","rV","=","mix","(","rR",",","rS",",","rT",")",";","rX","=","aS","(","rU",",","rW",")",";","rX","=","rX","*","rV",".","w","+","rV",".","xyz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["rY","=","aS","(","rP",",","rW",")",";","rW","=","aS","(","rQ",",","rW",")",";","rY","=","rY","*","rR",".","w","+","rR",".","xyz",";","rW","=","rW","*","rS",".","w","+","rS",".","xyz",";","rX","=","mix","(","rY",",","rW",",","rT",")",";"]}]}}]},{type:"textline",tokens:["return","be","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rX",",","1.0",")",")",";","}","vec3","sh","(","in","vec3","r_",",","in","vec4","sa",",","in","vec4","sb",",","in","float","sc",")","{","vec4","sd",";","vec3","se",",","sf",",","sg",";","se","=","aZ","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","r_",",","0.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["sd","=","rN","(","sa",",","sb",",","sc",")",";","sf","=","aS","(","sd",",","se",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sg","=","aS","(","sa",",","se",")",";","se","=","aS","(","sb",",","se",")",";","sf","=","mix","(","sg",",","se",",","sc",")",";"]}]}}]},{type:"textline",tokens:["return","be","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sf",",","0.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","rZ","(","in","vec3","si",",","in","vec4","sj",",","in","vec4","sk",")","{","vec3","sl",";","sl","=","aZ","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","si",",","1.0",")",")",";","sl","=","aS","(","sj",",","sl",")",";","sl","=","sl","*","sk",".","w","+","sk",".","xyz",";","return","be","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sl",",","1.0",")",")",";","}","vec3","sh","(","in","vec3","sm",",","in","vec4","sn",")","{","vec3","so",";","so","=","aZ","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sm",",","0.0",")",")",";","so","=","aS","(","sn",",","so",")",";","return","be","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","so",",","0.0",")",")",";","}"]}]}}]},{type:"textline",tokens:["void","sD","(","inout","vec3","sp",",","inout","vec3","sq",",","inout","vec3","sr",",","inout","vec3","ss",")","{","int","st",",","su",";","vec4","sv",";","vec3","sw",",","sx",",","sy",",","sz",";","float","sA",",","sB",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sA","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","sw","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sx","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sy","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sz","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sv","=","a_influence",";","for","(","int","sC","=","0",";","sC","<","4",";","sC","++",")","{","st","=","int","(","sv","[","sC","]",")",";","sB","=","fract","(","sv","[","sC","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sw","+=","sB","*","rZ","(","sp",",","u_quatsb","[","st","]",",","u_quatsa","[","st","]",",","u_transb","[","st","]",",","u_transa","[","st","]",",","sA",")",";","sx","+=","sB","*","sh","(","sq",",","u_quatsb","[","st","]",",","u_quatsa","[","st","]",",","sA",")",";","sy","+=","sB","*","sh","(","sr",",","u_quatsb","[","st","]",",","u_quatsa","[","st","]",",","sA",")",";","sz","+=","sB","*","sh","(","ss",",","u_quatsb","[","st","]",",","u_quatsa","[","st","]",",","sA",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sw","+=","sB","*","rZ","(","sp",",","u_quatsb","[","st","]",",","u_transb","[","st","]",")",";","sx","+=","sB","*","sh","(","sq",",","u_quatsb","[","st","]",")",";","sy","+=","sB","*","sh","(","sr",",","u_quatsb","[","st","]",")",";","sz","+=","sB","*","sh","(","ss",",","u_quatsb","[","st","]",")",";"]}]}}]},{type:"textline",tokens:["}","sp","=","sw",";","sq","=","sx",";","sr","=","sy",";","ss","=","sz",";","}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","su","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","su",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sp","=","rZ","(","sp",",","u_quatsb","[","su","]",",","u_quatsa","[","su","]",",","u_transb","[","su","]",",","u_transa","[","su","]",",","sA",")",";","sq","=","sh","(","sq",",","u_quatsb","[","su","]",",","u_quatsa","[","su","]",",","sA",")",";","sr","=","sh","(","sr",",","u_quatsb","[","su","]",",","u_quatsa","[","su","]",",","sA",")",";","ss","=","sh","(","ss",",","u_quatsb","[","su","]",",","u_quatsa","[","su","]",",","sA",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sp","=","rZ","(","sp",",","u_quatsb","[","su","]",",","u_transb","[","su","]",")",";","sq","=","sh","(","sq",",","u_quatsb","[","su","]",")",";","sr","=","sh","(","sr",",","u_quatsb","[","su","]",")",";","ss","=","sh","(","ss",",","u_quatsb","[","su","]",")",";"]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","sO","(","inout","vec3","sE",",","in","vec3","sF",",","in","float","sG",",","in","float","sH",",","in","float","sI",",","in","vec3","sJ",",","in","float","sK",")","{","vec3","sL",";","float","sM",",","sN",";","sM","=","length","(","sF",")",";","sN","=","sH","*","(","1.0","+","0.1","*","fract","(","sM",")",")",";","sM","=","sG","*","sK","*","(","1.0","+","sin","(","2.0","*","3.14","*","sI","*","sN","+","sM",")",")",";","sN","=","(","sE",".","y","-","sF",".","y",")","*","abs","(","sM",")",";","sN","+=","1.0",";","sN","*=","sN",";","sN","=","sN","*","sN","-","sN",";","sL","=","sE",";","sL",".","xz","+=","sJ",".","xz","*","sN","*","sign","(","sM",")",";","sL","=","sL","-","sF",";","if","(","all","(","equal","(","sL",",","vec3","(","0.0",")",")",")",")","sE","=","sF",";","else","{","sM","=","length","(","sE","-","sF",")",";","sE","=","sF","+","normalize","(","sL",")","*","sM",";","}","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","sQ","(","vec4","sP",")","{","return","sP","*","sP","*","(","3.0","-","2.0","*","sP",")",";","}","vec4","sS","(","vec4","sR",")","{","return","abs","(","fract","(","sR","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","sU","(","vec4","sT",")","{","return","sQ","(","sS","(","sT",")",")",";","}","void","tk","(","inout","vec3","sV",",","in","float","sW",",","in","vec3","sX",",","in","vec3","sY",",","in","vec3","sZ",",","in","float","s_",",","in","float","ta",",","in","float","tb",",","in","vec3","tc",")","{","vec3","td",";","vec4","te",";","vec2","tf",",","tg",";","float","th",",","ti",",","tj",";","th","=","dot","(","sZ",",","vec3","(","1.0",")",")",";","ti","=","th","+","tc",".","g",";","tj","=","dot","(","sV",",","vec3","(","tc",".","g",")",")",";","tf","=","(","sW","+","vec2","(","tj",",","ti",")",")",";","te","=","(","(","fract","(","(","tf",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","sY",")","*","s_",";","te","=","sU","(","te",")",";","tg","=","te",".","xz","+","te",".","yw",";","tg",".","y","=","0.5","-","tg",".","y",";","td","=","tg",".","xyx","*","tc",".","rbr","*","vec3","(","ta","*","sX",".","x",",","tb",",","ta","*","sX",".","z",")",";","sV","+=","td",";","}"]}]}}]},{type:"textline",tokens:["void","tr","(","inout","vec3","tl",",","inout","vec3","tm",",","in","vec3","tn",")","{","vec3","to",",","tp",",","tq",";","to","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["tp","=","tm",";","tq","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tp","=","tl",";","tq","=","tm",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tk","(","tp",",","u_time",",","tn",",","to",",","tq",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["sO","(","tp",",","tq",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","to",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sO","(","tp",",","tq",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","to",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["tl","+=","tp","-","tm",";","tm","=","tp",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tl","=","tp",";","tm","=","tq",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/nodes.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_orco_tex_coord",";","varying","vec3","ek",";"]}]}}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_param",name:"node_TEX_COORD_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"eM",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["eM","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_param",name:"node_UV_MERGED_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"eL",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["eL","=","node_UV_MERGED_var_a_uv",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_param",name:"node_UVMAP_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"eN",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["eN","=","node_UVMAP_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"eF",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["eF","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"ts",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["ts","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"tt",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["tt","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"tu",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["tu","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"tv",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["tv","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","tw","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ek","=","a_orco_tex_coord",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","tB","(","vec3","tx",",","float","ty",",","vec2","tz",")","{","vec2","tA",";","tA","=","vec2","(","(","tx",".","x","-","tz",".","x",")","/","ty",",","-","(","tx",".","z","-","tz",".","y",")","/","ty",")",";","return","fract","(","tA",")",";","}","vec2","tF","(","vec2","tC",",","float","tD",",","vec2","tE",")","{","return","vec2","(","tC",".","x","*","tD",",","-","tC",".","y","*","tD",")","+","tE",";","}","aM","tG","(",")","{","return","aM","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","aM","ub","(","vec3","tH",",","vec3","tI",",","vec3","tJ",",","vec3","tK",",","vec3","tL",",","PRECISION","sampler2D","tM",",","sampler2D","tN",",","vec3","tO",",","float","tP",",","vec3","tQ",",","vec4","tR",",","mat4","tS",")","{","mat4","tT",";","vec4","tU",";","vec2","tV",",","tW",",","tX",";","float","tY",",","tZ",";","vec3","t_",";","t_","=","aS","(","tR",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","tY","=","-","t_",".","x",";","tZ","=","-","t_",".","z",";","tV","=","vec2","(","tQ",".","x","+","tP","*","(","-","1.0","-","tY",")","/","2.0",",","tQ",".","z","+","tP","*","(","1.0","-","tZ",")","/","2.0",")",";","tW","=","tB","(","tL",",","tP",",","tV",")",";","tZ","=","tP","/","2.0",";","tX","=","abs","(","tF","(","tW","-","vec2","(","0.5",")",",","tP",",","vec2","(","0.0",")",")",")",";","tZ","=","tZ","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","tX",")",">","tZ",")","return","tG","(",")",";","tZ","=","tP","/","tO",".","z",";","tX","=","(","tW","-","vec2","(","0.5",")",")","*","tZ","+","vec2","(","0.5",")",";","t_","=","t_","*","(","tP","/","tO",".","z","-","1.0",")","/","2.0",";","tX",".","x","+=","t_",".","x",";","tX",".","y","-=","t_",".","z",";","tU","=","texture2D","(","tN",",","tX",")",";","tZ","=","tU",".","r",";","if","(","tZ","<","u_scale_threshold",")","return","tG","(",")",";","tY","=","tO",".","y","-","tO",".","x",";","tY","=","tO",".","y","-","texture2D","(","tM",",","tX",")",".","r","*","tY",";","tX","=","tH",".","xz","-","tL",".","xz",";","tL",".","xz","=","tF","(","tW",",","tP",",","tV",")",";","tL",".","y","=","tY",";","tH",".","xz","=","tL",".","xz","+","tX",";","tH",".","y","*=","tZ",";","tH",".","y","+=","tY",";","t_","=","tU",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["tH","-=","tL",";","tT","=","rq","(","tQ",",","tL",",","tS",")",";","aM","ua","=","rD","(","tH",",","tL",",","tI",",","tJ",",","tK",",","tT",")",";","ua",".","b","=","tL",";","ua",".","f","=","t_",";","return","bn","(","ua",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","bn","(","aM","(","tH",",","tL",",","tI",",","tJ",",","tK",",","t_",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","uh","(","mat4","uc",",","vec4","ud",")","{","vec4","ue",";","float","uf",";","vec2","ug",";","ug","=","(","uc","*","u_v_light_matrix","[","3","]",")",".","xy",";","uf","=","SHADOW_TEX_RES","/","2.0",";","ug","=","floor","(","ug","*","uf","+","0.5",")","/","uf","-","ug",";","ue","=","uc","*","ud",";","ue",".","xy","+=","ug",";","ue","=","u_b_light_matrix","*","ue",";","return","ue",";","}","void","ul","(","vec3","ui",",","vec3","uj",")","{","vec4","uk",";","uk","=","u_v_light_matrix","*","vec4","(","ui","+","u_normal_offset","*","uj",",","1.0",")",";","bA","=","uh","(","u_p_light_matrix0",",","uk",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["bB","=","uh","(","u_p_light_matrix1",",","uk",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["bC","=","uh","(","u_p_light_matrix2",",","uk",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","uh","(","u_p_light_matrix3",",","uk",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","uv","(","inout","vec3","up",",","in","float","uq",",","in","float","ur",",","in","vec4","us",")","{","float","ut",",","uu",";"]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["ut","=","clamp","(","(","uq","-","u_fog_params",".","z",")","/","u_fog_params",".","y",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOG_TYPE","QUADRATIC",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ut","*=","ut",";"]}]}},{type:"elif",expression:["FOG_TYPE","LINEAR",{type:"equal_expr",places:2}],group:{type:"group",parts:[]}},{type:"elif",expression:["FOG_TYPE","INVERSE_QUADRATIC",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ut","=","sqrt","(","ut",")",";"]}]}}]},{type:"textline",tokens:["if","(","u_fog_params",".","w",">","0.0",")","{","if","(","ur",">","u_fog_params",".","w",")","ut","=","0.0",";","else","if","(","ur",">","0.0",")","{","uu","=","(","u_fog_params",".","w","-","ur",")","/","u_fog_params",".","w",";","ut","*=","uu","*","uu",";","}","}","ut","=","1.0","-","(","1.0","-","ut",")","*","(","1.0","-","u_fog_params",".","x",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ut","=","0.0",";"]}]}}]},{type:"textline",tokens:["up","=","mix","(","up",",","us",".","rgb",",","ut",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","uB","(","in","mat4","uw",",","in","vec3","ux",")","{","vec3","uy",",","uz",",","uA",";","uy","=","mix","(","uw","[","0","]",".","rgb",",","uw","[","1","]",".","rgb",",","max","(","sign","(","ux",".","x",")",",","0.0",")",")",";","uz","=","mix","(","uw","[","2","]",".","rgb",",","uw","[","3","]",".","rgb",",","max","(","sign","(","ux",".","z",")",",","0.0",")",")",";","uA","=","vec3","(","uw","[","0","]",".","a",",","uw","[","1","]",".","a",",","uw","[","2","]",".","a",")",";","uz","=","mix","(","uy",",","uz",",","abs","(","ux",".","z",")",")",";","uz","=","mix","(","uz",",","uA",",","abs","(","ux",".","y",")",")",";","aE","(","uz",")",";","return","uz",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","uD","(","inout","float","uC",")","{","uC","-=","0.5",";","uC","=","4.0","*","(","uC","*","uC","*","uC",")","+","0.5",";","}","void","uQ","(","inout","vec3","uE",",","in","float","uF",",","in","vec3","uG",",","in","float","uH",",","in","vec4","uI",",","in","vec4","uJ",",","in","float","uK",")","{","vec3","uL",",","uM",";","float","uN",",","uO",",","uP",";","uN","=","uJ",".","w","*","uF",";","uN","=","exp","(","-","uN","*","uN",")",";","uN","=","clamp","(","uN",",","0.0",",","1.0",")",";","uO","=","max","(","uG",".","y",",","0.0",")",";","uF","=","max","(","uF","-","max","(","uH","/","uO",",","0.0",")",",","0.0",")",";","uP","=","uI",".","w","*","uF",";","uP","=","1.0","-","uP",";","uP","=","max","(","uP",",","0.0",")",";","uD","(","uP",")",";","uP","+=","max","(","uK","-","0.5",",","0.0",")",";","if","(","uP","<","uN",")","{","uL","=","vec3","(","0.0",",","0.02",",","0.05",")",";","uM","=","uI",".","rgb",";","uH","=","clamp","(","-","uH","*","0.03",",","0.0",",","0.8",")",";","uL","=","mix","(","uM",",","uL",",","min","(","uO",",","1.0",")",")",";","uL","=","mix","(","uL",",","vec3","(","0.0",")",",","uH",")",";","uE","=","mix","(","uL",",","uE",",","uP",")",";","}","if","(","uP",">=","uN",")","{","uE","=","mix","(","uJ",".","rgb",",","uE",",","uN",")",";","}","}","void","uW","(","inout","vec3","uR",",","in","float","uS",",","in","float","uT",")","{","vec3","uU",";","float","uV",";","uV","=","u_underwater_fog_color_density",".","w","*","uS",";","uV","=","1.0","-","uV",";","uV","=","clamp","(","uV",",","0.0",",","1.0",")",";","uD","(","uV",")",";","uT","=","clamp","(","-","uT","*","0.03",",","0.0",",","0.8",")",";","uU","=","mix","(","u_underwater_fog_color_density",".","rgb",",","vec3","(","0.0",")",",","uT",")",";","uR","=","mix","(","uU",",","uR",",","uV",")",";","}"]}]}}]},{type:"textline",tokens:["void","vc","(","inout","vec3","uX",",","float","uY",",","vec3","uZ",",","float","u_",")","{","vec4","va",";","vec3","vb",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vb","=","uB","(","u_cube_fog",",","uZ",")",";","va","=","vec4","(","vb",",","u_fog_color_density",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["va","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uQ","(","uX",",","uY",",","uZ",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","va",",","u_",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uv","(","uX",",","uY",",","bu",".","y",",","va",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/lighting_nodes.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","vf","=","0.0",";","float","vg","=","1.0",";","float","vh","=","0.5",";","vec3","vi","=","vec3","(","vf",")",";"]},{type:"node",name:"LIGHTING_BEGIN",declarations:[{type:"node_out",name:"vG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vJ",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"vK",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"vL",qualifier:["vec2"],is_optional:true},{type:"node_out",name:"vM",qualifier:["vec2"],is_optional:true},{type:"node_out",name:"vN",qualifier:["float"],is_optional:true},{type:"node_out",name:"vO",qualifier:["float"],is_optional:true},{type:"node_out",name:"vP",qualifier:["vec4"],is_optional:true}],statements:[{type:"textline",tokens:["vG","=","vj",";","vH","=","vk",";","vI","=","vl",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vJ"],statements:[{type:"textline",tokens:["vJ","=","vm",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vK"],statements:[{type:"textline",tokens:["vK","=","vo",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vM"],statements:[{type:"textline",tokens:["vM","=","vq",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vL"],statements:[{type:"textline",tokens:["vL","=","vr",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vN"],statements:[{type:"textline",tokens:["vN","=","vs",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vO"],statements:[{type:"textline",tokens:["vO","=","vt",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_vP"],statements:[{type:"textline",tokens:["vP","=","vu",";"]}]}]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"vQ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"vS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vT",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"vU",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["SHADELESS_MAT",{type:"logic_negative_expr",places:1},"NODES_GLOW",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],statements:[{type:"textline",tokens:["vT","=","vec4","(","vQ","+","vS","*","vR",",","vf",")",";","vU","=","vec3","(","vf",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["vT","=","vec4","(","vS",",","vf",")",";","vU","=","vi",";"]}]}]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"vV",qualifier:["float"],is_optional:false},{type:"node_out",name:"vW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vX",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"vY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"vZ",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["NODES_GLOW",{type:"logic_negative_expr",places:1},"NUM_LIGHTS",0,{type:"g_expr",places:2},{type:"logical_and_expr",places:2}],statements:[{type:"textline",tokens:["vX","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["vZ","=","vh",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["vZ","=","vf",";"]}]}]},{type:"textline",tokens:["vY","=","u_light_color_intensities","[","LAMP_IND","]",";","if","(","LAMP_SHADOW_MAP_IND","!=","-","1",")","vY","*=","vV",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["vE","=","u_light_positions","[","LAMP_IND","]",";","vW","=","vE","-","vn",";"]},{type:"textline",tokens:["vx","=","length","(","vW",")",";","vY","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","vx","*","vx",")",";","vW","=","normalize","(","vW",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["vE","=","u_light_directions","[","LAMP_IND","]",";","vx","=","dot","(","vW",",","vE",")",";","vx","*=","smoothstep","(","vf",",","vg",",","(","vx","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","vY","*=","vx",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["vW","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"v_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wa",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wc",qualifier:["float"],is_optional:false},{type:"node_in",name:"wd",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"we",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["we","=","vf",";","if","(","wa",".","r","!=","vf",")","{","vx","=","(","vg","-","wc",")","*","dot","(","wb",",","v_",")","+","wc",";","if","(","wd","[","0","]","==","vf",")","{","we","=","vg",";","}","else","{","vx","=","vg","+","abs","(","vx",")",";","vx","=","wd","[","1","]","+","(","vg","-","wd","[","1","]",")","*","pow","(","vx",",","wd","[","0","]",")",";","we","=","clamp","(","vx",",","vf",",","vg",")",";","}","we","=","max","(","we",",","vf",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"wf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wg",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wi",qualifier:["float"],is_optional:false},{type:"node_out",name:"wj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wj","=","vf",";","if","(","wg",".","r","!=","vf",")","{","vx","=","(","vg","-","wi",")","*","dot","(","wh",",","wf",")","+","wi",";","wj","=","max","(","vx",",","vf",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"wk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wl",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wn",qualifier:["float"],is_optional:false},{type:"node_in",name:"wo",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wp","=","vf",";","if","(","wl",".","r","!=","vf",")","{","vx","=","(","vg","-","wn",")","*","dot","(","wm",",","wk",")","+","wn",";","if","(","wo","[","0","]",">","vf",")","{","vy","=","max","(","dot","(","wm",",","vp",")",",","vf",")",";","vz","=","wo","[","0","]","*","wo","[","0","]",";","vA","=","vg","-","vh","*","(","vz","/","(","vz","+","0.33",")",")",";","vE","=","wk","-","vx","*","wm",";","vF","=","vp","-","vy","*","wm",";"]},{type:"textline",tokens:["if","(","length","(","vE",")","==","vf","||","length","(","vF",")","==","vf","||","abs","(","vx",")",">","vg","||","abs","(","vy",")",">","vg",")"]},{type:"textline",tokens:["wp","=","vx","*","vA",";","else","{","vB","=","acos","(","vx",")",";","vy","=","acos","(","vy",")",";","vE","=","normalize","(","vE",")",";","vF","=","normalize","(","vF",")",";","vC","=","max","(","vB",",","vy",")",";","vD","=","min","(","vB",",","vy",")",";","vD","*=","0.95",";","vy","=","max","(","dot","(","vE",",","vF",")",",","vf",")",";","vz","=","0.45","*","(","vz","/","(","vz","+","0.09",")",")",";","wp","=","vx","*","(","vA","+","(","vz","*","vy","*","sin","(","vC",")","*","tan","(","vD",")",")",")",";","}","}","else","wp","=","vx",";","wp","=","max","(","wp",",","vf",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"wq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wr",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"ws",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wt",qualifier:["float"],is_optional:false},{type:"node_in",name:"wu",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wv",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wv","=","vf",";","if","(","wr",".","r","!=","vf",")","{","vx","=","(","vg","-","wt",")","*","dot","(","ws",",","wq",")","+","wt",";","vD","=","max","(","dot","(","ws",",","vp",")",",","vf",")",";","if","(","wu","[","0","]","<=","vg",")","wv","=","vx","*","pow","(","max","(","vD","*","vx",",","0.1",")",",","wu","[","0","]","-","vg",")",";","else","wv","=","vx","*","pow","(","1.0001","-","vD",",","wu","[","0","]","-","vg",")",";","wv","=","max","(","wv",",","vf",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"ww",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wx",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wy",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wz",qualifier:["float"],is_optional:false},{type:"node_in",name:"wA",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wB","=","vf",";","if","(","wx",".","r","!=","vf",")","{","vD","=","(","vg","-","wz",")","*","dot","(","wy",",","ww",")","+","wz",";","vD","=","acos","(","vD",")",";","if","(","vD","<","wA","[","0","]",")","wB","=","vg",";","else","if","(","vD",">","(","wA","[","0","]","+","wA","[","1","]",")","||","wA","[","1","]","==","vf",")","wB","=","vf",";","else","wB","=","vg","-","(","(","vD","-","wA","[","0","]",")","/","wA","[","1","]",")",";","wB","=","max","(","wB",",","vf",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"wC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wD",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wF",qualifier:["float"],is_optional:false},{type:"node_in",name:"wG",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wH",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wH","=","vf",";","if","(","wD",".","g","!=","vf",")","{","vF","=","normalize","(","wC","+","vp",")",";","wH","=","(","vg","-","wF",")","*","max","(","dot","(","wE",",","vF",")",",","vf",")","+","wF",";","wH","=","pow","(","wH",",","wG","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"wI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wJ",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wL",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wM","=","vf",";","if","(","wJ",".","g","!=","vf",")","{","vF","=","normalize","(","wI","+","vp",")",";","vD","=","max","(","dot","(","wK",",","vF",")",",","0.001",")",";"]},{type:"textline",tokens:["vx","=","max","(","dot","(","wK",",","vp",")",",","0.01",")",";","vC","=","max","(","dot","(","wK",",","wI",")",",","0.01",")",";","vD","=","tan","(","acos","(","vD",")",")",";","vy","=","max","(","wL","[","0","]",",","0.001",")",";","wM","=","vC","*","(","vg","/","(","4.0","*","M_PI","*","vy","*","vy",")",")","*","(","exp","(","-","(","vD","*","vD",")","/","(","vy","*","vy",")",")","/","(","sqrt","(","vx","*","vC",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"wN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wO",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wQ",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wR","=","vf",";","if","(","wO",".","g","!=","vf",")","{","vF","=","normalize","(","wN","+","vp",")",";","vC","=","acos","(","dot","(","vF",",","wP",")",")",";","if","(","vC","<","wQ","[","0","]",")","wR","=","vg",";","else","if","(","vC",">=","wQ","[","0","]","+","wQ","[","1","]","||","wQ","[","1","]","==","vf",")","wR","=","vf",";","else","wR","=","vg","-","(","vC","-","wQ","[","0","]",")","/","wQ","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"wS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wT",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wV",qualifier:["float"],is_optional:false},{type:"node_in",name:"wW",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wX","=","vf",";","if","(","wT",".","g","!=","vf",")","{","if","(","wW","[","0","]","<","1.0","||","wW","[","1","]","==","vf",")","wX","=","vf",";","else","{","if","(","wW","[","1","]","<","100.0",")","wW","[","1","]","=","sqrt","(","1.0","/","wW","[","1","]",")",";","else","wW","[","1","]","=","10.0","/","wW","[","1","]",";","vF","=","normalize","(","vp","+","wS",")",";","vC","=","(","vg","-","wV",")","*","max","(","dot","(","wU",",","vF",")",",","vf",")","+","wV",";","if","(","vC","<","vf",")","wX","=","vf",";","else","{","vx","=","max","(","dot","(","wU",",","vp",")",",","0.01",")",";","vy","=","dot","(","wU",",","wS",")",";","if","(","vy","<=","0.01",")","wX","=","vf",";","else","{","vD","=","max","(","dot","(","vp",",","vF",")",",","0.01",")",";","vz","=","vg",";","vx","=","(","2.0","*","vC","*","vx",")","/","vD",";","vy","=","(","2.0","*","vC","*","vy",")","/","vD",";","vy","=","min","(","min","(","vz",",","vx",")",",","vy",")",";","vx","=","sqrt","(","pow","(","wW","[","0","]",",","2.0",")","+","pow","(","vD",",","2.0",")","-","vg",")",";","vD","=","pow","(","vx","-","vD",",","2.0",")","/","pow","(","vx","+","vD",",","2.0",")","*","(","vg","+","pow","(","vD","*","(","vx","+","vD",")","-","vg",",","2.0",")","/","pow","(","vD","*","(","vx","-","vD",")","+","vg",",","2.0",")",")",";","vC","=","acos","(","vC",")",";","wX","=","max","(","vD","*","vy","*","exp","(","-","pow","(","vC",",","2.0",")","/","(","2.0","*","pow","(","wW","[","1","]",",","2.0",")",")",")",",","vf",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"wY",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"wZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"w_",qualifier:["float"],is_optional:false},{type:"node_in",name:"xa",qualifier:["float"],is_optional:false},{type:"node_in",name:"xb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xd",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"xe",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xh",qualifier:["float"],is_optional:false},{type:"node_out",name:"xi",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"xj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["xj","=","wZ","+","xg","*","xf","*","xa",";","xi","=","wY","+","vec4","(","xg","*","xe","*","w_",",","xa",")",";"]}]},{type:"node",name:"LIGHTING_END",declarations:[{type:"node_in",name:"xk",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"xl",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["vv","=","xk",".","rgb",";","vw","=","xl",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","xm","(","vec3","vj",",","vec3","vk",",","vec3","vl",",","vec3","vm",",","vec3","vn",",","vec3","vo",",","vec3","vp",",","vec2","vq",",","vec2","vr",",","float","vs",",","float","vt",",","vec4","vu",",","out","vec3","vv",",","out","vec3","vw",")","{","float","vx",",","vy",",","vz",",","vA",",","vB",",","vC",",","vD",";","vec3","vE",",","vF",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","xp","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","xv","(","inout","float","xq",",","float","xr",",","vec2","xs",",","vec2","xt",")","{","float","xu",";","xu","=","xt",".","x","-","xs",".","x",";","xu","=","(","xr","-","xs",".","x",")","/","xu",";","xq","=","mix","(","xq",",","xt",".","y",",","clamp","(","xu",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","xB","(","inout","vec3","xw",",","float","xx",",","vec4","xy",",","vec4","xz",")","{","float","xA",";","xA","=","xz",".","x","-","xy",".","x",";","xA","=","(","xx","-","xy",".","x",")","/","xA",";","xw","=","mix","(","xw",",","xz",".","yzw",",","clamp","(","xA",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","xH","(","float","xC",",","float","xD",",","vec2","xE","[","SIZE_RAMP_LENGTH","]",")","{","float","xF",",","xG",";","xF","=","xC","/","xD",";","xG","=","xE","[","0","]",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xv","(","xG",",","xF",",","xE","[","0","]",",","xE","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xv","(","xG",",","xF",",","xE","[","1","]",",","xE","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xv","(","xG",",","xF",",","xE","[","2","]",",","xE","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","xG",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xN","(","float","xI",",","float","xJ",",","vec4","xK","[","COLOR_RAMP_LENGTH","]",")","{","vec3","xL",";","float","xM",";","xM","=","xI","/","xJ",";","xL","=","xK","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xB","(","xL",",","xM",",","xK","[","0","]",",","xK","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xB","(","xL",",","xM",",","xK","[","1","]",",","xK","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xB","(","xL",",","xM",",","xK","[","2","]",",","xK","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","xL",";","}"]}]}}]},{type:"textline",tokens:["float","xV","(","float","xO",",","float","xP",",","float","xQ",",","float","xR",")","{","float","xS",",","xT",",","xU",";","xS","=","max","(","0.01",",","min","(","xP",",","xQ",")",")",";","xT","=","max","(","0.01",",","min","(","xP",",","xR",")",")",";","xU","=","xP","-","xT",";","xT","=","clamp","(","xO","/","xS",",","0.0",",","1.0",")","-","step","(","xU",",","xO",")","*","(","xO","-","xU",")","/","xT",";","return","xT",";","}","xp","ya","(",")","{","vec3","xW",",","xX",";","float","xY",",","xZ",";","xp","x_",";","if","(","u_p_cyclic","==","1",")","{","xY","=","mod","(","u_p_time",",","u_p_length",")","-","a_p_delay",";","if","(","xY","<","0.0",")","xY","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","xY","=","u_p_time","-","a_p_delay",";","}","if","(","xY","<","0.0","||","xY",">=","a_p_lifetime",")","{","x_",".","a","=","0.0001",";","x_",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","xY","<","0.0","||","xY",">=","a_p_lifetime",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["xW","=","a_position",";","xX","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xW","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","xX","=","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";"]}]}}]},{type:"textline",tokens:["xW","+=","u_p_nfactor","*","xY","*","xX",";","xW","+=","a_p_vels",".","xyz","*","xY",";","xW",".","y","-=","u_p_gravity","*","xY","*","xY","/","2.0",";","xZ","=","max","(","u_p_mass",",","EPSILON",")",";","xW","+=","(","u_p_wind_fac","*","u_wind","/","xZ",")","*","xY","*","xY","/","2.0",";","x_",".","b","=","xW",";","x_",".","e","=","a_p_vels",".","w","*","xY",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["x_",".","a","=","xH","(","xY",",","u_p_max_lifetime",",","u_p_size_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["x_",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["x_",".","d","=","xN","(","xY",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["x_",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["x_",".","c","=","xV","(","xY",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","x_",";","}"]}]},exports["include/blending.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","yc","=","0.0",";","float","yd","=","1.0",";","vec3","ye","=","vec3","(","yc",")",";","vec3","yf","=","vec3","(","yd",")",";","vec3","yk","(","vec3","yg",")","{","float","yh",",","yi",";","vec4","yj",";","yj","=","vec4","(","yc",",","-","yd","/","3.0",",","2.0","/","3.0",",","-","yd",")",";","yj","=","mix","(","vec4","(","yg",".","bg",",","yj",".","wz",")",",","vec4","(","yg",".","gb",",","yj",".","xy",")",",","step","(","yg",".","b",",","yg",".","g",")",")",";","yj","=","mix","(","vec4","(","yj",".","xyw",",","yg",".","r",")",",","vec4","(","yg",".","r",",","yj",".","yzx",")",",","step","(","yj",".","x",",","yg",".","r",")",")",";","yh","=","yj",".","x","-","min","(","yj",".","w",",","yj",".","y",")",";","yi","=","1.0e-10",";","return","vec3","(","abs","(","yj",".","z","+","(","yj",".","w","-","yj",".","y",")","/","(","6.0","*","yh","+","yi",")",")",",","yh","/","(","yj",".","x","+","yi",")",",","yj",".","x",")",";","}","vec3","yo","(","vec3","yl",")","{","vec3","ym",";","vec4","yn",";","yn","=","vec4","(","yd",",","2.0","/","3.0",",","yd","/","3.0",",","3.0",")",";","ym","=","abs","(","fract","(","vec3","(","yl",".","r",",","yl",".","r",",","yl",".","r",")","+","yn",".","xyz",")","*","6.0","-","yn",".","www",")",";","return","yl",".","b","*","mix","(","yn",".","xxx",",","clamp","(","ym","-","yn",".","xxx",",","yc",",","yd",")",",","yl",".","g",")",";","}","vec3","ys","(","vec3","yp",",","vec3","yq",",","float","yr",")","{","return","mix","(","yp",",","yq",",","yr",")",";","}","vec3","yw","(","vec3","yt",",","vec3","yu",",","float","yv",")","{","return","yv","*","yt","+","yu",";","}","vec3","yA","(","vec3","yx",",","vec3","yy",",","float","yz",")","{","return","yy","-","yz","*","yx",";","}","vec3","yF","(","vec3","yB",",","vec3","yC",",","float","yD",")","{","float","yE",";","yE","=","yd","-","yD",";","return","(","vec3","(","yE",")","+","yD","*","yB",")","*","yC",";","}","vec3","yK","(","vec3","yG",",","vec3","yH",",","float","yI",")","{","vec3","yJ",";","yJ","=","vec3","(","yd","-","yI",")",";","return","yf","-","(","yJ","+","yI","*","(","yf","-","yG",")",")","*","(","yf","-","yH",")",";","}","vec3","yP","(","vec3","yL",",","vec3","yM",",","float","yN",")","{","vec3","yO",";","yO","=","vec3","(","yd","-","yN",")",";","return","mix","(","yM","*","(","yO","+","2.0","*","yN","*","yL",")",",","yf","-","(","yO","+","2.0","*","yN","*","(","yf","-","yL",")",")","*","(","yf","-","yM",")",",","step","(","0.5",",","yM",")",")",";","}","vec3","yT","(","vec3","yQ",",","vec3","yR",",","float","yS",")","{","return","mix","(","yR",",","abs","(","yQ","-","yR",")",",","yS",")",";","}","vec3","yX","(","vec3","yU",",","vec3","yV",",","float","yW",")","{","return","mix","(","yV",",","yV","/","(","yU","+","step","(","yU",",","ye",")",")",",","yW",")",";","}","vec3","za","(","vec3","yY",",","vec3","yZ",",","float","y_",")","{","return","mix","(","yZ",",","min","(","yY",",","yZ",")",",","y_",")",";","}","vec3","ze","(","vec3","zb",",","vec3","zc",",","float","zd",")","{","return","max","(","zd","*","zb",",","zc",")",";","}","vec3","zk","(","vec3","zf",",","vec3","zg",",","float","zh",")","{","vec3","zi",",","zj",";","zi","=","yk","(","zg",")",";","if","(","zi",".","y","!=","yc",")","{","zj","=","yk","(","zf",")",";","zj","=","yo","(","vec3","(","zi",".","x",",","zj",".","yz",")",")",";","return","mix","(","zf",",","zj",",","zh",")",";","}","return","zf",";","}","vec3","zq","(","vec3","zl",",","vec3","zm",",","float","zn",")","{","vec3","zo",",","zp",";","zo","=","yk","(","zl",")",";","if","(","zo",".","y","!=","yc",")","{","zp","=","yk","(","zm",")",";","return","yo","(","vec3","(","zo",".","x",",","mix","(","zo",".","y",",","zp",".","y",",","zn",")",",","zo",".","z",")",")",";","}","return","zl",";","}","vec3","zw","(","vec3","zr",",","vec3","zs",",","float","zt",")","{","vec3","zu",",","zv",";","zu","=","yk","(","zr",")",";","zv","=","yk","(","zs",")",";","return","yo","(","vec3","(","zu",".","xy",",","mix","(","zu",".","z",",","zv",".","z",",","zt",")",")",")",";","}","vec3","zC","(","vec3","zx",",","vec3","zy",",","float","zz",")","{","vec3","zA",",","zB",";","zA","=","yk","(","zy",")",";","if","(","zA",".","y","!=","yc",")","{","zB","=","yk","(","zx",")",";","zB","=","yo","(","vec3","(","zA",".","xy",",","zB",".","z",")",")",";","return","mix","(","zx",",","zB",",","zz",")",";","}","return","zx",";","}","vec3","zH","(","vec3","zD",",","vec3","zE",",","float","zF",")","{","vec3","zG",";","zG","=","yf","-","(","yf","-","zE",")","*","(","yf","-","zD",")",";","return","mix","(","zD",",","(","(","yf","-","zD",")","*","zE","*","zD",")","+","zD","*","zG",",","zF",")",";","}","vec3","zL","(","vec3","zI",",","vec3","zJ",",","float","zK",")","{","return","zI","+","zK","*","(","2.0","*","zJ","-","yd",")",";","}","float","zR","(","float","zM",",","float","zN",",","float","zO",",","float","zP",")","{","float","zQ",";","zQ","=","yd","-","zP",";","return","(","zQ","+","zO","*","zM",")","*","zN",";","}","float","zX","(","float","zS",",","float","zT",",","float","zU",",","float","zV",")","{","float","zW",";","zW","=","yd","-","zV",";","return","yd","-","(","zW","+","zU","*","(","yd","-","zS",")",")","*","(","yd","-","zT",")",";","}","float","Ac","(","float","zY",",","float","zZ",",","float","z_",",","float","Aa",")","{","float","Ab",";","Ab","=","yd","-","Aa",";","return","mix","(","zZ","*","(","Ab","+","2.0","*","z_","*","zY",")",",","yd","-","(","Ab","+","2.0","*","z_","*","(","yd","-","zY",")",")","*","(","yd","-","zZ",")",",","step","(","0.5",",","zZ",")",")",";","}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","Ao","(","in","sampler2D","Ai",",","in","vec2","Aj",",","in","vec2","Ak",")","{","float","Al",",","Am",",","An",";","Al","=","texture2D","(","Ai",",","Aj",")",".","r",";","Am","=","Ak",".","x",";","An","=","Ak",".","y",";","Am","=","2.0","*","Am","/","(","Am","+","An","-","(","2.0","*","Al","-","1.0",")","*","(","An","-","Am",")",")",";","return","Am",";","}"]}]}}