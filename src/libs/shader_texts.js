/**
 * Copyright (C) 2014-2016 Triumph LLC
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

b4w.module["shader_texts"] = function(exports, require) {exports["anchors.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["void","main","(",")","{","gl_FragColor","=","vec4","(","1.0",")",";","}"]}]},exports["anchors.glslv"] = {type:"group",parts:[{type:"var",name:"ANCHOR_NUM",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","float","a_index",";","uniform","vec3","u_position","[","ANCHOR_NUM","]",";","uniform","mat4","u_view_proj_matrix",";","void","main","(",")","{","gl_Position","=","u_view_proj_matrix","*","vec4","(","u_position","[","int","(","a_index",")","]",",","1.0",")",";","gl_PointSize","=","4.0",";","}"]}]},exports["color_id.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"std_enums.glsl"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","uniform","float","u_alpha_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_color_id",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_outline_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";","varying","vec4","bD",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";","varying","vec4","bJ",";","varying","vec4","bK",";","varying","vec4","bL",";","uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";","uniform","sampler2D","u_shadow_map1",";","uniform","sampler2D","u_shadow_map2",";","uniform","sampler2D","u_shadow_map3",";","uniform","sampler2D","u_shadow_mask",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","mat4","qN",";","float","qO",",","qP",";","vec4","qQ",";","vec3","qR",",","qS",",","qT",",","qU",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["qR","=","u_camera_eye_frag","-","bC",";","qR","=","normalize","(","qR",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["qN","=","O","(","u_view_tsr_frag",")",";","qM","(","qR",",","qN",",","qS",",","qT",",","qU",",","qQ",",","qO",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qM","(","qR",",","mat4","(","0.0",")",",","qS",",","qT",",","qU",",","qQ",",","qO",")",";"]}]}}]},{type:"textline",tokens:["qO","=","qO",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["qO","=","(","texture2D","(","u_sampler",",","bM",")",")",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["qP","=","u_alpha_factor","*","qO",";","qP","+=","(","1.0","-","step","(","0.0",",","qP",")",")",";","qO","=","mix","(","qP",",","1.0",",","u_diffuse_color",".","a",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qO","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","qO","<","0.5",")","discard",";","qO","=","1.0",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_outline_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";","varying","vec4","bD",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","tv",";","float","tw",",","tx",",","ty",";","vec3","tz",",","tA",",","tB",",","tC",",","tD",",","tE",";","mat4","tF",",","tG",",","tH",";","tF","=","O","(","u_view_tsr",")",";","tz","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["tA","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tB","=","vec3","(","a_tangent",")",";","tC","=","a_tangent","[","3","]","*","cross","(","tA",",","tB",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tB","=","vec3","(","0.0",")",";","tC","=","vec3","(","0.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tA","=","vec3","(","0.0",")",";","tB","=","vec3","(","0.0",")",";","tC","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["tz","=","mix","(","tz",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["tA","=","mix","(","tA",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tD","=","vec3","(","a_tangent",")",";","tE","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","tD",")",";","tB","=","mix","(","tB",",","tD",",","u_va_frame_factor",")",";","tC","=","mix","(","tC",",","tE",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sB","(","tz",",","tB",",","tC",",","tA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tC","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tC","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tG","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["tB","=","(","tG","*","vec4","(","tC",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tH","=","ru","(","u_camera_eye",",","tB",",","tF",",","tG",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tH","=","ro","(","u_camera_eye",",","tB",",","tF",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tH","=","tH","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","tB",")",";"]}]}}]},{type:"textline",tokens:["c","tI","=","rB","(","tz","-","tC",",","tC",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","tH",")",";","tI",".","b","=","tB",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","tI","=","rB","(","tz",",","tC",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","tG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tp","(","tI",".","a",",","tI",".","b",",","tA",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tA","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tA","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tp","(","tI",".","a",",","tI",".","b",",","tA",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rE","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bC","=","tI",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","tI",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tw","=","(","dot","(","cross","(","tI",".","e",",","tI",".","c",")",",","tI",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","tI",".","c",",","tw",")",";"]}]}}]},{type:"textline",tokens:["bD","=","tF","*","vec4","(","tI",".","a",",","1.0",")",";","tv","=","u_proj_matrix","*","bD",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["tv",".","xy","+=","u_subpixel_jitter","*","tv",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tw","=","tv",".","x",";","tx","=","tv",".","y",";","ty","=","tv",".","w",";","bG",".","x","=","(","tw","+","ty",")","/","2.0",";","bG",".","y","=","(","tx","+","ty",")","/","2.0",";","bG",".","z","=","ty",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","bD",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["tu","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","tF","*","vec4","(","tI",".","a",",","1.0",")",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","tv",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","tv",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","tv",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","tv",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","tv",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","tv",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","tv",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","tv",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","tv",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","tw",";","vec3","tx",";","mat4","ty",",","tz",",","tA",";","ty","=","O","(","u_view_tsr",")",";","tz","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["tx","=","(","tz","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","tA","=","ro","(","u_camera_eye",",","tx",",","ty",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tA","=","tA","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["c","tB","=","rB","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","tA",")",";","tB",".","b","=","tx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","tB","=","rB","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","tz",")",";"]}]}}]},{type:"textline",tokens:["tw","=","u_proj_matrix","*","ty","*","vec4","(","tB",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["tv","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tv","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["tv","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","tw",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","tw",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","varying","float","tx",";"]},{type:"include",file:"color_util.glslf"},{type:"include",file:"halo_color.glslf"},{type:"textline",tokens:["void","main","(",")","{","float","ui",";","vec3","uj",";","vec4","uk",";","uk","=","uh","(",")",";","uj","=","uk",".","rgb",";","ui","=","uk",".","a",";","bu","(","uj",")",";","bx","(","uj",",","ui",")",";","gl_FragColor","=","vec4","(","uj",",","ui",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","attribute","float","a_random_vals",";","uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","bM",";","varying","float","tx",";"]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","tw",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","ui",",","uj",";","vec3","uk",";","mat4","ul",",","um",",","un",";","ul","=","O","(","u_view_tsr",")",";","um","=","O","(","u_model_tsr",")",";","uk","=","(","um","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","bM","=","a_halo_bb_vertex","*","2.0",";","tx","=","a_random_vals",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["um","=","qT","(","uk",",","ul",")",";","un","=","ul",";","un","[","3","]","[","0","]","=","0.0",";","un","[","3","]","[","1","]","=","0.0",";","un","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["um","=","qT","(","uk",",","ul",")",";"]}]}}]},{type:"textline",tokens:["ui","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","ui","=","um","*","ui",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uj","=","u_proj_matrix","*","un","*","ui",";","uj",".","z","=","0.99999","*","uj",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tw","=","ui",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uj","=","u_proj_matrix","*","ul","*","ui",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","uj",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","float","ui",";","vec3","uj",";","uj","=","u_diffuse_color",".","xyz",";","ui","=","u_diffuse_color",".","a",";","bu","(","uj",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","uj",",","ui",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","uj",",","ui",")",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_direction",";","uniform","mat3","u_model_tsr",";","uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_line_width",";"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["void","main","(",")","{","mat2","ui",";","float","uj",";","vec2","uk",",","ul",";","vec4","um",";","mat4","un",",","uo",";","un","=","O","(","u_view_tsr",")",";","uo","=","O","(","u_model_tsr",")",";","c","up","=","rB","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","normalize","(","a_direction",")",",","uo",")",";","um","=","u_proj_matrix","*","un","*","vec4","(","up",".","a",",","1.0",")",";","um",".","xyz","/=","um",".","w",";","uk","=","(","u_proj_matrix","*","un","*","vec4","(","up",".","e",",","0.0",")",")",".","xy",";","uj","=","M_PI","/","2.0",";","ui","=","mat2","(","cos","(","uj",")",",","sin","(","uj",")",",","-","sin","(","uj",")",",","cos","(","uj",")",")",";","uk","=","ui","*","normalize","(","uk",")",";","ul","=","(","u_line_width","/","u_height",")","*","vec2","(","u_proj_matrix","[","0","]","[","0","]","/","u_proj_matrix","[","1","]","[","1","]",",","1.0",")",";","gl_Position","=","vec4","(","um",".","xy","+","uk",".","xy","*","ul","/","2.0",",","um",".","z",",","1.0",")",";","gl_Position","*=","um",".","w",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_VECTOR_VIEW",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION","REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"nodes.glslf"},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","uP",";","mat4","uQ",";","vec4","uR",";","vec3","uS",",","uT",",","uU",",","uV",",","uW",";","float","uX",",","uY",",","uZ",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["uX","=","length","(","bD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uY","=","bC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uS","=","u_sun_intensity",";"]}]}}]},{type:"textline",tokens:["uT","=","normalize","(","u_camera_eye_frag","-","bC",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uQ","=","O","(","u_view_tsr_frag",")",";","qM","(","uT",",","uQ",",","uU",",","uV",",","uW",",","uR",",","uZ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qM","(","uT",",","mat4","(","0.0",")",",","uU",",","uV",",","uW",",","uR",",","uZ",")",";"]}]}}]},{type:"textline",tokens:["uU","=","uU",";","uZ","=","uZ",";","uW","=","uW",";","uR","=","uR",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["uU","=","max","(","uU","-","sqrt","(","0.01","*","-","min","(","uY",",","0.0",")",")",",","0.5","*","uU",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["bp","(","uU",",","uY",",","u_time",",","uR",",","uW",",","u_sun_direction",",","uS",",","u_sun_quaternion",",","bC",",","uX",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","uZ","<","0.5",")","discard",";","uZ","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uZ","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uO","(","uU",",","length","(","bD",")",",","uT",",","uY",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uO","(","uU",",","length","(","bD",")",",","uT",",","1.0",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uP","=","texture2DProj","(","u_shadow_mask",",","bG",")",".","rg",";","uY","=","uP",".","g",";","uU","=","vec3","(","uY",")",";"]}]}}]},{type:"textline",tokens:["bu","(","uU",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","uU",",","uZ",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","uU",",","uZ",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"NUM_CAST_LAMPS",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat3","u_view_tsr",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"BILLBOARD","DYNAMIC_GRASS",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";"]},{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_v_light_tsr","[","NUM_CAST_LAMPS","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_v_light_ts","[","NUM_CAST_LAMPS","]",";","uniform","vec4","u_v_light_r","[","NUM_CAST_LAMPS","]",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uP",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uQ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","vI",",","vJ",";","float","vK",";","vec3","vL",",","vM",",","vN",",","vO",",","vP",",","vQ",",","vR",";","mat4","vS",",","vT",",","vU",",","vV",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["vS","=","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vT","=","O","(","u_view_tsr",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vS","=","O","(","u_view_tsr",")",";"]}]}}]},{type:"textline",tokens:["vU","=","O","(","u_model_tsr",")",";","vL","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"NODES",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vM","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vM","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vN","=","vec3","(","a_tangent",")",";","vO","=","a_tangent","[","3","]","*","cross","(","vM",",","vN",")",";"]}]}},{type:"elif",expression:["NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vP","=","(","vU","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vQ","=","normalize","(","(","vU","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","vP","=","vP","-","u_camera_eye",";","vO","=","cross","(","vP",",","vQ",")",";","vN","=","cross","(","vQ",",","vO",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vN","=","vec3","(","0.0",")",";","vO","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["vL","=","mix","(","vL",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["vM","=","mix","(","vM",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vQ","=","vec3","(","a_tangent",")",";","vP","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","vQ",")",";","vN","=","mix","(","vN",",","vQ",",","u_va_frame_factor",")",";","vO","=","mix","(","vO",",","vP",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sB","(","vL",",","vN",",","vO",",","vM",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vP","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vP","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","vW","=","vv","(","vL",",","vN",",","vO",",","vM",",","vP",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","vS",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vQ","=","(","vU","*","vec4","(","vP",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vV","=","ru","(","u_camera_eye",",","vQ",",","vS",",","vU",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vV","=","ro","(","u_camera_eye",",","vQ",",","vS",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vR","=","(","vU","*","vec4","(","vP",",","1.0",")",")",".","xyz",";","vV","=","vV","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vR",")",";"]}]}}]},{type:"textline",tokens:["c","vW","=","rB","(","vL","-","vP",",","vP",",","vN",",","vO",",","vM",",","vV",")",";","vW",".","b","=","vQ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","vW","=","rB","(","vL",",","vP",",","vN",",","vO",",","vM",",","vU",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vK","=","(","dot","(","cross","(","vW",".","e",",","vW",".","c",")",",","vW",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","vW",".","c",",","vK",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tp","(","vW",".","a",",","vW",".","b",",","vM",")",";"]}]}}]},{type:"textline",tokens:["bC","=","vW",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","vW",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uP","=","u_camera_eye","-","vW",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rE","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uQ","=","vW",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uQ","=","a_color",";"]}]}}]}]}}]},{type:"textline",tokens:["vI","=","vS","*","vec4","(","vW",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["vJ","=","vT","*","vec4","(","vW",".","a",",","1.0",")",";","bD","=","vJ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bD","=","vI",";"]}]}}]}]}}]},{type:"textline",tokens:["vJ","=","u_proj_matrix","*","vI",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["vJ",".","xy","+=","u_subpixel_jitter","*","vJ",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bG","=","L","(","vJ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vH","(","vW",".","a",",","vW",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","vI",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["tu","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vJ",";","}"]}]},exports["main_stack.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","ALPHA_AS_SPEC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";","varying","vec3","bE",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"textline",tokens:["varying","vec3","uP",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"lighting_nodes.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","xN",",","xO",",","xP",",","xQ",";","mat4","xR",";","mat3","xS",";","vec2","xT",",","xU",",","xV",",","xW",";","vec3","xX",",","xY",",","xZ",",","x_",",","ya",",","yb",",","yc",",","yd",",","ye",";","float","yf",",","yg",",","yh",",","yi",",","yj",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["yf","=","length","(","bD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["yg","=","bC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["xX","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xT","=","bM",";"]}]}}]},{type:"textline",tokens:["xY","=","normalize","(","bE",")",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["INVERT_FRONTFACING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")"]}]}}]},{type:"textline",tokens:["xY","=","xY",";","else","xY","=","-","xY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["xZ","=","cross","(","xY",",","bF",".","xyz",")","*","bF",".","w",";","xS","=","mat3","(","bF",".","xyz",",","xZ",",","xY",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFRACTIVE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xR","=","O","(","u_view_tsr_frag",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xU","=","normalize","(","xR","*","vec4","(","bE",",","0.0",")",")",".","st",";","xU","=","xU","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","yf","<","PARALLAX_LOD_DIST",")","{","yh","=","clamp","(","0.5","*","(","PARALLAX_LOD_DIST","-","yf",")",",","0.0",",","1.0",")",";","yh","=","u_parallax_scale","*","yh",";","xZ","=","normalize","(","uP","*","xS",")",";","yi","=","1.0","/","PARALLAX_STEPS",";","xV","=","xZ",".","xy","*","yh","/","(","PARALLAX_STEPS","*","xZ",".","z",")",";","yh","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xW","=","xU",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xW","=","xT",";"]}]}}]},{type:"textline",tokens:["yj","=","texture2D","(","u_normalmap0",",","xW",")",".","a",";","for","(","float","yk","=","1.0",";","yk","<=","PARALLAX_STEPS",";","yk","++",")","{","if","(","yj","<","yh",")","{","yh","-=","yi",";","xW","-=","xV",";","yj","=","texture2D","(","u_normalmap0",",","xW",")",".","a",";","}","}","xV","=","xW","+","xV",";","yi","=","texture2D","(","u_normalmap0",",","xV",")",".","a","-","(","yh","+","yi",")",";","yh","=","yj","-","yh",";","yi","=","yh","/","(","yh","-","yi",")",";","xW","=","yi","*","xV","+","(","1.0","-","yi",")","*","xW",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xT","+=","xW","-","xU",";"]}]}}]},{type:"textline",tokens:["xU","=","xW",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xU","+=","xW","-","xT",";"]}]}}]},{type:"textline",tokens:["xT","=","xW",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xN","=","texture2D","(","u_normalmap0",",","xU",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xN","=","texture2D","(","u_normalmap0",",","xT",")",";"]}]}}]},{type:"textline",tokens:["xZ","=","xN",".","rgb","-","0.5",";","xZ","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","xZ",",","u_normal_factor",")",";","xZ","=","xS","*","xZ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xZ","=","xY",";"]}]}}]},{type:"textline",tokens:["xZ","=","normalize","(","xZ",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xU","=","normalize","(","xR","*","vec4","(","xZ",",","0.0",")",")",".","st",";","xU","=","xU","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"textline",tokens:["xY","=","normalize","(","uP",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["x_","=","uQ",";","br","(","x_",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xN","=","vec4","(","x_",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xN","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["yi","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xO","=","texture2D","(","u_colormap0",",","xU",")",";"]}]}},{type:"elif",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xO","=","texture2D","(","u_colormap0",",","xT",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["br","(","xO",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR1_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xP","=","texture2D","(","u_colormap1",",","xU",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xP","=","texture2D","(","u_colormap1",",","xT",")",";"]}]}}]},{type:"textline",tokens:["br","(","xP",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xQ","=","texture2D","(","u_stencil0",",","xU",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xQ","=","texture2D","(","u_stencil0",",","xT",")",";"]}]}}]},{type:"textline",tokens:["xO","=","mix","(","xO",",","xP",",","xQ",".","r",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xN",".","rgb","=","mix","(","xN",".","rgb",",","xO",".","rgb",",","u_diffuse_color_factor",")",";","yh","=","u_alpha_factor","*","xO",".","a",";","yh","+=","(","1.0","-","step","(","0.0",",","yh",")",")",";","xN",".","a","=","mix","(","yh",",","1.0",",","u_diffuse_color",".","a",")",";","yi","=","xO",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xN",".","rgb","*=","mix","(","vec3","(","1.0",")",",","xO",".","rgb",",","u_diffuse_color_factor",")",";","xN",".","a","=","xO",".","a",";","yi","=","xO",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["x_","=","u_diffuse_intensity","*","xN",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["ya","=","x_",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yb","=","u_environment_energy","*","dS","(","xZ",")",";","yb","=","u_ambient","*","yb",";","xO","=","du","(","x_",")",";","yc","=","u_emit","*","xN",".","rgb",";","yd","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["ye","=","vec3","(","yi",")",";"]}]}},{type:"elif",expression:["TEXTURE_SPEC_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ye","=","texture2D","(","u_specmap0",",","xU",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ye","=","texture2D","(","u_specmap0",",","xT",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["br","(","ye",".","rgb",")",";","yd","=","mix","(","yd",",","ye",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["yi","=","u_specular_params","[","0","]",";","xT","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","yd","=","yi","*","yd",";","xM","(","yc",",","yb",",","x_",",","yd",",","bC",",","xZ",",","xY",",","xT",",","u_diffuse_params",",","xO",",","0.0",",","vec4","(","0.0",")",",","ya",",","ye",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["dP","(","ya",",","xY",",","xZ",",","u_reflect_factor",",","xR",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dP","(","ya",",","xY",",","xZ",",","u_reflect_factor",",","mat4","(","0.0",")",")",";"]}]}}]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["dP","(","ya",",","xY",",","xZ",",","0.0",",","xR",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dP","(","ya",",","xY",",","xZ",",","0.0",",","mat4","(","0.0",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["ya","+=","ye",";"]}]}}]},{type:"textline",tokens:["yi","=","xN",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["ya","=","max","(","ya","-","sqrt","(","0.01","*","-","min","(","yg",",","0.0",")",")",",","0.5","*","ya",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["bp","(","ya",",","yg",",","u_time",",","xO",",","xZ",",","u_sun_direction",",","xX",",","u_sun_quaternion",",","bC",",","yf",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","yi","<","0.5",")","discard",";","yi","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["yh","=","max","(","max","(","ye",".","r",",","ye",".","g",")",",","ye",".","b",")","*","u_specular_alpha",";","yi","=","xN",".","a","*","(","1.0","-","yh",")","+","yh",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yi","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["xT","=","-","(","xR","*","vec4","(","xZ",",","0.0",")",")",".","xy",";","ya","=","mix","(","ef","(","bG",",","xT","*","u_refr_bump",")",",","ya",",","yi",")",";","yi","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uO","(","ya",",","yf",",","xY",",","yg",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uO","(","ya",",","yf",",","xY",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["bu","(","ya",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","ya",",","yi",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","ya",",","yi",")",";","}"]}]},exports["particle_system.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","NODES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","float","u_time",";","uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_VECTOR_VIEW",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"NODES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bE",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"include",file:"environment.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"particles_nodes.glslf"},{type:"textline",tokens:["void","main","(",")","{","mat4","Ki",";","float","Kj",",","Kk",",","Kl",";","vec4","Km",";","vec3","Kn",",","Ko",",","Kp",",","Kq",";","Kn","=","normalize","(","u_camera_eye_frag","-","bC",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ki","=","O","(","u_view_tsr_frag",")",";","Kh","(","Kn",",","Ki",",","Ko",",","Kp",",","Kq",",","Km",",","Kj",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Kh","(","Kn",",","mat4","(","0.0",")",",","Ko",",","Kp",",","Kq",",","Km",",","Kj",")",";"]}]}}]},{type:"textline",tokens:["Ko","=","Ko",";","Kj","=","Kj",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","Kj","<","0.5",")","discard",";","Kj","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Kj","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uO","(","Ko",",","length","(","bD",")",",","Kn",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["Kk","=","-","bD",".","z","/","u_view_max_depth",";","Km","=","texture2DProj","(","u_scene_depth",",","bG",")",";","Kl","=","Z","(","Km",")",";","Kk","=","Kl","-","Kk",";","Kk","=","u_view_max_depth","/","SOFT_STRENGTH","*","Kk",";","Kj","=","Kj","*","min","(","Kk",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["bu","(","Ko",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","Ko",",","Kj",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ko",",","Kj",")",";","}"]}]},exports["particle_system.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","vec3","a_p_data",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"textline",tokens:["attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","float","u_p_wind_fac",";","uniform","float","u_p_max_lifetime",";","uniform","float","u_p_tilt",";","uniform","float","u_p_tilt_rand",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","vec3","u_wind",";","uniform","float","u_p_size",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE",{type:"logic_negative_expr",places:1},"NODES","HALO_PARTICLES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_COLOR_RAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_ramp_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","Ki",";"]}]}}]},{type:"textline",tokens:["varying","vec3","uQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:8}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uP",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"NODES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","tx",";"]}]}}]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"particles.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"particles_nodes.glslv"}]}}]},{type:"textline",tokens:["float","KW","(","vec2","KU",",","vec2","KV",")","{","return","(","atan","(","KV",".","y",",","KV",".","x",")","-","atan","(","KU",".","y",",","KU",".","x",")",")",";","}","void","main","(",")","{","vec3","KX",",","KY",";","vec4","KZ",",","K_",",","La",";","float","Lb",",","Lc",",","Ld",";","mat4","Le",",","Lf",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["Le","=","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Le","=","O","(","u_view_tsr",")",";"]}]}}]},{type:"textline",tokens:["Kj","Lg",";","Lg","=","KL","(",")",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","Lb","=","Lg",".","e",";","Lf","=","qT","(","Lg",".","b",",","Le",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","Lb","=","Lg",".","e",";","Lf","=","w","(",")",";","Lf","[","3","]","=","vec4","(","Lg",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","Lb","=","Lg",".","e",";","Lf","=","A","(","radians","(","90.0",")",")",";","Lf","[","3","]","=","vec4","(","Lg",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","Lb","=","KW","(","vec2","(","EPSILON",",","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","Lg",".","e",";","Lf","=","y","(","radians","(","-","90.0",")",")",";","Lf","[","3","]","=","vec4","(","Lg",".","b",",","1.0",")",";","}","KZ","=","vec4","(","a_p_bb_vertex","*","2.0","*","Lg",".","a","*","u_p_size",",","0.0",",","1.0",")",";","Lc","=","a_p_data","[","2","]",";","Ld","=","u_p_tilt","*","u_p_tilt_rand","*","(","2.0","*","Lc","-","1.0",")",";","Ld","=","(","Ld","+","u_p_tilt",")","*","M_PI",";","KZ","=","Lf","*","C","(","Ld","+","Lb",")","*","KZ",";","K_","=","Le","*","KZ",";","La","=","u_proj_matrix","*","K_",";"]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["tx","=","Lc",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KX","=","vec3","(","a_tangent",")",";","KY","=","a_tangent","[","3","]","*","cross","(","a_normal",",","KX",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KX","=","vec3","(","0.0",")",";","KY","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["c","Lh","=","rB","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","KX",",","KY",",","vec3","(","0.0",")",",","Lf","*","C","(","Lb",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lb","=","(","dot","(","cross","(","a_normal",",","Lh",".","c",")",",","Lh",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","Lh",".","c",",","Lb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","a_normal",";"]}]}}]},{type:"textline",tokens:["KT","(","Lg",".","b",",","Lg",".","f",",","Lg",".","g",",","Lg",".","h",",","Lg",".","a",",","a_p_bb_vertex",",","a_p_data","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_p_bb_vertex","+","0.5",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_p_bb_vertex","*","2.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ki","=","Lg",".","c",";"]}]}}]},{type:"textline",tokens:["uQ","=","Lg",".","d",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["Lb","=","La",".","x",";","Lc","=","La",".","y",";","Ld","=","La",".","w",";","bG",".","x","=","(","Lb","+","Ld",")","/","2.0",";","bG",".","y","=","(","Lc","+","Ld",")","/","2.0",";","bG",".","z","=","Ld",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"NODES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","K_",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","La",";","bC","=","KZ",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uP","=","u_camera_eye","-","KZ",".","xyz",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["particle_system_stack.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","NODES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_size",";","uniform","vec3","u_halo_rings_color",";","uniform","float","u_halo_hardness",";","uniform","vec3","u_halo_lines_color",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:8}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","Ki",";"]}]}}]},{type:"textline",tokens:["varying","vec3","uQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uP",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"NODES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","tx",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","tw",";"]}]}}]}]}}]},{type:"include",file:"lighting_nodes.glslf"},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"environment.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"include",file:"halo_color.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","KU",";","float","KV",",","KW",",","KX",";","vec4","KY",",","KZ",";","vec3","K_",",","La",",","Lb",",","Lc",",","Ld",",","Le",",","Lf",",","Lg",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["K_","=","normalize","(","uP",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["KY","=","uh","(",")",";","La","=","KY",".","rgb","*","uQ",";","KV","=","0.9","*","length","(","bM",")",";","KV","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","KV",")",";","KV","=","KY",".","a","*","(","1.0","-","KV",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KY","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["KZ","=","texture2D","(","u_sampler",",","bM",")",";","br","(","KZ",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KY",".","rgb","=","mix","(","KY",".","rgb",",","KZ",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KY",".","rgb","*=","mix","(","vec3","(","1.0",")",",","KZ",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["KY",".","a","=","KZ",".","a",";"]}]}}]},{type:"textline",tokens:["KY",".","rgb","*=","uQ",";","Lb","=","u_diffuse_intensity","*","KY",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Lc","=","u_emit","*","KY",".","rgb",";","Ld","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logic_negative_expr",places:1},"SKY_COLOR",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["Le","=","u_environment_energy","*","dS","(","vec3","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Le","=","u_environment_energy","*","dS","(","Ld",")",";"]}]}}]},{type:"textline",tokens:["Le","=","u_ambient","*","Le",";","KW","=","u_specular_params","[","0","]",";","KU","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","Lf","=","KW","*","u_specular_color",";","xM","(","Lc",",","Le",",","Lb",",","Lf",",","bC",",","Ld",",","K_",",","KU",",","u_diffuse_params",",","vec4","(","1.0",")",",","0.0",",","vec4","(","0.0",")",",","La",",","Lg",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["La","=","Lb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uO","(","La",",","length","(","bD",")",",","K_",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["KV","=","KY",".","a","*","Ki",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uO","(","La",",","length","(","bD",")",",","K_",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["KW","=","-","bD",".","z","/","u_view_max_depth",";","KY","=","texture2DProj","(","u_scene_depth",",","bG",")",";","KX","=","Z","(","KY",")",";","KW","=","KX","-","KW",";","KW","=","u_view_max_depth","/","SOFT_STRENGTH","*","KW",";","KV","=","KV","*","min","(","KW",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["bu","(","La",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","La",",","KV",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","La",",","KV",")",";","}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","KU",";","const","float","KV","=","0.99",";","const","float","KW","=","1.8",";","const","int","KX","=","8",";","float","Lc","(","vec3","KY",",","vec3","KZ",")","{","float","K_",",","La",",","Lb",";","K_","=","dot","(","KZ",",","KZ",")",";","La","=","2.0","*","dot","(","KZ",",","KY",")",";","Lb","=","dot","(","KY",",","KY",")","-","1.0",";","K_","=","La","*","La","-","4.0","*","K_","*","Lb",";","K_","=","sqrt","(","K_",")",";","K_","=","(","-","La","-","K_",")","/","2.0",";","K_","=","Lb","/","K_",";","return","K_",";","}","float","Lj","(","float","Ld",",","float","Le",")","{","float","Lf",",","Lg",",","Lh",",","Li",";","Lf","=","3.0","*","(","1.0","-","Le","*","Le",")",";","Lg","=","2.0","*","(","2.0","+","Le","*","Le",")",";","Lh","=","1.0","+","Ld","*","Ld",";","Li","=","pow","(","1.0","+","Le","*","Le","-","2.0","*","Le","*","Ld",",","1.5",")",";","Li","=","max","(","Li",",","0.00001",")",";","return","(","Lf","/","Lg",")","*","(","Lh","/","Li",")",";","}","float","Lp","(","vec3","Lk",",","vec3","Ll",",","float","Lm",")","{","vec3","Ln",";","float","Lo",";","Lo","=","dot","(","Ll",",","-","Lk",")",";","if","(","Lo","<","0.0",")","{","return","1.0",";","}","Ln","=","Lk","+","Lo","*","Ll",";","if","(","length","(","Ln",")","<","Lm",")","{","return","0.0",";","}","else","if","(","length","(","Ln",")",">=","Lm",")","{","Ln","=","normalize","(","Ln",")","*","Lm","-","Lk",";","Lo","=","acos","(","dot","(","normalize","(","Ln",")",",","Ll",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","Lo","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","Lt","(","float","Lq",",","vec3","Lr",",","float","Ls",")","{","return","Lr","-","Lr","*","pow","(","u_sky_color",",","vec3","(","Ls","/","Lq",")",")",";","}","void","main","(",")","{","float","Lu",",","Lv",",","Lw",",","Lx",",","Ly",",","Lz",",","LA",",","LB",",","LC",";","vec3","LD",",","LE",",","LF",",","LG",",","LH",",","LI",",","LJ",";","LD","=","normalize","(","KU",")",";","LE","=","u_sun_direction",";","Lu","=","dot","(","LD",",","LE",")",";","Lv","=","Lj","(","Lu",",","-","0.01",")","*","u_rayleigh_brightness","*","LE",".","y",";","Lw","=","Lj","(","Lu","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","LE",".","y",")",";","Lu","=","smoothstep","(","0.0",",","100.0",",","Lj","(","Lu",",","0.9995",")",")","*","u_spot_brightness",";","LF","=","vec3","(","0.0",",","KV",",","0.0",")",";","Lx","=","Lc","(","LF",",","LD",")",";","Ly","=","Lx","/","float","(","KX",")",";","Lz","=","Lp","(","LF",",","LD",",","KV","-","0.3",")",";","LG","=","vec3","(","0.0",",","0.0",",","0.0",")",";","LH","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","LK","=","0",";","LK","<","KX",";","LK","++",")","{","LA","=","Ly","*","float","(","LK",")",";","LI","=","LF","+","LD","*","LA",";","LB","=","Lp","(","LI",",","LE",",","KV","-","0.2",")",";","LC","=","Lc","(","LI",",","LE",")",";","LJ","=","Lt","(","LC",",","vec3","(","KW",")",",","u_scatter_strength",")","*","LB",";","LG","+=","Lt","(","sqrt","(","LA",")",",","u_sky_color","*","LJ",",","u_rayleigh_strength",")",";","LH","+=","Lt","(","LA",",","LJ",",","u_mie_strength",")",";","}","LG","=","LG","*","Lz","*","pow","(","Lx",",","u_rayleigh_collection_power",")","/","float","(","KX",")",";","LH","=","(","LH","*","Lz","*","pow","(","Lx",",","u_mie_collection_power",")",")","/","float","(","KX",")",";","LG","=","vec3","(","Lu","*","LH","+","Lw","*","LH","+","Lv","*","LG",")",";","bu","(","LG",")",";","gl_FragColor","=","vec4","(","LG",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","KU",";","void","main","(",")","{","vec4","KV",",","KW",";","KV","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","KW","=","u_cube_view_matrix","*","KV",";","KU","=","KW",".","xyz",";","gl_Position","=","KV",";","}"]}]},exports["shadow.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","mat4","KV",";","float","KW",",","KX",";","vec4","KY",";","vec3","KZ",",","K_",",","La",",","Lb",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["KZ","=","u_camera_eye_frag","-","bC",";","KZ","=","normalize","(","KZ",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KV","=","O","(","u_view_tsr_frag",")",";","qM","(","KZ",",","KV",",","K_",",","La",",","Lb",",","KY",",","KW",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qM","(","KZ",",","mat4","(","0.0",")",",","K_",",","La",",","Lb",",","KY",",","KW",")",";"]}]}}]},{type:"textline",tokens:["KW","=","KW",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["KW","=","(","texture2D","(","u_colormap0",",","bM",")",")",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KX","=","u_alpha_factor","*","KW",";","KX","+=","(","1.0","-","step","(","0.0",",","KX",")",")",";","KW","=","mix","(","KX",",","1.0",",","u_diffuse_color",".","a",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KW","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","KW","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","NO_SHADOWS",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","dr","(","bD",".","z",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor",".","a","*=","clamp","(","bF",".","r",",","0.999999999",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["shadow.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"NUM_CAST_LAMPS",tokens:["0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_shadow_cast_billboard_view_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";"]},{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_v_light_tsr","[","NUM_CAST_LAMPS","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_v_light_ts","[","NUM_CAST_LAMPS","]",";","uniform","vec4","u_v_light_r","[","NUM_CAST_LAMPS","]",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","KV",";","vec4","KW",",","KX",";","float","KY",";","vec3","KZ",",","K_",",","La",",","Lb",",","Lc",",","Ld",";","mat4","Le",",","Lf",",","Lg",",","Lh",";","Le","=","O","(","u_view_tsr",")",";","KZ","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["K_","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["K_","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["La","=","vec3","(","a_tangent",")",";","Lb","=","a_tangent","[","3","]","*","cross","(","K_",",","La",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["La","=","vec3","(","0.0",")",";","Lb","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["KZ","=","mix","(","KZ",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["K_","=","mix","(","K_",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["Lc","=","vec3","(","a_tangent",")",";","Ld","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","Lc",")",";","La","=","mix","(","La",",","Lc",",","u_va_frame_factor",")",";","Lb","=","mix","(","Lb",",","Ld",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sB","(","KZ",",","La",",","Lb",",","K_",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["Lb","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lb","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","Li","=","vv","(","KZ",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","K_",",","Lb",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","Le",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lf","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["La","=","(","Lf","*","vec4","(","Lb",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD",{type:"logic_negative_expr",places:1},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lg","=","O","(","u_shadow_cast_billboard_view_tsr",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lg","=","Le",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lh","=","ru","(","u_camera_eye",",","La",",","Lg",",","Lf",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lh","=","ro","(","u_camera_eye",",","La",",","Lg",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lh","=","Lh","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","La",")",";"]}]}}]},{type:"textline",tokens:["c","Li","=","rB","(","KZ","-","Lb",",","Lb",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","K_",",","Lh",")",";","Li",".","b","=","La",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","Li","=","rB","(","KZ",",","Lb",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","K_",",","Lf",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["K_","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["K_","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tp","(","Li",".","a",",","Li",".","b",",","K_",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bC","=","Li",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","Li",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["KY","=","(","dot","(","cross","(","Li",".","e",",","Li",".","c",")",",","Li",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","Li",".","c",",","KY",")",";"]}]}}]}]}}]},{type:"textline",tokens:["KW","=","Le","*","vec4","(","Li",".","a",",","1.0",")",";","KX","=","u_proj_matrix","*","KW",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["KX",".","xy","+=","u_subpixel_jitter","*","KX",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bG","=","L","(","KX",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","bD",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["tu","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rE","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vH","(","Li",".","a",",","Li",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","KW",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KV","=","(","u_proj_matrix","*","Le","[","3","]",")",".","xy",";","KY","=","SHADOW_TEX_RES","/","2.0",";","KV","=","floor","(","KV","*","KY","+","0.5",")","/","KY","-","KV",";","KX",".","xy","+=","KV",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","KX",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","bM",";","void","main","(",")","{","vec4","KV",";","KV","=","texture2D","(","u_sampler",",","bM",")",";","bu","(","KV",".","rgb",")",";","bx","(","KV",".","rgb",",","KV",".","a",")",";","gl_FragColor","=","KV",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","bM",";","void","main","(",")","{","vec2","KV",";","float","KW",";","vec4","KX",";","vec3","KY",";","mat4","KZ",";","KZ","=","O","(","u_view_tsr",")",";","bM","=","a_texcoord",";","KY","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","KX","=","u_proj_matrix","*","KZ","*","vec4","(","KY",",","0.0",")",";","KX",".","x","/=","KX",".","w",";","KX",".","y","/=","KX",".","w",";","KX","+=","99999.0","*","step","(","KX",".","z",",","0.0",")",";","KX","+=","100.0","*","(","step","(","1.0",",","abs","(","KX",".","x",")",")","+","step","(","1.0",",","abs","(","KX",".","y",")",")",")",";","KX",".","x","=","-","a_lf_dist","*","KX",".","x",";","KX",".","y","=","-","a_lf_dist","*","KX",".","y",";","KW","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","KV","=","vec2","(","a_lf_bb_vertex",".","x","/","KW",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","K_","=","1.9",";","KV","*=","(","1.0","+","K_","*","length","(","KX",".","xy",")",")",";","}","gl_Position","=","vec4","(","KX",".","xy","+","KV",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"define",name:"INV_PI",tokens:["0.318309886"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX","PROCEDURAL_SKYDOME",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"blending.glslf"},{type:"textline",tokens:["uniform","vec4","u_sky_tex_fac",";","uniform","vec3","u_sky_tex_color",";","uniform","float","u_sky_tex_dvar",";","vec3","MZ","(","vec3","MU",",","vec3","MV",",","float","MW",",","float","MX",")","{","float","MY",";","MY","=","MW","*","MX",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Li","(","MV",",","MU",",","MY",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lm","(","MU",",","MV",",","MY",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lq","(","MU",",","MV",",","MY",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lv","(","MU",",","MV",",","MY",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LA","(","MU",",","MV",",","MY",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LF","(","MU",",","MV",",","MY",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LJ","(","MU",",","MV",",","MY",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LN","(","MU",",","MV",",","MY",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LR","(","MU",",","MV",",","MY",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LV","(","MU",",","MV",",","MY",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","HUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Ma","(","MV",",","MU",",","MY",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SATURATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Mg","(","MV",",","MU",",","MY",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","VALUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Mm","(","MV",",","MU",",","MY",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","COLOR",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Ms","(","MV",",","MU",",","MY",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Mx","(","MV",",","MU",",","MY",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MB","(","MV",",","MU",",","MY",")",";"]}]}}]},{type:"textline",tokens:["return","vec3","(","1.0",",","0.0",",","1.0",")",";","}","float","Ng","(","float","M_",",","float","Na",",","float","Nb",",","float","Nc",")","{","float","Nd",";","vec3","Ne",",","Nf",";","Ne","=","vec3","(","M_",")",",","Nf","=","vec3","(","Na",")",";","Nd","=","Nb","*","Nc",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Li","(","Nf",",","Ne",",","Nd",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lm","(","Ne",",","Nf",",","Nd",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lq","(","Ne",",","Nf",",","Nd",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MH","(","M_",",","Na",",","Nd",",","Nc",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MN","(","M_",",","Na",",","Nd",",","Nc",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MT","(","M_",",","Na",",","Nd",",","Nc",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LJ","(","Ne",",","Nf",",","Nd",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LN","(","Ne",",","Nf",",","Nd",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LR","(","Ne",",","Nf",",","Nd",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LV","(","Ne",",","Nf",",","Nd",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Mx","(","Nf",",","Ne",",","Nd",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MB","(","Nf",",","Ne",",","Nd",")",".","x",";"]}]}}]},{type:"textline",tokens:["return","0.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","KU",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Nh",";","float","Ni",",","Nj",",","Nk",";","vec3","Nl",",","Nm",",","Nn",",","No",",","Np",";","Nm","=","normalize","(","KU",")",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME"],group:{type:"group",parts:[{type:"textline",tokens:["Nl","=","textureCube","(","u_sky",",","Nm",")",".","rgb",";"]}]}},{type:"elif",expression:["WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Nl","=","u_horizon_color",";","bu","(","Nl",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"textline",tokens:["Nn","=","vec3","(","bM",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nn","=","vec3","(","KU",".","xy",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["Ni","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["Ni","=","abs","(","bM",".","y",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ni","=","(","bM",".","y","+","1.0",")","*","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nj","=","acos","(","Nm",".","y",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["Ni","=","abs","(","Nj","*","INV_PI","-","0.5",")","*","2.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ni","=","1.0","-","Nj","*","INV_PI",";"]}]}}]}]}}]}]}}]},{type:"textline",tokens:["No","=","u_horizon_color",";","Np","=","u_zenith_color",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX"],group:{type:"group",parts:[{type:"textline",tokens:["Nj","=","1.0",";","Nh","=","textureCube","(","u_sky",",","Nm",")",";","br","(","Nh",".","rgb",")",";","Nj","=","Nh",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["Nj","=","bB","(","Nh",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MTEX_NEGATIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Nh","=","vec4","(","vec3","(","1.0",")","-","Nh",".","rgb",",","Nh",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nj","=","1.0","-","Nj",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ","WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["Nh","=","vec4","(","u_sky_tex_color",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nj","=","Nh",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ"],group:{type:"group",parts:[{type:"textline",tokens:["No","=","MZ","(","Nh",".","rgb",",","No",",","Nj",",","u_sky_tex_fac","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nk","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","Nn",",","vec3","(","0.0",",","1.0",",","0.0",")",")",">=","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["Nk","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["else","Nk","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["Nk","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"elif",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["Nk","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","Nk","!=","0.0",")","Np","=","MZ","(","Nh",".","rgb",",","Np",",","Nj",",","Nk",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_BLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Nj","=","dot","(","Nh",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";"]}]}}]},{type:"textline",tokens:["Ni","=","Ng","(","u_sky_tex_dvar",",","Ni",",","Nj",",","u_sky_tex_fac","[","0","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["Nl","=","mix","(","No",",","Np",",","Ni",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nl","=","No",";"]}]}}]},{type:"textline",tokens:["bu","(","Nl",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bu","(","No",")",";","bu","(","Np",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["Nl","=","mix","(","No",",","Np",",","Ni",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nl","=","No",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["br","(","Nl",")",";","Ni","=","WATER_LEVEL","-","u_camera_eye_frag",".","y",";","No","=","vec3","(","0.0",")",";","No","=","mix","(","u_underwater_fog_color_density",".","rgb",",","No",",","min","(","-","Nm",".","y",",","1.0",")",")",";","No","*=","min","(","1.0","-","min","(","0.03","*","Ni",",","0.8",")",",","1.0",")",";","Ni","=","clamp","(","sign","(","0.01","*","Ni","-","Nm",".","y",")",",","0.0",",","1.0",")",";","Nl","=","mix","(","Nl",",","No",",","Ni",")",";","bu","(","Nl",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Nl",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","KU",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","MU",",","MV",";","MU","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","MV","=","u_sky_vp_inverse","*","MU",";","KU","=","MV",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_position",".","xy",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","MU",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0005"]},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHORE_SMOOTHING","WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_norm_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","MU","=","1.0",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","uP",";","varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bF",";","varying","vec3","MV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","MW",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","MX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","MY",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","SHORE_SMOOTHING","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["vec3","Nj","(","in","vec2","MZ",",","in","vec3","M_",",","in","vec3","Na",",","in","vec3","Nb",",","out","float","Nc",")","{","float","Nd",",","Ne",",","Nf",";","vec2","Ng",";","vec3","Nh",",","Ni",";","Nc","=","0.0",";","Nh","=","reflect","(","-","Na",",","M_",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ng","=","MZ",".","xy","+","M_",".","xz","*","REFL_BUMP","/","bH",";","Nc","=","u_reflect_factor",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ni","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ni","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["}","else","{","Ni","=","texture2D","(","u_plane_reflection",",","Ng",")",".","rgb",";","br","(","Ni",")",";","}"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nc","=","u_mirror_factor",";","Ni","=","Nb","*","textureCube","(","u_mirrormap",",","Nh",")",".","rgb",";","br","(","Ni",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nc","=","u_reflect_factor",";","Ni","=","Nb","*","vec3","(","0.3",",","0.5",",","1.0",")",";","br","(","Ni",")",";"]}]}}]},{type:"textline",tokens:["Nh","=","normalize","(","Nh","+","Na",")",";","Nd","=","1.0","-","dot","(","Na",",","Nh",")",";","Ne","=","u_fresnel_params","[","3","]",";","Nf","=","u_fresnel_params","[","2","]",";","Nf","=","Ne","+","(","1.0","-","Ne",")","*","pow","(","Nd",",","Nf",")",";","Nc","=","min","(","Nc","*","Nf",",","1.0",")",";","return","Ni",";","}"]},{type:"include",file:"lighting_nodes.glslf"},{type:"textline",tokens:["void","main","(",")","{","vec4","Nk",";","vec2","Nl",",","Nm",",","Nn",";","float","No",",","Np",",","Nq",",","Nr",",","Ns",";","vec3","Nt",",","Nu",",","Nv",",","Nw",",","Nx",",","Ny",",","Nz",",","NA",",","NB",";","mat3","NC",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["NC","=","mat3","(","bF",",","MV",",","bE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Nt","=","normalize","(","bE",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nt","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","FOAM",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["No","=","bC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Nl","=","vec2","(","MW",".","x",",","-","MW",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nl","=","vec2","(","bC",".","x",",","-","bC",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nl","=","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nu","=","vec3","(","0.0",")",";","Nv","=","texture2D","(","u_normalmap0",",","Nl","*","u_normalmap0_scale","+","vec2","(","0.3",",","0.5",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Nu","+=","Nv",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["Nw","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["Nw","+=","Nv",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nv","=","texture2D","(","u_normalmap0",",","Nl","*","u_normalmap1_scale","+","vec2","(","-","0.3",",","0.7",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Nu","+=","Nv",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["Nw","+=","Nv",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nv","=","texture2D","(","u_normalmap0",",","Nl","*","u_normalmap2_scale","+","vec2","(","0.0",",","1.1",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Nu","+=","Nv",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["Nw","+=","Nv",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nv","=","texture2D","(","u_normalmap0",",","Nl","*","u_normalmap3_scale","+","vec2","(","-","0.66",",","-","0.3",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Nu","+=","Nv",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["Nw","+=","Nv",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["Nw","=","NC","*","Nw",";","if","(","!","f","(","Nw",",","vec3","(","0.0",")",")",")","Nw","=","normalize","(","Nw",")",";","Nw","=","mix","(","Nt",",","Nw",",","0.2",")",";","Nw","=","normalize","(","Nw",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Nt","=","mix","(","Nt",",","normalize","(","NC","*","Nu",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nt","=","mix","(","Nt",",","normalize","(","NC","*","Nu",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["Nt","=","normalize","(","Nt",")",";"]}]}}]},{type:"textline",tokens:["Nu","=","normalize","(","uP",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nm","=","bG",".","xy","/","bG",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Nn","=","Nm","+","Nt",".","xz","*","u_refr_bump","/","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["Np","=","u_diffuse_color",".","a",";","Nk","=","texture2DProj","(","u_scene_depth",",","bG",")",";","Nq","=","Z","(","Nk",")",";","Nr","=","max","(","Nq","-","bH",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Nq","=","dY","(","Nq",",","Nn",",","Nm",")",";","Nq","=","max","(","Nq","-","bH",",","0.0",")",";","Nq","=","u_view_max_depth","/","ABSORB","*","Nq",";","Nq","=","min","(","Np","*","Nq",",","1.0",")",";","Np","=","min","(","15.0","*","Np","*","u_view_max_depth","*","Nr",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ns","=","u_view_max_depth","/","ABSORB","*","Nr",";","if","(","u_cam_water_depth",">","0.0",")","Np","=","min","(","Np","*","Ns",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Np","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Nq","=","Np",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","Nq","=","0.0",";","Nv","=","texture2D","(","u_refractmap",",","Nn",")",".","rgb",";","br","(","Nv",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Ns","=","pow","(","min","(","MX",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","Nx","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","Ns",")",";","Ns","=","pow","(","min","(","MX",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","Nx","=","mix","(","u_shore_water_col",",","Nx",",","Ns",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nx","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["Nr","=","max","(","1.0","-","u_view_max_depth","*","Nr",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nr","=","1.0","-","Np",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["No","=","max","(","No","/","WAVES_HEIGHT","+","0.1",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Ny","=","normalize","(","vec3","(","MX",".","r",",","0.0",",","MX",".","g",")",")",";","Ny","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","Ny",",","0.8",")",")",";","Ns","=","1.25","*","max","(","dot","(","Nw",",","Ny",")","-","0.2",",","0.0",")",";","Ns","+=","max","(","dot","(","Nw",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",",","0.0",")",";","Nr","+=","Ns","*","(","1.0","-","MX",".","b",")",";","No","*=","(","1.0","-","0.95","*","pow","(","MX",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["Nr","+=","No",";","Nr","=","min","(","u_foam_factor","*","Nr",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["Nk","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","Nl","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["No","=","u_specular_params","[","0","]",";","Nl","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","Nw","=","No","*","u_specular_color",";","Ny","=","u_environment_energy","*","dS","(","Nt",")",";","Ny","=","u_ambient","*","Ny",";","Ny","=","Ny","+","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nz","=","Nj","(","Nm",",","Nt",",","Nu",",","Ny",",","No",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nz","=","Nj","(","vec2","(","0.0",")",",","Nt",",","Nu",",","Ny",",","No",")",";"]}]}}]},{type:"textline",tokens:["Nx","=","u_diffuse_intensity","*","Nx",";","xM","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Nx",",","Nw",",","bC",",","Nt",",","Nu",",","Nl",",","u_diffuse_params",",","vec4","(","1.0",")",",","0.0",",","vec4","(","0.0",")",",","NA",",","NB",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Ns","=","max","(","dot","(","u_sun_direction",",","-","bE",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","Nu",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","Ns","=","clamp","(","SSS_STRENGTH","*","Ns",",","0.0",",","1.0",")",";","NA","=","mix","(","NA",",","u_shallow_water_col",",","Ns",")",";","NA","=","mix","(","NA",",","u_shore_water_col",",","Ns",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["NA","=","mix","(","Nv",",","NA",",","Nq",")",";"]}]}}]},{type:"textline",tokens:["NA","=","mix","(","NA",",","Nz",",","No",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["No","=","mix","(","Nk",".","g",",","Nk",".","r",",","max","(","4.0","*","(","Nr","-","0.75",")",",","0.0",")",")",";","No","=","mix","(","Nk",".","b",",","No",",","max","(","2.0","*","Nr","-","1.0",",","0.0",")",")",";","No","=","mix","(","0.0",",","No",",","Nr",")",";","NA","=","mix","(","NA",",","Ny",",","No",")",";"]}]}}]},{type:"textline",tokens:["NA","+=","NB",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Nr","=","bH","*","u_view_max_depth",";","Nq","=","1.0",";","if","(","u_cam_water_depth",">","1.0",")","Nq","=","2.0",";","uO","(","NA",",","Nr",",","Nu",",","Nq",")",";"]}]}}]},{type:"textline",tokens:["bu","(","NA",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Np","=","max","(","Np",",","NB",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["Np","+=","No",";"]}]}}]}]}},{type:"elif",expression:["SHORE_SMOOTHING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Np","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","NA",",","Np",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["NB","=","fwidth","(","MY",")",";","NB","=","smoothstep","(","vec3","(","0.0",")",",","NB","*","MU",",","MY",")",";","No","=","min","(","min","(","NB",".","x",",","NB",".","y",")",",","NB",".","z",")",";","No","=","clamp","(","No",",","0.0",",","1.0",")",";","NA","=","mix","(","u_wireframe_edge_color",",","NA",",","No",")",";","Np","=","mix","(","1.0",",","Np",",","No",")",";"]}]}},{type:"elif",expression:["DEBUG_WIREFRAME",2,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["NB","=","sign","(","MY","-","vec3","(","0.02","*","MU",")",")",";","No","=","1.0",";","if","(","NB",".","x","<","0.0","||","NB",".","y","<","0.0","||","NB",".","z","<","0.0",")","No","=","0.0",";","NA","=","mix","(","u_wireframe_edge_color",",","NA",",","No",")",";","Np","=","mix","(","1.0",",","Np",",","No",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","NA",",","Np",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Y",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Y",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"DYNAMIC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";","attribute","vec3","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH",{type:"logic_negative_expr",places:1},"NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_polyindex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","uP",";","varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bF",";","varying","vec3","MV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","MW",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","MX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","MY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Nc","(","in","vec2","MU",")","{","float","MZ",";","vec4","M_",";","vec2","Na",";","Na","=","0.5","+","vec2","(","(","MU",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","MU",".","y","+","SHORE_MAP_CENTER_Y",")","/","SHORE_MAP_SIZE_Y",")",";","M_","=","texture2D","(","u_shore_dist_map",",","Na",")",";","const","vec2","Nb","=","vec2","(","1.0","/","255.0",",","1.0",")",";","MZ","=","dot","(","M_",".","ba",",","Nb",")",";","Na","=","normalize","(","M_",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","Na",",","MZ",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"SMALL_WAVES_FAC",tokens:["0.3"]},{type:"textline",tokens:["void","No","(","inout","vec3","Nd",",","in","float","Ne",",","in","vec3","Nf",")","{","vec2","Ng",",","Nh",",","Ni",";","float","Nj",",","Nk",",","Nl",",","Nm",",","Nn",";","Nj","=","aU","(","DST_NOISE_SCALE_0","*","(","Nd",".","xz","+","DST_NOISE_FREQ_0","*","Ne",")",")","*","aU","(","DST_NOISE_SCALE_1","*","(","Nd",".","zx","-","DST_NOISE_FREQ_1","*","Ne",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Nk","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","Nl","=","Nf",".","b",";","Nm","=","sqrt","(","Nl",")",";","Nk","=","max","(","Nl",",","DIR_MIN_SHR_FAC",")","*","sin","(","Nm","/","Nk","+","DIR_FREQ","*","Ne",")",";","Nn","=","max","(","aU","(","DIR_NOISE_SCALE","*","(","Nd",".","xz","+","DIR_NOISE_FREQ","*","Ne",")",")",",","DIR_MIN_NOISE_FAC",")",";","Nk","*=","Nn",";","Nm","=","WAVES_HEIGHT","*","mix","(","Nk",",","Nj",",","max","(","Nm",",","DST_MIN_FAC",")",")",";","Ng","=","Nf",".","rg",";","Nk","=","WAVES_HOR_FAC","*","Nk","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","Nl",")",",","0.0",")",";","Ng","=","Nk","*","Ng",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nm","=","WAVES_HEIGHT","*","Nj",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["Nh","=","2.0","*","(","Nd",".","xz","-","0.1","*","Ne",")",";","Ni","=","1.3","*","(","Nd",".","zx","+","0.03","*","Ne",")",";","Nj","=","ay","(","0.5","*","(","Nh","+","Ni",")",")",".","x","-","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Nd",".","xz","+=","Ng",";","Nj","*=","Nl",";"]}]}}]},{type:"textline",tokens:["Nm","+=","SMALL_WAVES_FAC","*","Nj",";"]}]}}]},{type:"textline",tokens:["Nd",".","y","+=","Nm",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Np",",","Nq",";","vec2","Nr",";","float","Ns",",","Nt",",","Nu",";","vec3","Nv",",","Nw",",","Nx",",","Ny",",","Nz",";","mat4","NA",",","NB",";","NA","=","O","(","u_view_tsr",")",";","NB","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_polyindex","==","0.0",")","MY","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","MY","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","MY","=","vec3","(","0.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["Nv","=","a_position",";","Ns","=","abs","(","Nv",".","y",")",";","Nr","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","Ns",")",";","Nv",".","y","=","WATER_LEVEL",";","Nv",".","xz","+=","Nr",";","Nv","=","Nv",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["c","NC","=","rB","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","NB",")",";","Nv","=","NC",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["MX","=","Nc","(","Nv",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Nt","=","length","(","u_wind",")",";","Nu","=","u_time",";","Nu","*=","Nt",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["Ns","=","Ns",";","Nw","=","Nv","+","vec3","(","Ns",",","0.0",",","0.0",")",";","Nx","=","Nv","+","vec3","(","0.0",",","0.0",",","Ns",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["MW","=","Nv",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nw","=","Nv","+","vec3","(","0.05",",","0.0",",","0.0",")",";","Nx","=","Nv","+","vec3","(","0.0",",","0.0",",","0.05",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Ny","=","Nc","(","Nw",".","xz",")",";","Nz","=","Nc","(","Nx",".","xz",")",";","No","(","Nw",",","Nu",",","Ny",")",";","No","(","Nx",",","Nu",",","Nz",")",";","No","(","Nv",",","Nu",",","MX",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["No","(","Nw",",","Nu",",","vec3","(","0.0",")",")",";","No","(","Nx",",","Nu",",","vec3","(","0.0",")",")",";","No","(","Nv",",","Nu",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_position",".","y","<","0.0",")","{","Nv",".","y","=","WATER_LEVEL","-","1.0",";","Nw",".","y","=","Nv",".","y",";","Nx",".","y","=","Nv",".","y",";","}"]}]}}]},{type:"textline",tokens:["Nw","=","normalize","(","Nw","-","Nv",")",";","Nx","=","normalize","(","Nx","-","Nv",")",";","bE","=","normalize","(","cross","(","Nx",",","Nw",")",")",";","Nu","=","dot","(","bE",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","Nu","=","clamp","(","0.8","-","Nu",",","0.0",",","1.0",")",";","bE","=","mix","(","bE",",","vec3","(","0.0",",","1.0",",","0.0",")",",","Nu",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Nx","=","a_tangent",";","bE","=","a_normal",";"]}]}}]},{type:"textline",tokens:["bF","=","Nx",";","MV","=","cross","(","bE",",","bF",")",";"]}]}}]},{type:"textline",tokens:["bC","=","Nv",";","uP","=","u_camera_eye","-","Nv",";","Np","=","NA","*","vec4","(","Nv",",","1.0",")",";","Nq","=","u_proj_matrix","*","Np",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["Nu","=","Nq",".","x",";","Ns","=","Nq",".","y",";","Nt","=","Nq",".","w",";","bG",".","x","=","(","Nu","+","Nt",")","/","2.0",";","bG",".","y","=","(","Ns","+","Nt",")","/","2.0",";","bG",".","z","=","Nt",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","Np",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","Nq",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_NONE",tokens:["0"]},{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["2"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["3"]},{type:"define",name:"WM_DEBUG_SPHERES",tokens:["4"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","MY",";","const","float","MU","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","MZ","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","MZ","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","M_","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","Na","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","Nb","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","Nc",",","Nd",";","vec3","Ne",",","Nf",";","Ne","=","vec3","(","0.0",")",";","Nc","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Nf","=","sign","(","MY","-","vec3","(","0.02","*","MU",")",")",";","if","(","Nf",".","x","<","0.0","||","Nf",".","y","<","0.0","||","Nf",".","z","<","0.0",")","{","Ne","=","MZ",";","Nc","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY",0,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nf","=","sign","(","MY","-","vec3","(","0.02","*","MU",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","Nf",".","x","<","0.0","||","Nf",".","y","<","0.0","||","Nf",".","z","<","0.0",")","Ne","=","u_wireframe_edge_color",";","else","Ne","=","Nb",";","Nc","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","Nf",".","x","<","0.0","||","Nf",".","y","<","0.0","||","Nf",".","z","<","0.0",")","Nc","=","1.0",";","else","Nc","=","0.0",";","Ne","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","Nf",".","x","<","0.0","||","Nf",".","y","<","0.0","||","Nf",".","z","<","0.0",")","Ne","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","Ne","=","M_",";","else","Ne","=","Na",";","Nc","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["Nf","=","fwidth","(","MY",")",";","Nf","=","smoothstep","(","vec3","(","0.0",")",",","Nf","*","MU",",","MY",")",";","Nd","=","min","(","min","(","Nf",".","x",",","Nf",".","y",")",",","Nf",".","z",")",";","Nd","=","clamp","(","Nd",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","Ne","=","vec3","(","mix","(","u_wireframe_edge_color",",","Nb",",","Nd",")",")",";","Nc","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","Ne","=","u_wireframe_edge_color",";","Nc","=","mix","(","1.0",",","0.0",",","Nd",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","Ne","=","mix","(","u_wireframe_edge_color",",","M_",",","Nd",")",";","else","Ne","=","mix","(","u_wireframe_edge_color",",","Na",",","Nd",")",";","Nc","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["bu","(","Ne",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","Ne",",","Nc",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ne",",","Nc",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","MY",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","MU",",","MZ",",","M_",",","Na",",","Nb",";","mat4","Nc",",","Nd",",","Ne",";","Nc","=","O","(","u_view_tsr",")",";","Nd","=","O","(","u_model_tsr",")",";","if","(","a_polyindex","==","0.0",")","MY","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","MY","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","MY","=","vec3","(","0.0",",","0.0",",","1.0",")",";","MU","=","a_position",";","MZ","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["c","Nf","=","rB","(","MU",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Nd",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["MU","=","mix","(","MU",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["M_","=","vec3","(","0.0",")",";","Na","=","vec3","(","0.0",")",";","sB","(","MU",",","M_",",","Na",",","MZ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["Na","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Na","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","Nf","=","vv","(","MU",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Na",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","Nc",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["M_","=","(","Nd","*","vec4","(","Na",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ne","=","ru","(","u_camera_eye",",","M_",",","Nc",",","Nd",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ne","=","ro","(","u_camera_eye",",","M_",",","Nc",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nb","=","(","Nd","*","vec4","(","Na",",","1.0",")",")",".","xyz",";","Ne","=","Ne","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","Nb",")",";"]}]}}]},{type:"textline",tokens:["c","Nf","=","rB","(","MU","-","Na",",","Na",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Ne",")",";","Nf",".","b","=","M_",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","Nf","=","rB","(","MU",",","Na",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Nd",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tp","(","Nf",".","a",",","Nf",".","b",",","MZ",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","Nc","*","vec4","(","Nf",".","a",",","1.0",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["2"]},{type:"define",name:"AA_QUALITY_LOW",tokens:["0"]},{type:"define",name:"AA_QUALITY_MEDIUM",tokens:["1"]},{type:"define",name:"AA_QUALITY_HIGH",tokens:["2"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["vec4","Na","(","float","MU",",","float","MZ",")","{","vec2","M_",";","M_","=","bM","+","vec2","(","MU",",","MZ",")","*","u_texel_size",";","return","texture2D","(","u_color",",","M_",")",";","}","vec4","Nn","(",")","{","vec2","Nb",";","float","Nc",",","Nd",",","Ne",",","Nf",",","Ng",",","Nh",";","vec4","Ni",",","Nj",",","Nk",",","Nl",",","Nm",";","Ni","=","Na","(","-","1.0",",","-","1.0",")",";","Nj","=","Na","(","1.0",",","-","1.0",")",";","Nk","=","Na","(","-","1.0",",","1.0",")",";","Nl","=","Na","(","1.0",",","1.0",")",";","Nm","=","Na","(","0.0",",","0.0",")",";","Nc","=","bB","(","Nm",")",";","Nd","=","bB","(","Ni",")",";","Ne","=","bB","(","Nj",")",";","Nf","=","bB","(","Nk",")",";","Ng","=","bB","(","Nl",")",";","Nh","=","min","(","Nc",",","min","(","min","(","Nd",",","Ne",")",",","min","(","Nf",",","Ng",")",")",")",";","Nc","=","max","(","Nc",",","max","(","max","(","Nd",",","Ne",")",",","max","(","Nf",",","Ng",")",")",")",";","Nb",".","x","=","-","(","(","Nd","+","Ne",")","-","(","Nf","+","Ng",")",")",";","Nb",".","y","=","(","(","Nd","+","Nf",")","-","(","Ne","+","Ng",")",")",";","Ng","=","max","(","(","Nd","+","Ne","+","Nf","+","Ng",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","Ng","=","1.0","/","(","min","(","abs","(","Nb",".","x",")",",","abs","(","Nb",".","y",")",")","+","Ng",")",";","Nb","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","Nb","*","Ng",")",")","*","u_texel_size",";","Nl","=","0.5","*","(","texture2D","(","u_color",",","bM","+","Nb","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","bM","+","Nb","*","(","2.0","/","3.0","-","0.5",")",")",")",";","Nk","=","Nl","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","bM","+","Nb","*","-","0.5",")","+","texture2D","(","u_color",",","bM","+","Nb","*","0.5",")",")",";","Ng","=","bB","(","Nk",")",";","if","(","(","Ng","<","Nh",")","||","(","Ng",">","Nc",")",")","return","Nl",";","else","return","Nk",";","}"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_GREEN_AS_LUMA",tokens:["1"]},{type:"define",name:"FXAA_BLEND4WEB",tokens:["1"]},{type:"include",file:"fxaa.glslf"},{type:"condition",parts:[{type:"if",expression:["AA_QUALITY","AA_QUALITY_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["39"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["1.00"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.063"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0312"]}]}},{type:"elif",expression:["AA_QUALITY","AA_QUALITY_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["20"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["0.65"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.166"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0625"]}]}},{type:"elif",expression:["AA_QUALITY","AA_QUALITY_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["0.50"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.166"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0833"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Oe",";"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","Nn","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Oe","=","u_texel_size",";","gl_FragColor","=","Od","(","bM",",","u_color",",","Oe",",","FXAA_QUALITY_SUBPIX",",","FXAA_QUALITY_EDGE_THRESHOLD",",","FXAA_QUALITY_EDGE_THRESHOLD_MIN",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","bM",";","void","main","(",")","{","vec4","MU",";","vec2","MZ",",","M_",";","MZ","=","vec2","(","0.0",",","0.0",")",";","M_","=","u_texel_size",";","MU","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","MU","*","0.0875447373698",";","MZ","+=","M_",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","MZ",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","MZ",")","*","0.0858112354248",";","MZ","+=","M_",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","MZ",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","MZ",")","*","0.0808139781061",";","MZ","+=","M_",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","MZ",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","MZ",")","*","0.0731235112908",";","MZ","+=","M_",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","MZ",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","MZ",")","*","0.0635705267419",";","MZ","+=","M_",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","MZ",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","MZ",")","*","0.0530985673112",";","MZ","+=","M_",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","MZ",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","MZ",")","*","0.0426125984122",";","MZ","+=","M_",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","MZ",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","MZ",")","*","0.0328565115809",";","MZ","+=","M_",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","MZ",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","MZ",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","MU",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","bM",";","void","main","(",")","{","vec4","MU",",","MZ",";","MU","=","texture2D","(","u_main",",","bM",")",";","MZ","=","texture2D","(","u_bloom",",","bM",")",";","MU","=","MU",";","MU","+=","MZ",";","gl_FragColor","=","vec4","(","MU",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","bM",";","void","main","(",")","{","float","MU",";","vec3","MZ",";","vec4","M_",";","M_","=","texture2D","(","u_color",",","bM",")",";","MZ","=","M_",".","rgb",";","if","(","u_brightness","<","0.0",")","MZ","=","MZ","*","(","1.0","+","u_brightness",")",";","else","MZ","=","MZ","+","(","(","1.0","-","MZ",")","*","u_brightness",")",";","MZ","=","(","MZ","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","MZ","*=","u_exposure",";","MU","=","bB","(","vec4","(","MZ",",","0.0",")",")",";","MZ","=","mix","(","vec3","(","MU",")",",","MZ",",","u_saturation",")",";","gl_FragColor","=","vec4","(","MZ",",","M_",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","bM",";","void","main","(",")","{","gl_FragColor","=","V","(","clamp","(","Ok","(","u_depth",",","bM",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","bM",";","void","main","(",")","{","float","MU",",","MZ",";","vec4","M_",",","Na",";","M_","=","texture2D","(","u_sharp",",","bM",")",";","if","(","u_dof_dist",">","0.0",")","{","MU","=","Ok","(","u_depth",",","bM",",","u_camera_range",")",";","MU","*=","u_view_max_depth",";","if","(","MU","<","u_dof_dist",")","MZ","=","(","u_dof_dist","-","MU",")","/","u_dof_front",";","else","MZ","=","(","MU","-","u_dof_dist",")","/","u_dof_rear",";","MZ","=","clamp","(","MZ",",","0.0",",","1.0",")",";","Na","=","texture2D","(","u_blurred",",","bM",")",";","gl_FragColor","=","mix","(","M_",",","Na",",","MZ",")",";","}","else","gl_FragColor","=","M_",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_src_color",";","uniform","sampler2D","u_glow_mask_small",";","uniform","sampler2D","u_glow_mask_large",";","uniform","float","u_glow_mask_small_coeff",";","uniform","float","u_glow_mask_large_coeff",";","varying","vec2","bM",";","void","main","(",")","{","float","MU",";","vec4","MZ",",","M_",",","Na",";","MZ","=","texture2D","(","u_src_color",",","bM",")",";","M_","=","texture2D","(","u_glow_mask_small",",","bM",")",";","Na","=","texture2D","(","u_glow_mask_large",",","bM",")",";","gl_FragColor","=","MZ",";","if","(","Na",".","a","!=","0.0",")","{","MU","=","u_glow_mask_large_coeff","*","Na",".","a",";","MU","=","clamp","(","MU",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","Na",".","rgb","/","Na",".","a",",","MU",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","MU",")",";","}","if","(","M_",".","a","!=","0.0",")","{","MU","=","u_glow_mask_small_coeff","*","M_",".","a",";","MU","=","clamp","(","MU",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","M_",".","rgb","/","M_",".","a",",","MU",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","MU",")",";","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","Ol",";","varying","vec2","Om",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","varying","vec4","On",";","void","main","(",")","{","vec4","Oo",";","int","Op",";","float","Oq",",","Or",",","Os",",","Ot",";","vec2","Ou",",","Ov",",","Ow",";","Ou","=","(","On",".","xy","-","bM",")",";","Oq","=","length","(","Ou",")",";","Ou","=","u_radial_blur_step","*","Ou","/","Oq",";","Or","=","Oq","/","u_radial_blur_step",";","Ou","*=","min","(","Or",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","Or","=","max","(","Or",",","STEPS_PER_PASS",")",";","Ov","=","bM",";","Os","=","0.0",";","const","int","Ox","=","int","(","STEPS_PER_PASS",")",";","Op","=","int","(","Or","+","0.5",")",";","for","(","int","Oy","=","0",";","Oy","<","Ox",";","Oy","+=","1",")","{","if","(","Oy","<=","Op",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["Or","=","Ok","(","u_input",",","Ov",",","u_camera_range",")",";","Os","+=","max","(","(","1.0","-","pow","(","Oq",",","0.3",")",")","*","step","(","0.9",",","Or",")",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Oo","=","texture2D","(","u_input",",","Ov",")",";","Os","+=","Z","(","Oo",")",";"]}]}}]},{type:"textline",tokens:["}","Ov","+=","Ou",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ow","=","bM","+","Om",";","Ot","=","ay","(","vec2","(","2.5","*","(","Ow",".","x",")",",","2.5","*","(","Ow",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","ay","(","vec2","(","5.0","*","(","Ow",".","x",")","-","0.66","*","u_time",",","5.0","*","(","Ow",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","aU","(","vec2","(","7.5","*","(","Ow",".","x",")","+","0.33","*","u_time",",","7.5","*","(","Ow",".","y",")","-","0.33","*","u_time",")",")",";","Ot","*=","clamp","(","1.2","-","sqrt","(","0.2","*","Oq",")",",","0.0",",","1.0",")","*","Ol",";","Os","=","max","(","Ot",",","Os",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","V","(","Os","/","STEPS_PER_PASS",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","float","u_cam_water_depth",";","varying","float","Ol",";","varying","vec2","Om",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","varying","vec4","On",";","void","main","(",")","{","float","MU",",","MZ",";","vec3","M_",";","bM","=","a_bb_vertex","+","0.5",";","M_","=","normalize","(","u_sun_direction",")",";","On","=","u_view_proj_matrix","*","vec4","(","M_",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","Ol","=","1.0",";","M_","=","vec3","(","0.0",",","1.0",",","0.0",")",";","M_","=","i","(","u_camera_quat",",","M_",")",";","M_","=","normalize","(","M_",")",";","MU","=","dot","(","M_",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","MZ","=","atan","(","M_",".","x",",","M_",".","z",")",";","Om","=","vec2","(","-","MZ",",","acos","(","MU",")",")",";","}","else","{","Ol","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["On",".","xy","=","0.5","*","(","On",".","xy","/","On",".","w","+","1.0",")",";","On","+=","99999.0","*","step","(","On",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","uniform","vec3","u_sun_intensity",";","varying","vec2","bM",";","void","main","(",")","{","float","MU",";","vec3","MZ",";","vec4","M_",";","M_","=","texture2D","(","u_main",",","bM",")",";","MZ","=","clamp","(","u_sun_intensity",",","0.4",",","0.8",")",";","br","(","M_",".","rgb",")",";","MU","=","Z","(","texture2D","(","u_god_rays",",","bM",")",")",";","MZ","=","M_",".","rgb","+","u_god_rays_intensity","*","vec3","(","MU",")","*","MZ",";","bu","(","MZ",")",";"]},{type:"condition",parts:[{type:"if",expression:["SAFARI_CANVAS_ALPHA_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","MZ",",","max","(","0.01",",","M_",".","a",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","MZ",",","M_",".","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","bM",";","void","main","(",")","{","float","MU",";","vec4","MZ",";","MZ","=","texture2D","(","u_input",",","bM",")",";","MU","=","dot","(","MZ",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","MU",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","MU",",","MZ",",","M_",",","Na",";","MZ","=","0.0",";","M_","=","0.025",";","Na","=","0.025",";","for","(","int","Nb","=","0",";","Nb","<","20",";","Nb","+=","1",")","{","Na","=","0.025",";","for","(","int","Nc","=","0",";","Nc","<","20",";","Nc","+=","1",")","{","MU","=","max","(","texture2D","(","u_input",",","vec2","(","M_",",","Na",")",")",".","r",",","0.01",")",";","MZ","+=","log","(","MU",")",";","Na","+=","0.05",";","}","M_","+=","0.05",";","}","MZ","=","exp","(","MZ","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","MZ",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","bM",";","varying","float","Oo",";","void","main","(",")","{","vec4","Op",";","float","Oq",",","Or",";","Oq","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","Or","=","texture2D","(","u_luminance",",","bM",")",".","r",";","Op","=","texture2D","(","u_main",",","bM",")",";","Oq","=","Or","/","Oq",";","Or","=","u_bloom_edge_lum",";","gl_FragColor","=","Op","*","max","(","Oq","-","Or",",","0.0",")","*","Oo",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","bM",";","varying","float","Oo",";","const","vec3","MU","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","Nf","(","in","vec4","MZ",",","in","vec3","M_",",","out","vec3","Na",")","{","float","Nb",",","Nc",",","Nd",",","Ne",";","Nb","=","MZ",".","w","*","M_",".","x","+","MZ",".","y","*","M_",".","z","-","MZ",".","z","*","M_",".","y",";","Nc","=","MZ",".","w","*","M_",".","y","+","MZ",".","z","*","M_",".","x","-","MZ",".","x","*","M_",".","z",";","Nd","=","MZ",".","w","*","M_",".","z","+","MZ",".","x","*","M_",".","y","-","MZ",".","y","*","M_",".","x",";","Ne","=","-","MZ",".","x","*","M_",".","x","-","MZ",".","y","*","M_",".","y","-","MZ",".","z","*","M_",".","z",";","Na",".","x","=","Nb","*","MZ",".","w","-","Ne","*","MZ",".","x","-","Nc","*","MZ",".","z","+","Nd","*","MZ",".","y",";","Na",".","y","=","Nc","*","MZ",".","w","-","Ne","*","MZ",".","y","-","Nd","*","MZ",".","x","+","Nb","*","MZ",".","z",";","Na",".","z","=","Nd","*","MZ",".","w","-","Ne","*","MZ",".","z","-","Nb","*","MZ",".","y","+","Nc","*","MZ",".","x",";","}","void","main","(",")","{","vec3","Ng",";","bM","=","2.0","*","a_position",";","Nf","(","u_camera_quat",",","MU",",","Ng",")",";","Oo","=","dot","(","-","Ng",",","u_sun_direction",")","*","u_bloom_key",";","Oo","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","uniform","float","u_motion_blur_decay_threshold",";","varying","vec2","bM",";","float","MU","=","0.0042",";","void","main","(",")","{","vec4","MZ",",","M_",",","Na",",","Nb",";","MZ","=","texture2D","(","u_mb_tex_curr",",","bM",")",";","M_","=","texture2D","(","u_mb_tex_accum",",","bM",")",";","if","(","length","(","MZ","-","M_",")",">","u_motion_blur_decay_threshold",")","{","Na","=","(","1.0","-","u_motion_blur_exp",")","*","MZ","+","u_motion_blur_exp","*","M_",";","Na","=","Na","-","M_",";","Nb","=","MZ","-","M_",";","Na","=","min","(","max","(","abs","(","Na",")",",","vec4","(","MU",")",")",",","abs","(","Nb",")",")","*","sign","(","Na",")",";","gl_FragColor","=","M_","+","Na",";","}","else","{","gl_FragColor","=","MZ",";","}","}"]}]},exports["postprocessing/outline.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_outline_src",";","uniform","sampler2D","u_outline_mask",";","uniform","sampler2D","u_outline_mask_blurred",";","uniform","vec3","u_outline_color",";","uniform","float","u_draw_outline",";","varying","vec2","bM",";","void","main","(",")","{","vec3","MU",";","float","MZ",";","vec4","M_",",","Na",",","Nb",";","M_","=","texture2D","(","u_outline_src",",","bM",")",";","gl_FragColor","=","M_",";","if","(","u_draw_outline","!=","0.0",")","{","Na","=","texture2D","(","u_outline_mask",",","bM",")",";","Nb","=","texture2D","(","u_outline_mask_blurred",",","bM",")",";","MZ","=","Nb",".","a","-","Na",".","a",";","if","(","MZ","!=","0.0",")","{","MZ","=","smoothstep","(","0.0",",","1.0",",","Nb",".","a",")",";","if","(","Na",".","a","==","0.0",")","{","MU","=","u_outline_color",";","bu","(","MU",")",";","Na","=","vec4","(","clamp","(","MU",",","0.0",",","1.0",")",",","1.0",")",";","gl_FragColor","=","mix","(","M_",",","Na",",","MZ",")",";","}","}","}","}"]}]},exports["postprocessing/performance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_color",";","varying","vec2","bM",";","void","main","(",")","{","vec4","MU",";","MU","=","vec4","(","0.0",")",";","for","(","int","MZ","=","0",";","MZ","<","100",";","MZ","++",")","MU","+=","0.001","*","texture2D","(","u_color",",","bM","+","vec2","(","0.001","*","vec2","(","MZ",")",")",")",";","gl_FragColor","=","MU",";","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"define",name:"FLIP_CUBEMAP_COORDS",tokens:["7"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_tex_number",";","uniform","vec2","u_delta",";"]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","void","main","(",")","{","float","MU",",","MZ",",","M_",",","Na",";","vec2","Nb",",","Nc",";","vec4","Nd",";"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","POST_EFFECT_NONE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","bM",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_GRAYSCALE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nd","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor",".","rgb","=","vec3","(","(","Nd",".","r","+","Nd",".","g","+","Nd",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nb","=","vec2","(","0.0",",","0.0",")",";","Nc","=","u_texel_size",";","Nd","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","Nd","*","0.2270270270",";","Nb","+=","Nc",";","Nd","=","texture2D","(","u_color",",","bM","+","Nb",")",";","gl_FragColor","+=","Nd","*","0.1945945946",";","Nd","=","texture2D","(","u_color",",","bM","-","Nb",")",";","gl_FragColor","+=","Nd","*","0.1945945946",";","Nb","+=","Nc",";","Nd","=","texture2D","(","u_color",",","bM","+","Nb",")",";","gl_FragColor","+=","Nd","*","0.1216216216",";","Nd","=","texture2D","(","u_color",",","bM","-","Nb",")",";","gl_FragColor","+=","Nd","*","0.1216216216",";","Nb","+=","Nc",";","Nd","=","texture2D","(","u_color",",","bM","+","Nb",")",";","gl_FragColor","+=","Nd","*","0.0540540541",";","Nd","=","texture2D","(","u_color",",","bM","-","Nb",")",";","gl_FragColor","+=","Nd","*","0.0540540541",";","Nb","+=","Nc",";","Nd","=","texture2D","(","u_color",",","bM","+","Nb",")",";","gl_FragColor","+=","Nd","*","0.0162162162",";","Nd","=","texture2D","(","u_color",",","bM","-","Nb",")",";","gl_FragColor","+=","Nd","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_GLOW_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_GLOW_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nb","=","vec2","(","0.0",",","0.0",")",";","Nc","=","u_texel_size",";","Nd","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","Nd","*","(","1.0","-","step","(","0.0",",","-","Nd",".","a",")",")","*","0.152507",";","Nb","+=","Nc",";","Nd","=","texture2D","(","u_color",",","bM","+","Nb",")",";","gl_FragColor","+=","Nd","*","(","1.0","-","step","(","0.0",",","-","Nd",".","a",")",")","*","0.141763",";","Nd","=","texture2D","(","u_color",",","bM","-","Nb",")",";","gl_FragColor","+=","Nd","*","(","1.0","-","step","(","0.0",",","-","Nd",".","a",")",")","*","0.141763",";","Nb","+=","Nc",";","Nd","=","texture2D","(","u_color",",","bM","+","Nb",")",";","gl_FragColor","+=","Nd","*","(","1.0","-","step","(","0.0",",","-","Nd",".","a",")",")","*","0.113861",";","Nd","=","texture2D","(","u_color",",","bM","-","Nb",")",";","gl_FragColor","+=","Nd","*","(","1.0","-","step","(","0.0",",","-","Nd",".","a",")",")","*","0.113861",";","Nb","+=","Nc",";","Nd","=","texture2D","(","u_color",",","bM","+","Nb",")",";","gl_FragColor","+=","Nd","*","(","1.0","-","step","(","0.0",",","-","Nd",".","a",")",")","*","0.079019",";","Nd","=","texture2D","(","u_color",",","bM","-","Nb",")",";","gl_FragColor","+=","Nd","*","(","1.0","-","step","(","0.0",",","-","Nd",".","a",")",")","*","0.079019",";","Nb","+=","Nc",";","Nd","=","texture2D","(","u_color",",","bM","+","Nb",")",";","gl_FragColor","+=","Nd","*","(","1.0","-","step","(","0.0",",","-","Nd",".","a",")",")","*","0.047383",";","Nd","=","texture2D","(","u_color",",","bM","-","Nb",")",";","gl_FragColor","+=","Nd","*","(","1.0","-","step","(","0.0",",","-","Nd",".","a",")",")","*","0.047383",";","Nb","+=","Nc",";","Nd","=","texture2D","(","u_color",",","bM","+","Nb",")",";","gl_FragColor","+=","Nd","*","(","1.0","-","step","(","0.0",",","-","Nd",".","a",")",")","*","0.024549",";","Nd","=","texture2D","(","u_color",",","bM","-","Nb",")",";","gl_FragColor","+=","Nd","*","(","1.0","-","step","(","0.0",",","-","Nd",".","a",")",")","*","0.024549",";","Nb","+=","Nc",";","Nd","=","texture2D","(","u_color",",","bM","+","Nb",")",";","gl_FragColor","+=","Nd","*","(","1.0","-","step","(","0.0",",","-","Nd",".","a",")",")","*","0.01099",";","Nd","=","texture2D","(","u_color",",","bM","-","Nb",")",";","gl_FragColor","+=","Nd","*","(","1.0","-","step","(","0.0",",","-","Nd",".","a",")",")","*","0.01099",";","Nb","+=","Nc",";","Nd","=","texture2D","(","u_color",",","bM","+","Nb",")",";","gl_FragColor","+=","Nd","*","(","1.0","-","step","(","0.0",",","-","Nd",".","a",")",")","*","0.00425",";","Nd","=","texture2D","(","u_color",",","bM","-","Nb",")",";","gl_FragColor","+=","Nd","*","(","1.0","-","step","(","0.0",",","-","Nd",".","a",")",")","*","0.00425",";","Nb","+=","Nc",";","Nd","=","texture2D","(","u_color",",","bM","+","Nb",")",";","gl_FragColor","+=","Nd","*","(","1.0","-","step","(","0.0",",","-","Nd",".","a",")",")","*","0.00142",";","Nd","=","texture2D","(","u_color",",","bM","-","Nb",")",";","gl_FragColor","+=","Nd","*","(","1.0","-","step","(","0.0",",","-","Nd",".","a",")",")","*","0.00142",";","gl_FragColor","=","clamp","(","gl_FragColor",",","0.0",",","1.0",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_EXTEND",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_EXTEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nc","=","u_texel_size",";","Nd","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","Nd",";","if","(","Nd",".","a","==","0.0",")","{","Nd","=","texture2D","(","u_color",",","bM","+","Nc",")",";","if","(","Nd",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","Nd",".","a",")",";","else","{","Nd","=","texture2D","(","u_color",",","bM","-","Nc",")",";","if","(","Nd",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","Nd",".","a",")",";","}","}"]}]}},{type:"elif",expression:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["MU","=","u_delta","[","0","]",";","MZ","=","u_delta","[","1","]",";","M_","=","1.0","/","3.0",";","Na","=","0.5",";","Nc","=","vec2","(","M_",",","Na",")",";","if","(","u_tex_number","==","0",")","{","Nb","=","bM","*","Nc","+","vec2","(","2.0","*","M_",",","0.0",")",";","Nb","[","0","]","=","min","(","Nb","[","0","]",",","1.0","-","MU",")",";","Nb","[","1","]","=","min","(","Nb","[","1","]",",","0.5","-","MZ",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","5.0","*","M_","-","Nb","[","0","]",",","Nb","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","1",")","{","Nb","=","bM","*","Nc",";","Nb","[","0","]","=","max","(","Nb","[","0","]",",","MU",")",";","Nb","[","1","]","=","min","(","Nb","[","1","]",",","0.5","-","MZ",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","M_","-","Nb","[","0","]",",","Nb","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","2",")","{","Nb","=","bM","*","Nc","+","vec2","(","M_",",","Na",")",";","Nb","[","0","]","=","max","(","Nb","[","0","]",",","M_","+","MU",")",";","Nb","[","0","]","=","min","(","Nb","[","0","]",",","2.0","*","M_","-","MU",")",";","Nb","[","1","]","=","min","(","Nb","[","1","]",",","1.0","-","MZ",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","Nb","[","0","]",",","3.0","*","Na","-","Nb","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","3",")","{","Nb","=","bM","*","Nc","+","vec2","(","0.0",",","Na",")",";","Nb","[","0","]","=","min","(","Nb","[","0","]",",","M_","-","MU",")",";","Nb","[","1","]","=","min","(","Nb","[","1","]",",","1.0","-","MZ",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","Nb","[","0","]",",","3.0","*","Na","-","Nb","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","4",")","{","Nb","=","bM","*","Nc","+","vec2","(","M_",",","0.0",")",";","Nb","[","0","]","=","max","(","Nb","[","0","]",",","M_","+","MU",")",";","Nb","[","0","]","=","min","(","Nb","[","0","]",",","2.0","*","M_","-","MU",")",";","Nb","[","1","]","=","min","(","Nb","[","1","]",",","0.5","-","MZ",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","1.0","-","Nb","[","0","]",",","Nb","[","1","]",")",")",";","}","else","{","Nc","=","bM","*","Nc","+","vec2","(","2.0","*","M_",",","Na",")",";","Nc","[","0","]","=","min","(","Nc","[","0","]",",","1.0","-","MU",")",";","Nc","[","1","]","=","max","(","Nc","[","1","]",",","0.5","+","MZ",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","5.0","*","M_","-","Nc","[","0","]",",","Nc","[","1","]",")",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","varying","vec2","bM",";","void","main","(",")","{","bM","=","2.0","*","a_position",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2},"SMAA_PREDICATION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Op",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Oq",";","varying","vec4","Or",";","varying","vec4","Os",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","Ot",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Oz","(","vec2","Ou",",","sampler2D","Ov",")","{","float","Ow",",","Ox",",","Oy",";","Ow","=","texture2D","(","Ov",",","Ou",")",".","r",";","Ox","=","texture2D","(","Ov",",","Oq",".","xy",")",".","r",";","Oy","=","texture2D","(","Ov",",","Oq",".","zw",")",".","r",";","return","vec3","(","Ow",",","Ox",",","Oy",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","OE","(","vec2","OA",",","sampler2D","OB",")","{","vec2","OC",";","vec3","OD",";","OD","=","Oz","(","OA",",","OB",")",";","OC","=","abs","(","OD",".","xx","-","OD",".","yz",")",";","OC","=","step","(","SMAA_PREDICATION_THRESHOLD",",","OC",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","OC",")",";","}"]}]}}]},{type:"textline",tokens:["void","OI","(","bvec2","OF",",","inout","vec2","OG",",","vec2","OH",")","{","if","(","OF",".","x",")","OG",".","x","=","OH",".","x",";","if","(","OF",".","y",")","OG",".","y","=","OH",".","y",";","}","void","OI","(","bvec4","OJ",",","inout","vec4","OK",",","vec4","OL",")","{","OI","(","OJ",".","xy",",","OK",".","xy",",","OL",".","xy",")",";","OI","(","OJ",".","zw",",","OK",".","zw",",","OL",".","zw",")",";","}","vec2","ON","(","vec2","OM",")","{","return","sign","(","OM",")","*","floor","(","abs","(","OM",")","+",".5",")",";","}","vec4","ON","(","vec4","OO",")","{","return","sign","(","OO",")","*","floor","(","abs","(","OO",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Pa","(","vec2","OP",",","sampler2D","OQ"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","OR"]}]}}]},{type:"textline",tokens:[")","{","vec4","OS",";","float","OT",",","OU",",","OV",",","OW",",","OX",";","vec3","OY",";","vec2","OZ",",","O_",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["OZ","=","OE","(","OP",",","OR",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["OZ","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["OY","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","OT","=","dot","(","texture2D","(","OQ",",","OP",")",".","rgb",",","OY",")",";","OU","=","dot","(","texture2D","(","OQ",",","Oq",".","xy",")",".","rgb",",","OY",")",";","OV","=","dot","(","texture2D","(","OQ",",","Oq",".","zw",")",".","rgb",",","OY",")",";","OS",".","xy","=","abs","(","OT","-","vec2","(","OU",",","OV",")",")",";","OZ","=","step","(","OZ",",","OS",".","xy",")",";","if","(","dot","(","OZ",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","OW","=","dot","(","texture2D","(","OQ",",","Or",".","xy",")",".","rgb",",","OY",")",";","OX","=","dot","(","texture2D","(","OQ",",","Or",".","zw",")",".","rgb",",","OY",")",";","OS",".","zw","=","abs","(","OT","-","vec2","(","OW",",","OX",")",")",";","O_","=","max","(","OS",".","xy",",","OS",".","zw",")",";","OX","=","dot","(","texture2D","(","OQ",",","Os",".","xy",")",".","rgb",",","OY",")",";","OW","=","dot","(","texture2D","(","OQ",",","Os",".","zw",")",".","rgb",",","OY",")",";","OS",".","zw","=","abs","(","vec2","(","OU",",","OV",")","-","vec2","(","OX",",","OW",")",")",";","O_","=","max","(","O_",".","xy",",","OS",".","zw",")",";","OW","=","max","(","O_",".","x",",","O_",".","y",")",";","OZ",".","xy","*=","step","(","OW",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","OS",".","xy",")",";","return","OZ",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Pc","(","vec2","Pb",")","{","Pb",".","r","=","Pb",".","r","*","abs","(","5.0","*","Pb",".","r","-","5.0","*","0.75",")",";","return","ON","(","Pb",")",";","}","vec4","Pc","(","vec4","Pd",")","{","Pd",".","rb","=","Pd",".","rb","*","abs","(","5.0","*","Pd",".","rb","-","5.0","*","0.75",")",";","return","ON","(","Pd",")",";","}","vec2","Pl","(","sampler2D","Pe",",","vec2","Pf",",","vec2","Pg",",","out","vec2","Ph",")","{","vec3","Pi",";","vec4","Pj",";","Pj","=","vec4","(","Pf",",","-","1.0",",","1.0",")",";","Pi","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","Pk","=","0",";","Pk","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","Pk","++",")","{","if","(","Pj",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","Pj",".","w",">","0.9",")","{","Pj",".","xyz","+=","Pi","*","vec3","(","Pg",",","1.0",")",";","Ph","=","texture2D","(","Pe",",","Pj",".","xy",",","0.0",")",".","rg",";","Pj",".","w","=","dot","(","Ph",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","Pj",".","zw",";","}","vec2","Pt","(","sampler2D","Pm",",","vec2","Pn",",","vec2","Po",",","out","vec2","Pp",")","{","vec3","Pq",";","vec4","Pr",";","Pr","=","vec4","(","Pn",",","-","1.0",",","1.0",")",";","Pr",".","x","+=","0.25","*","u_texel_size",".","x",";","Pq","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","Ps","=","0",";","Ps","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","Ps","++",")","{","if","(","Pr",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","Pr",".","w",">","0.9",")","{","Pr",".","xyz","=","Pq","*","vec3","(","Po",",","1.0",")","+","Pr",".","xyz",";","Pp","=","texture2D","(","Pm",",","Pr",".","xy",",","0.0",")",".","rg",";","Pp","=","Pc","(","Pp",")",";","Pr",".","w","=","dot","(","Pp",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","Pr",".","zw",";","}","vec2","Pz","(","sampler2D","Pu",",","vec2","Pv",",","vec2","Pw",",","float","Px",")","{","vec2","Py",";","Py","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","Pw","+","Pv",";","Py","=","SMAA_AREATEX_PIXEL_SIZE","*","Py","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","Py",".","x","+=","0.5",";","Py",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","Px",";","return","texture2D","(","Pu",",","Py",",","0.0",")",".","rg",";","}","vec2","PL","(","sampler2D","PA",",","sampler2D","PB",",","vec2","PC",",","vec2","PD",",","vec4","PE",")","{","vec4","PF",",","PG",",","PH",";","vec2","PI",",","PJ",",","PK",";","PI","=","vec2","(","0.0",",","0.0",")",";","if","(","PD",".","r",">","0.0",")","{","PF",".","xz","=","Pl","(","PA",",","PC",",","vec2","(","-","1.0",",","1.0",")",",","PJ",")",";","PF",".","x","+=","float","(","PJ",".","y",">","0.9",")",";","}","else","PF",".","xz","=","vec2","(","0.0",",","0.0",")",";","PF",".","yw","=","Pl","(","PA",",","PC",",","vec2","(","1.0",",","-","1.0",")",",","PJ",")",";","if","(","PF",".","x","+","PF",".","y",">","2.0",")","{","PG","=","vec4","(","-","PF",".","x","+","0.25",",","PF",".","x",",","PF",".","y",",","-","PF",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","PC",".","xyxy",";","PH",".","xy","=","texture2D","(","PA",",","PG",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","PH",".","zw","=","texture2D","(","PA",",","PG",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","PH",".","yxwz","=","Pc","(","PH",".","xyzw",")",";","PK","=","vec2","(","2.0",",","2.0",")","*","PH",".","xz","+","PH",".","yw",";","OI","(","bvec2","(","step","(","0.9",",","PF",".","zw",")",")",",","PK",",","vec2","(","0.0",",","0.0",")",")",";","PI","+=","Pz","(","PB",",","PF",".","xy",",","PK",",","PE",".","z",")",";","}","PF",".","xz","=","Pt","(","PA",",","PC",",","vec2","(","-","1",",","-","1",")",",","PJ",")",";","if","(","texture2D","(","PA",",","PC","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","PF",".","yw","=","Pt","(","PA",",","PC",",","vec2","(","1",",","1",")",",","PJ",")",";","PF",".","y","+=","float","(","PJ",".","y",">","0.9",")",";","}","else","PF",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","PF",".","x","+","PF",".","y",">","2.0",")","{","PH","=","vec4","(","-","PF",".","x",",","-","PF",".","x",",","PF",".","y",",","PF",".","y",")","*","u_texel_size",".","xyxy","+","PC",".","xyxy",";","PG",".","x","=","texture2D","(","PA",",","PH",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","PG",".","y","=","texture2D","(","PA",",","PH",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","PG",".","zw","=","texture2D","(","PA",",","PH",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","PJ","=","vec2","(","2.0",",","2.0",")","*","PG",".","xz","+","PG",".","yw",";","OI","(","bvec2","(","step","(","0.9",",","PF",".","zw",")",")",",","PJ",",","vec2","(","0",",","0",")",")",";","PI","+=","Pz","(","PB",",","PF",".","xy",",","PJ",",","PE",".","w",")",".","gr",";","}","return","PI",";","}"]}]}}]},{type:"textline",tokens:["float","PR","(","sampler2D","PM",",","vec2","PN",",","float","PO",")","{","vec2","PP",",","PQ",";","PP","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","PQ","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","PO",",","1.0",")",";","PP","+=","vec2","(","-","1.0",",","1.0",")",";","PQ","+=","vec2","(","0.5",",","-","0.5",")",";","PP","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","PQ","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","PM",",","PP","*","PN","+","PQ",",","0.0",")",".","r",";","}","float","PZ","(","sampler2D","PS",",","sampler2D","PT",",","vec2","PU",",","float","PV",")","{","float","PW",";","vec2","PX",";","PX","=","vec2","(","0.0",",","1.0",")",";","for","(","int","PY","=","0",";","PY","<","SMAA_MAX_SEARCH_STEPS",";","PY","++",")","{","if","(","PU",".","x",">","PV","&&","PX",".","g",">","0.8281","&&","PX",".","r","==","0.0",")","{","PX","=","texture2D","(","PS",",","PU",",","0.0",")",".","rg",";","PU","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","PU",";","}","}","PW","=","-","(","255.0","/","127.0",")","*","PR","(","PT",",","PX",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","PW","+","PU",".","x",";","}","float","Qg","(","sampler2D","P_",",","sampler2D","Qa",",","vec2","Qb",",","float","Qc",")","{","float","Qd",";","vec2","Qe",";","Qe","=","vec2","(","0.0",",","1.0",")",";","for","(","int","Qf","=","0",";","Qf","<","SMAA_MAX_SEARCH_STEPS",";","Qf","++",")","{","if","(","Qb",".","x","<","Qc","&&","Qe",".","g",">","0.8281","&&","Qe",".","r","==","0.0",")","{","Qe","=","texture2D","(","P_",",","Qb",",","0.0",")",".","rg",";","Qb","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","Qb",";","}","}","Qd","=","-","(","255.0","/","127.0",")","*","PR","(","Qa",",","Qe",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","Qd","+","Qb",".","x",";","}","float","Qo","(","sampler2D","Qh",",","sampler2D","Qi",",","vec2","Qj",",","float","Qk",")","{","float","Ql",";","vec2","Qm",";","Qm","=","vec2","(","1.0",",","0.0",")",";","for","(","int","Qn","=","0",";","Qn","<","SMAA_MAX_SEARCH_STEPS",";","Qn","++",")","{","if","(","Qj",".","y",">","Qk","&&","Qm",".","r",">","0.8281","&&","Qm",".","g","==","0.0",")","{","Qm","=","texture2D","(","Qh",",","Qj",",","0.0",")",".","rg",";","Qj","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","Qj",";","}","}","Ql","=","-","(","255.0","/","127.0",")","*","PR","(","Qi",",","Qm",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","Ql","+","Qj",".","y",";","}","float","Qw","(","sampler2D","Qp",",","sampler2D","Qq",",","vec2","Qr",",","float","Qs",")","{","float","Qt",";","vec2","Qu",";","Qu","=","vec2","(","1.0",",","0.0",")",";","for","(","int","Qv","=","0",";","Qv","<","SMAA_MAX_SEARCH_STEPS",";","Qv","++",")","{","if","(","Qr",".","y","<","Qs","&&","Qu",".","r",">","0.8281","&&","Qu",".","g","==","0.0",")","{","Qu","=","texture2D","(","Qp",",","Qr",",","0.0",")",".","rg",";","Qr","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","Qr",";","}","}","Qt","=","-","(","255.0","/","127.0",")","*","PR","(","Qq",",","Qu",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","Qt","+","Qr",".","y",";","}","vec2","QD","(","sampler2D","Qx",",","vec2","Qy",",","float","Qz",",","float","QA",",","float","QB",")","{","vec2","QC",";","QC","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","ON","(","4.0","*","vec2","(","Qz",",","QA",")",")","+","Qy",";","QC","=","SMAA_AREATEX_PIXEL_SIZE","*","QC","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","QC",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","QB","+","QC",".","y",";","return","texture2D","(","Qx",",","QC",",","0.0",")",".","rg",";","}","void","QK","(","sampler2D","QE",",","inout","vec2","QF",",","vec4","QG",",","vec2","QH",")","{","vec2","QI",",","QJ",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["QI","=","step","(","QH",".","xy",",","QH",".","yx",")",";","QJ","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","QI",";","QJ","/=","QI",".","x","+","QI",".","y",";","QI","=","vec2","(","1.0",",","1.0",")",";","QI",".","x","-=","QJ",".","x","*","texture2D","(","QE",",","QG",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","QI",".","x","-=","QJ",".","y","*","texture2D","(","QE",",","QG",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","QI",".","y","-=","QJ",".","x","*","texture2D","(","QE",",","QG",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","QI",".","y","-=","QJ",".","y","*","texture2D","(","QE",",","QG",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","QF","*=","clamp","(","QI",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","QR","(","sampler2D","QL",",","inout","vec2","QM",",","vec4","QN",",","vec2","QO",")","{","vec2","QP",",","QQ",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["QP","=","step","(","QO",".","xy",",","QO",".","yx",")",";","QQ","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","QP",";","QQ","/=","QP",".","x","+","QP",".","y",";","QP","=","vec2","(","1.0",",","1.0",")",";","QP",".","x","-=","QQ",".","x","*","texture2D","(","QL",",","QN",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","QP",".","x","-=","QQ",".","y","*","texture2D","(","QL",",","QN",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","QP",".","y","-=","QQ",".","x","*","texture2D","(","QL",",","QN",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","QP",".","y","-=","QQ",".","y","*","texture2D","(","QL",",","QN",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","QM","*=","clamp","(","QP",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Re","(","vec2","QS",",","vec2","QT",",","sampler2D","QU",",","sampler2D","QV",",","sampler2D","QW",",","vec4","QX",")","{","float","QY",",","QZ",";","vec3","Q_",";","vec2","Ra",",","Rb",",","Rc",";","vec4","Rd",";","Rd","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","Ra","=","texture2D","(","QU",",","QS",")",".","rg",";","if","(","Ra",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Rd",".","rg","=","PL","(","QU",",","QV",",","QS",",","Ra",",","QX",")",";","if","(","Rd",".","r","==","-","Rd",".","g",")","{"]}]}}]},{type:"textline",tokens:[";","Q_",".","x","=","PZ","(","QU",",","QW",",","Oq",".","xy",",","Os",".","x",")",";","Q_",".","y","=","Or",".","y",";","Rb",".","x","=","Q_",".","x",";","QY","=","texture2D","(","QU",",","Q_",".","xy",",","0.0",")",".","r",";","Q_",".","z","=","Qg","(","QU",",","QW",",","Oq",".","zw",",","Os",".","y",")",";","Rb",".","y","=","Q_",".","z",";","Rb","=","abs","(","ON","(","Rb","/","u_texel_size",".","xx","-","QT",".","xx",")",")",";","Rc","=","sqrt","(","Rb",")",";","QZ","=","texture2D","(","QU",",","Q_",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","Rd",".","rg","=","QD","(","QV",",","Rc",",","QY",",","QZ",",","QX",".","y",")",";","Q_",".","y","=","QS",".","y",";","QK","(","QU",",","Rd",".","rg",",","Q_",".","xyzy",",","Rb",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["}","else","Ra",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","Ra",".","r",">","0.0",")","{",";","Q_",".","y","=","Qo","(","QU",",","QW",",","Or",".","xy",",","Os",".","z",")",";","Q_",".","x","=","Oq",".","x",";","Ra",".","x","=","Q_",".","y",";","QZ","=","texture2D","(","QU",",","Q_",".","xy",",","0.0",")",".","g",";","Q_",".","z","=","Qw","(","QU",",","QW",",","Or",".","zw",",","Os",".","w",")",";","Ra",".","y","=","Q_",".","z",";","Ra","=","abs","(","ON","(","Ra","/","u_texel_size",".","yy","-","QT",".","yy",")",")",";","Rb","=","sqrt","(","Ra",")",";","QY","=","texture2D","(","QU",",","Q_",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","Rd",".","ba","=","QD","(","QV",",","Rb",",","QZ",",","QY",",","QX",".","x",")",";","Q_",".","x","=","QS",".","x",";","QR","(","QU",",","Rd",".","ba",",","Q_",".","xyxz",",","Ra",")",";","}","return","Rd",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Rq","(","vec2","Rf",",","sampler2D","Rg",",","sampler2D","Rh"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","Ri"]}]}}]},{type:"textline",tokens:[")","{","bool","Rj",";","vec2","Rk",",","Rl",",","Rm",";","vec4","Rn",",","Ro",",","Rp",";","Rn",".","x","=","texture2D","(","Rh",",","Op",".","xy",")",".","a",";","Rn",".","y","=","texture2D","(","Rh",",","Op",".","zw",")",".","g",";","Rn",".","wz","=","texture2D","(","Rh",",","Rf",")",".","xz",";","if","(","dot","(","Rn",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","Ro","=","texture2D","(","Rg",",","Rf",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["Rp","=","texture2D","(","Ri",",","bM",")",";","Rk","=","2.0","*","ag","(","Rp",")","-","1.0",";","Ro",".","a","=","sqrt","(","2.0","*","length","(","Rk",")",")",";"]}]}}]},{type:"textline",tokens:["return","Ro",";","}","else","{","Rj","=","max","(","Rn",".","x",",","Rn",".","z",")",">","max","(","Rn",".","y",",","Rn",".","w",")",";","Ro","=","vec4","(","0.0",",","Rn",".","y",",","0.0",",","Rn",".","w",")",";","Rk","=","Rn",".","yw",";","OI","(","bvec4","(","Rj",",","Rj",",","Rj",",","Rj",")",",","Ro",",","vec4","(","Rn",".","x",",","0.0",",","Rn",".","z",",","0.0",")",")",";","OI","(","bvec2","(","Rj",",","Rj",")",",","Rk",",","Rn",".","xz",")",";","Rk","/=","dot","(","Rk",",","vec2","(","1.0",",","1.0",")",")",";","Ro","=","Ro","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","Rf",".","xyxy",";","Rn","=","Rk",".","x","*","texture2D","(","Rg",",","Ro",".","xy",",","0.0",")",";","Rn","+=","Rk",".","y","*","texture2D","(","Rg",",","Ro",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["Rp","=","texture2D","(","Ri",",","Ro",".","xy",")",";","Rl","=","2.0","*","ag","(","Rp",")","-","1.0",";","Rm","=","Rk",".","x","*","Rl",";","Rp","=","texture2D","(","Ri",",","Ro",".","zw",")",";","Rl","=","2.0","*","ag","(","Rp",")","-","1.0",";","Rm","+=","Rk",".","y","*","Rl",";","Rn",".","a","=","sqrt","(","2.0","*","length","(","Rm",")",")",";"]}]}}]},{type:"textline",tokens:["return","Rn",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","RA","(","vec2","Rr",",","sampler2D","Rs",",","sampler2D","Rt"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","Ru"]}]}}]},{type:"textline",tokens:[")","{","float","Rv",";","vec2","Rw",";","vec4","Rx",",","Ry",",","Rz",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["Rx","=","texture2D","(","Ru",",","bM",")",";","Rw","=","2.0","*","ag","(","Rx",")","-","1.0",";","Rx","=","texture2D","(","Rs",",","Rr",")",";","Ry","=","texture2D","(","Rt",",","Rr","-","Rw",")",";","Rv","=","abs","(","Rx",".","a","*","Rx",".","a","-","Ry",".","a","*","Ry",".","a",")","/","2.0",";","Rv","=","0.5","*","clamp","(","1.0","-","sqrt","(","Rv",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","Rz","=","mix","(","Rx",",","Ry",",","Rv",")",";","Rz",".","a","=","1.0",";","return","Rz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Rx","=","texture2D","(","Rs",",","Rr",")",";","Ry","=","texture2D","(","Rt",",","Rr",")",";","return","mix","(","Rx",",","Ry",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","RB",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["RB","=","vec4","(","Pa","(","bM",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["RB","=","Re","(","bM",",","Ot",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["RB","=","Rq","(","bM",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["RB","=","vec4","(","RA","(","bM",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["RB","=","texture2D","(","u_color",",","bM",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","RB",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Op",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Oq",";","varying","vec4","Or",";","varying","vec4","Os",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","Ot",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","MZ","(","vec2","MU",")","{","Oq","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","MU",".","xyxy",";","Or","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","MU",".","xyxy",";","Os","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","MU",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Nb","(","vec2","M_",",","out","vec2","Na",")","{","Na","=","M_","/","u_texel_size",";","Oq","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","M_",".","xyxy",";","Or","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","M_",".","xyxy",";","Os","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","Oq",".","xz",",","Or",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Nd","(","vec2","Nc",")","{","Op","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","Nc",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","bM","=","2.0","*","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["MZ","(","bM",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nb","(","bM",",","Ot",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nd","(","bM",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"define",name:"SSAO_QUALITY_8",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_16",tokens:["2"]},{type:"define",name:"SSAO_QUALITY_24",tokens:["3"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","sampler2D","u_ssao_special_tex",";","uniform","vec2","u_camera_range",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","float","MZ","(","in","vec2","MU",")","{","return","Ok","(","u_depth",",","MU",",","u_camera_range",")",";","}","void","main","(",")","{","float","M_",",","Na",",","Nb",",","Nc",",","Nd",",","Ne",";","vec3","Nf",",","Ng",",","Nh",",","Ni",";","Nf","=","texture2D","(","u_color",",","bM",")",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","Nf",",","1.0",")",";","return",";"]}]}}]},{type:"textline",tokens:["Ng","=","normalize","(","2.0","*","texture2D","(","u_ssao_special_tex",",","bM","*","0.25","/","u_texel_size",")",".","rgb","-","1.0",")",";","M_","=","MZ","(","bM",")",";","Na","=","M_","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","SSAO_QUALITY_8",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Nj","=","8.0",";","const","int","Nk","=","1",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_16",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Nj","=","16.0",";","const","int","Nk","=","2",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_24",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Nj","=","24.0",";","const","int","Nk","=","3",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_32",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Nj","=","32.0",";","const","int","Nk","=","4",";"]}]}}]},{type:"textline",tokens:["Nb","=","u_ssao_radius_increase","*","0.001",";","const","float","Nl","=","1.0","+","2.4","/","Nj",";","Nc","=","0.0",";","for","(","int","Nm","=","0",";","Nm","<","Nk",";","Nm","++",")","for","(","int","Nn","=","-","1",";","Nn","<=","1",";","Nn","+=","2",")","for","(","int","Ou","=","-","1",";","Ou","<=","1",";","Ou","+=","2",")","for","(","int","Ov","=","-","1",";","Ov","<=","1",";","Ov","+=","2",")","{","Nh","=","reflect","(","normalize","(","vec3","(","Nn",",","Ou",",","Ov",")",")",",","Ng",")","*","(","Nb","*=","Nl",")",";","Ni","=","vec3","(","bM",",","Na",")",";","Ni","+=","vec3","(","Nh",".","xy",",","Nh",".","z","*","Na","*","2.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Ni",".","z","-=","1.4","*","(","Ni",".","z","-","Na",")","*","step","(","Na",",","Ni",".","z",")",";"]}]}}]},{type:"textline",tokens:["Nd","=","MZ","(","Ni",".","xy",")","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";","Ne","=","clamp","(","(","Na","-","Nd",")","/","Nd",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Nc","+=","mix","(","1.0",",","Ne",",","step","(","Nd",",","Ni",".","z",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nc","+=","mix","(","step","(","Ni",".","z",",","Nd",")",",","0.5",",","Ne",")",";"]}]}}]},{type:"textline",tokens:["}","Nc","=","Nc","/","Nj",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Nc","=","clamp","(","Nc","*","Nc","+","0.6","*","Nc",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nc","=","clamp","(","Nc","*","Nc","+","Nc",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["M_","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","M_",")",";","Nc","=","mix","(","1.0",",","Nc",",","M_",")",";","gl_FragColor","=","vec4","(","Nf",",","Nc",")",";","}"]}]},exports["postprocessing/ssao_blur.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"include",file:"depth_fetch.glslf"}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_ssao_mask",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","uniform","float","u_ssao_blur_discard_value",";","float","MZ","(","in","vec2","MU",")","{","return","Ok","(","u_depth",",","MU",",","u_camera_range",")",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","M_",",","Na",";","float","Nb",",","Nc",",","Nd",",","Ne",",","Nf",",","Ng",",","Nh",";","Nb","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["Nc","=","MZ","(","bM",")",";","Nd","=","0.0",";","Ne","=","u_ssao_blur_discard_value","*","100.0",";"]}]}}]},{type:"textline",tokens:["M_","=","vec2","(","-","2.0",")",";","for","(","int","Ni","=","0",";","Ni","<","4",";","++","Ni",")","{","for","(","int","Nj","=","0",";","Nj","<","4",";","++","Nj",")","{","Na","=","(","M_","+","vec2","(","float","(","Ni",")",",","float","(","Nj",")",")",")","*","u_texel_size",";","Nf","=","texture2D","(","u_ssao_mask",",","bM","+","Na",")",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["Ng","=","MZ","(","bM","+","Na",")",";","Nh","=","1.0","-","clamp","(","abs","(","Ng","-","Nc",")","*","Ne",",","0.0",",","1.0",")",";","Nb","+=","Nf","*","Nh",";","Nd","+=","Nh",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nb","+=","Nf",";"]}]}}]},{type:"textline",tokens:["}","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","bM",")",".","rgb",",","Nb","/","Nd",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","bM",")",".","rgb",",","Nb","/","16.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/stereo.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["ANAGLYPH",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_enable_hmd_stereo",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_DISTORTION_CORRECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_distortion_params",";","uniform","vec4","u_chromatic_aberration_coefs",";","void","Ng","(","vec2","MU",",","vec2","MZ",",","sampler2D","M_",")","{","vec4","Na",";","float","Nb",";","vec2","Nc",",","Nd",",","Ne",",","Nf",";","Nc","=","(","MU","-","MZ",")","*","2.0",";","Nb","=","Nc",".","x","*","Nc",".","x","+","Nc",".","y","*","Nc",".","y",";","Nc","=","Nc","*","(","1.0","+","u_distortion_params","[","0","]","*","Nb","+","u_distortion_params","[","1","]","*","Nb","*","Nb",")",";","Nc","=","Nc","*","0.5","/","(","1.0","+","u_distortion_params","[","0","]","+","u_distortion_params","[","1","]",")",";","if","(","length","(","u_chromatic_aberration_coefs",")",">","0.0",")","{","Nd","=","Nc","*","(","1.0","+","u_chromatic_aberration_coefs","[","0","]","+","Nb","*","u_chromatic_aberration_coefs","[","1","]",")","+","MZ",";","Ne","=","Nc","+","MZ",";","Nf","=","Nc","*","(","1.0","+","u_chromatic_aberration_coefs","[","2","]","+","Nb","*","u_chromatic_aberration_coefs","[","3","]",")","+","MZ",";","if","(","clamp","(","Nf",",","0.0",",","1.0",")","!=","Nf",")","{","gl_FragColor","=","vec4","(","0.0",")",";","}","else","{","Na","=","texture2D","(","M_",",","Ne",")",";","gl_FragColor","[","0","]","=","texture2D","(","M_",",","Nd",")",".","x",";","gl_FragColor","[","1","]","=","Na",".","y",";","gl_FragColor","[","2","]","=","texture2D","(","M_",",","Nf",")",".","z",";","gl_FragColor","[","3","]","=","Na",".","w",";","}","}","else","{","Nc","+=","MZ",";","if","(","clamp","(","Nc",",","0.0",",","1.0",")","!=","Nc",")","{","gl_FragColor","=","vec4","(","0.0",")",";","}","else","{","gl_FragColor","=","texture2D","(","M_",",","Nc",")",";","}","}","}"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Nh",",","Ni",";","mat3","Nj",",","Nk",";","vec3","Nl",",","Nm",";","vec4","Nn",",","Ou",";"]},{type:"condition",parts:[{type:"if",expression:["ANAGLYPH"],group:{type:"group",parts:[{type:"textline",tokens:["Nn","=","texture2D","(","u_sampler_left",",","bM",")",";","Ou","=","texture2D","(","u_sampler_right",",","bM",")",";","Nl","=","vec3","(","Nn","[","0","]",",","Nn","[","1","]",",","Nn","[","2","]",")",";","br","(","Nl",")",";","Nm","=","vec3","(","Ou","[","0","]",",","Ou","[","1","]",",","Ou","[","2","]",")",";","br","(","Nm",")",";","Nj","=","mat3","(","0.437",",","-","0.062",",","-","0.048",",","0.449",",","-","0.062",",","-","0.050",",","0.164",",","-","0.024",",","-","0.017",")",";","Nk","=","mat3","(","-","0.011",",","0.377",",","-","0.026",",","-","0.032",",","0.761",",","-","0.093",",","-","0.007",",","0.009",",","1.234",")",";","Nm","=","clamp","(","Nj","*","Nl",",","0.0",",","1.0",")","+","clamp","(","Nk","*","Nm",",","0.0",",","1.0",")",";","bu","(","Nm",")",";","gl_FragColor","=","vec4","(","Nm",",","Nn","[","3","]","+","Ou","[","3","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_enable_hmd_stereo","!=","0",")","{","if","(","bM","[","0","]","<","0.5",")","{","Nh","=","vec2","(","2.0","*","bM","[","0","]",",","bM","[","1","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_DISTORTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_sampler_left",",","Nh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ni","=","vec2","(","0.5","-","u_distortion_params","[","3","]",",","u_distortion_params","[","2","]",")",";","Ng","(","Nh",",","Ni",",","u_sampler_left",")",";"]}]}}]},{type:"textline",tokens:["}","else","{","Ni","=","vec2","(","2.0","*","(","bM","[","0","]","-","0.5",")",",","bM","[","1","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_DISTORTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_sampler_right",",","Ni",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nh","=","vec2","(","0.5","+","u_distortion_params","[","3","]",",","u_distortion_params","[","2","]",")",";","Ng","(","Ni",",","Nh",",","u_sampler_right",")",";"]}]}}]},{type:"textline",tokens:["}","}","else","{","gl_FragColor","=","texture2D","(","u_sampler_left",",","bM",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","bM",";","void","main","(",")","{","vec2","MU",";","vec4","MZ",",","M_",";","float","Na",";","Na","=","texture2D","(","u_depth",",","bM",")",".","x",";","MZ","=","vec4","(","bM","*","2.0","-","1.0",",","2.0","*","Na","-","1.0",",","1.0",")",";","M_","=","u_view_proj_inverse","*","MZ",";","M_","=","M_","/","M_",".","w",";","M_","=","u_view_proj_prev","*","M_",";","M_","/=","M_",".","w",";","MU","=","(","MZ",".","xy","-","M_",".","xy",")","/","4.0","+","0.5",";","MU","=","clamp","(","MU",",","0.0",",","1.0",")",";","gl_FragColor","=","V","(","MU",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","a","=","0.0",";","float","b","=","1.0",";","struct","c","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","f","(","vec3","d",",","vec3","e",")","{","return","any","(","lessThan","(","abs","(","d","-","e",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","i","(","in","vec4","g",",","in","vec3","h",")","{","return","h","+","2.0","*","cross","(","g",".","xyz",",","cross","(","g",".","xyz",",","h",")","+","g",".","w","*","h",")",";","}","vec4","k","(","in","vec4","j",")","{","return","vec4","(","-","j",".","xyz",",","j",".","w",")","/","dot","(","j",",","j",")",";","}","vec3","p","(","vec4","l",",","vec4","m",",","vec4","n",")","{","vec3","o",";","o","=","n",".","xyz","*","l",".","w",";","o","=","i","(","m",",","o",")",";","o","+=","l",".","xyz","*","n",".","w",";","return","o",";","}","vec3","v","(","vec4","q",",","vec4","r",",","vec4","s",")","{","vec4","t",";","vec3","u",";","u","=","s",".","xyz","-","q",".","xyz","*","s",".","w",";","t","=","k","(","r",")",";","u","=","i","(","t",",","u",")",";","u","/=","q",".","w",";","return","u",";","}","mat4","w","(",")","{","return","mat4","(","b",",","a",",","a",",","a",",","a",",","b",",","a",",","a",",","a",",","a",",","b",",","a",",","a",",","a",",","a",",","b",")",";","}","mat4","y","(","float","x",")","{","return","mat4","(","b",",","a",",","a",",","a",",","a",",","cos","(","x",")",",","sin","(","x",")",",","a",",","a",",","-","sin","(","x",")",",","cos","(","x",")",",","a",",","a",",","a",",","a",",","b",")",";","}","mat4","A","(","float","z",")","{","return","mat4","(","cos","(","z",")",",","a",",","-","sin","(","z",")",",","a",",","a",",","b",",","a",",","a",",","sin","(","z",")",",","a",",","cos","(","z",")",",","a",",","a",",","a",",","a",",","b",")",";","}","mat4","C","(","float","B",")","{","return","mat4","(","cos","(","B",")",",","sin","(","B",")",",","a",",","a",",","-","sin","(","B",")",",","cos","(","B",")",",","a",",","a",",","a",",","a",",","b",",","a",",","a",",","a",",","a",",","b",")",";","}","c","E","(","in","c","D",")","{","return","c","(","D",".","a",",","D",".","b",",","normalize","(","D",".","c",")",",","normalize","(","D",".","d",")",",","normalize","(","D",".","e",")",",","D",".","f",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","L","(","vec4","F",")","{","vec3","G",";","float","H",",","I",",","J",";","H","=","F",".","x",";","I","=","F",".","y",";","J","=","F",".","w",";","G",".","x","=","(","H","+","J",")","/","2.0",";","G",".","y","=","(","I","+","J",")","/","2.0",";","G",".","z","=","J",";","return","G",";","}"]}]}}]},{type:"textline",tokens:["mat4","O","(","mat3","M",")","{","mat4","N",";","N","[","0","]","[","0","]","=","(","b","-","(","M","[","1","]","[","2","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")","+","M","[","2","]","[","0","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")",")","*","M","[","1","]","[","0","]",";","N","[","0","]","[","1","]","=","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")","+","M","[","2","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")","*","M","[","1","]","[","0","]",";","N","[","0","]","[","2","]","=","(","M","[","1","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","-","M","[","2","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")",")","*","M","[","1","]","[","0","]",";","N","[","0","]","[","3","]","=","a",";","N","[","1","]","[","0","]","=","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")","-","M","[","2","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")","*","M","[","1","]","[","0","]",";","N","[","1","]","[","1","]","=","(","b","-","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")","+","M","[","2","]","[","0","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")",")","*","M","[","1","]","[","0","]",";","N","[","1","]","[","2","]","=","(","M","[","1","]","[","2","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","+","M","[","2","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")",")","*","M","[","1","]","[","0","]",";","N","[","1","]","[","3","]","=","a",";","N","[","2","]","[","0","]","=","(","M","[","1","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","+","M","[","2","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")",")","*","M","[","1","]","[","0","]",";","N","[","2","]","[","1","]","=","(","M","[","1","]","[","2","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","-","M","[","2","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")",")","*","M","[","1","]","[","0","]",";","N","[","2","]","[","2","]","=","(","b","-","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")","+","M","[","1","]","[","2","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")",")",")","*","M","[","1","]","[","0","]",";","N","[","2","]","[","3","]","=","a",";","N","[","3","]","[","0","]","=","M","[","0","]","[","0","]",";","N","[","3","]","[","1","]","=","M","[","0","]","[","1","]",";","N","[","3","]","[","2","]","=","M","[","0","]","[","2","]",";","N","[","3","]","[","3","]","=","1.0",";","return","N",";","}"]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV_ORCO",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["3"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["3"]},{type:"define",name:"NO_SHADOWS",tokens:["1"]},{type:"define",name:"SHADOW_CASTING",tokens:["2"]},{type:"define",name:"SHADOW_MASK_GENERATION",tokens:["3"]},{type:"define",name:"SHADOW_MAPPING_OPAQUE",tokens:["4"]},{type:"define",name:"SHADOW_MAPPING_BLEND",tokens:["5"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"SPECULAR_BLINN",tokens:["4"]},{type:"define",name:"SPECULAR_TOON",tokens:["5"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]},{type:"define",name:"DIFFUSE_MINNAERT",tokens:["4"]},{type:"define",name:"DIFFUSE_TOON",tokens:["5"]},{type:"define",name:"MAPPING_TYPE_TEXTURE",tokens:["0.0"]},{type:"define",name:"MAPPING_TYPE_POINT",tokens:["1.0"]},{type:"define",name:"MAPPING_TYPE_VECTOR",tokens:["2.0"]},{type:"define",name:"MAPPING_TYPE_NORMAL",tokens:["3.0"]},{type:"define",name:"MIX",tokens:["0"]},{type:"define",name:"ADD",tokens:["1"]},{type:"define",name:"SUBTRACT",tokens:["2"]},{type:"define",name:"MULTIPLY",tokens:["3"]},{type:"define",name:"SCREEN",tokens:["4"]},{type:"define",name:"OVERLAY",tokens:["5"]},{type:"define",name:"DIFFERENCE",tokens:["6"]},{type:"define",name:"DIVIDE",tokens:["7"]},{type:"define",name:"DARKEN",tokens:["8"]},{type:"define",name:"LIGHTEN",tokens:["9"]},{type:"define",name:"HUE",tokens:["10"]},{type:"define",name:"SATURATION",tokens:["11"]},{type:"define",name:"VALUE",tokens:["12"]},{type:"define",name:"COLOR",tokens:["13"]},{type:"define",name:"SOFT_LIGHT",tokens:["14"]},{type:"define",name:"LINEAR_LIGHT",tokens:["15"]},{type:"define",name:"REFL_NONE",tokens:["0"]},{type:"define",name:"REFL_MIRRORMAP",tokens:["1"]},{type:"define",name:"REFL_PLANE",tokens:["2"]},{type:"define",name:"REFL_CUBE",tokens:["3"]},{type:"define",name:"INVERSE_QUADRATIC",tokens:["0"]},{type:"define",name:"LINEAR",tokens:["1"]},{type:"define",name:"QUADRATIC",tokens:["2"]},{type:"define",name:"HEMI",tokens:["1"]},{type:"define",name:"SPOT",tokens:["2"]},{type:"define",name:"POINT",tokens:["3"]},{type:"define",name:"SUN",tokens:["4"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","P","=","255.0",";","float","Q","=","0.0",";","float","R","=","1.0",";","vec4","V","(","const","in","float","S",")","{","vec4","T",",","U",";","T","=","vec4","(","P","*","P","*","P",",","P","*","P",",","P",",","R",")",";","U","=","vec4","(","Q",",","R","/","P",",","R","/","P",",","R","/","P",")",";","T","=","fract","(","S","*","T",")",";","T","-=","T",".","xxyz","*","U",";","return","T",";","}","float","Z","(","const","in","vec4","W",")","{","vec4","X",";","float","Y",";","X","=","vec4","(","R","/","(","P","*","P","*","P",")",",","R","/","(","P","*","P",")",",","R","/","P",",","R",")",";","Y","=","dot","(","W",",","X",")",";","return","Y",";","}","vec4","V","(","const","in","vec2","_",")","{","vec4","aa",";","vec2","ab",",","ac",";","ab","=","vec2","(","P",",","R",")",";","ac","=","vec2","(","Q",",","R","/","P",")",";","aa","=","fract","(","_",".","xxyy","*","ab",".","xyxy",")",";","aa","-=","aa",".","xxzz","*","ac",".","xyxy",";","if","(","_",".","r","==","R",")","aa",".","rg","=","vec2","(","Q",",","R",")",";","if","(","_",".","g","==","R",")","aa",".","ba","=","vec2","(","Q",",","R",")",";","return","aa",";","}","vec2","ag","(","const","in","vec4","ad",")","{","vec2","ae",",","af",";","af","=","vec2","(","R","/","P",",","R",")",";","ae",".","r","=","dot","(","ad",".","rg",",","af",")",";","ae",".","g","=","dot","(","ad",".","ba",",","af",")",";","return","ae",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","ah","=","0.0",";","float","ai","=","1.0",";","vec4","ak","(","vec4","aj",")","{","return","aj","-","floor","(","aj","*","(","ai","/","289.0",")",")","*","289.0",";","}","vec3","ak","(","vec3","al",")","{","return","al","-","floor","(","al","*","(","ai","/","289.0",")",")","*","289.0",";","}","vec2","ak","(","vec2","am",")","{","return","am","-","floor","(","am","*","(","ai","/","289.0",")",")","*","289.0",";","}","vec4","ao","(","vec4","an",")","{","return","an","-","floor","(","an","*","(","ai","/","7.0",")",")","*","7.0",";","}","vec4","aq","(","vec4","ap",")","{","return","ak","(","(","34.0","*","ap","+","5.0",")","*","ap",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","ay","(","vec2","ar",")","{","vec4","as",",","at",",","au",",","av",";","vec2","aw",",","ax",";","aw","=","ak","(","floor","(","ar",")",")",";","ax","=","fract","(","ar",")",";","as","=","ax",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","at","=","ax",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","au","=","aq","(","aw",".","x","+","vec4","(","ah",",","ai",",","ah",",","ai",")",")",";","au","=","aq","(","au","+","aw",".","y","+","vec4","(","ah",",","ah",",","ai",",","ai",")",")",";","av","=","ao","(","au",")","*","K","+","K2",";","au","=","ao","(","floor","(","au","*","K",")",")","*","K","+","K2",";","av","=","as","+","JITTER","*","av",";","au","=","at","+","JITTER","*","au",";","au","=","av","*","av","+","au","*","au",";"]},{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"textline",tokens:["au",".","xy","=","min","(","au",".","xy",",","au",".","zw",")",";","au",".","x","=","min","(","au",".","x",",","au",".","y",")",";","return","au",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["au",".","xy","=","(","au",".","x","<","au",".","y",")","?","au",".","xy",":","au",".","yx",";","au",".","xz","=","(","au",".","x","<","au",".","z",")","?","au",".","xz",":","au",".","zx",";","au",".","xw","=","(","au",".","x","<","au",".","w",")","?","au",".","xw",":","au",".","wx",";","au",".","y","=","min","(","au",".","y",",","au",".","z",")",";","au",".","y","=","min","(","au",".","y",",","au",".","w",")",";","return","sqrt","(","au",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","aH","(","vec2","az",",","float","aA",")","{","vec4","aB",",","aC",",","aD",",","aE",";","vec2","aF",",","aG",";","aF","=","ak","(","floor","(","az",")",")",";","aG","=","fract","(","az",")",";","aB","=","aG",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","aC","=","aG",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","aD","=","aq","(","aF",".","x","+","vec4","(","ah",",","ai",",","ah",",","ai",")",")",";","aD","=","aq","(","aD","+","aF",".","y","+","vec4","(","ah",",","ah",",","ai",",","ai",")",")",";","aE","=","ao","(","aD",")","*","K","+","K2",";","aD","=","ao","(","floor","(","aD","*","K",")",")","*","K","+","K2",";","aE","=","aB","+","JITTER","*","aE",";","aD","=","aC","+","JITTER","*","aD",";","aC","=","aE","*","aE","+","aD","*","aD",";","aE","+=","aA",";","aD","+=","aA",";","aB","=","aE","*","aE","+","aD","*","aD",";","aE","+=","aA",";","aD","+=","aA",";","aD","=","aE","*","aE","+","aD","*","aD",";","aC",".","xy","=","min","(","aC",".","xy",",","aC",".","zw",")",";","aC",".","x","=","min","(","aC",".","x",",","aC",".","y",")",";","aB",".","xy","=","min","(","aB",".","xy",",","aB",".","zw",")",";","aB",".","x","=","min","(","aB",".","x",",","aB",".","y",")",";","aD",".","xy","=","min","(","aD",".","xy",",","aD",".","zw",")",";","aD",".","x","=","min","(","aD",".","x",",","aD",".","y",")",";","return","vec3","(","aC",".","x",",","aB",".","x",",","aD",".","x",")",";","}","vec3","aJ","(","vec3","aI",")","{","return","ak","(","(","(","aI","*","34.0",")","+","ai",")","*","aI",")",";","}","float","aU","(","vec2","aK",")","{","vec3","aL",",","aM",",","aN",",","aO",";","vec4","aP",";","vec2","aQ",",","aR",",","aS",";","const","vec4","aT","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","aQ","=","floor","(","aK","+","dot","(","aK",",","aT",".","yy",")",")",";","aR","=","aK","-","aQ","+","dot","(","aQ",",","aT",".","xx",")",";","aS","=","(","aR",".","x",">","aR",".","y",")","?","vec2","(","ai",",","ah",")",":","vec2","(","ah",",","ai",")",";","aP","=","aR",".","xyxy","+","aT",".","xxzz",";","aP",".","xy","-=","aS",";","aQ","=","ak","(","aQ",")",";","aL","=","aJ","(","aJ","(","aQ",".","y","+","vec3","(","ah",",","aS",".","y",",","ai",")",")","+","aQ",".","x","+","vec3","(","ah",",","aS",".","x",",","ai",")",")",";","aM","=","max","(","0.5","-","vec3","(","dot","(","aR",",","aR",")",",","dot","(","aP",".","xy",",","aP",".","xy",")",",","dot","(","aP",".","zw",",","aP",".","zw",")",")",",","ah",")",";","aM","=","aM","*","aM",";","aM","=","aM","*","aM",";","aL","=","2.0","*","fract","(","aL","*","aT",".","www",")","-","ai",";","aN","=","abs","(","aL",")","-","0.5",";","aO","=","floor","(","aL","+","0.5",")",";","aO","=","aL","-","aO",";","aM","*=","1.79284291400159","-","0.85373472095314","*","(","aO","*","aO","+","aN","*","aN",")",";","aL",".","x","=","aO",".","x","*","aR",".","x","+","aN",".","x","*","aR",".","y",";","aL",".","yz","=","aO",".","yz","*","aP",".","xz","+","aN",".","yz","*","aP",".","yw",";","return","130.0","*","dot","(","aM",",","aL",")",";","}","vec2","aY","(","vec2","aV",")","{","float","aW",",","aX",";","aW","=","dot","(","aV",",","vec2","(","12.9898",",","78.233",")",")",";","aX","=","dot","(","aV",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","aW","=","fract","(","sin","(","aW",")","*","43758.5453",")","*","2.0","-","ai",";","aX","=","fract","(","sin","(","aX",")","*","43758.5453",")","*","2.0","-","ai",";","return","vec2","(","aW",",","aX",")",";","}"]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"var",name:"SUN_NUM",tokens:["0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","bp","(","inout","vec3","aZ",",","float","a_",",","float","ba",",","vec4","bb",",","vec3","bc",",","vec3","bd",",","vec3","be",",","vec4","bf",",","vec3","bg",",","float","bh",")","{","float","bi",",","bj",",","bk",";","vec2","bl",",","bm",";","vec3","bn",";","vec4","bo",";","if","(","bh",">","CAUSTICS_VIEW_DISTANCE",")","return",";","bo","=","bf",";","bn","=","bg","+","bc",";","bn",".","xz","=","10.0","*","sin","(","0.1","*","bn",".","xz",")",";","bn","=","bn","+","2.0","*","cross","(","-","bo",".","xyz",",","cross","(","-","bo",".","xyz",",","bn",")","+","bo",".","w","*","bn",")",";","bl","=","bn",".","xz",";","bn","=","bd",";","bi","=","max","(","dot","(","bc",",","bn",")",",","0.0",")",";","bj","=","0.025",";","bm","=","CAUST_SPEED","*","ba",";","bl",".","s","+=","0.25","*","sin","(","dot","(","bg","+","ba",",","vec3","(","1.0",")",")",")",";","bl",".","t","+=","0.35","*","(","-","sin","(","dot","(","bg","-","ba",",","vec3","(","-","0.7",")",")",")",")",";","bl",".","st","+=","0.15","*","cos","(","4.0","*","a_","-","bm",".","x",")","+","1.5","*","sin","(","a_","-","0.3","*","bm",".","y",")",";","bk","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","a_",",","0.0",")",")",";","bn","=","aH","(","(","bl","/","bk",")",",","bj",")",";","bn","*=","CAUST_BRIGHT",";","bn","*=","bn",";","bj","=","min","(","0.25","*","a_",",","-","a_",")","+","1.0",";","bj","=","max","(","bj",",","0.0",")",";","bi","=","bb","[","SUN_NUM","]","*","bi",";","bk","=","max","(","sign","(","a_",")",",","0.0",")",";","bi","=","bi","+","max","(","0.5","*","sign","(","-","bc",".","y",")","*","bk",",","0.0",")",";","bi","=","min","(","bi",",","1.0",")",";","aZ","+=","be","*","bn","*","bj","*","bi",";","}"]}]},exports["include/color_util.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","br","(","inout","vec3","bq",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["bq","=","max","(","vec3","(","0.0",")",",","bq",")",";","bq","=","pow","(","bq",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","br","(","inout","float","bs",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["bs","=","pow","(","max","(","0.0",",","bs",")",",","2.2",")",";"]}]}}]},{type:"textline",tokens:["}","void","bu","(","inout","vec3","bt",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["bt","=","max","(","vec3","(","0.0",")",",","bt",")",";","bt","=","pow","(","bt",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","bx","(","inout","vec3","bv",",","in","float","bw",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bv","=","bv","*","bw",";"]}]}}]},{type:"textline",tokens:["}","float","bB","(","vec4","by",")","{","float","bz",";","vec3","bA",";","bA","=","vec3","(","0.299",",","0.587",",","0.114",")",";","bz","=","dot","(","by",".","rgb",",","bA",")",";","return","bz",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"CSM_BLEND_BETWEEN_CASCADES",tokens:["1.0"]},{type:"var",name:"CSM_FADE_LAST_CASCADE",tokens:["1.0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","bN","=","0.1",";","const","float","bO","=","0.1",";","const","float","bP","=","-","0.01",";","const","float","bQ","=","0.05",";","vec4","bR","=","vec4","(","0.14383161",",","0.34495938",",","-","0.38277543",",","-","0.26496911",")",";","vec4","bS","=","vec4","(","0.53742981",",","0.19984126",",","0.79197514",",","-","0.094184101",")",";","vec4","bT","=","vec4","(","-","0.94201624",",","-","0.91588581",",","-","0.2418884",",","0.44323325",")",";","vec4","bU","=","vec4","(","-","0.81544232",",","0.94558609",",","-","0.81409955",",","0.97484398",")",";","vec4","bV","=","vec4","(","-","0.1410079",",","0.2938776",",","0.27676845",",","-","0.41893023",")",";","vec4","bW","=","vec4","(","-","0.4737342",",","0.78641367",",","0.19090188",",","-","0.9293887",")",";","vec4","bX","=","vec4","(","-","0.39906216",",","0.45771432",",","0.99706507",",","-","0.97511554",")",";","vec4","bY","=","vec4","(","-","0.87912464",",","-","0.76890725",",","0.9143759",",","0.7564837",")",";","bool","ca","(","vec2","bZ",",","float","b_",")","{","return","all","(","lessThanEqual","(","bZ",",","vec2","(","1.0","+","b_",")",")",")","&&","all","(","greaterThanEqual","(","bZ",",","vec2","(","0.0","-","b_",")",")",")",";","}","float","cj","(","float","cb",",","float","cc",",","mat2","cd",",","vec3","ce",",","float","cf",",","PRECISION","sampler2D","cg",")","{","vec2","ch",",","ci",";","ci",".","x","=","cb",";","ci",".","y","=","cc",";","ci","=","cd","*","ci",";","ch","=","ce",".","xy","+","ci","*","cf","/","SHADOW_TEX_RES",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","ca","(","ch",",","bP",")",")","return","1.0",";","else"]}]}}]},{type:"textline",tokens:["return","step","(","ce",".","z",",","texture2D","(","cg",",","ch",")",".","r",")",";","}","float","cs","(","vec3","ck",",","PRECISION","sampler2D","cl",",","float","cm",")","{","mat2","cn",";","float","co",",","cp",",","cq",";","co","=","0.0",";","ck",".","z","=","clamp","(","ck",".","z",",","0.0",",","1.0",")",";","cp","=","aY","(","ck",".","xy",")",".","x","*","M_PI",";","cq","=","cos","(","cp",")",";","cp","=","sin","(","cp",")",";","cn","=","mat2","(","cq",",","cp",",","-","cp",",","cq",")",";","for","(","int","cr","=","0",";","cr","<","4",";","cr","++",")","{","co","+=","cj","(","bR","[","cr","]",",","bV","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","co","+=","cj","(","bS","[","cr","]",",","bW","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","co","+=","cj","(","bT","[","cr","]",",","bX","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","co","+=","cj","(","bU","[","cr","]",",","bY","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","}","return","clamp","(","co","/","16.0",",","0.0",",","1.0",")",";","}","float","cH","(","vec3","ct",",","PRECISION","sampler2D","cu",",","vec3","cv",",","PRECISION","sampler2D","cw",",","float","cx",",","float","cy",",","float","cz",")","{","mat2","cA",";","float","cB",",","cC",",","cD",",","cE",";","ct",".","z","=","clamp","(","ct",".","z",",","0.0",",","1.0",")",";","cv",".","z","=","clamp","(","cv",".","z",",","0.0",",","1.0",")",";","cB","=","0.0",";","cC","=","0.0",";","cD","=","aY","(","ct",".","xy",")",".","x","*","M_PI",";","cE","=","cos","(","cD",")",";","cD","=","sin","(","cD",")",";","cA","=","mat2","(","cE",",","cD",",","-","cD",",","cE",")",";","for","(","int","cF","=","0",";","cF","<","4",";","cF","++",")","{","cB","+=","cj","(","bR","[","cF","]",",","bV","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","cB","+=","cj","(","bS","[","cF","]",",","bW","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","cB","+=","cj","(","bT","[","cF","]",",","bX","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","cB","+=","cj","(","bU","[","cF","]",",","bY","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","}","for","(","int","cG","=","0",";","cG","<","4",";","cG","++",")","{","cC","+=","cj","(","bR","[","cG","]",",","bV","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","cC","+=","cj","(","bS","[","cG","]",",","bW","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","cC","+=","cj","(","bT","[","cG","]",",","bX","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","cC","+=","cj","(","bU","[","cG","]",",","bY","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","}","cB","=","mix","(","cB",",","cC",",","cz",")",";","cB","/=","16.0",";","return","clamp","(","cB",",","0.0",",","1.0",")",";","}","float","cL","(","vec2","cI",")","{","float","cJ",",","cK",";","cJ","=","min","(","cI",".","x",",","cI",".","y",")",";","cK","=","min","(","1.0","-","cI",".","x",",","1.0","-","cI",".","y",")",";","return","min","(","cJ",",","cK",")",";","}","float","cO","(","float","cM",",","float","cN",")","{","if","(","cN",">=","0.0","&&","cN","<=","bO",")","cM","=","(","cM","-","1.0",")","/","bO","*","cN","+","1.0",";","return","cM",";","}","float","cZ","(","vec3","cP",",","vec3","cQ",",","PRECISION","sampler2D","cR",",","PRECISION","sampler2D","cS",",","float","cT",",","float","cU",",","float","cV",",","float","cW",")","{","float","cX",",","cY",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_BLEND_BETWEEN_CASCADES"],group:{type:"group",parts:[{type:"textline",tokens:["cY","=","cL","(","cP",".","xy",")",";","if","(","-","cW",">","cV","&&","cY",">=","0.0","&&","cY","<=","bN","&&","ca","(","cQ",".","xy",",","0.0",")",")","{","cY","=","1.0","-","cY","/","bN",";","cX","=","cH","(","cP",",","cR",",","cQ",",","cS",",","cT",",","cU",",","cY",")",";","}","else"]}]}}]},{type:"textline",tokens:["cX","=","cs","(","cP",",","cR",",","cT",")",";","return","cX",";","}","float","dg","(","vec3","c_",",","PRECISION","sampler2D","da",",","float","db",",","float","dc",",","float","dd",")","{","float","de",",","df",";","de","=","cs","(","c_",",","da",",","db",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_FADE_LAST_CASCADE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","-","dd",">","dc",")","{","df","=","cL","(","c_",".","xy",")",";","de","=","cO","(","de",",","df",")",";","}"]}]}}]},{type:"textline",tokens:["return","de",";","}","vec4","dr","(","float","dh",")","{","vec3","di",",","dj",",","dk",",","dl",";","float","dm",",","dn",",","dp",",","dq",";","dm","=","1.0",";","di","=","bI",".","xyz","/","bI",".","w",";","if","(","bI",".","w","<","0.0",")","di",".","z","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dj","=","bJ",".","xyz","/","bJ",".","w",";","if","(","bJ",".","w","<","0.0",")","dj",".","z","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dk","=","bK",".","xyz","/","bK",".","w",";","if","(","bK",".","w","<","0.0",")","dk",".","z","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dl","=","bL",".","xyz","/","bL",".","w",";","if","(","bL",".","w","<","0.0",")","dl",".","z","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ca","(","di",".","xy",",","0.0",")",")","{","dm","=","cZ","(","di",",","dj",",","u_shadow_map0",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","0","]",",","dh",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","ca","(","di",".","xy",",","bQ",")",")","{","dm","=","dg","(","di",",","u_shadow_map0",",","u_pcf_blur_radii","[","0","]",",","u_csm_center_dists","[","0","]",",","dh",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ca","(","dj",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["dm","=","cZ","(","dj",",","dk",",","u_shadow_map1",",","u_shadow_map2",",","u_pcf_blur_radii","[","1","]",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","1","]",",","dh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dm","=","dg","(","dj",",","u_shadow_map1",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","1","]",",","dh",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ca","(","dk",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["dm","=","cZ","(","dk",",","dl",",","u_shadow_map2",",","u_shadow_map3",",","u_pcf_blur_radii","[","2","]",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","2","]",",","dh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dm","=","dg","(","dk",",","u_shadow_map2",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","2","]",",","dh",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ca","(","dl",".","xy",",","0.0",")",")","dm","=","dg","(","dl",",","u_shadow_map3",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","3","]",",","dh",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dn","=","cs","(","dj",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dn","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dp","=","cs","(","dk",",","u_shadow_map2",",","u_pcf_blur_radii","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dp","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dq","=","cs","(","dl",",","u_shadow_map3",",","u_pcf_blur_radii","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dq","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","vec4","(","dm",",","dn",",","dp",",","dq",")",";","}"]}]}}]},{type:"textline",tokens:["vec4","du","(","inout","vec3","ds",")","{","vec4","dt",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dt","=","texture2DProj","(","u_shadow_mask",",","bG",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",3,{type:"l_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ds","*=","dt",".","a",";"]}]}}]},{type:"textline",tokens:["return","dt",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dt","=","dr","(","bD",".","z",")",";","return","dt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec4","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","dB","(","in","vec3","dv",",","vec3","dw",",","float","dx",",","float","dy",")","{","float","dz",";","vec3","dA",";","dA","=","normalize","(","dw","+","dv",")",";","dz","=","1.0","-","dot","(","dv",",","dA",")",";","dz","=","dy","+","(","1.0","-","dy",")","*","pow","(","dz",",","dx",")",";","return","dz",";","}","void","dP","(","inout","vec3","dC",",","vec3","dD",",","vec3","dE",",","float","dF",",","mat4","dG",")","{","vec2","dH",",","dI",";","float","dJ",",","dK",",","dL",";","vec3","dM",",","dN",",","dO",";","dM","=","reflect","(","-","dD",",","dE",")",";","dJ","=","u_fresnel_params","[","2","]",";","dK","=","u_fresnel_params","[","3","]",";","dL","=","1.0",";","if","(","dJ","!=","0.0",")","dL","=","dB","(","dD",",","dM",",","dJ",",","dK",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dN","=","textureCube","(","u_cube_reflection",",","dM",")",".","xyz",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["dO","=","u_refl_plane",".","xyz","*","dot","(","dE",",","u_refl_plane",".","xyz",")",";","dO","=","dE","-","dO",";","dH","=","(","dG","*","vec4","(","dO",",","0.0",")",")",".","xy",";","dI","=","bG",".","xy","/","bG",".","z",";","dI","+=","dH","*","REFL_BUMP",";","dN","=","texture2D","(","u_plane_reflection",",","dI",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dN","=","vec3","(","1.0",")",";","dF","=","0.0",";"]}]}}]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dN","=","textureCube","(","u_mirrormap",",","dM",")",".","xyz",";","dF","=","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["br","(","dN",".","rgb",")",";","dC","=","mix","(","dC",",","dN",",","dF","*","dL",")",";","}"]}]}}]}]},exports["include/environment.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec3","dS","(","vec3","dQ",")","{","float","dR",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["return","textureCube","(","u_sky_texture",",","dQ",")",".","rgb",";"]}]}},{type:"elif",expression:["SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["dR","=","0.5","*","dQ",".","y","+","0.5",";","return","mix","(","u_horizon_color",",","u_zenith_color",",","dR",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["float","dY","(","in","float","dT",",","inout","vec2","dU",",","in","vec2","dV",")","{","float","dW",";","vec4","dX",";","dX","=","texture2D","(","u_scene_depth",",","dU",")",";","dW","=","Z","(","dX",")",";","if","(","dW","<","bH",")","{","dU","=","dV",";","return","dT",";","}","else","{","return","dW",";","}","return","dT",";","}"]}]}}]},{type:"textline",tokens:["vec3","ef","(","in","vec3","dZ",",","in","vec2","d_",")","{","vec3","ea",";","float","eb",";","vec4","ec",";","vec2","ed",",","ee",";","ed","=","dZ",".","xy","/","dZ",".","z",";","ee","=","ed","+","d_",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["ec","=","texture2DProj","(","u_scene_depth",",","dZ",")",";","eb","=","Z","(","ec",")",";","dY","(","eb",",","ee",",","ed",")",";"]}]}}]},{type:"textline",tokens:["ea","=","texture2D","(","u_refractmap",",","ee",")",".","rgb",";","br","(","ea",")",";","return","ea",";","}"]}]}}]}]},exports["include/nodes.glslf"] = {type:"group",parts:[{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NODE_TEX_ROW",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eg",";"]}]}}]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","eh","=","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","el","(","in","vec3","ei",",","in","float","ej",")","{","vec3","ek",";","ek","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["ek","=","ef","(","bG",",","ei",".","xy","*","ej",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ek","=","texture2D","(","u_refractmap",",","bG",".","xy","/","bG",".","z",")",".","rgb",";","br","(","ek",")",";"]}]}}]},{type:"textline",tokens:["return","ek",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eq","(","vec3","em",")","{","float","en",",","eo",";","vec4","ep",";","ep","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","ep","=","mix","(","vec4","(","em",".","bg",",","ep",".","wz",")",",","vec4","(","em",".","gb",",","ep",".","xy",")",",","step","(","em",".","b",",","em",".","g",")",")",";","ep","=","mix","(","vec4","(","ep",".","xyw",",","em",".","r",")",",","vec4","(","em",".","r",",","ep",".","yzx",")",",","step","(","ep",".","x",",","em",".","r",")",")",";","en","=","ep",".","x","-","min","(","ep",".","w",",","ep",".","y",")",";","eo","=","1.0e-10",";","return","vec3","(","abs","(","ep",".","z","+","(","ep",".","w","-","ep",".","y",")","/","(","6.0","*","en","+","eo",")",")",",","en","/","(","ep",".","x","+","eo",")",",","ep",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eu","(","vec3","er",")","{","vec3","es",";","vec4","et",";","et","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","es","=","abs","(","fract","(","vec3","(","er",".","r",",","er",".","r",",","er",".","r",")","+","et",".","xyz",")","*","6.0","-","et",".","www",")",";","return","er",".","b","*","mix","(","et",".","xxx",",","clamp","(","es","-","et",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","er",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ew","(","vec2","ev",")","{","return","vec3","(","ev","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ey","(","vec3","ex",")","{","return","vec2","(","ex",".","xy","*","eh","+","vec2","(","eh",",","eh",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"fm",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"fn",qualifier:["float"],is_optional:true},{type:"node_out",name:"fo",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fm"],statements:[{type:"textline",tokens:["fm","=","normalize","(","fd",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fn"],statements:[{type:"textline",tokens:["fn","=","abs","(","fd",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fo"],statements:[{type:"textline",tokens:["fo","=","length","(","fd",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"fp",qualifier:["float"],is_optional:false},{type:"node_in",name:"fq",qualifier:["float"],is_optional:false},{type:"node_in",name:"fr",qualifier:["float"],is_optional:false},{type:"node_out",name:"fs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fs","=","vec3","(","fp",",","fq",",","fr",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"ft",qualifier:["float"],is_optional:false},{type:"node_in",name:"fu",qualifier:["float"],is_optional:false},{type:"node_in",name:"fv",qualifier:["float"],is_optional:false},{type:"node_out",name:"fw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fw","=","eu","(","vec3","(","ft",",","fu",",","fv",")",")",";"]}]},{type:"node",name:"EMPTY_UV",declarations:[{type:"node_out",name:"fx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fx","=","vec3","(","-","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"EMPTY_VC",declarations:[{type:"node_out",name:"fy",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fy","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"fz",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"ez",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["fz","=","ew","(","ez",")",";"]}]},{type:"node",name:"GEOMETRY_OR",declarations:[{type:"node_out",name:"fA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fA","=","2.0","*","eg","-","vec3","(","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"fB",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eA",qualifier:["varying","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fB","=","eA",";","br","(","fB",")",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"fC",qualifier:["float"],is_optional:false},{type:"node_param",name:"eB",qualifier:["varying","float"],is_optional:false}],statements:[{type:"textline",tokens:["fC","=","eB",";","br","(","fC",")",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"fD",qualifier:["float"],is_optional:false},{type:"node_out",name:"fE",qualifier:["float"],is_optional:false},{type:"node_param",name:"eC",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["fD","=","eC","[","0","]",";","fE","=","eC","[","1","]",";","br","(","fD",")",";","br","(","fE",")",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"fF",qualifier:["float"],is_optional:false},{type:"node_out",name:"fG",qualifier:["float"],is_optional:false},{type:"node_out",name:"fH",qualifier:["float"],is_optional:false},{type:"node_param",name:"eD",qualifier:["varying","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fF","=","eD","[","0","]",";","fG","=","eD","[","1","]",";","fH","=","eD","[","2","]",";","br","(","fF",")",";","br","(","fG",")",";","br","(","fH",")",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"fI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fI","=","fg",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"fJ",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["INVERT_FRONTFACING"],statements:[{type:"textline",tokens:["fJ","=","(","gl_FrontFacing",")","?","ZERO_VALUE_NODES",":","UNITY_VALUE_NODES",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["fJ","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"fK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fK","=","eM",";"]}]},{type:"node",name:"GEOMETRY_LO",declarations:[{type:"node_out",name:"fL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fL","[","0","]","=","fd","[","0","]",";","fL","[","1","]","=","fd","[","1","]",";","fL","[","2","]","=","fd","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"fM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fM","=","vec3","(","fh",".","r",",","-","fh",".","b",",","fh",".","g",")",";"]}]},{type:"node",name:"NEW_GEOMETRY",declarations:[{type:"node_out",name:"fN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fT",qualifier:["float"],is_optional:false},{type:"node_out",name:"fU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["fN","=","vec3","(","ZERO_VALUE_NODES",")",";","fO","=","vec3","(","ZERO_VALUE_NODES",")",";","fP","=","vec3","(","ZERO_VALUE_NODES",")",";","fQ","=","vec3","(","ZERO_VALUE_NODES",")",";","fR","=","vec3","(","ZERO_VALUE_NODES",")",";","fS","=","vec3","(","ZERO_VALUE_NODES",")",";","fT","=","ZERO_VALUE_NODES",";","fU","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"fV",qualifier:["float"],is_optional:false},{type:"node_in",name:"fW",qualifier:["float"],is_optional:false},{type:"node_in",name:"fX",qualifier:["float"],is_optional:false},{type:"node_in",name:"fY",qualifier:["float"],is_optional:false},{type:"node_in",name:"fZ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"f_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fj","=","eq","(","fZ",")",";","fj","[","0","]","+=","(","fV","-","eh",")",";","if","(","fj","[","0","]",">","UNITY_VALUE_NODES",")","fj","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","fj","[","0","]","<","ZERO_VALUE_NODES",")","fj","[","0","]","+=","UNITY_VALUE_NODES",";","fj","*=","vec3","(","UNITY_VALUE_NODES",",","fW",",","fX",")",";","fj","=","mix","(","vec3","(","UNITY_VALUE_NODES",")",",","mix","(","vec3","(","ZERO_VALUE_NODES",")",",","fj",",","step","(","vec3","(","ZERO_VALUE_NODES",")",",","fj",")",")",",","step","(","fj",",","vec3","(","UNITY_VALUE_NODES",")",")",")",";","f_","=","mix","(","fZ",",","eu","(","fj",")",",","fY",")",";"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"ga",qualifier:["float"],is_optional:false},{type:"node_in",name:"gb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gc","=","mix","(","gb",",","vec3","(","UNITY_VALUE_NODES",")","-","gb",",","ga",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"gd",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"ge",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gf",qualifier:["float"],is_optional:false},{type:"node_out",name:"gg",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gd"],statements:[{type:"textline",tokens:["gd","=","u_lamp_light_color_intensities","[","LAMP_INDEX","]",";"]}]}]},{type:"textline",tokens:["fe","=","u_lamp_light_factors","[","LAMP_INDEX","]",";","fj","=","u_lamp_light_directions","[","LAMP_INDEX","]",";","fk","=","u_lamp_light_positions","[","LAMP_INDEX","]",";","eX","=","fe",".","z",";","if","(","eX","!=","-","UNITY_VALUE_NODES",")","{"]},{type:"textline",tokens:["ge","=","fk","-","bC",";","gf","=","length","(","ge",")",";","ge","=","normalize","(","ge",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gg"],statements:[{type:"textline",tokens:["gg","=","eX","/","(","eX","+","gf","*","gf",")",";","eX","=","fe",".","x",";","eY","=","fe",".","y",";","if","(","eX",">","-","UNITY_VALUE_NODES",")","{","eZ","=","dot","(","ge",",","fj",")",";","eZ","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","eZ","-","eX",")","/","eY",")",";","gg","*=","eZ",";","}"]}]}]},{type:"textline",tokens:["}","else","{"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ge"],statements:[{type:"textline",tokens:["ge","=","fj",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gf"],statements:[{type:"textline",tokens:["gf","=","length","(","fk","-","bC",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gg"],statements:[{type:"textline",tokens:["gg","=","UNITY_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"gh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gi",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"gj",qualifier:["float"],is_optional:true},{type:"node_param",name:"eE",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gi"],statements:[{type:"textline",tokens:["gi","=","eE",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gj"],statements:[{type:"textline",tokens:["gj","=","-","dot","(","gh",",","eE",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"gk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gl",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gl","=","-","(","eN","*","vec4","(","gk",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"BSDF_ANISOTROPIC",declarations:[{type:"node_in",name:"gm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gn",qualifier:["float"],is_optional:false},{type:"node_in",name:"go",qualifier:["float"],is_optional:false},{type:"node_in",name:"gp",qualifier:["float"],is_optional:false},{type:"node_in",name:"gq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gs","=","gm",";"]},{type:"textline",tokens:["gn",";","go",";","gp",";","gq",";","gr",";"]}]},{type:"node",name:"BSDF_DIFFUSE",declarations:[{type:"node_in",name:"gt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gu",qualifier:["float"],is_optional:false},{type:"node_in",name:"gv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gw","=","gt",";"]},{type:"textline",tokens:["gu",";","gv",";"]}]},{type:"node",name:"BSDF_GLASS",declarations:[{type:"node_in",name:"gx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gy",qualifier:["float"],is_optional:false},{type:"node_in",name:"gz",qualifier:["float"],is_optional:false},{type:"node_in",name:"gA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gB","=","gx",";"]},{type:"textline",tokens:["gy",";","gz",";","gA",";"]}]},{type:"node",name:"BSDF_GLOSSY",declarations:[{type:"node_in",name:"gC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gD",qualifier:["float"],is_optional:false},{type:"node_in",name:"gE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gF","=","gC",";"]},{type:"textline",tokens:["gD",";","gE",";"]}]},{type:"node",name:"BSDF_HAIR",declarations:[{type:"node_in",name:"gG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gH",qualifier:["float"],is_optional:false},{type:"node_in",name:"gI",qualifier:["float"],is_optional:false},{type:"node_in",name:"gJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"gK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gK","=","gG",";"]},{type:"textline",tokens:["gH",";","gI",";","gJ",";"]}]},{type:"node",name:"BSDF_TRANSPARENT",declarations:[{type:"node_in",name:"gL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gM","=","gL",";"]}]},{type:"node",name:"BSDF_TRANSLUCENT",declarations:[{type:"node_in",name:"gN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gP","=","gN",";"]},{type:"textline",tokens:["gO",";"]}]},{type:"node",name:"BSDF_REFRACTION",declarations:[{type:"node_in",name:"gQ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gR",qualifier:["float"],is_optional:false},{type:"node_in",name:"gS",qualifier:["float"],is_optional:false},{type:"node_in",name:"gT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gU","[","0","]","=","gU","[","1","]","=","gU","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["gQ",";","gR",";","gS",";","gT",";"]}]},{type:"node",name:"BSDF_TOON",declarations:[{type:"node_in",name:"gV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gW",qualifier:["float"],is_optional:false},{type:"node_in",name:"gX",qualifier:["float"],is_optional:false},{type:"node_in",name:"gY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gZ","=","gV",";"]},{type:"textline",tokens:["gW",";","gX",";","gY",";"]}]},{type:"node",name:"BSDF_VELVET",declarations:[{type:"node_in",name:"g_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ha",qualifier:["float"],is_optional:false},{type:"node_in",name:"hb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hc","=","g_",";"]},{type:"textline",tokens:["ha",";","hb",";"]}]},{type:"node",name:"SUBSURFACE_SCATTERING",declarations:[{type:"node_in",name:"hd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"he",qualifier:["float"],is_optional:false},{type:"node_in",name:"hf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hg",qualifier:["float"],is_optional:false},{type:"node_in",name:"hh",qualifier:["float"],is_optional:false},{type:"node_in",name:"hi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hj","[","0","]","=","hj","[","1","]","=","hj","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hd",";","hf",";","hg",";","hh",";","hi",";","he",";"]}]},{type:"node",name:"EMISSION",declarations:[{type:"node_in",name:"hk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hl",qualifier:["float"],is_optional:false},{type:"node_out",name:"hm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hm","=","hk",";"]},{type:"textline",tokens:["hl",";"]}]},{type:"node",name:"AMBIENT_OCCLUSION",declarations:[{type:"node_in",name:"hn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ho",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ho","[","0","]","=","ho","[","1","]","=","ho","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hn",";"]}]},{type:"node",name:"HOLDOUT",declarations:[{type:"node_out",name:"hp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hp","[","0","]","=","hp","[","1","]","=","hp","[","2","]","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"VOLUME_ABSORPTION",declarations:[{type:"node_in",name:"hq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hr",qualifier:["float"],is_optional:false},{type:"node_out",name:"hs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hs","[","0","]","=","hs","[","1","]","=","hs","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hq",";","hr",";"]}]},{type:"node",name:"VOLUME_SCATTER",declarations:[{type:"node_in",name:"ht",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hu",qualifier:["float"],is_optional:false},{type:"node_in",name:"hv",qualifier:["float"],is_optional:false},{type:"node_out",name:"hw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hw","[","0","]","=","hw","[","1","]","=","hw","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ht",";","hu",";","hv",";"]}]},{type:"node",name:"BUMP",declarations:[{type:"node_in",name:"hx",qualifier:["float"],is_optional:false},{type:"node_in",name:"hy",qualifier:["float"],is_optional:false},{type:"node_in",name:"hz",qualifier:["float"],is_optional:false},{type:"node_in",name:"hA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hB","=","hA",";"]},{type:"textline",tokens:["hx",";","hy",";","hz",";"]}]},{type:"node",name:"NORMAL_MAP",declarations:[{type:"node_in",name:"hC",qualifier:["float"],is_optional:false},{type:"node_in",name:"hD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hE","=","hD",";"]},{type:"textline",tokens:["hC",";"]}]},{type:"node",name:"VECT_TRANSFORM",declarations:[{type:"node_in",name:"hF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hG","[","0","]","=","hG","[","1","]","=","hG","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hF",";"]}]},{type:"node",name:"BLACKBODY",declarations:[{type:"node_in",name:"hH",qualifier:["float"],is_optional:false},{type:"node_out",name:"hI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hI","[","0","]","=","hI","[","1","]","=","hI","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hH",";"]}]},{type:"node",name:"WAVELENGTH",declarations:[{type:"node_in",name:"hJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"hK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hK","[","0","]","=","hK","[","1","]","=","hK","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hJ",";"]}]},{type:"node",name:"SEPXYZ",declarations:[{type:"node_in",name:"hL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hM",qualifier:["float"],is_optional:false},{type:"node_out",name:"hN",qualifier:["float"],is_optional:false},{type:"node_out",name:"hO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["hM","=","hL","[","0","]",";","hN","=","hL","[","1","]",";","hO","=","hL","[","2","]",";"]}]},{type:"node",name:"COMBXYZ",declarations:[{type:"node_in",name:"hP",qualifier:["float"],is_optional:false},{type:"node_in",name:"hQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"hR",qualifier:["float"],is_optional:false},{type:"node_out",name:"hS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hS","[","0","]","=","hP",";","hS","[","1","]","=","hQ",";","hS","[","2","]","=","hR",";"]}]},{type:"node",name:"BRIGHTCONTRAST",declarations:[{type:"node_in",name:"hT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hU",qualifier:["float"],is_optional:false},{type:"node_in",name:"hV",qualifier:["float"],is_optional:false},{type:"node_out",name:"hW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","hU","-","hV","*","eh",";","hW","=","max","(","(","UNITY_VALUE_NODES","+","hV",")","*","hT","+","eZ",",","vec3","(","ZERO_VALUE_NODES",")",")",";"]}]},{type:"node",name:"LIGHT_FALLOFF",declarations:[{type:"node_in",name:"hX",qualifier:["float"],is_optional:false},{type:"node_in",name:"hY",qualifier:["float"],is_optional:false},{type:"node_out",name:"hZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"h_",qualifier:["float"],is_optional:false},{type:"node_out",name:"ia",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["hZ","=","h_","=","ia","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hX",";","hY",";"]}]},{type:"node",name:"TEX_IMAGE",declarations:[{type:"node_in",name:"ib",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ic",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"id",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ic","[","0","]","=","ic","[","1","]","=","ic","[","2","]","=","ZERO_VALUE_NODES",";","id","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["ib",";"]}]},{type:"node",name:"TEX_ENVIRONMENT",declarations:[{type:"node_in",name:"ie",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ig",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ig","[","0","]","=","ig","[","1","]","=","ig","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ie",";"]}]},{type:"node",name:"TEX_SKY",declarations:[{type:"node_in",name:"ih",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ii",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ii","[","0","]","=","ii","[","1","]","=","ii","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ih",";"]}]},{type:"node",name:"TEX_NOISE",declarations:[{type:"node_in",name:"ij",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ik",qualifier:["float"],is_optional:false},{type:"node_in",name:"il",qualifier:["float"],is_optional:false},{type:"node_in",name:"im",qualifier:["float"],is_optional:false},{type:"node_out",name:"io",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ip",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["io","[","0","]","=","io","[","1","]","=","io","[","2","]","=","ZERO_VALUE_NODES",";","ip","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["ij",";","ik",";","il",";","im",";"]}]},{type:"node",name:"TEX_WAVE",declarations:[{type:"node_in",name:"iq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ir",qualifier:["float"],is_optional:false},{type:"node_in",name:"is",qualifier:["float"],is_optional:false},{type:"node_in",name:"it",qualifier:["float"],is_optional:false},{type:"node_in",name:"iu",qualifier:["float"],is_optional:false},{type:"node_out",name:"iv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iw",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iv","[","0","]","=","iv","[","1","]","=","iv","[","2","]","=","ZERO_VALUE_NODES",";","iw","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iq",";","ir",";","is",";","it",";","iu",";"]}]},{type:"node",name:"TEX_VORONOI",declarations:[{type:"node_in",name:"ix",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iy",qualifier:["float"],is_optional:false},{type:"node_out",name:"iz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iz","[","0","]","=","iz","[","1","]","=","iz","[","2","]","=","ZERO_VALUE_NODES",";","iA","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["ix",";","iy",";"]}]},{type:"node",name:"TEX_MUSGRAVE",declarations:[{type:"node_in",name:"iB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iC",qualifier:["float"],is_optional:false},{type:"node_in",name:"iD",qualifier:["float"],is_optional:false},{type:"node_in",name:"iE",qualifier:["float"],is_optional:false},{type:"node_in",name:"iF",qualifier:["float"],is_optional:false},{type:"node_in",name:"iG",qualifier:["float"],is_optional:false},{type:"node_in",name:"iH",qualifier:["float"],is_optional:false},{type:"node_out",name:"iI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iI","[","0","]","=","iI","[","1","]","=","iI","[","2","]","=","ZERO_VALUE_NODES",";","iJ","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iB",";","iC",";","iD",";","iE",";","iF",";","iG",";","iH",";"]}]},{type:"node",name:"TEX_GRADIENT",declarations:[{type:"node_in",name:"iK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iL","[","0","]","=","iL","[","1","]","=","iL","[","2","]","=","ZERO_VALUE_NODES",";","iM","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iK",";"]}]},{type:"node",name:"TEX_MAGIC",declarations:[{type:"node_in",name:"iN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iO",qualifier:["float"],is_optional:false},{type:"node_in",name:"iP",qualifier:["float"],is_optional:false},{type:"node_out",name:"iQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iQ","[","0","]","=","iQ","[","1","]","=","iQ","[","2","]","=","ZERO_VALUE_NODES",";","iR","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iN",";","iO",";","iP",";"]}]},{type:"node",name:"TEX_CHECKER",declarations:[{type:"node_in",name:"iS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iV",qualifier:["float"],is_optional:false},{type:"node_out",name:"iW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iW","[","0","]","=","iW","[","1","]","=","iW","[","2","]","=","ZERO_VALUE_NODES",";","iX","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iS",";","iT",";","iU",";","iV",";"]}]},{type:"node",name:"TEX_BRICK",declarations:[{type:"node_in",name:"iY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"i_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ja",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jb",qualifier:["float"],is_optional:false},{type:"node_in",name:"jc",qualifier:["float"],is_optional:false},{type:"node_in",name:"jd",qualifier:["float"],is_optional:false},{type:"node_in",name:"je",qualifier:["float"],is_optional:false},{type:"node_in",name:"jf",qualifier:["float"],is_optional:false},{type:"node_out",name:"jg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jh",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jg","[","0","]","=","jg","[","1","]","=","jg","[","2","]","=","ZERO_VALUE_NODES",";","jh","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iY",";","iZ",";","i_",";","ja",";","jb",";","jc",";","jd",";","je",";","jf",";"]}]},{type:"node",name:"ADD_SHADER",declarations:[{type:"node_in",name:"ji",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jk",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jk","=","clamp","(","ji","+","jj",",","vec3","(","ZERO_VALUE_NODES",")",",","vec3","(","UNITY_VALUE_NODES",")",")",";"]}]},{type:"node",name:"MIX_SHADER",declarations:[{type:"node_in",name:"jl",qualifier:["float"],is_optional:false},{type:"node_in",name:"jm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jo",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","jl",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","jo","=","eZ","*","jm","+","(","UNITY_VALUE_NODES","-","eZ",")","*","jn",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_out",name:"jp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jq",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eF",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jp"],statements:[{type:"textline",tokens:["jp","=","ew","(","eF",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jq"],statements:[{type:"textline",tokens:["jq","=","vec3","(","eF",",","ZERO_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_out",name:"jr",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eG",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["jr","=","vec3","(","eG",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_NO",declarations:[{type:"node_out",name:"js",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["js","=","fi",";"]}]},{type:"node",name:"TEX_COORD_GE",declarations:[{type:"node_out",name:"jt",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jt","=","eg",";"]}]},{type:"node",name:"TEX_COORD_OB",declarations:[{type:"node_out",name:"ju",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ju","[","0","]","=","ju","[","1","]","=","ju","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_CA",declarations:[{type:"node_out",name:"jv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jv","[","0","]","=","fd","[","0","]",";","jv","[","1","]","=","fd","[","1","]",";","jv","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_WI",declarations:[{type:"node_out",name:"jw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jw","[","0","]","=","jw","[","1","]","=","jw","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_RE",declarations:[{type:"node_out",name:"jx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jx","[","0","]","=","jx","[","1","]","=","jx","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_out",name:"jy",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eH",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["jy","=","vec3","(","eH",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_out",name:"jz",qualifier:["float"],is_optional:false},{type:"node_out",name:"jA",qualifier:["float"],is_optional:false},{type:"node_out",name:"jB",qualifier:["float"],is_optional:false},{type:"node_out",name:"jC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jD",qualifier:["float"],is_optional:false},{type:"node_out",name:"jE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jz","=","ZERO_VALUE_NODES",";","jA","=","ZERO_VALUE_NODES",";","jB","=","ZERO_VALUE_NODES",";","jC","=","vec3","(","ZERO_VALUE_NODES",")",";","jD","=","ZERO_VALUE_NODES",";","jE","=","jC",";","jF","=","jC",";"]}]},{type:"node",name:"HAIR_INFO",declarations:[{type:"node_out",name:"jG",qualifier:["float"],is_optional:false},{type:"node_out",name:"jH",qualifier:["float"],is_optional:false},{type:"node_out",name:"jI",qualifier:["float"],is_optional:false},{type:"node_out",name:"jJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jG","=","ZERO_VALUE_NODES",";","jH","=","ZERO_VALUE_NODES",";","jI","=","ZERO_VALUE_NODES",";","jJ","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"OBJECT_INFO",declarations:[{type:"node_out",name:"jK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jL",qualifier:["float"],is_optional:false},{type:"node_out",name:"jM",qualifier:["float"],is_optional:false},{type:"node_out",name:"jN",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jL","=","ZERO_VALUE_NODES",";","jM","=","ZERO_VALUE_NODES",";","jN","=","ZERO_VALUE_NODES",";","jK","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"WIREFRAME",declarations:[{type:"node_in",name:"jO",qualifier:["float"],is_optional:false},{type:"node_out",name:"jP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jP","=","jO",";"]}]},{type:"node",name:"TANGENT",declarations:[{type:"node_out",name:"jQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jQ","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LAYER_WEIGHT",declarations:[{type:"node_in",name:"jR",qualifier:["float"],is_optional:false},{type:"node_in",name:"jS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jT",qualifier:["float"],is_optional:false},{type:"node_out",name:"jU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jT","=","jU","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["jS",";","jR",";"]}]},{type:"node",name:"LIGHT_PATH",declarations:[{type:"node_out",name:"jV",qualifier:["float"],is_optional:false},{type:"node_out",name:"jW",qualifier:["float"],is_optional:false},{type:"node_out",name:"jX",qualifier:["float"],is_optional:false},{type:"node_out",name:"jY",qualifier:["float"],is_optional:false},{type:"node_out",name:"jZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"j_",qualifier:["float"],is_optional:false},{type:"node_out",name:"ka",qualifier:["float"],is_optional:false},{type:"node_out",name:"kb",qualifier:["float"],is_optional:false},{type:"node_out",name:"kc",qualifier:["float"],is_optional:false},{type:"node_out",name:"kd",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jV","=","jW","=","jX","=","ZERO_VALUE_NODES",";","jY","=","jZ","=","j_","=","ZERO_VALUE_NODES",";","ka","=","ka","=","kc","=","kd","=","ZERO_VALUE_NODES",";","kb","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"ATTRIBUTE",declarations:[{type:"node_out",name:"ke",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ke","=","kf","=","vec3","(","ZERO_VALUE_NODES",")",";","kg","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"SCRIPT",declarations:[],statements:[]},{type:"node",name:"CURVE_VEC",declarations:[{type:"node_in",name:"kh",qualifier:["float"],is_optional:false},{type:"node_in",name:"ki",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kj","=","ki",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_R"],statements:[{type:"textline",tokens:["kj",".","r","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","ki",".","r","+","0.5",",","NODE_TEX_ROW",")",")",".","r","-","0.5",")","*","2.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_G"],statements:[{type:"textline",tokens:["kj",".","g","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","ki",".","g","+","0.5",",","NODE_TEX_ROW",")",")",".","g","-","0.5",")","*","2.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_B"],statements:[{type:"textline",tokens:["kj",".","b","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","ki",".","b","+","0.5",",","NODE_TEX_ROW",")",")",".","b","-","0.5",")","*","2.0",";"]}]}]},{type:"textline",tokens:["kj","=","mix","(","ki",",","kj",",","kh",")",";"]}]},{type:"node",name:"CURVE_RGB",declarations:[{type:"node_in",name:"kk",qualifier:["float"],is_optional:false},{type:"node_in",name:"kl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"km",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["READ_A"],statements:[{type:"textline",tokens:["eZ","=","texture2D","(","u_nodes_texture",",","vec2","(","kl",".","r",",","NODE_TEX_ROW",")",")",".","a",";","eY","=","texture2D","(","u_nodes_texture",",","vec2","(","kl",".","g",",","NODE_TEX_ROW",")",")",".","a",";","eX","=","texture2D","(","u_nodes_texture",",","vec2","(","kl",".","b",",","NODE_TEX_ROW",")",")",".","a",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["eZ","=","kl",".","r",";","eY","=","kl",".","g",";","eX","=","kl",".","b",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_R"],statements:[{type:"textline",tokens:["km",".","r","=","texture2D","(","u_nodes_texture",",","vec2","(","eZ",",","NODE_TEX_ROW",")",")",".","r",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["km",".","r","=","eZ",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_G"],statements:[{type:"textline",tokens:["km",".","g","=","texture2D","(","u_nodes_texture",",","vec2","(","eY",",","NODE_TEX_ROW",")",")",".","g",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["km",".","g","=","eY",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_B"],statements:[{type:"textline",tokens:["km",".","b","=","texture2D","(","u_nodes_texture",",","vec2","(","eX",",","NODE_TEX_ROW",")",")",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["km",".","b","=","eX",";"]}]}]},{type:"textline",tokens:["km","=","mix","(","kl",",","km",",","kk",")",";"]}]},{type:"node",name:"VALTORGB",declarations:[{type:"node_in",name:"kn",qualifier:["float"],is_optional:false},{type:"node_out",name:"ko",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["fe","=","texture2D","(","u_nodes_texture",",","vec2","(","kn",",","NODE_TEX_ROW",")",")",";","ko","=","fe",".","rgb",";","kp","=","fe",".","a",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"kq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kr","=","kq",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["kr","=","(","MAPPING_TRS_MATRIX","*","vec4","(","kr",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["kr","=","kr","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["kr","=","kr","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["kr","=","max","(","kr",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["kr","=","min","(","kr",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["kr","=","normalize","(","kr",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"ks",qualifier:["float"],is_optional:false},{type:"node_in",name:"kt",qualifier:["float"],is_optional:false},{type:"node_out",name:"ku",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ku","=","ks","+","kt",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ku","=","clamp","(","ku",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"kv",qualifier:["float"],is_optional:false},{type:"node_in",name:"kw",qualifier:["float"],is_optional:false},{type:"node_out",name:"kx",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kx","=","kv","-","kw",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kx","=","clamp","(","kx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"ky",qualifier:["float"],is_optional:false},{type:"node_in",name:"kz",qualifier:["float"],is_optional:false},{type:"node_out",name:"kA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kA","=","ky","*","kz",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kA","=","clamp","(","kA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"kB",qualifier:["float"],is_optional:false},{type:"node_in",name:"kC",qualifier:["float"],is_optional:false},{type:"node_out",name:"kD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kD","=","(","kC","!=","ZERO_VALUE_NODES",")","?","kB","/","kC",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kD","=","clamp","(","kD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"kE",qualifier:["float"],is_optional:false},{type:"node_in",name:"kF",qualifier:["float"],is_optional:false},{type:"node_out",name:"kG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kG","=","sin","(","kE",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kG","=","clamp","(","kG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kF",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"kH",qualifier:["float"],is_optional:false},{type:"node_in",name:"kI",qualifier:["float"],is_optional:false},{type:"node_out",name:"kJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kJ","=","cos","(","kH",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kJ","=","clamp","(","kJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kI",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"kK",qualifier:["float"],is_optional:false},{type:"node_in",name:"kL",qualifier:["float"],is_optional:false},{type:"node_out",name:"kM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kM","=","tan","(","kK",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kM","=","clamp","(","kM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kL",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"kN",qualifier:["float"],is_optional:false},{type:"node_in",name:"kO",qualifier:["float"],is_optional:false},{type:"node_out",name:"kP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kP","=","(","kN","<=","UNITY_VALUE_NODES","&&","kN",">=","-","UNITY_VALUE_NODES",")","?","asin","(","kN",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kP","=","clamp","(","kP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kO",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"kQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"kR",qualifier:["float"],is_optional:false},{type:"node_out",name:"kS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kS","=","(","kQ","<=","UNITY_VALUE_NODES","&&","kQ",">=","-","UNITY_VALUE_NODES",")","?","acos","(","kQ",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kS","=","clamp","(","kS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kR",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"kT",qualifier:["float"],is_optional:false},{type:"node_in",name:"kU",qualifier:["float"],is_optional:false},{type:"node_out",name:"kV",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kV","=","atan","(","kT",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kV","=","clamp","(","kV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kU",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"kW",qualifier:["float"],is_optional:false},{type:"node_in",name:"kX",qualifier:["float"],is_optional:false},{type:"node_out",name:"kY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","kW","<","ZERO_VALUE_NODES","&&","kX","!=","floor","(","kX",")",")","kY","=","ZERO_VALUE_NODES",";","else","if","(","kX","==","ZERO_VALUE_NODES",")"]},{type:"textline",tokens:["kY","=","UNITY_VALUE_NODES",";","else","if","(","kW","<","ZERO_VALUE_NODES",")","kY","=","mix","(","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","sign","(","mod","(","-","kX",",","2.0",")",")",")","*","pow","(","-","kW",",","kX",")",";","else","if","(","kW","==","ZERO_VALUE_NODES",")","kY","=","ZERO_VALUE_NODES",";","else","kY","=","pow","(","kW",",","kX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kY","=","clamp","(","kY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"kZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"k_",qualifier:["float"],is_optional:false},{type:"node_out",name:"la",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["la","=","(","kZ",">","ZERO_VALUE_NODES","&&","k_",">","ZERO_VALUE_NODES",")","?","log2","(","kZ",")","/","log2","(","k_",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["la","=","clamp","(","la",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"lb",qualifier:["float"],is_optional:false},{type:"node_in",name:"lc",qualifier:["float"],is_optional:false},{type:"node_out",name:"ld",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ld","=","min","(","lb",",","lc",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ld","=","clamp","(","ld",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"le",qualifier:["float"],is_optional:false},{type:"node_in",name:"lf",qualifier:["float"],is_optional:false},{type:"node_out",name:"lg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lg","=","max","(","le",",","lf",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lg","=","clamp","(","lg",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"lh",qualifier:["float"],is_optional:false},{type:"node_in",name:"li",qualifier:["float"],is_optional:false},{type:"node_out",name:"lj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lj","=","floor","(","lh","+","eh",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lj","=","clamp","(","lj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["li",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"lk",qualifier:["float"],is_optional:false},{type:"node_in",name:"ll",qualifier:["float"],is_optional:false},{type:"node_out",name:"lm",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lm","=","(","lk","<","ll",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lm","=","clamp","(","lm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"ln",qualifier:["float"],is_optional:false},{type:"node_in",name:"lo",qualifier:["float"],is_optional:false},{type:"node_out",name:"lp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lp","=","(","ln",">","lo",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lp","=","clamp","(","lp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"lq",qualifier:["float"],is_optional:false},{type:"node_in",name:"lr",qualifier:["float"],is_optional:false},{type:"node_out",name:"ls",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ls","=","abs","(","lr",")",">","0.000001","?","mod","(","lq",",","lr",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ls","=","clamp","(","ls",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"lt",qualifier:["float"],is_optional:false},{type:"node_in",name:"lu",qualifier:["float"],is_optional:false},{type:"node_out",name:"lv",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lv","=","abs","(","lt",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lv","=","clamp","(","lv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["lu",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"lw",qualifier:["float"],is_optional:false},{type:"node_in",name:"lx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ly",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","lw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lz","=","mix","(","lx",",","ly",",","eX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lz","=","clamp","(","lz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"lA",qualifier:["float"],is_optional:false},{type:"node_in",name:"lB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lD",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","lA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lD","=","mix","(","lB",",","lB","+","lC",",","eX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lD","=","clamp","(","lD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"lE",qualifier:["float"],is_optional:false},{type:"node_in",name:"lF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","lE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lH","=","mix","(","lF",",","lF","*","lG",",","eX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lH","=","clamp","(","lH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"lI",qualifier:["float"],is_optional:false},{type:"node_in",name:"lJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","lI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lL","=","mix","(","lJ",",","lJ","-","lK",",","eX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lL","=","clamp","(","lL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"lM",qualifier:["float"],is_optional:false},{type:"node_in",name:"lN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","lM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eX",";","lP","=","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","eY",")","+","eX","*","(","vec3","(","UNITY_VALUE_NODES",")","-","lO",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","lN",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lP","=","clamp","(","lP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"lQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"lR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","lQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eX",";","lS","+=","step","(","lS",",","vec3","(","ZERO_VALUE_NODES",")",")",";","lT","=","eY","*","lR","+","eX","*","lR","/","lS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lT","=","clamp","(","lT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"lU",qualifier:["float"],is_optional:false},{type:"node_in",name:"lV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","lU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lX","=","mix","(","lV",",","abs","(","lV","-","lW",")",",","eX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lX","=","clamp","(","lX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"lY",qualifier:["float"],is_optional:false},{type:"node_in",name:"lZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"l_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ma",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","lY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","ma","=","min","(","lZ",".","rgb",",","l_",".","rgb","*","eX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["ma","=","clamp","(","ma",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"mb",qualifier:["float"],is_optional:false},{type:"node_in",name:"mc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"md",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"me",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","me","=","max","(","mc",".","rgb",",","md",".","rgb","*","eX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["me","=","clamp","(","me",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"mf",qualifier:["float"],is_optional:false},{type:"node_in",name:"mg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mf",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fk","=","vec3","(","UNITY_VALUE_NODES","-","eX",")",";","mi","=","mix","(","mg","*","(","fk","+","2.0","*","eX","*","mh",")",",","vec3","(","UNITY_VALUE_NODES",")","-","(","fk","+","2.0","*","eX","*","(","vec3","(","UNITY_VALUE_NODES",")","-","mh",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","mg",")",",","step","(","eh",",","mg",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mi","=","clamp","(","mi",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"mj",qualifier:["float"],is_optional:false},{type:"node_in",name:"mk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ml",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fk","=","vec3","(","UNITY_VALUE_NODES",")","-","eX","*","ml",";","fj","=","clamp","(","mk","/","fk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mm","=","mix","(","mix","(","fj",",","vec3","(","UNITY_VALUE_NODES",")",",","step","(","fk",",","vec3","(","ZERO_VALUE_NODES",")",")",")",",","mk",",","step","(","mk",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mm","=","clamp","(","mm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"mn",qualifier:["float"],is_optional:false},{type:"node_in",name:"mo",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fk","=","vec3","(","UNITY_VALUE_NODES","-","eX",")",";","fk","=","fk","+","eX","*","mp",";","fj","=","clamp","(","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","UNITY_VALUE_NODES",")","-","mo",")","/","fk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mq","=","mix","(","fj",",","vec3","(","ZERO_VALUE_NODES",")",",","step","(","fk",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mq","=","clamp","(","mq",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"mr",qualifier:["float"],is_optional:false},{type:"node_in",name:"ms",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mu",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mu","=","ms",";","fj","=","eq","(","mt",")",";","if","(","fj",".","y","!=","ZERO_VALUE_NODES",")","{","fk","=","eq","(","mu",")",";","fk",".","x","=","fj",".","x",";","fl","=","eu","(","fk",")",";","mu","=","mix","(","mu",",","fl",",","eX",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mu","=","clamp","(","mu",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"mv",qualifier:["float"],is_optional:false},{type:"node_in",name:"mw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"my",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eX",";","my","=","mw",";","fl","=","eq","(","my",")",";","if","(","fl",".","y","!=","ZERO_VALUE_NODES",")","{","fk","=","eq","(","mx",")",";","fl",".","y","=","eY","*","fl",".","y","+","eX","*","fk",".","y",";","my","=","eu","(","fl",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["my","=","clamp","(","my",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"mz",qualifier:["float"],is_optional:false},{type:"node_in",name:"mA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eX",";","fl","=","eq","(","mA",")",";","fk","=","eq","(","mB",")",";","fl",".","z","=","eY","*","fl",".","z","+","eX","*","fk",".","z",";","mC","=","eu","(","fl",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mC","=","clamp","(","mC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"mD",qualifier:["float"],is_optional:false},{type:"node_in",name:"mE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mG","=","mE",";","fk","=","eq","(","mF",")",";","if","(","fk",".","y","!=","ZERO_VALUE_NODES",")","{","fl","=","eq","(","mG",")",";","fl",".","x","=","fk",".","x",";","fl",".","y","=","fk",".","y",";","fj","=","eu","(","fl",")",";","mG","=","mix","(","mG",",","fj",",","eX",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mG","=","clamp","(","mG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"mH",qualifier:["float"],is_optional:false},{type:"node_in",name:"mI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eX",";","fj","=","mJ","+","mI","-","mJ","*","mI",";","mK","=","mI","*","(","vec3","(","eY",")","+","vec3","(","eX",")","*","(","(","vec3","(","UNITY_VALUE_NODES",")","-","mI",")","*","mJ","+","fj",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mK","=","clamp","(","mK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"mL",qualifier:["float"],is_optional:false},{type:"node_in",name:"mM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mO","=","mM","+","eX","*","(","2.0","*","mN","-","vec3","(","UNITY_VALUE_NODES",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mO","=","clamp","(","mO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"mP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mQ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["eO","=","mP",";","eS","=","mQ",";"]}]},{type:"node",name:"MATERIAL_BEGIN",declarations:[{type:"node_in",name:"mR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mT",qualifier:["float"],is_optional:false},{type:"node_in",name:"mU",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"mV",qualifier:["float"],is_optional:true},{type:"node_out",name:"mW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mZ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"m_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"na",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nb",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nc",qualifier:["vec4"],is_optional:false},{type:"node_param",name:"eI",qualifier:["const","vec2"],is_optional:false},{type:"node_param",name:"eJ",qualifier:["const","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mY","=","clamp","(","mR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["mZ","=","eJ","[","0","]","*","clamp","(","mS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["m_","=","normalize","(","mU",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["m_","=","fi",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["SHADELESS_MAT",{type:"logic_negative_expr",places:1}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"textline",tokens:["mW","=","mV","*","mY",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["mW","=","eV","*","mY",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["mY","*=","mT",";"]}]}]},{type:"textline",tokens:["mX","=","eW","*","u_environment_energy","*","dS","(","m_",")",";","nc","=","du","(","mY",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],statements:[{type:"textline",tokens:["na","=","vec2","(","eI","[","0","]",",","eI","[","1","]",")",";"]},{type:"textline",tokens:["nb","=","vec2","(","eJ","[","1","]",",","eJ","[","2","]",")",";"]}]}]},{type:"textline",tokens:["eR","=","nc",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["mW","=","vec3","(","ZERO_VALUE_NODES",")",";","mX","=","vec3","(","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATERIAL_END",declarations:[{type:"node_in",name:"nd",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"ne",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ng",qualifier:["float"],is_optional:true},{type:"node_in",name:"nh",qualifier:["float"],is_optional:true},{type:"node_in",name:"ni",qualifier:["float"],is_optional:true},{type:"node_out",name:"nj",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nk",qualifier:["float"],is_optional:true},{type:"node_out",name:"nl",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nm",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nn",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"eK",qualifier:["float"],is_optional:false},{type:"node_param",name:"eL",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nj"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["nj","=","nd",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nj","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT","REFLECTION_TYPE","REFL_NONE",{type:"non_equal_expr",places:2},{type:"logical_and_expr",places:2}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["dP","(","nj",",","eM",",","nf",",","ng",",","eN",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["dP","(","nj",",","eM",",","nf",",","ng",",","mat4","(","ZERO_VALUE_NODES",")",")",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["nj","+=","ne",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nl"],statements:[{type:"textline",tokens:["nl","=","nf",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nm"],statements:[{type:"textline",tokens:["nm","=","nd",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nn"],statements:[{type:"textline",tokens:["nn","=","ne",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nk"],statements:[{type:"textline",tokens:["nk","=","clamp","(","ni",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["eX","=","max","(","max","(","ne",".","r",",","ne",".","g",")",",","ne",".","b",")","*","nh",";","nk","=","clamp","(","ni","*","(","UNITY_VALUE_NODES","-","eX",")","+","eX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]}]},{type:"node_else",statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nk"],statements:[{type:"textline",tokens:["nk","=","clamp","(","eK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["eX","=","max","(","max","(","ne",".","r",",","ne",".","g",")",",","ne",".","b",")","*","eL",";","nk","=","eK","*","(","UNITY_VALUE_NODES","-","eX",")","+","eX",";"]}]}]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["eP","=","ne",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["eP","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["eQ","=","nf",";"]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"no",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"np",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nr",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"ns",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nr","=","vec4","(","no","+","nq","*","np",",","ZERO_VALUE_NODES",")",";","ns","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"nt",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"nu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nv",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nx",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nv","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["nx","=","eh",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nx","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["nw","=","u_light_color_intensities","[","LAMP_IND","]",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_SHADOW_MAP_IND",1,{type:"negative_expr",places:1},{type:"non_equal_expr",places:2}],statements:[{type:"textline",tokens:["nw","*=","nt","[","LAMP_SHADOW_MAP_IND","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["fj","=","u_light_positions","[","LAMP_IND","]",";","nu","=","fj","-","fh",";"]},{type:"textline",tokens:["eX","=","length","(","nu",")",";","nw","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","eX","*","eX",")",";","nu","=","normalize","(","nu",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["fj","=","u_light_directions","[","LAMP_IND","]",";","eX","=","dot","(","nu",",","fj",")",";","eX","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","eX","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","nw","*=","eX",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["nu","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"ny",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nz",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nB",qualifier:["float"],is_optional:false},{type:"node_in",name:"nC",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nD","=","ZERO_VALUE_NODES",";","if","(","nz",".","r","!=","ZERO_VALUE_NODES",")","{","eX","=","(","UNITY_VALUE_NODES","-","nB",")","*","dot","(","nA",",","ny",")","+","nB",";","if","(","nC","[","0","]","==","ZERO_VALUE_NODES",")","{","nD","=","UNITY_VALUE_NODES",";","}","else","{","eX","=","UNITY_VALUE_NODES","+","abs","(","eX",")",";","eX","=","nC","[","1","]","+","(","UNITY_VALUE_NODES","-","nC","[","1","]",")","*","pow","(","eX",",","nC","[","0","]",")",";","nD","=","clamp","(","eX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","nD","=","max","(","nD",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"nE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nF",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nH",qualifier:["float"],is_optional:false},{type:"node_out",name:"nI",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nI","=","ZERO_VALUE_NODES",";","if","(","nF",".","r","!=","ZERO_VALUE_NODES",")","{","eX","=","(","UNITY_VALUE_NODES","-","nH",")","*","dot","(","nG",",","nE",")","+","nH",";","nI","=","max","(","eX",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"nJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nK",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nM",qualifier:["float"],is_optional:false},{type:"node_in",name:"nN",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nO","=","ZERO_VALUE_NODES",";","if","(","nK",".","r","!=","ZERO_VALUE_NODES",")","{","eX","=","(","UNITY_VALUE_NODES","-","nM",")","*","dot","(","nL",",","nJ",")","+","nM",";","if","(","nN","[","0","]",">","ZERO_VALUE_NODES",")","{","eY","=","max","(","dot","(","nL",",","eM",")",",","ZERO_VALUE_NODES",")",";","eZ","=","nN","[","0","]","*","nN","[","0","]",";","e_","=","UNITY_VALUE_NODES","-","eh","*","(","eZ","/","(","eZ","+","0.33",")",")",";","fj","=","nJ","-","eX","*","nL",";","fl","=","eM","-","eY","*","nL",";"]},{type:"textline",tokens:["if","(","length","(","fj",")","==","ZERO_VALUE_NODES","||","length","(","fl",")","==","ZERO_VALUE_NODES","||","abs","(","eX",")",">","UNITY_VALUE_NODES","||","abs","(","eY",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["nO","=","eX","*","e_",";","else","{","fa","=","acos","(","eX",")",";","eY","=","acos","(","eY",")",";","fj","=","normalize","(","fj",")",";","fl","=","normalize","(","fl",")",";","fb","=","max","(","fa",",","eY",")",";","fc","=","min","(","fa",",","eY",")",";","fc","*=","0.95",";","eY","=","max","(","dot","(","fj",",","fl",")",",","ZERO_VALUE_NODES",")",";","eZ","=","0.45","*","(","eZ","/","(","eZ","+","0.09",")",")",";","nO","=","eX","*","(","e_","+","(","eZ","*","eY","*","sin","(","fb",")","*","tan","(","fc",")",")",")",";","}","}","else","nO","=","eX",";","nO","=","max","(","nO",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"nP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nQ",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nS",qualifier:["float"],is_optional:false},{type:"node_in",name:"nT",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nU","=","ZERO_VALUE_NODES",";","if","(","nQ",".","r","!=","ZERO_VALUE_NODES",")","{","eX","=","(","UNITY_VALUE_NODES","-","nS",")","*","dot","(","nR",",","nP",")","+","nS",";","fc","=","max","(","dot","(","nR",",","eM",")",",","ZERO_VALUE_NODES",")",";","if","(","nT","[","0","]","<=","UNITY_VALUE_NODES",")","nU","=","eX","*","pow","(","max","(","fc","*","eX",",","0.1",")",",","nT","[","0","]","-","UNITY_VALUE_NODES",")",";","else","nU","=","eX","*","pow","(","1.0001","-","fc",",","nT","[","0","]","-","UNITY_VALUE_NODES",")",";","nU","=","max","(","nU",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"nV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nW",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nY",qualifier:["float"],is_optional:false},{type:"node_in",name:"nZ",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"n_",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["n_","=","ZERO_VALUE_NODES",";","if","(","nW",".","r","!=","ZERO_VALUE_NODES",")","{","fc","=","(","UNITY_VALUE_NODES","-","nY",")","*","dot","(","nX",",","nV",")","+","nY",";","fc","=","acos","(","fc",")",";","if","(","fc","<","nZ","[","0","]",")","n_","=","UNITY_VALUE_NODES",";","else","if","(","fc",">","(","nZ","[","0","]","+","nZ","[","1","]",")","||","nZ","[","1","]","==","ZERO_VALUE_NODES",")","n_","=","ZERO_VALUE_NODES",";","else","n_","=","UNITY_VALUE_NODES","-","(","(","fc","-","nZ","[","0","]",")","/","nZ","[","1","]",")",";","n_","=","max","(","n_",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"oa",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ob",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"oc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"od",qualifier:["float"],is_optional:false},{type:"node_in",name:"oe",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"of",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["of","=","ZERO_VALUE_NODES",";","if","(","ob",".","g","==","UNITY_VALUE_NODES",")","{","fl","=","normalize","(","oa","+","eM",")",";","of","=","(","UNITY_VALUE_NODES","-","od",")","*","max","(","dot","(","oc",",","fl",")",",","ZERO_VALUE_NODES",")","+","od",";","of","=","pow","(","of",",","oe","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"og",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oh",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"oi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oj",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ok",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ok","=","ZERO_VALUE_NODES",";","if","(","oh",".","g","==","UNITY_VALUE_NODES",")","{","fl","=","normalize","(","og","+","eM",")",";","fc","=","max","(","dot","(","oi",",","fl",")",",","0.001",")",";"]},{type:"textline",tokens:["eX","=","max","(","dot","(","oi",",","eM",")",",","0.01",")",";","fb","=","max","(","dot","(","oi",",","og",")",",","0.01",")",";","fc","=","tan","(","acos","(","fc",")",")",";","eY","=","max","(","oj","[","0","]",",","0.001",")",";","ok","=","fb","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","eY","*","eY",")",")","*","(","exp","(","-","(","fc","*","fc",")","/","(","eY","*","eY",")",")","/","(","sqrt","(","eX","*","fb",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"ol",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"om",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"on",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oo",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"op",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["op","=","ZERO_VALUE_NODES",";","if","(","om",".","g","==","UNITY_VALUE_NODES",")","{","fl","=","normalize","(","ol","+","eM",")",";","fb","=","acos","(","dot","(","fl",",","on",")",")",";","if","(","fb","<","oo","[","0","]",")","op","=","UNITY_VALUE_NODES",";","else","if","(","fb",">=","oo","[","0","]","+","oo","[","1","]","||","oo","[","1","]","==","ZERO_VALUE_NODES",")","op","=","ZERO_VALUE_NODES",";","else","op","=","UNITY_VALUE_NODES","-","(","fb","-","oo","[","0","]",")","/","oo","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"oq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"or",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"os",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ot",qualifier:["float"],is_optional:false},{type:"node_in",name:"ou",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ov",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ov","=","ZERO_VALUE_NODES",";","if","(","or",".","g","==","UNITY_VALUE_NODES",")","{","if","(","ou","[","0","]","<","UNITY_VALUE_NODES","||","ou","[","1","]","==","ZERO_VALUE_NODES",")","ov","=","ZERO_VALUE_NODES",";","else","{","if","(","ou","[","1","]","<","100.0",")","ou","[","1","]","=","sqrt","(","UNITY_VALUE_NODES","/","ou","[","1","]",")",";","else","ou","[","1","]","=","10.0","/","ou","[","1","]",";","fl","=","normalize","(","eM","+","oq",")",";","fb","=","(","UNITY_VALUE_NODES","-","ot",")","*","max","(","dot","(","os",",","fl",")",",","ZERO_VALUE_NODES",")","+","ot",";","if","(","fb","<","ZERO_VALUE_NODES",")","ov","=","ZERO_VALUE_NODES",";","else","{","eX","=","max","(","dot","(","os",",","eM",")",",","0.01",")",";","eY","=","dot","(","os",",","oq",")",";","if","(","eY","<=","0.01",")","ov","=","ZERO_VALUE_NODES",";","else","{","fc","=","max","(","dot","(","eM",",","fl",")",",","0.01",")",";","eZ","=","UNITY_VALUE_NODES",";","eX","=","(","2.0","*","fb","*","eX",")","/","fc",";","eY","=","(","2.0","*","fb","*","eY",")","/","fc",";","eY","=","min","(","min","(","eZ",",","eX",")",",","eY",")",";","eX","=","sqrt","(","pow","(","ou","[","0","]",",","2.0",")","+","pow","(","fc",",","2.0",")","-","UNITY_VALUE_NODES",")",";","fc","=","pow","(","eX","-","fc",",","2.0",")","/","pow","(","eX","+","fc",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","fc","*","(","eX","+","fc",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","fc","*","(","eX","-","fc",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","fb","=","acos","(","fb",")",";","ov","=","max","(","fc","*","eY","*","exp","(","-","pow","(","fb",",","2.0",")","/","(","2.0","*","pow","(","ou","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"ow",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"ox",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oy",qualifier:["float"],is_optional:false},{type:"node_in",name:"oz",qualifier:["float"],is_optional:false},{type:"node_in",name:"oA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oC",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"oD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oG",qualifier:["float"],is_optional:false},{type:"node_out",name:"oH",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"oI",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_NODE_B4W_TRANSLUCENCY"],statements:[{type:"textline",tokens:["if","(","dot","(","oA",",","oB",")","*","dot","(","eM",",","oB",")","<","ZERO_VALUE_NODES",")","{","fb","=","oC",".","x",";","eY","=","oC",".","y",";","fc","=","oC",".","z",";","eX","=","oC",".","w",";"]},{type:"textline",tokens:["eZ","=","clamp","(","abs","(","dot","(","oA",",","oB",")",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","e_","=","clamp","(","dot","(","eM",",","-","oA",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","pow","(","e_",",","eY",")",";"]},{type:"textline",tokens:["oH","=","ow","+","oG","*","vec4","(","oF","*","eZ","*","pow","(","oD",",","vec3","(","fb",")",")",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["oH","+=","fc","*","mix","(","vec4","(","oD",",","UNITY_VALUE_NODES",")",",","vec4","(","UNITY_VALUE_NODES",")",",","eX",")","*","oG","*","vec4","(","oF","*","eZ","*","vec3","(","eY",")",",","UNITY_VALUE_NODES",")",";","oI","=","ox",";","}","else","{"]},{type:"textline",tokens:["oI","=","ox","+","oF","*","oE","*","oz",";","oH","=","ow","+","vec4","(","oF","*","oD","*","oy",",","oz",")",";","}"]}]},{type:"node_else",statements:[{type:"textline",tokens:["oI","=","ox","+","oF","*","oE","*","oz",";","oH","=","ow","+","vec4","(","oF","*","oD","*","oy",",","oz",")",";"]}]}]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"oJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oJ","=","u_node_rgbs","[","RGB_IND","]",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"oK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oL","=","dot","(","oK",",","vec3","(","0.35",",","0.45",",","0.2",")",")",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"oM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oN",qualifier:["float"],is_optional:true},{type:"node_out",name:"oO",qualifier:["float"],is_optional:true},{type:"node_out",name:"oP",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oN"],statements:[{type:"textline",tokens:["oN","=","oM",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oO"],statements:[{type:"textline",tokens:["oO","=","oM",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oP"],statements:[{type:"textline",tokens:["oP","=","oM",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"oQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oR",qualifier:["float"],is_optional:true},{type:"node_out",name:"oS",qualifier:["float"],is_optional:true},{type:"node_out",name:"oT",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["fl","=","eq","(","oQ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oR"],statements:[{type:"textline",tokens:["oR","=","fl",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oS"],statements:[{type:"textline",tokens:["oS","=","fl",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oT"],statements:[{type:"textline",tokens:["oT","=","fl",".","b",";"]}]}]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"oU",qualifier:["float"],is_optional:false},{type:"node_in",name:"oV",qualifier:["float"],is_optional:false},{type:"node_in",name:"oW",qualifier:["float"],is_optional:false},{type:"node_out",name:"oX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oX","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","oU","-","oW",")","*","oV",")",")",";"]}]},{type:"node",name:"GAMMA",declarations:[{type:"node_in",name:"oY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"o_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["o_","=","oY",";","if","(","o_",".","x",">","ZERO_VALUE_NODES",")","o_",".","x","=","pow","(","oY",".","x",",","oZ",")",";","if","(","o_",".","y",">","ZERO_VALUE_NODES",")","o_",".","y","=","pow","(","oY",".","y",",","oZ",")",";","if","(","o_",".","z",">","ZERO_VALUE_NODES",")","o_",".","z","=","pow","(","oY",".","z",",","oZ",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"pa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pb","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","pa",")",";","pb","=","pow","(","pb",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"pc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pd",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pd","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","pc",")",";","pd","=","pow","(","pd",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_EMPTY",declarations:[{type:"node_out",name:"pe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pg",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pe"],statements:[{type:"textline",tokens:["pe","[","2","]","=","pe","[","1","]","=","pe","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pf"],statements:[{type:"textline",tokens:["pf","[","2","]","=","pf","[","1","]","=","pf","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pg"],statements:[{type:"textline",tokens:["pg","=","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"ph",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pi",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pj",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"],is_optional:false}],statements:[{type:"textline",tokens:["fe","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","ph",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pi"],statements:[{type:"textline",tokens:["pi","=","fe",".","xyz",";","br","(","pi",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pj"],statements:[{type:"textline",tokens:["pj","=","fe",".","w",";"]}]}]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"pk",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pl",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pm",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pn",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"po",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pp",qualifier:["float"],is_optional:true},{type:"node_out",name:"pq",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pr",qualifier:["float"],is_optional:true},{type:"node_out",name:"ps",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pt",qualifier:["float"],is_optional:true},{type:"node_out",name:"pu",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pv",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pk",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_po"],statements:[{type:"textline",tokens:["po","=","fe",".","xyz",";","br","(","po",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pp"],statements:[{type:"textline",tokens:["pp","=","fe",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pl",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pq"],statements:[{type:"textline",tokens:["pq","=","fe",".","xyz",";","br","(","pq",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pr"],statements:[{type:"textline",tokens:["pr","=","fe",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pm",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ps"],statements:[{type:"textline",tokens:["ps","=","fe",".","xyz",";","br","(","ps",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pt"],statements:[{type:"textline",tokens:["pt","=","fe",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pn",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pu"],statements:[{type:"textline",tokens:["pu","=","fe",".","xyz",";","br","(","pu",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pv"],statements:[{type:"textline",tokens:["pv","=","fe",".","w",";"]}]}]}]}]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"pw",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"px",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"py",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pz",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pA",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pB",qualifier:["float"],is_optional:true},{type:"node_out",name:"pC",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pD",qualifier:["float"],is_optional:true},{type:"node_out",name:"pE",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pF",qualifier:["float"],is_optional:true},{type:"node_out",name:"pG",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pH",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","pw",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pA"],statements:[{type:"textline",tokens:["pA","=","normalize","(","ff","*","(","fe",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pB"],statements:[{type:"textline",tokens:["pB","=","fe",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","px",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pC"],statements:[{type:"textline",tokens:["pC","=","normalize","(","ff","*","(","fe",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pD"],statements:[{type:"textline",tokens:["pD","=","fe",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","py",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pE"],statements:[{type:"textline",tokens:["pE","=","normalize","(","ff","*","(","fe",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pF"],statements:[{type:"textline",tokens:["pF","=","fe",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","pz",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pG"],statements:[{type:"textline",tokens:["pG","=","normalize","(","ff","*","(","fe",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pH"],statements:[{type:"textline",tokens:["pH","=","fe",".","w",";"]}]}]}]}]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"pI",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pI","=","u_node_values","[","VALUE_IND","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"pJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pM",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pL","=","pJ","+","pK",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pM"],statements:[{type:"textline",tokens:["pM","=","(","abs","(","pL","[","0","]",")","+","abs","(","pL","[","1","]",")","+","abs","(","pL","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"pN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pQ",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pP","=","pN","-","pO",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pQ"],statements:[{type:"textline",tokens:["pQ","=","(","abs","(","pP","[","0","]",")","+","abs","(","pP","[","1","]",")","+","abs","(","pP","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"pR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pU",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pT","=","pR","+","pS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pU"],statements:[{type:"textline",tokens:["pU","=","length","(","pT",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pT"],statements:[{type:"textline",tokens:["pT","=","normalize","(","pT",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"pV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pY",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pX","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pY"],statements:[{type:"textline",tokens:["pY","=","dot","(","pV",",","pW",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"pZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"p_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qb",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qa","=","cross","(","pZ",",","p_",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qb"],statements:[{type:"textline",tokens:["qb","=","length","(","qa",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"qc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qf",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qe","=","normalize","(","qc",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qf"],statements:[{type:"textline",tokens:["qf","=","length","(","qc",")",";"]}]}]},{type:"textline",tokens:["qd",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"qg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qi","=","reflect","(","-","qg",",","qh",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"qj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qk",qualifier:["float"],is_optional:false},{type:"node_in",name:"ql",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"qm",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"qn",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["eY","=","length","(","fd",")",";","if","(","eY","<","qm",")","{","eT","=","ey","(","qj",")",";","eY","=","clamp","(","eh","*","(","qm","-","eY",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","qk","*","eY",";"]},{type:"textline",tokens:["fl","=","normalize","(","eM","*","ff",")",";"]},{type:"textline",tokens:["eZ","=","UNITY_VALUE_NODES","/","ql",";"]},{type:"textline",tokens:["eU","=","fl",".","xy","*","eY","/","(","ql","*","fl",".","z",")",";","eY","=","UNITY_VALUE_NODES",";","eX","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eT",")",".","a",";"]},{type:"textline",tokens:["for","(","float","qo","=","1.0",";","qo","<=","ql",";","qo","++",")","{","if","(","eX","<","eY",")","{","eY","-=","eZ",";","eT","-=","eU",";","eX","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eT",")",".","a",";","}","}"]},{type:"textline",tokens:["eU","=","eT","+","eU",";","eZ","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eU",")",".","a","-","(","eY","+","eZ",")",";","eY","=","eX","-","eY",";","eZ","=","eY","/","(","eY","-","eZ",")",";"]},{type:"textline",tokens:["eT","=","eZ","*","eU","+","(","UNITY_VALUE_NODES","-","eZ",")","*","eT",";","qn","=","ew","(","eT",")",";","}","else","qn","=","qj",";"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"qp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qq","=","clamp","(","qp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"qr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qs",qualifier:["float"],is_optional:false},{type:"node_out",name:"qt",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qt","=","el","(","qr",",","qs",")",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"qu",qualifier:["float"],is_optional:false},{type:"node_in",name:"qv",qualifier:["float"],is_optional:false},{type:"node_in",name:"qw",qualifier:["float"],is_optional:false},{type:"node_in",name:"qx",qualifier:["float"],is_optional:false},{type:"node_in",name:"qy",qualifier:["float"],is_optional:false},{type:"node_out",name:"qz",qualifier:["float"],is_optional:true},{type:"node_out",name:"qA",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qz"],statements:[{type:"textline",tokens:["qz","=","qu",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qA"],statements:[{type:"textline",tokens:["qA","=","vec4","(","qv",",","qw",",","qx",",","qy",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"qB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qB","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"qC",qualifier:["float"],is_optional:false},{type:"node_in",name:"qD",qualifier:["float"],is_optional:false},{type:"node_in",name:"qE",qualifier:["float"],is_optional:false},{type:"node_out",name:"qF",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qF","=","smoothstep","(","qD",",","qE",",","qC",")",";"]}]},{type:"node",name:"B4W_GLOW_OUTPUT",declarations:[{type:"node_in",name:"qG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qH",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["eO","=","qG",";","eS","=","qH",";"]}]},{type:"node",name:"B4W_VECTOSCAL",declarations:[{type:"node_in",name:"qI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qJ","=","(","qI",".","r","+","qI",".","g","+","qI",".","b",")","/","3.0",";"]}]},{type:"node",name:"B4W_SCALTOVEC",declarations:[{type:"node_in",name:"qK",qualifier:["float"],is_optional:false},{type:"node_out",name:"qL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qL","[","0","]","=","qK",";","qL","[","1","]","=","qK",";","qL","[","2","]","=","qK",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","qM","(","in","vec3","eM",",","in","mat4","eN",",","out","vec3","eO",",","out","vec3","eP",",","out","vec3","eQ",",","out","vec4","eR",",","out","float","eS",")","{","vec2","eT",",","eU",";","float","eV",",","eW",",","eX",",","eY",",","eZ",",","e_",",","fa",",","fb",",","fc",";","vec4","fd",",","fe",";","mat3","ff",";","vec3","fg",",","fh",",","fi",",","fj",",","fk",",","fl",";","eO","=","vec3","(","ZERO_VALUE_NODES",")",";","eP","=","vec3","(","ZERO_VALUE_NODES",")",";","eQ","=","vec3","(","ZERO_VALUE_NODES",")",";","eR","=","vec4","(","ZERO_VALUE_NODES",")",";","eS","=","ZERO_VALUE_NODES",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["fg","=","normalize","(","bE",")",";","fh","=","fg",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["INVERT_FRONTFACING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")"]}]}}]},{type:"textline",tokens:["fh","=","fh",";","else","fh","=","-","fh",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["fi","=","fh",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fi","=","fg",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["fg","=","fh",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["fj","=","cross","(","fh",",","bF",".","xyz",")","*","bF",".","w",";","ff","=","mat3","(","bF",".","xyz",",","fj",",","fh",")",";","ff","=","ff",";"]}]}}]},{type:"textline",tokens:["fh","=","bC",";","fd","=","bD",";","eV","=","u_emit",";","eW","=","u_ambient",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","qN","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","qT","(","vec3","qO",",","mat4","qP",")","{","vec3","qQ",",","qR",",","qS",";","qQ","=","vec3","(","qP","[","0","]","[","0","]",",","qP","[","1","]","[","0","]",",","qP","[","2","]","[","0","]",")",";","qR","=","vec3","(","qP","[","0","]","[","1","]",",","qP","[","1","]","[","1","]",",","qP","[","2","]","[","1","]",")",";","qS","=","vec3","(","qP","[","0","]","[","2","]",",","qP","[","1","]","[","2","]",",","qP","[","2","]","[","2","]",")",";","qR","=","cross","(","qS",",","qQ",")",";","return","mat4","(","vec4","(","qQ",",","0.0",")",",","vec4","(","qR",",","0.0",")",",","vec4","(","qS",",","0.0",")",",","vec4","(","qO",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","qZ","(","vec3","qU",",","vec3","qV",")","{","vec3","qW",",","qX",",","qY",";","qW","=","qU","-","qV",";","qW",".","y","=","0.0",";","qW","=","normalize","(","qW",")",";","qX","=","normalize","(","cross","(","qN",",","qW",")",")",";","qY","=","normalize","(","cross","(","qW",",","qX",")",")",";","return","mat4","(","vec4","(","qX",",","0.0",")",",","vec4","(","qY",",","0.0",")",",","vec4","(","qW",",","0.0",")",",","vec4","(","qV",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","rg","(","in","vec3","q_",",","float","ra",",","float","rb",",","float","rc",",","vec3","rd",")","{","float","re",",","rf",";","re","=","fract","(","length","(","rd",")","/","0.17",")",";","rf","=","rc","+","re","/","10.0",";","re","=","re",";","if","(","rc","!=","0.0",")","re","/=","rc",";","q_","*=","1.0","+","0.5","*","sin","(","ra",")",";","re","=","length","(","q_",")","*","rb","*","sin","(","2.0","*","3.14","*","ra","*","rf","+","re",")",";","return","C","(","re",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","ro","(","in","vec3","rh",",","in","vec3","ri",",","in","mat4","rj",")","{","vec3","rk",";","float","rl",",","rm",";","mat4","rn",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["rn","=","qT","(","ri",",","rj",")",";"]}]}},{type:"elif",expression:["BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["rl","=","fract","(","(","ri",".","x","*","1.43","+","ri",".","y","*","0.123","+","ri",".","z","*","6.1",")",")",";","rl","=","2.0","*","M_PI","*","rl",";","rk","=","normalize","(","vec3","(","rj","[","0","]","[","2","]",",","0.0",",","rj","[","2","]","[","2","]",")",")",";","rm","=","acos","(","rk","[","2","]",")",";","if","(","rk","[","0","]","<","0.0",")","rm","=","2.0","*","M_PI","-","rm",";","rm","=","rm","-","rl",";","if","(","rm","<","0.0",")","rm","=","2.0","*","M_PI","+","rm",";","rl","=","rl",";","if","(","rm","<=","MAX_BILLBOARD_ANGLE",")","rl","+=","rm",";","else","if","(","rm","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","rl","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","rm","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","rm","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","rl","+=","rm","-","M_PI",";","else","if","(","rm","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","rl","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","rm","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","rl","+=","rm","-","2.0","*","M_PI",";","rn","=","A","(","rl",")",";","rn","[","3","]","=","vec4","(","ri",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["rn","=","qZ","(","rh",",","ri",")",";"]}]}}]},{type:"textline",tokens:["return","rn",";","}"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","ru","(","in","vec3","rp",",","in","vec3","rq",",","in","mat4","rr",",","mat4","rs",")","{","mat4","rt",";","rt","=","ro","(","rp",",","rq",",","rr",")",";","rs","[","3","]","=","vec4","(","0.0",",","0.0",",","0.0",",","1.0",")",";","rt","=","rt","*","rs",";","return","rt",";","}"]}]}}]},{type:"textline",tokens:["c","rB","(","in","vec3","rv",",","in","vec3","rw",",","in","vec3","rx",",","in","vec3","ry",",","in","vec3","rz",",","in","mat4","rA",")","{","rv","=","(","rA","*","vec4","(","rv",",","1.0",")",")",".","xyz",";","rw","=","(","rA","*","vec4","(","rw",",","1.0",")",")",".","xyz",";","rx","=","(","rA","*","vec4","(","rx",",","0.0",")",")",".","xyz",";","ry","=","(","rA","*","vec4","(","ry",",","0.0",")",")",".","xyz",";","rz","=","(","rA","*","vec4","(","rz",",","0.0",")",")",".","xyz",";","return","E","(","c","(","rv",",","rw",",","rx",",","ry",",","rz",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","rE","(","vec2","rC",",","vec3","rD",")","{","return","(","rC","+","0.5",")","*","rD",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","rL","(","in","vec4","rF",",","in","vec4","rG",",","in","float","rH",")","{","float","rI",",","rJ",",","rK",";","rI","=","rF","[","0","]","*","rG","[","0","]","+","rF","[","1","]","*","rG","[","1","]","+","rF","[","2","]","*","rG","[","2","]","+","rF","[","3","]","*","rG","[","3","]",";","if","(","rI","<","0.0",")","{","rG","*=","-","1.0",";","rI","=","-","rI",";","}","if","(","abs","(","rI",")",">=","1.0",")","return","rF",";","rJ","=","acos","(","rI",")",";","rI","=","sqrt","(","1.0","-","rI","*","rI",")",";","if","(","abs","(","rI",")","<","0.001",")","return","vec4","(","rF","*","0.5","+","rG","*","0.5",")",";","rK","=","sin","(","(","1.0","-","rH",")","*","rJ",")","/","rI",";","rI","=","sin","(","rH","*","rJ",")","/","rI",";","return","rF","*","rK","+","rG","*","rI",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","rX","(","in","vec3","rM",",","in","vec4","rN",",","in","vec4","rO",",","in","vec4","rP",",","in","vec4","rQ",",","in","float","rR",")","{","vec4","rS",",","rT",";","vec3","rU",",","rV",",","rW",";","rU","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rM",",","1.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["rS","=","rL","(","rN",",","rO",",","rR",")",";","rT","=","mix","(","rP",",","rQ",",","rR",")",";","rV","=","i","(","rS",",","rU",")",";","rV","=","rV","*","rT",".","w","+","rT",".","xyz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["rW","=","i","(","rN",",","rU",")",";","rU","=","i","(","rO",",","rU",")",";","rW","=","rW","*","rP",".","w","+","rP",".","xyz",";","rU","=","rU","*","rQ",".","w","+","rQ",".","xyz",";","rV","=","mix","(","rW",",","rU",",","rR",")",";"]}]}}]},{type:"textline",tokens:["return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rV",",","1.0",")",")",";","}","vec3","sf","(","in","vec3","rY",",","in","vec4","rZ",",","in","vec4","r_",",","in","float","sa",")","{","vec4","sb",";","vec3","sc",",","sd",",","se",";","sc","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rY",",","0.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["sb","=","rL","(","rZ",",","r_",",","sa",")",";","sd","=","i","(","sb",",","sc",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["se","=","i","(","rZ",",","sc",")",";","sc","=","i","(","r_",",","sc",")",";","sd","=","mix","(","se",",","sc",",","sa",")",";"]}]}}]},{type:"textline",tokens:["return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sd",",","0.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","rX","(","in","vec3","sg",",","in","vec4","sh",",","in","vec4","si",")","{","vec3","sj",";","sj","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sg",",","1.0",")",")",";","sj","=","i","(","sh",",","sj",")",";","sj","=","sj","*","si",".","w","+","si",".","xyz",";","return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sj",",","1.0",")",")",";","}","vec3","sf","(","in","vec3","sk",",","in","vec4","sl",")","{","vec3","sm",";","sm","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sk",",","0.0",")",")",";","sm","=","i","(","sl",",","sm",")",";","return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sm",",","0.0",")",")",";","}"]}]}}]},{type:"textline",tokens:["void","sB","(","inout","vec3","sn",",","inout","vec3","so",",","inout","vec3","sp",",","inout","vec3","sq",")","{","int","sr",",","ss",";","vec4","st",";","vec3","su",",","sv",",","sw",",","sx",";","float","sy",",","sz",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sy","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","su","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sv","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sw","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sx","=","vec3","(","0.0",",","0.0",",","0.0",")",";","st","=","a_influence",";","for","(","int","sA","=","0",";","sA","<","4",";","sA","++",")","{","sr","=","int","(","st","[","sA","]",")",";","sz","=","fract","(","st","[","sA","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["su","+=","sz","*","rX","(","sn",",","u_quatsb","[","sr","]",",","u_quatsa","[","sr","]",",","u_transb","[","sr","]",",","u_transa","[","sr","]",",","sy",")",";","sv","+=","sz","*","sf","(","so",",","u_quatsb","[","sr","]",",","u_quatsa","[","sr","]",",","sy",")",";","sw","+=","sz","*","sf","(","sp",",","u_quatsb","[","sr","]",",","u_quatsa","[","sr","]",",","sy",")",";","sx","+=","sz","*","sf","(","sq",",","u_quatsb","[","sr","]",",","u_quatsa","[","sr","]",",","sy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["su","+=","sz","*","rX","(","sn",",","u_quatsb","[","sr","]",",","u_transb","[","sr","]",")",";","sx","+=","sz","*","sf","(","sq",",","u_quatsb","[","sr","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["sv","+=","sz","*","sf","(","so",",","u_quatsb","[","sr","]",")",";","sw","+=","sz","*","sf","(","sp",",","u_quatsb","[","sr","]",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","sn","=","su",";","sq","=","sx",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["so","=","sv",";","sp","=","sw",";"]}]}}]},{type:"textline",tokens:["}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","ss","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","ss",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sn","=","rX","(","sn",",","u_quatsb","[","ss","]",",","u_quatsa","[","ss","]",",","u_transb","[","ss","]",",","u_transa","[","ss","]",",","sy",")",";","so","=","sf","(","so",",","u_quatsb","[","ss","]",",","u_quatsa","[","ss","]",",","sy",")",";","sp","=","sf","(","sp",",","u_quatsb","[","ss","]",",","u_quatsa","[","ss","]",",","sy",")",";","sq","=","sf","(","sq",",","u_quatsb","[","ss","]",",","u_quatsa","[","ss","]",",","sy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sn","=","rX","(","sn",",","u_quatsb","[","ss","]",",","u_transb","[","ss","]",")",";","sq","=","sf","(","sq",",","u_quatsb","[","ss","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["so","=","sf","(","so",",","u_quatsb","[","ss","]",")",";","sp","=","sf","(","sp",",","u_quatsb","[","ss","]",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","sM","(","inout","vec3","sC",",","in","vec3","sD",",","in","float","sE",",","in","float","sF",",","in","float","sG",",","in","vec3","sH",",","in","float","sI",")","{","vec3","sJ",";","float","sK",",","sL",";","sK","=","length","(","sD",")",";","sL","=","sF","*","(","1.0","+","0.1","*","fract","(","sK",")",")",";","sK","=","sE","*","sI","*","(","1.0","+","sin","(","2.0","*","3.14","*","sG","*","sL","+","sK",")",")",";","sL","=","(","sC",".","y","-","sD",".","y",")","*","abs","(","sK",")",";","sL","+=","1.0",";","sL","*=","sL",";","sL","=","sL","*","sL","-","sL",";","sJ","=","sC",";","sJ",".","xz","+=","sH",".","xz","*","sL","*","sign","(","sK",")",";","sJ","=","sJ","-","sD",";","if","(","all","(","equal","(","sJ",",","vec3","(","0.0",")",")",")",")","sC","=","sD",";","else","{","sK","=","length","(","sC","-","sD",")",";","sC","=","sD","+","normalize","(","sJ",")","*","sK",";","}","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","sO","(","vec4","sN",")","{","return","sN","*","sN","*","(","3.0","-","2.0","*","sN",")",";","}","vec4","sQ","(","vec4","sP",")","{","return","abs","(","fract","(","sP","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","sS","(","vec4","sR",")","{","return","sO","(","sQ","(","sR",")",")",";","}","void","ti","(","inout","vec3","sT",",","in","float","sU",",","in","vec3","sV",",","in","vec3","sW",",","in","vec3","sX",",","in","float","sY",",","in","float","sZ",",","in","float","s_",",","in","vec3","ta",")","{","vec3","tb",";","vec4","tc",";","vec2","td",",","te",";","float","tf",",","tg",",","th",";","tf","=","dot","(","sX",",","vec3","(","1.0",")",")",";","tg","=","tf","+","ta",".","g",";","th","=","dot","(","sT",",","vec3","(","ta",".","g",")",")",";","td","=","(","sU","+","vec2","(","th",",","tg",")",")",";","tc","=","(","(","fract","(","(","td",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","sW",")","*","sY",";","tc","=","sS","(","tc",")",";","te","=","tc",".","xz","+","tc",".","yw",";","te",".","y","=","0.5","-","te",".","y",";","tb","=","te",".","xyx","*","ta",".","rbr","*","vec3","(","sZ","*","sV",".","x",",","s_",",","sZ","*","sV",".","z",")",";","sT","+=","tb",";","}"]}]}}]},{type:"textline",tokens:["void","tp","(","inout","vec3","tj",",","inout","vec3","tk",",","in","vec3","tl",")","{","vec3","tm",",","tn",",","to",";","tm","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["tn","=","tk",";","to","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tn","=","tj",";","to","=","tk",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ti","(","tn",",","u_time",",","tl",",","tm",",","to",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["sM","(","tn",",","to",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","tm",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sM","(","tn",",","to",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","tm",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["tj","+=","tn","-","tk",";","tk","=","tn",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tj","=","tn",";","tk","=","to",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/nodes.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2},"PARTICLE_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_orco_tex_coord",";","varying","vec3","eg",";"]}]}}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_param",name:"node_TEX_COORD_UV_var_a_uv",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"eG",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["eG","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_param",name:"node_UV_MERGED_var_a_uv",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"eF",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["eF","=","node_UV_MERGED_var_a_uv",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_param",name:"node_UVMAP_var_a_uv",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"eH",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["eH","=","node_UVMAP_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"ez",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["ez","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"],is_optional:false},{type:"node_param",name:"tq",qualifier:["varying","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["tq","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"],is_optional:false},{type:"node_param",name:"tr",qualifier:["varying","float"],is_optional:false}],statements:[{type:"textline",tokens:["tr","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"ts",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["ts","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"],is_optional:false},{type:"node_param",name:"tt",qualifier:["varying","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["tt","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","tu","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["eg","=","a_orco_tex_coord",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/halo_color.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","NUM_LINES",{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","int","ty","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","ty","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","tA","(","float","tz",")","{","return","tz","-","floor","(","tz","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","tJ","(","inout","float","tB",",","in","float","tC","[","ty","]",",","in","float","tD",")","{","float","tE",",","tF",",","tG",",","tH",";","for","(","int","tI","=","0",";","tI","<","NUM_RINGS",";","tI","++",")","{","tE","=","40.0","*","tC","[","tI","]",";","tF","=","300.0","*","(","tA","(","tE",")","-","0.005",")",";","tG","=","tE",";","tH","=","abs","(","tG","*","(","u_halo_size","*","tF","-","tD",")",")",";","tB","+=","1.0","-","min","(","tH",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","tS","(","inout","float","tK",",","in","float","tL","[","ty","]",",","in","float","tM",")","{","float","tN",",","tO",",","tP",",","tQ",";","for","(","int","tR","=","0",";","tR","<","NUM_LINES",";","tR","++",")","{","tN","=","tL","[","tR","]",";","tO","=","tN",";","tP","=","1000.0","*","(","tA","(","tN",")","-","0.005",")",";","tQ","=","20.0","*","abs","(","tO","*","bM",".","x","+","tP","*","bM",".","y",")",";","tK","+=","1.0","-","min","(","tQ",",","1.0",")",";","}","tK","*=","tM",";","}"]}]}}]},{type:"textline",tokens:["void","tZ","(","inout","float","tT",",","in","vec2","tU",")","{","float","tV",",","tW",",","tX",",","tY",";","tW","=","atan","(","tU",".","y",",","tU",".","x",")",";","tW","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","tX","=","cos","(","tW",")",";","tY","=","sin","(","tW",")",";","tW","=","(","tX","*","tU",".","x","+","tY","*","tU",".","y",")","*","(","tX","*","tU",".","y","-","tY","*","tU",".","x",")",";","tV","=","abs","(","tW",")",";","if","(","tV","<","1.0",")","{","tV","=","(","0.01","*","u_halo_size",")","/","(","tV",")",";","tT","*=","sqrt","(","min","(","tV",",","1.0",")",")",";","}","}","vec4","uh","(",")","{","vec4","t_",";","vec3","ua",";","float","ub",",","uc",",","ud",",","ue",";","ub","=","(","bM",".","x","*","bM",".","x","+","bM",".","y","*","bM",".","y",")",";","uc","=","sqrt","(","ub",")",";","ub","=","max","(","1.0","-","ub",",","0.0",")",";","ub","=","pow","(","ub",",","u_halo_hardness",")",";","ud","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","NUM_LINES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","uf","[","ty","]",";","for","(","int","ug","=","0",";","ug","<","ty",";","ug","++",")","{","uf","[","ug","]","=","fract","(","tx","/","float","(","ug","+","1",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["ue","=","0.0",";","tJ","(","ue",",","uf",",","uc",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["uc","=","0.0",";","tS","(","uc",",","uf",",","ub",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["tZ","(","ub",",","bM",")",";"]}]}}]},{type:"textline",tokens:["ub","*=","ud",";","ua","=","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["ue","*=","ub",";","ua","+=","u_halo_rings_color","*","ue",";","ub","+=","ue",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["uc","*=","ud",";","ua","+=","u_halo_lines_color","*","uc",";","ub","+=","uc",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["ub","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uc","=","u_halo_stars_blend","*","(","tw",".","y","-","u_halo_stars_height",")",";","ub","*=","clamp","(","uc",",","0.0",",","1.0",")",";","ub","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["t_","=","vec4","(","ua",",","ub",")",";","return","t_",";","}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["void","uo","(","inout","vec3","ui",",","in","float","uj",",","in","float","uk",",","in","vec4","ul",")","{","float","um",",","un",";","um","=","clamp","(","(","uj","-","u_fog_params",".","z",")","/","u_fog_params",".","y",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOG_TYPE","QUADRATIC",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["um","*=","um",";"]}]}},{type:"elif",expression:["FOG_TYPE","LINEAR",{type:"equal_expr",places:2}],group:{type:"group",parts:[]}},{type:"elif",expression:["FOG_TYPE","INVERSE_QUADRATIC",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["um","=","sqrt","(","um",")",";"]}]}}]},{type:"textline",tokens:["if","(","u_fog_params",".","w",">","0.0",")","{","if","(","uk",">","u_fog_params",".","w",")","um","=","0.0",";","else","{","un","=","(","u_fog_params",".","w","-","max","(","uk",",","0.0",")",")","/","u_fog_params",".","w",";","um","*=","un","*","un",";","}","}","ul",".","a","=","1.0","-","(","1.0","-","um",")","*","(","1.0","-","u_fog_params",".","x",")",";","ui","=","mix","(","ui",",","ul",".","rgb",",","ul",".","a",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","uu","(","in","mat4","up",",","in","vec3","uq",")","{","vec3","ur",",","us",",","ut",";","ur","=","mix","(","up","[","0","]",".","rgb",",","up","[","1","]",".","rgb",",","max","(","sign","(","uq",".","x",")",",","0.0",")",")",";","us","=","mix","(","up","[","2","]",".","rgb",",","up","[","3","]",".","rgb",",","max","(","sign","(","uq",".","z",")",",","0.0",")",")",";","ut","=","vec3","(","up","[","0","]",".","a",",","up","[","1","]",".","a",",","up","[","2","]",".","a",")",";","us","=","mix","(","ur",",","us",",","abs","(","uq",".","z",")",")",";","us","=","mix","(","us",",","ut",",","abs","(","uq",".","y",")",")",";","br","(","us",")",";","return","us",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","uw","(","inout","float","uv",")","{","uv","-=","0.5",";","uv","=","4.0","*","(","uv","*","uv","*","uv",")","+","0.5",";","}"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","uH","(","inout","vec3","ux",",","in","float","uy",",","in","vec3","uz",",","in","float","uA",",","in","vec4","uB",",","in","float","uC",")","{","vec3","uD",",","uE",";","float","uF",",","uG",";","uF","=","max","(","uz",".","y",",","0.0",")",";","uG","=","max","(","uy","-","max","(","uA","/","uF",",","0.0",")",",","0.0",")",";","uG","=","uB",".","w","*","uG",";","uD","=","vec3","(","0.0",",","0.02",",","0.05",")",";","uE","=","uB",".","rgb",";","uG","=","min","(","uG",",","1.0",")",";","uw","(","uG",")",";","uG","*=","clamp","(","2.0","-","uC",",","0.0",",","1.0",")",";","uD","=","mix","(","uE",",","uD",",","min","(","uF",",","1.0",")",")",";","uA","=","clamp","(","-","uA","*","0.03",",","0.0",",","0.8",")",";","uD","*=","1.0","-","uA",";","ux","=","mix","(","ux",",","uD",",","uG",")",";","}"]}]}}]}]}}]},{type:"textline",tokens:["void","uO","(","inout","vec3","uI",",","float","uJ",",","vec3","uK",",","float","uL",")","{","vec4","uM",";","vec3","uN",";"]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uN","=","uu","(","u_cube_fog",",","uK",")",";","uM","=","vec4","(","uN",",","u_fog_color_density",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uM","=","u_fog_color_density",";"]}]}}]},{type:"textline",tokens:["uo","(","uI",",","uJ",",","bC",".","y",",","uM",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uH","(","uI",",","uJ",",","uK",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","uL",")",";"]}]}},{type:"else",group:{type:"group",parts:[]}}]},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","uV","(","vec3","uR",",","float","uS",",","vec2","uT",")","{","vec2","uU",";","uU","=","vec2","(","(","uR",".","x","-","uT",".","x",")","/","uS",",","-","(","uR",".","z","-","uT",".","y",")","/","uS",")",";","return","fract","(","uU",")",";","}","vec2","uZ","(","vec2","uW",",","float","uX",",","vec2","uY",")","{","return","vec2","(","uW",".","x","*","uX",",","-","uW",".","y","*","uX",")","+","uY",";","}","c","u_","(",")","{","return","c","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","c","vv","(","vec3","va",",","vec3","vb",",","vec3","vc",",","vec3","vd",",","vec3","ve",",","PRECISION","sampler2D","vf",",","sampler2D","vg",",","vec3","vh",",","float","vi",",","vec3","vj",",","vec4","vk",",","mat4","vl",")","{","mat4","vm",";","vec4","vn",";","vec2","vo",",","vp",",","vq",";","float","vr",",","vs",";","vec3","vt",";","vt","=","i","(","vk",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","vr","=","-","vt",".","x",";","vs","=","-","vt",".","z",";","vo","=","vec2","(","vj",".","x","+","vi","*","(","-","1.0","-","vr",")","/","2.0",",","vj",".","z","+","vi","*","(","1.0","-","vs",")","/","2.0",")",";","vp","=","uV","(","ve",",","vi",",","vo",")",";","vs","=","vi","/","2.0",";","vq","=","abs","(","uZ","(","vp","-","vec2","(","0.5",")",",","vi",",","vec2","(","0.0",")",")",")",";","vs","=","vs","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","vq",")",">","vs",")","return","u_","(",")",";","vs","=","vi","/","vh",".","z",";","vq","=","(","vp","-","vec2","(","0.5",")",")","*","vs","+","vec2","(","0.5",")",";","vt","=","vt","*","(","vi","/","vh",".","z","-","1.0",")","/","2.0",";","vq",".","x","+=","vt",".","x",";","vq",".","y","-=","vt",".","z",";","vn","=","texture2D","(","vg",",","vq",")",";","vs","=","vn",".","r",";","if","(","vs","<","u_scale_threshold",")","return","u_","(",")",";","vr","=","vh",".","y","-","vh",".","x",";","vr","=","vh",".","y","-","texture2D","(","vf",",","vq",")",".","r","*","vr",";","vq","=","va",".","xz","-","ve",".","xz",";","ve",".","xz","=","uZ","(","vp",",","vi",",","vo",")",";","ve",".","y","=","vr",";","va",".","xz","=","ve",".","xz","+","vq",";","va",".","y","*=","vs",";","va",".","y","+=","vr",";","vt","=","vn",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["va","-=","ve",";","vm","=","ro","(","vj",",","ve",",","vl",")",";","c","vu","=","rB","(","va",",","ve",",","vb",",","vc",",","vd",",","vm",")",";","vu",".","b","=","ve",";","vu",".","f","=","vt",";","return","E","(","vu",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","E","(","c","(","va",",","ve",",","vb",",","vc",",","vd",",","vt",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","vC","(","mat4","vw",",","vec4","vx",",","mat4","vy",")","{","vec4","vz",";","float","vA",";","vec2","vB",";","vB","=","(","vw","*","vy","[","3","]",")",".","xy",";","vA","=","SHADOW_TEX_RES","/","2.0",";","vB","=","floor","(","vB","*","vA","+","0.5",")","/","vA","-","vB",";","vz","=","vw","*","vx",";","vz",".","xy","+=","vB",";","vz",".","xyz","=","0.5","*","(","vz",".","xyz","+","vz",".","w",")",";","return","vz",";","}","void","vH","(","vec3","vD",",","vec3","vE",")","{","vec4","vF",";","mat4","vG",";"]},{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["vG","=","O","(","u_v_light_tsr","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vG","=","O","(","mat3","(","u_v_light_ts","[","0","]",",","u_v_light_r","[","0","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vF","=","vG","*","vec4","(","vD","+","u_normal_offset","*","vE",",","1.0",")",";","bI","=","vC","(","u_p_light_matrix0",",","vF",",","vG",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["vG","=","O","(","u_v_light_tsr","[","1","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vG","=","O","(","mat3","(","u_v_light_ts","[","1","]",",","u_v_light_r","[","1","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vF","=","vG","*","vec4","(","vD","+","u_normal_offset","*","vE",",","1.0",")",";","bJ","=","vC","(","u_p_light_matrix1",",","vF",",","vG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["vG","=","O","(","u_v_light_tsr","[","2","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vG","=","O","(","mat3","(","u_v_light_ts","[","2","]",",","u_v_light_r","[","2","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vF","=","vG","*","vec4","(","vD","+","u_normal_offset","*","vE",",","1.0",")",";","bK","=","vC","(","u_p_light_matrix2",",","vF",",","vG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["vG","=","O","(","u_v_light_tsr","[","3","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vG","=","O","(","mat3","(","u_v_light_ts","[","3","]",",","u_v_light_r","[","3","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vF","=","vG","*","vec4","(","vD","+","u_normal_offset","*","vE",",","1.0",")",";","bL","=","vC","(","u_p_light_matrix3",",","vF",",","vG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["bJ","=","vC","(","u_p_light_matrix1",",","vF",",","vG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["bK","=","vC","(","u_p_light_matrix2",",","vF",",","vG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["bL","=","vC","(","u_p_light_matrix3",",","vF",",","vG",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/lighting_nodes.glslf"] = {type:"group",parts:[{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","vI","=","0.5",";"]},{type:"node",name:"LIGHTING_BEGIN",declarations:[{type:"node_out",name:"wf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wi",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"wj",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"wk",qualifier:["vec2"],is_optional:true},{type:"node_out",name:"wl",qualifier:["vec2"],is_optional:true},{type:"node_out",name:"wm",qualifier:["vec4"],is_optional:true},{type:"node_out",name:"wn",qualifier:["float"],is_optional:true},{type:"node_out",name:"wo",qualifier:["vec4"],is_optional:true}],statements:[{type:"textline",tokens:["wf","=","vJ",";","wg","=","vK",";","wh","=","vL",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wi"],statements:[{type:"textline",tokens:["wi","=","vM",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wj"],statements:[{type:"textline",tokens:["wj","=","vO",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wl"],statements:[{type:"textline",tokens:["wl","=","vQ",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wk"],statements:[{type:"textline",tokens:["wk","=","vR",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wm"],statements:[{type:"textline",tokens:["wm","=","vS",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wn"],statements:[{type:"textline",tokens:["wn","=","vT",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wo"],statements:[{type:"textline",tokens:["wo","=","vU",";"]}]}]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"wp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ws",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"wt",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ws","=","vec4","(","wp","+","wr","*","wq",",","ZERO_VALUE_NODES",")",";","wt","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"wu",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"wv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ww",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wy",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ww","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["wy","=","vI",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["wy","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["wx","=","u_light_color_intensities","[","LAMP_IND","]",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_SHADOW_MAP_IND",1,{type:"negative_expr",places:1},{type:"non_equal_expr",places:2}],statements:[{type:"textline",tokens:["wx","*=","wu","[","LAMP_SHADOW_MAP_IND","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["wd","=","u_light_positions","[","LAMP_IND","]",";","wv","=","wd","-","vN",";"]},{type:"textline",tokens:["vX","=","length","(","wv",")",";","wx","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","vX","*","vX",")",";","wv","=","normalize","(","wv",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["wd","=","u_light_directions","[","LAMP_IND","]",";","vX","=","dot","(","wv",",","wd",")",";","vX","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","vX","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","wx","*=","vX",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["wv","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"wz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wA",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wC",qualifier:["float"],is_optional:false},{type:"node_in",name:"wD",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wE",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wE","=","ZERO_VALUE_NODES",";","if","(","wA",".","r","!=","ZERO_VALUE_NODES",")","{","vX","=","(","UNITY_VALUE_NODES","-","wC",")","*","dot","(","wB",",","wz",")","+","wC",";","if","(","wD","[","0","]","==","ZERO_VALUE_NODES",")","{","wE","=","UNITY_VALUE_NODES",";","}","else","{","vX","=","UNITY_VALUE_NODES","+","abs","(","vX",")",";","vX","=","wD","[","1","]","+","(","UNITY_VALUE_NODES","-","wD","[","1","]",")","*","pow","(","vX",",","wD","[","0","]",")",";","wE","=","clamp","(","vX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","wE","=","max","(","wE",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"wF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wG",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wI",qualifier:["float"],is_optional:false},{type:"node_out",name:"wJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wJ","=","ZERO_VALUE_NODES",";","if","(","wG",".","r","!=","ZERO_VALUE_NODES",")","{","vX","=","(","UNITY_VALUE_NODES","-","wI",")","*","dot","(","wH",",","wF",")","+","wI",";","wJ","=","max","(","vX",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"wK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wL",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wN",qualifier:["float"],is_optional:false},{type:"node_in",name:"wO",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wP","=","ZERO_VALUE_NODES",";","if","(","wL",".","r","!=","ZERO_VALUE_NODES",")","{","vX","=","(","UNITY_VALUE_NODES","-","wN",")","*","dot","(","wM",",","wK",")","+","wN",";","if","(","wO","[","0","]",">","ZERO_VALUE_NODES",")","{","vY","=","max","(","dot","(","wM",",","vP",")",",","ZERO_VALUE_NODES",")",";","vZ","=","wO","[","0","]","*","wO","[","0","]",";","v_","=","UNITY_VALUE_NODES","-","vI","*","(","vZ","/","(","vZ","+","0.33",")",")",";","wd","=","wK","-","vX","*","wM",";","we","=","vP","-","vY","*","wM",";"]},{type:"textline",tokens:["if","(","length","(","wd",")","==","ZERO_VALUE_NODES","||","length","(","we",")","==","ZERO_VALUE_NODES","||","abs","(","vX",")",">","UNITY_VALUE_NODES","||","abs","(","vY",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["wP","=","vX","*","v_",";","else","{","wa","=","acos","(","vX",")",";","vY","=","acos","(","vY",")",";","wd","=","normalize","(","wd",")",";","we","=","normalize","(","we",")",";","wb","=","max","(","wa",",","vY",")",";","wc","=","min","(","wa",",","vY",")",";","wc","*=","0.95",";","vY","=","max","(","dot","(","wd",",","we",")",",","ZERO_VALUE_NODES",")",";","vZ","=","0.45","*","(","vZ","/","(","vZ","+","0.09",")",")",";","wP","=","vX","*","(","v_","+","(","vZ","*","vY","*","sin","(","wb",")","*","tan","(","wc",")",")",")",";","}","}","else","wP","=","vX",";","wP","=","max","(","wP",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"wQ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wR",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wT",qualifier:["float"],is_optional:false},{type:"node_in",name:"wU",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wV",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wV","=","ZERO_VALUE_NODES",";","if","(","wR",".","r","!=","ZERO_VALUE_NODES",")","{","vX","=","(","UNITY_VALUE_NODES","-","wT",")","*","dot","(","wS",",","wQ",")","+","wT",";","wc","=","max","(","dot","(","wS",",","vP",")",",","ZERO_VALUE_NODES",")",";","if","(","wU","[","0","]","<=","UNITY_VALUE_NODES",")","wV","=","vX","*","pow","(","max","(","wc","*","vX",",","0.1",")",",","wU","[","0","]","-","UNITY_VALUE_NODES",")",";","else","wV","=","vX","*","pow","(","1.0001","-","wc",",","wU","[","0","]","-","UNITY_VALUE_NODES",")",";","wV","=","max","(","wV",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"wW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wX",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"w_",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xa",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xa","=","ZERO_VALUE_NODES",";","if","(","wX",".","r","!=","ZERO_VALUE_NODES",")","{","wc","=","(","UNITY_VALUE_NODES","-","wZ",")","*","dot","(","wY",",","wW",")","+","wZ",";","wc","=","acos","(","wc",")",";","if","(","wc","<","w_","[","0","]",")","xa","=","UNITY_VALUE_NODES",";","else","if","(","wc",">","(","w_","[","0","]","+","w_","[","1","]",")","||","w_","[","1","]","==","ZERO_VALUE_NODES",")","xa","=","ZERO_VALUE_NODES",";","else","xa","=","UNITY_VALUE_NODES","-","(","(","wc","-","w_","[","0","]",")","/","w_","[","1","]",")",";","xa","=","max","(","xa",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"xb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xc",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"xd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xe",qualifier:["float"],is_optional:false},{type:"node_in",name:"xf",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xg","=","ZERO_VALUE_NODES",";","if","(","xc",".","g","!=","ZERO_VALUE_NODES",")","{","we","=","normalize","(","xb","+","vP",")",";","xg","=","(","UNITY_VALUE_NODES","-","xe",")","*","max","(","dot","(","xd",",","we",")",",","ZERO_VALUE_NODES",")","+","xe",";","xg","=","pow","(","xg",",","xf","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"xh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xi",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"xj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xk",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xl",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xl","=","ZERO_VALUE_NODES",";","if","(","xi",".","g","!=","ZERO_VALUE_NODES",")","{","we","=","normalize","(","xh","+","vP",")",";","wc","=","max","(","dot","(","xj",",","we",")",",","0.001",")",";"]},{type:"textline",tokens:["vX","=","max","(","dot","(","xj",",","vP",")",",","0.01",")",";","wb","=","max","(","dot","(","xj",",","xh",")",",","0.01",")",";","wc","=","tan","(","acos","(","wc",")",")",";","vY","=","max","(","xk","[","0","]",",","0.001",")",";","xl","=","wb","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","vY","*","vY",")",")","*","(","exp","(","-","(","wc","*","wc",")","/","(","vY","*","vY",")",")","/","(","sqrt","(","vX","*","wb",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"xm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xn",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"xo",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xp",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xq",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xq","=","ZERO_VALUE_NODES",";","if","(","xn",".","g","!=","ZERO_VALUE_NODES",")","{","we","=","normalize","(","xm","+","vP",")",";","wb","=","acos","(","dot","(","we",",","xo",")",")",";","if","(","wb","<","xp","[","0","]",")","xq","=","UNITY_VALUE_NODES",";","else","if","(","wb",">=","xp","[","0","]","+","xp","[","1","]","||","xp","[","1","]","==","ZERO_VALUE_NODES",")","xq","=","ZERO_VALUE_NODES",";","else","xq","=","UNITY_VALUE_NODES","-","(","wb","-","xp","[","0","]",")","/","xp","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"xr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xs",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"xt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xu",qualifier:["float"],is_optional:false},{type:"node_in",name:"xv",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xw",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xw","=","ZERO_VALUE_NODES",";","if","(","xs",".","g","!=","ZERO_VALUE_NODES",")","{","if","(","xv","[","0","]","<","1.0","||","xv","[","1","]","==","ZERO_VALUE_NODES",")","xw","=","ZERO_VALUE_NODES",";","else","{","if","(","xv","[","1","]","<","100.0",")","xv","[","1","]","=","sqrt","(","1.0","/","xv","[","1","]",")",";","else","xv","[","1","]","=","10.0","/","xv","[","1","]",";","we","=","normalize","(","vP","+","xr",")",";","wb","=","(","UNITY_VALUE_NODES","-","xu",")","*","max","(","dot","(","xt",",","we",")",",","ZERO_VALUE_NODES",")","+","xu",";","if","(","wb","<","ZERO_VALUE_NODES",")","xw","=","ZERO_VALUE_NODES",";","else","{","vX","=","max","(","dot","(","xt",",","vP",")",",","0.01",")",";","vY","=","dot","(","xt",",","xr",")",";","if","(","vY","<=","0.01",")","xw","=","ZERO_VALUE_NODES",";","else","{","wc","=","max","(","dot","(","vP",",","we",")",",","0.01",")",";","vZ","=","UNITY_VALUE_NODES",";","vX","=","(","2.0","*","wb","*","vX",")","/","wc",";","vY","=","(","2.0","*","wb","*","vY",")","/","wc",";","vY","=","min","(","min","(","vZ",",","vX",")",",","vY",")",";","vX","=","sqrt","(","pow","(","xv","[","0","]",",","2.0",")","+","pow","(","wc",",","2.0",")","-","UNITY_VALUE_NODES",")",";","wc","=","pow","(","vX","-","wc",",","2.0",")","/","pow","(","vX","+","wc",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","wc","*","(","vX","+","wc",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","wc","*","(","vX","-","wc",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","wb","=","acos","(","wb",")",";","xw","=","max","(","wc","*","vY","*","exp","(","-","pow","(","wb",",","2.0",")","/","(","2.0","*","pow","(","xv","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"xx",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"xy",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xz",qualifier:["float"],is_optional:false},{type:"node_in",name:"xA",qualifier:["float"],is_optional:false},{type:"node_in",name:"xB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xD",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"xE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xH",qualifier:["float"],is_optional:false},{type:"node_out",name:"xI",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"xJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["xJ","=","xy","+","xG","*","xF","*","xA",";","xI","=","xx","+","vec4","(","xG","*","xE","*","xz",",","xA",")",";"]}]},{type:"node",name:"LIGHTING_END",declarations:[{type:"node_in",name:"xK",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"xL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["vV","=","xK",".","rgb",";","vW","=","xL",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","xM","(","vec3","vJ",",","vec3","vK",",","vec3","vL",",","vec3","vM",",","vec3","vN",",","vec3","vO",",","vec3","vP",",","vec2","vQ",",","vec2","vR",",","vec4","vS",",","float","vT",",","vec4","vU",",","out","vec3","vV",",","out","vec3","vW",")","{","float","vX",",","vY",",","vZ",",","v_",",","wa",",","wb",",","wc",";","vec3","wd",",","we",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/particles_nodes.glslf"] = {type:"group",parts:[{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NODE_TEX_ROW",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","xN","=","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xS","(","vec3","xO",")","{","float","xP",",","xQ",";","vec4","xR",";","xR","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","xR","=","mix","(","vec4","(","xO",".","bg",",","xR",".","wz",")",",","vec4","(","xO",".","gb",",","xR",".","xy",")",",","step","(","xO",".","b",",","xO",".","g",")",")",";","xR","=","mix","(","vec4","(","xR",".","xyw",",","xO",".","r",")",",","vec4","(","xO",".","r",",","xR",".","yzx",")",",","step","(","xR",".","x",",","xO",".","r",")",")",";","xP","=","xR",".","x","-","min","(","xR",".","w",",","xR",".","y",")",";","xQ","=","1.0e-10",";","return","vec3","(","abs","(","xR",".","z","+","(","xR",".","w","-","xR",".","y",")","/","(","6.0","*","xP","+","xQ",")",")",",","xP","/","(","xR",".","x","+","xQ",")",",","xR",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xW","(","vec3","xT",")","{","vec3","xU",";","vec4","xV",";","xV","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","xU","=","abs","(","fract","(","vec3","(","xT",".","r",",","xT",".","r",",","xT",".","r",")","+","xV",".","xyz",")","*","6.0","-","xV",".","www",")",";","return","xT",".","b","*","mix","(","xV",".","xxx",",","clamp","(","xU","-","xV",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","xT",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xY","(","vec2","xX",")","{","return","vec3","(","xX","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","x_","(","vec3","xZ",")","{","return","vec2","(","xZ",".","xy","*","xN","+","vec2","(","xN",",","xN",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"yK",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"yL",qualifier:["float"],is_optional:true},{type:"node_out",name:"yM",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yK"],statements:[{type:"textline",tokens:["yK","=","normalize","(","yB",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yL"],statements:[{type:"textline",tokens:["yL","=","abs","(","yB",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yM"],statements:[{type:"textline",tokens:["yM","=","length","(","yB",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"yN",qualifier:["float"],is_optional:false},{type:"node_in",name:"yO",qualifier:["float"],is_optional:false},{type:"node_in",name:"yP",qualifier:["float"],is_optional:false},{type:"node_out",name:"yQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yQ","=","vec3","(","yN",",","yO",",","yP",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"yR",qualifier:["float"],is_optional:false},{type:"node_in",name:"yS",qualifier:["float"],is_optional:false},{type:"node_in",name:"yT",qualifier:["float"],is_optional:false},{type:"node_out",name:"yU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yU","=","xW","(","vec3","(","yR",",","yS",",","yT",")",")",";"]}]},{type:"node",name:"EMPTY_UV",declarations:[{type:"node_out",name:"yV",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yV","=","vec3","(","-","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"EMPTY_VC",declarations:[{type:"node_out",name:"yW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yW","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"yX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yX","=","xY","(","bM",")",";"]}]},{type:"node",name:"GEOMETRY_OR",declarations:[{type:"node_out",name:"yY",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yY","=","2.0","*","vec3","(","bM",",","ZERO_VALUE_NODES",")","-","vec3","(","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"yZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yZ","=","vec3","(","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"y_",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["y_","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"za",qualifier:["float"],is_optional:false},{type:"node_out",name:"zb",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["za","=","UNITY_VALUE_NODES",";","zb","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"zc",qualifier:["float"],is_optional:false},{type:"node_out",name:"zd",qualifier:["float"],is_optional:false},{type:"node_out",name:"ze",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["zc","=","UNITY_VALUE_NODES",";","zd","=","UNITY_VALUE_NODES",";","ze","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"zf",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zf","=","yE",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"zg",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["INVERT_FRONTFACING"],statements:[{type:"textline",tokens:["zg","=","(","gl_FrontFacing",")","?","ZERO_VALUE_NODES",":","UNITY_VALUE_NODES",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["zg","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"zh",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zh","=","yj",";"]}]},{type:"node",name:"GEOMETRY_LO",declarations:[{type:"node_out",name:"zi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zi","[","0","]","=","yB","[","0","]",";","zi","[","1","]","=","yB","[","1","]",";","zi","[","2","]","=","yB","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"zj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zj","=","vec3","(","yF",".","r",",","-","yF",".","b",",","yF",".","g",")",";"]}]},{type:"node",name:"NEW_GEOMETRY",declarations:[{type:"node_out",name:"zk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zo",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zq",qualifier:["float"],is_optional:false},{type:"node_out",name:"zr",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["zk","=","vec3","(","ZERO_VALUE_NODES",")",";","zl","=","vec3","(","ZERO_VALUE_NODES",")",";","zm","=","vec3","(","ZERO_VALUE_NODES",")",";","zn","=","vec3","(","ZERO_VALUE_NODES",")",";","zo","=","vec3","(","ZERO_VALUE_NODES",")",";","zp","=","vec3","(","ZERO_VALUE_NODES",")",";","zq","=","ZERO_VALUE_NODES",";","zr","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"zs",qualifier:["float"],is_optional:false},{type:"node_in",name:"zt",qualifier:["float"],is_optional:false},{type:"node_in",name:"zu",qualifier:["float"],is_optional:false},{type:"node_in",name:"zv",qualifier:["float"],is_optional:false},{type:"node_in",name:"zw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yH","=","xS","(","zw",")",";","yH","[","0","]","+=","(","zs","-","xN",")",";","if","(","yH","[","0","]",">","UNITY_VALUE_NODES",")","yH","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","yH","[","0","]","<","ZERO_VALUE_NODES",")","yH","[","0","]","+=","UNITY_VALUE_NODES",";","yH","*=","vec3","(","UNITY_VALUE_NODES",",","zt",",","zu",")",";","yH","=","mix","(","vec3","(","UNITY_VALUE_NODES",")",",","mix","(","vec3","(","ZERO_VALUE_NODES",")",",","yH",",","step","(","vec3","(","ZERO_VALUE_NODES",")",",","yH",")",")",",","step","(","yH",",","vec3","(","UNITY_VALUE_NODES",")",")",")",";","zx","=","mix","(","zw",",","xW","(","yH",")",",","zv",")",";"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"zy",qualifier:["float"],is_optional:false},{type:"node_in",name:"zz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zA","=","mix","(","zz",",","vec3","(","UNITY_VALUE_NODES",")","-","zz",",","zy",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"zB",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"zC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zD",qualifier:["float"],is_optional:false},{type:"node_out",name:"zE",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zB"],statements:[{type:"textline",tokens:["zB","=","u_lamp_light_color_intensities","[","LAMP_INDEX","]",";"]}]}]},{type:"textline",tokens:["yC","=","u_lamp_light_factors","[","LAMP_INDEX","]",";","yH","=","u_lamp_light_directions","[","LAMP_INDEX","]",";","yI","=","u_lamp_light_positions","[","LAMP_INDEX","]",";","yu","=","yC",".","z",";","if","(","yu","!=","-","UNITY_VALUE_NODES",")","{"]},{type:"textline",tokens:["zC","=","yI","-","bC",";","zD","=","length","(","zC",")",";","zC","=","normalize","(","zC",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zE"],statements:[{type:"textline",tokens:["zE","=","yu","/","(","yu","+","zD","*","zD",")",";","yu","=","yC",".","x",";","yv","=","yC",".","y",";","if","(","yu",">","-","UNITY_VALUE_NODES",")","{","yw","=","dot","(","zC",",","yH",")",";","yw","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","yw","-","yu",")","/","yv",")",";","zE","*=","yw",";","}"]}]}]},{type:"textline",tokens:["}","else","{"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zC"],statements:[{type:"textline",tokens:["zC","=","yH",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zD"],statements:[{type:"textline",tokens:["zD","=","length","(","yI","-","bC",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zE"],statements:[{type:"textline",tokens:["zE","=","UNITY_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"zF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zG",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"zH",qualifier:["float"],is_optional:true},{type:"node_param",name:"ya",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zG"],statements:[{type:"textline",tokens:["zG","=","ya",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zH"],statements:[{type:"textline",tokens:["zH","=","-","dot","(","zF",",","ya",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"zI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zJ","=","-","(","yk","*","vec4","(","zI",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"BSDF_ANISOTROPIC",declarations:[{type:"node_in",name:"zK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zL",qualifier:["float"],is_optional:false},{type:"node_in",name:"zM",qualifier:["float"],is_optional:false},{type:"node_in",name:"zN",qualifier:["float"],is_optional:false},{type:"node_in",name:"zO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zQ","=","zK",";"]},{type:"textline",tokens:["zL",";","zM",";","zN",";","zO",";","zP",";"]}]},{type:"node",name:"BSDF_DIFFUSE",declarations:[{type:"node_in",name:"zR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zS",qualifier:["float"],is_optional:false},{type:"node_in",name:"zT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zU","=","zR",";"]},{type:"textline",tokens:["zS",";","zT",";"]}]},{type:"node",name:"BSDF_GLASS",declarations:[{type:"node_in",name:"zV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zW",qualifier:["float"],is_optional:false},{type:"node_in",name:"zX",qualifier:["float"],is_optional:false},{type:"node_in",name:"zY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zZ","=","zV",";"]},{type:"textline",tokens:["zW",";","zX",";","zY",";"]}]},{type:"node",name:"BSDF_GLOSSY",declarations:[{type:"node_in",name:"z_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Aa",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ab",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ac",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Ac","=","z_",";"]},{type:"textline",tokens:["Aa",";","Ab",";"]}]},{type:"node",name:"BSDF_HAIR",declarations:[{type:"node_in",name:"Ad",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ae",qualifier:["float"],is_optional:false},{type:"node_in",name:"Af",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ag",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ah",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Ah","=","Ad",";"]},{type:"textline",tokens:["Ae",";","Af",";","Ag",";"]}]},{type:"node",name:"BSDF_TRANSPARENT",declarations:[{type:"node_in",name:"Ai",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Aj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Aj","=","Ai",";"]}]},{type:"node",name:"BSDF_TRANSLUCENT",declarations:[{type:"node_in",name:"Ak",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Al",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Am",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Am","=","Ak",";"]},{type:"textline",tokens:["Al",";"]}]},{type:"node",name:"BSDF_REFRACTION",declarations:[{type:"node_in",name:"An",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ao",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ap",qualifier:["float"],is_optional:false},{type:"node_in",name:"Aq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ar",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Ar","[","0","]","=","Ar","[","1","]","=","Ar","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["An",";","Ao",";","Ap",";","Aq",";"]}]},{type:"node",name:"BSDF_TOON",declarations:[{type:"node_in",name:"As",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"At",qualifier:["float"],is_optional:false},{type:"node_in",name:"Au",qualifier:["float"],is_optional:false},{type:"node_in",name:"Av",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Aw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Aw","=","As",";"]},{type:"textline",tokens:["At",";","Au",";","Av",";"]}]},{type:"node",name:"BSDF_VELVET",declarations:[{type:"node_in",name:"Ax",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ay",qualifier:["float"],is_optional:false},{type:"node_in",name:"Az",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AA","=","Ax",";"]},{type:"textline",tokens:["Ay",";","Az",";"]}]},{type:"node",name:"SUBSURFACE_SCATTERING",declarations:[{type:"node_in",name:"AB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AC",qualifier:["float"],is_optional:false},{type:"node_in",name:"AD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AE",qualifier:["float"],is_optional:false},{type:"node_in",name:"AF",qualifier:["float"],is_optional:false},{type:"node_in",name:"AG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AH","[","0","]","=","AH","[","1","]","=","AH","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["AB",";","AD",";","AE",";","AF",";","AG",";","AC",";"]}]},{type:"node",name:"EMISSION",declarations:[{type:"node_in",name:"AI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"AK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AK","=","AI",";"]},{type:"textline",tokens:["AJ",";"]}]},{type:"node",name:"AMBIENT_OCCLUSION",declarations:[{type:"node_in",name:"AL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AM","[","0","]","=","AM","[","1","]","=","AM","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["AL",";"]}]},{type:"node",name:"HOLDOUT",declarations:[{type:"node_out",name:"AN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AN","[","0","]","=","AN","[","1","]","=","AN","[","2","]","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"VOLUME_ABSORPTION",declarations:[{type:"node_in",name:"AO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AP",qualifier:["float"],is_optional:false},{type:"node_out",name:"AQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AQ","[","0","]","=","AQ","[","1","]","=","AQ","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["AO",";","AP",";"]}]},{type:"node",name:"VOLUME_SCATTER",declarations:[{type:"node_in",name:"AR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AS",qualifier:["float"],is_optional:false},{type:"node_in",name:"AT",qualifier:["float"],is_optional:false},{type:"node_out",name:"AU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AU","[","0","]","=","AU","[","1","]","=","AU","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["AR",";","AS",";","AT",";"]}]},{type:"node",name:"BUMP",declarations:[{type:"node_in",name:"AV",qualifier:["float"],is_optional:false},{type:"node_in",name:"AW",qualifier:["float"],is_optional:false},{type:"node_in",name:"AX",qualifier:["float"],is_optional:false},{type:"node_in",name:"AY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AZ","=","AY",";"]},{type:"textline",tokens:["AV",";","AW",";","AX",";"]}]},{type:"node",name:"NORMAL_MAP",declarations:[{type:"node_in",name:"A_",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ba",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Bb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Bb","=","Ba",";"]},{type:"textline",tokens:["A_",";"]}]},{type:"node",name:"VECT_TRANSFORM",declarations:[{type:"node_in",name:"Bc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Bd",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Bd","[","0","]","=","Bd","[","1","]","=","Bd","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Bc",";"]}]},{type:"node",name:"BLACKBODY",declarations:[{type:"node_in",name:"Be",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bf",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Bf","[","0","]","=","Bf","[","1","]","=","Bf","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Be",";"]}]},{type:"node",name:"WAVELENGTH",declarations:[{type:"node_in",name:"Bg",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bh",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Bh","[","0","]","=","Bh","[","1","]","=","Bh","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Bg",";"]}]},{type:"node",name:"SEPXYZ",declarations:[{type:"node_in",name:"Bi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Bj",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bk",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bl",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Bj","=","Bi","[","0","]",";","Bk","=","Bi","[","1","]",";","Bl","=","Bi","[","2","]",";"]}]},{type:"node",name:"COMBXYZ",declarations:[{type:"node_in",name:"Bm",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bn",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bo",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Bp","[","0","]","=","Bm",";","Bp","[","1","]","=","Bn",";","Bp","[","2","]","=","Bo",";"]}]},{type:"node",name:"BRIGHTCONTRAST",declarations:[{type:"node_in",name:"Bq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Br",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bs",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bt",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yw","=","Br","-","Bs","*","xN",";","Bt","=","max","(","(","UNITY_VALUE_NODES","+","Bs",")","*","Bq","+","yw",",","vec3","(","ZERO_VALUE_NODES",")",")",";"]}]},{type:"node",name:"LIGHT_FALLOFF",declarations:[{type:"node_in",name:"Bu",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bv",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bw",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bx",qualifier:["float"],is_optional:false},{type:"node_out",name:"By",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Bw","=","Bx","=","By","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Bu",";","Bv",";"]}]},{type:"node",name:"TEX_IMAGE",declarations:[{type:"node_in",name:"Bz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["BA","[","0","]","=","BA","[","1","]","=","BA","[","2","]","=","ZERO_VALUE_NODES",";","BB","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Bz",";"]}]},{type:"node",name:"TEX_ENVIRONMENT",declarations:[{type:"node_in",name:"BC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BD",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["BD","[","0","]","=","BD","[","1","]","=","BD","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["BC",";"]}]},{type:"node",name:"TEX_SKY",declarations:[{type:"node_in",name:"BE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["BF","[","0","]","=","BF","[","1","]","=","BF","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["BE",";"]}]},{type:"node",name:"TEX_NOISE",declarations:[{type:"node_in",name:"BG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"BH",qualifier:["float"],is_optional:false},{type:"node_in",name:"BI",qualifier:["float"],is_optional:false},{type:"node_in",name:"BJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"BK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["BK","[","0","]","=","BK","[","1","]","=","BK","[","2","]","=","ZERO_VALUE_NODES",";","BL","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["BG",";","BH",";","BI",";","BJ",";"]}]},{type:"node",name:"TEX_WAVE",declarations:[{type:"node_in",name:"BM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"BN",qualifier:["float"],is_optional:false},{type:"node_in",name:"BO",qualifier:["float"],is_optional:false},{type:"node_in",name:"BP",qualifier:["float"],is_optional:false},{type:"node_in",name:"BQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"BR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["BR","[","0","]","=","BR","[","1","]","=","BR","[","2","]","=","ZERO_VALUE_NODES",";","BS","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["BM",";","BN",";","BO",";","BP",";","BQ",";"]}]},{type:"node",name:"TEX_VORONOI",declarations:[{type:"node_in",name:"BT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"BU",qualifier:["float"],is_optional:false},{type:"node_out",name:"BV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BW",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["BV","[","0","]","=","BV","[","1","]","=","BV","[","2","]","=","ZERO_VALUE_NODES",";","BW","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["BT",";","BU",";"]}]},{type:"node",name:"TEX_MUSGRAVE",declarations:[{type:"node_in",name:"BX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"BY",qualifier:["float"],is_optional:false},{type:"node_in",name:"BZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"B_",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ca",qualifier:["float"],is_optional:false},{type:"node_in",name:"Cb",qualifier:["float"],is_optional:false},{type:"node_in",name:"Cc",qualifier:["float"],is_optional:false},{type:"node_out",name:"Cd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ce",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Cd","[","0","]","=","Cd","[","1","]","=","Cd","[","2","]","=","ZERO_VALUE_NODES",";","Ce","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["BX",";","BY",";","BZ",";","B_",";","Ca",";","Cb",";","Cc",";"]}]},{type:"node",name:"TEX_GRADIENT",declarations:[{type:"node_in",name:"Cf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Cg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ch",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Cg","[","0","]","=","Cg","[","1","]","=","Cg","[","2","]","=","ZERO_VALUE_NODES",";","Ch","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Cf",";"]}]},{type:"node",name:"TEX_MAGIC",declarations:[{type:"node_in",name:"Ci",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cj",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ck",qualifier:["float"],is_optional:false},{type:"node_out",name:"Cl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Cm",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Cl","[","0","]","=","Cl","[","1","]","=","Cl","[","2","]","=","ZERO_VALUE_NODES",";","Cm","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Ci",";","Cj",";","Ck",";"]}]},{type:"node",name:"TEX_CHECKER",declarations:[{type:"node_in",name:"Cn",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Co",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cq",qualifier:["float"],is_optional:false},{type:"node_out",name:"Cr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Cs",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Cr","[","0","]","=","Cr","[","1","]","=","Cr","[","2","]","=","ZERO_VALUE_NODES",";","Cs","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Cn",";","Co",";","Cp",";","Cq",";"]}]},{type:"node",name:"TEX_BRICK",declarations:[{type:"node_in",name:"Ct",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cx",qualifier:["float"],is_optional:false},{type:"node_in",name:"Cy",qualifier:["float"],is_optional:false},{type:"node_in",name:"Cz",qualifier:["float"],is_optional:false},{type:"node_in",name:"CA",qualifier:["float"],is_optional:false},{type:"node_in",name:"CB",qualifier:["float"],is_optional:false},{type:"node_out",name:"CC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["CC","[","0","]","=","CC","[","1","]","=","CC","[","2","]","=","ZERO_VALUE_NODES",";","CD","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Ct",";","Cu",";","Cv",";","Cw",";","Cx",";","Cy",";","Cz",";","CA",";","CB",";"]}]},{type:"node",name:"ADD_SHADER",declarations:[{type:"node_in",name:"CE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"CF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CG","=","clamp","(","CE","+","CF",",","vec3","(","ZERO_VALUE_NODES",")",",","vec3","(","UNITY_VALUE_NODES",")",")",";"]}]},{type:"node",name:"MIX_SHADER",declarations:[{type:"node_in",name:"CH",qualifier:["float"],is_optional:false},{type:"node_in",name:"CI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"CJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yw","=","clamp","(","CH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","CK","=","yw","*","CI","+","(","UNITY_VALUE_NODES","-","yw",")","*","CJ",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_out",name:"CL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CM",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CL"],statements:[{type:"textline",tokens:["CL","=","xY","(","bM",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CM"],statements:[{type:"textline",tokens:["CM","=","vec3","(","bM",",","ZERO_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_out",name:"CN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CN","=","vec3","(","bM",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_NO",declarations:[{type:"node_out",name:"CO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CO","=","yG",";"]}]},{type:"node",name:"TEX_COORD_GE",declarations:[{type:"node_out",name:"CP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CP","=","vec3","(","bM",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_OB",declarations:[{type:"node_out",name:"CQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CQ","[","0","]","=","CQ","[","1","]","=","CQ","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_CA",declarations:[{type:"node_out",name:"CR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CR","[","0","]","=","yB","[","0","]",";","CR","[","1","]","=","yB","[","1","]",";","CR","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_WI",declarations:[{type:"node_out",name:"CS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CS","[","0","]","=","CS","[","1","]","=","CS","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_RE",declarations:[{type:"node_out",name:"CT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CT","[","0","]","=","CT","[","1","]","=","CT","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_out",name:"CU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CU","=","vec3","(","bM",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_out",name:"CV",qualifier:["float"],is_optional:false},{type:"node_out",name:"CW",qualifier:["float"],is_optional:false},{type:"node_out",name:"CX",qualifier:["float"],is_optional:false},{type:"node_out",name:"CY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"C_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Da",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"yb",qualifier:["varying","vec4"],is_optional:true},{type:"node_param",name:"yc",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"yd",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"ye",qualifier:["varying","vec3"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["PARTICLE_BATCH"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CV"],statements:[{type:"textline",tokens:["CV","=","yb","[","0","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CW"],statements:[{type:"textline",tokens:["CW","=","yb","[","1","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CX"],statements:[{type:"textline",tokens:["CX","=","yb","[","2","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CY"],statements:[{type:"textline",tokens:["CY","=","vec3","(","yc",".","r",",","-","yc",".","b",",","yc",".","g",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CZ"],statements:[{type:"textline",tokens:["CZ","=","yb","[","3","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_C_"],statements:[{type:"textline",tokens:["C_","=","vec3","(","yd",".","r",",","-","yd",".","b",",","yd",".","g",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Da"],statements:[{type:"textline",tokens:["Da","=","vec3","(","ye",".","r",",","-","ye",".","b",",","ye",".","g",")",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["CV","=","ZERO_VALUE_NODES",";","CW","=","ZERO_VALUE_NODES",";","CX","=","ZERO_VALUE_NODES",";","CY","=","vec3","(","ZERO_VALUE_NODES",")",";","CZ","=","ZERO_VALUE_NODES",";","C_","=","CY",";","Da","=","CY",";"]}]}]}]},{type:"node",name:"HAIR_INFO",declarations:[{type:"node_out",name:"Db",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dc",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dd",qualifier:["float"],is_optional:false},{type:"node_out",name:"De",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Db","=","ZERO_VALUE_NODES",";","Dc","=","ZERO_VALUE_NODES",";","Dd","=","ZERO_VALUE_NODES",";","De","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"OBJECT_INFO",declarations:[{type:"node_out",name:"Df",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Dg",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dh",qualifier:["float"],is_optional:false},{type:"node_out",name:"Di",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Dg","=","ZERO_VALUE_NODES",";","Dh","=","ZERO_VALUE_NODES",";","Di","=","ZERO_VALUE_NODES",";","Df","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"WIREFRAME",declarations:[{type:"node_in",name:"Dj",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dk",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Dk","=","Dj",";"]}]},{type:"node",name:"TANGENT",declarations:[{type:"node_out",name:"Dl",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Dl","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LAYER_WEIGHT",declarations:[{type:"node_in",name:"Dm",qualifier:["float"],is_optional:false},{type:"node_in",name:"Dn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Do",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Do","=","Dp","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Dn",";","Dm",";"]}]},{type:"node",name:"LIGHT_PATH",declarations:[{type:"node_out",name:"Dq",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dr",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ds",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dt",qualifier:["float"],is_optional:false},{type:"node_out",name:"Du",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dv",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dw",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dx",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dy",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dz",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Dq","=","Dr","=","Ds","=","ZERO_VALUE_NODES",";","Dt","=","Du","=","Dv","=","ZERO_VALUE_NODES",";","Dw","=","Dw","=","Dy","=","Dz","=","ZERO_VALUE_NODES",";","Dx","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"ATTRIBUTE",declarations:[{type:"node_out",name:"DA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DC",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["DA","=","DB","=","vec3","(","ZERO_VALUE_NODES",")",";","DC","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"SCRIPT",declarations:[],statements:[]},{type:"node",name:"CURVE_VEC",declarations:[{type:"node_in",name:"DD",qualifier:["float"],is_optional:false},{type:"node_in",name:"DE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["DF","=","DE",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_R"],statements:[{type:"textline",tokens:["DF",".","r","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","DE",".","r","+","0.5",",","NODE_TEX_ROW",")",")",".","r","-","0.5",")","*","2.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_G"],statements:[{type:"textline",tokens:["DF",".","g","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","DE",".","g","+","0.5",",","NODE_TEX_ROW",")",")",".","g","-","0.5",")","*","2.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_B"],statements:[{type:"textline",tokens:["DF",".","b","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","DE",".","b","+","0.5",",","NODE_TEX_ROW",")",")",".","b","-","0.5",")","*","2.0",";"]}]}]},{type:"textline",tokens:["DF","=","mix","(","DE",",","DF",",","DD",")",";"]}]},{type:"node",name:"CURVE_RGB",declarations:[{type:"node_in",name:"DG",qualifier:["float"],is_optional:false},{type:"node_in",name:"DH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DI",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["READ_A"],statements:[{type:"textline",tokens:["yw","=","texture2D","(","u_nodes_texture",",","vec2","(","DH",".","r",",","NODE_TEX_ROW",")",")",".","a",";","yv","=","texture2D","(","u_nodes_texture",",","vec2","(","DH",".","g",",","NODE_TEX_ROW",")",")",".","a",";","yu","=","texture2D","(","u_nodes_texture",",","vec2","(","DH",".","b",",","NODE_TEX_ROW",")",")",".","a",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["yw","=","DH",".","r",";","yv","=","DH",".","g",";","yu","=","DH",".","b",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_R"],statements:[{type:"textline",tokens:["DI",".","r","=","texture2D","(","u_nodes_texture",",","vec2","(","yw",",","NODE_TEX_ROW",")",")",".","r",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["DI",".","r","=","yw",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_G"],statements:[{type:"textline",tokens:["DI",".","g","=","texture2D","(","u_nodes_texture",",","vec2","(","yv",",","NODE_TEX_ROW",")",")",".","g",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["DI",".","g","=","yv",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_B"],statements:[{type:"textline",tokens:["DI",".","b","=","texture2D","(","u_nodes_texture",",","vec2","(","yu",",","NODE_TEX_ROW",")",")",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["DI",".","b","=","yu",";"]}]}]},{type:"textline",tokens:["DI","=","mix","(","DH",",","DI",",","DG",")",";"]}]},{type:"node",name:"VALTORGB",declarations:[{type:"node_in",name:"DJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"DK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["yC","=","texture2D","(","u_nodes_texture",",","vec2","(","DJ",",","NODE_TEX_ROW",")",")",";","DK","=","yC",".","rgb",";","DL","=","yC",".","a",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"DM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["DN","=","DM",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["DN","=","(","MAPPING_TRS_MATRIX","*","vec4","(","DN",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["DN","=","DN","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["DN","=","DN","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["DN","=","max","(","DN",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["DN","=","min","(","DN",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["DN","=","normalize","(","DN",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"DO",qualifier:["float"],is_optional:false},{type:"node_in",name:"DP",qualifier:["float"],is_optional:false},{type:"node_out",name:"DQ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["DQ","=","DO","+","DP",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["DQ","=","clamp","(","DQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"DR",qualifier:["float"],is_optional:false},{type:"node_in",name:"DS",qualifier:["float"],is_optional:false},{type:"node_out",name:"DT",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["DT","=","DR","-","DS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["DT","=","clamp","(","DT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"DU",qualifier:["float"],is_optional:false},{type:"node_in",name:"DV",qualifier:["float"],is_optional:false},{type:"node_out",name:"DW",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["DW","=","DU","*","DV",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["DW","=","clamp","(","DW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"DX",qualifier:["float"],is_optional:false},{type:"node_in",name:"DY",qualifier:["float"],is_optional:false},{type:"node_out",name:"DZ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["DZ","=","(","DY","!=","ZERO_VALUE_NODES",")","?","DX","/","DY",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["DZ","=","clamp","(","DZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"D_",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ea",qualifier:["float"],is_optional:false},{type:"node_out",name:"Eb",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Eb","=","sin","(","D_",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Eb","=","clamp","(","Eb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Ea",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"Ec",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ed",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ee",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ee","=","cos","(","Ec",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Ee","=","clamp","(","Ee",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Ed",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"Ef",qualifier:["float"],is_optional:false},{type:"node_in",name:"Eg",qualifier:["float"],is_optional:false},{type:"node_out",name:"Eh",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Eh","=","tan","(","Ef",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Eh","=","clamp","(","Eh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Eg",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"Ei",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ej",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ek",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ek","=","(","Ei","<=","UNITY_VALUE_NODES","&&","Ei",">=","-","UNITY_VALUE_NODES",")","?","asin","(","Ei",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Ek","=","clamp","(","Ek",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Ej",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"El",qualifier:["float"],is_optional:false},{type:"node_in",name:"Em",qualifier:["float"],is_optional:false},{type:"node_out",name:"En",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["En","=","(","El","<=","UNITY_VALUE_NODES","&&","El",">=","-","UNITY_VALUE_NODES",")","?","acos","(","El",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["En","=","clamp","(","En",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Em",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"Eo",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ep",qualifier:["float"],is_optional:false},{type:"node_out",name:"Eq",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Eq","=","atan","(","Eo",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Eq","=","clamp","(","Eq",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Ep",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"Er",qualifier:["float"],is_optional:false},{type:"node_in",name:"Es",qualifier:["float"],is_optional:false},{type:"node_out",name:"Et",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","Er","<","ZERO_VALUE_NODES","&&","Es","!=","floor","(","Es",")",")","Et","=","ZERO_VALUE_NODES",";","else","if","(","Es","==","ZERO_VALUE_NODES",")"]},{type:"textline",tokens:["Et","=","UNITY_VALUE_NODES",";","else","if","(","Er","<","ZERO_VALUE_NODES",")","Et","=","mix","(","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","sign","(","mod","(","-","Es",",","2.0",")",")",")","*","pow","(","-","Er",",","Es",")",";","else","if","(","Er","==","ZERO_VALUE_NODES",")","Et","=","ZERO_VALUE_NODES",";","else","Et","=","pow","(","Er",",","Es",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Et","=","clamp","(","Et",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"Eu",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ev",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ew",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ew","=","(","Eu",">","ZERO_VALUE_NODES","&&","Ev",">","ZERO_VALUE_NODES",")","?","log2","(","Eu",")","/","log2","(","Ev",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Ew","=","clamp","(","Ew",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"Ex",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ey",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ez",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ez","=","min","(","Ex",",","Ey",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Ez","=","clamp","(","Ez",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"EA",qualifier:["float"],is_optional:false},{type:"node_in",name:"EB",qualifier:["float"],is_optional:false},{type:"node_out",name:"EC",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EC","=","max","(","EA",",","EB",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EC","=","clamp","(","EC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"ED",qualifier:["float"],is_optional:false},{type:"node_in",name:"EE",qualifier:["float"],is_optional:false},{type:"node_out",name:"EF",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EF","=","floor","(","ED","+","xN",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EF","=","clamp","(","EF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["EE",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"EG",qualifier:["float"],is_optional:false},{type:"node_in",name:"EH",qualifier:["float"],is_optional:false},{type:"node_out",name:"EI",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EI","=","(","EG","<","EH",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EI","=","clamp","(","EI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"EJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"EK",qualifier:["float"],is_optional:false},{type:"node_out",name:"EL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EL","=","(","EJ",">","EK",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EL","=","clamp","(","EL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"EM",qualifier:["float"],is_optional:false},{type:"node_in",name:"EN",qualifier:["float"],is_optional:false},{type:"node_out",name:"EO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EO","=","abs","(","EN",")",">","0.000001","?","mod","(","EM",",","EN",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EO","=","clamp","(","EO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"EP",qualifier:["float"],is_optional:false},{type:"node_in",name:"EQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"ER",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ER","=","abs","(","EP",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ER","=","clamp","(","ER",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["EQ",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"ES",qualifier:["float"],is_optional:false},{type:"node_in",name:"ET",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"EU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"EV",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","clamp","(","ES",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","EV","=","mix","(","ET",",","EU",",","yu",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["EV","=","clamp","(","EV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"EW",qualifier:["float"],is_optional:false},{type:"node_in",name:"EX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"EY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"EZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","clamp","(","EW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","EZ","=","mix","(","EX",",","EX","+","EY",",","yu",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["EZ","=","clamp","(","EZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"E_",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fa",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","clamp","(","E_",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Fc","=","mix","(","Fa",",","Fa","*","Fb",",","yu",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fc","=","clamp","(","Fc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"Fd",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fe",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ff",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","clamp","(","Fd",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Fg","=","mix","(","Fe",",","Fe","-","Ff",",","yu",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fg","=","clamp","(","Fg",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"Fh",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fk",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","clamp","(","Fh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yv","=","UNITY_VALUE_NODES","-","yu",";","Fk","=","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","yv",")","+","yu","*","(","vec3","(","UNITY_VALUE_NODES",")","-","Fj",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","Fi",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fk","=","clamp","(","Fk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"Fl",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fo",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","clamp","(","Fl",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yv","=","UNITY_VALUE_NODES","-","yu",";","Fn","+=","step","(","Fn",",","vec3","(","ZERO_VALUE_NODES",")",")",";","Fo","=","yv","*","Fm","+","yu","*","Fm","/","Fn",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fo","=","clamp","(","Fo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"Fp",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","clamp","(","Fp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Fs","=","mix","(","Fq",",","abs","(","Fq","-","Fr",")",",","yu",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fs","=","clamp","(","Fs",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"Ft",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","clamp","(","Ft",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Fw","=","min","(","Fu",".","rgb",",","Fv",".","rgb","*","yu",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fw","=","clamp","(","Fw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"Fx",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fy",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","clamp","(","Fx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FA","=","max","(","Fy",".","rgb",",","Fz",".","rgb","*","yu",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FA","=","clamp","(","FA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"FB",qualifier:["float"],is_optional:false},{type:"node_in",name:"FC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","clamp","(","FB",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yI","=","vec3","(","UNITY_VALUE_NODES","-","yu",")",";","FE","=","mix","(","FC","*","(","yI","+","2.0","*","yu","*","FD",")",",","vec3","(","UNITY_VALUE_NODES",")","-","(","yI","+","2.0","*","yu","*","(","vec3","(","UNITY_VALUE_NODES",")","-","FD",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","FC",")",",","step","(","xN",",","FC",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FE","=","clamp","(","FE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"FF",qualifier:["float"],is_optional:false},{type:"node_in",name:"FG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","clamp","(","FF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yI","=","vec3","(","UNITY_VALUE_NODES",")","-","yu","*","FH",";","yH","=","clamp","(","FG","/","yI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FI","=","mix","(","mix","(","yH",",","vec3","(","UNITY_VALUE_NODES",")",",","step","(","yI",",","vec3","(","ZERO_VALUE_NODES",")",")",")",",","FG",",","step","(","FG",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FI","=","clamp","(","FI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"FJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"FK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","clamp","(","FJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yI","=","vec3","(","UNITY_VALUE_NODES","-","yu",")",";","yI","=","yI","+","yu","*","FL",";","yH","=","clamp","(","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","UNITY_VALUE_NODES",")","-","FK",")","/","yI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FM","=","mix","(","yH",",","vec3","(","ZERO_VALUE_NODES",")",",","step","(","yI",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FM","=","clamp","(","FM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"FN",qualifier:["float"],is_optional:false},{type:"node_in",name:"FO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","clamp","(","FN",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FQ","=","FO",";","yH","=","xS","(","FP",")",";","if","(","yH",".","y","!=","ZERO_VALUE_NODES",")","{","yI","=","xS","(","FQ",")",";","yI",".","x","=","yH",".","x",";","yJ","=","xW","(","yI",")",";","FQ","=","mix","(","FQ",",","yJ",",","yu",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FQ","=","clamp","(","FQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"FR",qualifier:["float"],is_optional:false},{type:"node_in",name:"FS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","clamp","(","FR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yv","=","UNITY_VALUE_NODES","-","yu",";","FU","=","FS",";","yJ","=","xS","(","FU",")",";","if","(","yJ",".","y","!=","ZERO_VALUE_NODES",")","{","yI","=","xS","(","FT",")",";","yJ",".","y","=","yv","*","yJ",".","y","+","yu","*","yI",".","y",";","FU","=","xW","(","yJ",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FU","=","clamp","(","FU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"FV",qualifier:["float"],is_optional:false},{type:"node_in",name:"FW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FY",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","clamp","(","FV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yv","=","UNITY_VALUE_NODES","-","yu",";","yJ","=","xS","(","FW",")",";","yI","=","xS","(","FX",")",";","yJ",".","z","=","yv","*","yJ",".","z","+","yu","*","yI",".","z",";","FY","=","xW","(","yJ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FY","=","clamp","(","FY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"FZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"F_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ga",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","clamp","(","FZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Gb","=","F_",";","yI","=","xS","(","Ga",")",";","if","(","yI",".","y","!=","ZERO_VALUE_NODES",")","{","yJ","=","xS","(","Gb",")",";","yJ",".","x","=","yI",".","x",";","yJ",".","y","=","yI",".","y",";","yH","=","xW","(","yJ",")",";","Gb","=","mix","(","Gb",",","yH",",","yu",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Gb","=","clamp","(","Gb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"Gc",qualifier:["float"],is_optional:false},{type:"node_in",name:"Gd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ge",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gf",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","clamp","(","Gc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yv","=","UNITY_VALUE_NODES","-","yu",";","yH","=","Ge","+","Gd","-","Ge","*","Gd",";","Gf","=","Gd","*","(","vec3","(","yv",")","+","vec3","(","yu",")","*","(","(","vec3","(","UNITY_VALUE_NODES",")","-","Gd",")","*","Ge","+","yH",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Gf","=","clamp","(","Gf",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"Gg",qualifier:["float"],is_optional:false},{type:"node_in",name:"Gh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yu","=","clamp","(","Gg",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Gj","=","Gh","+","yu","*","(","2.0","*","Gi","-","vec3","(","UNITY_VALUE_NODES",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Gj","=","clamp","(","Gj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"Gk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gl",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["yl","=","Gk",";","yp","=","Gl",";"]}]},{type:"node",name:"MATERIAL_BEGIN",declarations:[{type:"node_in",name:"Gm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gn",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Go",qualifier:["float"],is_optional:false},{type:"node_in",name:"Gp",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"Gq",qualifier:["float"],is_optional:true},{type:"node_out",name:"Gr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gs",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gw",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Gx",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Gy",qualifier:["vec4"],is_optional:false},{type:"node_param",name:"yf",qualifier:["const","vec2"],is_optional:true},{type:"node_param",name:"yg",qualifier:["const","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Gt","=","clamp","(","Gm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["Gu","=","yg","[","0","]","*","clamp","(","Gn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["Gv","=","normalize","(","Gp",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["Gv","=","yG",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["SHADELESS_MAT",{type:"logic_negative_expr",places:1}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"textline",tokens:["Gr","=","Gq","*","Gt",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["Gr","=","ys","*","Gt",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["Gt","*=","Go",";"]}]}]},{type:"textline",tokens:["Gs","=","yt","*","u_environment_energy","*","dS","(","Gv",")",";","Gy","=","vec4","(","1.0",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],statements:[{type:"textline",tokens:["Gw","=","vec2","(","yf","[","0","]",",","yf","[","1","]",")",";"]},{type:"textline",tokens:["Gx","=","vec2","(","yg","[","1","]",",","yg","[","2","]",")",";"]}]}]},{type:"textline",tokens:["yo","=","Gy",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["Gr","=","vec3","(","ZERO_VALUE_NODES",")",";","Gs","=","vec3","(","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATERIAL_END",declarations:[{type:"node_in",name:"Gz",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"GA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GC",qualifier:["float"],is_optional:true},{type:"node_in",name:"GD",qualifier:["float"],is_optional:true},{type:"node_in",name:"GE",qualifier:["float"],is_optional:true},{type:"node_out",name:"GF",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"GG",qualifier:["float"],is_optional:true},{type:"node_out",name:"GH",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"GI",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"GJ",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"yh",qualifier:["float"],is_optional:false},{type:"node_param",name:"yi",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["GC",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GF"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["GF","=","Gz",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["GF","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["GF","+=","GA",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GH"],statements:[{type:"textline",tokens:["GH","=","GB",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GI"],statements:[{type:"textline",tokens:["GI","=","Gz",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GJ"],statements:[{type:"textline",tokens:["GJ","=","GA",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GG"],statements:[{type:"textline",tokens:["GG","=","clamp","(","GE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["yu","=","max","(","max","(","GA",".","r",",","GA",".","g",")",",","GA",".","b",")","*","GD",";","GG","=","clamp","(","GE","*","(","UNITY_VALUE_NODES","-","yu",")","+","yu",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]}]},{type:"node_else",statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GG"],statements:[{type:"textline",tokens:["GG","=","clamp","(","yh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["yu","=","max","(","max","(","GA",".","r",",","GA",".","g",")",",","GA",".","b",")","*","yi",";","GG","=","yh","*","(","UNITY_VALUE_NODES","-","yu",")","+","yu",";"]}]}]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["ym","=","GA",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["ym","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["yn","=","GB",";"]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"GK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"GN",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"GO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["GN","=","vec4","(","GK","+","GM","*","GL",",","ZERO_VALUE_NODES",")",";","GO","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"GP",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"GQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"GR",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"GS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"GT",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["GR","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["GT","=","xN",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["GT","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["GS","=","u_light_color_intensities","[","LAMP_IND","]",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_SHADOW_MAP_IND",1,{type:"negative_expr",places:1},{type:"non_equal_expr",places:2}],statements:[{type:"textline",tokens:["GS","*=","GP","[","LAMP_SHADOW_MAP_IND","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["yH","=","u_light_positions","[","LAMP_IND","]",";","GQ","=","yH","-","yF",";"]},{type:"textline",tokens:["yu","=","length","(","GQ",")",";","GS","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","yu","*","yu",")",";","GQ","=","normalize","(","GQ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["yH","=","u_light_directions","[","LAMP_IND","]",";","yu","=","dot","(","GQ",",","yH",")",";","yu","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","yu","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","GS","*=","yu",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["GQ","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"GU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GV",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"GW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GX",qualifier:["float"],is_optional:false},{type:"node_in",name:"GY",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"GZ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["GZ","=","ZERO_VALUE_NODES",";","if","(","GV",".","r","!=","ZERO_VALUE_NODES",")","{","yu","=","(","UNITY_VALUE_NODES","-","GX",")","*","dot","(","GW",",","GU",")","+","GX",";","if","(","GY","[","0","]","==","ZERO_VALUE_NODES",")","{","GZ","=","UNITY_VALUE_NODES",";","}","else","{","yu","=","UNITY_VALUE_NODES","+","abs","(","yu",")",";","yu","=","GY","[","1","]","+","(","UNITY_VALUE_NODES","-","GY","[","1","]",")","*","pow","(","yu",",","GY","[","0","]",")",";","GZ","=","clamp","(","yu",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","GZ","=","max","(","GZ",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"G_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ha",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Hb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hc",qualifier:["float"],is_optional:false},{type:"node_out",name:"Hd",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Hd","=","ZERO_VALUE_NODES",";","if","(","Ha",".","r","!=","ZERO_VALUE_NODES",")","{","yu","=","(","UNITY_VALUE_NODES","-","Hc",")","*","dot","(","Hb",",","G_",")","+","Hc",";","Hd","=","max","(","yu",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"He",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hf",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Hg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hh",qualifier:["float"],is_optional:false},{type:"node_in",name:"Hi",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Hj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Hj","=","ZERO_VALUE_NODES",";","if","(","Hf",".","r","!=","ZERO_VALUE_NODES",")","{","yu","=","(","UNITY_VALUE_NODES","-","Hh",")","*","dot","(","Hg",",","He",")","+","Hh",";","if","(","Hi","[","0","]",">","ZERO_VALUE_NODES",")","{","yv","=","max","(","dot","(","Hg",",","yj",")",",","ZERO_VALUE_NODES",")",";","yw","=","Hi","[","0","]","*","Hi","[","0","]",";","yx","=","UNITY_VALUE_NODES","-","xN","*","(","yw","/","(","yw","+","0.33",")",")",";","yH","=","He","-","yu","*","Hg",";","yJ","=","yj","-","yv","*","Hg",";"]},{type:"textline",tokens:["if","(","length","(","yH",")","==","ZERO_VALUE_NODES","||","length","(","yJ",")","==","ZERO_VALUE_NODES","||","abs","(","yu",")",">","UNITY_VALUE_NODES","||","abs","(","yv",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["Hj","=","yu","*","yx",";","else","{","yy","=","acos","(","yu",")",";","yv","=","acos","(","yv",")",";","yH","=","normalize","(","yH",")",";","yJ","=","normalize","(","yJ",")",";","yz","=","max","(","yy",",","yv",")",";","yA","=","min","(","yy",",","yv",")",";","yA","*=","0.95",";","yv","=","max","(","dot","(","yH",",","yJ",")",",","ZERO_VALUE_NODES",")",";","yw","=","0.45","*","(","yw","/","(","yw","+","0.09",")",")",";","Hj","=","yu","*","(","yx","+","(","yw","*","yv","*","sin","(","yz",")","*","tan","(","yA",")",")",")",";","}","}","else","Hj","=","yu",";","Hj","=","max","(","Hj",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"Hk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hl",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Hm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hn",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ho",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Hp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Hp","=","ZERO_VALUE_NODES",";","if","(","Hl",".","r","!=","ZERO_VALUE_NODES",")","{","yu","=","(","UNITY_VALUE_NODES","-","Hn",")","*","dot","(","Hm",",","Hk",")","+","Hn",";","yA","=","max","(","dot","(","Hm",",","yj",")",",","ZERO_VALUE_NODES",")",";","if","(","Ho","[","0","]","<=","UNITY_VALUE_NODES",")","Hp","=","yu","*","pow","(","max","(","yA","*","yu",",","0.1",")",",","Ho","[","0","]","-","UNITY_VALUE_NODES",")",";","else","Hp","=","yu","*","pow","(","1.0001","-","yA",",","Ho","[","0","]","-","UNITY_VALUE_NODES",")",";","Hp","=","max","(","Hp",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"Hq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hr",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Hs",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ht",qualifier:["float"],is_optional:false},{type:"node_in",name:"Hu",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Hv",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Hv","=","ZERO_VALUE_NODES",";","if","(","Hr",".","r","!=","ZERO_VALUE_NODES",")","{","yA","=","(","UNITY_VALUE_NODES","-","Ht",")","*","dot","(","Hs",",","Hq",")","+","Ht",";","yA","=","acos","(","yA",")",";","if","(","yA","<","Hu","[","0","]",")","Hv","=","UNITY_VALUE_NODES",";","else","if","(","yA",">","(","Hu","[","0","]","+","Hu","[","1","]",")","||","Hu","[","1","]","==","ZERO_VALUE_NODES",")","Hv","=","ZERO_VALUE_NODES",";","else","Hv","=","UNITY_VALUE_NODES","-","(","(","yA","-","Hu","[","0","]",")","/","Hu","[","1","]",")",";","Hv","=","max","(","Hv",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"Hw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hx",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Hy",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hz",qualifier:["float"],is_optional:false},{type:"node_in",name:"HA",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"HB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["HB","=","ZERO_VALUE_NODES",";","if","(","Hx",".","g","==","UNITY_VALUE_NODES",")","{","yJ","=","normalize","(","Hw","+","yj",")",";","HB","=","(","UNITY_VALUE_NODES","-","Hz",")","*","max","(","dot","(","Hy",",","yJ",")",",","ZERO_VALUE_NODES",")","+","Hz",";","HB","=","pow","(","HB",",","HA","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"HC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HD",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"HE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HF",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"HG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["HG","=","ZERO_VALUE_NODES",";","if","(","HD",".","g","==","UNITY_VALUE_NODES",")","{","yJ","=","normalize","(","HC","+","yj",")",";","yA","=","max","(","dot","(","HE",",","yJ",")",",","0.001",")",";"]},{type:"textline",tokens:["yu","=","max","(","dot","(","HE",",","yj",")",",","0.01",")",";","yz","=","max","(","dot","(","HE",",","HC",")",",","0.01",")",";","yA","=","tan","(","acos","(","yA",")",")",";","yv","=","max","(","HF","[","0","]",",","0.001",")",";","HG","=","yz","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","yv","*","yv",")",")","*","(","exp","(","-","(","yA","*","yA",")","/","(","yv","*","yv",")",")","/","(","sqrt","(","yu","*","yz",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"HH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HI",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"HJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HK",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"HL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["HL","=","ZERO_VALUE_NODES",";","if","(","HI",".","g","==","UNITY_VALUE_NODES",")","{","yJ","=","normalize","(","HH","+","yj",")",";","yz","=","acos","(","dot","(","yJ",",","HJ",")",")",";","if","(","yz","<","HK","[","0","]",")","HL","=","UNITY_VALUE_NODES",";","else","if","(","yz",">=","HK","[","0","]","+","HK","[","1","]","||","HK","[","1","]","==","ZERO_VALUE_NODES",")","HL","=","ZERO_VALUE_NODES",";","else","HL","=","UNITY_VALUE_NODES","-","(","yz","-","HK","[","0","]",")","/","HK","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"HM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HN",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"HO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HP",qualifier:["float"],is_optional:false},{type:"node_in",name:"HQ",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"HR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["HR","=","ZERO_VALUE_NODES",";","if","(","HN",".","g","==","UNITY_VALUE_NODES",")","{","if","(","HQ","[","0","]","<","UNITY_VALUE_NODES","||","HQ","[","1","]","==","ZERO_VALUE_NODES",")","HR","=","ZERO_VALUE_NODES",";","else","{","if","(","HQ","[","1","]","<","100.0",")","HQ","[","1","]","=","sqrt","(","UNITY_VALUE_NODES","/","HQ","[","1","]",")",";","else","HQ","[","1","]","=","10.0","/","HQ","[","1","]",";","yJ","=","normalize","(","yj","+","HM",")",";","yz","=","(","UNITY_VALUE_NODES","-","HP",")","*","max","(","dot","(","HO",",","yJ",")",",","ZERO_VALUE_NODES",")","+","HP",";","if","(","yz","<","ZERO_VALUE_NODES",")","HR","=","ZERO_VALUE_NODES",";","else","{","yu","=","max","(","dot","(","HO",",","yj",")",",","0.01",")",";","yv","=","dot","(","HO",",","HM",")",";","if","(","yv","<=","0.01",")","HR","=","ZERO_VALUE_NODES",";","else","{","yA","=","max","(","dot","(","yj",",","yJ",")",",","0.01",")",";","yw","=","UNITY_VALUE_NODES",";","yu","=","(","2.0","*","yz","*","yu",")","/","yA",";","yv","=","(","2.0","*","yz","*","yv",")","/","yA",";","yv","=","min","(","min","(","yw",",","yu",")",",","yv",")",";","yu","=","sqrt","(","pow","(","HQ","[","0","]",",","2.0",")","+","pow","(","yA",",","2.0",")","-","UNITY_VALUE_NODES",")",";","yA","=","pow","(","yu","-","yA",",","2.0",")","/","pow","(","yu","+","yA",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","yA","*","(","yu","+","yA",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","yA","*","(","yu","-","yA",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","yz","=","acos","(","yz",")",";","HR","=","max","(","yA","*","yv","*","exp","(","-","pow","(","yz",",","2.0",")","/","(","2.0","*","pow","(","HQ","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"HS",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"HT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HU",qualifier:["float"],is_optional:false},{type:"node_in",name:"HV",qualifier:["float"],is_optional:false},{type:"node_in",name:"HW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HY",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"HZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"H_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ia",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ib",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ic",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"Id",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_NODE_B4W_TRANSLUCENCY"],statements:[{type:"textline",tokens:["if","(","dot","(","HW",",","HX",")","*","dot","(","yj",",","HX",")","<","ZERO_VALUE_NODES",")","{","yz","=","HY",".","x",";","yv","=","HY",".","y",";","yA","=","HY",".","z",";","yu","=","HY",".","w",";"]},{type:"textline",tokens:["yw","=","clamp","(","abs","(","dot","(","HW",",","HX",")",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yx","=","clamp","(","dot","(","yj",",","-","HW",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yv","=","pow","(","yx",",","yv",")",";"]},{type:"textline",tokens:["Ic","=","HS","+","Ib","*","vec4","(","Ia","*","yw","*","pow","(","HZ",",","vec3","(","yz",")",")",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["Ic","+=","yA","*","mix","(","vec4","(","HZ",",","UNITY_VALUE_NODES",")",",","vec4","(","UNITY_VALUE_NODES",")",",","yu",")","*","Ib","*","vec4","(","Ia","*","yw","*","vec3","(","yv",")",",","UNITY_VALUE_NODES",")",";","Id","=","HT",";","}","else","{"]},{type:"textline",tokens:["Id","=","HT","+","Ia","*","H_","*","HV",";","Ic","=","HS","+","vec4","(","Ia","*","HZ","*","HU",",","HV",")",";","}"]}]},{type:"node_else",statements:[{type:"textline",tokens:["Id","=","HT","+","Ia","*","H_","*","HV",";","Ic","=","HS","+","vec4","(","Ia","*","HZ","*","HU",",","HV",")",";"]}]}]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"Ie",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Ie","=","u_node_rgbs","[","RGB_IND","]",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"If",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ig",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ig","=","dot","(","If",",","vec3","(","0.35",",","0.45",",","0.2",")",")",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"Ih",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ii",qualifier:["float"],is_optional:true},{type:"node_out",name:"Ij",qualifier:["float"],is_optional:true},{type:"node_out",name:"Ik",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ii"],statements:[{type:"textline",tokens:["Ii","=","Ih",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ij"],statements:[{type:"textline",tokens:["Ij","=","Ih",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ik"],statements:[{type:"textline",tokens:["Ik","=","Ih",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"Il",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Im",qualifier:["float"],is_optional:true},{type:"node_out",name:"In",qualifier:["float"],is_optional:true},{type:"node_out",name:"Io",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["yJ","=","xS","(","Il",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Im"],statements:[{type:"textline",tokens:["Im","=","yJ",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_In"],statements:[{type:"textline",tokens:["In","=","yJ",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Io"],statements:[{type:"textline",tokens:["Io","=","yJ",".","b",";"]}]}]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"Ip",qualifier:["float"],is_optional:false},{type:"node_in",name:"Iq",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ir",qualifier:["float"],is_optional:false},{type:"node_out",name:"Is",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Is","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","Ip","-","Ir",")","*","Iq",")",")",";"]}]},{type:"node",name:"GAMMA",declarations:[{type:"node_in",name:"It",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Iu",qualifier:["float"],is_optional:false},{type:"node_out",name:"Iv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Iv","=","It",";","if","(","Iv",".","x",">","ZERO_VALUE_NODES",")","Iv",".","x","=","pow","(","It",".","x",",","Iu",")",";","if","(","Iv",".","y",">","ZERO_VALUE_NODES",")","Iv",".","y","=","pow","(","It",".","y",",","Iu",")",";","if","(","Iv",".","z",">","ZERO_VALUE_NODES",")","Iv",".","z","=","pow","(","It",".","z",",","Iu",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"Iw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ix",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Ix","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","Iw",")",";","Ix","=","pow","(","Ix",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"Iy",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Iz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Iz","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","Iy",")",";","Iz","=","pow","(","Iz",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_EMPTY",declarations:[{type:"node_out",name:"IA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"IB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"IC",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IC"],statements:[{type:"textline",tokens:["IA","[","2","]","=","IA","[","1","]","=","IA","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IC"],statements:[{type:"textline",tokens:["IB","[","2","]","=","IB","[","1","]","=","IB","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IC"],statements:[{type:"textline",tokens:["IC","=","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"ID",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"IE",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IF",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"],is_optional:false}],statements:[{type:"textline",tokens:["yC","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","ID",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IE"],statements:[{type:"textline",tokens:["IE","=","yC",".","xyz",";","br","(","IE",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IF"],statements:[{type:"textline",tokens:["IF","=","yC",".","w",";"]}]}]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"IG",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"IH",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"II",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"IJ",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IK",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IL",qualifier:["float"],is_optional:true},{type:"node_out",name:"IM",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IN",qualifier:["float"],is_optional:true},{type:"node_out",name:"IO",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IP",qualifier:["float"],is_optional:true},{type:"node_out",name:"IQ",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IR",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["yC","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","x_","(","IG",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IK"],statements:[{type:"textline",tokens:["IK","=","yC",".","xyz",";","br","(","IK",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IL"],statements:[{type:"textline",tokens:["IL","=","yC",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["yC","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","x_","(","IH",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IM"],statements:[{type:"textline",tokens:["IM","=","yC",".","xyz",";","br","(","IM",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IN"],statements:[{type:"textline",tokens:["IN","=","yC",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["yC","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","x_","(","II",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IO"],statements:[{type:"textline",tokens:["IO","=","yC",".","xyz",";","br","(","IO",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IP"],statements:[{type:"textline",tokens:["IP","=","yC",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["yC","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","x_","(","IJ",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IQ"],statements:[{type:"textline",tokens:["IQ","=","yC",".","xyz",";","br","(","IQ",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IR"],statements:[{type:"textline",tokens:["IR","=","yC",".","w",";"]}]}]}]}]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"IS",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"IT",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"IU",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"IV",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IW",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IX",qualifier:["float"],is_optional:true},{type:"node_out",name:"IY",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IZ",qualifier:["float"],is_optional:true},{type:"node_out",name:"I_",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"Ja",qualifier:["float"],is_optional:true},{type:"node_out",name:"Jb",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"Jc",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["yC","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","x_","(","IS",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IW"],statements:[{type:"textline",tokens:["IW","=","normalize","(","yD","*","(","yC",".","xyz","-","xN",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IX"],statements:[{type:"textline",tokens:["IX","=","yC",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["yC","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","x_","(","IT",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IY"],statements:[{type:"textline",tokens:["IY","=","normalize","(","yD","*","(","yC",".","xyz","-","xN",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IZ"],statements:[{type:"textline",tokens:["IZ","=","yC",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["yC","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","x_","(","IU",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_I_"],statements:[{type:"textline",tokens:["I_","=","normalize","(","yD","*","(","yC",".","xyz","-","xN",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ja"],statements:[{type:"textline",tokens:["Ja","=","yC",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["yC","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","x_","(","IV",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jb"],statements:[{type:"textline",tokens:["Jb","=","normalize","(","yD","*","(","yC",".","xyz","-","xN",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jc"],statements:[{type:"textline",tokens:["Jc","=","yC",".","w",";"]}]}]}]}]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"Jd",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Jd","=","u_node_values","[","VALUE_IND","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"Je",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Jf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jh",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["Jg","=","Je","+","Jf",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jh"],statements:[{type:"textline",tokens:["Jh","=","(","abs","(","Jg","[","0","]",")","+","abs","(","Jg","[","1","]",")","+","abs","(","Jg","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"Ji",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Jj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jl",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["Jk","=","Ji","-","Jj",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jl"],statements:[{type:"textline",tokens:["Jl","=","(","abs","(","Jk","[","0","]",")","+","abs","(","Jk","[","1","]",")","+","abs","(","Jk","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"Jm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Jn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jo",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jp",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["Jo","=","Jm","+","Jn",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jp"],statements:[{type:"textline",tokens:["Jp","=","length","(","Jo",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jo"],statements:[{type:"textline",tokens:["Jo","=","normalize","(","Jo",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"Jq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Jr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Js",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jt",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["Js","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jt"],statements:[{type:"textline",tokens:["Jt","=","dot","(","Jq",",","Jr",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"Ju",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Jv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jx",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["Jw","=","cross","(","Ju",",","Jv",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jx"],statements:[{type:"textline",tokens:["Jx","=","length","(","Jw",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"Jy",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Jz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JB",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["JA","=","normalize","(","Jy",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_JB"],statements:[{type:"textline",tokens:["JB","=","length","(","Jy",")",";"]}]}]},{type:"textline",tokens:["Jz",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"JC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"JD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["JE","=","reflect","(","-","JC",",","JD",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"JF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"JG",qualifier:["float"],is_optional:false},{type:"node_in",name:"JH",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"JI",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"JJ",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["yv","=","length","(","yB",")",";","if","(","yv","<","JI",")","{","yq","=","x_","(","JF",")",";","yv","=","clamp","(","xN","*","(","JI","-","yv",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yv","=","JG","*","yv",";"]},{type:"textline",tokens:["yJ","=","normalize","(","yj","*","yD",")",";"]},{type:"textline",tokens:["yw","=","UNITY_VALUE_NODES","/","JH",";"]},{type:"textline",tokens:["yr","=","yJ",".","xy","*","yv","/","(","JH","*","yJ",".","z",")",";","yv","=","UNITY_VALUE_NODES",";","yu","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","yq",")",".","a",";"]},{type:"textline",tokens:["for","(","float","JK","=","1.0",";","JK","<=","JH",";","JK","++",")","{","if","(","yu","<","yv",")","{","yv","-=","yw",";","yq","-=","yr",";","yu","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","yq",")",".","a",";","}","}"]},{type:"textline",tokens:["yr","=","yq","+","yr",";","yw","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","yr",")",".","a","-","(","yv","+","yw",")",";","yv","=","yu","-","yv",";","yw","=","yv","/","(","yv","-","yw",")",";"]},{type:"textline",tokens:["yq","=","yw","*","yr","+","(","UNITY_VALUE_NODES","-","yw",")","*","yq",";","JJ","=","xY","(","yq",")",";","}","else","JJ","=","JF",";"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"JL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["JM","=","clamp","(","JL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"JN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"JO",qualifier:["float"],is_optional:false},{type:"node_out",name:"JP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["JP","=","JN",";","JO",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"JQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"JR",qualifier:["float"],is_optional:false},{type:"node_in",name:"JS",qualifier:["float"],is_optional:false},{type:"node_in",name:"JT",qualifier:["float"],is_optional:false},{type:"node_in",name:"JU",qualifier:["float"],is_optional:false},{type:"node_out",name:"JV",qualifier:["float"],is_optional:true},{type:"node_out",name:"JW",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_JV"],statements:[{type:"textline",tokens:["JV","=","JQ",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_JW"],statements:[{type:"textline",tokens:["JW","=","vec4","(","JR",",","JS",",","JT",",","JU",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"JX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["JX","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"JY",qualifier:["float"],is_optional:false},{type:"node_in",name:"JZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"J_",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ka",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ka","=","smoothstep","(","JZ",",","J_",",","JY",")",";"]}]},{type:"node",name:"B4W_GLOW_OUTPUT",declarations:[{type:"node_in",name:"Kb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Kc",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["yl","=","Kb",";","yp","=","Kc",";"]}]},{type:"node",name:"B4W_VECTOSCAL",declarations:[{type:"node_in",name:"Kd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ke",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ke","=","(","Kd",".","r","+","Kd",".","g","+","Kd",".","b",")","/","3.0",";"]}]},{type:"node",name:"B4W_SCALTOVEC",declarations:[{type:"node_in",name:"Kf",qualifier:["float"],is_optional:false},{type:"node_out",name:"Kg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Kg","[","0","]","=","Kf",";","Kg","[","1","]","=","Kf",";","Kg","[","2","]","=","Kf",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","Kh","(","in","vec3","yj",",","in","mat4","yk",",","out","vec3","yl",",","out","vec3","ym",",","out","vec3","yn",",","out","vec4","yo",",","out","float","yp",")","{","vec2","yq",",","yr",";","float","ys",",","yt",",","yu",",","yv",",","yw",",","yx",",","yy",",","yz",",","yA",";","vec4","yB",",","yC",";","mat3","yD",";","vec3","yE",",","yF",",","yG",",","yH",",","yI",",","yJ",";","yl","=","vec3","(","ZERO_VALUE_NODES",")",";","ym","=","vec3","(","ZERO_VALUE_NODES",")",";","yn","=","vec3","(","ZERO_VALUE_NODES",")",";","yo","=","vec4","(","ZERO_VALUE_NODES",")",";","yp","=","ZERO_VALUE_NODES",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["yE","=","normalize","(","bE",")",";","yF","=","yE",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["INVERT_FRONTFACING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")"]}]}}]},{type:"textline",tokens:["yF","=","yF",";","else","yF","=","-","yF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["yG","=","yF",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yG","=","yE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["yE","=","yF",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["yH","=","cross","(","yF",",","bF",".","xyz",")","*","bF",".","w",";","yD","=","mat3","(","bF",".","xyz",",","yH",",","yF",")",";","yD","=","yD",";"]}]}}]},{type:"textline",tokens:["yF","=","bC",";","yB","=","bD",";","ys","=","u_emit",";","yt","=","u_ambient",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","Kj","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","vec3","f",";","vec3","g",";","float","h",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Kp","(","inout","vec3","Kk",",","float","Kl",",","vec4","Km",",","vec4","Kn",")","{","float","Ko",";","Ko","=","Kn",".","x","-","Km",".","x",";","Ko","=","(","Kl","-","Km",".","x",")","/","Ko",";","Kk","=","mix","(","Kk",",","Kn",".","yzw",",","clamp","(","Ko",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Kv","(","float","Kq",",","float","Kr",",","vec4","Ks","[","COLOR_RAMP_LENGTH","]",")","{","vec3","Kt",";","float","Ku",";","Ku","=","Kq","/","Kr",";","Kt","=","Ks","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Kp","(","Kt",",","Ku",",","Ks","[","0","]",",","Ks","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Kp","(","Kt",",","Ku",",","Ks","[","1","]",",","Ks","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Kp","(","Kt",",","Ku",",","Ks","[","2","]",",","Ks","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","Kt",";","}"]}]}}]},{type:"textline",tokens:["float","KD","(","float","Kw",",","float","Kx",",","float","Ky",",","float","Kz",")","{","float","KA",",","KB",",","KC",";","KA","=","max","(","0.01",",","min","(","Kx",",","Ky",")",")",";","KB","=","max","(","0.01",",","min","(","Kx",",","Kz",")",")",";","KC","=","Kx","-","KB",";","KB","=","clamp","(","Kw","/","KA",",","0.0",",","1.0",")","-","step","(","KC",",","Kw",")","*","(","Kw","-","KC",")","/","KB",";","return","KB",";","}","Kj","KL","(",")","{","mat4","KE",";","vec3","KF",",","KG",";","float","KH",",","KI",",","KJ",";","Kj","KK",";","KI","=","a_p_data","[","0","]",";","KJ","=","a_p_data","[","1","]",";","if","(","u_p_cyclic","==","1",")","{","KH","=","mod","(","u_p_time",",","u_p_length",")","-","KJ",";","if","(","KH","<","0.0",")","KH","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","KH","=","u_p_time","-","KJ",";","}","if","(","KH","<","0.0","||","KH",">=","KI",")","{","KK",".","a","=","0.0001",";","KK",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","KH","<","0.0","||","KH",">=","KI",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["KF","=","a_position",";","KG","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KE","=","O","(","u_model_tsr",")",";","KF","=","(","KE","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","KG","=","(","KE","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";"]}]}}]},{type:"textline",tokens:["KG","=","u_p_nfactor","*","KG",";","KG","+=","a_p_vels",".","xyz",";","KG",".","y","-=","u_p_gravity","*","KH","/","2.0",";","KI","=","max","(","u_p_mass",",","EPSILON",")",";","KG","+=","(","u_p_wind_fac","*","u_wind","/","KI",")","*","KH","/","2.0",";","KK",".","h","=","KH",";","KK",".","f","=","KG",";","KK",".","g","=","a_normal","*","a_p_vels",".","w",";","KK",".","b","=","KF","+","KG","*","KH",";","KK",".","e","=","a_p_vels",".","w","*","KH",";"]},{type:"condition",parts:[{type:"if",expression:["USE_COLOR_RAMP"],group:{type:"group",parts:[{type:"textline",tokens:["KK",".","a","=","texture2D","(","u_color_ramp_tex",",","vec2","(","KH","/","u_p_max_lifetime",",","0.5",")",")",".","g",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KK",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KK",".","d","=","Kv","(","KH",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KK",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["KK",".","c","=","KD","(","KH",",","a_p_data","[","0","]",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","KK",";","}"]}]},exports["include/particles_nodes.glslv"] = {type:"group",parts:[{type:"node",name:"TEX_COORD_UV",declarations:[],statements:[{type:"textline",tokens:["bM","=","KR","+","0.5",";"]}]},{type:"node",name:"UV_MERGED",declarations:[],statements:[{type:"textline",tokens:["bM","=","KR","+","0.5",";"]}]},{type:"node",name:"UVMAP",declarations:[],statements:[{type:"textline",tokens:["bM","=","KR","+","0.5",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[],statements:[{type:"textline",tokens:["bM","=","KR","+","0.5",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_param",name:"yb",qualifier:["varying","vec4"],is_optional:true},{type:"node_param",name:"yc",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"yd",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"ye",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"node_PARTICLE_INFO_var_a_p_indices",qualifier:["attribute","float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_SIZE"],statements:[{type:"textline",tokens:["yb","[","3","]","=","KQ",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_AGE"],statements:[{type:"textline",tokens:["yb","[","1","]","=","KP",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_LT"],statements:[{type:"textline",tokens:["yb","[","2","]","=","KS",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_LOC"],statements:[{type:"textline",tokens:["yc","=","KM",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_IND"],statements:[{type:"textline",tokens:["yb","[","0","]","=","node_PARTICLE_INFO_var_a_p_indices",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_VEL"],statements:[{type:"textline",tokens:["yd","=","KN",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_A_VEL"],statements:[{type:"textline",tokens:["ye","=","KO",";"]}]}]}]},{type:"nodes_global"},{type:"textline",tokens:["void","KT","(","in","vec3","KM",",","in","vec3","KN",",","in","vec3","KO",",","in","float","KP",",","in","float","KQ",",","in","vec2","KR",",","in","float","KS",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","KR","+","0.5",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/blending.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","KV","=","0.0",";","float","KW","=","1.0",";","vec3","La","(","vec3","KX",")","{","float","KY",",","KZ",";","vec4","K_",";","K_","=","vec4","(","KV",",","-","KW","/","3.0",",","2.0","/","3.0",",","-","KW",")",";","K_","=","mix","(","vec4","(","KX",".","bg",",","K_",".","wz",")",",","vec4","(","KX",".","gb",",","K_",".","xy",")",",","step","(","KX",".","b",",","KX",".","g",")",")",";","K_","=","mix","(","vec4","(","K_",".","xyw",",","KX",".","r",")",",","vec4","(","KX",".","r",",","K_",".","yzx",")",",","step","(","K_",".","x",",","KX",".","r",")",")",";","KY","=","K_",".","x","-","min","(","K_",".","w",",","K_",".","y",")",";","KZ","=","1.0e-10",";","return","vec3","(","abs","(","K_",".","z","+","(","K_",".","w","-","K_",".","y",")","/","(","6.0","*","KY","+","KZ",")",")",",","KY","/","(","K_",".","x","+","KZ",")",",","K_",".","x",")",";","}","vec3","Le","(","vec3","Lb",")","{","vec3","Lc",";","vec4","Ld",";","Ld","=","vec4","(","KW",",","2.0","/","3.0",",","KW","/","3.0",",","3.0",")",";","Lc","=","abs","(","fract","(","vec3","(","Lb",".","r",",","Lb",".","r",",","Lb",".","r",")","+","Ld",".","xyz",")","*","6.0","-","Ld",".","www",")",";","return","Lb",".","b","*","mix","(","Ld",".","xxx",",","clamp","(","Lc","-","Ld",".","xxx",",","KV",",","KW",")",",","Lb",".","g",")",";","}","vec3","Li","(","vec3","Lf",",","vec3","Lg",",","float","Lh",")","{","return","mix","(","Lf",",","Lg",",","Lh",")",";","}","vec3","Lm","(","vec3","Lj",",","vec3","Lk",",","float","Ll",")","{","return","Ll","*","Lj","+","Lk",";","}","vec3","Lq","(","vec3","Ln",",","vec3","Lo",",","float","Lp",")","{","return","Lo","-","Lp","*","Ln",";","}","vec3","Lv","(","vec3","Lr",",","vec3","Ls",",","float","Lt",")","{","float","Lu",";","Lu","=","KW","-","Lt",";","return","(","vec3","(","Lu",")","+","Lt","*","Lr",")","*","Ls",";","}","vec3","LA","(","vec3","Lw",",","vec3","Lx",",","float","Ly",")","{","vec3","Lz",";","Lz","=","vec3","(","KW","-","Ly",")",";","return","vec3","(","KW",")","-","(","Lz","+","Ly","*","(","vec3","(","KW",")","-","Lw",")",")","*","(","vec3","(","KW",")","-","Lx",")",";","}","vec3","LF","(","vec3","LB",",","vec3","LC",",","float","LD",")","{","vec3","LE",";","LE","=","vec3","(","KW","-","LD",")",";","return","mix","(","LC","*","(","LE","+","2.0","*","LD","*","LB",")",",","vec3","(","KW",")","-","(","LE","+","2.0","*","LD","*","(","vec3","(","KW",")","-","LB",")",")","*","(","vec3","(","KW",")","-","LC",")",",","step","(","0.5",",","LC",")",")",";","}","vec3","LJ","(","vec3","LG",",","vec3","LH",",","float","LI",")","{","return","mix","(","LH",",","abs","(","LG","-","LH",")",",","LI",")",";","}","vec3","LN","(","vec3","LK",",","vec3","LL",",","float","LM",")","{","return","mix","(","LL",",","LL","/","(","LK","+","step","(","LK",",","vec3","(","KV",")",")",")",",","LM",")",";","}","vec3","LR","(","vec3","LO",",","vec3","LP",",","float","LQ",")","{","return","mix","(","LP",",","min","(","LO",",","LP",")",",","LQ",")",";","}","vec3","LV","(","vec3","LS",",","vec3","LT",",","float","LU",")","{","return","max","(","LU","*","LS",",","LT",")",";","}","vec3","Ma","(","vec3","LW",",","vec3","LX",",","float","LY",")","{","vec3","LZ",",","L_",";","LZ","=","La","(","LX",")",";","if","(","LZ",".","y","!=","KV",")","{","L_","=","La","(","LW",")",";","L_","=","Le","(","vec3","(","LZ",".","x",",","L_",".","yz",")",")",";","return","mix","(","LW",",","L_",",","LY",")",";","}","return","LW",";","}","vec3","Mg","(","vec3","Mb",",","vec3","Mc",",","float","Md",")","{","vec3","Me",",","Mf",";","Me","=","La","(","Mb",")",";","if","(","Me",".","y","!=","KV",")","{","Mf","=","La","(","Mc",")",";","return","Le","(","vec3","(","Me",".","x",",","mix","(","Me",".","y",",","Mf",".","y",",","Md",")",",","Me",".","z",")",")",";","}","return","Mb",";","}","vec3","Mm","(","vec3","Mh",",","vec3","Mi",",","float","Mj",")","{","vec3","Mk",",","Ml",";","Mk","=","La","(","Mh",")",";","Ml","=","La","(","Mi",")",";","return","Le","(","vec3","(","Mk",".","xy",",","mix","(","Mk",".","z",",","Ml",".","z",",","Mj",")",")",")",";","}","vec3","Ms","(","vec3","Mn",",","vec3","Mo",",","float","Mp",")","{","vec3","Mq",",","Mr",";","Mq","=","La","(","Mo",")",";","if","(","Mq",".","y","!=","KV",")","{","Mr","=","La","(","Mn",")",";","Mr","=","Le","(","vec3","(","Mq",".","xy",",","Mr",".","z",")",")",";","return","mix","(","Mn",",","Mr",",","Mp",")",";","}","return","Mn",";","}","vec3","Mx","(","vec3","Mt",",","vec3","Mu",",","float","Mv",")","{","vec3","Mw",";","Mw","=","vec3","(","KW",")","-","(","vec3","(","KW",")","-","Mu",")","*","(","vec3","(","KW",")","-","Mt",")",";","return","mix","(","Mt",",","(","(","vec3","(","KW",")","-","Mt",")","*","Mu","*","Mt",")","+","Mt","*","Mw",",","Mv",")",";","}","vec3","MB","(","vec3","My",",","vec3","Mz",",","float","MA",")","{","return","My","+","MA","*","(","2.0","*","Mz","-","KW",")",";","}","float","MH","(","float","MC",",","float","MD",",","float","ME",",","float","MF",")","{","float","MG",";","MG","=","KW","-","MF",";","return","(","MG","+","ME","*","MC",")","*","MD",";","}","float","MN","(","float","MI",",","float","MJ",",","float","MK",",","float","ML",")","{","float","MM",";","MM","=","KW","-","ML",";","return","KW","-","(","MM","+","MK","*","(","KW","-","MI",")",")","*","(","KW","-","MJ",")",";","}","float","MT","(","float","MO",",","float","MP",",","float","MQ",",","float","MR",")","{","float","MS",";","MS","=","KW","-","MR",";","return","mix","(","MP","*","(","MS","+","2.0","*","MQ","*","MO",")",",","KW","-","(","MS","+","2.0","*","MQ","*","(","KW","-","MO",")",")","*","(","KW","-","MP",")",",","step","(","0.5",",","MP",")",")",";","}"]}]},exports["include/fxaa.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"ifndef",name:"FXAA_PS3",group:{type:"group",parts:[{type:"define",name:"FXAA_PS3",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_360",group:{type:"group",parts:[{type:"define",name:"FXAA_360",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_360_OPT",group:{type:"group",parts:[{type:"define",name:"FXAA_360_OPT",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_PC",group:{type:"group",parts:[{type:"define",name:"FXAA_PC",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_PC_CONSOLE",group:{type:"group",parts:[{type:"define",name:"FXAA_PC_CONSOLE",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GLSL_120",group:{type:"group",parts:[{type:"define",name:"FXAA_GLSL_120",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GLSL_130",group:{type:"group",parts:[{type:"define",name:"FXAA_GLSL_130",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_3",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_3",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_4",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_4",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_5",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_5",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GREEN_AS_LUMA",group:{type:"group",parts:[{type:"define",name:"FXAA_GREEN_AS_LUMA",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_EARLY_EXIT",group:{type:"group",parts:[{type:"define",name:"FXAA_EARLY_EXIT",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_DISCARD",group:{type:"group",parts:[{type:"define",name:"FXAA_DISCARD",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_FAST_PIXEL_OFFSET",group:{type:"group",parts:[{type:"condition",parts:[{type:"ifdef",name:"GL_EXT_gpu_shader4",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_NV_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_ARB_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_FAST_PIXEL_OFFSET",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GATHER4_ALPHA",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FXAA_HLSL_5",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_ARB_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_NV_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GATHER4_ALPHA",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:[0],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["4.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:[0],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["2.0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",tokens:["0.125"]}]}},{type:"else",group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",tokens:["0.25"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_QUALITY_PRESET",group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["12"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",10,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["3"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",11,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["4"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",12,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["5"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",13,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["6"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",14,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["7"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",15,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["8"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",20,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["3"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",21,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["4"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",22,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["5"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",23,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["6"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",24,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["7"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",25,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["8"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",26,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["9"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",27,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["10"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",28,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["11"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",29,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P11",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",39,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P11",tokens:["8.0"]}]}}]},{type:"var",name:"FXAA_QUALITY_P12",tokens:["0.0"]},{type:"textline",tokens:["float","Np","(","float","No",")","{","return","clamp","(","No",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["FXAA_BLEND4WEB",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Ns","(","sampler2D","Nq",",","vec2","Nr",")","{","return","texture2D","(","Nq",",","Nr",")",";","}","vec4","Nx","(","sampler2D","Nt",",","vec2","Nu",",","vec2","Nv",",","vec2","Nw",")","{","return","texture2D","(","Nt",",","Nu","+","(","Nv","*","Nw",")",")",";","}"]}]}}]},{type:"textline",tokens:["vec4","Od","(","vec2","Ny",",","sampler2D","Nz",",","vec2","NA",",","float","NB",",","float","NC",",","float","ND",")","{","bool","NE",",","NF",",","NG",",","NH",",","NI",";","float","NJ",",","NK",",","NL",",","NM",",","NN",",","NO",",","NP",",","NQ",",","NR",",","NS",",","NT",",","NU",",","NV",",","NW",",","NX",";","vec4","NY",";","vec2","NZ",",","N_",",","Oa",",","Ob",",","Oc",";","NZ",".","x","=","Ny",".","x",";","NZ",".","y","=","Ny",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_GATHER4_ALPHA",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["NY","=","Ns","(","Nz",",","NZ",")",";","NJ","=","bB","(","NY",")",";","NK","=","bB","(","Nx","(","Nz",",","NZ",",","vec2","(","0",",","1",")",",","NA",".","xy",")",")",";","NL","=","bB","(","Nx","(","Nz",",","NZ",",","vec2","(","1",",","0",")",",","NA",".","xy",")",")",";","NM","=","bB","(","Nx","(","Nz",",","NZ",",","vec2","(","0",",","-","1",")",",","NA",".","xy",")",")",";","NN","=","bB","(","Nx","(","Nz",",","NZ",",","vec2","(","-","1",",","0",")",",","NA",".","xy",")",")",";"]}]}}]},{type:"textline",tokens:["NO","=","max","(","NK",",","NJ",")",";","NP","=","min","(","NK",",","NJ",")",";","NO","=","max","(","NL",",","NO",")",";","NP","=","min","(","NL",",","NP",")",";","NQ","=","max","(","NM",",","NN",")",";","NR","=","min","(","NM",",","NN",")",";","NO","=","max","(","NQ",",","NO",")",";","NP","=","min","(","NR",",","NP",")",";","NR","=","NO","*","NC",";","NP","=","NO","-","NP",";","NR","=","max","(","ND",",","NR",")",";","NE","=","NP","<","NR",";","if","(","NE",")","return","NY",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_GATHER4_ALPHA",0,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["NR","=","bB","(","Nx","(","Nz",",","NZ",",","vec2","(","-","1",",","-","1",")",",","NA",".","xy",")",")",";","NO","=","bB","(","Nx","(","Nz",",","NZ",",","vec2","(","1",",","1",")",",","NA",".","xy",")",")",";","NQ","=","bB","(","Nx","(","Nz",",","NZ",",","vec2","(","1",",","-","1",")",",","NA",".","xy",")",")",";","NS","=","bB","(","Nx","(","Nz",",","NZ",",","vec2","(","-","1",",","1",")",",","NA",".","xy",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[]}}]},{type:"textline",tokens:["NT","=","NM","+","NK",";","NU","=","NN","+","NL",";","NP","=","1.0","/","NP",";","NV","=","NT","+","NU",";","NT","=","(","-","2.0","*","NJ",")","+","NT",";","NU","=","(","-","2.0","*","NJ",")","+","NU",";","NW","=","NQ","+","NO",";","NQ","=","NR","+","NQ",";","NX","=","(","-","2.0","*","NL",")","+","NW",";","NQ","=","(","-","2.0","*","NM",")","+","NQ",";","NR","=","NR","+","NS",";","NO","=","NS","+","NO",";","NX","=","(","abs","(","NT",")","*","2.0",")","+","abs","(","NX",")",";","NQ","=","(","abs","(","NU",")","*","2.0",")","+","abs","(","NQ",")",";","NU","=","(","-","2.0","*","NN",")","+","NR",";","NO","=","(","-","2.0","*","NK",")","+","NO",";","NX","=","abs","(","NU",")","+","NX",";","NQ","=","abs","(","NO",")","+","NQ",";","NW","=","NR","+","NW",";","NR","=","NA",".","x",";","NE","=","NX",">=","NQ",";","NW","=","NV","*","2.0","+","NW",";","if","(","!","NE",")","NM","=","NN",";","if","(","!","NE",")","NK","=","NL",";","if","(","NE",")","NR","=","NA",".","y",";","NW","=","(","NW","*","(","1.0","/","12.0",")",")","-","NJ",";","NL","=","NM","-","NJ",";","NN","=","NK","-","NJ",";","NM","=","NM","+","NJ",";","NK","=","NK","+","NJ",";","NF","=","abs","(","NL",")",">=","abs","(","NN",")",";","NN","=","max","(","abs","(","NL",")",",","abs","(","NN",")",")",";","if","(","NF",")","NR","=","-","NR",";","NP","=","Np","(","abs","(","NW",")","*","NP",")",";","N_",".","x","=","NZ",".","x",";","N_",".","y","=","NZ",".","y",";","Oa",".","x","=","(","!","NE",")","?","0.0",":","NA",".","x",";","Oa",".","y","=","(","NE",")","?","0.0",":","NA",".","y",";","if","(","!","NE",")","N_",".","x","+=","NR","*","0.5",";","if","(","NE",")","N_",".","y","+=","NR","*","0.5",";","Ob",".","x","=","N_",".","x","-","Oa",".","x","*","FXAA_QUALITY_P0",";","Ob",".","y","=","N_",".","y","-","Oa",".","y","*","FXAA_QUALITY_P0",";","Oc",".","x","=","N_",".","x","+","Oa",".","x","*","FXAA_QUALITY_P0",";","Oc",".","y","=","N_",".","y","+","Oa",".","y","*","FXAA_QUALITY_P0",";","NW","=","(","(","-","2.0",")","*","NP",")","+","3.0",";","NL","=","bB","(","Ns","(","Nz",",","Ob",")",")",";","NP","=","NP","*","NP",";","NV","=","bB","(","Ns","(","Nz",",","Oc",")",")",";","if","(","!","NF",")","NM","=","NK",";","NN","=","NN","*","1.0","/","4.0",";","NK","=","NJ","-","NM","*","0.5",";","NP","=","NW","*","NP",";","NF","=","NK","<","0.0",";","NL","-=","NM","*","0.5",";","NV","-=","NM","*","0.5",";","NG","=","abs","(","NL",")",">=","NN",";","NH","=","abs","(","NV",")",">=","NN",";","if","(","!","NG",")","Ob",".","x","-=","Oa",".","x","*","FXAA_QUALITY_P1",";","if","(","!","NG",")","Ob",".","y","-=","Oa",".","y","*","FXAA_QUALITY_P1",";","NI","=","(","!","NG",")","||","(","!","NH",")",";","if","(","!","NH",")","Oc",".","x","+=","Oa",".","x","*","FXAA_QUALITY_P1",";","if","(","!","NH",")","Oc",".","y","+=","Oa",".","y","*","FXAA_QUALITY_P1",";","if","(","NI",")","{","if","(","!","NG",")","NL","=","bB","(","Ns","(","Nz",",","Ob",".","xy",")",")",";","if","(","!","NH",")","NV","=","bB","(","Ns","(","Nz",",","Oc",".","xy",")",")",";","if","(","!","NG",")","NL","=","NL","-","NM","*","0.5",";","if","(","!","NH",")","NV","=","NV","-","NM","*","0.5",";","NG","=","abs","(","NL",")",">=","NN",";","NH","=","abs","(","NV",")",">=","NN",";","if","(","!","NG",")","Ob",".","x","-=","Oa",".","x","*","FXAA_QUALITY_P2",";","if","(","!","NG",")","Ob",".","y","-=","Oa",".","y","*","FXAA_QUALITY_P2",";","NI","=","(","!","NG",")","||","(","!","NH",")",";","if","(","!","NH",")","Oc",".","x","+=","Oa",".","x","*","FXAA_QUALITY_P2",";","if","(","!","NH",")","Oc",".","y","+=","Oa",".","y","*","FXAA_QUALITY_P2",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NI",")","{","if","(","!","NG",")","NL","=","bB","(","Ns","(","Nz",",","Ob",".","xy",")",")",";","if","(","!","NH",")","NV","=","bB","(","Ns","(","Nz",",","Oc",".","xy",")",")",";","if","(","!","NG",")","NL","=","NL","-","NM","*","0.5",";","if","(","!","NH",")","NV","=","NV","-","NM","*","0.5",";","NG","=","abs","(","NL",")",">=","NN",";","NH","=","abs","(","NV",")",">=","NN",";","if","(","!","NG",")","Ob",".","x","-=","Oa",".","x","*","FXAA_QUALITY_P3",";","if","(","!","NG",")","Ob",".","y","-=","Oa",".","y","*","FXAA_QUALITY_P3",";","NI","=","(","!","NG",")","||","(","!","NH",")",";","if","(","!","NH",")","Oc",".","x","+=","Oa",".","x","*","FXAA_QUALITY_P3",";","if","(","!","NH",")","Oc",".","y","+=","Oa",".","y","*","FXAA_QUALITY_P3",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",4,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NI",")","{","if","(","!","NG",")","NL","=","bB","(","Ns","(","Nz",",","Ob",".","xy",")",")",";","if","(","!","NH",")","NV","=","bB","(","Ns","(","Nz",",","Oc",".","xy",")",")",";","if","(","!","NG",")","NL","=","NL","-","NM","*","0.5",";","if","(","!","NH",")","NV","=","NV","-","NM","*","0.5",";","NG","=","abs","(","NL",")",">=","NN",";","NH","=","abs","(","NV",")",">=","NN",";","if","(","!","NG",")","Ob",".","x","-=","Oa",".","x","*","FXAA_QUALITY_P4",";","if","(","!","NG",")","Ob",".","y","-=","Oa",".","y","*","FXAA_QUALITY_P4",";","NI","=","(","!","NG",")","||","(","!","NH",")",";","if","(","!","NH",")","Oc",".","x","+=","Oa",".","x","*","FXAA_QUALITY_P4",";","if","(","!","NH",")","Oc",".","y","+=","Oa",".","y","*","FXAA_QUALITY_P4",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",5,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NI",")","{","if","(","!","NG",")","NL","=","bB","(","Ns","(","Nz",",","Ob",".","xy",")",")",";","if","(","!","NH",")","NV","=","bB","(","Ns","(","Nz",",","Oc",".","xy",")",")",";","if","(","!","NG",")","NL","=","NL","-","NM","*","0.5",";","if","(","!","NH",")","NV","=","NV","-","NM","*","0.5",";","NG","=","abs","(","NL",")",">=","NN",";","NH","=","abs","(","NV",")",">=","NN",";","if","(","!","NG",")","Ob",".","x","-=","Oa",".","x","*","FXAA_QUALITY_P5",";","if","(","!","NG",")","Ob",".","y","-=","Oa",".","y","*","FXAA_QUALITY_P5",";","NI","=","(","!","NG",")","||","(","!","NH",")",";","if","(","!","NH",")","Oc",".","x","+=","Oa",".","x","*","FXAA_QUALITY_P5",";","if","(","!","NH",")","Oc",".","y","+=","Oa",".","y","*","FXAA_QUALITY_P5",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",6,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NI",")","{","if","(","!","NG",")","NL","=","bB","(","Ns","(","Nz",",","Ob",".","xy",")",")",";","if","(","!","NH",")","NV","=","bB","(","Ns","(","Nz",",","Oc",".","xy",")",")",";","if","(","!","NG",")","NL","=","NL","-","NM","*","0.5",";","if","(","!","NH",")","NV","=","NV","-","NM","*","0.5",";","NG","=","abs","(","NL",")",">=","NN",";","NH","=","abs","(","NV",")",">=","NN",";","if","(","!","NG",")","Ob",".","x","-=","Oa",".","x","*","FXAA_QUALITY_P6",";","if","(","!","NG",")","Ob",".","y","-=","Oa",".","y","*","FXAA_QUALITY_P6",";","NI","=","(","!","NG",")","||","(","!","NH",")",";","if","(","!","NH",")","Oc",".","x","+=","Oa",".","x","*","FXAA_QUALITY_P6",";","if","(","!","NH",")","Oc",".","y","+=","Oa",".","y","*","FXAA_QUALITY_P6",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",7,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NI",")","{","if","(","!","NG",")","NL","=","bB","(","Ns","(","Nz",",","Ob",".","xy",")",")",";","if","(","!","NH",")","NV","=","bB","(","Ns","(","Nz",",","Oc",".","xy",")",")",";","if","(","!","NG",")","NL","=","NL","-","NM","*","0.5",";","if","(","!","NH",")","NV","=","NV","-","NM","*","0.5",";","NG","=","abs","(","NL",")",">=","NN",";","NH","=","abs","(","NV",")",">=","NN",";","if","(","!","NG",")","Ob",".","x","-=","Oa",".","x","*","FXAA_QUALITY_P7",";","if","(","!","NG",")","Ob",".","y","-=","Oa",".","y","*","FXAA_QUALITY_P7",";","NI","=","(","!","NG",")","||","(","!","NH",")",";","if","(","!","NH",")","Oc",".","x","+=","Oa",".","x","*","FXAA_QUALITY_P7",";","if","(","!","NH",")","Oc",".","y","+=","Oa",".","y","*","FXAA_QUALITY_P7",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",8,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NI",")","{","if","(","!","NG",")","NL","=","bB","(","Ns","(","Nz",",","Ob",".","xy",")",")",";","if","(","!","NH",")","NV","=","bB","(","Ns","(","Nz",",","Oc",".","xy",")",")",";","if","(","!","NG",")","NL","=","NL","-","NM","*","0.5",";","if","(","!","NH",")","NV","=","NV","-","NM","*","0.5",";","NG","=","abs","(","NL",")",">=","NN",";","NH","=","abs","(","NV",")",">=","NN",";","if","(","!","NG",")","Ob",".","x","-=","Oa",".","x","*","FXAA_QUALITY_P8",";","if","(","!","NG",")","Ob",".","y","-=","Oa",".","y","*","FXAA_QUALITY_P8",";","NI","=","(","!","NG",")","||","(","!","NH",")",";","if","(","!","NH",")","Oc",".","x","+=","Oa",".","x","*","FXAA_QUALITY_P8",";","if","(","!","NH",")","Oc",".","y","+=","Oa",".","y","*","FXAA_QUALITY_P8",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",9,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NI",")","{","if","(","!","NG",")","NL","=","bB","(","Ns","(","Nz",",","Ob",".","xy",")",")",";","if","(","!","NH",")","NV","=","bB","(","Ns","(","Nz",",","Oc",".","xy",")",")",";","if","(","!","NG",")","NL","=","NL","-","NM","*","0.5",";","if","(","!","NH",")","NV","=","NV","-","NM","*","0.5",";","NG","=","abs","(","NL",")",">=","NN",";","NH","=","abs","(","NV",")",">=","NN",";","if","(","!","NG",")","Ob",".","x","-=","Oa",".","x","*","FXAA_QUALITY_P9",";","if","(","!","NG",")","Ob",".","y","-=","Oa",".","y","*","FXAA_QUALITY_P9",";","NI","=","(","!","NG",")","||","(","!","NH",")",";","if","(","!","NH",")","Oc",".","x","+=","Oa",".","x","*","FXAA_QUALITY_P9",";","if","(","!","NH",")","Oc",".","y","+=","Oa",".","y","*","FXAA_QUALITY_P9",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",10,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NI",")","{","if","(","!","NG",")","NL","=","bB","(","Ns","(","Nz",",","Ob",".","xy",")",")",";","if","(","!","NH",")","NV","=","bB","(","Ns","(","Nz",",","Oc",".","xy",")",")",";","if","(","!","NG",")","NL","=","NL","-","NM","*","0.5",";","if","(","!","NH",")","NV","=","NV","-","NM","*","0.5",";","NG","=","abs","(","NL",")",">=","NN",";","NH","=","abs","(","NV",")",">=","NN",";","if","(","!","NG",")","Ob",".","x","-=","Oa",".","x","*","FXAA_QUALITY_P10",";","if","(","!","NG",")","Ob",".","y","-=","Oa",".","y","*","FXAA_QUALITY_P10",";","NI","=","(","!","NG",")","||","(","!","NH",")",";","if","(","!","NH",")","Oc",".","x","+=","Oa",".","x","*","FXAA_QUALITY_P10",";","if","(","!","NH",")","Oc",".","y","+=","Oa",".","y","*","FXAA_QUALITY_P10",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",11,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NI",")","{","if","(","!","NG",")","NL","=","bB","(","Ns","(","Nz",",","Ob",".","xy",")",")",";","if","(","!","NH",")","NV","=","bB","(","Ns","(","Nz",",","Oc",".","xy",")",")",";","if","(","!","NG",")","NL","=","NL","-","NM","*","0.5",";","if","(","!","NH",")","NV","=","NV","-","NM","*","0.5",";","NG","=","abs","(","NL",")",">=","NN",";","NH","=","abs","(","NV",")",">=","NN",";","if","(","!","NG",")","Ob",".","x","-=","Oa",".","x","*","FXAA_QUALITY_P11",";","if","(","!","NG",")","Ob",".","y","-=","Oa",".","y","*","FXAA_QUALITY_P11",";","NI","=","(","!","NG",")","||","(","!","NH",")",";","if","(","!","NH",")","Oc",".","x","+=","Oa",".","x","*","FXAA_QUALITY_P11",";","if","(","!","NH",")","Oc",".","y","+=","Oa",".","y","*","FXAA_QUALITY_P11",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",12,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NI",")","{","if","(","!","NG",")","NL","=","bB","(","Ns","(","Nz",",","Ob",".","xy",")",")",";","if","(","!","NH",")","NV","=","bB","(","Ns","(","Nz",",","Oc",".","xy",")",")",";","if","(","!","NG",")","NL","=","NL","-","NM","*","0.5",";","if","(","!","NH",")","NV","=","NV","-","NM","*","0.5",";","NG","=","abs","(","NL",")",">=","NN",";","NH","=","abs","(","NV",")",">=","NN",";","if","(","!","NG",")","Ob",".","x","-=","Oa",".","x","*","FXAA_QUALITY_P12",";","if","(","!","NG",")","Ob",".","y","-=","Oa",".","y","*","FXAA_QUALITY_P12",";","NI","=","(","!","NG",")","||","(","!","NH",")",";","if","(","!","NH",")","Oc",".","x","+=","Oa",".","x","*","FXAA_QUALITY_P12",";","if","(","!","NH",")","Oc",".","y","+=","Oa",".","y","*","FXAA_QUALITY_P12",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}","NN","=","NZ",".","x","-","Ob",".","x",";","NM","=","Oc",".","x","-","NZ",".","x",";","if","(","!","NE",")","NN","=","NZ",".","y","-","Ob",".","y",";","if","(","!","NE",")","NM","=","Oc",".","y","-","NZ",".","y",";","NH","=","(","NL","<","0.0",")","!=","NF",";","NL","=","(","NM","+","NN",")",";","NF","=","(","NV","<","0.0",")","!=","NF",";","NL","=","1.0","/","NL",";","NG","=","NN","<","NM",";","NM","=","min","(","NN",",","NM",")",";","NF","=","NG","?","NH",":","NF",";","NP","=","NP","*","NP",";","NL","=","(","NM","*","(","-","NL",")",")","+","0.5",";","NP","=","NP","*","NB",";","NL","=","NF","?","NL",":","0.0",";","NP","=","max","(","NL",",","NP",")",";","if","(","!","NE",")","NZ",".","x","+=","NP","*","NR",";","if","(","NE",")","NZ",".","y","+=","NP","*","NR",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_DISCARD",1,{type:"equal_expr",places:2},"FXAA_BLEND4WEB",1,{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Ns","(","Nz",",","NZ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec4","(","Ns","(","Nz",",","NZ",")",".","xyz",",","NJ",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","Ok","(","in","sampler2D","Oe",",","in","vec2","Of",",","in","vec2","Og",")","{","float","Oh",",","Oi",",","Oj",";","Oh","=","texture2D","(","Oe",",","Of",")",".","r",";","Oi","=","Og",".","x",";","Oj","=","Og",".","y",";","Oi","=","2.0","*","Oi","/","(","Oi","+","Oj","-","(","2.0","*","Oh","-","1.0",")","*","(","Oj","-","Oi",")",")",";","return","Oi",";","}"]}]}}