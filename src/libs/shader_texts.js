/**
 * Copyright (C) 2014-2015 Triumph LLC
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

b4w.module["shader_texts"] = function(exports, require) {exports["anchors.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["void","main","(",")","{","gl_FragColor","=","vec4","(","1.0",")",";","}"]}]},exports["anchors.glslv"] = {type:"group",parts:[{type:"var",name:"ANCHOR_NUM",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_index",";","uniform","vec3","u_position","[","ANCHOR_NUM","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec4","a","=","u_view_matrix","*","vec4","(","u_position","[","int","(","a_index",")","]",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","a",";","gl_PointSize","=","4.0",";","}"]}]},exports["color_id.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"pack.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_color_id",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_outline_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bQ",";","varying","vec4","bR",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bS",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bU",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";","varying","vec4","bW",";","varying","vec4","bX",";","varying","vec4","bY",";","varying","vec4","bZ",";","uniform","float","u_perspective_cast_far_bound",";","uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";","uniform","sampler2D","u_shadow_map1",";","uniform","sampler2D","u_shadow_map2",";","uniform","sampler2D","u_shadow_map3",";","uniform","sampler2D","u_shadow_mask",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","b_",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","tA","=","u_camera_eye_frag","-","bQ",";","vec3","tB","=","normalize","(","tA",")",";","vec3","tC",";","vec3","tD",";","vec3","tE",";","float","tF",";","float","tG",";","tz","(","tB",",","tC",",","tD",",","tE",",","tF",",","tG",")",";","float","tH","=","tG",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","tH","=","(","texture2D","(","u_sampler",",","b_",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","tH","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","tH","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_outline_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bQ",";","varying","vec4","bR",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bS",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bU",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bV",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","b_",";"]}]}}]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","wB","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","wC","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","wD","=","vec3","(","a_tangent",")",";","vec3","wE","=","a_tangent","[","3","]","*","cross","(","wC",",","wD",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","wD","=","vec3","(","0.0",")",";","vec3","wE","=","vec3","(","0.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","wC","=","vec3","(","0.0",")",";","vec3","wD","=","vec3","(","0.0",")",";","vec3","wE","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["wB","=","mix","(","wB",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["wC","=","mix","(","wC",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","wF","=","vec3","(","a_tangent",")",";","vec3","wG","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","wF",")",";","wD","=","mix","(","wD",",","wF",",","u_va_frame_factor",")",";","wE","=","mix","(","wE",",","wG",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vD","(","wB",",","wD",",","wE",",","wC",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","wH","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","wH","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","wI","=","(","u_model_matrix","*","vec4","(","wH",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","wJ","=","um","(","u_camera_eye",",","wI",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","wJ","=","ug","(","u_camera_eye",",","wI",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","wK","=","(","u_model_matrix","*","vec4","(","wH",",","1.0",")",")",".","xyz",";","wJ","=","wJ","*","tW","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","wK",")",";"]}]}}]},{type:"textline",tokens:["bh","wL","=","ut","(","wB","-","wH",",","wH",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","wJ",")",";","wL",".","b","=","wI",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bh","wL","=","ut","(","wB",",","wH",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wv","(","wL",".","a",",","wL",".","b",",","wC",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","wM","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","wM","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["wv","(","wL",".","a",",","wL",".","b",",","wM",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["b_","=","uw","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bQ","=","wL",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["bS","=","wL",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["float","wN","=","(","dot","(","cross","(","wL",".","e",",","wL",".","c",")",",","wL",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bT","=","vec4","(","wL",".","c",",","wN",")",";"]}]}}]},{type:"textline",tokens:["bR","=","u_view_matrix","*","vec4","(","wL",".","a",",","1.0",")",";","vec4","wO","=","u_proj_matrix","*","bR",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["wO",".","xy","+=","u_subpixel_jitter","*","wO",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","wP","=","wO",".","x",";","float","wQ","=","wO",".","y",";","float","wR","=","wO",".","w",";","bU",".","x","=","(","wP","+","wR",")","/","2.0",";","bU",".","y","=","(","wQ","+","wR",")","/","2.0",";","bU",".","z","=","wR",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bV","=","-","bR",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["wA","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","wL",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bQ",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bS",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bT",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","b_",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bR",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bW",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bZ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bU",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bV",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","wB","=","u_camera_eye_frag","-","bQ",";","vec3","wC","=","normalize","(","wB",")",";","vec3","wD",";","vec3","wE",";","vec3","wF",";","float","wG",";","float","wH",";","tz","(","wC",",","wD",",","wE",",","wF",",","wG",",","wH",")",";","float","wI","=","wH",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","wI","=","(","texture2D","(","u_colormap0",",","b_",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","wI","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","wI","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","NO_SHADOWS",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","dT","(","bR",".","z",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor",".","a","+=","0.00001","*","bT",".","r",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_shadow_cast_billboard_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bQ",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bS",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bT",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","b_",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bR",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bW",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bZ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bU",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bV",";"]}]}}]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","xA","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xB","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","xB","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xC","=","vec3","(","a_tangent",")",";","vec3","xD","=","a_tangent","[","3","]","*","cross","(","xB",",","xC",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","xC","=","vec3","(","0.0",")",";","vec3","xD","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["xA","=","mix","(","xA",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["xB","=","mix","(","xB",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xE","=","vec3","(","a_tangent",")",";","vec3","xF","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","xE",")",";","xC","=","mix","(","xC",",","xE",",","u_va_frame_factor",")",";","xD","=","mix","(","xD",",","xF",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vD","(","xA",",","xC",",","xD",",","xB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xG","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","xG","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["bh","xH","=","xp","(","xA",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","xB",",","xG",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xI","=","(","u_model_matrix","*","vec4","(","xG",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD",{type:"logic_negative_expr",places:1},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","xJ","=","u_shadow_cast_billboard_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","xJ","=","u_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","xK","=","um","(","u_camera_eye",",","xI",",","xJ",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","xK","=","ug","(","u_camera_eye",",","xI",",","xJ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xL","=","(","u_model_matrix","*","vec4","(","xG",",","1.0",")",")",".","xyz",";","xK","=","xK","*","tW","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","xL",")",";"]}]}}]},{type:"textline",tokens:["bh","xH","=","ut","(","xA","-","xG",",","xG",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","xB",",","xK",")",";","xH",".","b","=","xI",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bh","xH","=","ut","(","xA",",","xG",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","xB",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xM","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","xM","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["wv","(","xH",".","a",",","xH",".","b",",","xM",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bQ","=","xH",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["bS","=","xH",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["float","xN","=","(","dot","(","cross","(","xH",".","e",",","xH",".","c",")",",","xH",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bT","=","vec4","(","xH",".","c",",","xN",")",";"]}]}}]}]}}]},{type:"textline",tokens:["vec4","xO","=","u_view_matrix","*","vec4","(","xH",".","a",",","1.0",")",";","vec4","xP","=","u_proj_matrix","*","xO",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["xP",".","xy","+=","u_subpixel_jitter","*","xP",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bU","=","bP","(","xP",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bV","=","-","bR",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["wA","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["b_","=","uw","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xz","(","xH",".","a",",","xH",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bR","=","xO",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","xQ","=","(","u_proj_matrix","*","u_view_matrix","[","3","]",")",".","xy",";","float","xR","=","SHADOW_TEX_RES","/","2.0",";","xQ","=","floor","(","xQ","*","xR","+","0.5",")","/","xR","-","xQ",";","xP",".","xy","+=","xQ",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","xP",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","xA",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","xA",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","xA",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","xA",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","xA",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","xA",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","xA",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","xA",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","xA",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xB","=","(","u_model_matrix","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","mat4","xC","=","ug","(","u_camera_eye",",","xB",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xC","=","xC","*","tW","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["bh","xD","=","ut","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","xC",")",";","xD",".","b","=","xB",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bh","xD","=","ut","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","xE","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","xD",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["xA","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xA","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["xA","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","xE",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","xB",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","b_",";","varying","float","xC",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","NUM_LINES",{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","int","xD","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","xD","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","xF","(","float","xE",")","{","return","xE","-","floor","(","xE","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","xO","(","inout","float","xG",",","in","float","xH","[","xD","]",",","in","float","xI",")","{","for","(","int","xJ","=","0",";","xJ","<","NUM_RINGS",";","xJ","++",")","{","float","xK","=","40.0","*","xH","[","xJ","]",";","float","xL","=","300.0","*","(","xF","(","xK",")","-","0.005",")",";","float","xM","=","xK",";","float","xN","=","abs","(","xM","*","(","u_halo_size","*","xL","-","xI",")",")",";","xG","+=","1.0","-","min","(","xN",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","xX","(","inout","float","xP",",","in","float","xQ","[","xD","]",",","in","float","xR",")","{","for","(","int","xS","=","0",";","xS","<","NUM_LINES",";","xS","++",")","{","float","xT","=","xQ","[","xS","]",";","float","xU","=","xT",";","float","xV","=","1000.0","*","(","xF","(","xT",")","-","0.005",")",";","float","xW","=","20.0","*","abs","(","xU","*","b_",".","x","+","xV","*","b_",".","y",")",";","xP","+=","1.0","-","min","(","xW",",","1.0",")",";","}","xP","*=","xR",";","}"]}]}}]},{type:"textline",tokens:["void","yd","(","inout","float","xY",",","in","vec2","xZ",")","{","float","x_",",","ya",";","ya","=","atan","(","xZ",".","y",",","xZ",".","x",")",";","ya","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","float","yb","=","cos","(","ya",")",";","float","yc","=","sin","(","ya",")",";","ya","=","(","yb","*","xZ",".","x","+","yc","*","xZ",".","y",")","*","(","yb","*","xZ",".","y","-","yc","*","xZ",".","x",")",";","x_","=","abs","(","ya",")",";","if","(","x_","<","1.0",")","{","x_","=","(","0.01","*","u_halo_size",")","/","(","x_",")",";","xY","*=","sqrt","(","min","(","x_",",","1.0",")",")",";","}","}","void","main","(",")","{","float","ye","=","(","b_",".","x","*","b_",".","x","+","b_",".","y","*","b_",".","y",")",";","float","yf","=","sqrt","(","ye",")",";","ye","=","max","(","1.0","-","ye",",","0.0",")",";","ye","=","pow","(","ye",",","u_halo_hardness",")",";","float","yg","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","NUM_LINES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","yh","[","xD","]",";","for","(","int","yi","=","0",";","yi","<","xD",";","yi","++",")","{","yh","[","yi","]","=","fract","(","xC","/","(","float","(","yi",")","+","0.01",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["float","yj","=","0.0",";","xO","(","yj",",","yh",",","yf",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","yk","=","0.0",";","xX","(","yk",",","yh",",","ye",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["yd","(","ye",",","b_",")",";"]}]}}]},{type:"textline",tokens:["ye","*=","yg",";","vec3","yl","=","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["yj","*=","ye",";","yl","+=","u_halo_rings_color","*","yj",";","ye","+=","yj",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["yk","*=","yg",";","yl","+=","u_halo_lines_color","*","yk",";","ye","+=","yk",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["ye","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","ym","=","u_halo_stars_blend","*","(","xB",".","y","-","u_halo_stars_height",")",";","ye","*=","clamp","(","ym",",","0.0",",","1.0",")",";","ye","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["bb","(","yl",")",";","be","(","yl",",","ye",")",";","gl_FragColor","=","vec4","(","yl",",","ye",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","b_",";","varying","float","xC",";"]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","xB",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","xD","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","b_","=","a_halo_bb_vertex","*","2.0",";","xC","=","fract","(","xD",".","x","+","xD",".","y","+","xD",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","xE","=","tG","(","xD",",","u_view_matrix",")",";","mat4","xF","=","u_view_matrix",";","xF","[","3","]","[","0","]","=","0.0",";","xF","[","3","]","[","1","]","=","0.0",";","xF","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","xE","=","tG","(","xD",",","u_view_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","xG","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","vec4","xH","=","xE","*","xG",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","xI","=","u_proj_matrix","*","xF","*","xH",";","xI",".","z","=","0.99999","*","xI",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xB","=","xH",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","xI","=","u_proj_matrix","*","u_view_matrix","*","xH",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","xI",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec3","xD","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","xD",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_VECTOR_VIEW",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION","REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bQ",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bS",";"]}]}}]},{type:"textline",tokens:["varying","vec4","bR",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bW",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bZ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bU",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bV",";"]}]}}]},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"nodes.glslf"},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","yx","=","length","(","bR",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","yy","=","bQ",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","yz","=","u_sun_intensity",";"]}]}}]},{type:"textline",tokens:["vec3","yA","=","normalize","(","u_camera_eye_frag","-","bQ",")",";","vec3","yB",";","vec3","yC",";","vec3","yD",";","float","yE",";","float","yF",";","tz","(","yA",",","yB",",","yC",",","yD",",","yE",",","yF",")",";","vec3","yG","=","yB",";","float","yH","=","yF",";","vec3","yI","=","yD",";","float","yJ","=","yE",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["yG","=","max","(","yG","-","sqrt","(","0.01","*","-","min","(","yy",",","0.0",")",")",",","0.5","*","yG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["aY","(","yG",",","yy",",","u_time",",","yJ",",","yI",",","u_sun_direction",",","yz",",","u_sun_quaternion",",","bQ",",","yx",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","yH","<=","0.5",")","discard",";","yH","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES_GLOW",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["yH","=","1.0",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["yw","(","yG",",","length","(","bR",")",",","yA",",","yy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yw","(","yG",",","length","(","bR",")",",","yA",",","1.0",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","yK","=","texture2DProj","(","u_shadow_mask",",","bU",")",".","rg",";","float","yL","=","yK",".","g",";","yG","=","vec3","(","yL",")",";"]}]}}]},{type:"textline",tokens:["bb","(","yG",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2},"NODES_GLOW",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["be","(","yG",",","yH",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","yG",",","yH",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bQ",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bS",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bR",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","yx",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","b_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","yy",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bW",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bZ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bU",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bV",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","yz","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"NODES",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","yA","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","yA","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","yB","=","vec3","(","a_tangent",")",";","vec3","yC","=","a_tangent","[","3","]","*","cross","(","yA",",","yB",")",";"]}]}},{type:"elif",expression:["NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","yD","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vec3","yE","=","normalize","(","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","vec3","yF","=","yD","-","u_camera_eye",";","vec3","yC","=","cross","(","yF",",","yE",")",";","vec3","yB","=","cross","(","yE",",","yC",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","yB","=","vec3","(","0.0",")",";","vec3","yC","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["yz","=","mix","(","yz",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["yA","=","mix","(","yA",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","yG","=","vec3","(","a_tangent",")",";","vec3","yH","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","yG",")",";","yB","=","mix","(","yB",",","yG",",","u_va_frame_factor",")",";","yC","=","mix","(","yC",",","yH",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vD","(","yz",",","yB",",","yC",",","yA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","yI","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","yI","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["bh","yJ","=","xp","(","yz",",","yB",",","yC",",","yA",",","yI",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","yK","=","(","u_model_matrix","*","vec4","(","yI",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","yL","=","um","(","u_camera_eye",",","yK",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","yL","=","ug","(","u_camera_eye",",","yK",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","yM","=","(","u_model_matrix","*","vec4","(","yI",",","1.0",")",")",".","xyz",";","yL","=","yL","*","tW","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","yM",")",";"]}]}}]},{type:"textline",tokens:["bh","yJ","=","ut","(","yz","-","yI",",","yI",",","yB",",","yC",",","yA",",","yL",")",";","yJ",".","b","=","yK",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bh","yJ","=","ut","(","yz",",","yI",",","yB",",","yC",",","yA",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","yN","=","(","dot","(","cross","(","yJ",".","e",",","yJ",".","c",")",",","yJ",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bT","=","vec4","(","yJ",".","c",",","yN",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["wv","(","yJ",".","a",",","yJ",".","b",",","yA",")",";"]}]}}]},{type:"textline",tokens:["bQ","=","yJ",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bS","=","yJ",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["yx","=","u_camera_eye","-","yJ",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["b_","=","uw","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["yy","=","yJ",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["yy","=","a_color",";"]}]}}]}]}}]},{type:"textline",tokens:["vec4","yO","=","u_view_matrix","*","vec4","(","yJ",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bR","=","yO",";"]}]}}]},{type:"textline",tokens:["vec4","yP","=","u_proj_matrix","*","yO",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["yP",".","xy","+=","u_subpixel_jitter","*","yP",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bU","=","bP","(","yP",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xz","(","yJ",".","a",",","yJ",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bV","=","-","yO",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["wA","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","yP",";","}"]}]},exports["main_stack.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","ALPHA_AS_SPEC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_perspective_cast_far_bound",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bQ",";","varying","vec3","bS",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bR",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bT",";"]}]}}]},{type:"textline",tokens:["varying","vec3","yx",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","b_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","yy",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bW",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bZ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bU",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"lighting_nodes.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["float","Br","=","length","(","bR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","Bs","=","bQ",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Bt","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Bu","=","b_",";"]}]}}]},{type:"textline",tokens:["vec3","Bv","=","normalize","(","bS",")",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","Bv","=","Bv",";","else","Bv","=","-","Bv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Bw","=","cross","(","Bv",",","bT",".","xyz",")","*","bT",".","w",";","mat3","Bx","=","mat3","(","bT",".","xyz",",","Bw",",","Bv",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","By","=","normalize","(","u_view_matrix_frag","*","vec4","(","bS",",","0.0",")",")",".","st",";","By","=","By","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","Br","<","PARALLAX_LOD_DIST",")","{","float","Bz","=","clamp","(","0.5","*","(","PARALLAX_LOD_DIST","-","Br",")",",","0.0",",","1.0",")",";","float","BA","=","u_parallax_scale","*","Bz",";","vec3","BB","=","normalize","(","yx","*","Bx",")",";","float","BC","=","1.0","/","PARALLAX_STEPS",";","vec2","BD","=","BB",".","xy","*","BA","/","(","PARALLAX_STEPS","*","BB",".","z",")",";","float","BE","=","1.0",";","float","BF",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","BG","=","By",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","BG","=","Bu",";"]}]}}]},{type:"textline",tokens:["BF","=","texture2D","(","u_normalmap0",",","BG",")",".","a",";","for","(","float","BH","=","1.0",";","BH","<=","PARALLAX_STEPS",";","BH","++",")","{","if","(","BF","<","BE",")","{","BE","-=","BC",";","BG","-=","BD",";","BF","=","texture2D","(","u_normalmap0",",","BG",")",".","a",";","}","}","vec2","BI","=","BG","+","BD",";","float","BJ","=","texture2D","(","u_normalmap0",",","BI",")",".","a","-","(","BE","+","BC",")",";","float","BK","=","BF","-","BE",";","float","BL","=","BK","/","(","BK","-","BJ",")",";","BG","=","BL","*","BI","+","(","1.0","-","BL",")","*","BG",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["Bu","+=","BG","-","By",";"]}]}}]},{type:"textline",tokens:["By","=","BG",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["By","+=","BG","-","Bu",";"]}]}}]},{type:"textline",tokens:["Bu","=","BG",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","BM",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["BM","=","texture2D","(","u_normalmap0",",","By",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["BM","=","texture2D","(","u_normalmap0",",","Bu",")",";"]}]}}]},{type:"textline",tokens:["vec3","BN","=","BM",".","rgb","-","0.5",";","BN","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","BN",",","u_normal_factor",")",";","vec3","BO","=","Bx","*","BN",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","BO","=","Bv",";"]}]}}]},{type:"textline",tokens:["BO","=","normalize","(","BO",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["By","=","normalize","(","u_view_matrix_frag","*","vec4","(","BO",",","0.0",")",")",".","st",";","By","=","By","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"textline",tokens:["vec3","BP","=","normalize","(","yx",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","BQ","=","yy",";","a_","(","BQ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","BR","=","vec4","(","BQ",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","BR","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["float","BS","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","BT","=","texture2D","(","u_colormap0",",","By",")",";"]}]}},{type:"elif",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","BT","=","texture2D","(","u_colormap0",",","Bu",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["a_","(","BT",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","BU",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR1_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["BU","=","texture2D","(","u_colormap1",",","By",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["BU","=","texture2D","(","u_colormap1",",","Bu",")",";"]}]}}]},{type:"textline",tokens:["a_","(","BU",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","BV","=","texture2D","(","u_stencil0",",","By",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","BV","=","texture2D","(","u_stencil0",",","Bu",")",";"]}]}}]},{type:"textline",tokens:["BT","=","mix","(","BT",",","BU",",","BV",".","r",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["BR",".","rgb","=","mix","(","BR",".","rgb",",","BT",".","rgb",",","u_diffuse_color_factor",")",";","float","BW","=","u_alpha_factor","*","BT",".","a",";","BW","+=","(","1.0","-","step","(","0.0",",","BW",")",")",";","BR",".","a","=","mix","(","BW",",","1.0",",","u_diffuse_color",".","a",")",";","BS","=","BT",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["BR",".","rgb","*=","mix","(","vec3","(","1.0",")",",","BT",".","rgb",",","u_diffuse_color_factor",")",";","BR",".","a","=","BT",".","a",";","BS","=","BT",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["vec3","BX","=","u_diffuse_intensity","*","BR",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","BY","=","BX",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","BZ","=","u_environment_energy","*","ew","(","BO",")",";","vec3","B_","=","u_ambient","*","BZ",";","float","Ca","=","dY","(","BX",")",";","vec3","Cb","=","u_emit","*","BR",".","rgb",";","vec3","Cc","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Cd","=","vec3","(","BS",")",";"]}]}},{type:"elif",expression:["TEXTURE_SPEC_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Cd","=","texture2D","(","u_specmap0",",","By",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","Cd","=","texture2D","(","u_specmap0",",","Bu",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["a_","(","Cd",".","rgb",")",";","Cc","=","mix","(","Cc",",","Cd",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["float","Ce","=","u_specular_params","[","0","]",";","vec2","Cf","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","Cg","=","Ce","*","Cc",";","vec3","BY",";","vec3","Ch",";","Bq","(","Cb",",","B_",",","BX",",","Cg",",","bQ",",","BO",",","BP",",","Cf",",","u_diffuse_params",",","Ca",",","0.0",",","vec4","(","0.0",")",",","BY",",","Ch",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["et","(","BY",",","BP",",","BO",",","u_reflect_factor",")",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["et","(","BY",",","BP",",","BO",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["BY","+=","Ch",";"]}]}}]},{type:"textline",tokens:["float","Ci","=","BR",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["BY","=","max","(","BY","-","sqrt","(","0.01","*","-","min","(","Bs",",","0.0",")",")",",","0.5","*","BY",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["aY","(","BY",",","Bs",",","u_time",",","Ca",",","BO",",","u_sun_direction",",","Bt",",","u_sun_quaternion",",","bQ",",","Br",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","Ci","<=","0.5",")","discard",";","Ci","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["float","Cj","=","max","(","max","(","Ch",".","r",",","Ch",".","g",")",",","Ch",".","b",")","*","u_specular_alpha",";","Ci","=","BR",".","a","*","(","1.0","-","Cj",")","+","Cj",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ci","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["BY","=","mix","(","eK","(","bU",",","BO",".","xz","*","u_refr_bump",")",",","BY",",","Ci",")",";","Ci","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["yw","(","BY",",","Br",",","BP",",","Bs",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yw","(","BY",",","Br",",","BP",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["bb","(","BY",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["be","(","BY",",","Ci",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","BY",",","Ci",")",";","}"]}]},exports["main_stack.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bQ",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bS",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bR",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","yx",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","b_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","yy",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bW",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bZ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bU",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bV",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","Br","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"NODES",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Bs","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","Bs","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Bt","=","vec3","(","a_tangent",")",";","vec3","Bu","=","a_tangent","[","3","]","*","cross","(","Bs",",","Bt",")",";"]}]}},{type:"elif",expression:["NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Bv","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vec3","Bw","=","normalize","(","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","vec3","Bx","=","Bv","-","u_camera_eye",";","vec3","Bu","=","cross","(","Bx",",","Bw",")",";","vec3","Bt","=","cross","(","Bw",",","Bu",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","Bt","=","vec3","(","0.0",")",";","vec3","Bu","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["Br","=","mix","(","Br",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["Bs","=","mix","(","Bs",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","By","=","vec3","(","a_tangent",")",";","vec3","Bz","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","By",")",";","Bt","=","mix","(","Bt",",","By",",","u_va_frame_factor",")",";","Bu","=","mix","(","Bu",",","Bz",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vD","(","Br",",","Bt",",","Bu",",","Bs",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","BA","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","BA","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["bh","BB","=","xp","(","Br",",","Bt",",","Bu",",","Bs",",","BA",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","BC","=","(","u_model_matrix","*","vec4","(","BA",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","BD","=","um","(","u_camera_eye",",","BC",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","BD","=","ug","(","u_camera_eye",",","BC",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","BE","=","(","u_model_matrix","*","vec4","(","BA",",","1.0",")",")",".","xyz",";","BD","=","BD","*","tW","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","BE",")",";"]}]}}]},{type:"textline",tokens:["bh","BB","=","ut","(","Br","-","BA",",","BA",",","Bt",",","Bu",",","Bs",",","BD",")",";","BB",".","b","=","BC",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bh","BB","=","ut","(","Br",",","BA",",","Bt",",","Bu",",","Bs",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","BF","=","(","dot","(","cross","(","BB",".","e",",","BB",".","c",")",",","BB",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bT","=","vec4","(","BB",".","c",",","BF",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["wv","(","BB",".","a",",","BB",".","b",",","Bs",")",";"]}]}}]},{type:"textline",tokens:["bQ","=","BB",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bS","=","BB",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["yx","=","u_camera_eye","-","BB",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["b_","=","uw","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["yy","=","BB",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["yy","=","a_color",";"]}]}}]}]}}]},{type:"textline",tokens:["vec4","BG","=","u_view_matrix","*","vec4","(","BB",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bR","=","BG",";"]}]}}]},{type:"textline",tokens:["vec4","BH","=","u_proj_matrix","*","BG",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["BH",".","xy","+=","u_subpixel_jitter","*","BH",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bU","=","bP","(","BH",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xz","(","BB",".","a",",","BB",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bV","=","-","BG",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["wA","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","BH",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec2","u_texel_size",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","float","Br",";","varying","vec3","yy",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bR",";","varying","vec3","bU",";","varying","float","Bs",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Bt","=","gl_PointCoord","-","0.5",";","float","Bu","=","2.0","*","length","(","Bt",")",";","float","Bv","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","Bu",")",";","float","Bw","=","u_diffuse_color",".","a","*","Br","*","(","1.0","-","Bv",")",";","vec3","Bx","=","yy","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","By","=","bU",".","xy","/","bU",".","z",";","vec2","Bz","=","vec2","(","Bt",".","x",",","-","Bt",".","y",")","*","Bs","*","u_texel_size",";","vec2","BA","=","vec2","(","By","+","Bz",")",";","vec4","BB","=","texture2D","(","u_scene_depth",",","BA",")",";","float","BC","=","l","(","BB",")",";","float","BD","=","-","bR",".","z","/","u_view_max_depth",";","float","BE","=","BC","-","BD",";","float","BF","=","u_view_max_depth","/","SOFT_STRENGTH","*","BE",";","Bw","=","Bw","*","min","(","BF",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["bb","(","Bx",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["be","(","Bx",",","Bw",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Bx",",","Bw",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","float","u_p_wind_fac",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_wind",";","uniform","float","u_height",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["varying","float","Br",";","varying","vec3","yy",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bR",";","varying","vec3","bU",";","varying","float","Bs",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["void","main","(",")","{","Bt","Ci",";","Ci","=","Ch","(",")",";","vec4","Cj","=","u_view_matrix","*","vec4","(","Ci",".","b",",","1.0",")",";","vec4","Ck","=","u_proj_matrix","*","Cj",";","gl_Position","=","Ck",";","Br","=","Ci",".","c",";","yy","=","Ci",".","d",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["bR","=","Cj",";"]}]}}]},{type:"textline",tokens:["float","Cl","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","float","Cm","=","Ci",".","a","*","Cl",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["float","Cn","=","Ck",".","x",";","float","Co","=","Ck",".","y",";","float","Cp","=","Ck",".","w",";","bU",".","x","=","(","Cn","+","Cp",")","/","2.0",";","bU",".","y","=","(","Co","+","Cp",")","/","2.0",";","bU",".","z","=","Cp",";","Bs","=","Cm",";"]}]}}]},{type:"textline",tokens:["gl_PointSize","=","Cm",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","varying","float","Br",";","varying","vec3","yy",";","varying","vec2","b_",";","varying","vec3","bQ",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","yx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bR",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bU",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"lighting_nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Ci","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Cj","=","texture2D","(","u_sampler",",","b_",")",";","a_","(","Cj",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ci",".","rgb","=","mix","(","Ci",".","rgb",",","Cj",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ci",".","rgb","*=","mix","(","vec3","(","1.0",")",",","Cj",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["Ci",".","a","=","Cj",".","a",";"]}]}}]},{type:"textline",tokens:["Ci",".","rgb","*=","yy",";","vec3","Ck","=","u_diffuse_intensity","*","Ci",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Cl","=","normalize","(","yx",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Cm","=","u_emit","*","Ci",".","rgb",";","vec3","Cn","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logic_negative_expr",places:1},"SKY_COLOR",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Co","=","u_environment_energy","*","ew","(","vec3","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","Co","=","u_environment_energy","*","ew","(","Cn",")",";"]}]}}]},{type:"textline",tokens:["vec3","Cp","=","u_ambient","*","Co",";","float","Cq","=","u_specular_params","[","0","]",";","vec2","Cr","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","Cs","=","Cq","*","u_specular_color",";","vec3","Ct",";","vec3","Cu",";","Bq","(","Cm",",","Cp",",","Ck",",","Cs",",","bQ",",","Cn",",","Cl",",","Cr",",","u_diffuse_params",",","1.0",",","0.0",",","vec4","(","0.0",")",",","Ct",",","Cu",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","Ct","=","Ck",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["yw","(","Ct",",","length","(","bR",")",",","Cl",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["float","Cv","=","Ci",".","a","*","Br",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["float","Cw","=","-","bR",".","z","/","u_view_max_depth",";","vec4","Cx","=","texture2DProj","(","u_scene_depth",",","bU",")",";","float","Cy","=","l","(","Cx",")",";","float","Cz","=","Cy","-","Cw",";","float","CA","=","u_view_max_depth","/","SOFT_STRENGTH","*","Cz",";","Cv","=","Cv","*","min","(","CA",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["bb","(","Ct",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["be","(","Ct",",","Cv",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ct",",","Cv",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","float","u_p_wind_fac",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","vec3","u_camera_eye",";","uniform","vec3","u_wind",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["varying","float","Br",";","varying","vec3","yy",";","varying","vec2","b_",";","varying","vec3","yx",";","varying","vec3","bQ",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bR",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bU",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["float","Ck","(","vec2","Ci",",","vec2","Cj",")","{","return","(","atan","(","Cj",".","y",",","Cj",".","x",")","-","atan","(","Ci",".","y",",","Ci",".","x",")",")",";","}","void","main","(",")","{","Bt","Cl",";","Cl","=","Ch","(",")",";","float","Cm",";","mat4","Cn",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","Cm","=","Cl",".","e",";","Cn","=","tG","(","Cl",".","b",",","u_view_matrix",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","Cm","=","Cl",".","e",";","Cn","=","bB","(",")",";","Cn","[","3","]","=","vec4","(","Cl",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","Cm","=","Cl",".","e",";","Cn","=","bF","(","radians","(","90.0",")",")",";","Cn","[","3","]","=","vec4","(","Cl",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","Cm","=","Ck","(","vec2","(","EPSILON",",","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","Cl",".","e",";","Cn","=","bD","(","radians","(","-","90.0",")",")",";","Cn","[","3","]","=","vec4","(","Cl",".","b",",","1.0",")",";","}","vec4","Co","=","vec4","(","a_p_bb_vertex","*","2.0","*","Cl",".","a","*","u_p_size",",","0.0",",","1.0",")",";","vec4","Cp","=","Cn","*","bH","(","Cm",")","*","Co",";","vec4","Cq","=","u_view_matrix","*","Cp",";","vec4","Cr","=","u_proj_matrix","*","Cq",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["float","Cs","=","Cr",".","x",";","float","Ct","=","Cr",".","y",";","float","Cu","=","Cr",".","w",";","bU",".","x","=","(","Cs","+","Cu",")","/","2.0",";","bU",".","y","=","(","Ct","+","Cu",")","/","2.0",";","bU",".","z","=","Cu",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","Cr",";","Br","=","Cl",".","c",";","yy","=","Cl",".","d",";","b_","=","a_p_bb_vertex","+","0.5",";","bQ","=","Cp",".","xyz",";","yx","=","u_camera_eye","-","Cp",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"SOFT_PARTICLES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bR","=","Cq",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","Ci",";","const","float","Cj","=","0.99",";","const","float","Ck","=","1.8",";","const","int","Cl","=","8",";","float","Cv","(","vec3","Cm",",","vec3","Cn",")","{","float","Co","=","dot","(","Cn",",","Cn",")",";","float","Cp","=","2.0","*","dot","(","Cn",",","Cm",")",";","float","Cq","=","dot","(","Cm",",","Cm",")","-","1.0",";","float","Cr","=","Cp","*","Cp","-","4.0","*","Co","*","Cq",";","float","Cs","=","sqrt","(","Cr",")",";","float","Ct","=","(","-","Cp","-","Cs",")","/","2.0",";","float","Cu","=","Cq","/","Ct",";","return","Cu",";","}","float","CC","(","float","Cw",",","float","Cx",")","{","float","Cy","=","3.0","*","(","1.0","-","Cx","*","Cx",")",";","float","Cz","=","2.0","*","(","2.0","+","Cx","*","Cx",")",";","float","CA","=","1.0","+","Cw","*","Cw",";","float","CB","=","pow","(","1.0","+","Cx","*","Cx","-","2.0","*","Cx","*","Cw",",","1.5",")",";","CB","=","max","(","CB",",","0.00001",")",";","return","(","Cy","/","Cz",")","*","(","CA","/","CB",")",";","}","float","CK","(","vec3","CD",",","vec3","CE",",","float","CF",")","{","float","CG","=","dot","(","CE",",","-","CD",")",";","if","(","CG","<","0.0",")","{","return","1.0",";","}","vec3","CH","=","CD","+","CG","*","CE",";","if","(","length","(","CH",")","<","CF",")","{","return","0.0",";","}","else","if","(","length","(","CH",")",">=","CF",")","{","vec3","CI","=","normalize","(","CH",")","*","CF","-","CD",";","float","CJ","=","acos","(","dot","(","normalize","(","CI",")",",","CE",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","CJ","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","CO","(","float","CL",",","vec3","CM",",","float","CN",")","{","return","CM","-","CM","*","pow","(","u_sky_color",",","vec3","(","CN","/","CL",")",")",";","}","void","main","(",")","{","vec3","CP","=","normalize","(","Ci",")",";","vec3","CQ","=","u_sun_direction",";","float","CR","=","dot","(","CP",",","CQ",")",";","float","CS","=","CC","(","CR",",","-","0.01",")","*","u_rayleigh_brightness","*","CQ",".","y",";","float","CT","=","CC","(","CR","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","CQ",".","y",")",";","float","CU","=","smoothstep","(","0.0",",","100.0",",","CC","(","CR",",","0.9995",")",")","*","u_spot_brightness",";","vec3","CV","=","vec3","(","0.0",",","Cj",",","0.0",")",";","float","CW","=","Cv","(","CV",",","CP",")",";","float","CX","=","CW","/","float","(","Cl",")",";","float","CY","=","CK","(","CV",",","CP",",","Cj","-","0.3",")",";","vec3","CZ","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","C_","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","Da","=","0",";","Da","<","Cl",";","Da","++",")","{","float","Db","=","CX","*","float","(","Da",")",";","vec3","Dc","=","CV","+","CP","*","Db",";","float","Dd","=","CK","(","Dc",",","CQ",",","Cj","-","0.2",")",";","float","De","=","Cv","(","Dc",",","CQ",")",";","vec3","Df","=","CO","(","De",",","vec3","(","Ck",")",",","u_scatter_strength",")","*","Dd",";","CZ","+=","CO","(","sqrt","(","Db",")",",","u_sky_color","*","Df",",","u_rayleigh_strength",")",";","C_","+=","CO","(","Db",",","Df",",","u_mie_strength",")",";","}","CZ","=","CZ","*","CY","*","pow","(","CW",",","u_rayleigh_collection_power",")","/","float","(","Cl",")",";","C_","=","(","C_","*","CY","*","pow","(","CW",",","u_mie_collection_power",")",")","/","float","(","Cl",")",";","vec3","Dg","=","vec3","(","CU","*","C_","+","CT","*","C_","+","CS","*","CZ",")",";","bb","(","Dg",")",";","gl_FragColor","=","vec4","(","Dg",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","Ci",";","void","main","(",")","{","vec4","Cj","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","vec4","Ck","=","u_cube_view_matrix","*","Cj",";","Ci","=","Ck",".","xyz",";","gl_Position","=","Cj",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","b_",";","void","main","(",")","{","vec4","Cj","=","texture2D","(","u_sampler",",","b_",")",";","bb","(","Cj",".","rgb",")",";","be","(","Cj",".","rgb",",","Cj",".","a",")",";","gl_FragColor","=","Cj",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","b_",";","void","main","(",")","{","b_","=","a_texcoord",";","vec3","Cj","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","vec4","Ck","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","Cj",",","0.0",")",";","Ck",".","x","/=","Ck",".","w",";","Ck",".","y","/=","Ck",".","w",";","Ck","+=","99999.0","*","step","(","Ck",".","z",",","0.0",")",";","Ck","+=","100.0","*","(","step","(","1.0",",","abs","(","Ck",".","x",")",")","+","step","(","1.0",",","abs","(","Ck",".","y",")",")",")",";","Ck",".","x","=","-","a_lf_dist","*","Ck",".","x",";","Ck",".","y","=","-","a_lf_dist","*","Ck",".","y",";","float","Cl","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","vec2","Cm","=","vec2","(","a_lf_bb_vertex",".","x","/","Cl",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","Cn","=","1.9",";","Cm","*=","(","1.0","+","Cn","*","length","(","Ck",".","xy",")",")",";","}","gl_Position","=","vec4","(","Ck",".","xy","+","Cm",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"define",name:"INV_PI",tokens:["0.318309886"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX","PROCEDURAL_SKYDOME",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"blending.glslf"},{type:"textline",tokens:["uniform","vec4","u_sky_tex_fac",";","uniform","vec3","u_sky_tex_color",";","uniform","float","u_sky_tex_dvar",";","vec3","Et","(","vec3","Eo",",","vec3","Ep",",","float","Eq",",","float","Er",")","{","float","Es","=","Eq","*","Er",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","CB","(","Ep",",","Eo",",","Es",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","CF","(","Eo",",","Ep",",","Es",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","CJ","(","Eo",",","Ep",",","Es",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","CO","(","Eo",",","Ep",",","Es",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","CT","(","Eo",",","Ep",",","Es",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","CY","(","Eo",",","Ep",",","Es",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Db","(","Eo",",","Ep",",","Es",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Df","(","Eo",",","Ep",",","Es",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Dj","(","Eo",",","Ep",",","Es",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Dn","(","Eo",",","Ep",",","Es",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","HUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Du","(","Ep",",","Eo",",","Es",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SATURATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","DA","(","Ep",",","Eo",",","Es",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","VALUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","DG","(","Ep",",","Eo",",","Es",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","COLOR",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","DN","(","Ep",",","Eo",",","Es",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","DS","(","Ep",",","Eo",",","Es",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","DW","(","Ep",",","Eo",",","Es",")",";"]}]}}]},{type:"textline",tokens:["return","vec3","(","1.0",",","0.0",",","1.0",")",";","}","float","EB","(","float","Eu",",","float","Ev",",","float","Ew",",","float","Ex",")","{","vec3","Ey","=","vec3","(","Eu",")",",","Ez","=","vec3","(","Ev",")",";","float","EA","=","Ew","*","Ex",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","CB","(","Ez",",","Ey",",","EA",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","CF","(","Ey",",","Ez",",","EA",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","CJ","(","Ey",",","Ez",",","EA",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Eb","(","Eu",",","Ev",",","EA",",","Ex",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Eh","(","Eu",",","Ev",",","EA",",","Ex",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","En","(","Eu",",","Ev",",","EA",",","Ex",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Db","(","Ey",",","Ez",",","EA",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Df","(","Ey",",","Ez",",","EA",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Dj","(","Ey",",","Ez",",","EA",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Dn","(","Ey",",","Ez",",","EA",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","DS","(","Ez",",","Ey",",","EA",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","DW","(","Ez",",","Ey",",","EA",")",".","x",";"]}]}}]},{type:"textline",tokens:["return","0.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","Ci",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","b_",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","EC",";","vec3","ED","=","normalize","(","Ci",")",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME"],group:{type:"group",parts:[{type:"textline",tokens:["EC","=","textureCube","(","u_sky",",","ED",")",".","rgb",";"]}]}},{type:"elif",expression:["WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["EC","=","u_horizon_color",";","bb","(","EC",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","EE",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"textline",tokens:["EE","=","vec3","(","b_",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["EE","=","vec3","(","Ci",".","xy",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["float","EF","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["EF","=","abs","(","b_",".","y",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["EF","=","(","b_",".","y","+","1.0",")","*","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","EG","=","acos","(","ED",".","y",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["EF","=","abs","(","EG","*","INV_PI","-","0.5",")","*","2.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["EF","=","1.0","-","EG","*","INV_PI",";"]}]}}]}]}}]}]}}]},{type:"textline",tokens:["vec3","EH","=","u_horizon_color",";","vec3","EI","=","u_zenith_color",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX"],group:{type:"group",parts:[{type:"textline",tokens:["float","EJ","=","1.0",";","vec4","EK","=","textureCube","(","u_sky",",","ED",")",";","a_","(","EK",".","rgb",")",";","EJ","=","EK",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["EJ","=","dot","(","EK",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MTEX_NEGATIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["EK","=","vec4","(","vec3","(","1.0",")","-","EK",".","rgb",",","EK",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["EJ","=","1.0","-","EJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ","WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["EK","=","vec4","(","u_sky_tex_color",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["EJ","=","EK",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ"],group:{type:"group",parts:[{type:"textline",tokens:["EH","=","Et","(","EK",".","rgb",",","EH",",","EJ",",","u_sky_tex_fac","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","EL","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","EE",",","vec3","(","0.0",",","1.0",",","0.0",")",")",">=","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["EL","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["else","EL","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["EL","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"elif",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["EL","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","EL","!=","0.0",")","EI","=","Et","(","EK",".","rgb",",","EI",",","EJ",",","EL",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_BLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["EJ","=","dot","(","EK",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";"]}]}}]},{type:"textline",tokens:["EF","=","EB","(","u_sky_tex_dvar",",","EF",",","EJ",",","u_sky_tex_fac","[","0","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["EC","=","mix","(","EH",",","EI",",","EF",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["EC","=","EH",";"]}]}}]},{type:"textline",tokens:["bb","(","EC",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bb","(","EH",")",";","bb","(","EI",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["EC","=","mix","(","EH",",","EI",",","EF",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["EC","=","EH",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["a_","(","EC",")",";","float","EM","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","EM","=","min","(","-","EM","*","0.03",",","0.8",")",";","float","EN","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";","vec3","EO","=","vec3","(","0.0",")",";","vec4","EP","=","u_underwater_fog_color_density",";","EP",".","rgb","=","mix","(","EP",".","rgb",",","EO",",","min","(","-","ED",".","y","+","EM",",","1.0",")",")","*","EN",";","float","EQ","=","clamp","(","sign","(","ED",".","y","-","0.05","*","EM",")",",","0.0",",","1.0",")",";","EC","=","mix","(","EP",".","rgb",",","EC",",","EQ",")",";","bb","(","EC",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","EC",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","Ci",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","b_",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Eo","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","vec4","Ep","=","u_sky_vp_inverse","*","Eo",";","Ci","=","Ep",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["b_","=","a_position",".","xy",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","Eo",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0005"]},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHORE_SMOOTHING","WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_norm_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Eo","=","1.0",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","yx",";","varying","vec3","bQ",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","b_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bT",";","varying","vec3","Ep",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bS",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Eq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Er",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bU",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Es",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","SHORE_SMOOTHING","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["vec3","EG","(","in","vec2","Et",",","in","vec3","Eu",",","in","vec3","Ev",",","in","vec3","Ew",",","out","float","Ex",")","{","Ex","=","0.0",";","vec3","Ey","=","reflect","(","-","Ev",",","Eu",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Ez","=","Et",".","xy","+","Eu",".","xz","*","REFL_BUMP","/","bV",";","Ex","=","u_reflect_factor",";","vec3","EA",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EA","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["EA","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["}","else","{","EA","=","texture2D","(","u_plane_reflection",",","Ez",")",".","rgb",";","a_","(","EA",")",";","}"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ex","=","u_mirror_factor",";","vec3","EA","=","Ew","*","textureCube","(","u_mirrormap",",","Ey",")",".","rgb",";","a_","(","EA",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ex","=","u_reflect_factor",";","vec3","EA","=","Ew","*","vec3","(","0.3",",","0.5",",","1.0",")",";","a_","(","EA",")",";"]}]}}]},{type:"textline",tokens:["vec3","EB","=","normalize","(","Ey","+","Ev",")",";","float","EC","=","1.0","-","dot","(","Ev",",","EB",")",";","float","ED","=","u_fresnel_params","[","3","]",";","float","EE","=","u_fresnel_params","[","2","]",";","float","EF","=","ED","+","(","1.0","-","ED",")","*","pow","(","EC",",","EE",")",";","Ex","=","min","(","Ex","*","EF",",","1.0",")",";","return","EA",";","}"]},{type:"include",file:"lighting_nodes.glslf"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat3","EH","=","mat3","(","bT",",","Ep",",","bS",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","EI","=","normalize","(","bS",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","EI","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","FOAM",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","EJ","=","bQ",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","EK","=","vec2","(","Eq",".","x",",","-","Eq",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","EK","=","vec2","(","bQ",".","x",",","-","bQ",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","EK","=","b_",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","EL","=","vec3","(","0.0",")",";","vec3","EM","=","texture2D","(","u_normalmap0",",","EK","*","u_normalmap0_scale","+","vec2","(","0.3",",","0.5",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","EL","+=","EM",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","EN","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["EN","+=","EM",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EM","=","texture2D","(","u_normalmap0",",","EK","*","u_normalmap1_scale","+","vec2","(","-","0.3",",","0.7",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","EL","+=","EM",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["EN","+=","EM",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EM","=","texture2D","(","u_normalmap0",",","EK","*","u_normalmap2_scale","+","vec2","(","0.0",",","1.1",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","EL","+=","EM",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["EN","+=","EM",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EM","=","texture2D","(","u_normalmap0",",","EK","*","u_normalmap3_scale","+","vec2","(","-","0.66",",","-","0.3",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","EL","+=","EM",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["EN","+=","EM",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","EO","=","EH","*","EN",";","if","(","!","bk","(","EO",",","vec3","(","0.0",")",")",")","EO","=","normalize","(","EO",")",";","vec3","EP","=","mix","(","EI",",","EO",",","0.2",")",";","EP","=","normalize","(","EP",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["EI","=","mix","(","EI",",","normalize","(","EH","*","EL",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["EI","=","mix","(","EI",",","normalize","(","EH","*","EL",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["EI","=","normalize","(","EI",")",";"]}]}}]},{type:"textline",tokens:["vec3","EQ","=","normalize","(","yx",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ER","=","bU",".","xy","/","bU",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","ES","=","bV","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","ET","=","u_diffuse_color",".","a",";","vec4","EU","=","texture2DProj","(","u_scene_depth",",","bU",")",";","float","EV","=","l","(","EU",")",";","float","EW","=","max","(","EV","-","bV",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","EX","=","ER","+","EI",".","xz","*","u_refr_bump","/","bV",";","float","EY","=","eC","(","EV",",","EX",",","ER",")",";","float","EZ","=","max","(","EY","-","bV",",","0.0",")",";","float","E_","=","u_view_max_depth","/","ABSORB","*","EZ",";","float","Fa",";","if","(","u_cam_water_depth","<","0.0",")","Fa","=","0.0",";","else","Fa","=","min","(","ET","*","E_",",","1.0",")",";","float","Fb","=","u_view_max_depth","/","ABSORB","*","EW",";","ET","=","min","(","15.0","*","ET","*","u_view_max_depth","*","EW",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","Fb","=","u_view_max_depth","/","ABSORB","*","EW",";","if","(","u_cam_water_depth",">","0.0",")","ET","=","min","(","ET","*","Fb",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["ET","*=","min","(","5.0","*","ES",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","ET","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","Fa","=","1.0","-","ET",";","vec2","EX","=","ER","+","EI",".","xz","*","u_refr_bump","/","bV",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Fc","=","texture2D","(","u_refractmap",",","EX",")",".","rgb",";","a_","(","Fc",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","Fd","=","pow","(","min","(","Er",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","vec3","Fe","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","Fd",")",";","Fd","=","pow","(","min","(","Er",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","Fe","=","mix","(","u_shore_water_col",",","Fe",",","Fd",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","Fe","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","Ff","=","max","(","1.0","-","u_view_max_depth","*","EW",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","Ff","=","1.0","-","ET",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","Fg","=","max","(","EJ","/","WAVES_HEIGHT","+","0.1",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Fh","=","normalize","(","vec3","(","Er",".","r",",","0.0",",","Er",".","g",")",")",";","vec3","Fi","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","Fh",",","0.8",")",")",";","float","Fj","=","1.25","*","max","(","dot","(","EP",",","Fi",")","-","0.2",",","0.0",")",";","Fj","+=","max","(","dot","(","EP",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",",","0.0",")",";","Ff","+=","Fj","*","(","1.0","-","Er",".","b",")",";","Fg","*=","(","1.0","-","0.95","*","pow","(","Er",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["Ff","+=","Fg",";","Ff","=","min","(","u_foam_factor","*","Ff",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec4","Fk","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","EK","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["float","Fl","=","u_specular_params","[","0","]",";","vec2","Fm","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","Fn","=","Fl","*","u_specular_color",";","vec3","Fo","=","u_environment_energy","*","ew","(","EI",")",";","vec3","Fp","=","u_ambient","*","Fo",";","vec3","Fq","=","Fp","+","u_sun_intensity",";","float","Fr",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Fs","=","EG","(","ER",",","EI",",","EQ",",","Fq",",","Fr",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","Fs","=","EG","(","vec2","(","0.0",")",",","EI",",","EQ",",","Fq",",","Fr",")",";"]}]}}]},{type:"textline",tokens:["vec3","Ft","=","u_diffuse_intensity","*","Fe",";","vec3","Fu",";","vec3","Fv",";","Bq","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Ft",",","Fn",",","bQ",",","EI",",","EQ",",","Fm",",","u_diffuse_params",",","1.0",",","0.0",",","vec4","(","0.0",")",",","Fu",",","Fv",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","Fw","=","max","(","dot","(","u_sun_direction",",","-","bS",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","EQ",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","Fw","=","clamp","(","SSS_STRENGTH","*","Fw",",","0.0",",","1.0",")",";","Fu","=","mix","(","Fu",",","u_shallow_water_col",",","Fw",")",";","Fu","=","mix","(","Fu",",","u_shore_water_col",",","Fw",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Fu","=","mix","(","Fc",",","Fu",",","Fa",")",";"]}]}}]},{type:"textline",tokens:["Fu","=","mix","(","Fu",",","Fs",",","Fr",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["float","Fx","=","mix","(","Fk",".","g",",","Fk",".","r",",","max","(","4.0","*","(","Ff","-","0.75",")",",","0.0",")",")",";","Fx","=","mix","(","Fk",".","b",",","Fx",",","max","(","2.0","*","Ff","-","1.0",",","0.0",")",")",";","Fx","=","mix","(","0.0",",","Fx",",","Ff",")",";","Fu","=","mix","(","Fu",",","Fq",",","Fx",")",";"]}]}}]},{type:"textline",tokens:["Fu","+=","Fv",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","yp","(","Fu",",","ES",",","u_cam_water_depth",")",";","}","else","{","yw","(","Fu",",","ES",",","EQ",",","1.0",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yw","(","Fu",",","ES",",","EQ",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["bb","(","Fu",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["ET","=","max","(","ET",",","Fv",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["ET","+=","Fx",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["be","(","Fu",",","ET",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","Fy","=","fwidth","(","Es",")",";","vec3","Fz","=","smoothstep","(","vec3","(","0.0",")",",","Fy","*","Eo",",","Es",")",";","float","FA","=","min","(","min","(","Fz",".","x",",","Fz",".","y",")",",","Fz",".","z",")",";","FA","=","clamp","(","FA",",","0.0",",","1.0",")",";","Fu","=","mix","(","u_wireframe_edge_color",",","Fu",",","FA",")",";","ET","=","mix","(","1.0",",","ET",",","FA",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Fu",",","ET",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Y",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Y",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"DYNAMIC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";","attribute","vec3","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH",{type:"logic_negative_expr",places:1},"NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_polyindex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","yx",";","varying","vec3","bQ",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","b_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bT",";","varying","vec3","Ep",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bS",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Eq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Er",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bU",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Es",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Ey","(","in","vec2","Eo",")","{","vec2","Et","=","0.5","+","vec2","(","(","Eo",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","Eo",".","y","+","SHORE_MAP_CENTER_Y",")","/","SHORE_MAP_SIZE_Y",")",";","vec4","Eu","=","texture2D","(","u_shore_dist_map",",","Et",")",";","const","vec2","Ev","=","vec2","(","1.0","/","255.0",",","1.0",")",";","float","Ew","=","dot","(","Eu",".","ba",",","Ev",")",";","vec2","Ex","=","normalize","(","Eu",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","Ex",",","Ew",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"SMALL_WAVES_FAC",tokens:["0.3"]},{type:"textline",tokens:["void","EP","(","inout","vec3","Ez",",","in","float","EA",",","in","vec3","EB",")","{","float","EC","=","au","(","DST_NOISE_SCALE_0","*","(","Ez",".","xz","+","DST_NOISE_FREQ_0","*","EA",")",")","*","au","(","DST_NOISE_SCALE_1","*","(","Ez",".","zx","-","DST_NOISE_FREQ_1","*","EA",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","ED","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","float","EE","=","EB",".","b",";","float","EF","=","sqrt","(","EE",")",";","float","EG","=","max","(","EE",",","DIR_MIN_SHR_FAC",")","*","sin","(","EF","/","ED","+","DIR_FREQ","*","EA",")",";","float","EH","=","max","(","au","(","DIR_NOISE_SCALE","*","(","Ez",".","xz","+","DIR_NOISE_FREQ","*","EA",")",")",",","DIR_MIN_NOISE_FAC",")",";","EG","*=","EH",";","float","EI","=","WAVES_HEIGHT","*","mix","(","EG",",","EC",",","max","(","EF",",","DST_MIN_FAC",")",")",";","vec2","EJ","=","EB",".","rg",";","float","EK","=","WAVES_HOR_FAC","*","EG","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","EE",")",",","0.0",")",";","vec2","EL","=","EK","*","EJ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","EI","=","WAVES_HEIGHT","*","EC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","EM","=","2.0","*","(","Ez",".","xz","-","0.1","*","EA",")",";","vec2","EN","=","1.3","*","(","Ez",".","zx","+","0.03","*","EA",")",";","float","EO","=","Q","(","0.5","*","EM",")",".","x","+","Q","(","0.5","*","EN",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Ez",".","xz","+=","EL",";","EO","*=","EE",";"]}]}}]},{type:"textline",tokens:["EI","+=","SMALL_WAVES_FAC","*","EO",";"]}]}}]},{type:"textline",tokens:["Ez",".","y","+=","EI",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_polyindex","==","0.0",")","Es","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","Es","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","Es","=","vec3","(","0.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","EQ","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","ER","=","abs","(","EQ",".","y",")",";","vec2","ES","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","ER",")",";","EQ",".","y","=","WATER_LEVEL",";","EQ",".","xz","+=","ES",";"]}]}},{type:"elif",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["b_","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["bh","ET","=","ut","(","EQ",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Er","=","Ey","(","ET",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","EU","=","length","(","u_wind",")",";","float","EV","=","u_time",";","EV","*=","EU",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","EW","=","ER",";","vec3","EX","=","ET",".","a","+","vec3","(","EW",",","0.0",",","0.0",")",";","vec3","EY","=","ET",".","a","+","vec3","(","0.0",",","0.0",",","EW",")",";","if","(","a_position",".","y","<","0.0",")","{","ET",".","a",".","y","=","WATER_LEVEL","-","1.0",";","EX",".","y","=","ET",".","a",".","y",";","EY",".","y","=","ET",".","a",".","y",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Eq","=","ET",".","a",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","EX","=","ET",".","a","+","vec3","(","0.05",",","0.0",",","0.0",")",";","vec3","EY","=","ET",".","a","+","vec3","(","0.0",",","0.0",",","0.05",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","EZ","=","Ey","(","EX",".","xz",")",";","vec3","E_","=","Ey","(","EY",".","xz",")",";","EP","(","EX",",","EV",",","EZ",")",";","EP","(","EY",",","EV",",","E_",")",";","EP","(","ET",".","a",",","EV",",","Er",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["EP","(","EX",",","EV",",","vec3","(","0.0",")",")",";","EP","(","EY",",","EV",",","vec3","(","0.0",")",")",";","EP","(","ET",".","a",",","EV",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vec3","Fa","=","normalize","(","EX","-","ET",".","a",")",";","vec3","Fb","=","normalize","(","EY","-","ET",".","a",")",";","bS","=","normalize","(","cross","(","Fb",",","Fa",")",")",";","float","Fc","=","dot","(","bS",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","Fd","=","clamp","(","0.8","-","Fc",",","0.0",",","1.0",")",";","bS","=","mix","(","bS",",","vec3","(","0.0",",","1.0",",","0.0",")",",","Fd",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Fb","=","a_tangent",";","bS","=","a_normal",";"]}]}}]},{type:"textline",tokens:["bT","=","Fb",";","Ep","=","cross","(","bS",",","bT",")",";"]}]}}]},{type:"textline",tokens:["bQ","=","ET",".","a",";","yx","=","u_camera_eye","-","ET",".","a",";","vec4","Fe","=","u_view_matrix","*","vec4","(","ET",".","a",",","1.0",")",";","vec4","Ff","=","u_proj_matrix","*","Fe",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["float","Fg","=","Ff",".","x",";","float","Fh","=","Ff",".","y",";","float","Fi","=","Ff",".","w",";","bU",".","x","=","(","Fg","+","Fi",")","/","2.0",";","bU",".","y","=","(","Fh","+","Fi",")","/","2.0",";","bU",".","z","=","Fi",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bV","=","-","Fe",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","Ff",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_NONE",tokens:["0"]},{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["2"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["3"]},{type:"define",name:"WM_DEBUG_SPHERES",tokens:["4"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","Es",";","const","float","Eo","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","Et","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","Et","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","Eu","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","Ev","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","Ew","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","Ex","=","vec3","(","0.0",")",";","float","Ey","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Ez","=","sign","(","Es","-","vec3","(","0.02","*","Eo",")",")",";","if","(","Ez",".","x","<","0.0","||","Ez",".","y","<","0.0","||","Ez",".","z","<","0.0",")","{","Ex","=","Et",";","Ey","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY",0,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Ez","=","sign","(","Es","-","vec3","(","0.02","*","Eo",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","Ez",".","x","<","0.0","||","Ez",".","y","<","0.0","||","Ez",".","z","<","0.0",")","Ex","=","u_wireframe_edge_color",";","else","Ex","=","Ew",";","Ey","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","Ez",".","x","<","0.0","||","Ez",".","y","<","0.0","||","Ez",".","z","<","0.0",")","Ey","=","1.0",";","else","Ey","=","0.0",";","Ex","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","Ez",".","x","<","0.0","||","Ez",".","y","<","0.0","||","Ez",".","z","<","0.0",")","Ex","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","Ex","=","Eu",";","else","Ex","=","Ev",";","Ey","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","EA","=","fwidth","(","Es",")",";","vec3","EB","=","smoothstep","(","vec3","(","0.0",")",",","EA","*","Eo",",","Es",")",";","float","EC","=","min","(","min","(","EB",".","x",",","EB",".","y",")",",","EB",".","z",")",";","EC","=","clamp","(","EC",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","Ex","=","vec3","(","mix","(","u_wireframe_edge_color",",","Ew",",","EC",")",")",";","Ey","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","Ex","=","u_wireframe_edge_color",";","Ey","=","mix","(","1.0",",","0.0",",","EC",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","Ex","=","mix","(","u_wireframe_edge_color",",","Eu",",","EC",")",";","else","Ex","=","mix","(","u_wireframe_edge_color",",","Ev",",","EC",")",";","Ey","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["bb","(","Ex",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["be","(","Ex",",","Ey",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ex",",","Ey",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","Es",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","if","(","a_polyindex","==","0.0",")","Es","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","Es","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","Es","=","vec3","(","0.0",",","0.0",",","1.0",")",";","vec3","Eo","=","a_position",";","vec3","Et","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["bh","Eu","=","ut","(","Eo",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["Eo","=","mix","(","Eo",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Ev","=","vec3","(","0.0",")",";","vec3","Ew","=","vec3","(","0.0",")",";","vD","(","Eo",",","Ev",",","Ew",",","Et",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Ex","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","Ex","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["bh","Eu","=","xp","(","Eo",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Ex",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Ey","=","(","u_model_matrix","*","vec4","(","Ex",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","Ez","=","um","(","u_camera_eye",",","Ey",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","Ez","=","ug","(","u_camera_eye",",","Ey",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","EA","=","(","u_model_matrix","*","vec4","(","Ex",",","1.0",")",")",".","xyz",";","Ez","=","Ez","*","tW","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","EA",")",";"]}]}}]},{type:"textline",tokens:["bh","Eu","=","ut","(","Eo","-","Ex",",","Ex",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Ez",")",";","Eu",".","b","=","Ey",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bh","Eu","=","ut","(","Eo",",","Ex",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["wv","(","Eu",".","a",",","Eu",".","b",",","Et",")",";"]}]}}]}]}}]},{type:"textline",tokens:["vec4","EB","=","u_view_matrix","*","vec4","(","Eu",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","EB",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","b_",";","void","main","(",")","{","vec4","Eo","=","texture2D","(","u_sampler_left",",","b_",")",";","vec4","Et","=","texture2D","(","u_sampler_right",",","b_",")",";","gl_FragColor","=","vec4","(","Eo","[","0","]",",","Et","[","1","]",",","Et","[","2","]",",","Eo","[","3","]","+","Et","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"AA_METHOD_PASS",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["2"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["3"]},{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","b_",";","vec4","Ev","(","float","Eo",",","float","Et",")","{","vec2","Eu","=","b_","+","vec2","(","Eo",",","Et",")","*","u_texel_size",";","return","texture2D","(","u_color",",","Eu",")",";","}","float","Ez","(","vec4","Ew",")","{","vec3","Ex","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","Ey","=","dot","(","Ew",".","rgb",",","Ex",")",";","return","Ey",";","}","vec4","ES","(",")","{","vec4","EA","=","Ev","(","-","1.0",",","-","1.0",")",";","vec4","EB","=","Ev","(","1.0",",","-","1.0",")",";","vec4","EC","=","Ev","(","-","1.0",",","1.0",")",";","vec4","ED","=","Ev","(","1.0",",","1.0",")",";","vec4","EE","=","Ev","(","0.0",",","0.0",")",";","float","EF","=","Ez","(","EA",")",";","float","EG","=","Ez","(","EB",")",";","float","EH","=","Ez","(","EC",")",";","float","EI","=","Ez","(","ED",")",";","float","EJ","=","Ez","(","EE",")",";","float","EK","=","min","(","EJ",",","min","(","min","(","EF",",","EG",")",",","min","(","EH",",","EI",")",")",")",";","float","EL","=","max","(","EJ",",","max","(","max","(","EF",",","EG",")",",","max","(","EH",",","EI",")",")",")",";","vec2","EM",";","EM",".","x","=","-","(","(","EF","+","EG",")","-","(","EH","+","EI",")",")",";","EM",".","y","=","(","(","EF","+","EH",")","-","(","EG","+","EI",")",")",";","float","EN","=","max","(","(","EF","+","EG","+","EH","+","EI",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","float","EO","=","1.0","/","(","min","(","abs","(","EM",".","x",")",",","abs","(","EM",".","y",")",")","+","EN",")",";","EM","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","EM","*","EO",")",")","*","u_texel_size",";","vec4","EP","=","0.5","*","(","texture2D","(","u_color",",","b_","+","EM","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","b_","+","EM","*","(","2.0","/","3.0","-","0.5",")",")",")",";","vec4","EQ","=","EP","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","b_","+","EM","*","-","0.5",")","+","texture2D","(","u_color",",","b_","+","EM","*","0.5",")",")",";","float","ER","=","Ez","(","EQ",")",";","if","(","(","ER","<","EK",")","||","(","ER",">","EL",")",")","return","EP",";","else","return","EQ",";","}"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["(","1.0","/","6.0",")"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["(","1.0","/","12.0",")"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["(","3.0","/","4.0",")"]},{type:"textline",tokens:["vec4","GD","(",")","{","vec2","ET",";","ET",".","x","=","b_",".","x",";","ET",".","y","=","b_",".","y",";","vec4","EU","=","texture2D","(","u_color",",","ET",")",";","vec4","EV","=","Ev","(","0.0",",","1.0",")",";","vec4","EW","=","Ev","(","1.0",",","0.0",")",";","vec4","EX","=","Ev","(","0.0",",","-","1.0",")",";","vec4","EY","=","Ev","(","-","1.0",",","0.0",")",";","float","EZ","=","Ez","(","EV",")",";","float","E_","=","Ez","(","EW",")",";","float","Fa","=","Ez","(","EX",")",";","float","Fb","=","Ez","(","EY",")",";","float","Fc","=","Ez","(","EU",")",";","float","Fd","=","max","(","EZ",",","Fc",")",";","float","Fe","=","min","(","EZ",",","Fc",")",";","float","Ff","=","max","(","E_",",","Fd",")",";","float","Fg","=","min","(","E_",",","Fe",")",";","float","Fh","=","max","(","Fa",",","Fb",")",";","float","Fi","=","min","(","Fa",",","Fb",")",";","float","Fj","=","max","(","Fh",",","Ff",")",";","float","Fk","=","min","(","Fi",",","Fg",")",";","float","Fl","=","Fj","*","FXAA_QUALITY_EDGE_THRESHOLD",";","float","Fm","=","Fj","-","Fk",";","float","Fn","=","max","(","FXAA_QUALITY_EDGE_THRESHOLD_MIN",",","Fl",")",";","bool","Fo","=","Fm","<","Fn",";","if","(","Fo",")","return","EU",";","vec4","Fp","=","Ev","(","-","1.0",",","-","1.0",")",";","vec4","Fq","=","Ev","(","1.0",",","1.0",")",";","vec4","Fr","=","Ev","(","1.0",",","-","1.0",")",";","vec4","Fs","=","Ev","(","-","1.0",",","1.0",")",";","float","Ft","=","Ez","(","Fp",")",";","float","Fu","=","Ez","(","Fq",")",";","float","Fv","=","Ez","(","Fr",")",";","float","Fw","=","Ez","(","Fs",")",";","float","Fx","=","Fa","+","EZ",";","float","Fy","=","Fb","+","E_",";","float","Fz","=","1.0","/","Fm",";","float","FA","=","Fx","+","Fy",";","float","FB","=","(","-","2.0","*","Fc",")","+","Fx",";","float","FC","=","(","-","2.0","*","Fc",")","+","Fy",";","float","FD","=","Fv","+","Fu",";","float","FE","=","Ft","+","Fv",";","float","FF","=","(","-","2.0","*","E_",")","+","FD",";","float","FG","=","(","-","2.0","*","Fa",")","+","FE",";","float","FH","=","Ft","+","Fw",";","float","FI","=","Fw","+","Fu",";","float","FJ","=","(","abs","(","FB",")","*","2.0",")","+","abs","(","FF",")",";","float","FK","=","(","abs","(","FC",")","*","2.0",")","+","abs","(","FG",")",";","float","FL","=","(","-","2.0","*","Fb",")","+","FH",";","float","FM","=","(","-","2.0","*","EZ",")","+","FI",";","float","FN","=","abs","(","FL",")","+","FJ",";","float","FO","=","abs","(","FM",")","+","FK",";","float","FP","=","FH","+","FD",";","float","FQ","=","u_texel_size",".","x",";","bool","FR","=","FN",">=","FO",";","float","FS","=","FA","*","2.0","+","FP",";","if","(","!","FR",")","Fa","=","Fb",";","if","(","!","FR",")","EZ","=","E_",";","if","(","FR",")","FQ","=","u_texel_size",".","y",";","float","FT","=","(","FS","*","(","1.0","/","12.0",")",")","-","Fc",";","float","FU","=","Fa","-","Fc",";","float","FV","=","EZ","-","Fc",";","float","FW","=","Fa","+","Fc",";","float","FX","=","EZ","+","Fc",";","bool","FY","=","abs","(","FU",")",">=","abs","(","FV",")",";","float","FZ","=","max","(","abs","(","FU",")",",","abs","(","FV",")",")",";","if","(","FY",")","FQ","=","-","FQ",";","float","F_","=","clamp","(","abs","(","FT",")","*","Fz",",","0.0",",","1.0",")",";","vec2","Ga",";","Ga",".","x","=","ET",".","x",";","Ga",".","y","=","ET",".","y",";","vec2","Gb",";","Gb",".","x","=","(","!","FR",")","?","0.0",":","u_texel_size",".","x",";","Gb",".","y","=","(","FR",")","?","0.0",":","u_texel_size",".","y",";","if","(","!","FR",")","Ga",".","x","+=","FQ","*","0.5",";","if","(","FR",")","Ga",".","y","+=","FQ","*","0.5",";","vec2","Gc",";","Gc",".","x","=","Ga",".","x","-","Gb",".","x",";","Gc",".","y","=","Ga",".","y","-","Gb",".","y",";","vec2","Gd",";","Gd",".","x","=","Ga",".","x","+","Gb",".","x",";","Gd",".","y","=","Ga",".","y","+","Gb",".","y",";","float","Ge","=","(","(","-","2.0",")","*","F_",")","+","3.0",";","float","Gf","=","Ez","(","texture2D","(","u_color",",","Gc",")",")",";","float","Gg","=","F_","*","F_",";","float","Gh","=","Ez","(","texture2D","(","u_color",",","Gd",")",")",";","if","(","!","FY",")","FW","=","FX",";","float","Gi","=","FZ","*","1.0","/","4.0",";","float","Gj","=","Fc","-","FW","*","0.5",";","float","Gk","=","Ge","*","Gg",";","bool","Gl","=","Gj","<","0.0",";","Gf","-=","FW","*","0.5",";","Gh","-=","FW","*","0.5",";","bool","Gm","=","abs","(","Gf",")",">=","Gi",";","bool","Gn","=","abs","(","Gh",")",">=","Gi",";","if","(","!","Gm",")","Gc",".","x","-=","Gb",".","x","*","1.5",";","if","(","!","Gm",")","Gc",".","y","-=","Gb",".","y","*","1.5",";","bool","Go","=","(","!","Gm",")","||","(","!","Gn",")",";","if","(","!","Gn",")","Gd",".","x","+=","Gb",".","x","*","1.5",";","if","(","!","Gn",")","Gd",".","y","+=","Gb",".","y","*","1.5",";","if","(","Go",")","{","if","(","!","Gm",")","Gf","=","Ez","(","texture2D","(","u_color",",","Gc",".","xy",")",")",";","if","(","!","Gn",")","Gh","=","Ez","(","texture2D","(","u_color",",","Gd",".","xy",")",")",";","if","(","!","Gm",")","Gf","=","Gf","-","FW","*","0.5",";","if","(","!","Gn",")","Gh","=","Gh","-","FW","*","0.5",";","Gm","=","abs","(","Gf",")",">=","Gi",";","Gn","=","abs","(","Gh",")",">=","Gi",";","if","(","!","Gm",")","Gc",".","x","-=","Gb",".","x","*","2.0",";","if","(","!","Gm",")","Gc",".","y","-=","Gb",".","y","*","2.0",";","Go","=","(","!","Gm",")","||","(","!","Gn",")",";","if","(","!","Gn",")","Gd",".","x","+=","Gb",".","x","*","2.0",";","if","(","!","Gn",")","Gd",".","y","+=","Gb",".","y","*","2.0",";","if","(","Go",")","{","if","(","!","Gm",")","Gf","=","Ez","(","texture2D","(","u_color",",","Gc",".","xy",")",")",";","if","(","!","Gn",")","Gh","=","Ez","(","texture2D","(","u_color",",","Gd",".","xy",")",")",";","if","(","!","Gm",")","Gf","=","Gf","-","FW","*","0.5",";","if","(","!","Gn",")","Gh","=","Gh","-","FW","*","0.5",";","Gm","=","abs","(","Gf",")",">=","Gi",";","Gn","=","abs","(","Gh",")",">=","Gi",";","if","(","!","Gm",")","Gc",".","x","-=","Gb",".","x","*","2.0",";","if","(","!","Gm",")","Gc",".","y","-=","Gb",".","y","*","2.0",";","Go","=","(","!","Gm",")","||","(","!","Gn",")",";","if","(","!","Gn",")","Gd",".","x","+=","Gb",".","x","*","2.0",";","if","(","!","Gn",")","Gd",".","y","+=","Gb",".","y","*","2.0",";","if","(","Go",")","{","if","(","!","Gm",")","Gf","=","Ez","(","texture2D","(","u_color",",","Gc",".","xy",")",")",";","if","(","!","Gn",")","Gh","=","Ez","(","texture2D","(","u_color",",","Gd",".","xy",")",")",";","if","(","!","Gm",")","Gf","=","Gf","-","FW","*","0.5",";","if","(","!","Gn",")","Gh","=","Gh","-","FW","*","0.5",";","Gm","=","abs","(","Gf",")",">=","Gi",";","Gn","=","abs","(","Gh",")",">=","Gi",";","if","(","!","Gm",")","Gc",".","x","-=","Gb",".","x","*","4.0",";","if","(","!","Gm",")","Gc",".","y","-=","Gb",".","y","*","4.0",";","Go","=","(","!","Gm",")","||","(","!","Gn",")",";","if","(","!","Gn",")","Gd",".","x","+=","Gb",".","x","*","4.0",";","if","(","!","Gn",")","Gd",".","y","+=","Gb",".","y","*","4.0",";","if","(","Go",")","{","if","(","!","Gm",")","Gf","=","Ez","(","texture2D","(","u_color",",","Gc",".","xy",")",")",";","if","(","!","Gn",")","Gh","=","Ez","(","texture2D","(","u_color",",","Gd",".","xy",")",")",";","if","(","!","Gm",")","Gf","=","Gf","-","FW","*","0.5",";","if","(","!","Gn",")","Gh","=","Gh","-","FW","*","0.5",";","Gm","=","abs","(","Gf",")",">=","Gi",";","Gn","=","abs","(","Gh",")",">=","Gi",";","if","(","!","Gm",")","Gc",".","x","-=","Gb",".","x","*","2.0",";","if","(","!","Gm",")","Gc",".","y","-=","Gb",".","y","*","2.0",";","if","(","!","Gn",")","Gd",".","x","+=","Gb",".","x","*","2.0",";","if","(","!","Gn",")","Gd",".","y","+=","Gb",".","y","*","2.0",";","}","}","}","}","float","Gp","=","ET",".","x","-","Gc",".","x",";","float","Gq","=","Gd",".","x","-","ET",".","x",";","if","(","!","FR",")","Gp","=","ET",".","y","-","Gc",".","y",";","if","(","!","FR",")","Gq","=","Gd",".","y","-","ET",".","y",";","bool","Gr","=","(","Gf","<","0.0",")","!=","Gl",";","float","Gs","=","(","Gq","+","Gp",")",";","bool","Gt","=","(","Gh","<","0.0",")","!=","Gl",";","float","Gu","=","1.0","/","Gs",";","bool","Gv","=","Gp","<","Gq",";","float","Gw","=","min","(","Gp",",","Gq",")",";","bool","Gx","=","Gv","?","Gr",":","Gt",";","float","Gy","=","Gk","*","Gk",";","float","Gz","=","(","Gw","*","(","-","Gu",")",")","+","0.5",";","float","GA","=","Gy","*","FXAA_QUALITY_SUBPIX",";","float","GB","=","Gx","?","Gz",":","0.0",";","float","GC","=","max","(","GB",",","GA",")",";","if","(","!","FR",")","ET",".","x","+=","GC","*","FQ",";","if","(","FR",")","ET",".","y","+=","GC","*","FQ",";","return","texture2D","(","u_color",",","ET",")",";","}"]},{type:"define",name:"FXAA_CONSOLE_EDGE_SHARPNESS",tokens:["8.0"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD",tokens:["0.125"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD_MIN",tokens:["0.05"]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_PASS",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","b_",")",";"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","ES","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","GD","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","0.0",",","1.0",")","*","texture2D","(","u_color",",","b_",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","b_",";","void","main","(",")","{","vec2","Eo","=","vec2","(","0.0",",","0.0",")",";","vec2","Et","=","u_texel_size",";","vec4","Eu","=","texture2D","(","u_color",",","b_",")",";","gl_FragColor","=","Eu","*","0.0875447373698",";","Eo","+=","Et",";","gl_FragColor","+=","texture2D","(","u_color",",","b_","+","Eo",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","b_","-","Eo",")","*","0.0858112354248",";","Eo","+=","Et",";","gl_FragColor","+=","texture2D","(","u_color",",","b_","+","Eo",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","b_","-","Eo",")","*","0.0808139781061",";","Eo","+=","Et",";","gl_FragColor","+=","texture2D","(","u_color",",","b_","+","Eo",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","b_","-","Eo",")","*","0.0731235112908",";","Eo","+=","Et",";","gl_FragColor","+=","texture2D","(","u_color",",","b_","+","Eo",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","b_","-","Eo",")","*","0.0635705267419",";","Eo","+=","Et",";","gl_FragColor","+=","texture2D","(","u_color",",","b_","+","Eo",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","b_","-","Eo",")","*","0.0530985673112",";","Eo","+=","Et",";","gl_FragColor","+=","texture2D","(","u_color",",","b_","+","Eo",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","b_","-","Eo",")","*","0.0426125984122",";","Eo","+=","Et",";","gl_FragColor","+=","texture2D","(","u_color",",","b_","+","Eo",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","b_","-","Eo",")","*","0.0328565115809",";","Eo","+=","Et",";","gl_FragColor","+=","texture2D","(","u_color",",","b_","+","Eo",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","b_","-","Eo",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","Eu",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","b_",";","void","main","(",")","{","vec4","Eo","=","texture2D","(","u_main",",","b_",")",";","vec4","Et","=","texture2D","(","u_bloom",",","b_",")",";","vec4","Eu","=","Eo",";","Eu","+=","Et",";","gl_FragColor","=","vec4","(","Eu",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","b_",";","void","main","(",")","{","vec4","Eo","=","texture2D","(","u_color",",","b_",")",";","vec3","Et","=","Eo",".","rgb",";","if","(","u_brightness","<","0.0",")","Et","=","Et","*","(","1.0","+","u_brightness",")",";","else","Et","=","Et","+","(","(","1.0","-","Et",")","*","u_brightness",")",";","Et","=","(","Et","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","Et","*=","u_exposure",";","vec3","Eu","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","Ev","=","dot","(","Et",",","Eu",")",";","Et","=","mix","(","vec3","(","Ev",")",",","Et",",","u_saturation",")",";","gl_FragColor","=","vec4","(","Et",",","Eo",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","b_",";","void","main","(",")","{","gl_FragColor","=","h","(","clamp","(","EA","(","u_depth",",","b_",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","b_",";","void","main","(",")","{","vec4","Eo","=","texture2D","(","u_sharp",",","b_",")",";","if","(","u_dof_dist",">","0.0",")","{","float","EB","=","EA","(","u_depth",",","b_",",","u_camera_range",")",";","EB","*=","u_view_max_depth",";","float","EC",";","if","(","EB","<","u_dof_dist",")","EC","=","(","u_dof_dist","-","EB",")","/","u_dof_front",";","else","EC","=","(","EB","-","u_dof_dist",")","/","u_dof_rear",";","EC","=","clamp","(","EC",",","0.0",",","1.0",")",";","vec4","ED","=","texture2D","(","u_blurred",",","b_",")",";","gl_FragColor","=","mix","(","Eo",",","ED",",","EC",")",";","}","else","gl_FragColor","=","Eo",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_src_color",";","uniform","sampler2D","u_glow_mask_small",";","uniform","sampler2D","u_glow_mask_large",";","uniform","float","u_glow_mask_small_coeff",";","uniform","float","u_glow_mask_large_coeff",";","varying","vec2","b_",";","void","main","(",")","{","vec4","Eo","=","texture2D","(","u_src_color",",","b_",")",";","vec4","EB","=","texture2D","(","u_glow_mask_small",",","b_",")",";","vec4","EC","=","texture2D","(","u_glow_mask_large",",","b_",")",";","gl_FragColor","=","Eo",";","if","(","EC",".","a","!=","0.0",")","{","float","ED","=","u_glow_mask_large_coeff","*","EC",".","a",";","ED","=","clamp","(","ED",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","EC",".","rgb","/","EC",".","a",",","ED",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","ED",")",";","}","if","(","EB",".","a","!=","0.0",")","{","float","EE","=","u_glow_mask_small_coeff","*","EB",".","a",";","EE","=","clamp","(","EE",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","EB",".","rgb","/","EB",".","a",",","EE",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","EE",")",";","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","EB",";","varying","vec2","EC",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","b_",";","varying","vec4","ED",";","void","main","(",")","{","vec2","EE","=","(","ED",".","xy","-","b_",")",";","float","EF","=","length","(","EE",")",";","vec2","EG","=","u_radial_blur_step","*","EE","/","EF",";","float","EH","=","EF","/","u_radial_blur_step",";","EG","*=","min","(","EH",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","EH","=","max","(","EH",",","STEPS_PER_PASS",")",";","vec2","EI","=","b_",";","float","EJ","=","0.0",";","for","(","float","EK","=","0.0",";","EK","<","STEPS_PER_PASS",";","EK","+=","1.0",")","{","if","(","EK","<=","EH",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["float","EL","=","EA","(","u_input",",","EI",",","u_camera_range",")",";","EJ","+=","max","(","(","1.0","-","pow","(","EF",",","0.3",")",")","*","step","(","0.9",",","EL",")",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","EM","=","texture2D","(","u_input",",","EI",")",";","EJ","+=","l","(","EM",")",";"]}]}}]},{type:"textline",tokens:["}","EI","+=","EG",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","EN","=","b_","+","EC",";","float","EO","=","Q","(","vec2","(","2.5","*","(","EN",".","x",")",",","2.5","*","(","EN",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","Q","(","vec2","(","5.0","*","(","EN",".","x",")","-","0.66","*","u_time",",","5.0","*","(","EN",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","au","(","vec2","(","7.5","*","(","EN",".","x",")","+","0.33","*","u_time",",","7.5","*","(","EN",".","y",")","-","0.33","*","u_time",")",")",";","EO","*=","clamp","(","1.2","-","sqrt","(","0.2","*","EF",")",",","0.0",",","1.0",")","*","EB",";","EJ","=","max","(","EO",",","EJ",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","h","(","EJ","/","STEPS_PER_PASS",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","float","u_cam_water_depth",";","varying","float","EB",";","varying","vec2","EC",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","b_",";","varying","vec4","ED",";","void","main","(",")","{","b_","=","a_bb_vertex","+","0.5",";","vec3","Eo","=","normalize","(","u_sun_direction",")",";","ED","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","Eo",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","EB","=","1.0",";","vec3","EE","=","vec3","(","0.0",",","1.0",",","0.0",")",";","vec3","EF","=","bn","(","u_camera_quat",",","EE",")",";","EF","=","normalize","(","EF",")",";","float","EG","=","dot","(","EF",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","EH","=","atan","(","EF",".","x",",","EF",".","z",")",";","EC","=","vec2","(","-","EH",",","acos","(","EG",")",")",";","}","else","{","EB","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["ED",".","xy","=","0.5","*","(","ED",".","xy","/","ED",".","w","+","1.0",")",";","ED","+=","99999.0","*","step","(","ED",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","uniform","vec3","u_sun_intensity",";","varying","vec2","b_",";","void","main","(",")","{","vec4","Eo","=","texture2D","(","u_main",",","b_",")",";","vec3","EE","=","clamp","(","u_sun_intensity",",","0.4",",","0.8",")",";","a_","(","Eo",".","rgb",")",";","float","EF","=","l","(","texture2D","(","u_god_rays",",","b_",")",")",";","vec3","EG","=","Eo",".","rgb","+","u_god_rays_intensity","*","vec3","(","EF",")","*","EE",";","bb","(","EG",")",";","gl_FragColor",".","rgb","=","EG",";","gl_FragColor",".","a","=","Eo",".","a",";","}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","b_",";","void","main","(",")","{","vec4","Eo","=","texture2D","(","u_input",",","b_",")",";","float","EE","=","dot","(","Eo",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","EE",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","Eo",";","float","EE","=","0.0",";","for","(","float","EF","=","0.025",";","EF","<","1.0",";","EF","+=","0.05",")","for","(","float","EG","=","0.025",";","EG","<","1.0",";","EG","+=","0.05",")","{","Eo","=","max","(","texture2D","(","u_input",",","vec2","(","EF",",","EG",")",")",".","r",",","0.01",")",";","EE","+=","log","(","Eo",")",";","}","float","EH","=","exp","(","EE","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","EH",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","b_",";","varying","float","EE",";","void","main","(",")","{","float","EF","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","float","EG","=","texture2D","(","u_luminance",",","b_",")",".","r",";","vec4","EH","=","texture2D","(","u_main",",","b_",")",";","float","EI","=","EG","/","EF",";","float","EJ","=","u_bloom_edge_lum",";","gl_FragColor","=","EH","*","max","(","EI","-","EJ",",","0.0",")","*","EE",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","b_",";","varying","float","EE",";","const","vec3","Eo","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","EM","(","in","vec4","EF",",","in","vec3","EG",",","out","vec3","EH",")","{","float","EI","=","EF",".","w","*","EG",".","x","+","EF",".","y","*","EG",".","z","-","EF",".","z","*","EG",".","y",";","float","EJ","=","EF",".","w","*","EG",".","y","+","EF",".","z","*","EG",".","x","-","EF",".","x","*","EG",".","z",";","float","EK","=","EF",".","w","*","EG",".","z","+","EF",".","x","*","EG",".","y","-","EF",".","y","*","EG",".","x",";","float","EL","=","-","EF",".","x","*","EG",".","x","-","EF",".","y","*","EG",".","y","-","EF",".","z","*","EG",".","z",";","EH",".","x","=","EI","*","EF",".","w","-","EL","*","EF",".","x","-","EJ","*","EF",".","z","+","EK","*","EF",".","y",";","EH",".","y","=","EJ","*","EF",".","w","-","EL","*","EF",".","y","-","EK","*","EF",".","x","+","EI","*","EF",".","z",";","EH",".","z","=","EK","*","EF",".","w","-","EL","*","EF",".","z","-","EI","*","EF",".","y","+","EJ","*","EF",".","x",";","}","void","main","(",")","{","b_","=","2.0","*","a_position",";","vec3","EN",";","EM","(","u_camera_quat",",","Eo",",","EN",")",";","EE","=","dot","(","-","EN",",","u_sun_direction",")","*","u_bloom_key",";","EE","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","uniform","float","u_motion_blur_decay_threshold",";","varying","vec2","b_",";","float","Eo","=","0.0042",";","void","main","(",")","{","vec4","EF","=","texture2D","(","u_mb_tex_curr",",","b_",")",";","vec4","EG","=","texture2D","(","u_mb_tex_accum",",","b_",")",";","if","(","length","(","EF","-","EG",")",">","u_motion_blur_decay_threshold",")","{","vec4","EH","=","(","1.0","-","u_motion_blur_exp",")","*","EF","+","u_motion_blur_exp","*","EG",";","vec4","EI","=","EH","-","EG",";","vec4","EJ","=","EF","-","EG",";","vec4","EK","=","min","(","max","(","abs","(","EI",")",",","vec4","(","Eo",")",")",",","abs","(","EJ",")",")","*","sign","(","EI",")",";","gl_FragColor","=","EG","+","EK",";","}","else","{","gl_FragColor","=","EF",";","}","}"]}]},exports["postprocessing/outline.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_outline_src",";","uniform","sampler2D","u_outline_mask",";","uniform","sampler2D","u_outline_mask_blurred",";","uniform","vec3","u_outline_color",";","uniform","float","u_draw_outline",";","varying","vec2","b_",";","void","main","(",")","{","vec4","Eo","=","texture2D","(","u_outline_src",",","b_",")",";","gl_FragColor","=","Eo",";","if","(","u_draw_outline","!=","0.0",")","{","vec4","EF","=","texture2D","(","u_outline_mask",",","b_",")",";","vec4","EG","=","texture2D","(","u_outline_mask_blurred",",","b_",")",";","float","EH","=","EG",".","a","-","EF",".","a",";","if","(","EH","!=","0.0",")","{","float","EI","=","smoothstep","(","0.0",",","1.0",",","EG",".","a",")",";","if","(","EF",".","a","==","0.0",")","{","vec3","EJ","=","u_outline_color",";","bb","(","EJ",")",";","vec4","EK","=","vec4","(","clamp","(","EJ",",","0.0",",","1.0",")",",","1.0",")",";","gl_FragColor","=","mix","(","Eo",",","EK",",","EI",")",";","}","}","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","b_",";","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","POST_EFFECT_NONE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","b_",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_GRAYSCALE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Eo","=","texture2D","(","u_color",",","b_",")",";","gl_FragColor",".","rgb","=","vec3","(","(","Eo",".","r","+","Eo",".","g","+","Eo",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","EF","=","vec2","(","0.0",",","0.0",")",";","vec2","EG","=","u_texel_size",";","vec4","EH",";","EH","=","texture2D","(","u_color",",","b_",")",";","gl_FragColor","=","EH","*","0.2270270270",";","EF","+=","EG",";","EH","=","texture2D","(","u_color",",","b_","+","EF",")",";","gl_FragColor","+=","EH","*","0.1945945946",";","EH","=","texture2D","(","u_color",",","b_","-","EF",")",";","gl_FragColor","+=","EH","*","0.1945945946",";","EF","+=","EG",";","EH","=","texture2D","(","u_color",",","b_","+","EF",")",";","gl_FragColor","+=","EH","*","0.1216216216",";","EH","=","texture2D","(","u_color",",","b_","-","EF",")",";","gl_FragColor","+=","EH","*","0.1216216216",";","EF","+=","EG",";","EH","=","texture2D","(","u_color",",","b_","+","EF",")",";","gl_FragColor","+=","EH","*","0.0540540541",";","EH","=","texture2D","(","u_color",",","b_","-","EF",")",";","gl_FragColor","+=","EH","*","0.0540540541",";","EF","+=","EG",";","EH","=","texture2D","(","u_color",",","b_","+","EF",")",";","gl_FragColor","+=","EH","*","0.0162162162",";","EH","=","texture2D","(","u_color",",","b_","-","EF",")",";","gl_FragColor","+=","EH","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_GLOW_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_GLOW_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","EF","=","vec2","(","0.0",",","0.0",")",";","vec2","EG","=","u_texel_size",";","vec4","EH",";","EH","=","texture2D","(","u_color",",","b_",")",";","gl_FragColor","=","EH","*","(","1.0","-","step","(","0.0",",","-","EH",".","a",")",")","*","0.152507",";","EF","+=","EG",";","EH","=","texture2D","(","u_color",",","b_","+","EF",")",";","gl_FragColor","+=","EH","*","(","1.0","-","step","(","0.0",",","-","EH",".","a",")",")","*","0.141763",";","EH","=","texture2D","(","u_color",",","b_","-","EF",")",";","gl_FragColor","+=","EH","*","(","1.0","-","step","(","0.0",",","-","EH",".","a",")",")","*","0.141763",";","EF","+=","EG",";","EH","=","texture2D","(","u_color",",","b_","+","EF",")",";","gl_FragColor","+=","EH","*","(","1.0","-","step","(","0.0",",","-","EH",".","a",")",")","*","0.113861",";","EH","=","texture2D","(","u_color",",","b_","-","EF",")",";","gl_FragColor","+=","EH","*","(","1.0","-","step","(","0.0",",","-","EH",".","a",")",")","*","0.113861",";","EF","+=","EG",";","EH","=","texture2D","(","u_color",",","b_","+","EF",")",";","gl_FragColor","+=","EH","*","(","1.0","-","step","(","0.0",",","-","EH",".","a",")",")","*","0.079019",";","EH","=","texture2D","(","u_color",",","b_","-","EF",")",";","gl_FragColor","+=","EH","*","(","1.0","-","step","(","0.0",",","-","EH",".","a",")",")","*","0.079019",";","EF","+=","EG",";","EH","=","texture2D","(","u_color",",","b_","+","EF",")",";","gl_FragColor","+=","EH","*","(","1.0","-","step","(","0.0",",","-","EH",".","a",")",")","*","0.047383",";","EH","=","texture2D","(","u_color",",","b_","-","EF",")",";","gl_FragColor","+=","EH","*","(","1.0","-","step","(","0.0",",","-","EH",".","a",")",")","*","0.047383",";","EF","+=","EG",";","EH","=","texture2D","(","u_color",",","b_","+","EF",")",";","gl_FragColor","+=","EH","*","(","1.0","-","step","(","0.0",",","-","EH",".","a",")",")","*","0.024549",";","EH","=","texture2D","(","u_color",",","b_","-","EF",")",";","gl_FragColor","+=","EH","*","(","1.0","-","step","(","0.0",",","-","EH",".","a",")",")","*","0.024549",";","EF","+=","EG",";","EH","=","texture2D","(","u_color",",","b_","+","EF",")",";","gl_FragColor","+=","EH","*","(","1.0","-","step","(","0.0",",","-","EH",".","a",")",")","*","0.01099",";","EH","=","texture2D","(","u_color",",","b_","-","EF",")",";","gl_FragColor","+=","EH","*","(","1.0","-","step","(","0.0",",","-","EH",".","a",")",")","*","0.01099",";","EF","+=","EG",";","EH","=","texture2D","(","u_color",",","b_","+","EF",")",";","gl_FragColor","+=","EH","*","(","1.0","-","step","(","0.0",",","-","EH",".","a",")",")","*","0.00425",";","EH","=","texture2D","(","u_color",",","b_","-","EF",")",";","gl_FragColor","+=","EH","*","(","1.0","-","step","(","0.0",",","-","EH",".","a",")",")","*","0.00425",";","EF","+=","EG",";","EH","=","texture2D","(","u_color",",","b_","+","EF",")",";","gl_FragColor","+=","EH","*","(","1.0","-","step","(","0.0",",","-","EH",".","a",")",")","*","0.00142",";","EH","=","texture2D","(","u_color",",","b_","-","EF",")",";","gl_FragColor","+=","EH","*","(","1.0","-","step","(","0.0",",","-","EH",".","a",")",")","*","0.00142",";","gl_FragColor","=","clamp","(","gl_FragColor",",","0.0",",","1.0",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_EXTEND",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_EXTEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","EG","=","u_texel_size",";","vec4","EH","=","texture2D","(","u_color",",","b_",")",";","gl_FragColor","=","EH",";","if","(","EH",".","a","==","0.0",")","{","EH","=","texture2D","(","u_color",",","b_","+","EG",")",";","if","(","EH",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","EH",".","a",")",";","else","{","EH","=","texture2D","(","u_color",",","b_","-","EG",")",";","if","(","EH",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","EH",".","a",")",";","}","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","varying","vec2","b_",";","void","main","(",")","{","b_","=","2.0","*","a_position",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2},"SMAA_PREDICATION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","b_",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","EF",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","EG",";","varying","vec4","EH",";","varying","vec4","EI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","EJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","EP","(","vec2","EK",",","sampler2D","EL",")","{","float","EM","=","texture2D","(","EL",",","EK",")",".","r",";","float","EN","=","texture2D","(","EL",",","EG",".","xy",")",".","r",";","float","EO","=","texture2D","(","EL",",","EG",".","zw",")",".","r",";","return","vec3","(","EM",",","EN",",","EO",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","EV","(","vec2","EQ",",","sampler2D","ER",")","{","vec3","ES","=","EP","(","EQ",",","ER",")",";","vec2","ET","=","abs","(","ES",".","xx","-","ES",".","yz",")",";","vec2","EU","=","step","(","SMAA_PREDICATION_THRESHOLD",",","ET",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","EU",")",";","}"]}]}}]},{type:"textline",tokens:["void","EZ","(","bvec2","EW",",","inout","vec2","EX",",","vec2","EY",")","{","if","(","EW",".","x",")","EX",".","x","=","EY",".","x",";","if","(","EW",".","y",")","EX",".","y","=","EY",".","y",";","}","void","EZ","(","bvec4","E_",",","inout","vec4","Fa",",","vec4","Fb",")","{","EZ","(","E_",".","xy",",","Fa",".","xy",",","Fb",".","xy",")",";","EZ","(","E_",".","zw",",","Fa",".","zw",",","Fb",".","zw",")",";","}","vec2","Fd","(","vec2","Fc",")","{","return","sign","(","Fc",")","*","floor","(","abs","(","Fc",")","+",".5",")",";","}","vec4","Fd","(","vec4","Fe",")","{","return","sign","(","Fe",")","*","floor","(","abs","(","Fe",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Fv","(","vec2","Ff",",","sampler2D","Fg"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","Fh"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Fi","=","EV","(","Ff",",","Fh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","Fi","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["vec3","Fj","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","float","Fk","=","dot","(","texture2D","(","Fg",",","Ff",")",".","rgb",",","Fj",")",";","float","Fl","=","dot","(","texture2D","(","Fg",",","EG",".","xy",")",".","rgb",",","Fj",")",";","float","Fm","=","dot","(","texture2D","(","Fg",",","EG",".","zw",")",".","rgb",",","Fj",")",";","vec4","Fn",";","Fn",".","xy","=","abs","(","Fk","-","vec2","(","Fl",",","Fm",")",")",";","vec2","Fo","=","step","(","Fi",",","Fn",".","xy",")",";","if","(","dot","(","Fo",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","float","Fp","=","dot","(","texture2D","(","Fg",",","EH",".","xy",")",".","rgb",",","Fj",")",";","float","Fq","=","dot","(","texture2D","(","Fg",",","EH",".","zw",")",".","rgb",",","Fj",")",";","Fn",".","zw","=","abs","(","Fk","-","vec2","(","Fp",",","Fq",")",")",";","vec2","Fr","=","max","(","Fn",".","xy",",","Fn",".","zw",")",";","float","Fs","=","dot","(","texture2D","(","Fg",",","EI",".","xy",")",".","rgb",",","Fj",")",";","float","Ft","=","dot","(","texture2D","(","Fg",",","EI",".","zw",")",".","rgb",",","Fj",")",";","Fn",".","zw","=","abs","(","vec2","(","Fl",",","Fm",")","-","vec2","(","Fs",",","Ft",")",")",";","Fr","=","max","(","Fr",".","xy",",","Fn",".","zw",")",";","float","Fu","=","max","(","Fr",".","x",",","Fr",".","y",")",";","Fo",".","xy","*=","step","(","Fu",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","Fn",".","xy",")",";","return","Fo",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Fx","(","vec2","Fw",")","{","Fw",".","r","=","Fw",".","r","*","abs","(","5.0","*","Fw",".","r","-","5.0","*","0.75",")",";","return","Fd","(","Fw",")",";","}","vec4","Fx","(","vec4","Fy",")","{","Fy",".","rb","=","Fy",".","rb","*","abs","(","5.0","*","Fy",".","rb","-","5.0","*","0.75",")",";","return","Fd","(","Fy",")",";","}","vec2","FG","(","sampler2D","Fz",",","vec2","FA",",","vec2","FB",",","out","vec2","FC",")","{","vec4","FD","=","vec4","(","FA",",","-","1.0",",","1.0",")",";","vec3","FE","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","FF","=","0",";","FF","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","FF","++",")","{","if","(","FD",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","FD",".","w",">","0.9",")","{","FD",".","xyz","+=","FE","*","vec3","(","FB",",","1.0",")",";","FC","=","texture2D","(","Fz",",","FD",".","xy",",","0.0",")",".","rg",";","FD",".","w","=","dot","(","FC",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","FD",".","zw",";","}","vec2","FO","(","sampler2D","FH",",","vec2","FI",",","vec2","FJ",",","out","vec2","FK",")","{","vec4","FL","=","vec4","(","FI",",","-","1.0",",","1.0",")",";","FL",".","x","+=","0.25","*","u_texel_size",".","x",";","vec3","FM","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","FN","=","0",";","FN","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","FN","++",")","{","if","(","FL",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","FL",".","w",">","0.9",")","{","FL",".","xyz","=","FM","*","vec3","(","FJ",",","1.0",")","+","FL",".","xyz",";","FK","=","texture2D","(","FH",",","FL",".","xy",",","0.0",")",".","rg",";","FK","=","Fx","(","FK",")",";","FL",".","w","=","dot","(","FK",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","FL",".","zw",";","}","vec2","FU","(","sampler2D","FP",",","vec2","FQ",",","vec2","FR",",","float","FS",")","{","vec2","FT","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","FR","+","FQ",";","FT","=","SMAA_AREATEX_PIXEL_SIZE","*","FT","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","FT",".","x","+=","0.5",";","FT",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","FS",";","return","texture2D","(","FP",",","FT",",","0.0",")",".","rg",";","}","vec2","Gi","(","sampler2D","FV",",","sampler2D","FW",",","vec2","FX",",","vec2","FY",",","vec4","FZ",")","{","vec2","F_","=","vec2","(","0.0",",","0.0",")",";","vec4","Ga",";","vec2","Gb",";","if","(","FY",".","r",">","0.0",")","{","Ga",".","xz","=","FG","(","FV",",","FX",",","vec2","(","-","1.0",",","1.0",")",",","Gb",")",";","Ga",".","x","+=","float","(","Gb",".","y",">","0.9",")",";","}","else","Ga",".","xz","=","vec2","(","0.0",",","0.0",")",";","Ga",".","yw","=","FG","(","FV",",","FX",",","vec2","(","1.0",",","-","1.0",")",",","Gb",")",";","if","(","Ga",".","x","+","Ga",".","y",">","2.0",")","{","vec4","Gc","=","vec4","(","-","Ga",".","x","+","0.25",",","Ga",".","x",",","Ga",".","y",",","-","Ga",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","FX",".","xyxy",";","vec4","Gd",";","Gd",".","xy","=","texture2D","(","FV",",","Gc",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","Gd",".","zw","=","texture2D","(","FV",",","Gc",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","Gd",".","yxwz","=","Fx","(","Gd",".","xyzw",")",";","vec2","Ge","=","vec2","(","2.0",",","2.0",")","*","Gd",".","xz","+","Gd",".","yw",";","EZ","(","bvec2","(","step","(","0.9",",","Ga",".","zw",")",")",",","Ge",",","vec2","(","0.0",",","0.0",")",")",";","F_","+=","FU","(","FW",",","Ga",".","xy",",","Ge",",","FZ",".","z",")",";","}","Ga",".","xz","=","FO","(","FV",",","FX",",","vec2","(","-","1",",","-","1",")",",","Gb",")",";","if","(","texture2D","(","FV",",","FX","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","Ga",".","yw","=","FO","(","FV",",","FX",",","vec2","(","1",",","1",")",",","Gb",")",";","Ga",".","y","+=","float","(","Gb",".","y",">","0.9",")",";","}","else","Ga",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","Ga",".","x","+","Ga",".","y",">","2.0",")","{","vec4","Gf","=","vec4","(","-","Ga",".","x",",","-","Ga",".","x",",","Ga",".","y",",","Ga",".","y",")","*","u_texel_size",".","xyxy","+","FX",".","xyxy",";","vec4","Gg",";","Gg",".","x","=","texture2D","(","FV",",","Gf",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","Gg",".","y","=","texture2D","(","FV",",","Gf",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","Gg",".","zw","=","texture2D","(","FV",",","Gf",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","vec2","Gh","=","vec2","(","2.0",",","2.0",")","*","Gg",".","xz","+","Gg",".","yw",";","EZ","(","bvec2","(","step","(","0.9",",","Ga",".","zw",")",")",",","Gh",",","vec2","(","0",",","0",")",")",";","F_","+=","FU","(","FW",",","Ga",".","xy",",","Gh",",","FZ",".","w",")",".","gr",";","}","return","F_",";","}"]}]}}]},{type:"textline",tokens:["float","Go","(","sampler2D","Gj",",","vec2","Gk",",","float","Gl",")","{","vec2","Gm","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","vec2","Gn","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","Gl",",","1.0",")",";","Gm","+=","vec2","(","-","1.0",",","1.0",")",";","Gn","+=","vec2","(","0.5",",","-","0.5",")",";","Gm","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","Gn","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","Gj",",","Gm","*","Gk","+","Gn",",","0.0",")",".","r",";","}","float","Gw","(","sampler2D","Gp",",","sampler2D","Gq",",","vec2","Gr",",","float","Gs",")","{","vec2","Gt","=","vec2","(","0.0",",","1.0",")",";","for","(","int","Gu","=","0",";","Gu","<","SMAA_MAX_SEARCH_STEPS",";","Gu","++",")","{","if","(","Gr",".","x",">","Gs","&&","Gt",".","g",">","0.8281","&&","Gt",".","r","==","0.0",")","{","Gt","=","texture2D","(","Gp",",","Gr",",","0.0",")",".","rg",";","Gr","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","Gr",";","}","}","float","Gv","=","-","(","255.0","/","127.0",")","*","Go","(","Gq",",","Gt",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","Gv","+","Gr",".","x",";","}","float","GE","(","sampler2D","Gx",",","sampler2D","Gy",",","vec2","Gz",",","float","GA",")","{","vec2","GB","=","vec2","(","0.0",",","1.0",")",";","for","(","int","GC","=","0",";","GC","<","SMAA_MAX_SEARCH_STEPS",";","GC","++",")","{","if","(","Gz",".","x","<","GA","&&","GB",".","g",">","0.8281","&&","GB",".","r","==","0.0",")","{","GB","=","texture2D","(","Gx",",","Gz",",","0.0",")",".","rg",";","Gz","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","Gz",";","}","}","float","GD","=","-","(","255.0","/","127.0",")","*","Go","(","Gy",",","GB",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","GD","+","Gz",".","x",";","}","float","GM","(","sampler2D","GF",",","sampler2D","GG",",","vec2","GH",",","float","GI",")","{","vec2","GJ","=","vec2","(","1.0",",","0.0",")",";","for","(","int","GK","=","0",";","GK","<","SMAA_MAX_SEARCH_STEPS",";","GK","++",")","{","if","(","GH",".","y",">","GI","&&","GJ",".","r",">","0.8281","&&","GJ",".","g","==","0.0",")","{","GJ","=","texture2D","(","GF",",","GH",",","0.0",")",".","rg",";","GH","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","GH",";","}","}","float","GL","=","-","(","255.0","/","127.0",")","*","Go","(","GG",",","GJ",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","GL","+","GH",".","y",";","}","float","GU","(","sampler2D","GN",",","sampler2D","GO",",","vec2","GP",",","float","GQ",")","{","vec2","GR","=","vec2","(","1.0",",","0.0",")",";","for","(","int","GS","=","0",";","GS","<","SMAA_MAX_SEARCH_STEPS",";","GS","++",")","{","if","(","GP",".","y","<","GQ","&&","GR",".","r",">","0.8281","&&","GR",".","g","==","0.0",")","{","GR","=","texture2D","(","GN",",","GP",",","0.0",")",".","rg",";","GP","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","GP",";","}","}","float","GT","=","-","(","255.0","/","127.0",")","*","Go","(","GO",",","GR",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","GT","+","GP",".","y",";","}","vec2","Ha","(","sampler2D","GV",",","vec2","GW",",","float","GX",",","float","GY",",","float","GZ",")","{","vec2","G_","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","Fd","(","4.0","*","vec2","(","GX",",","GY",")",")","+","GW",";","G_","=","SMAA_AREATEX_PIXEL_SIZE","*","G_","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","G_",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","GZ","+","G_",".","y",";","return","texture2D","(","GV",",","G_",",","0.0",")",".","rg",";","}","void","Hi","(","sampler2D","Hb",",","inout","vec2","Hc",",","vec4","Hd",",","vec2","He",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Hf","=","step","(","He",".","xy",",","He",".","yx",")",";","vec2","Hg","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","Hf",";","Hg","/=","Hf",".","x","+","Hf",".","y",";","vec2","Hh","=","vec2","(","1.0",",","1.0",")",";","Hh",".","x","-=","Hg",".","x","*","texture2D","(","Hb",",","Hd",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","Hh",".","x","-=","Hg",".","y","*","texture2D","(","Hb",",","Hd",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","Hh",".","y","-=","Hg",".","x","*","texture2D","(","Hb",",","Hd",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","Hh",".","y","-=","Hg",".","y","*","texture2D","(","Hb",",","Hd",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","Hc","*=","clamp","(","Hh",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","Hq","(","sampler2D","Hj",",","inout","vec2","Hk",",","vec4","Hl",",","vec2","Hm",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Hn","=","step","(","Hm",".","xy",",","Hm",".","yx",")",";","vec2","Ho","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","Hn",";","Ho","/=","Hn",".","x","+","Hn",".","y",";","vec2","Hp","=","vec2","(","1.0",",","1.0",")",";","Hp",".","x","-=","Ho",".","x","*","texture2D","(","Hj",",","Hl",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","Hp",".","x","-=","Ho",".","y","*","texture2D","(","Hj",",","Hl",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","Hp",".","y","-=","Ho",".","x","*","texture2D","(","Hj",",","Hl",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","Hp",".","y","-=","Ho",".","y","*","texture2D","(","Hj",",","Hl",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","Hk","*=","clamp","(","Hp",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","HJ","(","vec2","Hr",",","vec2","Hs",",","sampler2D","Ht",",","sampler2D","Hu",",","sampler2D","Hv",",","vec4","Hw",")","{","vec4","Hx","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","vec2","Hy","=","texture2D","(","Ht",",","Hr",")",".","rg",";","if","(","Hy",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Hx",".","rg","=","Gi","(","Ht",",","Hu",",","Hr",",","Hy",",","Hw",")",";","if","(","Hx",".","r","==","-","Hx",".","g",")","{"]}]}}]},{type:"textline",tokens:["vec2","Hz",";","vec3","HA",";","HA",".","x","=","Gw","(","Ht",",","Hv",",","EG",".","xy",",","EI",".","x",")",";","HA",".","y","=","EH",".","y",";","Hz",".","x","=","HA",".","x",";","float","HB","=","texture2D","(","Ht",",","HA",".","xy",",","0.0",")",".","r",";","HA",".","z","=","GE","(","Ht",",","Hv",",","EG",".","zw",",","EI",".","y",")",";","Hz",".","y","=","HA",".","z",";","Hz","=","abs","(","Fd","(","Hz","/","u_texel_size",".","xx","-","Hs",".","xx",")",")",";","vec2","HC","=","sqrt","(","Hz",")",";","float","HD","=","texture2D","(","Ht",",","HA",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","Hx",".","rg","=","Ha","(","Hu",",","HC",",","HB",",","HD",",","Hw",".","y",")",";","HA",".","y","=","Hr",".","y",";","Hi","(","Ht",",","Hx",".","rg",",","HA",".","xyzy",",","Hz",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["}","else","Hy",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","Hy",".","r",">","0.0",")","{","vec2","HE",";","vec3","HF",";","HF",".","y","=","GM","(","Ht",",","Hv",",","EH",".","xy",",","EI",".","z",")",";","HF",".","x","=","EG",".","x",";","HE",".","x","=","HF",".","y",";","float","HG","=","texture2D","(","Ht",",","HF",".","xy",",","0.0",")",".","g",";","HF",".","z","=","GU","(","Ht",",","Hv",",","EH",".","zw",",","EI",".","w",")",";","HE",".","y","=","HF",".","z",";","HE","=","abs","(","Fd","(","HE","/","u_texel_size",".","yy","-","Hs",".","yy",")",")",";","vec2","HH","=","sqrt","(","HE",")",";","float","HI","=","texture2D","(","Ht",",","HF",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","Hx",".","ba","=","Ha","(","Hu",",","HH",",","HG",",","HI",",","Hw",".","x",")",";","HF",".","x","=","Hr",".","x",";","Hq","(","Ht",",","Hx",".","ba",",","HF",".","xyxz",",","HE",")",";","}","return","Hx",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","H_","(","vec2","HK",",","sampler2D","HL",",","sampler2D","HM"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","HN"]}]}}]},{type:"textline",tokens:[")","{","vec4","HO",";","HO",".","x","=","texture2D","(","HM",",","EF",".","xy",")",".","a",";","HO",".","y","=","texture2D","(","HM",",","EF",".","zw",")",".","g",";","HO",".","wz","=","texture2D","(","HM",",","HK",")",".","xz",";","if","(","dot","(","HO",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","vec4","HP","=","texture2D","(","HL",",","HK",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","HQ","=","texture2D","(","HN",",","b_",")",";","vec2","HR","=","2.0","*","t","(","HQ",")","-","1.0",";","HP",".","a","=","sqrt","(","2.0","*","length","(","HR",")",")",";"]}]}}]},{type:"textline",tokens:["return","HP",";","}","else","{","bool","HS","=","max","(","HO",".","x",",","HO",".","z",")",">","max","(","HO",".","y",",","HO",".","w",")",";","vec4","HT","=","vec4","(","0.0",",","HO",".","y",",","0.0",",","HO",".","w",")",";","vec2","HU","=","HO",".","yw",";","EZ","(","bvec4","(","HS",",","HS",",","HS",",","HS",")",",","HT",",","vec4","(","HO",".","x",",","0.0",",","HO",".","z",",","0.0",")",")",";","EZ","(","bvec2","(","HS",",","HS",")",",","HU",",","HO",".","xz",")",";","HU","/=","dot","(","HU",",","vec2","(","1.0",",","1.0",")",")",";","vec4","HV","=","HT","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","HK",".","xyxy",";","vec4","HW","=","HU",".","x","*","texture2D","(","HL",",","HV",".","xy",",","0.0",")",";","HW","+=","HU",".","y","*","texture2D","(","HL",",","HV",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","HX","=","texture2D","(","HN",",","HV",".","xy",")",";","vec2","HY","=","2.0","*","t","(","HX",")","-","1.0",";","vec2","HZ","=","HU",".","x","*","HY",";","HX","=","texture2D","(","HN",",","HV",".","zw",")",";","HY","=","2.0","*","t","(","HX",")","-","1.0",";","HZ","+=","HU",".","y","*","HY",";","HW",".","a","=","sqrt","(","2.0","*","length","(","HZ",")",")",";"]}]}}]},{type:"textline",tokens:["return","HW",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Il","(","vec2","Ia",",","sampler2D","Ib",",","sampler2D","Ic"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","Id"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Ie","=","texture2D","(","Id",",","b_",")",";","vec2","If",";","If","=","2.0","*","t","(","Ie",")","-","1.0",";","vec4","Ig","=","texture2D","(","Ib",",","Ia",")",";","vec4","Ih","=","texture2D","(","Ic",",","Ia","-","If",")",";","float","Ii","=","abs","(","Ig",".","a","*","Ig",".","a","-","Ih",".","a","*","Ih",".","a",")","/","2.0",";","float","Ij","=","0.5","*","clamp","(","1.0","-","sqrt","(","Ii",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","vec4","Ik","=","mix","(","Ig",",","Ih",",","Ij",")",";","Ik",".","a","=","1.0",";","return","Ik",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","Ig","=","texture2D","(","Ib",",","Ia",")",";","vec4","Ih","=","texture2D","(","Ic",",","Ia",")",";","return","mix","(","Ig",",","Ih",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Im","=","vec4","(","Fv","(","b_",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Im","=","HJ","(","b_",",","EJ",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Im","=","H_","(","b_",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Im","=","vec4","(","Il","(","b_",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","Im","=","texture2D","(","u_color",",","b_",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","Im",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec2","u_texel_size",";","varying","vec2","b_",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","EF",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","EG",";","varying","vec4","EH",";","varying","vec4","EI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","EJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","EK","(","vec2","Eo",")","{","EG","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","Eo",".","xyxy",";","EH","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","Eo",".","xyxy",";","EI","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","Eo",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","EN","(","vec2","EL",",","out","vec2","EM",")","{","EM","=","EL","/","u_texel_size",";","EG","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","EL",".","xyxy",";","EH","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","EL",".","xyxy",";","EI","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","EG",".","xz",",","EH",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","EP","(","vec2","EO",")","{","EF","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","EO",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","b_","=","2.0","*","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EK","(","b_",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EN","(","b_",",","EJ",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["EP","(","b_",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"define",name:"SSAO_QUALITY_8",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_16",tokens:["2"]},{type:"define",name:"SSAO_QUALITY_24",tokens:["3"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","sampler2D","u_ssao_special_tex",";","uniform","vec2","u_camera_range",";","uniform","vec2","u_texel_size",";","varying","vec2","b_",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","float","EK","(","in","vec2","Eo",")","{","return","EA","(","u_depth",",","Eo",",","u_camera_range",")",";","}","void","main","(",")","{","float","EL","=","texture2D","(","u_color",",","b_",")",".","r",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","EL",",","1.0",",","0.0",",","1.0",")",";","return",";"]}]}}]},{type:"textline",tokens:["vec3","EM","=","normalize","(","2.0","*","texture2D","(","u_ssao_special_tex",",","b_","*","0.25","/","u_texel_size",")",".","rgb","-","1.0",")",";","float","EN","=","EK","(","b_",")",";","float","EO","=","EN","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","SSAO_QUALITY_8",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","EP","=","8.0",";","const","int","EQ","=","1",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_16",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","EP","=","16.0",";","const","int","EQ","=","2",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_24",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","EP","=","24.0",";","const","int","EQ","=","3",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_32",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","EP","=","32.0",";","const","int","EQ","=","4",";"]}]}}]},{type:"textline",tokens:["float","ER","=","u_ssao_radius_increase","*","0.001",";","const","float","ES","=","1.0","+","2.4","/","EP",";","float","ET","=","0.0",";","for","(","int","EU","=","0",";","EU","<","EQ",";","EU","++",")","for","(","int","EV","=","-","1",";","EV","<=","1",";","EV","+=","2",")","for","(","int","EW","=","-","1",";","EW","<=","1",";","EW","+=","2",")","for","(","int","EX","=","-","1",";","EX","<=","1",";","EX","+=","2",")","{","vec3","EY","=","reflect","(","normalize","(","vec3","(","EV",",","EW",",","EX",")",")",",","EM",")","*","(","ER","*=","ES",")",";","vec3","EZ","=","vec3","(","b_",",","EO",")",";","EZ","+=","vec3","(","EY",".","xy",",","EY",".","z","*","EO","*","2.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["EZ",".","z","-=","1.4","*","(","EZ",".","z","-","EO",")","*","step","(","EO",",","EZ",".","z",")",";"]}]}}]},{type:"textline",tokens:["float","E_","=","EK","(","EZ",".","xy",")","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";","float","Fa","=","clamp","(","(","EO","-","E_",")","/","E_",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["ET","+=","mix","(","1.0",",","Fa",",","step","(","E_",",","EZ",".","z",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ET","+=","mix","(","step","(","EZ",".","z",",","E_",")",",","0.5",",","Fa",")",";"]}]}}]},{type:"textline",tokens:["}","ET","=","ET","/","EP",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["ET","=","clamp","(","ET","*","ET","+","0.6","*","ET",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ET","=","clamp","(","ET","*","ET","+","ET",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["float","Fb","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","EN",")",";","ET","=","mix","(","1.0",",","ET",",","Fb",")",";","gl_FragColor","=","vec4","(","EL",",","ET",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao_blur.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"include",file:"depth_fetch.glslf"}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_ssao_mask",";","uniform","vec2","u_texel_size",";","varying","vec2","b_",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","uniform","float","u_ssao_blur_discard_value",";","float","EK","(","in","vec2","Eo",")","{","return","EA","(","u_depth",",","Eo",",","u_camera_range",")",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","EL","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["float","EM","=","EK","(","b_",")",";","float","EN","=","0.0",";","float","EO","=","u_ssao_blur_discard_value","*","100.0",";"]}]}}]},{type:"textline",tokens:["vec2","EP","=","vec2","(","-","2.0",")",";","for","(","int","EQ","=","0",";","EQ","<","4",";","++","EQ",")","{","for","(","int","ER","=","0",";","ER","<","4",";","++","ER",")","{","vec2","ES","=","(","EP","+","vec2","(","float","(","EQ",")",",","float","(","ER",")",")",")","*","u_texel_size",";","float","ET","=","texture2D","(","u_ssao_mask",",","b_","+","ES",")",".","g",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["float","EU","=","EK","(","b_","+","ES",")",";","float","EV","=","1.0","-","clamp","(","abs","(","EU","-","EM",")","*","EO",",","0.0",",","1.0",")",";","EL","+=","ET","*","EV",";","EN","+=","EV",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["EL","+=","ET",";"]}]}}]},{type:"textline",tokens:["}","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","b_",")",".","r",",","EL","/","EN",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","b_",")",".","r",",","EL","/","16.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","b_",";","void","main","(",")","{","float","Eo","=","texture2D","(","u_depth",",","b_",")",".","x",";","vec4","EK","=","vec4","(","b_","*","2.0","-","1.0",",","2.0","*","Eo","-","1.0",",","1.0",")",";","vec4","EL","=","u_view_proj_inverse","*","EK",";","vec4","EM","=","EL","/","EL",".","w",";","vec4","EN","=","u_view_proj_prev","*","EM",";","EN","/=","EN",".","w",";","vec2","EO","=","(","EK",".","xy","-","EN",".","xy",")","/","4.0","+","0.5",";","EO","=","clamp","(","EO",",","0.0",",","1.0",")",";","gl_FragColor","=","h","(","EO",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV_ORCO",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["3"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["3"]},{type:"define",name:"NO_SHADOWS",tokens:["1"]},{type:"define",name:"SHADOW_CASTING",tokens:["2"]},{type:"define",name:"SHADOW_MASK_GENERATION",tokens:["3"]},{type:"define",name:"SHADOW_MAPPING_OPAQUE",tokens:["4"]},{type:"define",name:"SHADOW_MAPPING_BLEND",tokens:["5"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"SPECULAR_BLINN",tokens:["4"]},{type:"define",name:"SPECULAR_TOON",tokens:["5"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]},{type:"define",name:"DIFFUSE_MINNAERT",tokens:["4"]},{type:"define",name:"DIFFUSE_TOON",tokens:["5"]},{type:"define",name:"MAPPING_TYPE_TEXTURE",tokens:["0.0"]},{type:"define",name:"MAPPING_TYPE_POINT",tokens:["1.0"]},{type:"define",name:"MAPPING_TYPE_VECTOR",tokens:["2.0"]},{type:"define",name:"MAPPING_TYPE_NORMAL",tokens:["3.0"]},{type:"define",name:"MIX",tokens:["0"]},{type:"define",name:"ADD",tokens:["1"]},{type:"define",name:"SUBTRACT",tokens:["2"]},{type:"define",name:"MULTIPLY",tokens:["3"]},{type:"define",name:"SCREEN",tokens:["4"]},{type:"define",name:"OVERLAY",tokens:["5"]},{type:"define",name:"DIFFERENCE",tokens:["6"]},{type:"define",name:"DIVIDE",tokens:["7"]},{type:"define",name:"DARKEN",tokens:["8"]},{type:"define",name:"LIGHTEN",tokens:["9"]},{type:"define",name:"HUE",tokens:["10"]},{type:"define",name:"SATURATION",tokens:["11"]},{type:"define",name:"VALUE",tokens:["12"]},{type:"define",name:"COLOR",tokens:["13"]},{type:"define",name:"SOFT_LIGHT",tokens:["14"]},{type:"define",name:"LINEAR_LIGHT",tokens:["15"]},{type:"define",name:"REFL_NONE",tokens:["0"]},{type:"define",name:"REFL_MIRRORMAP",tokens:["1"]},{type:"define",name:"REFL_PLANE",tokens:["2"]},{type:"define",name:"REFL_CUBE",tokens:["3"]},{type:"define",name:"INVERSE_QUADRATIC",tokens:["0"]},{type:"define",name:"LINEAR",tokens:["1"]},{type:"define",name:"QUADRATIC",tokens:["2"]},{type:"define",name:"HEMI",tokens:["1"]},{type:"define",name:"SPOT",tokens:["2"]},{type:"define",name:"POINT",tokens:["3"]},{type:"define",name:"SUN",tokens:["4"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","a","=","255.0",";","float","b","=","0.0",";","float","c","=","1.0",";","vec4","h","(","const","in","float","d",")","{","vec4","e","=","vec4","(","a","*","a","*","a",",","a","*","a",",","a",",","c",")",";","vec4","f","=","vec4","(","b",",","c","/","a",",","c","/","a",",","c","/","a",")",";","vec4","g","=","fract","(","d","*","e",")",";","g","-=","g",".","xxyz","*","f",";","return","g",";","}","float","l","(","const","in","vec4","i",")","{","float","j",";","vec4","k","=","vec4","(","c","/","(","a","*","a","*","a",")",",","c","/","(","a","*","a",")",",","c","/","a",",","c",")",";","j","=","dot","(","i",",","k",")",";","return","j",";","}","vec4","h","(","const","in","vec2","m",")","{","vec2","n","=","vec2","(","a",",","c",")",";","vec2","o","=","vec2","(","b",",","c","/","a",")",";","vec4","p","=","fract","(","m",".","xxyy","*","n",".","xyxy",")",";","p","-=","p",".","xxzz","*","o",".","xyxy",";","if","(","m",".","r","==","c",")","p",".","rg","=","vec2","(","b",",","c",")",";","if","(","m",".","g","==","c",")","p",".","ba","=","vec2","(","b",",","c",")",";","return","p",";","}","vec2","t","(","const","in","vec4","q",")","{","vec2","r",";","vec2","s","=","vec2","(","c","/","a",",","c",")",";","r",".","r","=","dot","(","q",".","rg",",","s",")",";","r",".","g","=","dot","(","q",".","ba",",","s",")",";","return","r",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","u","=","0.0",";","float","v","=","1.0",";","vec4","x","(","vec4","w",")","{","return","w","-","floor","(","w","*","(","v","/","289.0",")",")","*","289.0",";","}","vec3","x","(","vec3","y",")","{","return","y","-","floor","(","y","*","(","v","/","289.0",")",")","*","289.0",";","}","vec2","x","(","vec2","z",")","{","return","z","-","floor","(","z","*","(","v","/","289.0",")",")","*","289.0",";","}","vec4","B","(","vec4","A",")","{","return","A","-","floor","(","A","*","(","v","/","7.0",")",")","*","7.0",";","}","vec4","D","(","vec4","C",")","{","return","x","(","(","34.0","*","C","+","5.0",")","*","C",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","Q","(","vec2","E",")","{","vec2","F","=","x","(","floor","(","E",")",")",";","vec2","G","=","fract","(","E",")",";","vec4","H","=","G",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","I","=","G",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","J","=","D","(","F",".","x","+","vec4","(","u",",","v",",","u",",","v",")",")",";","J","=","D","(","J","+","F",".","y","+","vec4","(","u",",","u",",","v",",","v",")",")",";","vec4","L","=","B","(","J",")","*","K","+","K2",";","vec4","M","=","B","(","floor","(","J","*","K",")",")","*","K","+","K2",";","vec4","N","=","H","+","JITTER","*","L",";","vec4","O","=","I","+","JITTER","*","M",";","vec4","P","=","N","*","N","+","O","*","O",";"]},{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"textline",tokens:["P",".","xy","=","min","(","P",".","xy",",","P",".","zw",")",";","P",".","x","=","min","(","P",".","x",",","P",".","y",")",";","return","P",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["P",".","xy","=","(","P",".","x","<","P",".","y",")","?","P",".","xy",":","P",".","yx",";","P",".","xz","=","(","P",".","x","<","P",".","z",")","?","P",".","xz",":","P",".","zx",";","P",".","xw","=","(","P",".","x","<","P",".","w",")","?","P",".","xw",":","P",".","wx",";","P",".","y","=","min","(","P",".","y",",","P",".","z",")",";","P",".","y","=","min","(","P",".","y",",","P",".","w",")",";","return","sqrt","(","P",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","ae","(","vec2","R",",","float","S",")","{","vec2","T","=","x","(","floor","(","R",")",")",";","vec2","U","=","fract","(","R",")",";","vec4","V","=","U",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","W","=","U",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","X","=","D","(","T",".","x","+","vec4","(","u",",","v",",","u",",","v",")",")",";","X","=","D","(","X","+","T",".","y","+","vec4","(","u",",","u",",","v",",","v",")",")",";","vec4","Y","=","B","(","X",")","*","K","+","K2",";","vec4","Z","=","B","(","floor","(","X","*","K",")",")","*","K","+","K2",";","vec4","_","=","V","+","JITTER","*","Y",";","vec4","aa","=","W","+","JITTER","*","Z",";","vec4","ab","=","_","*","_","+","aa","*","aa",";","_","+=","S",";","aa","+=","S",";","vec4","ac","=","_","*","_","+","aa","*","aa",";","_","+=","S",";","aa","+=","S",";","vec4","ad","=","_","*","_","+","aa","*","aa",";","ab",".","xy","=","min","(","ab",".","xy",",","ab",".","zw",")",";","ab",".","x","=","min","(","ab",".","x",",","ab",".","y",")",";","ac",".","xy","=","min","(","ac",".","xy",",","ac",".","zw",")",";","ac",".","x","=","min","(","ac",".","x",",","ac",".","y",")",";","ad",".","xy","=","min","(","ad",".","xy",",","ad",".","zw",")",";","ad",".","x","=","min","(","ad",".","x",",","ad",".","y",")",";","return","vec3","(","ab",".","x",",","ac",".","x",",","ad",".","x",")",";","}","vec3","ag","(","vec3","af",")","{","return","x","(","(","(","af","*","34.0",")","+","v",")","*","af",")",";","}","float","au","(","vec2","ah",")","{","const","vec4","ai","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","vec2","aj","=","floor","(","ah","+","dot","(","ah",",","ai",".","yy",")",")",";","vec2","ak","=","ah","-","aj","+","dot","(","aj",",","ai",".","xx",")",";","vec2","al",";","al","=","(","ak",".","x",">","ak",".","y",")","?","vec2","(","v",",","u",")",":","vec2","(","u",",","v",")",";","vec4","am","=","ak",".","xyxy","+","ai",".","xxzz",";","am",".","xy","-=","al",";","aj","=","x","(","aj",")",";","vec3","an","=","ag","(","ag","(","aj",".","y","+","vec3","(","u",",","al",".","y",",","v",")",")","+","aj",".","x","+","vec3","(","u",",","al",".","x",",","v",")",")",";","vec3","ao","=","max","(","0.5","-","vec3","(","dot","(","ak",",","ak",")",",","dot","(","am",".","xy",",","am",".","xy",")",",","dot","(","am",".","zw",",","am",".","zw",")",")",",","u",")",";","ao","=","ao","*","ao",";","ao","=","ao","*","ao",";","vec3","ap","=","2.0","*","fract","(","an","*","ai",".","www",")","-","v",";","vec3","aq","=","abs","(","ap",")","-","0.5",";","vec3","ar","=","floor","(","ap","+","0.5",")",";","vec3","as","=","ap","-","ar",";","ao","*=","1.79284291400159","-","0.85373472095314","*","(","as","*","as","+","aq","*","aq",")",";","vec3","at",";","at",".","x","=","as",".","x","*","ak",".","x","+","aq",".","x","*","ak",".","y",";","at",".","yz","=","as",".","yz","*","am",".","xz","+","aq",".","yz","*","am",".","yw",";","return","130.0","*","dot","(","ao",",","at",")",";","}","vec2","aA","(","vec2","av",")","{","float","aw","=","dot","(","av",",","vec2","(","12.9898",",","78.233",")",")",";","float","ax","=","dot","(","av",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","float","ay","=","fract","(","sin","(","aw",")","*","43758.5453",")","*","2.0","-","v",";","float","az","=","fract","(","sin","(","ax",")","*","43758.5453",")","*","2.0","-","v",";","return","vec2","(","ay",",","az",")",";","}"]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","aY","(","inout","vec3","aB",",","float","aC",",","float","aD",",","float","aE",",","vec3","aF",",","vec3","aG",",","vec3","aH",",","vec4","aI",",","vec3","aJ",",","float","aK",")","{","if","(","aK",">","CAUSTICS_VIEW_DISTANCE",")","return",";","vec4","aL","=","aI",";","vec3","aM","=","aJ","+","aF",";","aM",".","xz","=","10.0","*","sin","(","0.1","*","aM",".","xz",")",";","vec3","aN","=","aM","+","2.0","*","cross","(","-","aL",".","xyz",",","cross","(","-","aL",".","xyz",",","aM",")","+","aL",".","w","*","aM",")",";","vec2","aO","=","aN",".","xz",";","vec3","aP","=","aG",";","float","aQ","=","max","(","dot","(","aF",",","aP",")",",","0.0",")",";","float","aR","=","0.025",";","vec2","aS","=","CAUST_SPEED","*","aD",";","aO",".","s","+=","0.25","*","sin","(","dot","(","aJ","+","aD",",","vec3","(","1.0",")",")",")",";","aO",".","t","+=","0.35","*","(","-","sin","(","dot","(","aJ","-","aD",",","vec3","(","-","0.7",")",")",")",")",";","aO",".","st","+=","0.15","*","cos","(","4.0","*","aC","-","aS",".","x",")","+","1.5","*","sin","(","aC","-","0.3","*","aS",".","y",")",";","float","aT","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","aC",",","0.0",")",")",";","vec3","aU","=","ae","(","(","aO","/","aT",")",",","aR",")",";","aU","*=","CAUST_BRIGHT",";","aU","*=","aU",";","float","aV","=","min","(","0.25","*","aC",",","-","aC",")","+","1.0",";","aV","=","max","(","aV",",","0.0",")",";","float","aW","=","aE","*","aQ",";","float","aX","=","max","(","sign","(","aC",")",",","0.0",")",";","aW","=","aW","+","max","(","0.5","*","sign","(","-","aF",".","y",")","*","aX",",","0.0",")",";","aW","=","min","(","aW",",","1.0",")",";","aB","+=","aH","*","aU","*","aV","*","aW",";","}"]}]},exports["include/gamma.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","a_","(","inout","vec3","aZ",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["aZ","=","max","(","vec3","(","0.0",")",",","aZ",")",";","aZ","=","pow","(","aZ",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","bb","(","inout","vec3","ba",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["ba","=","max","(","vec3","(","0.0",")",",","ba",")",";","ba","=","pow","(","ba",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","be","(","inout","vec3","bc",",","in","float","bd",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bc","=","bc","*","bd",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","bf","=","0.0",";","float","bg","=","1.0",";","struct","bh","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","bk","(","vec3","bi",",","vec3","bj",")","{","return","any","(","lessThan","(","abs","(","bi","-","bj",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","bn","(","in","vec4","bl",",","in","vec3","bm",")","{","return","bm","+","2.0","*","cross","(","bl",".","xyz",",","cross","(","bl",".","xyz",",","bm",")","+","bl",".","w","*","bm",")",";","}","vec4","bp","(","in","vec4","bo",")","{","return","vec4","(","-","bo",".","xyz",",","bo",".","w",")","/","dot","(","bo",",","bo",")",";","}","vec3","bu","(","vec4","bq",",","vec4","br",",","vec4","bs",")","{","vec3","bt","=","bs",".","xyz","*","bq",".","w",";","bt","=","bn","(","br",",","bt",")",";","bt","+=","bq",".","xyz","*","bs",".","w",";","return","bt",";","}","vec3","bA","(","vec4","bv",",","vec4","bw",",","vec4","bx",")","{","vec3","by","=","bx",".","xyz","-","bv",".","xyz","*","bx",".","w",";","vec4","bz","=","bp","(","bw",")",";","by","=","bn","(","bz",",","by",")",";","by","/=","bv",".","w",";","return","by",";","}","mat4","bB","(",")","{","return","mat4","(","bg",",","bf",",","bf",",","bf",",","bf",",","bg",",","bf",",","bf",",","bf",",","bf",",","bg",",","bf",",","bf",",","bf",",","bf",",","bg",")",";","}","mat4","bD","(","float","bC",")","{","return","mat4","(","bg",",","bf",",","bf",",","bf",",","bf",",","cos","(","bC",")",",","sin","(","bC",")",",","bf",",","bf",",","-","sin","(","bC",")",",","cos","(","bC",")",",","bf",",","bf",",","bf",",","bf",",","bg",")",";","}","mat4","bF","(","float","bE",")","{","return","mat4","(","cos","(","bE",")",",","bf",",","-","sin","(","bE",")",",","bf",",","bf",",","bg",",","bf",",","bf",",","sin","(","bE",")",",","bf",",","cos","(","bE",")",",","bf",",","bf",",","bf",",","bf",",","bg",")",";","}","mat4","bH","(","float","bG",")","{","return","mat4","(","cos","(","bG",")",",","sin","(","bG",")",",","bf",",","bf",",","-","sin","(","bG",")",",","cos","(","bG",")",",","bf",",","bf",",","bf",",","bf",",","bg",",","bf",",","bf",",","bf",",","bf",",","bg",")",";","}","bh","bJ","(","in","bh","bI",")","{","return","bh","(","bI",".","a",",","bI",".","b",",","normalize","(","bI",".","c",")",",","normalize","(","bI",".","d",")",",","normalize","(","bI",".","e",")",",","bI",".","f",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","bP","(","vec4","bK",")","{","float","bL","=","bK",".","x",";","float","bM","=","bK",".","y",";","float","bN","=","bK",".","w",";","vec3","bO",";","bO",".","x","=","(","bL","+","bN",")","/","2.0",";","bO",".","y","=","(","bM","+","bN",")","/","2.0",";","bO",".","z","=","bN",";","return","bO",";","}"]}]}}]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"CSM_BLEND_BETWEEN_CASCADES",tokens:["1.0"]},{type:"var",name:"CSM_FADE_LAST_CASCADE",tokens:["1.0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ca",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","cb","=","0.1",";","const","float","cc","=","0.1",";","const","float","cd","=","-","0.01",";","const","float","ce","=","0.05",";","vec4","cf","=","vec4","(","0.14383161",",","0.34495938",",","-","0.38277543",",","-","0.26496911",")",";","vec4","cg","=","vec4","(","0.53742981",",","0.19984126",",","0.79197514",",","-","0.094184101",")",";","vec4","ch","=","vec4","(","-","0.94201624",",","-","0.91588581",",","-","0.2418884",",","0.44323325",")",";","vec4","ci","=","vec4","(","-","0.81544232",",","0.94558609",",","-","0.81409955",",","0.97484398",")",";","vec4","cj","=","vec4","(","-","0.1410079",",","0.2938776",",","0.27676845",",","-","0.41893023",")",";","vec4","ck","=","vec4","(","-","0.4737342",",","0.78641367",",","0.19090188",",","-","0.9293887",")",";","vec4","cl","=","vec4","(","-","0.39906216",",","0.45771432",",","0.99706507",",","-","0.97511554",")",";","vec4","cm","=","vec4","(","-","0.87912464",",","-","0.76890725",",","0.9143759",",","0.7564837",")",";","bool","cp","(","vec2","cn",",","float","co",")","{","return","all","(","lessThanEqual","(","cn",",","vec2","(","1.0","+","co",")",")",")","&&","all","(","greaterThanEqual","(","cn",",","vec2","(","0.0","-","co",")",")",")",";","}","float","cy","(","float","cq",",","float","cr",",","mat2","cs",",","vec3","ct",",","float","cu",",","PRECISION","sampler2D","cv",")","{","vec2","cw",",","cx",";","cx",".","x","=","cq",";","cx",".","y","=","cr",";","cx","=","cs","*","cx",";","cw","=","ct",".","xy","+","cx","*","cu","/","SHADOW_TEX_RES",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","cp","(","cw",",","cd",")",")","return","1.0",";","else"]}]}}]},{type:"textline",tokens:["return","step","(","ct",".","z",",","texture2D","(","cv",",","cw",")",".","r",")",";","}","void","cM","(","inout","float","cz",",","inout","float","cA",",","float","cB",",","float","cC",",","mat2","cD",",","vec3","cE",",","vec3","cF",",","float","cG",",","float","cH",",","PRECISION","sampler2D","cI",",","PRECISION","sampler2D","cJ",")","{","vec2","cK",",","cL",";","cL",".","x","=","cB",";","cL",".","y","=","cC",";","cL","=","cD","*","cL",";","cK","=","cE",".","xy","+","cL","*","cG","/","SHADOW_TEX_RES",";","cz","+=","step","(","cE",".","z",",","texture2D","(","cI",",","cK",")",".","r",")",";","cK","=","cF",".","xy","+","cL","*","cH","/","SHADOW_TEX_RES",";","cA","+=","step","(","cF",".","z",",","texture2D","(","cJ",",","cK",")",".","r",")",";","}","float","cW","(","vec3","cN",",","PRECISION","sampler2D","cO",",","float","cP",")","{"]},{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","cN",".","z",">","u_perspective_cast_far_bound",")","return","1.0",";","else","{"]}]}}]},{type:"textline",tokens:["cN",".","z","=","clamp","(","cN",".","z",",","0.0",",","1.0",")",";","float","cQ","=","0.0",";","float","cR","=","aA","(","cN",".","xy",")",".","x","*","M_PI",";","float","cS","=","cos","(","cR",")",";","float","cT","=","sin","(","cR",")",";","mat2","cU","=","mat2","(","cS",",","cT",",","-","cT",",","cS",")",";","for","(","int","cV","=","0",";","cV","<","4",";","cV","++",")","{","cQ","+=","cy","(","cf","[","cV","]",",","cj","[","cV","]",",","cU",",","cN",",","cP",",","cO",")",";","cQ","+=","cy","(","cg","[","cV","]",",","ck","[","cV","]",",","cU",",","cN",",","cP",",","cO",")",";","cQ","+=","cy","(","ch","[","cV","]",",","cl","[","cV","]",",","cU",",","cN",",","cP",",","cO",")",";","cQ","+=","cy","(","ci","[","cV","]",",","cm","[","cV","]",",","cU",",","cN",",","cP",",","cO",")",";","}","cQ","/=","16.0",";","return","clamp","(","cQ",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["PERSPECTIVE_SHADOW_CAST"],group:{type:"group",parts:[{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","1.0",";","}","float","dk","(","vec3","cX",",","PRECISION","sampler2D","cY",",","vec3","cZ",",","PRECISION","sampler2D","c_",",","float","da",",","float","db",",","float","dc",")","{","float","dd",",","de",";","cX",".","z","=","clamp","(","cX",".","z",",","0.0",",","1.0",")",";","cZ",".","z","=","clamp","(","cZ",".","z",",","0.0",",","1.0",")",";","dd","=","0.0",";","de","=","0.0",";","float","df","=","aA","(","cX",".","xy",")",".","x","*","M_PI",";","float","dg","=","cos","(","df",")",";","float","dh","=","sin","(","df",")",";","mat2","di","=","mat2","(","dg",",","dh",",","-","dh",",","dg",")",";","for","(","int","dj","=","0",";","dj","<","4",";","dj","++",")","{","cM","(","dd",",","de",",","cf","[","dj","]",",","cj","[","dj","]",",","di",",","cX",",","cZ",",","da",",","db",",","cY",",","c_",")",";","cM","(","dd",",","de",",","cg","[","dj","]",",","ck","[","dj","]",",","di",",","cX",",","cZ",",","da",",","db",",","cY",",","c_",")",";","cM","(","dd",",","de",",","ch","[","dj","]",",","cl","[","dj","]",",","di",",","cX",",","cZ",",","da",",","db",",","cY",",","c_",")",";","cM","(","dd",",","de",",","ci","[","dj","]",",","cm","[","dj","]",",","di",",","cX",",","cZ",",","da",",","db",",","cY",",","c_",")",";","}","dd","=","mix","(","dd",",","de",",","dc",")",";","dd","/=","16.0",";","return","clamp","(","dd",",","0.0",",","1.0",")",";","}","float","dp","(","vec2","dl",")","{","float","dm","=","min","(","dl",".","x",",","dl",".","y",")",";","float","dn","=","min","(","1.0","-","dl",".","x",",","1.0","-","dl",".","y",")",";","return","min","(","dm",",","dn",")",";","}","float","ds","(","float","dq",",","float","dr",")","{","if","(","dr",">=","0.0","&&","dr","<=","cc",")","dq","=","(","dq","-","1.0",")","/","cc","*","dr","+","1.0",";","return","dq",";","}","float","dE","(","vec3","dt",",","vec3","du",",","PRECISION","sampler2D","dv",",","PRECISION","sampler2D","dw",",","float","dx",",","float","dy",",","float","dz",",","float","dA",")","{","float","dB",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_BLEND_BETWEEN_CASCADES"],group:{type:"group",parts:[{type:"textline",tokens:["float","dC","=","dp","(","dt",".","xy",")",";","if","(","-","dA",">","dz","&&","dC",">=","0.0","&&","dC","<=","cb","&&","cp","(","du",".","xy",",","0.0",")",")","{","float","dD","=","1.0","-","dC","/","cb",";","dB","=","dk","(","dt",",","dv",",","du",",","dw",",","dx",",","dy",",","dD",")",";","}","else"]}]}}]},{type:"textline",tokens:["dB","=","cW","(","dt",",","dv",",","dx",")",";","return","dB",";","}","float","dM","(","vec3","dF",",","PRECISION","sampler2D","dG",",","float","dH",",","float","dI",",","float","dJ",")","{","float","dK","=","cW","(","dF",",","dG",",","dH",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_FADE_LAST_CASCADE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","-","dJ",">","dI",")","{","float","dL","=","dp","(","dF",".","xy",")",";","dK","=","ds","(","dK",",","dL",")",";","}"]}]}}]},{type:"textline",tokens:["return","dK",";","}","float","dT","(","float","dN",")","{","float","dO","=","1.0",";","vec3","dP","=","bW",".","xyz","/","bW",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","dQ","=","bX",".","xyz","/","bX",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","dR","=","bY",".","xyz","/","bY",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","dS","=","bZ",".","xyz","/","bZ",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","cp","(","dP",".","xy",",","0.0",")",")","{","dO","=","dE","(","dP",",","dQ",",","u_shadow_map0",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","0","]",",","dN",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","cp","(","dP",".","xy",",","ce",")",")","{","dO","=","dM","(","dP",",","u_shadow_map0",",","u_pcf_blur_radii","[","0","]",",","u_csm_center_dists","[","0","]",",","dN",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","cp","(","dQ",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["dO","=","dE","(","dQ",",","dR",",","u_shadow_map1",",","u_shadow_map2",",","u_pcf_blur_radii","[","1","]",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","1","]",",","dN",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dO","=","dM","(","dQ",",","u_shadow_map1",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","1","]",",","dN",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","cp","(","dR",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["dO","=","dE","(","dR",",","dS",",","u_shadow_map2",",","u_shadow_map3",",","u_pcf_blur_radii","[","2","]",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","2","]",",","dN",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dO","=","dM","(","dR",",","u_shadow_map2",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","2","]",",","dN",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","cp","(","dS",".","xy",",","0.0",")",")","dO","=","dM","(","dS",",","u_shadow_map3",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","3","]",",","dN",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","dO",";","}"]}]}}]},{type:"textline",tokens:["float","dY","(","inout","vec3","dU",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","dV","=","texture2DProj","(","u_shadow_mask",",","bU",")",".","rg",";","vec3","dW","=","vec3","(","dV",".","r",")",";","float","dX","=","dV",".","g",";","ca","=","vec4","(","dW",",","dX",")",";","dU","*=","ca",".","a",";","return","ca",".","r",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","dT","(","bR",".","z",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","ef","(","in","vec3","dZ",",","vec3","d_",",","float","ea",",","float","eb",")","{","vec3","ec","=","normalize","(","d_","+","dZ",")",";","float","ed","=","1.0","-","dot","(","dZ",",","ec",")",";","float","ee","=","eb","+","(","1.0","-","eb",")","*","pow","(","ed",",","ea",")",";","return","ee",";","}","void","et","(","inout","vec3","eg",",","vec3","eh",",","vec3","ei",",","float","ej",")","{","vec3","ek","=","reflect","(","-","eh",",","ei",")",";","float","el","=","u_fresnel_params","[","2","]",";","float","em","=","u_fresnel_params","[","3","]",";","float","en","=","1.0",";","if","(","el","!=","0.0",")","en","=","ef","(","eh",",","ek",",","el",",","em",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eo","=","textureCube","(","u_cube_reflection",",","ek",")",".","xyz",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ep","=","u_refl_plane",".","xyz","*","dot","(","ei",",","u_refl_plane",".","xyz",")",";","vec3","eq","=","ei","-","ep",";","vec2","er","=","(","u_view_matrix_frag","*","vec4","(","eq",",","0.0",")",")",".","xy",";","vec2","es","=","bU",".","xy","/","bU",".","z",";","es","+=","er","*","REFL_BUMP",";","vec3","eo","=","texture2D","(","u_plane_reflection",",","es",")",".","rgb",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eo","=","textureCube","(","u_mirrormap",",","ek",")",".","xyz",";","ej","=","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["a_","(","eo",".","rgb",")",";","eg","=","mix","(","eg",",","eo",",","ej","*","en",")",";","}"]}]}}]}]},exports["include/environment.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec3","ew","(","vec3","eu",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["return","textureCube","(","u_sky_texture",",","eu",")",".","rgb",";"]}]}},{type:"elif",expression:["SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","ev","=","0.5","*","eu",".","y","+","0.5",";","return","mix","(","u_horizon_color",",","u_zenith_color",",","ev",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["float","eC","(","in","float","ex",",","inout","vec2","ey",",","in","vec2","ez",")","{","vec4","eA","=","texture2D","(","u_scene_depth",",","ey",")",";","float","eB","=","l","(","eA",")",";","if","(","eB","<","bV",")","{","ey","=","ez",";","return","ex",";","}","else","{","return","eB",";","}","return","ex",";","}"]}]}}]},{type:"textline",tokens:["vec3","eK","(","in","vec3","eD",",","in","vec2","eE",")","{","vec2","eF","=","eD",".","xy","/","eD",".","z",";","vec2","eG","=","eF","+","eE",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","eH","=","texture2DProj","(","u_scene_depth",",","eD",")",";","float","eI","=","l","(","eH",")",";","eC","(","eI",",","eG",",","eF",")",";"]}]}}]},{type:"textline",tokens:["vec3","eJ","=","texture2D","(","u_refractmap",",","eG",")",".","rgb",";","a_","(","eJ",")",";","return","eJ",";","}"]}]}}]}]},exports["include/nodes.glslf"] = {type:"group",parts:[{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eL",";"]}]}}]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","eM","=","0.5",";","vec3","eN","=","vec3","(","ZERO_VALUE_NODES",")",";","vec3","eO","=","vec3","(","UNITY_VALUE_NODES",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eS","(","in","vec3","eP",",","in","float","eQ",")","{","vec3","eR","=","eN",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["eR","=","eK","(","bU",",","eP",".","xz","*","eQ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eR","=","texture2D","(","u_refractmap",",","bU",".","xy","/","bU",".","z",")",".","rgb",";","a_","(","eR",")",";"]}]}}]},{type:"textline",tokens:["return","eR",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eZ","(","vec3","eT",")","{","vec4","eU","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","vec4","eV","=","mix","(","vec4","(","eT",".","bg",",","eU",".","wz",")",",","vec4","(","eT",".","gb",",","eU",".","xy",")",",","step","(","eT",".","b",",","eT",".","g",")",")",";","vec4","eW","=","mix","(","vec4","(","eV",".","xyw",",","eT",".","r",")",",","vec4","(","eT",".","r",",","eV",".","yzx",")",",","step","(","eV",".","x",",","eT",".","r",")",")",";","float","eX","=","eW",".","x","-","min","(","eW",".","w",",","eW",".","y",")",";","float","eY","=","1.0e-10",";","return","vec3","(","abs","(","eW",".","z","+","(","eW",".","w","-","eW",".","y",")","/","(","6.0","*","eX","+","eY",")",")",",","eX","/","(","eW",".","x","+","eY",")",",","eW",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fc","(","vec3","e_",")","{","vec4","fa","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","vec3","fb","=","abs","(","fract","(","vec3","(","e_",".","r",",","e_",".","r",",","e_",".","r",")","+","fa",".","xyz",")","*","6.0","-","fa",".","www",")",";","return","e_",".","b","*","mix","(","fa",".","xxx",",","clamp","(","fb","-","fa",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","e_",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fe","(","vec2","fd",")","{","return","vec3","(","fd","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","fg","(","vec3","ff",")","{","return","vec2","(","ff",".","xy","*","0.5","+","vec2","(","0.5",",","0.5",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"fL",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"fM",qualifier:["float"],is_optional:true},{type:"node_out",name:"fN",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fL"],statements:[{type:"textline",tokens:["fL","=","normalize","(","fI",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fM"],statements:[{type:"textline",tokens:["fM","=","abs","(","fI",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fN"],statements:[{type:"textline",tokens:["fN","=","length","(","fI",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"fO",qualifier:["float"],is_optional:false},{type:"node_in",name:"fP",qualifier:["float"],is_optional:false},{type:"node_in",name:"fQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"fR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fR","=","vec3","(","fO",",","fP",",","fQ",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"fS",qualifier:["float"],is_optional:false},{type:"node_in",name:"fT",qualifier:["float"],is_optional:false},{type:"node_in",name:"fU",qualifier:["float"],is_optional:false},{type:"node_out",name:"fV",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fV","=","fc","(","vec3","(","fS",",","fT",",","fU",")",")",";"]}]},{type:"node",name:"EMPTY_UV",declarations:[{type:"node_out",name:"fW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fW","=","vec3","(","-","1.0",",","-","1.0",",","0.0",")",";"]}]},{type:"node",name:"EMPTY_VC",declarations:[{type:"node_out",name:"fX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fX","=","eN",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"fY",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"fh",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["fY","=","fe","(","fh",")",";"]}]},{type:"node",name:"GEOMETRY_OR",declarations:[{type:"node_out",name:"fZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fZ","=","2.0","*","eL","-","eO",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"f_",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"fi",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["f_","=","fi",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"ga",qualifier:["float"],is_optional:false},{type:"node_param",name:"fj",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["ga","=","fj",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"gb",qualifier:["float"],is_optional:false},{type:"node_out",name:"gc",qualifier:["float"],is_optional:false},{type:"node_param",name:"fk",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["gb","=","fk","[","0","]",";","gc","=","fk","[","1","]",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"gd",qualifier:["float"],is_optional:false},{type:"node_out",name:"ge",qualifier:["float"],is_optional:false},{type:"node_out",name:"gf",qualifier:["float"],is_optional:false},{type:"node_param",name:"fl",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["gd","=","fl","[","0","]",";","ge","=","fl","[","1","]",";","gf","=","fl","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"gg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gg","=","fD",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"gh",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["gh","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"gi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gi","=","fu",";"]}]},{type:"node",name:"GEOMETRY_LO",declarations:[{type:"node_out",name:"gj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gj","[","0","]","=","fI","[","0","]",";","gj","[","1","]","=","fI","[","1","]",";","gj","[","2","]","=","fI","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"gk",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gk","=","vec3","(","fH",".","r",",","-","fH",".","b",",","fH",".","g",")",";"]}]},{type:"node",name:"NEW_GEOMETRY",declarations:[{type:"node_out",name:"gl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"go",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gr",qualifier:["float"],is_optional:false},{type:"node_out",name:"gs",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["gl","=","eN",";","gm","=","eN",";","gn","=","eN",";","go","=","eN",";","gp","=","eN",";","gq","=","eN",";","gr","=","ZERO_VALUE_NODES",";","gs","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"gt",qualifier:["float"],is_optional:false},{type:"node_in",name:"gu",qualifier:["float"],is_optional:false},{type:"node_in",name:"gv",qualifier:["float"],is_optional:false},{type:"node_in",name:"gw",qualifier:["float"],is_optional:false},{type:"node_in",name:"gx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gy",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["vec3","gz","=","eZ","(","gx",")",";","gz","[","0","]","+=","(","gt","-","0.5",")",";","if","(","gz","[","0","]",">","UNITY_VALUE_NODES",")","gz","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","gz","[","0","]","<","ZERO_VALUE_NODES",")","gz","[","0","]","+=","UNITY_VALUE_NODES",";","gz","*=","vec3","(","UNITY_VALUE_NODES",",","gu",",","gv",")",";","gz","=","mix","(","eO",",","mix","(","eN",",","gz",",","step","(","eN",",","gz",")",")",",","step","(","gz",",","eO",")",")",";","gy","=","mix","(","gx",",","fc","(","gz",")",",","gw",")",";"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"gA",qualifier:["float"],is_optional:false},{type:"node_in",name:"gB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gC","=","mix","(","gB",",","eO","-","gB",",","gA",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"gD",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"gE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gF",qualifier:["float"],is_optional:false},{type:"node_out",name:"gG",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gD"],statements:[{type:"textline",tokens:["gD","=","u_lamp_light_color_intensities","[","LAMP_INDEX","]",";"]}]}]},{type:"textline",tokens:["vec4","gH","=","u_lamp_light_factors","[","LAMP_INDEX","]",";","vec3","gI","=","u_lamp_light_directions","[","LAMP_INDEX","]",";","vec3","gJ","=","u_lamp_light_positions","[","LAMP_INDEX","]",";","float","gK","=","gH",".","z",";","if","(","gK","!=","-","UNITY_VALUE_NODES",")","{"]},{type:"textline",tokens:["gE","=","gJ","-","bQ",";","gF","=","length","(","gE",")",";","gE","=","normalize","(","gE",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gG"],statements:[{type:"textline",tokens:["gG","=","gK","/","(","gK","+","gF","*","gF",")",";","float","gL","=","gH",".","x",";","float","gM","=","gH",".","y",";","if","(","gL",">","-","UNITY_VALUE_NODES",")","{","float","gN","=","dot","(","gE",",","gI",")",";","gN","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","gN","-","gL",")","/","gM",")",";","gG","*=","gN",";","}"]}]}]},{type:"textline",tokens:["}","else","{"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gE"],statements:[{type:"textline",tokens:["gE","=","gI",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gF"],statements:[{type:"textline",tokens:["gF","=","length","(","gJ","-","bQ",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gG"],statements:[{type:"textline",tokens:["gG","=","UNITY_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"gO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gP",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"gQ",qualifier:["float"],is_optional:true},{type:"node_param",name:"fm",qualifier:["vec3"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gP"],statements:[{type:"textline",tokens:["gP","=","fm",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gQ"],statements:[{type:"textline",tokens:["gQ","=","-","dot","(","gO",",","fm",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"gR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gS","=","-","(","u_view_matrix_frag","*","vec4","(","gR",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"BSDF_ANISOTROPIC",declarations:[{type:"node_in",name:"gT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gU",qualifier:["float"],is_optional:false},{type:"node_in",name:"gV",qualifier:["float"],is_optional:false},{type:"node_in",name:"gW",qualifier:["float"],is_optional:false},{type:"node_in",name:"gX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gZ","=","gT",";"]},{type:"textline",tokens:["gU",";","gV",";","gW",";","gX",";","gY",";"]}]},{type:"node",name:"BSDF_DIFFUSE",declarations:[{type:"node_in",name:"g_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ha",qualifier:["float"],is_optional:false},{type:"node_in",name:"hb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hc","=","g_",";"]},{type:"textline",tokens:["ha",";","hb",";"]}]},{type:"node",name:"BSDF_GLASS",declarations:[{type:"node_in",name:"hd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"he",qualifier:["float"],is_optional:false},{type:"node_in",name:"hf",qualifier:["float"],is_optional:false},{type:"node_in",name:"hg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hh",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hh","=","hd",";"]},{type:"textline",tokens:["he",";","hf",";","hg",";"]}]},{type:"node",name:"BSDF_GLOSSY",declarations:[{type:"node_in",name:"hi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hj",qualifier:["float"],is_optional:false},{type:"node_in",name:"hk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hl",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hl","=","hi",";"]},{type:"textline",tokens:["hj",";","hk",";"]}]},{type:"node",name:"BSDF_HAIR",declarations:[{type:"node_in",name:"hm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hn",qualifier:["float"],is_optional:false},{type:"node_in",name:"ho",qualifier:["float"],is_optional:false},{type:"node_in",name:"hp",qualifier:["float"],is_optional:false},{type:"node_out",name:"hq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hq","=","hm",";"]},{type:"textline",tokens:["hn",";","ho",";","hp",";"]}]},{type:"node",name:"BSDF_TRANSPARENT",declarations:[{type:"node_in",name:"hr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hs","=","hr",";"]}]},{type:"node",name:"BSDF_TRANSLUCENT",declarations:[{type:"node_in",name:"ht",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hv","=","ht",";"]},{type:"textline",tokens:["hu",";"]}]},{type:"node",name:"BSDF_REFRACTION",declarations:[{type:"node_in",name:"hw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hx",qualifier:["float"],is_optional:false},{type:"node_in",name:"hy",qualifier:["float"],is_optional:false},{type:"node_in",name:"hz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hA","[","0","]","=","hA","[","1","]","=","hA","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hw",";","hx",";","hy",";","hz",";"]}]},{type:"node",name:"BSDF_TOON",declarations:[{type:"node_in",name:"hB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hC",qualifier:["float"],is_optional:false},{type:"node_in",name:"hD",qualifier:["float"],is_optional:false},{type:"node_in",name:"hE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hF","=","hB",";"]},{type:"textline",tokens:["hC",";","hD",";","hE",";"]}]},{type:"node",name:"BSDF_VELVET",declarations:[{type:"node_in",name:"hG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hH",qualifier:["float"],is_optional:false},{type:"node_in",name:"hI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hJ","=","hG",";"]},{type:"textline",tokens:["hH",";","hI",";"]}]},{type:"node",name:"SUBSURFACE_SCATTERING",declarations:[{type:"node_in",name:"hK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hL",qualifier:["float"],is_optional:false},{type:"node_in",name:"hM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hN",qualifier:["float"],is_optional:false},{type:"node_in",name:"hO",qualifier:["float"],is_optional:false},{type:"node_in",name:"hP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hQ","[","0","]","=","hQ","[","1","]","=","hQ","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hK",";","hM",";","hN",";","hO",";","hP",";","hL",";"]}]},{type:"node",name:"EMISSION",declarations:[{type:"node_in",name:"hR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hS",qualifier:["float"],is_optional:false},{type:"node_out",name:"hT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hT","=","hR",";"]},{type:"textline",tokens:["hS",";"]}]},{type:"node",name:"AMBIENT_OCCLUSION",declarations:[{type:"node_in",name:"hU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hV",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hV","[","0","]","=","hV","[","1","]","=","hV","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hU",";"]}]},{type:"node",name:"HOLDOUT",declarations:[{type:"node_out",name:"hW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hW","[","0","]","=","hW","[","1","]","=","hW","[","2","]","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"VOLUME_ABSORPTION",declarations:[{type:"node_in",name:"hX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hY",qualifier:["float"],is_optional:false},{type:"node_out",name:"hZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hZ","[","0","]","=","hZ","[","1","]","=","hZ","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hX",";","hY",";"]}]},{type:"node",name:"VOLUME_SCATTER",declarations:[{type:"node_in",name:"h_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ia",qualifier:["float"],is_optional:false},{type:"node_in",name:"ib",qualifier:["float"],is_optional:false},{type:"node_out",name:"ic",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ic","[","0","]","=","ic","[","1","]","=","ic","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["h_",";","ia",";","ib",";"]}]},{type:"node",name:"BUMP",declarations:[{type:"node_in",name:"id",qualifier:["float"],is_optional:false},{type:"node_in",name:"ie",qualifier:["float"],is_optional:false},{type:"node_in",name:"ig",qualifier:["float"],is_optional:false},{type:"node_in",name:"ih",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ii",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ii","=","ih",";"]},{type:"textline",tokens:["id",";","ie",";","ig",";"]}]},{type:"node",name:"NORMAL_MAP",declarations:[{type:"node_in",name:"ij",qualifier:["float"],is_optional:false},{type:"node_in",name:"ik",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"il",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["il","=","ik",";"]},{type:"textline",tokens:["ij",";"]}]},{type:"node",name:"VECT_TRANSFORM",declarations:[{type:"node_in",name:"im",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"io",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["io","[","0","]","=","io","[","1","]","=","io","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["im",";"]}]},{type:"node",name:"BLACKBODY",declarations:[{type:"node_in",name:"ip",qualifier:["float"],is_optional:false},{type:"node_out",name:"iq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iq","[","0","]","=","iq","[","1","]","=","iq","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ip",";"]}]},{type:"node",name:"WAVELENGTH",declarations:[{type:"node_in",name:"ir",qualifier:["float"],is_optional:false},{type:"node_out",name:"is",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["is","[","0","]","=","is","[","1","]","=","is","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ir",";"]}]},{type:"node",name:"SEPXYZ",declarations:[{type:"node_in",name:"it",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iu",qualifier:["float"],is_optional:false},{type:"node_out",name:"iv",qualifier:["float"],is_optional:false},{type:"node_out",name:"iw",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iu","=","it","[","0","]",";","iv","=","it","[","1","]",";","iw","=","it","[","2","]",";"]}]},{type:"node",name:"COMBXYZ",declarations:[{type:"node_in",name:"ix",qualifier:["float"],is_optional:false},{type:"node_in",name:"iy",qualifier:["float"],is_optional:false},{type:"node_in",name:"iz",qualifier:["float"],is_optional:false},{type:"node_out",name:"iA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iA","[","0","]","=","ix",";","iA","[","1","]","=","iy",";","iA","[","2","]","=","iz",";"]}]},{type:"node",name:"BRIGHTCONTRAST",declarations:[{type:"node_in",name:"iB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iC",qualifier:["float"],is_optional:false},{type:"node_in",name:"iD",qualifier:["float"],is_optional:false},{type:"node_out",name:"iE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","iF","=","iC","-","iD","*","0.5",";","iE","=","max","(","(","UNITY_VALUE_NODES","+","iD",")","*","iB","+","iF",",","eN",")",";"]}]},{type:"node",name:"LIGHT_FALLOFF",declarations:[{type:"node_in",name:"iG",qualifier:["float"],is_optional:false},{type:"node_in",name:"iH",qualifier:["float"],is_optional:false},{type:"node_out",name:"iI",qualifier:["float"],is_optional:false},{type:"node_out",name:"iJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"iK",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iI","=","iJ","=","iK","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["iG",";","iH",";"]}]},{type:"node",name:"TEX_IMAGE",declarations:[{type:"node_in",name:"iL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iN",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iM","[","0","]","=","iM","[","1","]","=","iM","[","2","]","=","ZERO_VALUE_NODES",";","iN","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iL",";"]}]},{type:"node",name:"TEX_ENVIRONMENT",declarations:[{type:"node_in",name:"iO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iP","[","0","]","=","iP","[","1","]","=","iP","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["iO",";"]}]},{type:"node",name:"TEX_SKY",declarations:[{type:"node_in",name:"iQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["iR","[","0","]","=","iR","[","1","]","=","iR","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["iQ",";"]}]},{type:"node",name:"TEX_NOISE",declarations:[{type:"node_in",name:"iS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iT",qualifier:["float"],is_optional:false},{type:"node_in",name:"iU",qualifier:["float"],is_optional:false},{type:"node_in",name:"iV",qualifier:["float"],is_optional:false},{type:"node_out",name:"iW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iW","[","0","]","=","iW","[","1","]","=","iW","[","2","]","=","ZERO_VALUE_NODES",";","iX","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iS",";","iT",";","iU",";","iV",";"]}]},{type:"node",name:"TEX_WAVE",declarations:[{type:"node_in",name:"iY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"i_",qualifier:["float"],is_optional:false},{type:"node_in",name:"ja",qualifier:["float"],is_optional:false},{type:"node_in",name:"jb",qualifier:["float"],is_optional:false},{type:"node_out",name:"jc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jd",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jc","[","0","]","=","jc","[","1","]","=","jc","[","2","]","=","ZERO_VALUE_NODES",";","jd","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iY",";","iZ",";","i_",";","ja",";","jb",";"]}]},{type:"node",name:"TEX_VORONOI",declarations:[{type:"node_in",name:"je",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jf",qualifier:["float"],is_optional:false},{type:"node_out",name:"jg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jh",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jg","[","0","]","=","jg","[","1","]","=","jg","[","2","]","=","ZERO_VALUE_NODES",";","jh","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["je",";","jf",";"]}]},{type:"node",name:"TEX_MUSGRAVE",declarations:[{type:"node_in",name:"ji",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jj",qualifier:["float"],is_optional:false},{type:"node_in",name:"jk",qualifier:["float"],is_optional:false},{type:"node_in",name:"jl",qualifier:["float"],is_optional:false},{type:"node_in",name:"jm",qualifier:["float"],is_optional:false},{type:"node_in",name:"jn",qualifier:["float"],is_optional:false},{type:"node_in",name:"jo",qualifier:["float"],is_optional:false},{type:"node_out",name:"jp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jq",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jp","[","0","]","=","jp","[","1","]","=","jp","[","2","]","=","ZERO_VALUE_NODES",";","jq","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["ji",";","jj",";","jk",";","jl",";","jm",";","jn",";","jo",";"]}]},{type:"node",name:"TEX_GRADIENT",declarations:[{type:"node_in",name:"jr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"js",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jt",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["js","[","0","]","=","js","[","1","]","=","js","[","2","]","=","ZERO_VALUE_NODES",";","jt","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["jr",";"]}]},{type:"node",name:"TEX_MAGIC",declarations:[{type:"node_in",name:"ju",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jv",qualifier:["float"],is_optional:false},{type:"node_in",name:"jw",qualifier:["float"],is_optional:false},{type:"node_out",name:"jx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jy",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jx","[","0","]","=","jx","[","1","]","=","jx","[","2","]","=","ZERO_VALUE_NODES",";","jy","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["ju",";","jv",";","jw",";"]}]},{type:"node",name:"TEX_CHECKER",declarations:[{type:"node_in",name:"jz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jC",qualifier:["float"],is_optional:false},{type:"node_out",name:"jD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jE",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jD","[","0","]","=","jD","[","1","]","=","jD","[","2","]","=","ZERO_VALUE_NODES",";","jE","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["jz",";","jA",";","jB",";","jC",";"]}]},{type:"node",name:"TEX_BRICK",declarations:[{type:"node_in",name:"jF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"jK",qualifier:["float"],is_optional:false},{type:"node_in",name:"jL",qualifier:["float"],is_optional:false},{type:"node_in",name:"jM",qualifier:["float"],is_optional:false},{type:"node_in",name:"jN",qualifier:["float"],is_optional:false},{type:"node_out",name:"jO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jO","[","0","]","=","jO","[","1","]","=","jO","[","2","]","=","ZERO_VALUE_NODES",";","jP","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["jF",";","jG",";","jH",";","jI",";","jJ",";","jK",";","jL",";","jM",";","jN",";"]}]},{type:"node",name:"ADD_SHADER",declarations:[{type:"node_in",name:"jQ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jS","=","clamp","(","jQ","+","jR",",","eN",",","eO",")",";"]}]},{type:"node",name:"MIX_SHADER",declarations:[{type:"node_in",name:"jT",qualifier:["float"],is_optional:false},{type:"node_in",name:"jU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","jX","=","clamp","(","jT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","jW","=","jX","*","jU","+","(","UNITY_VALUE_NODES","-","jX",")","*","jV",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_out",name:"jY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jZ",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"fn",qualifier:["varying","vec2"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jY"],statements:[{type:"textline",tokens:["jY","=","fe","(","fn",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jZ"],statements:[{type:"textline",tokens:["jZ","=","vec3","(","fn",",","ZERO_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_out",name:"j_",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"fo",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["j_","=","vec3","(","fo",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_NO",declarations:[{type:"node_out",name:"ka",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ka","=","fC",";"]}]},{type:"node",name:"TEX_COORD_GE",declarations:[{type:"node_out",name:"kb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kb","=","eL",";"]}]},{type:"node",name:"TEX_COORD_OB",declarations:[{type:"node_out",name:"kc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kc","[","0","]","=","kc","[","1","]","=","kc","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_CA",declarations:[{type:"node_out",name:"kd",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kd","[","0","]","=","fI","[","0","]",";","kd","[","1","]","=","fI","[","1","]",";","kd","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_WI",declarations:[{type:"node_out",name:"ke",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ke","[","0","]","=","ke","[","1","]","=","ke","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_RE",declarations:[{type:"node_out",name:"kf",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kf","[","0","]","=","kf","[","1","]","=","kf","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_out",name:"kg",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"fp",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["kg","=","vec3","(","fp",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_out",name:"kh",qualifier:["float"],is_optional:false},{type:"node_out",name:"ki",qualifier:["float"],is_optional:false},{type:"node_out",name:"kj",qualifier:["float"],is_optional:false},{type:"node_out",name:"kk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kl",qualifier:["float"],is_optional:false},{type:"node_out",name:"km",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kn",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kh","=","ZERO_VALUE_NODES",";","ki","=","ZERO_VALUE_NODES",";","kj","=","ZERO_VALUE_NODES",";","kk","=","vec3","(","ZERO_VALUE_NODES",")",";","kl","=","ZERO_VALUE_NODES",";","km","=","kk",";","kn","=","kk",";"]}]},{type:"node",name:"HAIR_INFO",declarations:[{type:"node_out",name:"ko",qualifier:["float"],is_optional:false},{type:"node_out",name:"kp",qualifier:["float"],is_optional:false},{type:"node_out",name:"kq",qualifier:["float"],is_optional:false},{type:"node_out",name:"kr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ko","=","ZERO_VALUE_NODES",";","kp","=","ZERO_VALUE_NODES",";","kq","=","ZERO_VALUE_NODES",";","kr","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"OBJECT_INFO",declarations:[{type:"node_out",name:"ks",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kt",qualifier:["float"],is_optional:false},{type:"node_out",name:"ku",qualifier:["float"],is_optional:false},{type:"node_out",name:"kv",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kt","=","ZERO_VALUE_NODES",";","ku","=","ZERO_VALUE_NODES",";","kv","=","ZERO_VALUE_NODES",";","ks","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"WIREFRAME",declarations:[{type:"node_in",name:"kw",qualifier:["float"],is_optional:false},{type:"node_out",name:"kx",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kx","=","kw",";"]}]},{type:"node",name:"TANGENT",declarations:[{type:"node_out",name:"ky",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ky","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LAYER_WEIGHT",declarations:[{type:"node_in",name:"kz",qualifier:["float"],is_optional:false},{type:"node_in",name:"kA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kB",qualifier:["float"],is_optional:false},{type:"node_out",name:"kC",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kB","=","kC","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["kA",";","kz",";"]}]},{type:"node",name:"LIGHT_PATH",declarations:[{type:"node_out",name:"kD",qualifier:["float"],is_optional:false},{type:"node_out",name:"kE",qualifier:["float"],is_optional:false},{type:"node_out",name:"kF",qualifier:["float"],is_optional:false},{type:"node_out",name:"kG",qualifier:["float"],is_optional:false},{type:"node_out",name:"kH",qualifier:["float"],is_optional:false},{type:"node_out",name:"kI",qualifier:["float"],is_optional:false},{type:"node_out",name:"kJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"kK",qualifier:["float"],is_optional:false},{type:"node_out",name:"kL",qualifier:["float"],is_optional:false},{type:"node_out",name:"kM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kD","=","kE","=","kF","=","ZERO_VALUE_NODES",";","kG","=","kH","=","kI","=","ZERO_VALUE_NODES",";","kJ","=","kJ","=","kL","=","kM","=","ZERO_VALUE_NODES",";","kK","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"ATTRIBUTE",declarations:[{type:"node_out",name:"kN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kN","=","kO","=","vec3","(","ZERO_VALUE_NODES",")",";","kP","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"SCRIPT",declarations:[],statements:[]},{type:"node",name:"CURVE_VEC",declarations:[{type:"node_in",name:"kQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"kR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kS","=","kR",";"]},{type:"textline",tokens:["kQ",";"]}]},{type:"node",name:"CURVE_RGB",declarations:[{type:"node_in",name:"kT",qualifier:["float"],is_optional:false},{type:"node_in",name:"kU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kV",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kV","=","kU",";"]},{type:"textline",tokens:["kT",";"]}]},{type:"node",name:"VALTORGB",declarations:[{type:"node_in",name:"kW",qualifier:["float"],is_optional:false},{type:"node_out",name:"kX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kX","[","0","]","=","kX","[","1","]","=","kX","[","2","]","=","clamp","(","kW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","kY","=","kX","[","0","]",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"kZ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"k_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["k_","=","kZ",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["k_","=","(","MAPPING_TRS_MATRIX","*","vec4","(","k_",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["k_","=","k_","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["k_","=","k_","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["k_","=","max","(","k_",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["k_","=","min","(","k_",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["k_","=","normalize","(","k_",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"la",qualifier:["float"],is_optional:false},{type:"node_in",name:"lb",qualifier:["float"],is_optional:false},{type:"node_out",name:"lc",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lc","=","la","+","lb",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lc","=","clamp","(","lc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"ld",qualifier:["float"],is_optional:false},{type:"node_in",name:"le",qualifier:["float"],is_optional:false},{type:"node_out",name:"lf",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lf","=","ld","-","le",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lf","=","clamp","(","lf",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"lg",qualifier:["float"],is_optional:false},{type:"node_in",name:"lh",qualifier:["float"],is_optional:false},{type:"node_out",name:"li",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["li","=","lg","*","lh",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["li","=","clamp","(","li",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"lj",qualifier:["float"],is_optional:false},{type:"node_in",name:"lk",qualifier:["float"],is_optional:false},{type:"node_out",name:"ll",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ll","=","(","lk","!=","ZERO_VALUE_NODES",")","?","lj","/","lk",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ll","=","clamp","(","ll",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"lm",qualifier:["float"],is_optional:false},{type:"node_in",name:"ln",qualifier:["float"],is_optional:false},{type:"node_out",name:"lo",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lo","=","sin","(","lm",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lo","=","clamp","(","lo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["ln",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"lp",qualifier:["float"],is_optional:false},{type:"node_in",name:"lq",qualifier:["float"],is_optional:false},{type:"node_out",name:"lr",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lr","=","cos","(","lp",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lr","=","clamp","(","lr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["lq",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"ls",qualifier:["float"],is_optional:false},{type:"node_in",name:"lt",qualifier:["float"],is_optional:false},{type:"node_out",name:"lu",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lu","=","tan","(","ls",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lu","=","clamp","(","lu",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["lt",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"lv",qualifier:["float"],is_optional:false},{type:"node_in",name:"lw",qualifier:["float"],is_optional:false},{type:"node_out",name:"lx",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lx","=","(","lv","<=","UNITY_VALUE_NODES","&&","lv",">=","-","UNITY_VALUE_NODES",")","?","asin","(","lv",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lx","=","clamp","(","lx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["lw",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"ly",qualifier:["float"],is_optional:false},{type:"node_in",name:"lz",qualifier:["float"],is_optional:false},{type:"node_out",name:"lA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lA","=","(","ly","<=","UNITY_VALUE_NODES","&&","ly",">=","-","UNITY_VALUE_NODES",")","?","acos","(","ly",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lA","=","clamp","(","lA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["lz",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"lB",qualifier:["float"],is_optional:false},{type:"node_in",name:"lC",qualifier:["float"],is_optional:false},{type:"node_out",name:"lD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lD","=","atan","(","lB",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lD","=","clamp","(","lD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["lC",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"lE",qualifier:["float"],is_optional:false},{type:"node_in",name:"lF",qualifier:["float"],is_optional:false},{type:"node_out",name:"lG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","lE","<","ZERO_VALUE_NODES","||","lE","==","ZERO_VALUE_NODES","&&","lF","==","ZERO_VALUE_NODES",")","lG","=","ZERO_VALUE_NODES",";","else","lG","=","pow","(","lE",",","lF",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lG","=","clamp","(","lG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"lH",qualifier:["float"],is_optional:false},{type:"node_in",name:"lI",qualifier:["float"],is_optional:false},{type:"node_out",name:"lJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lJ","=","(","lH",">","ZERO_VALUE_NODES","&&","lI",">","ZERO_VALUE_NODES",")","?","log2","(","lH",")","/","log2","(","lI",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lJ","=","clamp","(","lJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"lK",qualifier:["float"],is_optional:false},{type:"node_in",name:"lL",qualifier:["float"],is_optional:false},{type:"node_out",name:"lM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lM","=","min","(","lK",",","lL",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lM","=","clamp","(","lM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"lN",qualifier:["float"],is_optional:false},{type:"node_in",name:"lO",qualifier:["float"],is_optional:false},{type:"node_out",name:"lP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lP","=","max","(","lN",",","lO",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lP","=","clamp","(","lP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"lQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"lR",qualifier:["float"],is_optional:false},{type:"node_out",name:"lS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lS","=","floor","(","lQ","+","0.5",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lS","=","clamp","(","lS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["lR",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"lT",qualifier:["float"],is_optional:false},{type:"node_in",name:"lU",qualifier:["float"],is_optional:false},{type:"node_out",name:"lV",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lV","=","(","lT","<","lU",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lV","=","clamp","(","lV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"lW",qualifier:["float"],is_optional:false},{type:"node_in",name:"lX",qualifier:["float"],is_optional:false},{type:"node_out",name:"lY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lY","=","(","lW",">","lX",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lY","=","clamp","(","lY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"lZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"l_",qualifier:["float"],is_optional:false},{type:"node_out",name:"ma",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ma","=","abs","(","l_",")",">","0.000001","?","mod","(","lZ",",","l_",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ma","=","clamp","(","ma",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"mb",qualifier:["float"],is_optional:false},{type:"node_in",name:"mc",qualifier:["float"],is_optional:false},{type:"node_out",name:"md",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["md","=","abs","(","mb",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["md","=","clamp","(","md",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["mc",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"me",qualifier:["float"],is_optional:false},{type:"node_in",name:"mf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mh",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","mi","=","clamp","(","me",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mh","=","mix","(","mf",",","mg",",","mi",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mh","=","clamp","(","mh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"mj",qualifier:["float"],is_optional:false},{type:"node_in",name:"mk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ml",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","mn","=","clamp","(","mj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mm","=","mix","(","mk",",","mk","+","ml",",","mn",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mm","=","clamp","(","mm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"mo",qualifier:["float"],is_optional:false},{type:"node_in",name:"mp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","ms","=","clamp","(","mo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mr","=","mix","(","mp",",","mp","*","mq",",","ms",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mr","=","clamp","(","mr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"mt",qualifier:["float"],is_optional:false},{type:"node_in",name:"mu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","mx","=","clamp","(","mt",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mw","=","mix","(","mu",",","mu","-","mv",",","mx",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mw","=","clamp","(","mw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"my",qualifier:["float"],is_optional:false},{type:"node_in",name:"mz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","mC","=","clamp","(","my",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","mD","=","UNITY_VALUE_NODES","-","mC",";","mB","=","eO","-","(","vec3","(","mD",")","+","mC","*","(","eO","-","mA",")",")","*","(","eO","-","mz",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mB","=","clamp","(","mB",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"mE",qualifier:["float"],is_optional:false},{type:"node_in",name:"mF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","mI","=","clamp","(","mE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","mJ","=","UNITY_VALUE_NODES","-","mI",";","mG","+=","step","(","mG",",","eN",")",";","mH","=","mJ","*","mF","+","mI","*","mF","/","mG",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mH","=","clamp","(","mH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"mK",qualifier:["float"],is_optional:false},{type:"node_in",name:"mL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","mO","=","clamp","(","mK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mN","=","mix","(","mL",",","abs","(","mL","-","mM",")",",","mO",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mN","=","clamp","(","mN",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"mP",qualifier:["float"],is_optional:false},{type:"node_in",name:"mQ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","mT","=","clamp","(","mP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mS","=","min","(","mQ",".","rgb",",","mR",".","rgb","*","mT",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mS","=","clamp","(","mS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"mU",qualifier:["float"],is_optional:false},{type:"node_in",name:"mV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","mY","=","clamp","(","mU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mX","=","max","(","mV",".","rgb",",","mW",".","rgb","*","mY",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mX","=","clamp","(","mX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"mZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"m_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"na",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","nc","=","clamp","(","mZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","nd","=","vec3","(","UNITY_VALUE_NODES","-","nc",")",";","nb","=","mix","(","m_","*","(","nd","+","2.0","*","nc","*","na",")",",","eO","-","(","nd","+","2.0","*","nc","*","(","eO","-","na",")",")","*","(","eO","-","m_",")",",","step","(","0.5",",","m_",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["nb","=","clamp","(","nb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"ne",qualifier:["float"],is_optional:false},{type:"node_in",name:"nf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ng",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nh",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","ni","=","clamp","(","ne",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","nj","=","eO","-","ni","*","ng",";","vec3","nk","=","clamp","(","nf","/","nj",",","0.0",",","1.0",")",";","nh","=","mix","(","mix","(","nk",",","eO",",","step","(","nj",",","eN",")",")",",","nf",",","step","(","nf",",","eN",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["nh","=","clamp","(","nh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"nl",qualifier:["float"],is_optional:false},{type:"node_in",name:"nm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"no",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","np","=","clamp","(","nl",",","0.0",",","1.0",")",";","vec3","nq","=","vec3","(","1.0","-","np",")",";","vec3","nr","=","nq","+","np","*","nn",";","vec3","ns","=","clamp","(","eO","-","(","eO","-","nm",")","/","nr",",","0.0",",","1.0",")",";","no","=","mix","(","ns",",","eN",",","step","(","nr",",","eN",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["no","=","clamp","(","no",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"nt",qualifier:["float"],is_optional:false},{type:"node_in",name:"nu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","nx","=","clamp","(","nt",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","ny",",","nz",",","nA",";","nw","=","nu",";","nz","=","eZ","(","nv",")",";","if","(","nz",".","y","!=","ZERO_VALUE_NODES",")","{","ny","=","eZ","(","nw",")",";","ny",".","x","=","nz",".","x",";","nA","=","fc","(","ny",")",";","nw","=","mix","(","nw",",","nA",",","nx",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["nw","=","clamp","(","nw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"nB",qualifier:["float"],is_optional:false},{type:"node_in",name:"nC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","nF","=","clamp","(","nB",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","nG","=","UNITY_VALUE_NODES","-","nF",";","nE","=","nC",";","vec3","nH",",","nI",";","nH","=","eZ","(","nE",")",";","if","(","nH",".","y","!=","ZERO_VALUE_NODES",")","{","nI","=","eZ","(","nD",")",";","nH",".","y","=","nG","*","nH",".","y","+","nF","*","nI",".","y",";","nE","=","fc","(","nH",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["nE","=","clamp","(","nE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"nJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"nK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","nN","=","clamp","(","nJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","nO","=","UNITY_VALUE_NODES","-","nN",";","vec3","nP",",","nQ",";","nP","=","eZ","(","nK",")",";","nQ","=","eZ","(","nL",")",";","nP",".","z","=","nO","*","nP",".","z","+","nN","*","nQ",".","z",";","nM","=","fc","(","nP",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["nM","=","clamp","(","nM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"nR",qualifier:["float"],is_optional:false},{type:"node_in",name:"nS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","nV","=","clamp","(","nR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","nW",",","nX",",","nY",";","nU","=","nS",";","nX","=","eZ","(","nT",")",";","if","(","nX",".","y","!=","ZERO_VALUE_NODES",")","{","nW","=","eZ","(","nU",")",";","nW",".","x","=","nX",".","x",";","nW",".","y","=","nX",".","y",";","nY","=","fc","(","nW",")",";","nU","=","mix","(","nU",",","nY",",","nV",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["nU","=","clamp","(","nU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"nZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"n_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ob",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","oc","=","clamp","(","nZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","od","=","UNITY_VALUE_NODES","-","oc",";","vec3","oe","=","oa","+","n_","-","oa","*","n_",";","ob","=","n_","*","(","vec3","(","od",")","+","vec3","(","oc",")","*","(","(","eO","-","n_",")","*","oa","+","oe",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["ob","=","clamp","(","ob",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"of",qualifier:["float"],is_optional:false},{type:"node_in",name:"og",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["float","oj","=","clamp","(","of",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oi","=","og","+","oj","*","(","2.0","*","oh","-","eO",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oi","=","clamp","(","oi",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"ok",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ol",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["fv","=","ok",";","fz","=","ol",";"]}]},{type:"node",name:"MATERIAL_BEGIN",declarations:[{type:"node_in",name:"om",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"on",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oo",qualifier:["float"],is_optional:false},{type:"node_in",name:"op",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"oq",qualifier:["float"],is_optional:true},{type:"node_out",name:"or",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"os",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ot",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ou",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ov",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ow",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ox",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"oy",qualifier:["float"],is_optional:false},{type:"node_param",name:"fq",qualifier:["const","vec2"]},{type:"node_param",name:"fr",qualifier:["const","vec3"]}],statements:[{type:"textline",tokens:["ot","=","clamp","(","om",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["ou","=","fr","[","0","]","*","clamp","(","on",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["ov","=","normalize","(","op",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["ov","=","fC",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["SHADELESS_MAT",{type:"logic_negative_expr",places:1},"NODES_GLOW",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"textline",tokens:["or","=","oq","*","ot",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["or","=","fJ","*","ot",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["ot","*=","oo",";"]}]}]},{type:"textline",tokens:["os","=","fK","*","u_environment_energy","*","ew","(","ov",")",";","oy","=","dY","(","ot",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],statements:[{type:"textline",tokens:["ow","=","vec2","(","fq","[","0","]",",","fq","[","1","]",")",";"]},{type:"textline",tokens:["ox","=","vec2","(","fr","[","1","]",",","fr","[","2","]",")",";"]}]}]},{type:"textline",tokens:["fy","=","oy",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["or","=","eN",";","os","=","eO",";"]}]}]}]},{type:"node",name:"MATERIAL_END",declarations:[{type:"node_in",name:"oz",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"oA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oC",qualifier:["float"],is_optional:true},{type:"node_in",name:"oD",qualifier:["float"],is_optional:true},{type:"node_in",name:"oE",qualifier:["float"],is_optional:true},{type:"node_out",name:"oF",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"oG",qualifier:["float"],is_optional:true},{type:"node_out",name:"oH",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"oI",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"oJ",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"fs",qualifier:["float"]},{type:"node_param",name:"ft",qualifier:["float"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oF"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["oF","=","oz",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["oF","=","eN",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT","REFLECTION_TYPE","REFL_NONE",{type:"non_equal_expr",places:2},{type:"logical_and_expr",places:2}],statements:[{type:"textline",tokens:["et","(","oF",",","fu",",","oB",",","oC",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["oF","+=","oA",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oH"],statements:[{type:"textline",tokens:["oH","=","oB",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oI"],statements:[{type:"textline",tokens:["oI","=","oz",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oJ"],statements:[{type:"textline",tokens:["oJ","=","oA",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oG"],statements:[{type:"textline",tokens:["oG","=","clamp","(","oE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["float","oK","=","max","(","max","(","oA",".","r",",","oA",".","g",")",",","oA",".","b",")","*","oD",";","oG","=","clamp","(","oE","*","(","UNITY_VALUE_NODES","-","oK",")","+","oK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]}]},{type:"node_else",statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oG"],statements:[{type:"textline",tokens:["oG","=","clamp","(","fs",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["float","oK","=","max","(","max","(","oA",".","r",",","oA",".","g",")",",","oA",".","b",")","*","ft",";","oG","=","fs","*","(","UNITY_VALUE_NODES","-","oK",")","+","oK",";"]}]}]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["fw","=","oA",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["fw","=","eN",";"]}]}]},{type:"textline",tokens:["fx","=","oB",";"]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"oL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oO",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"oP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oO","=","vec4","(","oL","+","oN","*","oM",",","ZERO_VALUE_NODES",")",";","oP","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"oQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"oR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oS",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"oT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oU",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["NODES_GLOW",{type:"logic_negative_expr",places:1},"NUM_LIGHTS",0,{type:"g_expr",places:2},{type:"logical_and_expr",places:2}],statements:[{type:"textline",tokens:["oS","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["oU","=","eM",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["oU","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["oT","=","u_light_color_intensities","[","LAMP_IND","]",";","if","(","LAMP_SHADOW_MAP_IND","!=","-","1",")","oT","*=","oQ",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["vec3","oV","=","u_light_positions","[","LAMP_IND","]",";","oR","=","oV","-","fH",";"]},{type:"textline",tokens:["float","oW","=","length","(","oR",")",";","oT","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","oW","*","oW",")",";","oR","=","normalize","(","oR",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["vec3","oX","=","u_light_directions","[","LAMP_IND","]",";","float","oY","=","dot","(","oR",",","oX",")",";","oY","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","oY","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","oT","*=","oY",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["oR","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"oZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"o_",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"pa",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pb",qualifier:["float"],is_optional:false},{type:"node_in",name:"pc",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"pd",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pd","=","ZERO_VALUE_NODES",";","if","(","o_",".","r","!=","ZERO_VALUE_NODES",")","{","float","pe","=","(","UNITY_VALUE_NODES","-","pb",")","*","dot","(","pa",",","oZ",")","+","pb",";","if","(","pc","[","0","]","==","ZERO_VALUE_NODES",")","{","pd","=","UNITY_VALUE_NODES",";","}","else","{","float","pf","=","UNITY_VALUE_NODES","+","abs","(","pe",")",";","pf","=","pc","[","1","]","+","(","UNITY_VALUE_NODES","-","pc","[","1","]",")","*","pow","(","pf",",","pc","[","0","]",")",";","pd","=","clamp","(","pf",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","pd","=","max","(","pd",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"pg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ph",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"pi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pj",qualifier:["float"],is_optional:false},{type:"node_out",name:"pk",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pk","=","ZERO_VALUE_NODES",";","if","(","ph",".","r","!=","ZERO_VALUE_NODES",")","{","float","pl","=","(","UNITY_VALUE_NODES","-","pj",")","*","dot","(","pi",",","pg",")","+","pj",";","pk","=","max","(","pl",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"pm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pn",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"po",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pp",qualifier:["float"],is_optional:false},{type:"node_in",name:"pq",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"pr",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pr","=","ZERO_VALUE_NODES",";","if","(","pn",".","r","!=","ZERO_VALUE_NODES",")","{","float","ps","=","(","UNITY_VALUE_NODES","-","pp",")","*","dot","(","po",",","pm",")","+","pp",";","if","(","pq","[","0","]",">","ZERO_VALUE_NODES",")","{","float","pt","=","max","(","dot","(","po",",","fu",")",",","ZERO_VALUE_NODES",")",";","float","pu","=","pq","[","0","]","*","pq","[","0","]",";","float","pv","=","UNITY_VALUE_NODES","-","eM","*","(","pu","/","(","pu","+","0.33",")",")",";","vec3","pw","=","pm","-","ps","*","po",";","vec3","px","=","fu","-","pt","*","po",";"]},{type:"textline",tokens:["if","(","length","(","pw",")","==","ZERO_VALUE_NODES","||","length","(","px",")","==","ZERO_VALUE_NODES","||","abs","(","ps",")",">","UNITY_VALUE_NODES","||","abs","(","pt",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["pr","=","ps","*","pv",";","else","{","float","py","=","acos","(","ps",")",";","float","pz","=","acos","(","pt",")",";","vec3","pA","=","normalize","(","pw",")",";","vec3","pB","=","normalize","(","px",")",";","float","pC",",","pD",";","pC","=","max","(","py",",","pz",")",";","pD","=","min","(","py",",","pz",")",";","pD","*=","0.95",";","float","pE","=","max","(","dot","(","pA",",","pB",")",",","ZERO_VALUE_NODES",")",";","float","pF","=","0.45","*","(","pu","/","(","pu","+","0.09",")",")",";","pr","=","ps","*","(","pv","+","(","pF","*","pE","*","sin","(","pC",")","*","tan","(","pD",")",")",")",";","}","}","else","pr","=","ps",";","pr","=","max","(","pr",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"pG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pH",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"pI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"pK",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"pL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pL","=","ZERO_VALUE_NODES",";","if","(","pH",".","r","!=","ZERO_VALUE_NODES",")","{","float","pM","=","(","UNITY_VALUE_NODES","-","pJ",")","*","dot","(","pI",",","pG",")","+","pJ",";","float","pN","=","max","(","dot","(","pI",",","fu",")",",","ZERO_VALUE_NODES",")",";","if","(","pK","[","0","]","<=","UNITY_VALUE_NODES",")","pL","=","pM","*","pow","(","max","(","pN","*","pM",",","0.1",")",",","pK","[","0","]","-","UNITY_VALUE_NODES",")",";","else","pL","=","pM","*","pow","(","1.0001","-","pN",",","pK","[","0","]","-","UNITY_VALUE_NODES",")",";","pL","=","max","(","pL",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"pO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pP",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"pQ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pR",qualifier:["float"],is_optional:false},{type:"node_in",name:"pS",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"pT",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pT","=","ZERO_VALUE_NODES",";","if","(","pP",".","r","!=","ZERO_VALUE_NODES",")","{","float","pU","=","(","UNITY_VALUE_NODES","-","pR",")","*","dot","(","pQ",",","pO",")","+","pR",";","float","pV","=","acos","(","pU",")",";","if","(","pV","<","pS","[","0","]",")","pT","=","UNITY_VALUE_NODES",";","else","if","(","pV",">","(","pS","[","0","]","+","pS","[","1","]",")","||","pS","[","1","]","==","ZERO_VALUE_NODES",")","pT","=","ZERO_VALUE_NODES",";","else","pT","=","UNITY_VALUE_NODES","-","(","(","pV","-","pS","[","0","]",")","/","pS","[","1","]",")",";","pT","=","max","(","pT",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"pW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pX",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"pY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"p_",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"qa",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qa","=","ZERO_VALUE_NODES",";","if","(","pX",".","g","==","UNITY_VALUE_NODES",")","{","vec3","qb","=","normalize","(","pW","+","fu",")",";","qa","=","(","UNITY_VALUE_NODES","-","pZ",")","*","max","(","dot","(","pY",",","qb",")",",","ZERO_VALUE_NODES",")","+","pZ",";","qa","=","pow","(","qa",",","p_","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"qc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qd",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"qe",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qf",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"qg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qg","=","ZERO_VALUE_NODES",";","if","(","qd",".","g","==","UNITY_VALUE_NODES",")","{","vec3","qh","=","normalize","(","qc","+","fu",")",";","float","qi","=","max","(","dot","(","qe",",","qh",")",",","0.001",")",";"]},{type:"textline",tokens:["float","qj","=","max","(","dot","(","qe",",","fu",")",",","0.01",")",";","float","qk","=","max","(","dot","(","qe",",","qc",")",",","0.01",")",";","float","ql","=","tan","(","acos","(","qi",")",")",";","float","qm","=","max","(","qf","[","0","]",",","0.001",")",";","qg","=","qk","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","qm","*","qm",")",")","*","(","exp","(","-","(","ql","*","ql",")","/","(","qm","*","qm",")",")","/","(","sqrt","(","qj","*","qk",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"qn",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qo",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"qp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qq",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"qr",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qr","=","ZERO_VALUE_NODES",";","if","(","qo",".","g","==","UNITY_VALUE_NODES",")","{","vec3","qs","=","normalize","(","qn","+","fu",")",";","float","qt","=","acos","(","dot","(","qs",",","qp",")",")",";","if","(","qt","<","qq","[","0","]",")","qr","=","UNITY_VALUE_NODES",";","else","if","(","qt",">=","qq","[","0","]","+","qq","[","1","]","||","qq","[","1","]","==","ZERO_VALUE_NODES",")","qr","=","ZERO_VALUE_NODES",";","else","qr","=","UNITY_VALUE_NODES","-","(","qt","-","qq","[","0","]",")","/","qq","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"qu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qv",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"qw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qx",qualifier:["float"],is_optional:false},{type:"node_in",name:"qy",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"qz",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qz","=","ZERO_VALUE_NODES",";","if","(","qv",".","g","==","UNITY_VALUE_NODES",")","{","if","(","qy","[","0","]","<","1.0","||","qy","[","1","]","==","ZERO_VALUE_NODES",")","qz","=","ZERO_VALUE_NODES",";","else","{","if","(","qy","[","1","]","<","100.0",")","qy","[","1","]","=","sqrt","(","1.0","/","qy","[","1","]",")",";","else","qy","[","1","]","=","10.0","/","qy","[","1","]",";","vec3","qA","=","normalize","(","fu","+","qu",")",";","float","qB","=","(","UNITY_VALUE_NODES","-","qx",")","*","max","(","dot","(","qw",",","qA",")",",","ZERO_VALUE_NODES",")","+","qx",";","if","(","qB","<","ZERO_VALUE_NODES",")","qz","=","ZERO_VALUE_NODES",";","else","{","float","qC","=","max","(","dot","(","qw",",","fu",")",",","0.01",")",";","float","qD","=","dot","(","qw",",","qu",")",";","if","(","qD","<=","0.01",")","qz","=","ZERO_VALUE_NODES",";","else","{","float","qE","=","max","(","dot","(","fu",",","qA",")",",","0.01",")",";","float","qF","=","UNITY_VALUE_NODES",";","float","qG","=","(","2.0","*","qB","*","qC",")","/","qE",";","float","qH","=","(","2.0","*","qB","*","qD",")","/","qE",";","float","qI","=","min","(","min","(","qF",",","qG",")",",","qH",")",";","float","qJ","=","sqrt","(","pow","(","qy","[","0","]",",","2.0",")","+","pow","(","qE",",","2.0",")","-","UNITY_VALUE_NODES",")",";","float","qK","=","pow","(","qJ","-","qE",",","2.0",")","/","pow","(","qJ","+","qE",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","qE","*","(","qJ","+","qE",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","qE","*","(","qJ","-","qE",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","float","qL","=","acos","(","qB",")",";","qz","=","max","(","qK","*","qI","*","exp","(","-","pow","(","qL",",","2.0",")","/","(","2.0","*","pow","(","qy","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"qM",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"qN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qO",qualifier:["float"],is_optional:false},{type:"node_in",name:"qP",qualifier:["float"],is_optional:false},{type:"node_in",name:"qQ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qS",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"qT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qW",qualifier:["float"],is_optional:false},{type:"node_out",name:"qX",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"qY",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_NODE_B4W_TRANSLUCENCY"],statements:[{type:"textline",tokens:["if","(","dot","(","qQ",",","qR",")","*","dot","(","fu",",","qR",")","<","ZERO_VALUE_NODES",")","{","float","qZ","=","qS",".","x",";","float","q_","=","qS",".","y",";","float","ra","=","qS",".","z",";","float","rb","=","qS",".","w",";"]},{type:"textline",tokens:["float","rc","=","clamp","(","abs","(","dot","(","qQ",",","qR",")",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","rd","=","clamp","(","dot","(","fu",",","-","qQ",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","re","=","pow","(","rd",",","q_",")",";"]},{type:"textline",tokens:["qX","=","qM","+","qW","*","vec4","(","qV","*","rc","*","pow","(","qT",",","vec3","(","qZ",")",")",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["qX","+=","ra","*","mix","(","vec4","(","qT",",","UNITY_VALUE_NODES",")",",","vec4","(","UNITY_VALUE_NODES",")",",","rb",")","*","qW","*","vec4","(","qV","*","rc","*","vec3","(","re",")",",","UNITY_VALUE_NODES",")",";","qY","=","qN",";","}","else","{"]},{type:"textline",tokens:["qY","=","qN","+","qV","*","qU","*","qP",";","qX","=","qM","+","vec4","(","qV","*","qT","*","qO",",","qP",")",";","}"]}]},{type:"node_else",statements:[{type:"textline",tokens:["qY","=","qN","+","qV","*","qU","*","qP",";","qX","=","qM","+","vec4","(","qV","*","qT","*","qO",",","qP",")",";"]}]}]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"rf",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rf","=","u_node_rgbs","[","RGB_IND","]",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"rg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rh",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["rh","=","dot","(","rg",",","vec3","(","0.35",",","0.45",",","0.2",")",")",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"ri",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rj",qualifier:["float"],is_optional:true},{type:"node_out",name:"rk",qualifier:["float"],is_optional:true},{type:"node_out",name:"rl",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rj"],statements:[{type:"textline",tokens:["rj","=","ri",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rk"],statements:[{type:"textline",tokens:["rk","=","ri",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rl"],statements:[{type:"textline",tokens:["rl","=","ri",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"rm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rn",qualifier:["float"],is_optional:true},{type:"node_out",name:"ro",qualifier:["float"],is_optional:true},{type:"node_out",name:"rp",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["vec3","rq","=","eZ","(","rm",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rn"],statements:[{type:"textline",tokens:["rn","=","rq",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ro"],statements:[{type:"textline",tokens:["ro","=","rq",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rp"],statements:[{type:"textline",tokens:["rp","=","rq",".","b",";"]}]}]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"rr",qualifier:["float"],is_optional:false},{type:"node_in",name:"rs",qualifier:["float"],is_optional:false},{type:"node_in",name:"rt",qualifier:["float"],is_optional:false},{type:"node_out",name:"ru",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ru","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","(","rr","-","rt",")","*","rs",")",")",")",";"]}]},{type:"node",name:"GAMMA",declarations:[{type:"node_in",name:"rv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"rw",qualifier:["float"],is_optional:false},{type:"node_out",name:"rx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rx","=","max","(","eN",",","rv",")",";","rx","=","pow","(","rx",",","vec3","(","rw",")",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"ry",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rz","=","max","(","eN",",","ry",")",";","rz","=","pow","(","rz",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"rA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rB","=","max","(","eN",",","rA",")",";","rB","=","pow","(","rB",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_EMPTY",declarations:[{type:"node_out",name:"rC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rE",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rE"],statements:[{type:"textline",tokens:["rC","[","2","]","=","rC","[","1","]","=","rC","[","0","]","=","0.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rE"],statements:[{type:"textline",tokens:["rD","[","2","]","=","rD","[","1","]","=","rD","[","0","]","=","0.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rE"],statements:[{type:"textline",tokens:["rE","=","0.0",";"]}]}]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"rF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rG",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rH",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]}],statements:[{type:"textline",tokens:["vec4","rI","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","rF",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rG"],statements:[{type:"textline",tokens:["rG","=","rI",".","xyz",";","a_","(","rG",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rH"],statements:[{type:"textline",tokens:["rH","=","rI",".","w",";"]}]}]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"rJ",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"rK",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"rL",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"rM",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rN",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rO",qualifier:["float"],is_optional:true},{type:"node_out",name:"rP",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rQ",qualifier:["float"],is_optional:true},{type:"node_out",name:"rR",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rS",qualifier:["float"],is_optional:true},{type:"node_out",name:"rT",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rU",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["vec4","rV","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","fg","(","rJ",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rN"],statements:[{type:"textline",tokens:["rN","=","rV",".","xyz",";","a_","(","rN",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rO"],statements:[{type:"textline",tokens:["rO","=","rV",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["rV","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","fg","(","rK",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rP"],statements:[{type:"textline",tokens:["rP","=","rV",".","xyz",";","a_","(","rP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rQ"],statements:[{type:"textline",tokens:["rQ","=","rV",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["rV","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","fg","(","rL",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rR"],statements:[{type:"textline",tokens:["rR","=","rV",".","xyz",";","a_","(","rR",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rS"],statements:[{type:"textline",tokens:["rS","=","rV",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["rV","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","fg","(","rM",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rT"],statements:[{type:"textline",tokens:["rT","=","rV",".","xyz",";","a_","(","rT",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rU"],statements:[{type:"textline",tokens:["rU","=","rV",".","w",";"]}]}]}]}]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"rW",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"rX",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"rY",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"rZ",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"r_",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"sa",qualifier:["float"],is_optional:true},{type:"node_out",name:"sb",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"sc",qualifier:["float"],is_optional:true},{type:"node_out",name:"sd",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"se",qualifier:["float"],is_optional:true},{type:"node_out",name:"sf",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"sg",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["vec4","sh","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","fg","(","rW",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_r_"],statements:[{type:"textline",tokens:["r_","=","normalize","(","fG","*","(","sh",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sa"],statements:[{type:"textline",tokens:["sa","=","sh",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["sh","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","fg","(","rX",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sb"],statements:[{type:"textline",tokens:["sb","=","normalize","(","fG","*","(","sh",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sc"],statements:[{type:"textline",tokens:["sc","=","sh",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["sh","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","fg","(","rY",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sd"],statements:[{type:"textline",tokens:["sd","=","normalize","(","fG","*","(","sh",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_se"],statements:[{type:"textline",tokens:["se","=","sh",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["sh","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","fg","(","rZ",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sf"],statements:[{type:"textline",tokens:["sf","=","normalize","(","fG","*","(","sh",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sg"],statements:[{type:"textline",tokens:["sg","=","sh",".","w",";"]}]}]}]}]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"si",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["si","=","u_node_values","[","VALUE_IND","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"sj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sm",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["sl","=","sj","+","sk",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sm"],statements:[{type:"textline",tokens:["sm","=","(","abs","(","sl","[","0","]",")","+","abs","(","sl","[","1","]",")","+","abs","(","sl","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"sn",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"so",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sq",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["sp","=","sn","-","so",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sq"],statements:[{type:"textline",tokens:["sq","=","(","abs","(","sp","[","0","]",")","+","abs","(","sp","[","1","]",")","+","abs","(","sp","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"sr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ss",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"st",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"su",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["st","=","sr","+","ss",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_su"],statements:[{type:"textline",tokens:["su","=","length","(","st",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_st"],statements:[{type:"textline",tokens:["st","=","normalize","(","st",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"sv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sy",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["sx","=","eN",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sy"],statements:[{type:"textline",tokens:["sy","=","dot","(","sv",",","sw",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"sz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sC",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["sB","=","cross","(","sz",",","sA",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sC"],statements:[{type:"textline",tokens:["sC","=","length","(","sB",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"sD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sG",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["sF","=","normalize","(","sD",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sG"],statements:[{type:"textline",tokens:["sG","=","length","(","sD",")",";"]}]}]},{type:"textline",tokens:["sE",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"sH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["sJ","=","reflect","(","-","sH",",","sI",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"sK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sL",qualifier:["float"],is_optional:false},{type:"node_in",name:"sM",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"sN",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"sO",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["float","sP","=","length","(","fI",")",";","if","(","sP","<","sN",")","{","vec2","sQ","=","fg","(","sK",")",";","float","sR","=","clamp","(","0.5","*","(","sN","-","sP",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","sS","=","sL","*","sR",";"]},{type:"textline",tokens:["vec3","sT","=","normalize","(","fu","*","fG",")",";"]},{type:"textline",tokens:["float","sU","=","UNITY_VALUE_NODES","/","sM",";"]},{type:"textline",tokens:["vec2","sV","=","sT",".","xy","*","sS","/","(","sM","*","sT",".","z",")",";","float","sW","=","UNITY_VALUE_NODES",";","float","sX","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","sQ",")",".","a",";"]},{type:"textline",tokens:["for","(","float","sY","=","1.0",";","sY","<=","sM",";","sY","++",")","{","if","(","sX","<","sW",")","{","sW","-=","sU",";","sQ","-=","sV",";","sX","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","sQ",")",".","a",";","}","}"]},{type:"textline",tokens:["vec2","sZ","=","sQ","+","sV",";","float","s_","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","sZ",")",".","a","-","(","sW","+","sU",")",";","float","ta","=","sX","-","sW",";","float","tb","=","ta","/","(","ta","-","s_",")",";"]},{type:"textline",tokens:["sQ","=","tb","*","sZ","+","(","UNITY_VALUE_NODES","-","tb",")","*","sQ",";","sO","=","fe","(","sQ",")",";","}","else","sO","=","sK",";"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"tc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"td",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["td","=","clamp","(","tc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"te",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tf",qualifier:["float"],is_optional:false},{type:"node_out",name:"tg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["tg","=","eS","(","te",",","tf",")",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"th",qualifier:["float"],is_optional:false},{type:"node_in",name:"ti",qualifier:["float"],is_optional:false},{type:"node_in",name:"tj",qualifier:["float"],is_optional:false},{type:"node_in",name:"tk",qualifier:["float"],is_optional:false},{type:"node_in",name:"tl",qualifier:["float"],is_optional:false},{type:"node_out",name:"tm",qualifier:["float"],is_optional:true},{type:"node_out",name:"tn",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_tm"],statements:[{type:"textline",tokens:["tm","=","th",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_tn"],statements:[{type:"textline",tokens:["tn","=","vec4","(","ti",",","tj",",","tk",",","tl",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"to",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["to","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"tp",qualifier:["float"],is_optional:false},{type:"node_in",name:"tq",qualifier:["float"],is_optional:false},{type:"node_in",name:"tr",qualifier:["float"],is_optional:false},{type:"node_out",name:"ts",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ts","=","smoothstep","(","tq",",","tr",",","tp",")",";"]}]},{type:"node",name:"B4W_GLOW_OUTPUT",declarations:[{type:"node_in",name:"tt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tu",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["fv","=","tt",";","fz","=","tu",";"]}]},{type:"node",name:"B4W_VECTOSCAL",declarations:[{type:"node_in",name:"tv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tw",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["tw","=","(","tv",".","r","+","tv",".","g","+","tv",".","b",")","/","3.0",";"]}]},{type:"node",name:"B4W_SCALTOVEC",declarations:[{type:"node_in",name:"tx",qualifier:["float"],is_optional:false},{type:"node_out",name:"ty",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ty","[","0","]","=","tx",";","ty","[","1","]","=","tx",";","ty","[","2","]","=","tx",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","tz","(","in","vec3","fu",",","out","vec3","fv",",","out","vec3","fw",",","out","vec3","fx",",","out","float","fy",",","out","float","fz",")","{","fv","=","eN",";","fw","=","eN",";","fx","=","eN",";","fy","=","ZERO_VALUE_NODES",";","fz","=","ZERO_VALUE_NODES",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fA","=","normalize","(","bS",")",";","vec3","fB","=","fA",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","fB","=","fB",";","else","fB","=","-","fB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fC","=","fB",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","fC","=","fA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fD","=","fB",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fE","=","cross","(","fB",",","bT",".","xyz",")","*","bT",".","w",";","mat3","fF","=","mat3","(","bT",".","xyz",",","fE",",","fB",")",";","mat3","fG","=","fF",";"]}]}}]},{type:"textline",tokens:["vec3","fH","=","bQ",";","vec4","fI","=","bR",";","float","fJ","=","u_emit",";","float","fK","=","u_ambient",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","tA","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","tG","(","vec3","tB",",","mat4","tC",")","{","vec3","tD","=","vec3","(","tC","[","0","]","[","0","]",",","tC","[","1","]","[","0","]",",","tC","[","2","]","[","0","]",")",";","vec3","tE","=","vec3","(","tC","[","0","]","[","1","]",",","tC","[","1","]","[","1","]",",","tC","[","2","]","[","1","]",")",";","vec3","tF","=","vec3","(","tC","[","0","]","[","2","]",",","tC","[","1","]","[","2","]",",","tC","[","2","]","[","2","]",")",";","tE","=","cross","(","tF",",","tD",")",";","tD","=","normalize","(","tD",")",";","tE","=","normalize","(","tE",")",";","tF","=","normalize","(","tF",")",";","return","mat4","(","vec4","(","tD",",","0.0",")",",","vec4","(","tE",",","0.0",")",",","vec4","(","tF",",","0.0",")",",","vec4","(","tB",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","tM","(","vec3","tH",",","vec3","tI",")","{","vec3","tJ","=","tH","-","tI",";","tJ",".","y","=","0.0",";","vec3","tK","=","cross","(","tA",",","tJ",")",";","vec3","tL","=","cross","(","tJ",",","tK",")",";","tK","=","normalize","(","tK",")",";","tL","=","normalize","(","tL",")",";","tJ","=","normalize","(","tJ",")",";","return","mat4","(","vec4","(","tK",",","0.0",")",",","vec4","(","tL",",","0.0",")",",","vec4","(","tJ",",","0.0",")",",","vec4","(","tI",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","tW","(","in","vec3","tN",",","float","tO",",","float","tP",",","float","tQ",",","vec3","tR",")","{","float","tS","=","fract","(","length","(","tR",")","/","0.17",")",";","float","tT","=","tQ","+","tS","/","10.0",";","float","tU","=","tS",";","if","(","tQ","!=","0.0",")","tU","/=","tQ",";","tN","*=","1.0","+","0.5","*","sin","(","tO",")",";","float","tV","=","length","(","tN",")","*","tP","*","sin","(","2.0","*","3.14","*","tO","*","tT","+","tU",")",";","return","bH","(","tV",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","ug","(","in","vec3","tX",",","in","vec3","tY",",","in","mat4","tZ",")","{"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","t_","=","tG","(","tY",",","tZ",")",";"]}]}},{type:"elif",expression:["BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["float","ua","=","fract","(","(","tY",".","x","*","1.43","+","tY",".","y","*","0.123","+","tY",".","z","*","6.1",")",")",";","float","ub","=","2.0","*","M_PI","*","ua",";","vec3","uc","=","normalize","(","vec3","(","tZ","[","0","]","[","2","]",",","0.0",",","tZ","[","2","]","[","2","]",")",")",";","float","ud","=","acos","(","uc","[","2","]",")",";","if","(","uc","[","0","]","<","0.0",")","ud","=","2.0","*","M_PI","-","ud",";","float","ue","=","ud","-","ub",";","if","(","ue","<","0.0",")","ue","=","2.0","*","M_PI","+","ue",";","float","uf","=","ub",";","if","(","ue","<=","MAX_BILLBOARD_ANGLE",")","uf","+=","ue",";","else","if","(","ue","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","uf","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","ue","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","ue","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","uf","+=","ue","-","M_PI",";","else","if","(","ue","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","uf","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","ue","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","uf","+=","ue","-","2.0","*","M_PI",";","mat4","t_","=","bF","(","uf",")",";","t_","[","3","]","=","vec4","(","tY",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","t_","=","tM","(","tX",",","tY",")",";"]}]}}]},{type:"textline",tokens:["return","t_",";","}"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","um","(","in","vec3","uh",",","in","vec3","ui",",","in","mat4","uj",",","mat4","uk",")","{","mat4","ul","=","ug","(","uh",",","ui",",","uj",")",";","uk","[","3","]","=","vec4","(","0.0",",","0.0",",","0.0",",","1.0",")",";","ul","=","ul","*","uk",";","return","ul",";","}"]}]}}]},{type:"textline",tokens:["bh","ut","(","in","vec3","un",",","in","vec3","uo",",","in","vec3","up",",","in","vec3","uq",",","in","vec3","ur",",","in","mat4","us",")","{","un","=","(","us","*","vec4","(","un",",","1.0",")",")",".","xyz",";","uo","=","(","us","*","vec4","(","uo",",","1.0",")",")",".","xyz",";","up","=","(","us","*","vec4","(","up",",","0.0",")",")",".","xyz",";","uq","=","(","us","*","vec4","(","uq",",","0.0",")",")",".","xyz",";","ur","=","(","us","*","vec4","(","ur",",","0.0",")",")",".","xyz",";","return","bJ","(","bh","(","un",",","uo",",","up",",","uq",",","ur",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","uw","(","vec2","uu",",","vec3","uv",")","{","return","(","uu","+","0.5",")","*","uv",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","uF","(","in","vec4","ux",",","in","vec4","uy",",","in","float","uz",")","{","float","uA","=","ux","[","0","]","*","uy","[","0","]","+","ux","[","1","]","*","uy","[","1","]","+","ux","[","2","]","*","uy","[","2","]","+","ux","[","3","]","*","uy","[","3","]",";","if","(","uA","<","0.0",")","{","uy","*=","-","1.0",";","uA","=","-","uA",";","}","if","(","abs","(","uA",")",">=","1.0",")","return","ux",";","float","uB","=","acos","(","uA",")",";","float","uC","=","sqrt","(","1.0","-","uA","*","uA",")",";","if","(","abs","(","uC",")","<","0.001",")","return","vec4","(","ux","*","0.5","+","uy","*","0.5",")",";","float","uD","=","sin","(","(","1.0","-","uz",")","*","uB",")","/","uC",";","float","uE","=","sin","(","uz","*","uB",")","/","uC",";","return","ux","*","uD","+","uy","*","uE",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","uV","(","in","vec3","uG",",","in","vec4","uH",",","in","vec4","uI",",","in","vec4","uJ",",","in","vec4","uK",",","in","float","uL",")","{","vec3","uM","=","bu","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","uG",",","1.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","uN","=","uF","(","uH",",","uI",",","uL",")",";","vec4","uO","=","mix","(","uJ",",","uK",",","uL",")",";","vec3","uP","=","bn","(","uN",",","uM",")",";","vec3","uQ","=","uP","*","uO",".","w","+","uO",".","xyz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","uR","=","bn","(","uH",",","uM",")",";","vec3","uS","=","bn","(","uI",",","uM",")",";","vec3","uT","=","uR","*","uJ",".","w","+","uJ",".","xyz",";","vec3","uU","=","uS","*","uK",".","w","+","uK",".","xyz",";","vec3","uQ","=","mix","(","uT",",","uU",",","uL",")",";"]}]}}]},{type:"textline",tokens:["return","bA","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","uQ",",","1.0",")",")",";","}","vec3","ve","(","in","vec3","uW",",","in","vec4","uX",",","in","vec4","uY",",","in","float","uZ",")","{","vec3","u_","=","bu","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","uW",",","0.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","va","=","uF","(","uX",",","uY",",","uZ",")",";","vec3","vb","=","bn","(","va",",","u_",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","vc","=","bn","(","uX",",","u_",")",";","vec3","vd","=","bn","(","uY",",","u_",")",";","vec3","vb","=","mix","(","vc",",","vd",",","uZ",")",";"]}]}}]},{type:"textline",tokens:["return","bA","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","vb",",","0.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","uV","(","in","vec3","vf",",","in","vec4","vg",",","in","vec4","vh",")","{","vec3","vi","=","bu","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","vf",",","1.0",")",")",";","vec3","vj","=","bn","(","vg",",","vi",")",";","vec3","vk","=","vj","*","vh",".","w","+","vh",".","xyz",";","return","bA","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","vk",",","1.0",")",")",";","}","vec3","ve","(","in","vec3","vl",",","in","vec4","vm",")","{","vec3","vn","=","bu","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","vl",",","0.0",")",")",";","vec3","vo","=","bn","(","vm",",","vn",")",";","return","bA","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","vo",",","0.0",")",")",";","}"]}]}}]},{type:"textline",tokens:["void","vD","(","inout","vec3","vp",",","inout","vec3","vq",",","inout","vec3","vr",",","inout","vec3","vs",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["float","vt","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","vec3","vu","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","vv","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","vw","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","vx","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec4","vy","=","a_influence",";","for","(","int","vz","=","0",";","vz","<","4",";","vz","++",")","{","int","vA","=","int","(","vy","[","vz","]",")",";","float","vB","=","fract","(","vy","[","vz","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vu","+=","vB","*","uV","(","vp",",","u_quatsb","[","vA","]",",","u_quatsa","[","vA","]",",","u_transb","[","vA","]",",","u_transa","[","vA","]",",","vt",")",";","vv","+=","vB","*","ve","(","vq",",","u_quatsb","[","vA","]",",","u_quatsa","[","vA","]",",","vt",")",";","vw","+=","vB","*","ve","(","vr",",","u_quatsb","[","vA","]",",","u_quatsa","[","vA","]",",","vt",")",";","vx","+=","vB","*","ve","(","vs",",","u_quatsb","[","vA","]",",","u_quatsa","[","vA","]",",","vt",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vu","+=","vB","*","uV","(","vp",",","u_quatsb","[","vA","]",",","u_transb","[","vA","]",")",";","vv","+=","vB","*","ve","(","vq",",","u_quatsb","[","vA","]",")",";","vw","+=","vB","*","ve","(","vr",",","u_quatsb","[","vA","]",")",";","vx","+=","vB","*","ve","(","vs",",","u_quatsb","[","vA","]",")",";"]}]}}]},{type:"textline",tokens:["}","vp","=","vu",";","vq","=","vv",";","vr","=","vw",";","vs","=","vx",";","}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","int","vC","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","vC",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vp","=","uV","(","vp",",","u_quatsb","[","vC","]",",","u_quatsa","[","vC","]",",","u_transb","[","vC","]",",","u_transa","[","vC","]",",","vt",")",";","vq","=","ve","(","vq",",","u_quatsb","[","vC","]",",","u_quatsa","[","vC","]",",","vt",")",";","vr","=","ve","(","vr",",","u_quatsb","[","vC","]",",","u_quatsa","[","vC","]",",","vt",")",";","vs","=","ve","(","vs",",","u_quatsb","[","vC","]",",","u_quatsa","[","vC","]",",","vt",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vp","=","uV","(","vp",",","u_quatsb","[","vC","]",",","u_transb","[","vC","]",")",";","vq","=","ve","(","vq",",","u_quatsb","[","vC","]",")",";","vr","=","ve","(","vr",",","u_quatsb","[","vC","]",")",";","vs","=","ve","(","vs",",","u_quatsb","[","vC","]",")",";"]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","vS","(","inout","vec3","vE",",","in","vec3","vF",",","in","float","vG",",","in","float","vH",",","in","float","vI",",","in","vec3","vJ",",","in","float","vK",")","{","float","vL","=","length","(","vF",")",";","float","vM","=","vH","*","(","1.0","+","0.1","*","fract","(","vL",")",")",";","float","vN","=","vG","*","vK","*","(","1.0","+","sin","(","2.0","*","3.14","*","vI","*","vM","+","vL",")",")",";","float","vO","=","(","vE",".","y","-","vF",".","y",")","*","abs","(","vN",")",";","vO","+=","1.0",";","vO","*=","vO",";","vO","=","vO","*","vO","-","vO",";","vec3","vP","=","vE",";","vP",".","xz","+=","vJ",".","xz","*","vO","*","sign","(","vN",")",";","vec3","vQ","=","vP","-","vF",";","if","(","all","(","equal","(","vQ",",","vec3","(","0.0",")",")",")",")","vE","=","vF",";","else","{","float","vR","=","length","(","vE","-","vF",")",";","vE","=","vF","+","normalize","(","vQ",")","*","vR",";","}","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","vU","(","vec4","vT",")","{","return","vT","*","vT","*","(","3.0","-","2.0","*","vT",")",";","}","vec4","vW","(","vec4","vV",")","{","return","abs","(","fract","(","vV","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","vY","(","vec4","vX",")","{","return","vU","(","vW","(","vX",")",")",";","}","void","wo","(","inout","vec3","vZ",",","in","float","v_",",","in","vec3","wa",",","in","vec3","wb",",","in","vec3","wc",",","in","float","wd",",","in","float","we",",","in","float","wf",",","in","vec3","wg",")","{","float","wh",";","float","wi",";","float","wj",";","vec2","wk",";","vec4","wl",";","vec2","wm",";","vec3","wn",";","wh","=","dot","(","wc",",","vec3","(","1.0",")",")",";","wi","=","wh","+","wg",".","g",";","wj","=","dot","(","vZ",",","vec3","(","wg",".","g",")",")",";","wk","=","(","v_","+","vec2","(","wj",",","wi",")",")",";","wl","=","(","(","fract","(","(","wk",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","wb",")","*","wd",";","wl","=","vY","(","wl",")",";","wm","=","wl",".","xz","+","wl",".","yw",";","wm",".","y","=","0.5","-","wm",".","y",";","wn","=","wm",".","xyx","*","wg",".","rbr","*","vec3","(","we","*","wa",".","x",",","wf",",","we","*","wa",".","z",")",";","vZ","+=","wn",";","}"]}]}}]},{type:"textline",tokens:["void","wv","(","inout","vec3","wp",",","inout","vec3","wq",",","in","vec3","wr",")","{","vec3","ws","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","wt","=","wq",";","vec3","wu","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","wt","=","wp",";","vec3","wu","=","wq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["wo","(","wt",",","u_time",",","wr",",","ws",",","wu",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["vS","(","wt",",","wu",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","ws",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vS","(","wt",",","wu",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","ws",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["wp","+=","wt","-","wq",";","wq","=","wt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wp","=","wt",";","wq","=","wu",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/nodes.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_orco_tex_coord",";","varying","vec3","eL",";"]}]}}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_param",name:"node_TEX_COORD_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"fo",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["fo","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_param",name:"node_UV_MERGED_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"fn",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["fn","=","node_UV_MERGED_var_a_uv",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_param",name:"node_UVMAP_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"fp",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["fp","=","node_UVMAP_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"fh",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["fh","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"ww",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["ww","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"wx",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["wx","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"wy",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["wy","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"wz",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["wz","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","wA","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["eL","=","a_orco_tex_coord",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","wF","(","vec3","wB",",","float","wC",",","vec2","wD",")","{","vec2","wE","=","vec2","(","(","wB",".","x","-","wD",".","x",")","/","wC",",","-","(","wB",".","z","-","wD",".","y",")","/","wC",")",";","return","fract","(","wE",")",";","}","vec2","wJ","(","vec2","wG",",","float","wH",",","vec2","wI",")","{","return","vec2","(","wG",".","x","*","wH",",","-","wG",".","y","*","wH",")","+","wI",";","}","bh","wK","(",")","{","return","bh","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","bh","xp","(","vec3","wL",",","vec3","wM",",","vec3","wN",",","vec3","wO",",","vec3","wP",",","PRECISION","sampler2D","wQ",",","sampler2D","wR",",","vec3","wS",",","float","wT",",","vec3","wU",",","vec4","wV",",","mat4","wW",")","{","vec3","wX","=","bn","(","wV",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","float","wY","=","-","wX",".","x",";","float","wZ","=","-","wX",".","z",";","vec2","w_","=","vec2","(","wU",".","x","+","wT","*","(","-","1.0","-","wY",")","/","2.0",",","wU",".","z","+","wT","*","(","1.0","-","wZ",")","/","2.0",")",";","vec2","xa","=","wF","(","wP",",","wT",",","w_",")",";","float","xb","=","wT","/","2.0",";","vec2","xc","=","abs","(","wJ","(","xa","-","vec2","(","0.5",")",",","wT",",","vec2","(","0.0",")",")",")",";","float","xd","=","xb","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","xc",")",">","xd",")","return","wK","(",")",";","float","xe","=","wT","/","wS",".","z",";","vec2","xf","=","(","xa","-","vec2","(","0.5",")",")","*","xe","+","vec2","(","0.5",")",";","vec3","xg","=","wX","*","(","wT","/","wS",".","z","-","1.0",")","/","2.0",";","xf",".","x","+=","xg",".","x",";","xf",".","y","-=","xg",".","z",";","vec4","xh","=","texture2D","(","wR",",","xf",")",";","float","xi","=","xh",".","r",";","if","(","xi","<","u_scale_threshold",")","return","wK","(",")",";","float","xj","=","wS",".","y","-","wS",".","x",";","float","xk","=","wS",".","y","-","texture2D","(","wQ",",","xf",")",".","r","*","xj",";","vec2","xl","=","wL",".","xz","-","wP",".","xz",";","wP",".","xz","=","wJ","(","xa",",","wT",",","w_",")",";","wP",".","y","=","xk",";","wL",".","xz","=","wP",".","xz","+","xl",";","wL",".","y","*=","xi",";","wL",".","y","+=","xk",";","vec3","xm","=","xh",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["wL","-=","wP",";","mat4","xn","=","ug","(","wU",",","wP",",","wW",")",";","bh","xo","=","ut","(","wL",",","wP",",","wM",",","wN",",","wO",",","xn",")",";","xo",".","b","=","wP",";","xo",".","f","=","xm",";","return","bJ","(","xo",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","bJ","(","bh","(","wL",",","wP",",","wM",",","wN",",","wO",",","xm",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","xv","(","mat4","xq",",","vec4","xr",")","{","vec2","xs","=","(","xq","*","u_v_light_matrix","[","3","]",")",".","xy",";","float","xt","=","SHADOW_TEX_RES","/","2.0",";","xs","=","floor","(","xs","*","xt","+","0.5",")","/","xt","-","xs",";","vec4","xu","=","xq","*","xr",";","xu",".","xy","+=","xs",";","xu","=","u_b_light_matrix","*","xu",";","return","xu",";","}","void","xz","(","vec3","xw",",","vec3","xx",")","{","vec4","xy","=","u_v_light_matrix","*","vec4","(","xw","+","u_normal_offset","*","xx",",","1.0",")",";","bW","=","xv","(","u_p_light_matrix0",",","xy",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["bX","=","xv","(","u_p_light_matrix1",",","xy",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["bY","=","xv","(","u_p_light_matrix2",",","xy",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["bZ","=","xv","(","u_p_light_matrix3",",","xy",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","xK","(","inout","vec3","xD",",","in","float","xE",",","in","float","xF",",","in","vec4","xG",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","xH","=","clamp","(","(","xE","-","u_fog_params",".","z",")","/","u_fog_params",".","y",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOG_TYPE","QUADRATIC",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xH","*=","xH",";"]}]}},{type:"elif",expression:["FOG_TYPE","LINEAR",{type:"equal_expr",places:2}],group:{type:"group",parts:[]}},{type:"elif",expression:["FOG_TYPE","INVERSE_QUADRATIC",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xH","=","sqrt","(","xH",")",";"]}]}}]},{type:"textline",tokens:["if","(","u_fog_params",".","w",">","0.0",")","{","if","(","xF",">","u_fog_params",".","w",")","xH","=","0.0",";","else","if","(","xF",">","0.0",")","{","float","xI","=","(","u_fog_params",".","w","-","xF",")","/","u_fog_params",".","w",";","xH","*=","xI","*","xI",";","}","}","float","xJ","=","1.0","-","(","1.0","-","xH",")","*","(","1.0","-","u_fog_params",".","x",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","xJ","=","0.0",";"]}]}}]},{type:"textline",tokens:["xD","=","mix","(","xD",",","xG",".","rgb",",","xJ",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xR","(","in","mat4","xL",",","in","vec3","xM",")","{","vec3","xN","=","mix","(","xL","[","0","]",".","rgb",",","xL","[","1","]",".","rgb",",","max","(","sign","(","xM",".","x",")",",","0.0",")",")",";","vec3","xO","=","mix","(","xL","[","2","]",".","rgb",",","xL","[","3","]",".","rgb",",","max","(","sign","(","xM",".","z",")",",","0.0",")",")",";","vec3","xP","=","vec3","(","xL","[","0","]",".","a",",","xL","[","1","]",".","a",",","xL","[","2","]",".","a",")",";","vec3","xQ","=","mix","(","xN",",","xO",",","abs","(","xM",".","z",")",")",";","xQ","=","mix","(","xQ",",","xP",",","abs","(","xM",".","y",")",")",";","a_","(","xQ",")",";","return","xQ",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","xT","(","inout","float","xS",")","{","xS","-=","0.5",";","xS","=","4.0","*","(","xS","*","xS","*","xS",")","+","0.5",";","}","void","yi","(","inout","vec3","xU",",","in","float","xV",",","in","vec3","xW",",","in","float","xX",",","in","vec4","xY",",","in","vec4","xZ",",","in","float","x_",")","{","float","ya","=","xZ",".","w","*","xV",";","float","yb","=","exp","(","-","ya","*","ya",")",";","yb","=","clamp","(","yb",",","0.0",",","1.0",")",";","float","yc","=","max","(","xW",".","y",",","0.0",")",";","xV","=","max","(","xV","-","max","(","xX","/","yc",",","0.0",")",",","0.0",")",";","float","yd","=","xY",".","w","*","xV",";","float","ye","=","1.0","-","yd",";","ye","=","max","(","ye",",","0.0",")",";","xT","(","ye",")",";","ye","+=","max","(","x_","-","0.5",",","0.0",")",";","if","(","ye","<","yb",")","{","vec3","yf","=","vec3","(","0.0",",","0.02",",","0.05",")",";","vec3","yg","=","xY",".","rgb",";","xX","=","clamp","(","-","xX","*","0.03",",","0.0",",","0.8",")",";","vec3","yh","=","mix","(","yg",",","yf",",","min","(","yc",",","1.0",")",")",";","yh","=","mix","(","yh",",","vec3","(","0.0",")",",","xX",")",";","xU","=","mix","(","yh",",","xU",",","ye",")",";","}","if","(","ye",">=","yb",")","{","xU","=","mix","(","xZ",".","rgb",",","xU",",","yb",")",";","}","}","void","yp","(","inout","vec3","yj",",","in","float","yk",",","in","float","yl",")","{","float","ym","=","u_underwater_fog_color_density",".","w","*","yk",";","float","yn","=","1.0","-","ym",";","yn","=","clamp","(","yn",",","0.0",",","1.0",")",";","xT","(","yn",")",";","yl","=","clamp","(","-","yl","*","0.03",",","0.0",",","0.8",")",";","vec3","yo","=","mix","(","u_underwater_fog_color_density",".","rgb",",","vec3","(","0.0",")",",","yl",")",";","yj","=","mix","(","yo",",","yj",",","yn",")",";","}"]}]}}]},{type:"textline",tokens:["void","yw","(","inout","vec3","yq",",","float","yr",",","vec3","ys",",","float","yt",")","{"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","yu","=","xR","(","u_cube_fog",",","ys",")",";","vec4","yv","=","vec4","(","yu",",","u_fog_color_density",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","yv","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["yi","(","yq",",","yr",",","ys",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","yv",",","yt",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xK","(","yq",",","yr",",","bQ",".","y",",","yv",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/lighting_nodes.glslf"] = {type:"group",parts:[{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","yz","=","0.0",";","float","yA","=","1.0",";","float","yB","=","0.5",";","vec3","yC","=","vec3","(","yz",")",";"]},{type:"node",name:"LIGHTING_BEGIN",declarations:[{type:"node_out",name:"yR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"yS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"yT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"yU",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"yV",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"yW",qualifier:["vec2"],is_optional:true},{type:"node_out",name:"yX",qualifier:["vec2"],is_optional:true},{type:"node_out",name:"yY",qualifier:["float"],is_optional:true},{type:"node_out",name:"yZ",qualifier:["float"],is_optional:true},{type:"node_out",name:"y_",qualifier:["vec4"],is_optional:true}],statements:[{type:"textline",tokens:["yR","=","yD",";","yS","=","yE",";","yT","=","yF",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yU"],statements:[{type:"textline",tokens:["yU","=","yG",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yV"],statements:[{type:"textline",tokens:["yV","=","yI",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yX"],statements:[{type:"textline",tokens:["yX","=","yK",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yW"],statements:[{type:"textline",tokens:["yW","=","yL",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yY"],statements:[{type:"textline",tokens:["yY","=","yM",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yZ"],statements:[{type:"textline",tokens:["yZ","=","yN",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_y_"],statements:[{type:"textline",tokens:["y_","=","yO",";"]}]}]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"za",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zd",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"ze",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zd","=","vec4","(","za","+","zc","*","zb",",","yz",")",";","ze","=","yC",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"zf",qualifier:["float"],is_optional:false},{type:"node_out",name:"zg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zh",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"zi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zj",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["NODES_GLOW",{type:"logic_negative_expr",places:1},"NUM_LIGHTS",0,{type:"g_expr",places:2},{type:"logical_and_expr",places:2}],statements:[{type:"textline",tokens:["zh","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["zj","=","yB",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["zj","=","yz",";"]}]}]},{type:"textline",tokens:["zi","=","u_light_color_intensities","[","LAMP_IND","]",";","if","(","LAMP_SHADOW_MAP_IND","!=","-","1",")","zi","*=","zf",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["vec3","zk","=","u_light_positions","[","LAMP_IND","]",";","zg","=","zk","-","yH",";"]},{type:"textline",tokens:["float","zl","=","length","(","zg",")",";","zi","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","zl","*","zl",")",";","zg","=","normalize","(","zg",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["vec3","zm","=","u_light_directions","[","LAMP_IND","]",";","float","zn","=","dot","(","zg",",","zm",")",";","zn","*=","smoothstep","(","yz",",","yA",",","(","zn","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","zi","*=","zn",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["zg","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"zo",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zp",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"zq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zr",qualifier:["float"],is_optional:false},{type:"node_in",name:"zs",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"zt",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["zt","=","yz",";","if","(","zp",".","r","!=","yz",")","{","float","zu","=","(","yA","-","zr",")","*","dot","(","zq",",","zo",")","+","zr",";","if","(","zs","[","0","]","==","yz",")","{","zt","=","yA",";","}","else","{","float","zv","=","yA","+","abs","(","zu",")",";","zv","=","zs","[","1","]","+","(","yA","-","zs","[","1","]",")","*","pow","(","zv",",","zs","[","0","]",")",";","zt","=","clamp","(","zv",",","yz",",","yA",")",";","}","zt","=","max","(","zt",",","yz",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"zw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zx",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"zy",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zz",qualifier:["float"],is_optional:false},{type:"node_out",name:"zA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["zA","=","yz",";","if","(","zx",".","r","!=","yz",")","{","float","zB","=","(","yA","-","zz",")","*","dot","(","zy",",","zw",")","+","zz",";","zA","=","max","(","zB",",","yz",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"zC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zD",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"zE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zF",qualifier:["float"],is_optional:false},{type:"node_in",name:"zG",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"zH",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["zH","=","yz",";","if","(","zD",".","r","!=","yz",")","{","float","zI","=","(","yA","-","zF",")","*","dot","(","zE",",","zC",")","+","zF",";","if","(","zG","[","0","]",">","yz",")","{","float","zJ","=","max","(","dot","(","zE",",","yJ",")",",","yz",")",";","float","zK","=","zG","[","0","]","*","zG","[","0","]",";","float","zL","=","yA","-","yB","*","(","zK","/","(","zK","+","0.33",")",")",";","vec3","zM","=","zC","-","zI","*","zE",";","vec3","zN","=","yJ","-","zJ","*","zE",";"]},{type:"textline",tokens:["if","(","length","(","zM",")","==","yz","||","length","(","zN",")","==","yz","||","abs","(","zI",")",">","yA","||","abs","(","zJ",")",">","yA",")"]},{type:"textline",tokens:["zH","=","zI","*","zL",";","else","{","float","zO","=","acos","(","zI",")",";","float","zP","=","acos","(","zJ",")",";","vec3","zQ","=","normalize","(","zM",")",";","vec3","zR","=","normalize","(","zN",")",";","float","zS",",","zT",";","zS","=","max","(","zO",",","zP",")",";","zT","=","min","(","zO",",","zP",")",";","zT","*=","0.95",";","float","zU","=","max","(","dot","(","zQ",",","zR",")",",","yz",")",";","float","zV","=","0.45","*","(","zK","/","(","zK","+","0.09",")",")",";","zH","=","zI","*","(","zL","+","(","zV","*","zU","*","sin","(","zS",")","*","tan","(","zT",")",")",")",";","}","}","else","zH","=","zI",";","zH","=","max","(","zH",",","yz",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"zW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zX",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"zY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"z_",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Aa",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Aa","=","yz",";","if","(","zX",".","r","!=","yz",")","{","float","Ab","=","(","yA","-","zZ",")","*","dot","(","zY",",","zW",")","+","zZ",";","float","Ac","=","max","(","dot","(","zY",",","yJ",")",",","yz",")",";","if","(","z_","[","0","]","<=","yA",")","Aa","=","Ab","*","pow","(","max","(","Ac","*","Ab",",","0.1",")",",","z_","[","0","]","-","yA",")",";","else","Aa","=","Ab","*","pow","(","1.0001","-","Ac",",","z_","[","0","]","-","yA",")",";","Aa","=","max","(","Aa",",","yz",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"Ad",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ae",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Af",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ag",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ah",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Ai",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ai","=","yz",";","if","(","Ae",".","r","!=","yz",")","{","float","Aj","=","(","yA","-","Ag",")","*","dot","(","Af",",","Ad",")","+","Ag",";","float","Ak","=","acos","(","Aj",")",";","if","(","Ak","<","Ah","[","0","]",")","Ai","=","yA",";","else","if","(","Ak",">","(","Ah","[","0","]","+","Ah","[","1","]",")","||","Ah","[","1","]","==","yz",")","Ai","=","yz",";","else","Ai","=","yA","-","(","(","Ak","-","Ah","[","0","]",")","/","Ah","[","1","]",")",";","Ai","=","max","(","Ai",",","yz",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"Al",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Am",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"An",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ao",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ap",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Aq",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Aq","=","yz",";","if","(","Am",".","g","!=","yz",")","{","vec3","Ar","=","normalize","(","Al","+","yJ",")",";","Aq","=","(","yA","-","Ao",")","*","max","(","dot","(","An",",","Ar",")",",","yz",")","+","Ao",";","Aq","=","pow","(","Aq",",","Ap","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"As",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"At",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Au",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Av",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Aw",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Aw","=","yz",";","if","(","At",".","g","!=","yz",")","{","vec3","Ax","=","normalize","(","As","+","yJ",")",";","float","Ay","=","max","(","dot","(","Au",",","Ax",")",",","0.001",")",";"]},{type:"textline",tokens:["float","Az","=","max","(","dot","(","Au",",","yJ",")",",","0.01",")",";","float","AA","=","max","(","dot","(","Au",",","As",")",",","0.01",")",";","float","AB","=","tan","(","acos","(","Ay",")",")",";","float","AC","=","max","(","Av","[","0","]",",","0.001",")",";","Aw","=","AA","*","(","yA","/","(","4.0","*","M_PI","*","AC","*","AC",")",")","*","(","exp","(","-","(","AB","*","AB",")","/","(","AC","*","AC",")",")","/","(","sqrt","(","Az","*","AA",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"AD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AE",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"AF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AG",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"AH",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["AH","=","yz",";","if","(","AE",".","g","!=","yz",")","{","vec3","AI","=","normalize","(","AD","+","yJ",")",";","float","AJ","=","acos","(","dot","(","AI",",","AF",")",")",";","if","(","AJ","<","AG","[","0","]",")","AH","=","yA",";","else","if","(","AJ",">=","AG","[","0","]","+","AG","[","1","]","||","AG","[","1","]","==","yz",")","AH","=","yz",";","else","AH","=","yA","-","(","AJ","-","AG","[","0","]",")","/","AG","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"AK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AL",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"AM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AN",qualifier:["float"],is_optional:false},{type:"node_in",name:"AO",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"AP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["AP","=","yz",";","if","(","AL",".","g","!=","yz",")","{","if","(","AO","[","0","]","<","1.0","||","AO","[","1","]","==","yz",")","AP","=","yz",";","else","{","if","(","AO","[","1","]","<","100.0",")","AO","[","1","]","=","sqrt","(","1.0","/","AO","[","1","]",")",";","else","AO","[","1","]","=","10.0","/","AO","[","1","]",";","vec3","AQ","=","normalize","(","yJ","+","AK",")",";","float","AR","=","(","yA","-","AN",")","*","max","(","dot","(","AM",",","AQ",")",",","yz",")","+","AN",";","if","(","AR","<","yz",")","AP","=","yz",";","else","{","float","AS","=","max","(","dot","(","AM",",","yJ",")",",","0.01",")",";","float","AT","=","dot","(","AM",",","AK",")",";","if","(","AT","<=","0.01",")","AP","=","yz",";","else","{","float","AU","=","max","(","dot","(","yJ",",","AQ",")",",","0.01",")",";","float","AV","=","yA",";","float","AW","=","(","2.0","*","AR","*","AS",")","/","AU",";","float","AX","=","(","2.0","*","AR","*","AT",")","/","AU",";","float","AY","=","min","(","min","(","AV",",","AW",")",",","AX",")",";","float","AZ","=","sqrt","(","pow","(","AO","[","0","]",",","2.0",")","+","pow","(","AU",",","2.0",")","-","yA",")",";","float","A_","=","pow","(","AZ","-","AU",",","2.0",")","/","pow","(","AZ","+","AU",",","2.0",")","*","(","yA","+","pow","(","AU","*","(","AZ","+","AU",")","-","yA",",","2.0",")","/","pow","(","AU","*","(","AZ","-","AU",")","+","yA",",","2.0",")",")",";","float","Ba","=","acos","(","AR",")",";","AP","=","max","(","A_","*","AY","*","exp","(","-","pow","(","Ba",",","2.0",")","/","(","2.0","*","pow","(","AO","[","1","]",",","2.0",")",")",")",",","yz",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"Bb",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"Bc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Bd",qualifier:["float"],is_optional:false},{type:"node_in",name:"Be",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Bg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Bh",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"Bi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Bj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Bk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Bl",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bm",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"Bn",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Bn","=","Bc","+","Bk","*","Bj","*","Be",";","Bm","=","Bb","+","vec4","(","Bk","*","Bi","*","Bd",",","Be",")",";"]}]},{type:"node",name:"LIGHTING_END",declarations:[{type:"node_in",name:"Bo",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"Bp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yP","=","Bo",".","rgb",";","yQ","=","Bp",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","Bq","(","vec3","yD",",","vec3","yE",",","vec3","yF",",","vec3","yG",",","vec3","yH",",","vec3","yI",",","vec3","yJ",",","vec2","yK",",","vec2","yL",",","float","yM",",","float","yN",",","vec4","yO",",","out","vec3","yP",",","out","vec3","yQ",")","{"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","Bt","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","BA","(","inout","float","Bu",",","float","Bv",",","vec2","Bw",",","vec2","Bx",")","{","float","By","=","Bx",".","x","-","Bw",".","x",";","float","Bz","=","(","Bv","-","Bw",".","x",")","/","By",";","Bu","=","mix","(","Bu",",","Bx",".","y",",","clamp","(","Bz",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","BH","(","inout","vec3","BB",",","float","BC",",","vec4","BD",",","vec4","BE",")","{","float","BF","=","BE",".","x","-","BD",".","x",";","float","BG","=","(","BC","-","BD",".","x",")","/","BF",";","BB","=","mix","(","BB",",","BE",".","yzw",",","clamp","(","BG",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","BN","(","float","BI",",","float","BJ",",","vec2","BK","[","SIZE_RAMP_LENGTH","]",")","{","float","BL","=","BI","/","BJ",";","float","BM","=","BK","[","0","]",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["BA","(","BM",",","BL",",","BK","[","0","]",",","BK","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["BA","(","BM",",","BL",",","BK","[","1","]",",","BK","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["BA","(","BM",",","BL",",","BK","[","2","]",",","BK","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","BM",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","BT","(","float","BO",",","float","BP",",","vec4","BQ","[","COLOR_RAMP_LENGTH","]",")","{","float","BR","=","BO","/","BP",";","vec3","BS","=","BQ","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["BH","(","BS",",","BR",",","BQ","[","0","]",",","BQ","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["BH","(","BS",",","BR",",","BQ","[","1","]",",","BQ","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["BH","(","BS",",","BR",",","BQ","[","2","]",",","BQ","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","BS",";","}"]}]}}]},{type:"textline",tokens:["float","Cb","(","float","BU",",","float","BV",",","float","BW",",","float","BX",")","{","float","BY","=","max","(","0.01",",","min","(","BV",",","BW",")",")",";","float","BZ","=","max","(","0.01",",","min","(","BV",",","BX",")",")",";","float","B_","=","BV","-","BZ",";","float","Ca","=","clamp","(","BU","/","BY",",","0.0",",","1.0",")","-","step","(","B_",",","BU",")","*","(","BU","-","B_",")","/","BZ",";","return","Ca",";","}","Bt","Ch","(",")","{","Bt","Cc",";","float","Cd",";","if","(","u_p_cyclic","==","1",")","{","Cd","=","mod","(","u_p_time",",","u_p_length",")","-","a_p_delay",";","if","(","Cd","<","0.0",")","Cd","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","Cd","=","u_p_time","-","a_p_delay",";","}","if","(","Cd","<","0.0","||","Cd",">=","a_p_lifetime",")","{","Cc",".","a","=","0.0001",";","Cc",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","Cd","<","0.0","||","Cd",">=","a_p_lifetime",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Ce","=","a_position",";","vec3","Cf","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","Ce","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vec3","Cf","=","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";"]}]}}]},{type:"textline",tokens:["Ce","+=","u_p_nfactor","*","Cd","*","Cf",";","Ce","+=","a_p_vels",".","xyz","*","Cd",";","Ce",".","y","-=","u_p_gravity","*","Cd","*","Cd","/","2.0",";","float","Cg","=","max","(","u_p_mass",",","EPSILON",")",";","Ce","+=","(","u_p_wind_fac","*","u_wind","/","Cg",")","*","Cd","*","Cd","/","2.0",";","Cc",".","b","=","Ce",";","Cc",".","e","=","a_p_vels",".","w","*","Cd",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Cc",".","a","=","BN","(","Cd",",","u_p_max_lifetime",",","u_p_size_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Cc",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Cc",".","d","=","BT","(","Cd",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Cc",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["Cc",".","c","=","Cb","(","Cd",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","Cc",";","}"]}]},exports["include/blending.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","Cj","=","0.0",";","float","Ck","=","1.0",";","vec3","Cl","=","vec3","(","Cj",")",";","vec3","Cm","=","vec3","(","Ck",")",";","vec3","Ct","(","vec3","Cn",")","{","vec4","Co","=","vec4","(","Cj",",","-","Ck","/","3.0",",","2.0","/","3.0",",","-","Ck",")",";","vec4","Cp","=","mix","(","vec4","(","Cn",".","bg",",","Co",".","wz",")",",","vec4","(","Cn",".","gb",",","Co",".","xy",")",",","step","(","Cn",".","b",",","Cn",".","g",")",")",";","vec4","Cq","=","mix","(","vec4","(","Cp",".","xyw",",","Cn",".","r",")",",","vec4","(","Cn",".","r",",","Cp",".","yzx",")",",","step","(","Cp",".","x",",","Cn",".","r",")",")",";","float","Cr","=","Cq",".","x","-","min","(","Cq",".","w",",","Cq",".","y",")",";","float","Cs","=","1.0e-10",";","return","vec3","(","abs","(","Cq",".","z","+","(","Cq",".","w","-","Cq",".","y",")","/","(","6.0","*","Cr","+","Cs",")",")",",","Cr","/","(","Cq",".","x","+","Cs",")",",","Cq",".","x",")",";","}","vec3","Cx","(","vec3","Cu",")","{","vec4","Cv","=","vec4","(","Ck",",","2.0","/","3.0",",","Ck","/","3.0",",","3.0",")",";","vec3","Cw","=","abs","(","fract","(","vec3","(","Cu",".","r",",","Cu",".","r",",","Cu",".","r",")","+","Cv",".","xyz",")","*","6.0","-","Cv",".","www",")",";","return","Cu",".","b","*","mix","(","Cv",".","xxx",",","clamp","(","Cw","-","Cv",".","xxx",",","Cj",",","Ck",")",",","Cu",".","g",")",";","}","vec3","CB","(","vec3","Cy",",","vec3","Cz",",","float","CA",")","{","return","mix","(","Cy",",","Cz",",","CA",")",";","}","vec3","CF","(","vec3","CC",",","vec3","CD",",","float","CE",")","{","return","CE","*","CC","+","CD",";","}","vec3","CJ","(","vec3","CG",",","vec3","CH",",","float","CI",")","{","return","CH","-","CI","*","CG",";","}","vec3","CO","(","vec3","CK",",","vec3","CL",",","float","CM",")","{","float","CN","=","Ck","-","CM",";","return","(","vec3","(","CN",")","+","CM","*","CK",")","*","CL",";","}","vec3","CT","(","vec3","CP",",","vec3","CQ",",","float","CR",")","{","vec3","CS","=","vec3","(","Ck","-","CR",")",";","return","Cm","-","(","CS","+","CR","*","(","Cm","-","CP",")",")","*","(","Cm","-","CQ",")",";","}","vec3","CY","(","vec3","CU",",","vec3","CV",",","float","CW",")","{","vec3","CX","=","vec3","(","Ck","-","CW",")",";","return","mix","(","CV","*","(","CX","+","2.0","*","CW","*","CU",")",",","Cm","-","(","CX","+","2.0","*","CW","*","(","Cm","-","CU",")",")","*","(","Cm","-","CV",")",",","step","(","0.5",",","CV",")",")",";","}","vec3","Db","(","vec3","CZ",",","vec3","C_",",","float","Da",")","{","return","mix","(","C_",",","abs","(","CZ","-","C_",")",",","Da",")",";","}","vec3","Df","(","vec3","Dc",",","vec3","Dd",",","float","De",")","{","return","mix","(","Dd",",","Dd","/","(","Dc","+","step","(","Dc",",","Cl",")",")",",","De",")",";","}","vec3","Dj","(","vec3","Dg",",","vec3","Dh",",","float","Di",")","{","return","mix","(","Dh",",","min","(","Dg",",","Dh",")",",","Di",")",";","}","vec3","Dn","(","vec3","Dk",",","vec3","Dl",",","float","Dm",")","{","return","max","(","Dm","*","Dk",",","Dl",")",";","}","vec3","Du","(","vec3","Do",",","vec3","Dp",",","float","Dq",")","{","vec3","Dr","=","Ct","(","Dp",")",";","if","(","Dr",".","y","!=","Cj",")","{","vec3","Ds","=","Ct","(","Do",")",";","vec3","Dt","=","Cx","(","vec3","(","Dr",".","x",",","Ds",".","yz",")",")",";","return","mix","(","Do",",","Dt",",","Dq",")",";","}","return","Do",";","}","vec3","DA","(","vec3","Dv",",","vec3","Dw",",","float","Dx",")","{","vec3","Dy","=","Ct","(","Dv",")",";","if","(","Dy",".","y","!=","Cj",")","{","vec3","Dz","=","Ct","(","Dw",")",";","return","Cx","(","vec3","(","Dy",".","x",",","mix","(","Dy",".","y",",","Dz",".","y",",","Dx",")",",","Dy",".","z",")",")",";","}","return","Dv",";","}","vec3","DG","(","vec3","DB",",","vec3","DC",",","float","DD",")","{","vec3","DE","=","Ct","(","DB",")",";","vec3","DF","=","Ct","(","DC",")",";","return","Cx","(","vec3","(","DE",".","xy",",","mix","(","DE",".","z",",","DF",".","z",",","DD",")",")",")",";","}","vec3","DN","(","vec3","DH",",","vec3","DI",",","float","DJ",")","{","vec3","DK","=","Ct","(","DI",")",";","if","(","DK",".","y","!=","Cj",")","{","vec3","DL","=","Ct","(","DH",")",";","vec3","DM","=","Cx","(","vec3","(","DK",".","xy",",","DL",".","z",")",")",";","return","mix","(","DH",",","DM",",","DJ",")",";","}","return","DH",";","}","vec3","DS","(","vec3","DO",",","vec3","DP",",","float","DQ",")","{","vec3","DR","=","Cm","-","(","Cm","-","DP",")","*","(","Cm","-","DO",")",";","return","mix","(","DO",",","(","(","Cm","-","DO",")","*","DP","*","DO",")","+","DO","*","DR",",","DQ",")",";","}","vec3","DW","(","vec3","DT",",","vec3","DU",",","float","DV",")","{","return","DT","+","DV","*","(","2.0","*","DU","-","Ck",")",";","}","float","Eb","(","float","DX",",","float","DY",",","float","DZ",",","float","D_",")","{","float","Ea","=","Ck","-","D_",";","return","(","Ea","+","DZ","*","DX",")","*","DY",";","}","float","Eh","(","float","Ec",",","float","Ed",",","float","Ee",",","float","Ef",")","{","float","Eg","=","Ck","-","Ef",";","return","Ck","-","(","Eg","+","Ee","*","(","Ck","-","Ec",")",")","*","(","Ck","-","Ed",")",";","}","float","En","(","float","Ei",",","float","Ej",",","float","Ek",",","float","El",")","{","float","Em","=","Ck","-","El",";","return","mix","(","Ej","*","(","Em","+","2.0","*","Ek","*","Ei",")",",","Ck","-","(","Em","+","2.0","*","Ek","*","(","Ck","-","Ei",")",")","*","(","Ck","-","Ej",")",",","step","(","0.5",",","Ej",")",")",";","}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","EA","(","in","sampler2D","Et",",","in","vec2","Eu",",","in","vec2","Ev",")","{","float","Ew","=","texture2D","(","Et",",","Eu",")",".","r",";","float","Ex","=","Ev",".","x",";","float","Ey","=","Ev",".","y",";","float","Ez","=","2.0","*","Ex","/","(","Ex","+","Ey","-","(","2.0","*","Ew","-","1.0",")","*","(","Ey","-","Ex",")",")",";","return","Ez",";","}"]}]}}