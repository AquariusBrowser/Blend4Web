b4w.module["shader_texts"] = function(exports, require) {exports["anchors.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["void","main","(",")","{","gl_FragColor","=","vec4","(","1.0",")",";","}"]}]},exports["anchors.glslv"] = {type:"group",parts:[{type:"var",name:"ANCHOR_NUM",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_index",";","uniform","vec3","u_position","[","ANCHOR_NUM","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec4","a",";","a","=","u_view_matrix","*","vec4","(","u_position","[","int","(","a_index",")","]",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","a",";","gl_PointSize","=","4.0",";","}"]}]},exports["color_id.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec3","u_color_id",";","uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_outline_intensity",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","b",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["b","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","b","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_outline_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","mat4","ck",";","vec3","cl",",","cm",",","cn",",","co",";","cl","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["cl","=","mix","(","cl",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["cm","=","vec3","(","0.0",")",";","cn","=","vec3","(","0.0",")",";","co","=","vec3","(","0.0",")",";","bv","(","cl",",","cm",",","cn",",","co",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["cm","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["cm","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["cn","=","(","u_model_matrix","*","vec4","(","cm",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["ck","=","ao","(","u_camera_eye",",","cn",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ck","=","ai","(","u_camera_eye",",","cn",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["co","=","(","u_model_matrix","*","vec4","(","cm",",","1.0",")",")",".","xyz",";","ck","=","ck","*","aa","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","co",")",";"]}]}}]},{type:"textline",tokens:["d","cp","=","av","(","cl","-","cm",",","cm",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ck",")",";","cp",".","b","=","cn",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","cp","=","av","(","cl",",","cm",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["co","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["co","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["cj","(","cp",".","a",",","cp",".","b",",","co",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","ay","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","cp",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";"]}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"shadow.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","e_",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["e_","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["e_","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","e_","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","cq","(","cD",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}}]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","eU","(","cJ",".","z",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","MAIN_BEND_COL","&&","DETAIL_BEND","||","SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","&&","SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_shadow_cast_billboard_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","float","fT",";","vec2","fU",";","vec4","fV",",","fW",";","mat4","fX",",","fY",";","vec3","fZ",",","f_",",","ga",",","gb",";","fZ","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["fZ","=","mix","(","fZ",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["f_","=","vec3","(","0.0",")",";","ga","=","vec3","(","0.0",")",";","gb","=","vec3","(","0.0",")",";","bv","(","fZ",",","f_",",","ga",",","gb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["f_","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["f_","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["d","gc","=","fE","(","fZ",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","f_",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["ga","=","(","u_model_matrix","*","vec4","(","f_",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","HAIR_BILLBOARD","&&","SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["fX","=","u_shadow_cast_billboard_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fX","=","u_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["fY","=","ao","(","u_camera_eye",",","ga",",","fX",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fY","=","ai","(","u_camera_eye",",","ga",",","fX",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["gb","=","(","u_model_matrix","*","vec4","(","f_",",","1.0",")",")",".","xyz",";","fY","=","fY","*","aa","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","gb",")",";"]}]}}]},{type:"textline",tokens:["d","gc","=","av","(","fZ","-","f_",",","f_",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","fY",")",";","gc",".","b","=","ga",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","gc","=","av","(","fZ",",","f_",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["gb","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gb","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["cj","(","gc",".","a",",","gc",".","b",",","gb",")",";"]}]}}]},{type:"textline",tokens:["fV","=","u_view_matrix","*","vec4","(","gc",".","a",",","1.0",")",";","fW","=","u_proj_matrix","*","fV",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["fW",".","xy","+=","u_subpixel_jitter","*","fW",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","ay","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["fO","(","gc",".","a",")",";","cJ","=","fV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["cD","=","-","fV",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["fU","=","(","u_proj_matrix","*","u_view_matrix","[","3","]",")",".","xy",";","fT","=","SHADOW_TEX_RES","/","2.0",";","fU","=","floor","(","fU","*","fT","+","0.5",")","/","fT","-","fU",";","fW",".","xy","+=","fU",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","fW",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","fT",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","fT",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","fT",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","fT",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","fT",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","fT",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","fT",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","fT",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","fT",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","fU",";","mat4","fV",";","vec3","fW",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["fW","=","(","u_model_matrix","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","fV","=","ai","(","u_camera_eye",",","fW",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["fV","=","fV","*","aa","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["d","fX","=","av","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","fV",")",";","fX",".","b","=","fW",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","fX","=","av","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["fU","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","fX",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["fT","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fT","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["fT","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","fU",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","ga",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","float","gb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS",">","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["const","int","gc","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","gc","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","ge","(","float","gd",")","{","return","gd","-","floor","(","gd","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","gn","(","inout","float","gf",",","in","float","gg","[","gc","]",",","in","float","gh",")","{","float","gi",",","gj",",","gk",",","gl",";","for","(","int","gm","=","0",";","gm","<","NUM_RINGS",";","gm","++",")","{","gi","=","40.0","*","gg","[","gm","]",";","gj","=","300.0","*","(","ge","(","gi",")","-","0.005",")",";","gk","=","gi",";","gl","=","abs","(","gk","*","(","u_halo_size","*","gj","-","gh",")",")",";","gf","+=","1.0","-","min","(","gl",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","gw","(","inout","float","go",",","in","float","gp","[","gc","]",",","in","float","gq",")","{","float","gr",",","gs",",","gt",",","gu",";","for","(","int","gv","=","0",";","gv","<","NUM_LINES",";","gv","++",")","{","gr","=","gp","[","gv","]",";","gs","=","gr",";","gt","=","1000.0","*","(","ge","(","gr",")","-","0.005",")",";","gu","=","20.0","*","abs","(","gs","*","a",".","x","+","gt","*","a",".","y",")",";","go","+=","1.0","-","min","(","gu",",","1.0",")",";","}","go","*=","gq",";","}"]}]}}]},{type:"textline",tokens:["void","gD","(","inout","float","gx",",","in","vec2","gy",")","{","float","gz",",","gA",",","gB",",","gC",";","gA","=","atan","(","gy",".","y",",","gy",".","x",")",";","gA","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","gB","=","cos","(","gA",")",";","gC","=","sin","(","gA",")",";","gA","=","(","gB","*","gy",".","x","+","gC","*","gy",".","y",")","*","(","gB","*","gy",".","y","-","gC","*","gy",".","x",")",";","gz","=","abs","(","gA",")",";","if","(","gz","<","1.0",")","{","gz","=","(","0.01","*","u_halo_size",")","/","(","gz",")",";","gx","*=","sqrt","(","min","(","gz",",","1.0",")",")",";","}","}","void","main","(",")","{","vec3","gE",";","float","gF",",","gG",",","gH",",","gI",";","gF","=","(","a",".","x","*","a",".","x","+","a",".","y","*","a",".","y",")",";","gG","=","sqrt","(","gF",")",";","gF","=","max","(","1.0","-","gF",",","0.0",")",";","gF","=","pow","(","gF",",","u_halo_hardness",")",";","gH","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","||","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","gJ","[","gc","]",";","for","(","int","gK","=","0",";","gK","<","gc",";","gK","++",")","{","gJ","[","gK","]","=","fract","(","gb","/","(","float","(","gK",")","+","0.01",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["gI","=","0.0",";","gn","(","gI",",","gJ",",","gG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["gG","=","0.0",";","gw","(","gG",",","gJ",",","gF",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["gD","(","gF",",","a",")",";"]}]}}]},{type:"textline",tokens:["gF","*=","gH",";","gE","=","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["gI","*=","gF",";","gE","+=","u_halo_rings_color","*","gI",";","gF","+=","gI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["gG","*=","gH",";","gE","+=","u_halo_lines_color","*","gG",";","gF","+=","gG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["gF","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gI","=","u_halo_stars_blend","*","(","ga",".","y","-","u_halo_stars_height",")",";","gF","*=","clamp","(","gI",",","0.0",",","1.0",")",";","gF","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["fX","(","gE",")",";","f_","(","gE",",","gF",")",";","gl_FragColor","=","vec4","(","gE",",","gF",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","a",";","varying","float","gb",";"]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ga",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","gc",",","gd",";","mat4","ge",",","gf",";","vec3","gg",";","gg","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","a","=","a_halo_bb_vertex","*","2.0",";","gb","=","fract","(","gg",".","x","+","gg",".","y","+","gg",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["ge","=","N","(","gg",",","u_view_matrix",")",";","gf","=","u_view_matrix",";","gf","[","3","]","[","0","]","=","0.0",";","gf","[","3","]","[","1","]","=","0.0",";","gf","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ge","=","N","(","gg",",","u_view_matrix",")",";"]}]}}]},{type:"textline",tokens:["gc","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","gc","=","ge","*","gc",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["gd","=","u_proj_matrix","*","gf","*","gc",";","gd",".","z","=","0.99999","*","gd",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["ga","=","gc",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gd","=","u_proj_matrix","*","u_view_matrix","*","gc",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","gd",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec3","gc",";","gc","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","gc",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"lighting.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","||","REFLECTION_TYPE","==","REFL_PLANE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","&&","!","ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_CUBE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_MIRRORMAP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";","uniform","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","REFLECTION_TYPE","==","REFL_CUBE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_MIRRORMAP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jB",";","varying","vec3","jC",";","varying","vec3","jD",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","jE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","jG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"environment.glslf"},{type:"textline",tokens:["void","main","(",")","{","vec4","kr",",","ks",",","kt",",","ku",";","mat3","kv",";","vec3","kw",",","kx",",","ky",",","kz",",","kA",",","kB",",","kC",",","kD",";","vec2","kE",",","kF",",","kG",",","kH",";","float","kI",",","kJ",",","kK",",","kL",",","kM",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["kI","=","jC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["kE","=","a",";"]}]}}]},{type:"textline",tokens:["kw","=","jD",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","kw","=","kw",";","else","kw","=","-","kw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["kx","=","cross","(","kw",",","jE",".","xyz",")","*","jE",".","w",";","kv","=","mat3","(","jE",".","xyz",",","kx",",","kw",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","length","(","cJ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["kF","=","normalize","(","u_view_matrix_frag","*","vec4","(","jD",",","0.0",")",")",".","st",";","kF","=","kF","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","kJ","<","PARALLAX_LOD_DIST",")","{","kK","=","clamp","(","0.5","*","(","PARALLAX_LOD_DIST","-","kJ",")",",","0.0",",","1.0",")",";","kK","=","u_parallax_scale","*","kK",";","kx","=","normalize","(","jB","*","kv",")",";","kL","=","1.0","/","PARALLAX_STEPS",";","kG","=","kx",".","xy","*","kK","/","(","PARALLAX_STEPS","*","kx",".","z",")",";","kK","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["kH","=","kF",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kH","=","kE",";"]}]}}]},{type:"textline",tokens:["kM","=","texture2D","(","u_normalmap0",",","kH",")",".","a",";","for","(","float","kN","=","1.0",";","kN","<=","PARALLAX_STEPS",";","kN","++",")","{","if","(","kM","<","kK",")","{","kK","-=","kL",";","kH","-=","kG",";","kM","=","texture2D","(","u_normalmap0",",","kH",")",".","a",";","}","}","kG","=","kH","+","kG",";","kL","=","texture2D","(","u_normalmap0",",","kG",")",".","a","-","(","kK","+","kL",")",";","kM","=","kM","-","kK",";","kK","=","kM","/","(","kM","-","kL",")",";","kH","=","kK","*","kG","+","(","1.0","-","kK",")","*","kH",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["kE","+=","kH","-","kF",";"]}]}}]},{type:"textline",tokens:["kF","=","kH",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["kF","+=","kH","-","kE",";"]}]}}]},{type:"textline",tokens:["kE","=","kH",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["kr","=","texture2D","(","u_normalmap0",",","kF",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kr","=","texture2D","(","u_normalmap0",",","kE",")",";"]}]}}]},{type:"textline",tokens:["kx","=","kr",".","rgb","-","0.5",";","kx","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","kx",",","u_normal_factor",")",";","kx","=","kv","*","kx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kx","=","kw",";"]}]}}]},{type:"textline",tokens:["kx","=","normalize","(","kx",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["kF","=","normalize","(","u_view_matrix_frag","*","vec4","(","kx",",","0.0",")",")",".","st",";","kF","=","kF","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"textline",tokens:["kw","=","normalize","(","jB",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["ky","=","jF",";","fV","(","ky",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["kr","=","vec4","(","ky",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kr","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["kM","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["ks","=","texture2D","(","u_colormap0",",","kF",")",";"]}]}},{type:"elif",expression:["TEXTURE_COLOR0_CO","==","TEXTURE_COORDS_UV_ORCO"],group:{type:"group",parts:[{type:"textline",tokens:["ks","=","texture2D","(","u_colormap0",",","kE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["fV","(","ks",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR1_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["kt","=","texture2D","(","u_colormap1",",","kF",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kt","=","texture2D","(","u_colormap1",",","kE",")",";"]}]}}]},{type:"textline",tokens:["fV","(","kt",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["ku","=","texture2D","(","u_stencil0",",","kF",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ku","=","texture2D","(","u_stencil0",",","kE",")",";"]}]}}]},{type:"textline",tokens:["ks","=","mix","(","ks",",","kt",",","ku",".","r",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["kr",".","rgb","=","mix","(","kr",".","rgb",",","ks",".","rgb",",","u_diffuse_color_factor",")",";","kL","=","u_alpha_factor","*","ks",".","a",";","kL","+=","(","1.0","-","step","(","0.0",",","kL",")",")",";","kr",".","a","=","mix","(","kL",",","1.0",",","u_diffuse_color",".","a",")",";","kM","=","ks",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["kr",".","rgb","*=","mix","(","vec3","(","1.0",")",",","ks",".","rgb",",","u_diffuse_color_factor",")",";","kr",".","a","=","ks",".","a",";","kM","=","ks",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["ky","=","u_diffuse_intensity","*","kr",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["kz","=","ky",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kA","=","u_environment_energy","*","kq","(","kx",")",";","kA","=","u_ambient","*","kA",";","kK","=","eZ","(","ky",")",";","kB","=","u_emit","*","kr",".","rgb",";","kC","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["kD","=","vec3","(","kM",")",";"]}]}},{type:"elif",expression:["TEXTURE_SPEC_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["kD","=","texture2D","(","u_specmap0",",","kF",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kD","=","texture2D","(","u_specmap0",",","kE",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["fV","(","kD",".","rgb",")",";","kC","=","mix","(","kC",",","kD",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["kL","=","u_specular_params","[","0","]",";","kG","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","kD","=","kL","*","kC",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["gO","kO","=","jh","(","kB",",","kA",",","ky",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gO","kO","=","jc","(","kB",",","kA",",","ky",",","kD",",","jC",",","kx",",","kw",",","kG",",","u_diffuse_params",",","kK",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","0.0",",","vec4","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["kz","=","kO",".","a",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","REFLECTION_TYPE","==","REFL_CUBE"],group:{type:"group",parts:[{type:"textline",tokens:["j_","(","kz",",","kw",",","kx",",","u_reflect_factor",")",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_MIRRORMAP"],group:{type:"group",parts:[{type:"textline",tokens:["j_","(","kz",",","kw",",","kx",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["kz","+=","kO",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["kz","=","max","(","kz","-","sqrt","(","0.01","*","-","min","(","kI",",","0.0",")",")",",","0.5","*","kz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["jA","(","kz",",","kI",",","u_time",",","kK",",","kx",",","u_sun_direction",",","u_sun_intensity",",","u_sun_quaternion",",","jC",",","kJ",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["kM","=","kr",".","a",";","if","(","kM","<=","0.5",")","discard",";","kM","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kM","=","kr",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["kM","+=","kO",".","a",".","a","*","kD",".","r","*","u_specular_alpha",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kM","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["kz","=","mix","(","kn","(","cI",",","kx",".","xz","*","u_refr_bump",")",",","kz",",","kM",")",";","kM","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","(","!","PROCEDURAL_FOG","||","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["kL","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["kC","=","gm","(","u_cube_fog",",","kw",")",";","kt","=","vec4","(","kC",",","u_fog_color_density",".","a",")",";","fV","(","kt",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kt","=","u_fog_color_density",";","kt",".","rgb","*=","kL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["gC","(","kz",",","kJ",",","kw",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","kt",",","kI",",","kL",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gg","(","kz",",","kJ",",","kt",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK","&&","!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["kz","=","vec3","(","dC",".","a",")",";"]}]}}]},{type:"textline",tokens:["fX","(","kz",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["f_","(","kz",",","kM",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kz",",","kM",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";","attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jB",";","varying","vec3","jC",";","varying","vec3","jD",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","jE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","jG",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec4","kr",",","ks",";","float","kt",",","ku",",","kv",";","mat4","kw",";","vec3","kx",",","ky",",","kz",",","kA",",","kB",",","kC",",","kD",";","kx","=","a_position",";","ky","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_UV_ORCO"],group:{type:"group",parts:[{type:"textline",tokens:["kz","=","vec3","(","a_tangent",")",";","kA","=","a_tangent","[","3","]","*","cross","(","ky",",","kz",")",";"]}]}},{type:"elif",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["kB","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","kC","=","normalize","(","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","kB","=","kB","-","u_camera_eye",";","kA","=","cross","(","kB",",","kC",")",";","kz","=","cross","(","kC",",","kA",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kz","=","vec3","(","0.0",")",";","kA","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["kx","=","mix","(","kx",",","a_position_next",",","u_va_frame_factor",")",";","ky","=","mix","(","ky",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["kB","=","vec3","(","a_tangent",")",";","kC","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","kB",")",";","kz","=","mix","(","kz",",","kB",",","u_va_frame_factor",")",";","kA","=","mix","(","kA",",","kC",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bv","(","kx",",","kz",",","kA",",","ky",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["kB","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kB","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["d","kE","=","fE","(","kx",",","kz",",","kA",",","ky",",","kB",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["kC","=","(","u_model_matrix","*","vec4","(","kB",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["kw","=","ao","(","u_camera_eye",",","kC",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kw","=","ai","(","u_camera_eye",",","kC",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["kD","=","(","u_model_matrix","*","vec4","(","kB",",","1.0",")",")",".","xyz",";","kw","=","kw","*","aa","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","kD",")",";"]}]}}]},{type:"textline",tokens:["d","kE","=","av","(","kx","-","kB",",","kB",",","kz",",","kA",",","ky",",","kw",")",";","kE",".","b","=","kC",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","kE","=","av","(","kx",",","kB",",","kz",",","kA",",","ky",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["kt","=","(","dot","(","cross","(","kE",".","e",",","kE",".","c",")",",","kE",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","jE","=","vec4","(","kE",".","c",",","kt",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cj","(","kE",".","a",",","kE",".","b",",","ky",")",";"]}]}}]},{type:"textline",tokens:["jC","=","kE",".","a",";","jD","=","kE",".","e",";","jB","=","u_camera_eye","-","kE",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","ay","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["jF","=","kE",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["jF","=","a_color",";"]}]}}]},{type:"textline",tokens:["kr","=","u_view_matrix","*","vec4","(","kE",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["cJ","=","kr",";"]}]}}]},{type:"textline",tokens:["ks","=","u_proj_matrix","*","kr",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["ks",".","xy","+=","u_subpixel_jitter","*","ks",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["fO","(","ks",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["fO","(","kE",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["kt","=","ks",".","x",";","ku","=","ks",".","y",";","kv","=","ks",".","w",";","cI",".","x","=","(","kt","+","kv",")","/","2.0",";","cI",".","y","=","(","ku","+","kv",")","/","2.0",";","cI",".","z","=","kv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["jG","=","-","kr",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","ks",";","}"]}]},exports["nodes.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG","||","(","CAUSTICS","&&","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","||","REFLECTION_TYPE","==","REFL_PLANE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_CUBE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_MIRRORMAP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_MIRRORMAP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_PLANE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jC",";","varying","vec4","cJ",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","jE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","&&","USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","jG",";"]}]}}]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","vec3","kr","=","vec3","(","ZERO_VALUE_NODES",")",";","vec3","ks","=","vec3","(","UNITY_VALUE_NODES",")",";"]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["vec3","kw","(","in","vec3","kt",",","in","float","ku",")","{","vec3","kv",";","kv","=","kr",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["kv","=","kn","(","cI",",","kt",".","xz","*","ku",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kv","=","texture2D","(","u_refractmap",",","cI",".","xy","/","cI",".","z",")",".","rgb",";","fV","(","kv",")",";"]}]}}]},{type:"textline",tokens:["return","kv",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_SEPHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kB","(","vec3","kx",")","{","float","ky",",","kz",";","vec4","kA",";","kA","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","kA","=","mix","(","vec4","(","kx",".","bg",",","kA",".","wz",")",",","vec4","(","kx",".","gb",",","kA",".","xy",")",",","step","(","kx",".","b",",","kx",".","g",")",")",";","kA","=","mix","(","vec4","(","kA",".","xyw",",","kx",".","r",")",",","vec4","(","kx",".","r",",","kA",".","yzx",")",",","step","(","kA",".","x",",","kx",".","r",")",")",";","ky","=","kA",".","x","-","min","(","kA",".","w",",","kA",".","y",")",";","kz","=","1.0e-10",";","return","vec3","(","abs","(","kA",".","z","+","(","kA",".","w","-","kA",".","y",")","/","(","6.0","*","ky","+","kz",")",")",",","ky","/","(","kA",".","x","+","kz",")",",","kA",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_COMBHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kF","(","vec3","kC",")","{","vec3","kD",";","vec4","kE",";","kE","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","kD","=","abs","(","fract","(","vec3","(","kC",".","r",",","kC",".","r",",","kC",".","r",")","+","kE",".","xyz",")","*","6.0","-","kE",".","www",")",";","return","kC",".","b","*","mix","(","kE",".","xxx",",","clamp","(","kD","-","kE",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","kC",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","||","USE_NODE_B4W_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kH","(","vec2","kG",")","{","return","vec3","(","kG","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","||","USE_NODE_TEXTURE_NORMAL","||","USE_NODE_B4W_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kJ","(","vec3","kI",")","{","return","vec2","(","kI",".","xy","*","0.5","+","vec2","(","0.5",",","0.5",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"lH",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"lI",qualifier:["float"],is_optional:true},{type:"node_out",name:"lJ",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_lH"],statements:[{type:"textline",tokens:["lH","=","normalize","(","kW",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_lI"],statements:[{type:"textline",tokens:["lI","=","abs","(","kW",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_lJ"],statements:[{type:"textline",tokens:["lJ","=","length","(","kW",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"lK",qualifier:["float"],is_optional:false},{type:"node_in",name:"lL",qualifier:["float"],is_optional:false},{type:"node_in",name:"lM",qualifier:["float"],is_optional:false},{type:"node_out",name:"lN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lN","=","vec3","(","lK",",","lL",",","lM",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"lO",qualifier:["float"],is_optional:false},{type:"node_in",name:"lP",qualifier:["float"],is_optional:false},{type:"node_in",name:"lQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"lR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lR","=","kF","(","vec3","(","lO",",","lP",",","lQ",")",")",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"lS",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"kK",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["lS","=","kH","(","kK",")",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"lT",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"kL",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["lT","=","kL",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"lU",qualifier:["float"],is_optional:false},{type:"node_param",name:"kM",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["lU","=","kM",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"lV",qualifier:["float"],is_optional:false},{type:"node_out",name:"lW",qualifier:["float"],is_optional:false},{type:"node_param",name:"kN",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["lV","=","kN","[","0","]",";","lW","=","kN","[","1","]",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"lX",qualifier:["float"],is_optional:false},{type:"node_out",name:"lY",qualifier:["float"],is_optional:false},{type:"node_out",name:"lZ",qualifier:["float"],is_optional:false},{type:"node_param",name:"kO",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["lX","=","kO","[","0","]",";","lY","=","kO","[","1","]",";","lZ","=","kO","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"l_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["l_","=","ln",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"ma",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ma","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"mb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mb","=","lm",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"mc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mc","=","vec3","(","lo",".","r",",","-","lo",".","b",",","lo",".","g",")",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"md",qualifier:["float"],is_optional:false},{type:"node_in",name:"me",qualifier:["float"],is_optional:false},{type:"node_in",name:"mf",qualifier:["float"],is_optional:false},{type:"node_in",name:"mg",qualifier:["float"],is_optional:false},{type:"node_in",name:"mh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ls","=","kB","(","mh",")",";","ls","[","0","]","+=","(","md","-","0.5",")",";","if","(","ls","[","0","]",">","UNITY_VALUE_NODES",")","ls","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","ls","[","0","]","<","ZERO_VALUE_NODES",")","ls","[","0","]","+=","UNITY_VALUE_NODES",";","ls","*=","vec3","(","UNITY_VALUE_NODES",",","me",",","mf",")",";","ls","=","mix","(","ks",",","mix","(","kr",",","ls",",","step","(","kr",",","ls",")",")",",","step","(","ls",",","ks",")",")",";","mi","=","mix","(","mh",",","kF","(","ls",")",",","mg",")",";"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"mj",qualifier:["float"],is_optional:false},{type:"node_in",name:"mk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ml",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ml","=","mix","(","mk",",","ks","-","mk",",","mj",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"mm",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"mn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mo",qualifier:["float"],is_optional:false},{type:"node_out",name:"mp",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_mm"],statements:[{type:"textline",tokens:["mm","=","u_lamp_light_color_intensities","[","LAMP_INDEX","]",";"]}]}]},{type:"textline",tokens:["kX","=","u_lamp_light_factors","[","LAMP_INDEX","]",";","lt","=","u_lamp_light_directions","[","LAMP_INDEX","]",";","lu","=","u_lamp_light_positions","[","LAMP_INDEX","]",";","le","=","kX",".","z",";","if","(","le","!=","-","UNITY_VALUE_NODES",")","{","mn","=","lu","-","jC",";","mo","=","length","(","mn",")",";","mn","=","normalize","(","mn",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_mp"],statements:[{type:"textline",tokens:["mp","=","le","/","(","le","+","mo","*","mo",")",";","le","=","kX",".","x",";","lf","=","kX",".","y",";","if","(","le",">","-","UNITY_VALUE_NODES",")","{","lg","=","dot","(","mn",",","lt",")",";","lg","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","lg","-","le",")","/","lf",")",";","mp","*=","lg",";","}"]}]}]},{type:"textline",tokens:["}","else","{"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_mn"],statements:[{type:"textline",tokens:["mn","=","lt",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_mo"],statements:[{type:"textline",tokens:["mo","=","length","(","lu","-","jC",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_mp"],statements:[{type:"textline",tokens:["mp","=","UNITY_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"mq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mr",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"ms",qualifier:["float"],is_optional:true},{type:"node_param",name:"kP",qualifier:["vec3"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_mr"],statements:[{type:"textline",tokens:["mr","=","kP",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ms"],statements:[{type:"textline",tokens:["ms","=","-","dot","(","mq",",","kP",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"mt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mu",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mu","=","-","(","u_view_matrix_frag","*","vec4","(","mt",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"mv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mw","=","mv",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["mw","=","(","MAPPING_TRS_MATRIX","*","vec4","(","mw",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["mw","=","mw","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["mw","=","mw","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["mw","=","max","(","mw",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["mw","=","min","(","mw",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["mw","=","normalize","(","mw",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"mx",qualifier:["float"],is_optional:false},{type:"node_in",name:"my",qualifier:["float"],is_optional:false},{type:"node_out",name:"mz",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mz","=","mx","+","my",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["mz","=","clamp","(","mz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"mA",qualifier:["float"],is_optional:false},{type:"node_in",name:"mB",qualifier:["float"],is_optional:false},{type:"node_out",name:"mC",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mC","=","mA","-","mB",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["mC","=","clamp","(","mC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"mD",qualifier:["float"],is_optional:false},{type:"node_in",name:"mE",qualifier:["float"],is_optional:false},{type:"node_out",name:"mF",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mF","=","mD","*","mE",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["mF","=","clamp","(","mF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"mG",qualifier:["float"],is_optional:false},{type:"node_in",name:"mH",qualifier:["float"],is_optional:false},{type:"node_out",name:"mI",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mI","=","(","mH","!=","ZERO_VALUE_NODES",")","?","mG","/","mH",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["mI","=","clamp","(","mI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"mJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"mK",qualifier:["float"],is_optional:false},{type:"node_out",name:"mL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mL","=","sin","(","mJ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["mL","=","clamp","(","mL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["mK",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"mM",qualifier:["float"],is_optional:false},{type:"node_in",name:"mN",qualifier:["float"],is_optional:false},{type:"node_out",name:"mO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mO","=","cos","(","mM",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["mO","=","clamp","(","mO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["mN",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"mP",qualifier:["float"],is_optional:false},{type:"node_in",name:"mQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"mR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mR","=","tan","(","mP",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["mR","=","clamp","(","mR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["mQ",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"mS",qualifier:["float"],is_optional:false},{type:"node_in",name:"mT",qualifier:["float"],is_optional:false},{type:"node_out",name:"mU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mU","=","(","mS","<=","UNITY_VALUE_NODES","&&","mS",">=","-","UNITY_VALUE_NODES",")","?","asin","(","mS",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["mU","=","clamp","(","mU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["mT",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"mV",qualifier:["float"],is_optional:false},{type:"node_in",name:"mW",qualifier:["float"],is_optional:false},{type:"node_out",name:"mX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mX","=","(","mV","<=","UNITY_VALUE_NODES","&&","mV",">=","-","UNITY_VALUE_NODES",")","?","acos","(","mV",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["mX","=","clamp","(","mX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["mW",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"mY",qualifier:["float"],is_optional:false},{type:"node_in",name:"mZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"m_",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["m_","=","atan","(","mY",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["m_","=","clamp","(","m_",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["mZ",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"na",qualifier:["float"],is_optional:false},{type:"node_in",name:"nb",qualifier:["float"],is_optional:false},{type:"node_out",name:"nc",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","na","<","ZERO_VALUE_NODES","||","na","==","ZERO_VALUE_NODES","&&","nb","==","ZERO_VALUE_NODES",")","nc","=","ZERO_VALUE_NODES",";","else","nc","=","pow","(","na",",","nb",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nc","=","clamp","(","nc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"nd",qualifier:["float"],is_optional:false},{type:"node_in",name:"ne",qualifier:["float"],is_optional:false},{type:"node_out",name:"nf",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nf","=","(","nd",">","ZERO_VALUE_NODES","&&","ne",">","ZERO_VALUE_NODES",")","?","log2","(","nd",")","/","log2","(","ne",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nf","=","clamp","(","nf",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"ng",qualifier:["float"],is_optional:false},{type:"node_in",name:"nh",qualifier:["float"],is_optional:false},{type:"node_out",name:"ni",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ni","=","min","(","ng",",","nh",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ni","=","clamp","(","ni",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"nj",qualifier:["float"],is_optional:false},{type:"node_in",name:"nk",qualifier:["float"],is_optional:false},{type:"node_out",name:"nl",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nl","=","max","(","nj",",","nk",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nl","=","clamp","(","nl",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"nm",qualifier:["float"],is_optional:false},{type:"node_in",name:"nn",qualifier:["float"],is_optional:false},{type:"node_out",name:"no",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["no","=","floor","(","nm","+","0.5",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["no","=","clamp","(","no",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["nn",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"np",qualifier:["float"],is_optional:false},{type:"node_in",name:"nq",qualifier:["float"],is_optional:false},{type:"node_out",name:"nr",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nr","=","(","np","<","nq",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nr","=","clamp","(","nr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"ns",qualifier:["float"],is_optional:false},{type:"node_in",name:"nt",qualifier:["float"],is_optional:false},{type:"node_out",name:"nu",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nu","=","(","ns",">","nt",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nu","=","clamp","(","nu",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"nv",qualifier:["float"],is_optional:false},{type:"node_in",name:"nw",qualifier:["float"],is_optional:false},{type:"node_out",name:"nx",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nx","=","abs","(","nw",")",">","0.000001","?","mod","(","nv",",","nw",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nx","=","clamp","(","nx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"ny",qualifier:["float"],is_optional:false},{type:"node_in",name:"nz",qualifier:["float"],is_optional:false},{type:"node_out",name:"nA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nA","=","abs","(","ny",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nA","=","clamp","(","nA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["nz",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"nB",qualifier:["float"],is_optional:false},{type:"node_in",name:"nC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["le","=","clamp","(","nB",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","nE","=","mix","(","nC",",","nD",",","le",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["nE","=","clamp","(","nE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"nF",qualifier:["float"],is_optional:false},{type:"node_in",name:"nG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lf","=","clamp","(","nF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","nI","=","mix","(","nG",",","nG","+","nH",",","lf",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["nI","=","clamp","(","nI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"nJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"nK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lg","=","clamp","(","nJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","nM","=","mix","(","nK",",","nK","*","nL",",","lg",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["nM","=","clamp","(","nM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"nN",qualifier:["float"],is_optional:false},{type:"node_in",name:"nO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["le","=","clamp","(","nN",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","nQ","=","mix","(","nO",",","nO","-","nP",",","le",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["nQ","=","clamp","(","nQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"nR",qualifier:["float"],is_optional:false},{type:"node_in",name:"nS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lf","=","clamp","(","nR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lg","=","UNITY_VALUE_NODES","-","lf",";","nU","=","ks","-","(","vec3","(","lg",")","+","lf","*","(","ks","-","nT",")",")","*","(","ks","-","nS",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["nU","=","clamp","(","nU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"nV",qualifier:["float"],is_optional:false},{type:"node_in",name:"nW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nY",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["le","=","clamp","(","nV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lg","=","UNITY_VALUE_NODES","-","le",";","nX","+=","step","(","nX",",","kr",")",";","nY","=","lg","*","nW","+","le","*","nW","/","nX",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["nY","=","clamp","(","nY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"nZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"n_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ob",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lf","=","clamp","(","nZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","ob","=","mix","(","n_",",","abs","(","n_","-","oa",")",",","lf",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["ob","=","clamp","(","ob",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"oc",qualifier:["float"],is_optional:false},{type:"node_in",name:"od",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"of",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lg","=","clamp","(","oc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","of","=","min","(","od",".","rgb",",","oe",".","rgb","*","lg",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["of","=","clamp","(","of",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"og",qualifier:["float"],is_optional:false},{type:"node_in",name:"oh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["le","=","clamp","(","og",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oj","=","max","(","oh",".","rgb",",","oi",".","rgb","*","le",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oj","=","clamp","(","oj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"ok",qualifier:["float"],is_optional:false},{type:"node_in",name:"ol",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"om",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"on",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lf","=","clamp","(","ok",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lt","=","vec3","(","UNITY_VALUE_NODES","-","lf",")",";","on","=","mix","(","ol","*","(","lt","+","2.0","*","lf","*","om",")",",","ks","-","(","lt","+","2.0","*","lf","*","(","ks","-","om",")",")","*","(","ks","-","ol",")",",","step","(","0.5",",","ol",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["on","=","clamp","(","on",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"oo",qualifier:["float"],is_optional:false},{type:"node_in",name:"op",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"or",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lg","=","clamp","(","oo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lu","=","ks","-","lg","*","oq",";","lt","=","clamp","(","op","/","lu",",","0.0",",","1.0",")",";","or","=","mix","(","mix","(","lt",",","ks",",","step","(","lu",",","kr",")",")",",","op",",","step","(","op",",","kr",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["or","=","clamp","(","or",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"os",qualifier:["float"],is_optional:false},{type:"node_in",name:"ot",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ou",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ov",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["le","=","clamp","(","os",",","0.0",",","1.0",")",";","lt","=","vec3","(","1.0","-","le",")",";","lu","=","lt","+","le","*","ou",";","lt","=","clamp","(","ks","-","(","ks","-","ot",")","/","lu",",","0.0",",","1.0",")",";","ov","=","mix","(","lt",",","kr",",","step","(","lu",",","kr",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["ov","=","clamp","(","ov",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"ow",qualifier:["float"],is_optional:false},{type:"node_in",name:"ox",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oy",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lf","=","clamp","(","ow",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oz","=","ox",";","lu","=","kB","(","oy",")",";","if","(","lu",".","y","!=","ZERO_VALUE_NODES",")","{","lt","=","kB","(","oz",")",";","lt",".","x","=","lu",".","x",";","lv","=","kF","(","lt",")",";","oz","=","mix","(","oz",",","lv",",","lf",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oz","=","clamp","(","oz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"oA",qualifier:["float"],is_optional:false},{type:"node_in",name:"oB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oD",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lg","=","clamp","(","oA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","le","=","UNITY_VALUE_NODES","-","lg",";","oD","=","oB",";","lu","=","kB","(","oD",")",";","if","(","lu",".","y","!=","ZERO_VALUE_NODES",")","{","lv","=","kB","(","oC",")",";","lu",".","y","=","le","*","lu",".","y","+","lg","*","lv",".","y",";","oD","=","kF","(","lu",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oD","=","clamp","(","oD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"oE",qualifier:["float"],is_optional:false},{type:"node_in",name:"oF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lf","=","clamp","(","oE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","le","=","UNITY_VALUE_NODES","-","lf",";","lv","=","kB","(","oF",")",";","lw","=","kB","(","oG",")",";","lv",".","z","=","le","*","lv",".","z","+","lf","*","lw",".","z",";","oH","=","kF","(","lv",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oH","=","clamp","(","oH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"oI",qualifier:["float"],is_optional:false},{type:"node_in",name:"oJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lg","=","clamp","(","oI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oL","=","oJ",";","lx","=","kB","(","oK",")",";","if","(","lx",".","y","!=","ZERO_VALUE_NODES",")","{","lw","=","kB","(","oL",")",";","lw",".","x","=","lx",".","x",";","lw",".","y","=","lx",".","y",";","ly","=","kF","(","lw",")",";","oL","=","mix","(","oL",",","ly",",","lg",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oL","=","clamp","(","oL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"oM",qualifier:["float"],is_optional:false},{type:"node_in",name:"oN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["le","=","clamp","(","oM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lf","=","UNITY_VALUE_NODES","-","le",";","lx","=","oO","+","oN","-","oO","*","oN",";","oP","=","oN","*","(","vec3","(","lf",")","+","vec3","(","le",")","*","(","(","ks","-","oN",")","*","oO","+","lx",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oP","=","clamp","(","oP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"oQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"oR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lg","=","clamp","(","oQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oT","=","oR","+","lg","*","(","2.0","*","oS","-","ks",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oT","=","clamp","(","oT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"oU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oV",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lp","=","oU",";","ld","=","oV",";"]}]},{type:"node",name:"MATERIAL",declarations:[{type:"node_in",name:"oW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oX",qualifier:["float"],is_optional:false},{type:"node_in",name:"oY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oZ",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"o_",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pa",qualifier:["float"],is_optional:true},{type:"node_out",name:"pb",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"kQ",qualifier:["const","vec2"]},{type:"node_param",name:"kR",qualifier:["const","vec3"]}],statements:[{type:"textline",tokens:["ly","=","clamp","(","oW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lx","=","kR","[","0","]","*","clamp","(","oY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["lz","=","normalize","(","oZ",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["lz","=","ln",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["!","SHADELESS_MAT","&&","!","NODES_GLOW"],statements:[{type:"textline",tokens:["lA","=","k_","*","ly",";","lB","=","lb","*","u_environment_energy","*","kq","(","lz",")",";","lf","=","eZ","(","ly",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",">","0"],statements:[{type:"textline",tokens:["kU","=","vec2","(","kQ","[","0","]",",","kQ","[","1","]",")",";","kV","=","vec2","(","kR","[","1","]",",","kR","[","2","]",")",";","lG","=","jc","(","lA",",","lB",",","ly",",","lx",",","lo",",","lz",",","lm",",","kV",",","kU",",","lf",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","ZERO_VALUE_NODES",",","vec4","(","ZERO_VALUE_NODES",")",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["lG","=","jh","(","lA",",","lB",",","ly",")",";"]}]}]},{type:"textline",tokens:["lc","=","lf",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["lG",".","a","=","vec4","(","ly",",","ZERO_VALUE_NODES",")",";","lG",".","b","=","kr",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_o_"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["o_","=","lG",".","a",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["o_","=","kr",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["o_","+=","lG",".","b",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pa"],statements:[{type:"textline",tokens:["pa","=","clamp","(","oX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["pa","+=","lG",".","a",".","a","*","lx",".","r","*","la",";","pa","=","clamp","(","pa",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pb"],statements:[{type:"textline",tokens:["pb","=","lz",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["lq","=","lG",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["lq","=","kr",";"]}]}]},{type:"textline",tokens:["lr","=","lz",";"]}]},{type:"node",name:"MATERIAL_EXT",declarations:[{type:"node_in",name:"pc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pd",qualifier:["float"],is_optional:false},{type:"node_in",name:"pe",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pf",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pg",qualifier:["float"],is_optional:false},{type:"node_in",name:"ph",qualifier:["float"],is_optional:false},{type:"node_in",name:"pi",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"pj",qualifier:["float"],is_optional:false},{type:"node_in",name:"pk",qualifier:["float"],is_optional:false},{type:"node_out",name:"pl",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pm",qualifier:["float"],is_optional:true},{type:"node_out",name:"pn",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"po",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pp",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"kS",qualifier:["const","vec2"]},{type:"node_param",name:"kT",qualifier:["const","vec3"]}],statements:[{type:"textline",tokens:["lx","=","clamp","(","pc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lC","=","kT","[","0","]","*","clamp","(","pe",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["lD","=","normalize","(","pf",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["lD","=","ln",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["!","SHADELESS_MAT","&&","!","NODES_GLOW"],statements:[{type:"textline",tokens:["le","=","eZ","(","lx",")",";","lE","=","pg","*","lx",";","lF","=","lb","*","u_environment_energy","*","kq","(","lD",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",">","0"],statements:[{type:"textline",tokens:["kV","=","vec2","(","kS","[","0","]",",","kS","[","1","]",")",";","kU","=","vec2","(","kT","[","1","]",",","kT","[","2","]",")",";","lG","=","jc","(","lE",",","lF",",","lx",",","lC",",","lo",",","lD",",","lm",",","kU",",","kV",",","le",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","ph",",","pi",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["lG","=","jh","(","lE",",","lF",",","lx",")",";"]}]}]},{type:"textline",tokens:["lc","=","le",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["lG",".","a","=","vec4","(","lx",",","ZERO_VALUE_NODES",")",";","lG",".","b","=","kr",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pl"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["pl","=","lG",".","a",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["pl","=","kr",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["REFLECTION_TYPE","!=","REFL_NONE"],statements:[{type:"textline",tokens:["j_","(","pl",",","lm",",","lD",",","pj",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["pl","+=","lG",".","b",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pm"],statements:[{type:"textline",tokens:["pm","=","clamp","(","pd",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["pm","+=","lG",".","a",".","a","*","lC",".","r","*","pk",";","pm","=","clamp","(","pm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pn"],statements:[{type:"textline",tokens:["pn","=","lD",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_po"],statements:[{type:"textline",tokens:["po","=","lG",".","a",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pp"],statements:[{type:"textline",tokens:["pp","=","lG",".","b",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["lq","=","lG",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["lq","=","kr",";"]}]}]},{type:"textline",tokens:["lr","=","lD",";"]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"pq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pq","=","u_node_rgbs","[","RGB_IND","]",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"pr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ps",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ps","=","pr",".","r","*","0.35","+","pr",".","g","*","0.45","+","pr",".","b","*","0.2",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"pt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pu",qualifier:["float"],is_optional:true},{type:"node_out",name:"pv",qualifier:["float"],is_optional:true},{type:"node_out",name:"pw",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pu"],statements:[{type:"textline",tokens:["pu","=","pt",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pv"],statements:[{type:"textline",tokens:["pv","=","pt",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pw"],statements:[{type:"textline",tokens:["pw","=","pt",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"px",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"py",qualifier:["float"],is_optional:true},{type:"node_out",name:"pz",qualifier:["float"],is_optional:true},{type:"node_out",name:"pA",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["lC","=","kB","(","px",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_py"],statements:[{type:"textline",tokens:["py","=","lC",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pz"],statements:[{type:"textline",tokens:["pz","=","lC",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pA"],statements:[{type:"textline",tokens:["pA","=","lC",".","b",";"]}]}]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"pB",qualifier:["float"],is_optional:false},{type:"node_in",name:"pC",qualifier:["float"],is_optional:false},{type:"node_in",name:"pD",qualifier:["float"],is_optional:false},{type:"node_out",name:"pE",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pE","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","(","pB","-","pD",")","*","pC",")",")",")",";"]}]},{type:"node",name:"GAMMA",declarations:[{type:"node_in",name:"pF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pG",qualifier:["float"],is_optional:false},{type:"node_out",name:"pH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pH","=","max","(","kr",",","pF",")",";","pH","=","pow","(","pH",",","vec3","(","pG",")",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"pI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pJ","=","max","(","kr",",","pI",")",";","pJ","=","pow","(","pJ",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"pK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pL","=","max","(","kr",",","pK",")",";","pL","=","pow","(","pL",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_EMPTY",declarations:[{type:"node_out",name:"pM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pO","=","pM","[","0","]","=","pM","[","1","]","=","pM","[","2","]","=","pN","[","0","]","=","pN","[","1","]","=","pN","[","2","]","=","0.0",";"]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"pP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pQ",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pR",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]}],statements:[{type:"textline",tokens:["kX","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","pP",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pQ"],statements:[{type:"textline",tokens:["pQ","=","kX",".","xyz",";","fV","(","pQ",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pR"],statements:[{type:"textline",tokens:["pR","=","kX",".","w",";"]}]}]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"pS",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pT",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pU",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pV",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pW",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pX",qualifier:["float"],is_optional:true},{type:"node_out",name:"pY",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pZ",qualifier:["float"],is_optional:true},{type:"node_out",name:"p_",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qa",qualifier:["float"],is_optional:true},{type:"node_out",name:"qb",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qc",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["kX","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","kJ","(","pS",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pW"],statements:[{type:"textline",tokens:["pW","=","kX",".","xyz",";","fV","(","pW",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pX"],statements:[{type:"textline",tokens:["pX","=","kX",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["kX","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","kJ","(","pT",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pY"],statements:[{type:"textline",tokens:["pY","=","kX",".","xyz",";","fV","(","pY",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pZ"],statements:[{type:"textline",tokens:["pZ","=","kX",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["kX","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","kJ","(","pU",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_p_"],statements:[{type:"textline",tokens:["p_","=","kX",".","xyz",";","fV","(","p_",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qa"],statements:[{type:"textline",tokens:["qa","=","kX",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["kX","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","kJ","(","pV",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qb"],statements:[{type:"textline",tokens:["qb","=","kX",".","xyz",";","fV","(","qb",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qc"],statements:[{type:"textline",tokens:["qc","=","kX",".","w",";"]}]}]}]}]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"qd",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"qe",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"qf",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"qg",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qh",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qi",qualifier:["float"],is_optional:true},{type:"node_out",name:"qj",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qk",qualifier:["float"],is_optional:true},{type:"node_out",name:"ql",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qm",qualifier:["float"],is_optional:true},{type:"node_out",name:"qn",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qo",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["kX","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","kJ","(","qd",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qh"],statements:[{type:"textline",tokens:["qh","=","normalize","(","kY","*","(","kX",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qi"],statements:[{type:"textline",tokens:["qi","=","kX",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["kX","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","kJ","(","qe",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qj"],statements:[{type:"textline",tokens:["qj","=","normalize","(","kY","*","(","kX",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qk"],statements:[{type:"textline",tokens:["qk","=","kX",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["kX","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","kJ","(","qf",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ql"],statements:[{type:"textline",tokens:["ql","=","normalize","(","kY","*","(","kX",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qm"],statements:[{type:"textline",tokens:["qm","=","kX",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["kX","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","kJ","(","qg",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qn"],statements:[{type:"textline",tokens:["qn","=","normalize","(","kY","*","(","kX",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qo"],statements:[{type:"textline",tokens:["qo","=","kX",".","w",";"]}]}]}]}]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"qp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qp","=","u_node_values","[","VALUE_IND","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"qq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qs",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qt",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qs","=","qq","+","qr",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qt"],statements:[{type:"textline",tokens:["qt","=","(","abs","(","qs","[","0","]",")","+","abs","(","qs","[","1","]",")","+","abs","(","qs","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"qu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qx",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qw","=","qu","-","qv",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qx"],statements:[{type:"textline",tokens:["qx","=","(","abs","(","qw","[","0","]",")","+","abs","(","qw","[","1","]",")","+","abs","(","qw","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"qy",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qB",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qA","=","qy","+","qz",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qB"],statements:[{type:"textline",tokens:["qB","=","length","(","qA",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qA"],statements:[{type:"textline",tokens:["qA","=","normalize","(","qA",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"qC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qF",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qE","=","kr",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qF"],statements:[{type:"textline",tokens:["qF","=","dot","(","qC",",","qD",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"qG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qJ",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qI","=","cross","(","qG",",","qH",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qJ"],statements:[{type:"textline",tokens:["qJ","=","length","(","qI",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"qK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qN",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qM","=","normalize","(","qK",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qN"],statements:[{type:"textline",tokens:["qN","=","length","(","qK",")",";"]}]}]},{type:"textline",tokens:["qL",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"qO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qQ","=","reflect","(","-","qO",",","qP",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"qR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qS",qualifier:["float"],is_optional:false},{type:"node_in",name:"qT",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"qU",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"qV",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["lg","=","length","(","kW",")",";","if","(","lg","<","qU",")","{","kU","=","kJ","(","qR",")",";","lh","=","clamp","(","0.5","*","(","qU","-","lg",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lh","=","qS","*","lh",";","lC","=","normalize","(","lm","*","kY",")",";","li","=","UNITY_VALUE_NODES","/","qT",";","kV","=","lC",".","xy","*","lh","/","(","qT","*","lC",".","z",")",";","lj","=","UNITY_VALUE_NODES",";","lk","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","kU",")",".","a",";","for","(","float","qW","=","1.0",";","qW","<=","qT",";","qW","++",")","{","if","(","lk","<","lj",")","{","lj","-=","li",";","kU","-=","kV",";","lk","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","kU",")",".","a",";","}","}","kV","=","kU","+","kV",";","li","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","kV",")",".","a","-","(","lj","+","li",")",";","lj","=","lk","-","lj",";","lj","=","lj","/","(","lj","-","li",")",";","kU","=","lj","*","kV","+","(","UNITY_VALUE_NODES","-","lj",")","*","kU",";","qV","=","kH","(","kU",")",";","}","else","qV","=","qR",";"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"qX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qY",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qY","=","clamp","(","qX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"qZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"q_",qualifier:["float"],is_optional:false},{type:"node_out",name:"ra",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ra","=","kw","(","qZ",",","q_",")",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"rb",qualifier:["float"],is_optional:false},{type:"node_in",name:"rc",qualifier:["float"],is_optional:false},{type:"node_in",name:"rd",qualifier:["float"],is_optional:false},{type:"node_in",name:"re",qualifier:["float"],is_optional:false},{type:"node_in",name:"rf",qualifier:["float"],is_optional:false},{type:"node_out",name:"rg",qualifier:["float"],is_optional:true},{type:"node_out",name:"rh",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rg"],statements:[{type:"textline",tokens:["rg","=","rb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rh"],statements:[{type:"textline",tokens:["rh","=","vec4","(","rc",",","rd",",","re",",","rf",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"ri",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ri","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"rj",qualifier:["float"],is_optional:false},{type:"node_in",name:"rk",qualifier:["float"],is_optional:false},{type:"node_in",name:"rl",qualifier:["float"],is_optional:false},{type:"node_out",name:"rm",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["rm","=","smoothstep","(","rk",",","rl",",","rj",")",";"]}]},{type:"node",name:"B4W_GLOW_OUTPUT",declarations:[{type:"node_in",name:"rn",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ro",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lp","=","rn",";","ld","=","ro",";"]}]},{type:"node",name:"B4W_VECTOSCAL",declarations:[{type:"node_in",name:"rp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rq",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["rq","=","(","rp",".","r","+","rp",".","g","+","rp",".","b",")","/","3.0",";"]}]},{type:"node",name:"B4W_SCALTOVEC",declarations:[{type:"node_in",name:"rr",qualifier:["float"],is_optional:false},{type:"node_out",name:"rs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rs","[","0","]","=","rr",";","rs","[","1","]","=","rr",";","rs","[","2","]","=","rr",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{","vec2","kU",",","kV",";","vec4","kW",",","kX",";","mat3","kY",";","float","kZ",",","k_",",","la",",","lb",",","lc",",","ld",",","le",",","lf",",","lg",",","lh",",","li",",","lj",",","lk",";","vec3","ll",",","lm",",","ln",",","lo",",","lp",",","lq",",","lr",",","ls",",","lt",",","lu",",","lv",",","lw",",","lx",",","ly",",","lz",",","lA",",","lB",",","lC",",","lD",",","lE",",","lF",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG","||","(","CAUSTICS","&&","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["ll","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["kZ","=","jC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["lm","=","jD",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","lm","=","lm",";","else","lm","=","-","lm",";"]}]}}]},{type:"textline",tokens:["ln","=","normalize","(","lm",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["lo","=","cross","(","lm",",","jE",".","xyz",")","*","jE",".","w",";","kY","=","mat3","(","jE",".","xyz",",","lo",",","lm",")",";","kY","=","kY",";"]}]}}]},{type:"textline",tokens:["lo","=","u_camera_eye_frag","-","jC",";","lm","=","normalize","(","lo",")",";","lo","=","jC",";","kW","=","cJ",";","k_","=","u_emit",";","la","=","u_specular_alpha",";","lb","=","u_ambient",";","gO","lG",";"]},{type:"nodes_main"},{type:"textline",tokens:["lC","=","lp",";","li","=","ld",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["lC","=","max","(","lC","-","sqrt","(","0.01","*","-","min","(","kZ",",","ZERO_VALUE_NODES",")",")",",","0.5","*","lC",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["jA","(","lC",",","kZ",",","u_time",",","lc",",","lr",",","u_sun_direction",",","ll",",","u_sun_quaternion",",","jC",",","length","(","cJ",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","(","!","PROCEDURAL_FOG","||","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["lj","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["lp","=","gm","(","u_cube_fog",",","lm",")",";","kX","=","vec4","(","lp",",","u_fog_color_density",".","a",")",";","fV","(","kX",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kX","=","u_fog_color_density",";","kX",".","rgb","*=","lj",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["gC","(","lC",",","length","(","cJ",")",",","lm",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","kX",",","kZ",",","lj",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gg","(","lC",",","length","(","cJ",")",",","kX",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","li","<","0.5",")","discard",";","li","=","UNITY_VALUE_NODES",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["kV","=","texture2DProj","(","u_shadow_mask",",","cI",")",".","rg",";","ld","=","kV",".","g",";","lC","=","vec3","(","ld",")",";"]}]}}]},{type:"textline",tokens:["fX","(","lC",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP","||","NODES_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["f_","(","lC",",","li",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lC",",","li",")",";","}"]}]},exports["nodes.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jC",";","varying","vec4","cJ",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","jE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","jG",";"]}]}}]},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"kK",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["kK","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"kP",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["kP","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"kQ",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["kQ","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"kR",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["kR","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"kS",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["kS","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{","vec4","kT",";","float","kU",",","kV",",","kW",";","mat4","kX",";","vec3","kY",",","kZ",",","k_",",","la",",","lb",",","lc",",","ld",";","kY","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["kZ","=","a_normal",";","k_","=","vec3","(","a_tangent",")",";","la","=","a_tangent","[","3","]","*","cross","(","kZ",",","k_",")",";"]}]}},{type:"elif",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["kZ","=","a_normal",";","k_","=","vec3","(","0.0",")",";","la","=","vec3","(","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kZ","=","vec3","(","0.0",")",";","k_","=","vec3","(","0.0",")",";","la","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["kY","=","mix","(","kY",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["kZ","=","mix","(","kZ",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["lb","=","vec3","(","a_tangent",")",";","lc","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","lb",")",";","k_","=","mix","(","k_",",","lb",",","u_va_frame_factor",")",";","la","=","mix","(","la",",","lc",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bv","(","kY",",","k_",",","la",",","kZ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["lb","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lb","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["lc","=","(","u_model_matrix","*","vec4","(","lb",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["kX","=","ao","(","u_camera_eye",",","lc",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kX","=","ai","(","u_camera_eye",",","lc",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["ld","=","(","u_model_matrix","*","vec4","(","lb",",","1.0",")",")",".","xyz",";","kX","=","kX","*","aa","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","ld",")",";"]}]}}]},{type:"textline",tokens:["d","le","=","av","(","kY","-","lb",",","lb",",","k_",",","la",",","kZ",",","kX",")",";","le",".","b","=","lc",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","le","=","av","(","kY",",","lb",",","k_",",","la",",","kZ",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cj","(","le",".","a",",","le",".","b",",","kZ",")",";"]}]}}]},{type:"textline",tokens:["jC","=","le",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["jD","=","le",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["kU","=","(","dot","(","cross","(","le",".","e",",","le",".","c",")",",","le",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","jE","=","vec4","(","le",".","c",",","kU",")",";"]}]}}]},{type:"textline",tokens:["cJ","=","u_view_matrix","*","vec4","(","le",".","a",",","1.0",")",";","kT","=","u_proj_matrix","*","cJ",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["kT",".","xy","+=","u_subpixel_jitter","*","kT",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["fO","(","kT",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["fO","(","le",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["kU","=","kT",".","x",";","kV","=","kT",".","y",";","kW","=","kT",".","w",";","cI",".","x","=","(","kU","+","kW",")","/","2.0",";","cI",".","y","=","(","kV","+","kW",")","/","2.0",";","cI",".","z","=","kW",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["jG","=","-","cJ",".","z","/","u_view_max_depth",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["gl_Position","=","kT",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec4","u_fog_color_density",";","varying","float","kT",";","varying","vec3","jF",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cJ",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","kU",";","float","kV",";","kV","=","2.0","*","sqrt","(","(","gl_PointCoord",".","x","-","0.5",")","*","(","gl_PointCoord",".","x","-","0.5",")","+","(","gl_PointCoord",".","y","-","0.5",")","*","(","gl_PointCoord",".","y","-","0.5",")",")",";","kV","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","kV",")",";","kV","=","u_diffuse_color",".","a","*","kT","*","(","1.0","-","clamp","(","kV",",","0.0",",","1.0",")",")",";","kU","=","jF","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gg","(","kU",",","length","(","cJ",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["fX","(","kU",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["f_","(","kU",",","kV",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kU",",","kV",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["!","WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["varying","float","kT",";","varying","vec3","jF",";","varying","vec3","cJ",";"]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["void","main","(",")","{","float","lG",";","vec4","lH",";","kU","lI",";","lI","=","lF","(",")",";","lH","=","u_view_matrix","*","vec4","(","lI",".","b",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","lH",";","kT","=","lI",".","c",";","jF","=","lI",".","d",";","cJ","=","lH",".","xyz",";","lG","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","gl_PointSize","=","lI",".","a","*","lG",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"fog.glslf"},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","varying","float","kT",";","varying","vec3","jF",";","varying","vec2","a",";","varying","vec3","jB",";","varying","vec3","jC",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"textline",tokens:["void","main","(",")","{","vec2","kr",";","float","ks",";","vec3","kt",",","ku",",","kv",",","kw",",","kx",",","ky",";","vec4","kz",",","kA",";","kz","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["kA","=","texture2D","(","u_sampler",",","a",")",";","fV","(","kA",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["kz",".","rgb","=","mix","(","kz",".","rgb",",","kA",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["kz",".","rgb","*=","mix","(","vec3","(","1.0",")",",","kA",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["kz",".","a","=","kA",".","a",";"]}]}}]},{type:"textline",tokens:["kz",".","rgb","*=","jF",";","kt","=","u_diffuse_intensity","*","kz",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","PARTICLES_SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["ku","=","u_emit","*","kz",".","rgb",";","kv","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","&&","!","SKY_TEXTURE","&&","SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["kw","=","u_environment_energy","*","kq","(","vec3","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kw","=","u_environment_energy","*","kq","(","kv",")",";"]}]}}]},{type:"textline",tokens:["kw","=","u_ambient","*","kw",";","ks","=","u_specular_params","[","0","]",";","kr","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","kx","=","ks","*","u_specular_color",";","ky","=","normalize","(","jB",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["gO","kB","=","jc","(","ku",",","kw",",","kt",",","kx",",","jC",",","kv",",","ky",",","kr",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","0.0",",","vec4","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gO","kB","=","jh","(","ku",",","kw",",","kt",")",";"]}]}}]},{type:"textline",tokens:["kx","=","kB",".","a",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kx","=","kt",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gg","(","kx",",","length","(","cJ",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["ks","=","kz",".","a","*","kT",";","fX","(","kx",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["f_","(","kx",",","ks",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kx",",","ks",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","vec3","u_camera_eye",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["!","WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["varying","float","kT",";","varying","vec3","jF",";","varying","vec2","a",";","varying","vec3","jB",";","varying","vec3","jC",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["float","kt","(","vec2","kr",",","vec2","ks",")","{","return","(","atan","(","ks",".","y",",","ks",".","x",")","-","atan","(","kr",".","y",",","kr",".","x",")",")",";","}","void","main","(",")","{","vec4","ku",",","kv",",","kw",";","mat4","kx",";","float","ky",";","kU","kz",";","kz","=","lF","(",")",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","ky","=","kz",".","e",";","kx","=","N","(","kz",".","b",",","u_view_matrix",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","ky","=","kz",".","e",";","kx","=","x","(",")",";","kx","[","3","]","=","vec4","(","kz",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","ky","=","kz",".","e",";","kx","=","B","(","radians","(","90.0",")",")",";","kx","[","3","]","=","vec4","(","kz",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","ky","=","kt","(","vec2","(","EPSILON",",","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","kz",".","e",";","kx","=","z","(","radians","(","-","90.0",")",")",";","kx","[","3","]","=","vec4","(","kz",".","b",",","1.0",")",";","}","ku","=","vec4","(","a_p_bb_vertex","*","2.0","*","kz",".","a","*","u_p_size",",","0.0",",","1.0",")",";","ku","=","kx","*","D","(","ky",")","*","ku",";","kv","=","u_view_matrix","*","ku",";","kw","=","u_proj_matrix","*","kv",";","gl_Position","=","kw",";","kT","=","kz",".","c",";","jF","=","kz",".","d",";","a","=","a_p_bb_vertex","+","0.5",";","jC","=","ku",".","xyz",";","jB","=","u_camera_eye","-","ku",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["cJ","=","kv",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","lG",";","const","float","lH","=","0.99",";","const","float","lI","=","1.8",";","const","int","lJ","=","8",";","float","lP","(","vec3","lK",",","vec3","lL",")","{","float","lM",",","lN",",","lO",";","lM","=","dot","(","lL",",","lL",")",";","lN","=","2.0","*","dot","(","lL",",","lK",")",";","lO","=","dot","(","lK",",","lK",")","-","1.0",";","lM","=","lN","*","lN","-","4.0","*","lM","*","lO",";","lM","=","sqrt","(","lM",")",";","lN","=","(","-","lN","-","lM",")","/","2.0",";","lM","=","lO","/","lN",";","return","lM",";","}","float","lW","(","float","lQ",",","float","lR",")","{","float","lS",",","lT",",","lU",",","lV",";","lS","=","3.0","*","(","1.0","-","lR","*","lR",")",";","lT","=","2.0","*","(","2.0","+","lR","*","lR",")",";","lU","=","1.0","+","lQ","*","lQ",";","lV","=","pow","(","1.0","+","lR","*","lR","-","2.0","*","lR","*","lQ",",","1.5",")",";","lV","=","max","(","lV",",","0.00001",")",";","return","(","lS","/","lT",")","*","(","lU","/","lV",")",";","}","float","mb","(","vec3","lX",",","vec3","lY",",","float","lZ",")","{","vec3","l_",";","float","ma",";","ma","=","dot","(","lY",",","-","lX",")",";","if","(","ma","<","0.0",")","{","return","1.0",";","}","l_","=","lX","+","ma","*","lY",";","if","(","length","(","l_",")","<","lZ",")","{","return","0.0",";","}","else","if","(","length","(","l_",")",">=","lZ",")","{","l_","=","normalize","(","l_",")","*","lZ","-","lX",";","ma","=","acos","(","dot","(","normalize","(","l_",")",",","lY",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","ma","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","mf","(","float","mc",",","vec3","md",",","float","me",")","{","return","md","-","md","*","pow","(","u_sky_color",",","vec3","(","me","/","mc",")",")",";","}","void","main","(",")","{","float","mg",",","mh",",","mi",",","mj",",","mk",",","ml",",","mm",",","mn",",","mo",";","vec3","mp",",","mq",",","mr",",","ms",",","mt",",","mu",",","mv",";","mp","=","normalize","(","lG",")",";","mq","=","u_sun_direction",";","mg","=","dot","(","mp",",","mq",")",";","mh","=","lW","(","mg",",","-","0.01",")","*","u_rayleigh_brightness","*","mq",".","y",";","mi","=","lW","(","mg","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","mq",".","y",")",";","mg","=","smoothstep","(","0.0",",","100.0",",","lW","(","mg",",","0.9995",")",")","*","u_spot_brightness",";","mr","=","vec3","(","0.0",",","lH",",","0.0",")",";","mj","=","lP","(","mr",",","mp",")",";","mk","=","mj","/","float","(","lJ",")",";","ml","=","mb","(","mr",",","mp",",","lH","-","0.3",")",";","ms","=","vec3","(","0.0",",","0.0",",","0.0",")",";","mt","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","mw","=","0",";","mw","<","lJ",";","mw","++",")","{","mm","=","mk","*","float","(","mw",")",";","mu","=","mr","+","mp","*","mm",";","mn","=","mb","(","mu",",","mq",",","lH","-","0.2",")",";","mo","=","lP","(","mu",",","mq",")",";","mv","=","mf","(","mo",",","vec3","(","lI",")",",","u_scatter_strength",")","*","mn",";","ms","+=","mf","(","sqrt","(","mm",")",",","u_sky_color","*","mv",",","u_rayleigh_strength",")",";","mt","+=","mf","(","mm",",","mv",",","u_mie_strength",")",";","}","ms","=","ms","*","ml","*","pow","(","mj",",","u_rayleigh_collection_power",")","/","float","(","lJ",")",";","mt","=","(","mt","*","ml","*","pow","(","mj",",","u_mie_collection_power",")",")","/","float","(","lJ",")",";","mt","=","vec3","(","mg","*","mt","+","mi","*","mt","+","mh","*","ms",")",";","fX","(","mt",")",";","gl_FragColor","=","vec4","(","mt",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","lG",";","void","main","(",")","{","vec4","kr",",","ks",";","kr","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","ks","=","u_cube_view_matrix","*","kr",";","lG","=","ks",".","xyz",";","gl_Position","=","kr",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","a",";","void","main","(",")","{","vec4","kr",";","kr","=","texture2D","(","u_sampler",",","a",")",";","fX","(","kr",".","rgb",")",";","f_","(","kr",".","rgb",",","kr",".","a",")",";","gl_FragColor","=","kr",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","a",";","void","main","(",")","{","vec2","kr",";","float","ks",";","vec4","kt",";","vec3","ku",";","a","=","a_texcoord",";","ku","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","kt","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","ku",",","0.0",")",";","kt",".","x","/=","kt",".","w",";","kt",".","y","/=","kt",".","w",";","kt","+=","99999.0","*","step","(","kt",".","z",",","0.0",")",";","kt","+=","100.0","*","(","step","(","1.0",",","abs","(","kt",".","x",")",")","+","step","(","1.0",",","abs","(","kt",".","y",")",")",")",";","kt",".","x","=","-","a_lf_dist","*","kt",".","x",";","kt",".","y","=","-","a_lf_dist","*","kt",".","y",";","ks","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","kr","=","vec2","(","a_lf_bb_vertex",".","x","/","ks",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","kv","=","1.9",";","kr","*=","(","1.0","+","kv","*","length","(","kt",".","xy",")",")",";","}","gl_Position","=","vec4","(","kt",".","xy","+","kr",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"define",name:"INV_PI",tokens:["0.318309886"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX","||","PROCEDURAL_SKYDOME"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","PROCEDURAL_SKYDOME","&&","WO_SKYTEX"],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"blending.glslf"},{type:"textline",tokens:["uniform","vec4","u_sky_tex_fac",";","uniform","vec3","u_sky_tex_color",";","uniform","float","u_sky_tex_dvar",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_world_vec",";"]}]}}]},{type:"textline",tokens:["vec3","kw","(","vec3","kr",",","vec3","ks",",","float","kt",",","float","ku",")","{","float","kv",";","kv","=","kt","*","ku",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","==","MTEX_BLEND"],group:{type:"group",parts:[{type:"textline",tokens:["return","lX","(","ks",",","kr",",","kv",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_ADD"],group:{type:"group",parts:[{type:"textline",tokens:["return","ma","(","kr",",","ks",",","kv",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_SUB"],group:{type:"group",parts:[{type:"textline",tokens:["return","me","(","kr",",","ks",",","kv",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_MUL"],group:{type:"group",parts:[{type:"textline",tokens:["return","mj","(","kr",",","ks",",","kv",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_SCREEN"],group:{type:"group",parts:[{type:"textline",tokens:["return","mo","(","kr",",","ks",",","kv",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_OVERLAY"],group:{type:"group",parts:[{type:"textline",tokens:["return","mt","(","kr",",","ks",",","kv",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_DIFF"],group:{type:"group",parts:[{type:"textline",tokens:["return","mx","(","kr",",","ks",",","kv",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_DIV"],group:{type:"group",parts:[{type:"textline",tokens:["return","mB","(","kr",",","ks",",","kv",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_DARK"],group:{type:"group",parts:[{type:"textline",tokens:["return","mF","(","kr",",","ks",",","kv",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["return","mJ","(","kr",",","ks",",","kv",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_BLEND_HUE"],group:{type:"group",parts:[{type:"textline",tokens:["return","mP","(","ks",",","kr",",","kv",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_BLEND_SAT"],group:{type:"group",parts:[{type:"textline",tokens:["return","mV","(","ks",",","kr",",","kv",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_BLEND_VAL"],group:{type:"group",parts:[{type:"textline",tokens:["return","na","(","ks",",","kr",",","kv",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_BLEND_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["return","ng","(","ks",",","kr",",","kv",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_SOFT_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["return","nl","(","ks",",","kr",",","kv",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_LIN_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["return","np","(","ks",",","kr",",","kv",")",";"]}]}}]},{type:"textline",tokens:["return","vec3","(","1.0",",","0.0",",","1.0",")",";","}","float","kE","(","float","kx",",","float","ky",",","float","kz",",","float","kA",")","{","float","kB",";","vec3","kC",",","kD",";","kC","=","vec3","(","kx",")",",","kD","=","vec3","(","ky",")",";","kB","=","kz","*","kA",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","==","MTEX_BLEND"],group:{type:"group",parts:[{type:"textline",tokens:["return","lX","(","kD",",","kC",",","kB",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_ADD"],group:{type:"group",parts:[{type:"textline",tokens:["return","ma","(","kC",",","kD",",","kB",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_SUB"],group:{type:"group",parts:[{type:"textline",tokens:["return","me","(","kC",",","kD",",","kB",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_MUL"],group:{type:"group",parts:[{type:"textline",tokens:["return","nv","(","kx",",","ky",",","kB",",","kA",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_SCREEN"],group:{type:"group",parts:[{type:"textline",tokens:["return","nB","(","kx",",","ky",",","kB",",","kA",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_OVERLAY"],group:{type:"group",parts:[{type:"textline",tokens:["return","nH","(","kx",",","ky",",","kB",",","kA",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_DIFF"],group:{type:"group",parts:[{type:"textline",tokens:["return","mx","(","kC",",","kD",",","kB",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_DIV"],group:{type:"group",parts:[{type:"textline",tokens:["return","mB","(","kC",",","kD",",","kB",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_DARK"],group:{type:"group",parts:[{type:"textline",tokens:["return","mF","(","kC",",","kD",",","kB",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["return","mJ","(","kC",",","kD",",","kB",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_SOFT_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["return","nl","(","kD",",","kC",",","kB",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","==","MTEX_LIN_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["return","np","(","kD",",","kC",",","kB",")",".","x",";"]}]}}]},{type:"textline",tokens:["return","0.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","PROCEDURAL_SKYDOME"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","lG",";"]},{type:"condition",parts:[{type:"if",expression:["!","PROCEDURAL_SKYDOME","&&","(","WO_SKYTEX","||","WO_SKYBLEND",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","kF",";","float","kG",",","kH",",","kI",";","vec3","kJ",",","nI",",","nJ",",","nK",",","nL",";","nI","=","normalize","(","lG",")",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME"],group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","textureCube","(","u_sky",",","nI",")",".","rgb",";"]}]}},{type:"elif",expression:["!","(","WO_SKYTEX","||","WO_SKYBLEND",")"],group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","u_horizon_color",";","fX","(","kJ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"textline",tokens:["nJ","=","vec3","(","a",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nJ","=","normalize","(","vec3","(","a",",","1.0",")",")",";"]}]}}]},{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["kG","=","abs","(","a",".","y",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kG","=","(","a",".","y","+","1.0",")","*","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kH","=","acos","(","nI",".","y",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["kG","=","abs","(","kH","*","INV_PI","-","0.5",")","*","2.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kG","=","1.0","-","kH","*","INV_PI",";"]}]}}]}]}}]}]}}]},{type:"textline",tokens:["nK","=","u_horizon_color",";","nL","=","u_zenith_color",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX"],group:{type:"group",parts:[{type:"textline",tokens:["kH","=","1.0",";","kF","=","textureCube","(","u_sky",",","nI",")",";","fV","(","kF",".","rgb",")",";","kH","=","kF",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["kH","=","dot","(","kF",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MTEX_NEGATIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["!","MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["kF","=","vec4","(","vec3","(","1.0",")","-","kF",".","rgb",",","kF",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kH","=","1.0","-","kH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ","||","WOMAP_ZENUP","||","WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["kF","=","vec4","(","u_sky_tex_color",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kH","=","kF",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ"],group:{type:"group",parts:[{type:"textline",tokens:["nK","=","kw","(","kF",".","rgb",",","nK",",","kH",",","u_sky_tex_fac","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP","||","WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["kI","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","nJ",",","u_world_vec",")",">=","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["kI","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["else","kI","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["kI","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"elif",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["kI","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","kI","!=","0.0",")","nL","=","kw","(","kF",".","rgb",",","nL",",","kH",",","kI",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_BLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["!","MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["kH","=","dot","(","kF",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";"]}]}}]},{type:"textline",tokens:["kG","=","kE","(","u_sky_tex_dvar",",","kG",",","kH",",","u_sky_tex_fac","[","0","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","mix","(","nK",",","nL",",","kG",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","nK",";"]}]}}]},{type:"textline",tokens:["fX","(","kJ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fX","(","nK",")",";","fX","(","nL",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","mix","(","nK",",","nL",",","kG",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","nK",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG","&&","!","REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["fV","(","kJ",")",";","kI","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","kI","=","min","(","-","kI","*","0.03",",","0.8",")",";","kH","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";","nJ","=","vec3","(","0.0",")",";","kF","=","u_underwater_fog_color_density",";","kF",".","rgb","=","mix","(","kF",".","rgb",",","nJ",",","min","(","-","nI",".","y","+","kI",",","1.0",")",")","*","kH",";","kG","=","clamp","(","sign","(","nI",".","y","-","0.05","*","kI",")",",","0.0",",","1.0",")",";","kJ","=","mix","(","kF",".","rgb",",","kJ",",","kG",")",";","fX","(","kJ",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kJ",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","lG",";"]},{type:"condition",parts:[{type:"if",expression:["!","PROCEDURAL_SKYDOME","&&","(","WO_SKYTEX","||","WO_SKYBLEND",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","kr",",","ks",";","kr","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","ks","=","u_sky_vp_inverse","*","kr",";","lG","=","ks",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","PROCEDURAL_SKYDOME","&&","(","WO_SKYTEX","||","WO_SKYBLEND",")"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","a_position",".","xy",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","kr",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0005"]},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","REFRACTIVE","||","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_MIRRORMAP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_scene_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_norm_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_MIRRORMAP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","kr","=","1.0",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jB",";","varying","vec3","jC",";"]},{type:"condition",parts:[{type:"if",expression:["(","NUM_NORMALMAPS",">","0","||","FOAM",")","&&","!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jD",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jE",";","varying","vec3","nI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","nJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","nK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTION_TYPE","==","REFL_PLANE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTION_TYPE","==","REFL_PLANE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","jG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","nL",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","&&","SHORE_SMOOTHING","&&","USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["vec3","nX","(","in","vec2","nM",",","in","vec3","nN",",","in","vec3","nO",",","in","vec3","nP",",","out","float","nQ",")","{","float","nR",",","nS",",","nT",";","vec2","nU",";","vec3","nV",",","nW",";","nV","=","reflect","(","-","nO",",","nN",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE"],group:{type:"group",parts:[{type:"textline",tokens:["nU","=","nM",".","xy","+","nN",".","xz","*","REFL_BUMP","/","jG",";","nQ","=","u_reflect_factor",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["nW","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nW","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["nR","=","dot","(","nO",",","nN",")",";","nQ","*=","max","(","1.0","-","1.0","/","nR",",","1.0",")",";","}","else","{","nW","=","texture2D","(","u_plane_reflection",",","nU",")",".","rgb",";","fV","(","nW",")",";","}"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_MIRRORMAP"],group:{type:"group",parts:[{type:"textline",tokens:["nQ","=","u_mirror_factor",";","nW","=","nP","*","textureCube","(","u_mirrormap",",","nV",")",".","rgb",";","fV","(","nW",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nQ","=","u_reflect_factor",";","nW","=","nP","*","vec3","(","0.3",",","0.5",",","1.0",")",";","fV","(","nW",")",";"]}]}}]},{type:"textline",tokens:["nV","=","normalize","(","nV","+","nO",")",";","nR","=","1.0","-","dot","(","nO",",","nV",")",";","nS","=","u_fresnel_params","[","3","]",";","nT","=","u_fresnel_params","[","2","]",";","nS","=","nS","+","(","1.0","-","nS",")","*","pow","(","nR",",","nT",")",";","nQ","=","min","(","nQ","*","nS",",","1.0",")",";","return","nW",";","}","void","main","(",")","{","vec4","nY",";","vec2","nZ",",","n_",",","oa",";","float","ob",",","oc",",","od",",","oe",",","of",",","og",";","vec3","oh",",","oi",",","oj",",","ok",",","ol",",","om",",","on",";","mat3","oo",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["oo","=","mat3","(","jE",",","nI",",","jD",")",";"]}]}}]},{type:"textline",tokens:["oh","=","normalize","(","jD",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["oo","=","mat3","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","-","1.0",",","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["oh","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["ob","=","jC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0","||","FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["nZ","=","vec2","(","nJ",".","x",",","-","nJ",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nZ","=","vec2","(","jC",".","x",",","-","jC",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nZ","=","a",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["oi","=","vec3","(","0.0",")",";","oj","=","texture2D","(","u_normalmap0",",","nZ","*","u_normalmap0_scale","+","vec2","(","0.3",",","0.5",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","oi","+=","oj",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["ok","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["ok","+=","oj",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["oj","=","texture2D","(","u_normalmap0",",","nZ","*","u_normalmap1_scale","+","vec2","(","-","0.3",",","0.7",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","oi","+=","oj",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["ok","+=","oj",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["oj","=","texture2D","(","u_normalmap0",",","nZ","*","u_normalmap2_scale","+","vec2","(","0.0",",","1.1",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","oi","+=","oj",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["ok","+=","oj",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["oj","=","texture2D","(","u_normalmap0",",","nZ","*","u_normalmap3_scale","+","vec2","(","-","0.66",",","-","0.3",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","oi","+=","oj",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["ok","+=","oj",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["oj","=","oo","*","ok",";","if","(","!","g","(","oj",",","vec3","(","0.0",")",")",")","oj","=","normalize","(","oj",")",";","ok","=","mix","(","oh",",","oj",",","0.2",")",";","ok","=","normalize","(","ok",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["oh","=","mix","(","oh",",","normalize","(","oo","*","oi",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["oh","=","mix","(","oh",",","normalize","(","oo","*","oi",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["oh","=","normalize","(","oh",")",";"]}]}}]},{type:"textline",tokens:["oj","=","normalize","(","jB",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["n_","=","cI",".","xy","/","cI",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["oc","=","jG","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["od","=","u_diffuse_color",".","a",";","nY","=","texture2DProj","(","u_scene_depth",",","cI",")",";","oe","=","cu","(","nY",")",";","of","=","max","(","oe","-","jG",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["oa","=","n_","+","oh",".","xz","*","u_refr_bump","/","jG",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["og","=","kf","(","oe",",","oa",",","n_",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["oa","=","n_",";","og","=","oe",";"]}]}}]},{type:"textline",tokens:["oe","=","max","(","og","-","jG",",","0.0",")",";","og","=","u_view_max_depth","/","ABSORB","*","oe",";","if","(","u_cam_water_depth","<","0.0",")","oe","=","0.0",";","else","oe","=","min","(","od","*","og",",","1.0",")",";","og","=","u_view_max_depth","/","ABSORB","*","of",";","od","=","min","(","15.0","*","od","*","u_view_max_depth","*","of",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["og","=","u_view_max_depth","/","ABSORB","*","of",";","if","(","u_cam_water_depth",">","0.0",")","od","=","min","(","od","*","og",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["od","*=","min","(","5.0","*","oc",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["od","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["oe","=","1.0","-","od",";","oa","=","n_","+","oh",".","xz","*","REFR_BUMP","/","jG",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["oi","=","texture2D","(","u_refractmap",",","oa",")",".","rgb",";","fV","(","oi",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["og","=","pow","(","min","(","nK",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","ol","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","og",")",";","og","=","pow","(","min","(","nK",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","ol","=","mix","(","u_shore_water_col",",","ol",",","og",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ol","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["og","=","max","(","1.0","-","u_view_max_depth","*","of",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["og","=","1.0","-","od",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["of","=","max","(","ob","/","WAVES_HEIGHT","+","0.1",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["om","=","normalize","(","vec3","(","nK",".","r",",","0.0",",","nK",".","g",")",")",";","om","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","om",",","0.8",")",")",";","ob","=","1.25","*","max","(","dot","(","ok",",","om",")","-","0.2",",","0.0",")",";","ob","+=","max","(","dot","(","ok",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",",","0.0",")",";","og","+=","ob","*","(","1.0","-","nK",".","b",")",";","of","*=","(","1.0","-","0.95","*","pow","(","nK",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["og","+=","of",";","og","=","min","(","u_foam_factor","*","og",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["nY","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","nZ","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["ob","=","u_specular_params","[","0","]",";","oa","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","om","=","ob","*","u_specular_color",";","ok","=","u_environment_energy","*","kq","(","oh",")",";","ok","=","u_ambient","*","ok",";","ok","=","ok","+","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE"],group:{type:"group",parts:[{type:"textline",tokens:["on","=","nX","(","n_",",","oh",",","oj",",","ok",",","of",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["on","=","nX","(","vec2","(","0.0",")",",","oh",",","oj",",","ok",",","of",")",";"]}]}}]},{type:"textline",tokens:["ol","=","u_diffuse_intensity","*","ol",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["gO","op","=","jc","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ol",",","om",",","jC",",","oh",",","oj",",","oa",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","0.0",",","vec4","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gO","op","=","jh","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ol",")",";"]}]}}]},{type:"textline",tokens:["ol","=","op",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["ob","=","max","(","dot","(","u_sun_direction",",","-","jD",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","oj",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","ob","=","clamp","(","SSS_STRENGTH","*","ob",",","0.0",",","1.0",")",";","ol","=","mix","(","ol",",","u_shallow_water_col",",","ob",")",";","ol","=","mix","(","ol",",","u_shore_water_col",",","ob",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["ol","=","mix","(","oi",",","ol",",","oe",")",";"]}]}}]},{type:"textline",tokens:["ol","=","mix","(","ol",",","on",",","of",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["ob","=","mix","(","nY",".","g",",","nY",".","r",",","max","(","4.0","*","(","og","-","0.75",")",",","0.0",")",")",";","ob","=","mix","(","nY",".","b",",","ob",",","max","(","2.0","*","og","-","1.0",",","0.0",")",")",";","ob","=","mix","(","0.0",",","ob",",","og",")",";","ol","=","mix","(","ol",",","ok",",","ob",")",";"]}]}}]},{type:"textline",tokens:["ol","+=","op",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["om","=","gm","(","u_cube_fog",",","oj",")",";","nY","=","vec4","(","om",",","u_fog_color_density",".","a",")",";","fV","(","nY",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nY","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","gK","(","ol",",","oc",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",")",";","}","else","{","gg","(","ol",",","oc",",","nY",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gg","(","ol",",","oc",",","nY",")",";"]}]}}]}]}}]},{type:"textline",tokens:["fX","(","ol",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["od","=","max","(","od",",","op",".","b",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["od","+=","ob",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["f_","(","ol",",","od",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["oh","=","fwidth","(","nL",")",";","oi","=","smoothstep","(","vec3","(","0.0",")",",","oh","*","kr",",","nL",")",";","oe","=","min","(","min","(","oi",".","x",",","oi",".","y",")",",","oi",".","z",")",";","oe","=","clamp","(","oe",",","0.0",",","1.0",")",";","ol","=","mix","(","u_wireframe_edge_color",",","ol",",","oe",")",";","od","=","mix","(","1.0",",","od",",","oe",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","ol",",","od",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Y",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Y",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_polyindex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTION_TYPE","==","REFL_PLANE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jB",";","varying","vec3","jC",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH","&&","(","NUM_NORMALMAPS",">","0","||","FOAM",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jD",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jE",";","varying","vec3","nI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","nJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","nK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTION_TYPE","==","REFL_PLANE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTION_TYPE","==","REFL_PLANE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","jG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","nL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kw","(","in","vec2","kr",")","{","float","ks",";","vec4","kt",";","vec2","ku",";","ku","=","0.5","+","vec2","(","(","kr",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","kr",".","y","+","SHORE_MAP_CENTER_Y",")","/","SHORE_MAP_SIZE_Y",")",";","kt","=","texture2D","(","u_shore_dist_map",",","ku",")",";","const","vec2","kv","=","vec2","(","1.0","/","255.0",",","1.0",")",";","ks","=","dot","(","kt",".","ba",",","kv",")",";","ku","=","normalize","(","kt",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","ku",",","ks",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"SMALL_WAVES_FAC",tokens:["0.3"]},{type:"textline",tokens:["void","kI","(","inout","vec3","kx",",","in","float","ky",",","in","vec3","kz",")","{","vec2","kA",",","kB",",","kC",";","float","kD",",","kE",",","kF",",","kG",",","kH",";","kD","=","dx","(","DST_NOISE_SCALE_0","*","(","kx",".","xz","+","DST_NOISE_FREQ_0","*","ky",")",")","*","dx","(","DST_NOISE_SCALE_1","*","(","kx",".","zx","-","DST_NOISE_FREQ_1","*","ky",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["kE","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","kF","=","kz",".","b",";","kG","=","sqrt","(","kF",")",";","kE","=","max","(","kF",",","DIR_MIN_SHR_FAC",")","*","sin","(","kG","/","kE","+","DIR_FREQ","*","ky",")",";","kH","=","max","(","dx","(","DIR_NOISE_SCALE","*","(","kx",".","xz","+","DIR_NOISE_FREQ","*","ky",")",")",",","DIR_MIN_NOISE_FAC",")",";","kE","*=","kH",";","kH","=","WAVES_HEIGHT","*","mix","(","kE",",","kD",",","max","(","kG",",","DST_MIN_FAC",")",")",";","kA","=","kz",".","rg",";","kG","=","WAVES_HOR_FAC","*","kE","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","kF",")",",","0.0",")",";","kA","=","kG","*","kA",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kH","=","WAVES_HEIGHT","*","kD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["kB","=","2.0","*","(","kx",".","xz","-","0.1","*","ky",")",";","kC","=","1.3","*","(","kx",".","zx","+","0.03","*","ky",")",";","kE","=","da","(","0.5","*","kB",")",".","x","+","da","(","0.5","*","kC",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["kx",".","xz","+=","kA",";","kE","*=","kF",";"]}]}}]},{type:"textline",tokens:["kH","+=","SMALL_WAVES_FAC","*","kE",";"]}]}}]},{type:"textline",tokens:["kx",".","y","+=","kH",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","kJ",",","nM",";","vec2","nN",";","float","nO",",","nP",",","nQ",";","vec3","nR",",","nS",",","nT",",","nU",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_polyindex","==","0.0",")","nL","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","nL","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","nL","=","vec3","(","0.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["nR","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["nO","=","abs","(","nR",".","y",")",";","nN","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","nO",")",";","nR",".","y","=","WATER_LEVEL",";","nR",".","xz","+=","nN",";"]}]}},{type:"elif",expression:["NUM_NORMALMAPS",">","0","||","FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["d","nV","=","av","(","nR",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["nJ","=","nV",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["nK","=","kw","(","nV",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["nP","=","length","(","u_wind",")",";","nQ","=","u_time",";","nQ","*=","nP",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["nP","=","nO",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nP","=","0.1",";"]}]}}]},{type:"textline",tokens:["nR","=","nV",".","a","+","vec3","(","nP",",","0.0",",","0.0",")",";","nS","=","nV",".","a","+","vec3","(","0.0",",","0.0",",","nP",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["nT","=","kw","(","nR",".","xz",")",";","nU","=","kw","(","nS",".","xz",")",";","kI","(","nR",",","nQ",",","nT",")",";","kI","(","nS",",","nQ",",","nU",")",";","kI","(","nV",".","a",",","nQ",",","nK",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kI","(","nR",",","nQ",",","vec3","(","0.0",")",")",";","kI","(","nS",",","nQ",",","vec3","(","0.0",")",")",";","kI","(","nV",".","a",",","nQ",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_position",".","y","<","0.0",")","{","nV",".","a",".","y","=","WATER_LEVEL","-","1.0",";","nR",".","y","=","nV",".","a",".","y",";","nS",".","y","=","nV",".","a",".","y",";","}"]}]}}]},{type:"textline",tokens:["nT","=","normalize","(","nR","-","nV",".","a",")",";","nU","=","normalize","(","nS","-","nV",".","a",")",";","jD","=","normalize","(","cross","(","nU",",","nT",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["jE","=","nU",";","nI","=","cross","(","jD",",","jE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["nO","=","dot","(","jD",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","nP","=","clamp","(","0.8","-","nO",",","0.0",",","1.0",")",";","jD","=","mix","(","jD",",","vec3","(","0.0",",","1.0",",","0.0",")",",","nP",")",";"]}]}}]}]}}]},{type:"textline",tokens:["jC","=","nV",".","a",";","jB","=","u_camera_eye","-","nV",".","a",";","kJ","=","u_view_matrix","*","vec4","(","nV",".","a",",","1.0",")",";","nM","=","u_proj_matrix","*","kJ",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTION_TYPE","==","REFL_PLANE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["nQ","=","nM",".","x",";","nO","=","nM",".","y",";","nP","=","nM",".","w",";","cI",".","x","=","(","nQ","+","nP",")","/","2.0",";","cI",".","y","=","(","nO","+","nP",")","/","2.0",";","cI",".","z","=","nP",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTION_TYPE","==","REFL_PLANE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["jG","=","-","kJ",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","nM",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["0"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["2"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","nL",";","const","float","kr","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","ks","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","ks","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","kt","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","ku","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","kv","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","kw",",","kx",";","vec3","ky",",","kz",";","ky","=","vec3","(","0.0",")",";","kw","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["kz","=","sign","(","nL","-","vec3","(","0.02","*","kr",")",")",";","if","(","kz",".","x","<","0.0","||","kz",".","y","<","0.0","||","kz",".","z","<","0.0",")","{","ky","=","ks",";","kw","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["kz","=","sign","(","nL","-","vec3","(","0.02","*","kr",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","kz",".","x","<","0.0","||","kz",".","y","<","0.0","||","kz",".","z","<","0.0",")","ky","=","u_wireframe_edge_color",";","else","ky","=","kv",";","kw","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","kz",".","x","<","0.0","||","kz",".","y","<","0.0","||","kz",".","z","<","0.0",")","kw","=","1.0",";","else","kw","=","0.0",";","ky","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","kz",".","x","<","0.0","||","kz",".","y","<","0.0","||","kz",".","z","<","0.0",")","ky","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","ky","=","kt",";","else","ky","=","ku",";","kw","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","1"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["kz","=","fwidth","(","nL",")",";","kz","=","smoothstep","(","vec3","(","0.0",")",",","kz","*","kr",",","nL",")",";","kx","=","min","(","min","(","kz",".","x",",","kz",".","y",")",",","kz",".","z",")",";","kx","=","clamp","(","kx",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","ky","=","vec3","(","mix","(","u_wireframe_edge_color",",","kv",",","kx",")",")",";","kw","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","ky","=","u_wireframe_edge_color",";","kw","=","mix","(","1.0",",","0.0",",","kx",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","ky","=","mix","(","u_wireframe_edge_color",",","kt",",","kx",")",";","else","ky","=","mix","(","u_wireframe_edge_color",",","ku",",","kx",")",";","kw","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["fX","(","ky",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["f_","(","ky",",","kw",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","ky",",","kw",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","nL",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","kr",";","mat4","ks",";","vec3","kt",",","ku",",","kv",",","kw",",","kx",";","if","(","a_polyindex","==","0.0",")","nL","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","nL","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","nL","=","vec3","(","0.0",",","0.0",",","1.0",")",";","kt","=","a_position",";","ku","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["d","ky","=","av","(","kt",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["kt","=","mix","(","kt",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["kv","=","vec3","(","0.0",")",";","kw","=","vec3","(","0.0",")",";","bv","(","kt",",","kv",",","kw",",","ku",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["kv","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kv","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["d","ky","=","fE","(","kt",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","kv",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["kw","=","(","u_model_matrix","*","vec4","(","kv",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["ks","=","ao","(","u_camera_eye",",","kw",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ks","=","ai","(","u_camera_eye",",","kw",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["kx","=","(","u_model_matrix","*","vec4","(","kv",",","1.0",")",")",".","xyz",";","ks","=","ks","*","aa","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","kx",")",";"]}]}}]},{type:"textline",tokens:["d","ky","=","av","(","kt","-","kv",",","kv",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ks",")",";","ky",".","b","=","kw",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","ky","=","av","(","kt",",","kv",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cj","(","ky",".","a",",","ky",".","b",",","ku",")",";"]}]}}]}]}}]},{type:"textline",tokens:["kr","=","u_view_matrix","*","vec4","(","ky",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","kr",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","a",";","void","main","(",")","{","vec4","kr",",","ks",";","kr","=","texture2D","(","u_sampler_left",",","a",")",";","ks","=","texture2D","(","u_sampler_right",",","a",")",";","gl_FragColor","=","vec4","(","kr","[","0","]",",","ks","[","1","]",",","ks","[","2","]",",","kr","[","3","]","+","ks","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"AA_METHOD_PASS",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["2"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["3"]},{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","vec4","ku","(","float","kr",",","float","ks",")","{","vec2","kt",";","kt","=","a","+","vec2","(","kr",",","ks",")","*","u_texel_size",";","return","texture2D","(","u_color",",","kt",")",";","}","float","ky","(","vec4","kv",")","{","float","kw",";","vec3","kx",";","kx","=","vec3","(","0.299",",","0.587",",","0.114",")",";","kw","=","dot","(","kv",".","rgb",",","kx",")",";","return","kw",";","}","vec4","nN","(",")","{","vec2","kz",";","float","kA",",","kB",",","kC",",","kD",",","kE",",","kF",";","vec4","kG",",","kH",",","kI",",","kJ",",","nM",";","kG","=","ku","(","-","1.0",",","-","1.0",")",";","kH","=","ku","(","1.0",",","-","1.0",")",";","kI","=","ku","(","-","1.0",",","1.0",")",";","kJ","=","ku","(","1.0",",","1.0",")",";","nM","=","ku","(","0.0",",","0.0",")",";","kA","=","ky","(","kG",")",";","kB","=","ky","(","kH",")",";","kC","=","ky","(","kI",")",";","kD","=","ky","(","kJ",")",";","kE","=","ky","(","nM",")",";","kF","=","min","(","kE",",","min","(","min","(","kA",",","kB",")",",","min","(","kC",",","kD",")",")",")",";","kE","=","max","(","kE",",","max","(","max","(","kA",",","kB",")",",","max","(","kC",",","kD",")",")",")",";","kz",".","x","=","-","(","(","kA","+","kB",")","-","(","kC","+","kD",")",")",";","kz",".","y","=","(","(","kA","+","kC",")","-","(","kB","+","kD",")",")",";","kA","=","max","(","(","kA","+","kB","+","kC","+","kD",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","kB","=","1.0","/","(","min","(","abs","(","kz",".","x",")",",","abs","(","kz",".","y",")",")","+","kA",")",";","kz","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","kz","*","kB",")",")","*","u_texel_size",";","kG","=","0.5","*","(","texture2D","(","u_color",",","a","+","kz","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","a","+","kz","*","(","2.0","/","3.0","-","0.5",")",")",")",";","kH","=","kG","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","a","+","kz","*","-","0.5",")","+","texture2D","(","u_color",",","a","+","kz","*","0.5",")",")",";","kC","=","ky","(","kH",")",";","if","(","(","kC","<","kF",")","||","(","kC",">","kE",")",")","return","kG",";","else","return","kH",";","}"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["(","1.0","/","6.0",")"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["(","1.0","/","12.0",")"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["(","3.0","/","4.0",")"]},{type:"textline",tokens:["vec4","or","(",")","{","bool","nO",",","nP",",","nQ",",","nR",",","nS",";","float","nT",",","nU",",","nV",",","nW",",","nX",",","nY",",","nZ",",","n_",",","oa",",","ob",",","oc",",","od",",","oe",",","of",",","og",";","vec4","oh",",","oi",",","oj",",","ok",",","ol",";","vec2","om",",","on",",","oo",",","op",",","oq",";","om",".","x","=","a",".","x",";","om",".","y","=","a",".","y",";","oh","=","texture2D","(","u_color",",","om",")",";","oi","=","ku","(","0.0",",","1.0",")",";","oj","=","ku","(","1.0",",","0.0",")",";","ok","=","ku","(","0.0",",","-","1.0",")",";","ol","=","ku","(","-","1.0",",","0.0",")",";","nT","=","ky","(","oi",")",";","nU","=","ky","(","oj",")",";","nV","=","ky","(","ok",")",";","nW","=","ky","(","ol",")",";","nX","=","ky","(","oh",")",";","nY","=","max","(","nT",",","nX",")",";","nZ","=","min","(","nT",",","nX",")",";","nY","=","max","(","nU",",","nY",")",";","nZ","=","min","(","nU",",","nZ",")",";","n_","=","max","(","nV",",","nW",")",";","oa","=","min","(","nV",",","nW",")",";","n_","=","max","(","n_",",","nY",")",";","nY","=","min","(","oa",",","nZ",")",";","oa","=","n_","*","FXAA_QUALITY_EDGE_THRESHOLD",";","nZ","=","n_","-","nY",";","n_","=","max","(","FXAA_QUALITY_EDGE_THRESHOLD_MIN",",","oa",")",";","nO","=","nZ","<","n_",";","if","(","nO",")","return","oh",";","oi","=","ku","(","-","1.0",",","-","1.0",")",";","oj","=","ku","(","1.0",",","1.0",")",";","ok","=","ku","(","1.0",",","-","1.0",")",";","ol","=","ku","(","-","1.0",",","1.0",")",";","nY","=","ky","(","oi",")",";","oa","=","ky","(","oj",")",";","n_","=","ky","(","ok",")",";","ob","=","ky","(","ol",")",";","oc","=","nV","+","nT",";","od","=","nW","+","nU",";","nZ","=","1.0","/","nZ",";","oe","=","oc","+","od",";","oc","=","(","-","2.0","*","nX",")","+","oc",";","od","=","(","-","2.0","*","nX",")","+","od",";","of","=","n_","+","oa",";","n_","=","nY","+","n_",";","og","=","(","-","2.0","*","nU",")","+","of",";","n_","=","(","-","2.0","*","nV",")","+","n_",";","nY","=","nY","+","ob",";","ob","=","ob","+","oa",";","oa","=","(","abs","(","oc",")","*","2.0",")","+","abs","(","og",")",";","oc","=","(","abs","(","od",")","*","2.0",")","+","abs","(","n_",")",";","og","=","(","-","2.0","*","nW",")","+","nY",";","od","=","(","-","2.0","*","nT",")","+","ob",";","n_","=","abs","(","og",")","+","oa",";","ob","=","abs","(","od",")","+","oc",";","og","=","nY","+","of",";","oa","=","u_texel_size",".","x",";","nO","=","n_",">=","ob",";","od","=","oe","*","2.0","+","og",";","if","(","!","nO",")","nV","=","nW",";","if","(","!","nO",")","nT","=","nU",";","if","(","nO",")","oa","=","u_texel_size",".","y",";","oc","=","(","od","*","(","1.0","/","12.0",")",")","-","nX",";","nY","=","nV","-","nX",";","of","=","nT","-","nX",";","n_","=","nV","+","nX",";","ob","=","nT","+","nX",";","nP","=","abs","(","nY",")",">=","abs","(","of",")",";","oe","=","max","(","abs","(","nY",")",",","abs","(","of",")",")",";","if","(","nP",")","oa","=","-","oa",";","og","=","clamp","(","abs","(","oc",")","*","nZ",",","0.0",",","1.0",")",";","on",".","x","=","om",".","x",";","on",".","y","=","om",".","y",";","oo",".","x","=","(","!","nO",")","?","0.0",":","u_texel_size",".","x",";","oo",".","y","=","(","nO",")","?","0.0",":","u_texel_size",".","y",";","if","(","!","nO",")","on",".","x","+=","oa","*","0.5",";","if","(","nO",")","on",".","y","+=","oa","*","0.5",";","op",".","x","=","on",".","x","-","oo",".","x",";","op",".","y","=","on",".","y","-","oo",".","y",";","oq",".","x","=","on",".","x","+","oo",".","x",";","oq",".","y","=","on",".","y","+","oo",".","y",";","nW","=","(","(","-","2.0",")","*","og",")","+","3.0",";","nU","=","ky","(","texture2D","(","u_color",",","op",")",")",";","od","=","og","*","og",";","nV","=","ky","(","texture2D","(","u_color",",","oq",")",")",";","if","(","!","nP",")","n_","=","ob",";","nT","=","oe","*","1.0","/","4.0",";","nY","=","nX","-","n_","*","0.5",";","of","=","nW","*","od",";","nP","=","nY","<","0.0",";","nU","-=","n_","*","0.5",";","nV","-=","n_","*","0.5",";","nQ","=","abs","(","nU",")",">=","nT",";","nR","=","abs","(","nV",")",">=","nT",";","if","(","!","nQ",")","op",".","x","-=","oo",".","x","*","1.5",";","if","(","!","nQ",")","op",".","y","-=","oo",".","y","*","1.5",";","nS","=","(","!","nQ",")","||","(","!","nR",")",";","if","(","!","nR",")","oq",".","x","+=","oo",".","x","*","1.5",";","if","(","!","nR",")","oq",".","y","+=","oo",".","y","*","1.5",";","if","(","nS",")","{","if","(","!","nQ",")","nU","=","ky","(","texture2D","(","u_color",",","op",".","xy",")",")",";","if","(","!","nR",")","nV","=","ky","(","texture2D","(","u_color",",","oq",".","xy",")",")",";","if","(","!","nQ",")","nU","=","nU","-","n_","*","0.5",";","if","(","!","nR",")","nV","=","nV","-","n_","*","0.5",";","nQ","=","abs","(","nU",")",">=","nT",";","nR","=","abs","(","nV",")",">=","nT",";","if","(","!","nQ",")","op",".","x","-=","oo",".","x","*","2.0",";","if","(","!","nQ",")","op",".","y","-=","oo",".","y","*","2.0",";","nS","=","(","!","nQ",")","||","(","!","nR",")",";","if","(","!","nR",")","oq",".","x","+=","oo",".","x","*","2.0",";","if","(","!","nR",")","oq",".","y","+=","oo",".","y","*","2.0",";","if","(","nS",")","{","if","(","!","nQ",")","nU","=","ky","(","texture2D","(","u_color",",","op",".","xy",")",")",";","if","(","!","nR",")","nV","=","ky","(","texture2D","(","u_color",",","oq",".","xy",")",")",";","if","(","!","nQ",")","nU","=","nU","-","n_","*","0.5",";","if","(","!","nR",")","nV","=","nV","-","n_","*","0.5",";","nQ","=","abs","(","nU",")",">=","nT",";","nR","=","abs","(","nV",")",">=","nT",";","if","(","!","nQ",")","op",".","x","-=","oo",".","x","*","2.0",";","if","(","!","nQ",")","op",".","y","-=","oo",".","y","*","2.0",";","nS","=","(","!","nQ",")","||","(","!","nR",")",";","if","(","!","nR",")","oq",".","x","+=","oo",".","x","*","2.0",";","if","(","!","nR",")","oq",".","y","+=","oo",".","y","*","2.0",";","if","(","nS",")","{","if","(","!","nQ",")","nU","=","ky","(","texture2D","(","u_color",",","op",".","xy",")",")",";","if","(","!","nR",")","nV","=","ky","(","texture2D","(","u_color",",","oq",".","xy",")",")",";","if","(","!","nQ",")","nU","=","nU","-","n_","*","0.5",";","if","(","!","nR",")","nV","=","nV","-","n_","*","0.5",";","nQ","=","abs","(","nU",")",">=","nT",";","nR","=","abs","(","nV",")",">=","nT",";","if","(","!","nQ",")","op",".","x","-=","oo",".","x","*","4.0",";","if","(","!","nQ",")","op",".","y","-=","oo",".","y","*","4.0",";","nS","=","(","!","nQ",")","||","(","!","nR",")",";","if","(","!","nR",")","oq",".","x","+=","oo",".","x","*","4.0",";","if","(","!","nR",")","oq",".","y","+=","oo",".","y","*","4.0",";","if","(","nS",")","{","if","(","!","nQ",")","nU","=","ky","(","texture2D","(","u_color",",","op",".","xy",")",")",";","if","(","!","nR",")","nV","=","ky","(","texture2D","(","u_color",",","oq",".","xy",")",")",";","if","(","!","nQ",")","nU","=","nU","-","n_","*","0.5",";","if","(","!","nR",")","nV","=","nV","-","n_","*","0.5",";","nQ","=","abs","(","nU",")",">=","nT",";","nR","=","abs","(","nV",")",">=","nT",";","if","(","!","nQ",")","op",".","x","-=","oo",".","x","*","2.0",";","if","(","!","nQ",")","op",".","y","-=","oo",".","y","*","2.0",";","if","(","!","nR",")","oq",".","x","+=","oo",".","x","*","2.0",";","if","(","!","nR",")","oq",".","y","+=","oo",".","y","*","2.0",";","}","}","}","}","oc","=","om",".","x","-","op",".","x",";","nZ","=","oq",".","x","-","om",".","x",";","if","(","!","nO",")","oc","=","om",".","y","-","op",".","y",";","if","(","!","nO",")","nZ","=","oq",".","y","-","om",".","y",";","nS","=","(","nU","<","0.0",")","!=","nP",";","og","=","(","nZ","+","oc",")",";","nQ","=","(","nV","<","0.0",")","!=","nP",";","ob","=","1.0","/","og",";","nR","=","oc","<","nZ",";","oe","=","min","(","oc",",","nZ",")",";","nP","=","nR","?","nS",":","nQ",";","nX","=","of","*","of",";","nW","=","(","oe","*","(","-","ob",")",")","+","0.5",";","od","=","nX","*","FXAA_QUALITY_SUBPIX",";","nY","=","nP","?","nW",":","0.0",";","n_","=","max","(","nY",",","od",")",";","if","(","!","nO",")","om",".","x","+=","n_","*","oa",";","if","(","nO",")","om",".","y","+=","n_","*","oa",";","return","texture2D","(","u_color",",","om",")",";","}"]},{type:"define",name:"FXAA_CONSOLE_EDGE_SHARPNESS",tokens:["8.0"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD",tokens:["0.125"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD_MIN",tokens:["0.05"]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","nN","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_QUALITY"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","or","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","0.0",",","1.0",")","*","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec4","kr",";","vec2","ks",",","kt",";","ks","=","vec2","(","0.0",",","0.0",")",";","kt","=","u_texel_size",";","kr","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","kr","*","0.0875447373698",";","ks","+=","kt",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ks",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ks",")","*","0.0858112354248",";","ks","+=","kt",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ks",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ks",")","*","0.0808139781061",";","ks","+=","kt",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ks",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ks",")","*","0.0731235112908",";","ks","+=","kt",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ks",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ks",")","*","0.0635705267419",";","ks","+=","kt",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ks",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ks",")","*","0.0530985673112",";","ks","+=","kt",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ks",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ks",")","*","0.0426125984122",";","ks","+=","kt",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ks",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ks",")","*","0.0328565115809",";","ks","+=","kt",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ks",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ks",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","kr",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","a",";","void","main","(",")","{","vec4","kr",",","ks",";","kr","=","texture2D","(","u_main",",","a",")",";","ks","=","texture2D","(","u_bloom",",","a",")",";","kr","=","kr",";","kr","+=","ks",";","gl_FragColor","=","vec4","(","kr",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","a",";","void","main","(",")","{","float","kr",";","vec3","ks",",","kt",";","vec4","ku",";","ku","=","texture2D","(","u_color",",","a",")",";","ks","=","ku",".","rgb",";","if","(","u_brightness","<","0.0",")","ks","=","ks","*","(","1.0","+","u_brightness",")",";","else","ks","=","ks","+","(","(","1.0","-","ks",")","*","u_brightness",")",";","ks","=","(","ks","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","ks","*=","u_exposure",";","kt","=","vec3","(","0.299",",","0.587",",","0.114",")",";","kr","=","dot","(","ks",",","kt",")",";","ks","=","mix","(","vec3","(","kr",")",",","ks",",","u_saturation",")",";","gl_FragColor","=","vec4","(","ks",",","ku",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","gl_FragColor","=","cq","(","clamp","(","nS","(","u_depth",",","a",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","float","nT",",","nU",";","vec4","nV",",","nW",";","nV","=","texture2D","(","u_sharp",",","a",")",";","if","(","u_dof_dist",">","0.0",")","{","nT","=","nS","(","u_depth",",","a",",","u_camera_range",")",";","nT","*=","u_view_max_depth",";","if","(","nT","<","u_dof_dist",")","nU","=","(","u_dof_dist","-","nT",")","/","u_dof_front",";","else","nU","=","(","nT","-","u_dof_dist",")","/","u_dof_rear",";","nU","=","clamp","(","nU",",","0.0",",","1.0",")",";","nW","=","texture2D","(","u_blurred",",","a",")",";","gl_FragColor","=","mix","(","nV",",","nW",",","nU",")",";","}","else","gl_FragColor","=","nV",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_src_color",";","uniform","sampler2D","u_glow_mask_small",";","uniform","sampler2D","u_glow_mask_large",";","uniform","float","u_glow_mask_small_coeff",";","uniform","float","u_glow_mask_large_coeff",";","varying","vec2","a",";","void","main","(",")","{","float","kr",";","vec4","ks",",","kt",",","ku",";","ks","=","texture2D","(","u_src_color",",","a",")",";","kt","=","texture2D","(","u_glow_mask_small",",","a",")",";","ku","=","texture2D","(","u_glow_mask_large",",","a",")",";","gl_FragColor","=","ks",";","if","(","ku",".","a","!=","0.0",")","{","kr","=","u_glow_mask_large_coeff","*","ku",".","a",";","kr","=","clamp","(","kr",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","ku",".","rgb","/","ku",".","a",",","kr",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","kr",")",";","}","if","(","kt",".","a","!=","0.0",")","{","kr","=","u_glow_mask_small_coeff","*","kt",".","a",";","kr","=","clamp","(","kr",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","kt",".","rgb","/","kt",".","a",",","kr",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","kr",")",";","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","nT",";","varying","vec2","nU",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","nV",";","void","main","(",")","{","vec4","nW",";","float","nX",",","nY",",","nZ",",","n_",",","oa",";","vec2","ob",",","oc",",","od",";","ob","=","(","nV",".","xy","-","a",")",";","nX","=","length","(","ob",")",";","ob","=","u_radial_blur_step","*","ob","/","nX",";","nY","=","nX","/","u_radial_blur_step",";","ob","*=","min","(","nY",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","nY","=","max","(","nY",",","STEPS_PER_PASS",")",";","oc","=","a",";","nZ","=","0.0",";","for","(","float","oe","=","0.0",";","oe","<","STEPS_PER_PASS",";","oe","+=","1.0",")","{","if","(","oe","<=","nY",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["n_","=","nS","(","u_input",",","oc",",","u_camera_range",")",";","nZ","+=","max","(","(","1.0","-","pow","(","nX",",","0.3",")",")","*","step","(","0.9",",","n_",")",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nW","=","texture2D","(","u_input",",","oc",")",";","nZ","+=","cu","(","nW",")",";"]}]}}]},{type:"textline",tokens:["}","oc","+=","ob",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["od","=","a","+","nU",";","oa","=","da","(","vec2","(","2.5","*","(","od",".","x",")",",","2.5","*","(","od",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","da","(","vec2","(","5.0","*","(","od",".","x",")","-","0.66","*","u_time",",","5.0","*","(","od",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","dx","(","vec2","(","7.5","*","(","od",".","x",")","+","0.33","*","u_time",",","7.5","*","(","od",".","y",")","-","0.33","*","u_time",")",")",";","oa","*=","clamp","(","1.2","-","sqrt","(","0.2","*","nX",")",",","0.0",",","1.0",")","*","nT",";","nZ","=","max","(","oa",",","nZ",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","cq","(","nZ","/","STEPS_PER_PASS",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","float","u_cam_water_depth",";","varying","float","nT",";","varying","vec2","nU",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","nV",";","void","main","(",")","{","float","kr",",","ks",";","vec3","kt",";","a","=","a_bb_vertex","+","0.5",";","kt","=","normalize","(","u_sun_direction",")",";","nV","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","kt",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","nT","=","1.0",";","kt","=","vec3","(","0.0",",","1.0",",","0.0",")",";","kt","=","j","(","u_camera_quat",",","kt",")",";","kt","=","normalize","(","kt",")",";","kr","=","dot","(","kt",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","ks","=","atan","(","kt",".","x",",","kt",".","z",")",";","nU","=","vec2","(","-","ks",",","acos","(","kr",")",")",";","}","else","{","nT","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["nV",".","xy","=","0.5","*","(","nV",".","xy","/","nV",".","w","+","1.0",")",";","nV","+=","99999.0","*","step","(","nV",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","uniform","vec3","u_sun_intensity",";","varying","vec2","a",";","void","main","(",")","{","float","kr",";","vec3","ks",";","vec4","kt",";","kt","=","texture2D","(","u_main",",","a",")",";","ks","=","clamp","(","u_sun_intensity",",","0.4",",","0.8",")",";","fV","(","kt",".","rgb",")",";","kr","=","cu","(","texture2D","(","u_god_rays",",","a",")",")",";","ks","=","kt",".","rgb","+","u_god_rays_intensity","*","vec3","(","kr",")","*","ks",";","fX","(","ks",")",";","gl_FragColor",".","rgb","=","ks",";","gl_FragColor",".","a","=","kt",".","a",";","}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","a",";","void","main","(",")","{","float","kr",";","vec4","ks",";","ks","=","texture2D","(","u_input",",","a",")",";","kr","=","dot","(","ks",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","kr",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","kr",",","ks",";","ks","=","0.0",";","for","(","float","kt","=","0.025",";","kt","<","1.0",";","kt","+=","0.05",")","for","(","float","ku","=","0.025",";","ku","<","1.0",";","ku","+=","0.05",")","{","kr","=","max","(","texture2D","(","u_input",",","vec2","(","kt",",","ku",")",")",".","r",",","0.01",")",";","ks","+=","log","(","kr",")",";","}","ks","=","exp","(","ks","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","ks",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","a",";","varying","float","nW",";","void","main","(",")","{","vec4","nX",";","float","nY",",","nZ",";","nY","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","nZ","=","texture2D","(","u_luminance",",","a",")",".","r",";","nX","=","texture2D","(","u_main",",","a",")",";","nZ","=","nZ","/","nY",";","nY","=","u_bloom_edge_lum",";","gl_FragColor","=","nX","*","max","(","nZ","-","nY",",","0.0",")","*","nW",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","a",";","varying","float","nW",";","const","vec3","kr","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","kz","(","in","vec4","ks",",","in","vec3","kt",",","out","vec3","ku",")","{","float","kv",",","kw",",","kx",",","ky",";","kv","=","ks",".","w","*","kt",".","x","+","ks",".","y","*","kt",".","z","-","ks",".","z","*","kt",".","y",";","kw","=","ks",".","w","*","kt",".","y","+","ks",".","z","*","kt",".","x","-","ks",".","x","*","kt",".","z",";","kx","=","ks",".","w","*","kt",".","z","+","ks",".","x","*","kt",".","y","-","ks",".","y","*","kt",".","x",";","ky","=","-","ks",".","x","*","kt",".","x","-","ks",".","y","*","kt",".","y","-","ks",".","z","*","kt",".","z",";","ku",".","x","=","kv","*","ks",".","w","-","ky","*","ks",".","x","-","kw","*","ks",".","z","+","kx","*","ks",".","y",";","ku",".","y","=","kw","*","ks",".","w","-","ky","*","ks",".","y","-","kx","*","ks",".","x","+","kv","*","ks",".","z",";","ku",".","z","=","kx","*","ks",".","w","-","ky","*","ks",".","z","-","kv","*","ks",".","y","+","kw","*","ks",".","x",";","}","void","main","(",")","{","vec3","kA",";","a","=","2.0","*","a_position",";","kz","(","u_camera_quat",",","kr",",","kA",")",";","nW","=","dot","(","-","kA",",","u_sun_direction",")","*","u_bloom_key",";","nW","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"var",name:"BLUR_DECAY_THRESHOLD",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","varying","vec2","a",";","float","kr","=","0.0042",";","void","main","(",")","{","vec4","ks",",","kt",",","ku",",","kv",";","ks","=","texture2D","(","u_mb_tex_curr",",","a",")",";","kt","=","texture2D","(","u_mb_tex_accum",",","a",")",";","if","(","length","(","ks","-","kt",")",">","BLUR_DECAY_THRESHOLD",")","{","ku","=","(","1.0","-","u_motion_blur_exp",")","*","ks","+","u_motion_blur_exp","*","kt",";","ku","=","ku","-","kt",";","kv","=","ks","-","kt",";","kv","=","min","(","max","(","abs","(","ku",")",",","vec4","(","kr",")",")",",","abs","(","kv",")",")","*","sign","(","ku",")",";","gl_FragColor","=","kt","+","kv",";","}","else","{","gl_FragColor","=","ks",";","}","}"]}]},exports["postprocessing/outline.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_outline_src",";","uniform","sampler2D","u_outline_mask",";","uniform","sampler2D","u_outline_mask_blurred",";","uniform","vec3","u_outline_color",";","uniform","float","u_draw_outline",";","varying","vec2","a",";","void","main","(",")","{","vec3","kr",";","float","ks",";","vec4","kt",",","ku",",","kv",";","kt","=","texture2D","(","u_outline_src",",","a",")",";","gl_FragColor","=","kt",";","if","(","u_draw_outline","!=","0.0",")","{","ku","=","texture2D","(","u_outline_mask",",","a",")",";","kv","=","texture2D","(","u_outline_mask_blurred",",","a",")",";","ks","=","kv",".","a","-","ku",".","a",";","if","(","ks","!=","0.0",")","{","ks","=","smoothstep","(","0.0",",","1.0",",","kv",".","a",")",";","if","(","ku",".","a","==","0.0",")","{","kr","=","u_outline_color",";","fX","(","kr",")",";","kv","=","vec4","(","clamp","(","kr",",","0.0",",","1.0",")",",","ks",")",";","gl_FragColor","=","mix","(","kt",",","kv",",","ks",")",";","}","}","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec2","kr",",","ks",";","vec4","kt",";"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","==","POST_EFFECT_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_GRAYSCALE"],group:{type:"group",parts:[{type:"textline",tokens:["kt","=","texture2D","(","u_color",",","a",")",";","gl_FragColor",".","rgb","=","vec3","(","(","kt",".","r","+","kt",".","g","+","kt",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_BLUR","||","POST_EFFECT","==","POST_EFFECT_Y_BLUR"],group:{type:"group",parts:[{type:"textline",tokens:["kr","=","vec2","(","0.0",",","0.0",")",";","ks","=","u_texel_size",";","kt","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","kt","*","0.2270270270",";","kr","+=","ks",";","kt","=","texture2D","(","u_color",",","a","+","kr",")",";","gl_FragColor","+=","kt","*","0.1945945946",";","kt","=","texture2D","(","u_color",",","a","-","kr",")",";","gl_FragColor","+=","kt","*","0.1945945946",";","kr","+=","ks",";","kt","=","texture2D","(","u_color",",","a","+","kr",")",";","gl_FragColor","+=","kt","*","0.1216216216",";","kt","=","texture2D","(","u_color",",","a","-","kr",")",";","gl_FragColor","+=","kt","*","0.1216216216",";","kr","+=","ks",";","kt","=","texture2D","(","u_color",",","a","+","kr",")",";","gl_FragColor","+=","kt","*","0.0540540541",";","kt","=","texture2D","(","u_color",",","a","-","kr",")",";","gl_FragColor","+=","kt","*","0.0540540541",";","kr","+=","ks",";","kt","=","texture2D","(","u_color",",","a","+","kr",")",";","gl_FragColor","+=","kt","*","0.0162162162",";","kt","=","texture2D","(","u_color",",","a","-","kr",")",";","gl_FragColor","+=","kt","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_GLOW_BLUR","||","POST_EFFECT","==","POST_EFFECT_Y_GLOW_BLUR"],group:{type:"group",parts:[{type:"textline",tokens:["kr","=","vec2","(","0.0",",","0.0",")",";","ks","=","u_texel_size",";","kt","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","kt","*","(","1.0","-","step","(","0.0",",","-","kt",".","a",")",")","*","0.152507",";","kr","+=","ks",";","kt","=","texture2D","(","u_color",",","a","+","kr",")",";","gl_FragColor","+=","kt","*","(","1.0","-","step","(","0.0",",","-","kt",".","a",")",")","*","0.141763",";","kt","=","texture2D","(","u_color",",","a","-","kr",")",";","gl_FragColor","+=","kt","*","(","1.0","-","step","(","0.0",",","-","kt",".","a",")",")","*","0.141763",";","kr","+=","ks",";","kt","=","texture2D","(","u_color",",","a","+","kr",")",";","gl_FragColor","+=","kt","*","(","1.0","-","step","(","0.0",",","-","kt",".","a",")",")","*","0.113861",";","kt","=","texture2D","(","u_color",",","a","-","kr",")",";","gl_FragColor","+=","kt","*","(","1.0","-","step","(","0.0",",","-","kt",".","a",")",")","*","0.113861",";","kr","+=","ks",";","kt","=","texture2D","(","u_color",",","a","+","kr",")",";","gl_FragColor","+=","kt","*","(","1.0","-","step","(","0.0",",","-","kt",".","a",")",")","*","0.079019",";","kt","=","texture2D","(","u_color",",","a","-","kr",")",";","gl_FragColor","+=","kt","*","(","1.0","-","step","(","0.0",",","-","kt",".","a",")",")","*","0.079019",";","kr","+=","ks",";","kt","=","texture2D","(","u_color",",","a","+","kr",")",";","gl_FragColor","+=","kt","*","(","1.0","-","step","(","0.0",",","-","kt",".","a",")",")","*","0.047383",";","kt","=","texture2D","(","u_color",",","a","-","kr",")",";","gl_FragColor","+=","kt","*","(","1.0","-","step","(","0.0",",","-","kt",".","a",")",")","*","0.047383",";","kr","+=","ks",";","kt","=","texture2D","(","u_color",",","a","+","kr",")",";","gl_FragColor","+=","kt","*","(","1.0","-","step","(","0.0",",","-","kt",".","a",")",")","*","0.024549",";","kt","=","texture2D","(","u_color",",","a","-","kr",")",";","gl_FragColor","+=","kt","*","(","1.0","-","step","(","0.0",",","-","kt",".","a",")",")","*","0.024549",";","kr","+=","ks",";","kt","=","texture2D","(","u_color",",","a","+","kr",")",";","gl_FragColor","+=","kt","*","(","1.0","-","step","(","0.0",",","-","kt",".","a",")",")","*","0.01099",";","kt","=","texture2D","(","u_color",",","a","-","kr",")",";","gl_FragColor","+=","kt","*","(","1.0","-","step","(","0.0",",","-","kt",".","a",")",")","*","0.01099",";","kr","+=","ks",";","kt","=","texture2D","(","u_color",",","a","+","kr",")",";","gl_FragColor","+=","kt","*","(","1.0","-","step","(","0.0",",","-","kt",".","a",")",")","*","0.00425",";","kt","=","texture2D","(","u_color",",","a","-","kr",")",";","gl_FragColor","+=","kt","*","(","1.0","-","step","(","0.0",",","-","kt",".","a",")",")","*","0.00425",";","kr","+=","ks",";","kt","=","texture2D","(","u_color",",","a","+","kr",")",";","gl_FragColor","+=","kt","*","(","1.0","-","step","(","0.0",",","-","kt",".","a",")",")","*","0.00142",";","kt","=","texture2D","(","u_color",",","a","-","kr",")",";","gl_FragColor","+=","kt","*","(","1.0","-","step","(","0.0",",","-","kt",".","a",")",")","*","0.00142",";","gl_FragColor","=","clamp","(","gl_FragColor",",","0.0",",","1.0",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_EXTEND","||","POST_EFFECT","==","POST_EFFECT_Y_EXTEND"],group:{type:"group",parts:[{type:"textline",tokens:["ks","=","u_texel_size",";","kt","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","kt",";","if","(","kt",".","a","==","0.0",")","{","kt","=","texture2D","(","u_color",",","a","+","ks",")",";","if","(","kt",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","kt",".","a",")",";","else","{","kt","=","texture2D","(","u_color",",","a","-","ks",")",";","if","(","kt",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","kt",".","a",")",";","}","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","varying","vec2","a",";","void","main","(",")","{","a","=","2.0","*","a_position",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION","&&","SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nX",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nY",";","varying","vec4","nZ",";","varying","vec4","n_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","oa",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","og","(","vec2","ob",",","sampler2D","oc",")","{","float","od",",","oe",",","of",";","od","=","texture2D","(","oc",",","ob",")",".","r",";","oe","=","texture2D","(","oc",",","nY",".","xy",")",".","r",";","of","=","texture2D","(","oc",",","nY",".","zw",")",".","r",";","return","vec3","(","od",",","oe",",","of",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ol","(","vec2","oh",",","sampler2D","oi",")","{","vec2","oj",";","vec3","ok",";","ok","=","og","(","oh",",","oi",")",";","oj","=","abs","(","ok",".","xx","-","ok",".","yz",")",";","oj","=","step","(","SMAA_PREDICATION_THRESHOLD",",","oj",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","oj",")",";","}"]}]}}]},{type:"textline",tokens:["void","op","(","bvec2","om",",","inout","vec2","on",",","vec2","oo",")","{","if","(","om",".","x",")","on",".","x","=","oo",".","x",";","if","(","om",".","y",")","on",".","y","=","oo",".","y",";","}","void","op","(","bvec4","oq",",","inout","vec4","or",",","vec4","os",")","{","op","(","oq",".","xy",",","or",".","xy",",","os",".","xy",")",";","op","(","oq",".","zw",",","or",".","zw",",","os",".","zw",")",";","}","vec2","ou","(","vec2","ot",")","{","return","sign","(","ot",")","*","floor","(","abs","(","ot",")","+",".5",")",";","}","vec4","ou","(","vec4","ov",")","{","return","sign","(","ov",")","*","floor","(","abs","(","ov",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","oI","(","vec2","ow",",","sampler2D","ox"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","oy"]}]}}]},{type:"textline",tokens:[")","{","vec4","oz",";","float","oA",",","oB",",","oC",",","oD",",","oE",";","vec3","oF",";","vec2","oG",",","oH",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["oG","=","ol","(","ow",",","oy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["oG","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["oF","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","oA","=","dot","(","texture2D","(","ox",",","ow",")",".","rgb",",","oF",")",";","oB","=","dot","(","texture2D","(","ox",",","nY",".","xy",")",".","rgb",",","oF",")",";","oC","=","dot","(","texture2D","(","ox",",","nY",".","zw",")",".","rgb",",","oF",")",";","oz",".","xy","=","abs","(","oA","-","vec2","(","oB",",","oC",")",")",";","oG","=","step","(","oG",",","oz",".","xy",")",";","if","(","dot","(","oG",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","oD","=","dot","(","texture2D","(","ox",",","nZ",".","xy",")",".","rgb",",","oF",")",";","oE","=","dot","(","texture2D","(","ox",",","nZ",".","zw",")",".","rgb",",","oF",")",";","oz",".","zw","=","abs","(","oA","-","vec2","(","oD",",","oE",")",")",";","oH","=","max","(","oz",".","xy",",","oz",".","zw",")",";","oA","=","dot","(","texture2D","(","ox",",","n_",".","xy",")",".","rgb",",","oF",")",";","oD","=","dot","(","texture2D","(","ox",",","n_",".","zw",")",".","rgb",",","oF",")",";","oz",".","zw","=","abs","(","vec2","(","oB",",","oC",")","-","vec2","(","oA",",","oD",")",")",";","oH","=","max","(","oH",".","xy",",","oz",".","zw",")",";","oE","=","max","(","oH",".","x",",","oH",".","y",")",";","oG",".","xy","*=","step","(","oE",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","oz",".","xy",")",";","return","oG",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","oK","(","vec2","oJ",")","{","oJ",".","r","=","oJ",".","r","*","abs","(","5.0","*","oJ",".","r","-","5.0","*","0.75",")",";","return","ou","(","oJ",")",";","}","vec4","oK","(","vec4","oL",")","{","oL",".","rb","=","oL",".","rb","*","abs","(","5.0","*","oL",".","rb","-","5.0","*","0.75",")",";","return","ou","(","oL",")",";","}","vec2","oT","(","sampler2D","oM",",","vec2","oN",",","vec2","oO",",","out","vec2","oP",")","{","vec3","oQ",";","vec4","oR",";","oR","=","vec4","(","oN",",","-","1.0",",","1.0",")",";","oQ","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","oS","=","0",";","oS","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","oS","++",")","{","if","(","oR",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","oR",".","w",">","0.9",")","{","oR",".","xyz","+=","oQ","*","vec3","(","oO",",","1.0",")",";","oP","=","texture2D","(","oM",",","oR",".","xy",",","0.0",")",".","rg",";","oR",".","w","=","dot","(","oP",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","oR",".","zw",";","}","vec2","pa","(","sampler2D","oU",",","vec2","oV",",","vec2","oW",",","out","vec2","oX",")","{","vec3","oY",";","vec4","oZ",";","oZ","=","vec4","(","oV",",","-","1.0",",","1.0",")",";","oZ",".","x","+=","0.25","*","u_texel_size",".","x",";","oY","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","o_","=","0",";","o_","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","o_","++",")","{","if","(","oZ",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","oZ",".","w",">","0.9",")","{","oZ",".","xyz","=","oY","*","vec3","(","oW",",","1.0",")","+","oZ",".","xyz",";","oX","=","texture2D","(","oU",",","oZ",".","xy",",","0.0",")",".","rg",";","oX","=","oK","(","oX",")",";","oZ",".","w","=","dot","(","oX",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","oZ",".","zw",";","}","vec2","pg","(","sampler2D","pb",",","vec2","pc",",","vec2","pd",",","float","pe",")","{","vec2","pf",";","pf","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","pd","+","pc",";","pf","=","SMAA_AREATEX_PIXEL_SIZE","*","pf","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","pf",".","x","+=","0.5",";","pf",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","pe",";","return","texture2D","(","pb",",","pf",",","0.0",")",".","rg",";","}","vec2","ps","(","sampler2D","ph",",","sampler2D","pi",",","vec2","pj",",","vec2","pk",",","vec4","pl",")","{","vec4","pm",",","pn",",","po",";","vec2","pp",",","pq",",","pr",";","pp","=","vec2","(","0.0",",","0.0",")",";","if","(","pk",".","r",">","0.0",")","{","pm",".","xz","=","oT","(","ph",",","pj",",","vec2","(","-","1.0",",","1.0",")",",","pq",")",";","pm",".","x","+=","float","(","pq",".","y",">","0.9",")",";","}","else","pm",".","xz","=","vec2","(","0.0",",","0.0",")",";","pm",".","yw","=","oT","(","ph",",","pj",",","vec2","(","1.0",",","-","1.0",")",",","pq",")",";","if","(","pm",".","x","+","pm",".","y",">","2.0",")","{","pn","=","vec4","(","-","pm",".","x","+","0.25",",","pm",".","x",",","pm",".","y",",","-","pm",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","pj",".","xyxy",";","po",".","xy","=","texture2D","(","ph",",","pn",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","po",".","zw","=","texture2D","(","ph",",","pn",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","po",".","yxwz","=","oK","(","po",".","xyzw",")",";","pr","=","vec2","(","2.0",",","2.0",")","*","po",".","xz","+","po",".","yw",";","op","(","bvec2","(","step","(","0.9",",","pm",".","zw",")",")",",","pr",",","vec2","(","0.0",",","0.0",")",")",";","pp","+=","pg","(","pi",",","pm",".","xy",",","pr",",","pl",".","z",")",";","}","pm",".","xz","=","pa","(","ph",",","pj",",","vec2","(","-","1",",","-","1",")",",","pq",")",";","if","(","texture2D","(","ph",",","pj","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","pm",".","yw","=","pa","(","ph",",","pj",",","vec2","(","1",",","1",")",",","pq",")",";","pm",".","y","+=","float","(","pq",".","y",">","0.9",")",";","}","else","pm",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","pm",".","x","+","pm",".","y",">","2.0",")","{","pn","=","vec4","(","-","pm",".","x",",","-","pm",".","x",",","pm",".","y",",","pm",".","y",")","*","u_texel_size",".","xyxy","+","pj",".","xyxy",";","po",".","x","=","texture2D","(","ph",",","pn",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","po",".","y","=","texture2D","(","ph",",","pn",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","po",".","zw","=","texture2D","(","ph",",","pn",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","pr","=","vec2","(","2.0",",","2.0",")","*","po",".","xz","+","po",".","yw",";","op","(","bvec2","(","step","(","0.9",",","pm",".","zw",")",")",",","pr",",","vec2","(","0",",","0",")",")",";","pp","+=","pg","(","pi",",","pm",".","xy",",","pr",",","pl",".","w",")",".","gr",";","}","return","pp",";","}"]}]}}]},{type:"textline",tokens:["float","py","(","sampler2D","pt",",","vec2","pu",",","float","pv",")","{","vec2","pw",",","px",";","pw","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","px","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","pv",",","1.0",")",";","pw","+=","vec2","(","-","1.0",",","1.0",")",";","px","+=","vec2","(","0.5",",","-","0.5",")",";","pw","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","px","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","pt",",","pw","*","pu","+","px",",","0.0",")",".","r",";","}","float","pG","(","sampler2D","pz",",","sampler2D","pA",",","vec2","pB",",","float","pC",")","{","float","pD",";","vec2","pE",";","pE","=","vec2","(","0.0",",","1.0",")",";","for","(","int","pF","=","0",";","pF","<","SMAA_MAX_SEARCH_STEPS",";","pF","++",")","{","if","(","pB",".","x",">","pC","&&","pE",".","g",">","0.8281","&&","pE",".","r","==","0.0",")","{","pE","=","texture2D","(","pz",",","pB",",","0.0",")",".","rg",";","pB","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","pB",";","}","}","pD","=","-","(","255.0","/","127.0",")","*","py","(","pA",",","pE",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","pD","+","pB",".","x",";","}","float","pO","(","sampler2D","pH",",","sampler2D","pI",",","vec2","pJ",",","float","pK",")","{","float","pL",";","vec2","pM",";","pM","=","vec2","(","0.0",",","1.0",")",";","for","(","int","pN","=","0",";","pN","<","SMAA_MAX_SEARCH_STEPS",";","pN","++",")","{","if","(","pJ",".","x","<","pK","&&","pM",".","g",">","0.8281","&&","pM",".","r","==","0.0",")","{","pM","=","texture2D","(","pH",",","pJ",",","0.0",")",".","rg",";","pJ","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","pJ",";","}","}","pL","=","-","(","255.0","/","127.0",")","*","py","(","pI",",","pM",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","pL","+","pJ",".","x",";","}","float","pW","(","sampler2D","pP",",","sampler2D","pQ",",","vec2","pR",",","float","pS",")","{","float","pT",";","vec2","pU",";","pU","=","vec2","(","1.0",",","0.0",")",";","for","(","int","pV","=","0",";","pV","<","SMAA_MAX_SEARCH_STEPS",";","pV","++",")","{","if","(","pR",".","y",">","pS","&&","pU",".","r",">","0.8281","&&","pU",".","g","==","0.0",")","{","pU","=","texture2D","(","pP",",","pR",",","0.0",")",".","rg",";","pR","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","pR",";","}","}","pT","=","-","(","255.0","/","127.0",")","*","py","(","pQ",",","pU",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","pT","+","pR",".","y",";","}","float","qd","(","sampler2D","pX",",","sampler2D","pY",",","vec2","pZ",",","float","p_",")","{","float","qa",";","vec2","qb",";","qb","=","vec2","(","1.0",",","0.0",")",";","for","(","int","qc","=","0",";","qc","<","SMAA_MAX_SEARCH_STEPS",";","qc","++",")","{","if","(","pZ",".","y","<","p_","&&","qb",".","r",">","0.8281","&&","qb",".","g","==","0.0",")","{","qb","=","texture2D","(","pX",",","pZ",",","0.0",")",".","rg",";","pZ","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","pZ",";","}","}","qa","=","-","(","255.0","/","127.0",")","*","py","(","pY",",","qb",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","qa","+","pZ",".","y",";","}","vec2","qk","(","sampler2D","qe",",","vec2","qf",",","float","qg",",","float","qh",",","float","qi",")","{","vec2","qj",";","qj","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","ou","(","4.0","*","vec2","(","qg",",","qh",")",")","+","qf",";","qj","=","SMAA_AREATEX_PIXEL_SIZE","*","qj","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","qj",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","qi","+","qj",".","y",";","return","texture2D","(","qe",",","qj",",","0.0",")",".","rg",";","}","void","qr","(","sampler2D","ql",",","inout","vec2","qm",",","vec4","qn",",","vec2","qo",")","{","vec2","qp",",","qq",";"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["qp","=","step","(","qo",".","xy",",","qo",".","yx",")",";","qq","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","qp",";","qq","/=","qp",".","x","+","qp",".","y",";","qp","=","vec2","(","1.0",",","1.0",")",";","qp",".","x","-=","qq",".","x","*","texture2D","(","ql",",","qn",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","qp",".","x","-=","qq",".","y","*","texture2D","(","ql",",","qn",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","qp",".","y","-=","qq",".","x","*","texture2D","(","ql",",","qn",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","qp",".","y","-=","qq",".","y","*","texture2D","(","ql",",","qn",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","qm","*=","clamp","(","qp",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","qy","(","sampler2D","qs",",","inout","vec2","qt",",","vec4","qu",",","vec2","qv",")","{","vec2","qw",",","qx",";"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["qw","=","step","(","qv",".","xy",",","qv",".","yx",")",";","qx","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","qw",";","qx","/=","qw",".","x","+","qw",".","y",";","qw","=","vec2","(","1.0",",","1.0",")",";","qw",".","x","-=","qx",".","x","*","texture2D","(","qs",",","qu",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","qw",".","x","-=","qx",".","y","*","texture2D","(","qs",",","qu",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","qw",".","y","-=","qx",".","x","*","texture2D","(","qs",",","qu",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","qw",".","y","-=","qx",".","y","*","texture2D","(","qs",",","qu",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","qt","*=","clamp","(","qw",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qM","(","vec2","qz",",","vec2","qA",",","sampler2D","qB",",","sampler2D","qC",",","sampler2D","qD",",","vec4","qE",")","{","float","qF",",","qG",";","vec3","qH",";","vec2","qI",",","qJ",",","qK",";","vec4","qL",";","qL","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","qI","=","texture2D","(","qB",",","qz",")",".","rg",";","if","(","qI",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["qL",".","rg","=","ps","(","qB",",","qC",",","qz",",","qI",",","qE",")",";","if","(","qL",".","r","==","-","qL",".","g",")","{"]}]}}]},{type:"textline",tokens:[";","qH",".","x","=","pG","(","qB",",","qD",",","nY",".","xy",",","n_",".","x",")",";","qH",".","y","=","nZ",".","y",";","qJ",".","x","=","qH",".","x",";","qF","=","texture2D","(","qB",",","qH",".","xy",",","0.0",")",".","r",";","qH",".","z","=","pO","(","qB",",","qD",",","nY",".","zw",",","n_",".","y",")",";","qJ",".","y","=","qH",".","z",";","qJ","=","abs","(","ou","(","qJ","/","u_texel_size",".","xx","-","qA",".","xx",")",")",";","qK","=","sqrt","(","qJ",")",";","qG","=","texture2D","(","qB",",","qH",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","qL",".","rg","=","qk","(","qC",",","qK",",","qF",",","qG",",","qE",".","y",")",";","qH",".","y","=","qz",".","y",";","qr","(","qB",",","qL",".","rg",",","qH",".","xyzy",",","qJ",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","qI",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","qI",".","r",">","0.0",")","{",";","qH",".","y","=","pW","(","qB",",","qD",",","nZ",".","xy",",","n_",".","z",")",";","qH",".","x","=","nY",".","x",";","qK",".","x","=","qH",".","y",";","qF","=","texture2D","(","qB",",","qH",".","xy",",","0.0",")",".","g",";","qH",".","z","=","qd","(","qB",",","qD",",","nZ",".","zw",",","n_",".","w",")",";","qK",".","y","=","qH",".","z",";","qK","=","abs","(","ou","(","qK","/","u_texel_size",".","yy","-","qA",".","yy",")",")",";","qJ","=","sqrt","(","qK",")",";","qG","=","texture2D","(","qB",",","qH",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","qL",".","ba","=","qk","(","qC",",","qJ",",","qF",",","qG",",","qE",".","x",")",";","qH",".","x","=","qz",".","x",";","qy","(","qB",",","qL",".","ba",",","qH",".","xyxz",",","qK",")",";","}","return","qL",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qY","(","vec2","qN",",","sampler2D","qO",",","sampler2D","qP"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","qQ"]}]}}]},{type:"textline",tokens:[")","{","bool","qR",";","vec2","qS",",","qT",",","qU",";","vec4","qV",",","qW",",","qX",";","qV",".","x","=","texture2D","(","qP",",","nX",".","xy",")",".","a",";","qV",".","y","=","texture2D","(","qP",",","nX",".","zw",")",".","g",";","qV",".","wz","=","texture2D","(","qP",",","qN",")",".","xz",";","if","(","dot","(","qV",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","qW","=","texture2D","(","qO",",","qN",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["qX","=","texture2D","(","qQ",",","a",")",";","qS","=","2.0","*","cC","(","qX",")","-","1.0",";","qW",".","a","=","sqrt","(","2.0","*","length","(","qS",")",")",";"]}]}}]},{type:"textline",tokens:["return","qW",";","}","else","{","qR","=","max","(","qV",".","x",",","qV",".","z",")",">","max","(","qV",".","y",",","qV",".","w",")",";","qX","=","vec4","(","0.0",",","qV",".","y",",","0.0",",","qV",".","w",")",";","qS","=","qV",".","yw",";","op","(","bvec4","(","qR",",","qR",",","qR",",","qR",")",",","qX",",","vec4","(","qV",".","x",",","0.0",",","qV",".","z",",","0.0",")",")",";","op","(","bvec2","(","qR",",","qR",")",",","qS",",","qV",".","xz",")",";","qS","/=","dot","(","qS",",","vec2","(","1.0",",","1.0",")",")",";","qW","=","qX","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","qN",".","xyxy",";","qV","=","qS",".","x","*","texture2D","(","qO",",","qW",".","xy",",","0.0",")",";","qV","+=","qS",".","y","*","texture2D","(","qO",",","qW",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["qX","=","texture2D","(","qQ",",","qW",".","xy",")",";","qT","=","2.0","*","cC","(","qX",")","-","1.0",";","qU","=","qS",".","x","*","qT",";","qX","=","texture2D","(","qQ",",","qW",".","zw",")",";","qT","=","2.0","*","cC","(","qX",")","-","1.0",";","qU","+=","qS",".","y","*","qT",";","qV",".","a","=","sqrt","(","2.0","*","length","(","qU",")",")",";"]}]}}]},{type:"textline",tokens:["return","qV",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","rh","(","vec2","qZ",",","sampler2D","q_",",","sampler2D","ra"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","rb"]}]}}]},{type:"textline",tokens:[")","{","float","rc",";","vec2","rd",";","vec4","re",",","rf",",","rg",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["re","=","texture2D","(","rb",",","a",")",";","rd","=","2.0","*","cC","(","re",")","-","1.0",";","re","=","texture2D","(","q_",",","qZ",")",";","rf","=","texture2D","(","ra",",","qZ","-","rd",")",";","rc","=","abs","(","re",".","a","*","re",".","a","-","rf",".","a","*","rf",".","a",")","/","2.0",";","rc","=","0.5","*","clamp","(","1.0","-","sqrt","(","rc",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","rg","=","mix","(","re",",","rf",",","rc",")",";","rg",".","a","=","1.0",";","return","rg",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["re","=","texture2D","(","q_",",","qZ",")",";","rf","=","texture2D","(","ra",",","qZ",")",";","return","mix","(","re",",","rf",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","ri",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["ri","=","vec4","(","oI","(","a",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["ri","=","qM","(","a",",","oa",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["ri","=","qY","(","a",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["ri","=","vec4","(","rh","(","a",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ri","=","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","ri",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nX",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nY",";","varying","vec4","nZ",";","varying","vec4","n_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","oa",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["void","ks","(","vec2","kr",")","{","nY","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","kr",".","xyxy",";","nZ","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","kr",".","xyxy",";","n_","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","kr",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["void","kv","(","vec2","kt",",","out","vec2","ku",")","{","ku","=","kt","/","u_texel_size",";","nY","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","kt",".","xyxy",";","nZ","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","kt",".","xyxy",";","n_","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","nY",".","xz",",","nZ",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["void","kx","(","vec2","kw",")","{","nX","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","kw",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","a","=","2.0","*","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["ks","(","a",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["kv","(","a",",","oa",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["kx","(","a",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"define",name:"SSAO_QUALITY_8",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_16",tokens:["2"]},{type:"define",name:"SSAO_QUALITY_24",tokens:["3"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","sampler2D","u_ssao_special_tex",";","uniform","vec2","u_camera_range",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","float","oc","(","in","vec2","ob",")","{","return","nS","(","u_depth",",","ob",",","u_camera_range",")",";","}","void","main","(",")","{","vec3","od",",","oe",",","of",";","float","og",",","oh",",","oi",",","oj",",","ok",",","ol",",","om",";","og","=","texture2D","(","u_color",",","a",")",".","r",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","og",",","1.0",",","0.0",",","1.0",")",";","return",";"]}]}}]},{type:"textline",tokens:["od","=","normalize","(","2.0","*","texture2D","(","u_ssao_special_tex",",","a","*","0.25","/","u_texel_size",")",".","rgb","-","1.0",")",";","oh","=","oc","(","a",")",";","oi","=","oh","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_8"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","on","=","8.0",";","const","int","oo","=","1",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","on","=","16.0",";","const","int","oo","=","2",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_24"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","on","=","24.0",";","const","int","oo","=","3",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_32"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","on","=","32.0",";","const","int","oo","=","4",";"]}]}}]},{type:"textline",tokens:["oj","=","u_ssao_radius_increase","*","0.001",";","const","float","op","=","1.0","+","2.4","/","on",";","ok","=","0.0",";","for","(","int","oq","=","0",";","oq","<","oo",";","oq","++",")","for","(","int","or","=","-","1",";","or","<=","1",";","or","+=","2",")","for","(","int","os","=","-","1",";","os","<=","1",";","os","+=","2",")","for","(","int","ot","=","-","1",";","ot","<=","1",";","ot","+=","2",")","{","oe","=","reflect","(","normalize","(","vec3","(","or",",","os",",","ot",")",")",",","od",")","*","(","oj","*=","op",")",";","of","=","vec3","(","a",",","oi",")",";","of","+=","vec3","(","oe",".","xy",",","oe",".","z","*","oi","*","2.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["of",".","z","-=","1.4","*","(","of",".","z","-","oi",")","*","step","(","oi",",","of",".","z",")",";"]}]}}]},{type:"textline",tokens:["ol","=","oc","(","of",".","xy",")","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";","om","=","clamp","(","(","oi","-","ol",")","/","ol",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["ok","+=","mix","(","1.0",",","om",",","step","(","ol",",","of",".","z",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ok","+=","mix","(","step","(","of",".","z",",","ol",")",",","0.5",",","om",")",";"]}]}}]},{type:"textline",tokens:["}","ok","=","ok","/","on",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["ok","=","clamp","(","ok","*","ok","+","0.6","*","ok",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ok","=","clamp","(","ok","*","ok","+","ok",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["oh","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","oh",")",";","ok","=","mix","(","1.0",",","ok",",","oh",")",";","gl_FragColor","=","vec4","(","og",",","ok",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"include",file:"depth_fetch.glslf"}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_ssao_mask",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","uniform","float","u_ssao_blur_discard_value",";","float","oc","(","in","vec2","ob",")","{","return","nS","(","u_depth",",","ob",",","u_camera_range",")",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","od",",","oe",";","float","of",",","og",",","oh",",","oi",",","oj",",","ok",",","ol",";","of","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["og","=","oc","(","a",")",";","oh","=","0.0",";","oi","=","u_ssao_blur_discard_value","*","100.0",";"]}]}}]},{type:"textline",tokens:["od","=","vec2","(","-","2.0",")",";","for","(","int","om","=","0",";","om","<","4",";","++","om",")","{","for","(","int","on","=","0",";","on","<","4",";","++","on",")","{","oe","=","(","od","+","vec2","(","float","(","om",")",",","float","(","on",")",")",")","*","u_texel_size",";","oj","=","texture2D","(","u_ssao_mask",",","a","+","oe",")",".","g",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["ok","=","oc","(","a","+","oe",")",";","ol","=","1.0","-","clamp","(","abs","(","ok","-","og",")","*","oi",",","0.0",",","1.0",")",";","of","+=","oj","*","ol",";","oh","+=","ol",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["of","+=","oj",";"]}]}}]},{type:"textline",tokens:["}","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","a",")",".","r",",","of","/","oh",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","a",")",".","r",",","of","/","16.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","a",";","void","main","(",")","{","vec2","kr",";","vec4","ks",",","kt",";","float","ku",";","ku","=","texture2D","(","u_depth",",","a",")",".","x",";","ks","=","vec4","(","a","*","2.0","-","1.0",",","2.0","*","ku","-","1.0",",","1.0",")",";","kt","=","u_view_proj_inverse","*","ks",";","kt","=","kt","/","kt",".","w",";","kt","=","u_view_proj_prev","*","kt",";","kt","/=","kt",".","w",";","kr","=","(","ks",".","xy","-","kt",".","xy",")","/","4.0","+","0.5",";","kr","=","clamp","(","kr",",","0.0",",","1.0",")",";","gl_FragColor","=","cq","(","kr",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","b","=","0.0",";","float","c","=","1.0",";","struct","d","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","g","(","vec3","e",",","vec3","f",")","{","return","any","(","lessThan","(","abs","(","e","-","f",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","j","(","in","vec4","h",",","in","vec3","i",")","{","return","i","+","2.0","*","cross","(","h",".","xyz",",","cross","(","h",".","xyz",",","i",")","+","h",".","w","*","i",")",";","}","vec4","l","(","in","vec4","k",")","{","return","vec4","(","-","k",".","xyz",",","k",".","w",")","/","dot","(","k",",","k",")",";","}","vec3","q","(","vec4","m",",","vec4","n",",","vec4","o",")","{","vec3","p",";","p","=","o",".","xyz","*","m",".","w",";","p","=","j","(","n",",","p",")",";","p","+=","m",".","xyz","*","o",".","w",";","return","p",";","}","vec3","w","(","vec4","r",",","vec4","s",",","vec4","t",")","{","vec4","u",";","vec3","v",";","v","=","t",".","xyz","-","r",".","xyz","*","t",".","w",";","u","=","l","(","s",")",";","v","=","j","(","u",",","v",")",";","v","/=","r",".","w",";","return","v",";","}","mat4","x","(",")","{","return","mat4","(","c",",","b",",","b",",","b",",","b",",","c",",","b",",","b",",","b",",","b",",","c",",","b",",","b",",","b",",","b",",","c",")",";","}","mat4","z","(","float","y",")","{","return","mat4","(","c",",","b",",","b",",","b",",","b",",","cos","(","y",")",",","sin","(","y",")",",","b",",","b",",","-","sin","(","y",")",",","cos","(","y",")",",","b",",","b",",","b",",","b",",","c",")",";","}","mat4","B","(","float","A",")","{","return","mat4","(","cos","(","A",")",",","b",",","-","sin","(","A",")",",","b",",","b",",","c",",","b",",","b",",","sin","(","A",")",",","b",",","cos","(","A",")",",","b",",","b",",","b",",","b",",","c",")",";","}","mat4","D","(","float","C",")","{","return","mat4","(","cos","(","C",")",",","sin","(","C",")",",","b",",","b",",","-","sin","(","C",")",",","cos","(","C",")",",","b",",","b",",","b",",","b",",","c",",","b",",","b",",","b",",","b",",","c",")",";","}","d","F","(","in","d","E",")","{","return","d","(","E",".","a",",","E",".","b",",","normalize","(","E",".","c",")",",","normalize","(","E",".","d",")",",","normalize","(","E",".","e",")",",","E",".","f",")",";","}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","G","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","||","!","BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","N","(","vec3","H",",","mat4","I",")","{","vec3","J",",","L",",","M",";","J","=","vec3","(","I","[","0","]","[","0","]",",","I","[","1","]","[","0","]",",","I","[","2","]","[","0","]",")",";","L","=","vec3","(","I","[","0","]","[","1","]",",","I","[","1","]","[","1","]",",","I","[","2","]","[","1","]",")",";","M","=","vec3","(","I","[","0","]","[","2","]",",","I","[","1","]","[","2","]",",","I","[","2","]","[","2","]",")",";","L","=","cross","(","M",",","J",")",";","J","=","normalize","(","J",")",";","L","=","normalize","(","L",")",";","M","=","normalize","(","M",")",";","return","mat4","(","vec4","(","J",",","0.0",")",",","vec4","(","L",",","0.0",")",",","vec4","(","M",",","0.0",")",",","vec4","(","H",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","T","(","vec3","O",",","vec3","P",")","{","vec3","Q",",","R",",","S",";","Q","=","O","-","P",";","Q",".","y","=","0.0",";","R","=","cross","(","G",",","Q",")",";","S","=","cross","(","Q",",","R",")",";","R","=","normalize","(","R",")",";","S","=","normalize","(","S",")",";","Q","=","normalize","(","Q",")",";","return","mat4","(","vec4","(","R",",","0.0",")",",","vec4","(","S",",","0.0",")",",","vec4","(","Q",",","0.0",")",",","vec4","(","P",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","aa","(","in","vec3","U",",","float","V",",","float","W",",","float","X",",","vec3","Y",")","{","float","Z",",","_",";","Z","=","fract","(","length","(","Y",")","/","0.17",")",";","_","=","X","+","Z","/","10.0",";","Z","=","Z",";","if","(","X","!=","0.0",")","Z","/=","X",";","U","*=","1.0","+","0.5","*","sin","(","V",")",";","_","=","length","(","U",")","*","W","*","sin","(","2.0","*","3.14","*","V","*","_","+","Z",")",";","return","D","(","_",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","ai","(","in","vec3","ab",",","in","vec3","ac",",","in","mat4","ad",")","{","vec3","ae",";","float","af",",","ag",";","mat4","ah",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","||","!","BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["ah","=","N","(","ac",",","ad",")",";"]}]}},{type:"elif",expression:["BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["af","=","fract","(","(","ac",".","x","*","1.43","+","ac",".","y","*","0.123","+","ac",".","z","*","6.1",")",")",";","af","=","2.0","*","M_PI","*","af",";","ae","=","normalize","(","vec3","(","ad","[","0","]","[","2","]",",","0.0",",","ad","[","2","]","[","2","]",")",")",";","ag","=","acos","(","ae","[","2","]",")",";","if","(","ae","[","0","]","<","0.0",")","ag","=","2.0","*","M_PI","-","ag",";","ag","=","ag","-","af",";","if","(","ag","<","0.0",")","ag","=","2.0","*","M_PI","+","ag",";","af","=","af",";","if","(","ag","<=","MAX_BILLBOARD_ANGLE",")","af","+=","ag",";","else","if","(","ag","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","af","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","ag","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","ag","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","af","+=","ag","-","M_PI",";","else","if","(","ag","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","af","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","ag","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","af","+=","ag","-","2.0","*","M_PI",";","ah","=","B","(","af",")",";","ah","[","3","]","=","vec4","(","ac",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ah","=","T","(","ab",",","ac",")",";"]}]}}]},{type:"textline",tokens:["return","ah",";","}"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","ao","(","in","vec3","aj",",","in","vec3","ak",",","in","mat4","al",",","mat4","am",")","{","mat4","an",";","an","=","ai","(","aj",",","ak",",","al",")",";","am","[","3","]","=","vec4","(","0.0",",","0.0",",","0.0",",","1.0",")",";","an","=","an","*","am",";","return","an",";","}"]}]}}]},{type:"textline",tokens:["d","av","(","in","vec3","ap",",","in","vec3","aq",",","in","vec3","ar",",","in","vec3","as",",","in","vec3","at",",","in","mat4","au",")","{","ap","=","(","au","*","vec4","(","ap",",","1.0",")",")",".","xyz",";","aq","=","(","au","*","vec4","(","aq",",","1.0",")",")",".","xyz",";","ar","=","(","au","*","vec4","(","ar",",","0.0",")",")",".","xyz",";","as","=","(","au","*","vec4","(","as",",","0.0",")",")",".","xyz",";","at","=","(","au","*","vec4","(","at",",","0.0",")",")",".","xyz",";","return","F","(","d","(","ap",",","aq",",","ar",",","as",",","at",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","ay","(","vec2","aw",",","vec3","ax",")","{","return","(","aw","+","0.5",")","*","ax",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aF","(","in","vec4","az",",","in","vec4","aA",",","in","float","aB",")","{","float","aC",",","aD",",","aE",";","aC","=","az","[","0","]","*","aA","[","0","]","+","az","[","1","]","*","aA","[","1","]","+","az","[","2","]","*","aA","[","2","]","+","az","[","3","]","*","aA","[","3","]",";","if","(","aC","<","0.0",")","{","aA","*=","-","1.0",";","aC","=","-","aC",";","}","if","(","abs","(","aC",")",">=","1.0",")","return","az",";","aD","=","acos","(","aC",")",";","aC","=","sqrt","(","1.0","-","aC","*","aC",")",";","if","(","abs","(","aC",")","<","0.001",")","return","vec4","(","az","*","0.5","+","aA","*","0.5",")",";","aE","=","sin","(","(","1.0","-","aB",")","*","aD",")","/","aC",";","aD","=","sin","(","aB","*","aD",")","/","aC",";","return","az","*","aE","+","aA","*","aD",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","aR","(","in","vec3","aG",",","in","vec4","aH",",","in","vec4","aI",",","in","vec4","aJ",",","in","vec4","aK",",","in","float","aL",")","{","vec3","aM",",","aN",",","aO",";","vec4","aP",",","aQ",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["aP","=","aF","(","aH",",","aI",",","aL",")",";","aQ","=","mix","(","aJ",",","aK",",","aL",")",";","aM","=","j","(","aP",",","aG",")",";","aM","=","aM","*","aQ",".","w","+","aQ",".","xyz",";","return","aM",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aN","=","q","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","aG",",","1.0",")",")",";","aO","=","j","(","aH",",","aN",")",";","aN","=","j","(","aI",",","aN",")",";","aO","=","aO","*","aJ",".","w","+","aJ",".","xyz",";","aN","=","aN","*","aK",".","w","+","aK",".","xyz",";","aM","=","mix","(","aO",",","aN",",","aL",")",";","return","w","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","aM",",","1.0",")",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","a_","(","in","vec3","aS",",","in","vec4","aT",",","in","vec4","aU",",","in","float","aV",")","{","vec4","aW",";","vec3","aX",",","aY",",","aZ",";","aX","=","q","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","aS",",","0.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["aW","=","aF","(","aT",",","aU",",","aV",")",";","aY","=","j","(","aW",",","aX",")",";","return","w","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","aY",",","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aZ","=","j","(","aT",",","aX",")",";","aX","=","j","(","aU",",","aX",")",";","aY","=","mix","(","aZ",",","aX",",","aV",")",";","return","w","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","aY",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aR","(","in","vec3","ba",",","in","vec4","bb",",","in","vec4","bc",")","{","vec3","bd",";","bd","=","q","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","ba",",","1.0",")",")",";","bd","=","j","(","bb",",","bd",")",";","bd","=","bd","*","bc",".","w","+","bc",".","xyz",";","return","w","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","bd",",","1.0",")",")",";","}","vec3","a_","(","in","vec3","be",",","in","vec4","bf",")","{","vec3","bg",";","bg","=","q","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","be",",","0.0",")",")",";","bg","=","j","(","bf",",","bg",")",";","return","w","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","bg",",","0.0",")",")",";","}"]}]}}]},{type:"textline",tokens:["void","bv","(","inout","vec3","bh",",","inout","vec3","bi",",","inout","vec3","bj",",","inout","vec3","bk",")","{","int","bl",",","bm",";","vec4","bn",";","vec3","bo",",","bp",",","bq",",","br",";","float","bs",",","bt",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bs","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","bo","=","vec3","(","0.0",",","0.0",",","0.0",")",";","bp","=","vec3","(","0.0",",","0.0",",","0.0",")",";","bq","=","vec3","(","0.0",",","0.0",",","0.0",")",";","br","=","vec3","(","0.0",",","0.0",",","0.0",")",";","bn","=","a_influence",";","for","(","int","bu","=","0",";","bu","<","4",";","bu","++",")","{","bl","=","int","(","bn","[","bu","]",")",";","bt","=","fract","(","bn","[","bu","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bo","+=","bt","*","aR","(","bh",",","u_quatsb","[","bl","]",",","u_quatsa","[","bl","]",",","u_transb","[","bl","]",",","u_transa","[","bl","]",",","bs",")",";","bp","+=","bt","*","a_","(","bi",",","u_quatsb","[","bl","]",",","u_quatsa","[","bl","]",",","bs",")",";","bq","+=","bt","*","a_","(","bj",",","u_quatsb","[","bl","]",",","u_quatsa","[","bl","]",",","bs",")",";","br","+=","bt","*","a_","(","bk",",","u_quatsb","[","bl","]",",","u_quatsa","[","bl","]",",","bs",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bo","+=","bt","*","aR","(","bh",",","u_quatsb","[","bl","]",",","u_transb","[","bl","]",")",";","bp","+=","bt","*","a_","(","bi",",","u_quatsb","[","bl","]",")",";","bq","+=","bt","*","a_","(","bj",",","u_quatsb","[","bl","]",")",";","br","+=","bt","*","a_","(","bk",",","u_quatsb","[","bl","]",")",";"]}]}}]},{type:"textline",tokens:["}","bh","=","bo",";","bi","=","bp",";","bj","=","bq",";","bk","=","br",";","}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","bm","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","bm",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bh","=","aR","(","bh",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","u_transb","[","bm","]",",","u_transa","[","bm","]",",","bs",")",";","bi","=","a_","(","bi",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","bs",")",";","bj","=","a_","(","bj",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","bs",")",";","bk","=","a_","(","bk",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","bs",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bh","=","aR","(","bh",",","u_quatsb","[","bm","]",",","u_transb","[","bm","]",")",";","bi","=","a_","(","bi",",","u_quatsb","[","bm","]",")",";","bj","=","a_","(","bj",",","u_quatsb","[","bm","]",")",";","bk","=","a_","(","bk",",","u_quatsb","[","bm","]",")",";"]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","bG","(","inout","vec3","bw",",","in","vec3","bx",",","in","float","by",",","in","float","bz",",","in","float","bA",",","in","vec3","bB",",","in","float","bC",")","{","vec3","bD",";","float","bE",",","bF",";","bE","=","length","(","bx",")",";","bF","=","bz","*","(","1.0","+","0.1","*","fract","(","bE",")",")",";","bF","=","by","*","bC","*","(","1.0","+","sin","(","2.0","*","3.14","*","bA","*","bF","+","bE",")",")",";","bE","=","(","bw",".","y","-","bx",".","y",")","*","abs","(","bF",")",";","bE","+=","1.0",";","bE","*=","bE",";","bE","=","bE","*","bE","-","bE",";","bD","=","bw",";","bD",".","xz","+=","bB",".","xz","*","bE","*","sign","(","bF",")",";","bE","=","length","(","bw","-","bx",")",";","bw","=","bx","+","normalize","(","bD","-","bx",")","*","bE",";","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","bI","(","vec4","bH",")","{","return","bH","*","bH","*","(","3.0","-","2.0","*","bH",")",";","}","vec4","bK","(","vec4","bJ",")","{","return","abs","(","fract","(","bJ","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","bM","(","vec4","bL",")","{","return","bI","(","bK","(","bL",")",")",";","}","void","cc","(","inout","vec3","bN",",","in","float","bO",",","in","vec3","bP",",","in","vec3","bQ",",","in","vec3","bR",",","in","float","bS",",","in","float","bT",",","in","float","bU",",","in","vec3","bV",")","{","vec3","bW",";","vec4","bX",";","vec2","bY",",","bZ",";","float","b_",",","ca",",","cb",";","b_","=","dot","(","bR",",","vec3","(","1.0",")",")",";","ca","=","b_","+","bV",".","g",";","cb","=","dot","(","bN",",","vec3","(","bV",".","g",")",")",";","bY","=","(","bO","+","vec2","(","cb",",","ca",")",")",";","bX","=","(","(","fract","(","(","bY",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","bQ",")","*","bS",";","bX","=","bM","(","bX",")",";","bZ","=","bX",".","xz","+","bX",".","yw",";","bZ",".","y","=","0.5","-","bZ",".","y",";","bW","=","bZ",".","xyx","*","bV",".","rbr","*","vec3","(","bT","*","bP",".","x",",","bU",",","bT","*","bP",".","z",")",";","bN","+=","bW",";","}"]}]}}]},{type:"textline",tokens:["void","cj","(","inout","vec3","cd",",","inout","vec3","ce",",","in","vec3","cf",")","{","vec3","cg",",","ch",",","ci",";","cg","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["ch","=","ce",";","ci","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ch","=","cd",";","ci","=","ce",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cc","(","ch",",","u_time",",","cf",",","cg",",","ci",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["bG","(","ch",",","ci",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","cg",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bG","(","ch",",","ci",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","cg",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["cd","+=","ch","-","ce",";","ce","=","ch",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["cd","=","ch",";","ce","=","ci",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV_ORCO",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["3"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["3"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]},{type:"define",name:"MAPPING_TYPE_TEXTURE",tokens:["0.0"]},{type:"define",name:"MAPPING_TYPE_POINT",tokens:["1.0"]},{type:"define",name:"MAPPING_TYPE_VECTOR",tokens:["2.0"]},{type:"define",name:"MAPPING_TYPE_NORMAL",tokens:["3.0"]},{type:"define",name:"MTEX_BLEND",tokens:["0"]},{type:"define",name:"MTEX_ADD",tokens:["1"]},{type:"define",name:"MTEX_SUB",tokens:["2"]},{type:"define",name:"MTEX_MUL",tokens:["3"]},{type:"define",name:"MTEX_SCREEN",tokens:["4"]},{type:"define",name:"MTEX_OVERLAY",tokens:["5"]},{type:"define",name:"MTEX_DIFF",tokens:["6"]},{type:"define",name:"MTEX_DIV",tokens:["7"]},{type:"define",name:"MTEX_DARK",tokens:["8"]},{type:"define",name:"MTEX_LIGHT",tokens:["9"]},{type:"define",name:"MTEX_BLEND_HUE",tokens:["10"]},{type:"define",name:"MTEX_BLEND_SAT",tokens:["11"]},{type:"define",name:"MTEX_BLEND_VAL",tokens:["12"]},{type:"define",name:"MTEX_BLEND_COLOR",tokens:["13"]},{type:"define",name:"MTEX_SOFT_LIGHT",tokens:["14"]},{type:"define",name:"MTEX_LIN_LIGHT",tokens:["15"]},{type:"define",name:"REFL_NONE",tokens:["0"]},{type:"define",name:"REFL_MIRRORMAP",tokens:["1"]},{type:"define",name:"REFL_PLANE",tokens:["2"]},{type:"define",name:"REFL_CUBE",tokens:["3"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","ck","=","255.0",";","float","cl","=","0.0",";","float","cm","=","1.0",";","vec4","cq","(","const","in","float","cn",")","{","vec4","co",",","cp",";","co","=","vec4","(","ck","*","ck","*","ck",",","ck","*","ck",",","ck",",","cm",")",";","cp","=","vec4","(","cl",",","cm","/","ck",",","cm","/","ck",",","cm","/","ck",")",";","co","=","fract","(","cn","*","co",")",";","co","-=","co",".","xxyz","*","cp",";","return","co",";","}","float","cu","(","const","in","vec4","cr",")","{","vec4","cs",";","float","ct",";","cs","=","vec4","(","cm","/","(","ck","*","ck","*","ck",")",",","cm","/","(","ck","*","ck",")",",","cm","/","ck",",","cm",")",";","ct","=","dot","(","cr",",","cs",")",";","return","ct",";","}","vec4","cq","(","const","in","vec2","cv",")","{","vec4","cw",";","vec2","cx",",","cy",";","cx","=","vec2","(","ck",",","cm",")",";","cy","=","vec2","(","cl",",","cm","/","ck",")",";","cw","=","fract","(","cv",".","xxyy","*","cx",".","xyxy",")",";","cw","-=","cw",".","xxzz","*","cy",".","xyxy",";","if","(","cv",".","r","==","cm",")","cw",".","rg","=","vec2","(","cl",",","cm",")",";","if","(","cv",".","g","==","cm",")","cw",".","ba","=","vec2","(","cl",",","cm",")",";","return","cw",";","}","vec2","cC","(","const","in","vec4","cz",")","{","vec2","cA",",","cB",";","cB","=","vec2","(","cm","/","ck",",","cm",")",";","cA",".","r","=","dot","(","cz",".","rg",",","cB",")",";","cA",".","g","=","dot","(","cz",".","ba",",","cB",")",";","return","cA",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","cK","=","0.0",";","float","cL","=","1.0",";","vec4","cN","(","vec4","cM",")","{","return","cM","-","floor","(","cM","*","(","cL","/","289.0",")",")","*","289.0",";","}","vec3","cN","(","vec3","cO",")","{","return","cO","-","floor","(","cO","*","(","cL","/","289.0",")",")","*","289.0",";","}","vec2","cN","(","vec2","cP",")","{","return","cP","-","floor","(","cP","*","(","cL","/","289.0",")",")","*","289.0",";","}","vec4","cR","(","vec4","cQ",")","{","return","cQ","-","floor","(","cQ","*","(","cL","/","7.0",")",")","*","7.0",";","}","vec4","cT","(","vec4","cS",")","{","return","cN","(","(","34.0","*","cS","+","5.0",")","*","cS",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","da","(","vec2","cU",")","{","vec4","cV",",","cW",",","cX",",","cY",";","vec2","cZ",",","c_",";","cZ","=","cN","(","floor","(","cU",")",")",";","c_","=","fract","(","cU",")",";","cV","=","c_",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","cW","=","c_",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","cX","=","cT","(","cZ",".","x","+","vec4","(","cK",",","cL",",","cK",",","cL",")",")",";","cX","=","cT","(","cX","+","cZ",".","y","+","vec4","(","cK",",","cK",",","cL",",","cL",")",")",";","cY","=","cR","(","cX",")","*","K","+","K2",";","cX","=","cR","(","floor","(","cX","*","K",")",")","*","K","+","K2",";","cV","=","cV","+","JITTER","*","cY",";","cY","=","cW","+","JITTER","*","cX",";","cW","=","cV","*","cV","+","cY","*","cY",";"]},{type:"condition",parts:[{type:"if",expression:["1"],group:{type:"group",parts:[{type:"textline",tokens:["cW",".","xy","=","min","(","cW",".","xy",",","cW",".","zw",")",";","cW",".","x","=","min","(","cW",".","x",",","cW",".","y",")",";","return","cW",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["cW",".","xy","=","(","cW",".","x","<","cW",".","y",")","?","cW",".","xy",":","cW",".","yx",";","cW",".","xz","=","(","cW",".","x","<","cW",".","z",")","?","cW",".","xz",":","cW",".","zx",";","cW",".","xw","=","(","cW",".","x","<","cW",".","w",")","?","cW",".","xw",":","cW",".","wx",";","cW",".","y","=","min","(","cW",".","y",",","cW",".","z",")",";","cW",".","y","=","min","(","cW",".","y",",","cW",".","w",")",";","return","sqrt","(","cW",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","mat3","dj","(","vec2","db",",","float","dc",")","{","vec4","dd",",","de",",","df",",","dg",";","vec2","dh",",","di",";","dh","=","cN","(","floor","(","db",")",")",";","di","=","fract","(","db",")",";","dd","=","di",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","de","=","di",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","df","=","cT","(","dh",".","x","+","vec4","(","cK",",","cL",",","cK",",","cL",")",")",";","df","=","cT","(","df","+","dh",".","y","+","vec4","(","cK",",","cK",",","cL",",","cL",")",")",";","dg","=","cR","(","df",")","*","K","+","K2",";","df","=","cR","(","floor","(","df","*","K",")",")","*","K","+","K2",";","dd","=","dd","+","JITTER","*","dg",";","dg","=","de","+","JITTER","*","df",";","de","=","dd","*","dd","+","dg","*","dg",";","dd","+=","dc",";","dg","+=","dc",";","df","=","dd","*","dd","+","dg","*","dg",";","dd","+=","dc",";","dg","+=","dc",";","dd","=","dd","*","dd","+","dg","*","dg",";","de",".","xy","=","min","(","de",".","xy",",","de",".","zw",")",";","de",".","x","=","min","(","de",".","x",",","de",".","y",")",";","df",".","xy","=","min","(","df",".","xy",",","df",".","zw",")",";","df",".","x","=","min","(","df",".","x",",","df",".","y",")",";","dd",".","xy","=","min","(","dd",".","xy",",","dd",".","zw",")",";","dd",".","x","=","min","(","dd",".","x",",","dd",".","y",")",";","return","mat3","(","de",".","xx",",","cK",",","df",".","xx",",","cK",",","dd",".","xx",",","cK",")",";","}","vec3","dl","(","vec3","dk",")","{","return","cN","(","(","(","dk","*","34.0",")","+","cL",")","*","dk",")",";","}","float","dx","(","vec2","dm",")","{","vec3","dn",",","dp",",","dq",",","dr",";","vec4","ds",";","vec2","dt",",","du",",","dv",";","const","vec4","dw","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","dt","=","floor","(","dm","+","dot","(","dm",",","dw",".","yy",")",")",";","du","=","dm","-","dt","+","dot","(","dt",",","dw",".","xx",")",";","dv","=","(","du",".","x",">","du",".","y",")","?","vec2","(","cL",",","cK",")",":","vec2","(","cK",",","cL",")",";","ds","=","du",".","xyxy","+","dw",".","xxzz",";","ds",".","xy","-=","dv",";","dt","=","cN","(","dt",")",";","dn","=","dl","(","dl","(","dt",".","y","+","vec3","(","cK",",","dv",".","y",",","cL",")",")","+","dt",".","x","+","vec3","(","cK",",","dv",".","x",",","cL",")",")",";","dp","=","max","(","0.5","-","vec3","(","dot","(","du",",","du",")",",","dot","(","ds",".","xy",",","ds",".","xy",")",",","dot","(","ds",".","zw",",","ds",".","zw",")",")",",","cK",")",";","dp","=","dp","*","dp",";","dp","=","dp","*","dp",";","dn","=","2.0","*","fract","(","dn","*","dw",".","www",")","-","cL",";","dq","=","abs","(","dn",")","-","0.5",";","dr","=","floor","(","dn","+","0.5",")",";","dn","=","dn","-","dr",";","dp","*=","1.79284291400159","-","0.85373472095314","*","(","dn","*","dn","+","dq","*","dq",")",";","dr",".","x","=","dn",".","x","*","du",".","x","+","dq",".","x","*","du",".","y",";","dr",".","yz","=","dn",".","yz","*","ds",".","xz","+","dq",".","yz","*","ds",".","yw",";","return","130.0","*","dot","(","dp",",","dr",")",";","}","vec2","dB","(","vec2","dy",")","{","float","dz",",","dA",";","dz","=","dot","(","dy",",","vec2","(","12.9898",",","78.233",")",")",";","dA","=","dot","(","dy",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","dz","=","fract","(","sin","(","dz",")","*","43758.5453",")","*","2.0","-","cL",";","dA","=","fract","(","sin","(","dA",")","*","43758.5453",")","*","2.0","-","cL",";","return","vec2","(","dz",",","dA",")",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"CSM_BLEND_BETWEEN_CASCADES",tokens:["1.0"]},{type:"var",name:"CSM_FADE_LAST_CASCADE",tokens:["1.0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","dC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","dD","=","0.1",";","const","float","dE","=","0.1",";","const","float","dF","=","-","0.01",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","dG","=","0.05",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","dH","=","mat4","(","0.14383161",",","0.34495938",",","-","0.38277543",",","-","0.26496911",",","0.53742981",",","0.19984126",",","0.79197514",",","-","0.094184101",",","-","0.94201624",",","-","0.91588581",",","-","0.2418884",",","0.44323325",",","-","0.81544232",",","0.94558609",",","-","0.81409955",",","0.97484398",")",";","mat4","dI","=","mat4","(","-","0.1410079",",","0.2938776",",","0.27676845",",","-","0.41893023",",","-","0.4737342",",","0.78641367",",","0.19090188",",","-","0.9293887",",","-","0.39906216",",","0.45771432",",","0.99706507",",","-","0.97511554",",","-","0.87912464",",","-","0.76890725",",","0.9143759",",","0.7564837",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["bool","dL","(","vec2","dJ",",","float","dK",")","{","return","all","(","lessThanEqual","(","dJ",",","vec2","(","1.0","+","dK",")",")",")","&&","all","(","greaterThanEqual","(","dJ",",","vec2","(","0.0","-","dK",")",")",")",";","}"]}]}}]},{type:"textline",tokens:["float","dX","(","vec3","dM",",","sampler2D","dN",",","float","dO",")","{","vec2","dP",",","dQ",";","mat2","dR",";","float","dS",",","dT",",","dU",";","dM",".","z","=","clamp","(","dM",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["dS","=","0.0",";","dT","=","dB","(","dM",".","xy",")",".","x","*","M_PI",";","dU","=","cos","(","dT",")",";","dT","=","sin","(","dT",")",";","dR","=","mat2","(","dU",",","dT",",","-","dT",",","dU",")",";","for","(","int","dV","=","0",";","dV","<","4",";","dV","++",")","for","(","int","dW","=","0",";","dW","<","4",";","dW","++",")","{","dQ",".","x","=","dH","[","dV","]","[","dW","]",";","dQ",".","y","=","dI","[","dV","]","[","dW","]",";","dQ","=","dR","*","dQ",";","dP","=","dM",".","xy","+","dQ","*","dO","/","SHADOW_TEX_RES",";"]},{type:"condition",parts:[{type:"if",expression:["!","CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","dL","(","dP",",","dF",")",")","dS","+=","1.0",";","else"]}]}}]},{type:"textline",tokens:["dS","+=","step","(","dM",".","z",",","texture2D","(","dN",",","dP",")",".","r",")",";","}","dS","/=","16.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dS","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","dS",",","0.0",",","1.0",")",";","}","float","en","(","vec3","dY",",","sampler2D","dZ",",","vec3","d_",",","sampler2D","ea",",","float","eb",",","float","ec",",","float","ed",")","{","vec2","ee",",","ef",";","mat2","eg",";","float","eh",",","ei",",","ej",",","ek",";","dY",".","z","=","clamp","(","dY",".","z",",","0.0",",","1.0",")",";","d_",".","z","=","clamp","(","d_",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["eh","=","0.0",";","ei","=","0.0",";","ej","=","dB","(","dY",".","xy",")",".","x","*","M_PI",";","ek","=","cos","(","ej",")",";","ej","=","sin","(","ej",")",";","eg","=","mat2","(","ek",",","ej",",","-","ej",",","ek",")",";","for","(","int","el","=","0",";","el","<","4",";","el","++",")","for","(","int","em","=","0",";","em","<","4",";","em","++",")","{","ef",".","x","=","dH","[","el","]","[","em","]",";","ef",".","y","=","dI","[","el","]","[","em","]",";","ef","=","eg","*","ef",";","ee","=","dY",".","xy","+","ef","*","eb","/","SHADOW_TEX_RES",";","eh","+=","step","(","dY",".","z",",","texture2D","(","dZ",",","ee",")",".","r",")",";","ee","=","d_",".","xy","+","ef","*","ec","/","SHADOW_TEX_RES",";","ei","+=","step","(","d_",".","z",",","texture2D","(","ea",",","ee",")",".","r",")",";","}","eh","=","mix","(","eh",",","ei",",","ed",")",";","eh","/=","16.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eh","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","eh",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["float","er","(","vec2","eo",")","{","float","ep",",","eq",";","ep","=","min","(","eo",".","x",",","eo",".","y",")",";","eq","=","min","(","1.0","-","eo",".","x",",","1.0","-","eo",".","y",")",";","return","min","(","ep",",","eq",")",";","}","float","eu","(","float","es",",","float","et",")","{","if","(","et",">=","0.0","&&","et","<=","dE",")","es","=","(","es","-","1.0",")","/","dE","*","et","+","1.0",";","return","es",";","}","float","eF","(","vec3","ev",",","vec3","ew",",","sampler2D","ex",",","sampler2D","ey",",","float","ez",",","float","eA",",","float","eB",",","float","eC",")","{","float","eD",",","eE",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_BLEND_BETWEEN_CASCADES"],group:{type:"group",parts:[{type:"textline",tokens:["eE","=","er","(","ev",".","xy",")",";","if","(","-","eC",">","eB","&&","eE",">=","0.0","&&","eE","<=","dD","&&","dL","(","ew",".","xy",",","0.0",")",")","{","eE","=","1.0","-","eE","/","dD",";","eD","=","en","(","ev",",","ex",",","ew",",","ey",",","ez",",","eA",",","eE",")",";","}","else"]}]}}]},{type:"textline",tokens:["eD","=","dX","(","ev",",","ex",",","ez",")",";","return","eD",";","}","float","eN","(","vec3","eG",",","sampler2D","eH",",","float","eI",",","float","eJ",",","float","eK",")","{","float","eL",",","eM",";","eL","=","dX","(","eG",",","eH",",","eI",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_FADE_LAST_CASCADE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","-","eK",">","eJ",")","{","eM","=","er","(","eG",".","xy",")",";","eL","=","eu","(","eL",",","eM",")",";","}"]}]}}]},{type:"textline",tokens:["return","eL",";","}","float","eU","(","float","eO",")","{","vec3","eP",",","eQ",",","eR",",","eS",";","float","eT",";","eT","=","1.0",";","eP","=","cE",".","xyz","/","cE",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["eQ","=","cF",".","xyz","/","cF",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["eR","=","cG",".","xyz","/","cG",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["eS","=","cH",".","xyz","/","cH",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dL","(","eP",".","xy",",","0.0",")",")","{","eT","=","eF","(","eP",",","eQ",",","u_shadow_map0",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","0","]",",","eO",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","dL","(","eP",".","xy",",","dG",")",")","{","eT","=","eN","(","eP",",","u_shadow_map0",",","u_pcf_blur_radii","[","0","]",",","u_csm_center_dists","[","0","]",",","eO",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","dL","(","eQ",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["eT","=","eF","(","eQ",",","eR",",","u_shadow_map1",",","u_shadow_map2",",","u_pcf_blur_radii","[","1","]",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","1","]",",","eO",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eT","=","eN","(","eQ",",","u_shadow_map1",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","1","]",",","eO",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","dL","(","eR",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["eT","=","eF","(","eR",",","eS",",","u_shadow_map2",",","u_shadow_map3",",","u_pcf_blur_radii","[","2","]",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","2","]",",","eO",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eT","=","eN","(","eR",",","u_shadow_map2",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","2","]",",","eO",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","dL","(","eS",".","xy",",","0.0",")",")","eT","=","eN","(","eS",",","u_shadow_map3",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","3","]",",","eO",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","eT",";","}"]}]}}]}]}}]},{type:"textline",tokens:["float","eZ","(","inout","vec3","eV",")","{","float","eW",";","vec3","eX",";","vec2","eY",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["eY","=","texture2DProj","(","u_shadow_mask",",","cI",")",".","rg",";","eX","=","vec3","(","eY",".","r",")",";","eW","=","eY",".","g",";","dC","=","vec4","(","eX",",","eW",")",";","eV","*=","dC",".","a",";","return","dC",".","r",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["return","eU","(","cJ",".","z",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","fd","(","vec3","e_",",","float","fa",",","vec2","fb",")","{","vec2","fc",";","fc","=","vec2","(","(","e_",".","x","-","fb",".","x",")","/","fa",",","-","(","e_",".","z","-","fb",".","y",")","/","fa",")",";","return","fract","(","fc",")",";","}","vec2","fh","(","vec2","fe",",","float","ff",",","vec2","fg",")","{","return","vec2","(","fe",".","x","*","ff",",","-","fe",".","y","*","ff",")","+","fg",";","}","d","fi","(",")","{","return","d","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","d","fE","(","vec3","fj",",","vec3","fk",",","vec3","fl",",","vec3","fm",",","vec3","fn",",","sampler2D","fo",",","sampler2D","fp",",","vec3","fq",",","float","fr",",","vec3","fs",",","vec4","ft",",","mat4","fu",")","{","mat4","fv",";","vec4","fw",";","vec2","fx",",","fy",",","fz",";","float","fA",",","fB",";","vec3","fC",";","fC","=","j","(","ft",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","fA","=","-","fC",".","x",";","fB","=","-","fC",".","z",";","fx","=","vec2","(","fs",".","x","+","fr","*","(","-","1.0","-","fA",")","/","2.0",",","fs",".","z","+","fr","*","(","1.0","-","fB",")","/","2.0",")",";","fy","=","fd","(","fn",",","fr",",","fx",")",";","fA","=","fr","/","2.0",";","fz","=","abs","(","fh","(","fy","-","vec2","(","0.5",")",",","fr",",","vec2","(","0.0",")",")",")",";","fB","=","fA","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","fz",")",">","fB",")","return","fi","(",")",";","fA","=","fr","/","fq",".","z",";","fz","=","(","fy","-","vec2","(","0.5",")",")","*","fA","+","vec2","(","0.5",")",";","fC","=","fC","*","(","fr","/","fq",".","z","-","1.0",")","/","2.0",";","fz",".","x","+=","fC",".","x",";","fz",".","y","-=","fC",".","z",";","fw","=","texture2D","(","fp",",","fz",")",";","fB","=","fw",".","r",";","if","(","fB","<","u_scale_threshold",")","return","fi","(",")",";","fA","=","fq",".","y","-","fq",".","x",";","fA","=","fq",".","y","-","texture2D","(","fo",",","fz",")",".","r","*","fA",";","fz","=","fj",".","xz","-","fn",".","xz",";","fn",".","xz","=","fh","(","fy",",","fr",",","fx",")",";","fn",".","y","=","fA",";","fj",".","xz","=","fn",".","xz","+","fz",";","fj",".","y","*=","fB",";","fj",".","y","+=","fA",";","fC","=","fw",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["fj","-=","fn",";","fv","=","ai","(","fs",",","fn",",","fu",")",";","d","fD","=","av","(","fj",",","fn",",","fk",",","fl",",","fm",",","fv",")",";","fD",".","b","=","fn",";","fD",".","f","=","fC",";","return","F","(","fD",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","F","(","d","(","fj",",","fn",",","fk",",","fl",",","fm",",","fC",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","fK","(","mat4","fF",",","vec4","fG",")","{","vec4","fH",";","float","fI",";","vec2","fJ",";","fJ","=","(","fF","*","u_v_light_matrix","[","3","]",")",".","xy",";","fI","=","SHADOW_TEX_RES","/","2.0",";","fJ","=","floor","(","fJ","*","fI","+","0.5",")","/","fI","-","fJ",";","fH","=","fF","*","fG",";","fH",".","xy","+=","fJ",";","fH","=","u_b_light_matrix","*","fH",";","return","fH",";","}","void","fO","(","vec3","fL",")","{","vec4","fM",";","vec3","fN",";","fN","=","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";","fM","=","u_v_light_matrix","*","vec4","(","fL","+","u_normal_offset","*","fN",",","1.0",")",";","cE","=","fK","(","u_p_light_matrix0",",","fM",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["cF","=","fK","(","u_p_light_matrix1",",","fM",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["cG","=","fK","(","u_p_light_matrix2",",","fM",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["cH","=","fK","(","u_p_light_matrix3",",","fM",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["void","fO","(","vec4","fP",")","{","float","fQ",",","fR",",","fS",";","fQ","=","fP",".","x",";","fR","=","fP",".","y",";","fS","=","fP",".","w",";","cI",".","x","=","(","fQ","+","fS",")","/","2.0",";","cI",".","y","=","(","fR","+","fS",")","/","2.0",";","cI",".","z","=","fS",";","}"]}]}}]}]},exports["include/gamma.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","fV","(","inout","vec3","fU",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["fU","=","max","(","vec3","(","0.0",")",",","fU",")",";","fU","=","pow","(","fU",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","fX","(","inout","vec3","fW",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["fW","=","max","(","vec3","(","0.0",")",",","fW",")",";","fW","=","pow","(","fW",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","f_","(","inout","vec3","fY",",","in","float","fZ",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["fY","=","fY","*","fZ",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","gg","(","inout","vec3","gc",",","in","float","gd",",","in","vec4","ge",")","{","float","gf",";","gf","=","ge",".","w","*","gd",";","gf","=","exp","(","-","gf","*","gf",")",";","gf","=","clamp","(","gf",",","0.0",",","1.0",")",";","gc","=","mix","(","ge",".","rgb",",","gc",",","gf",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gm","(","in","mat4","gh",",","in","vec3","gi",")","{","vec3","gj",",","gk",",","gl",";","gj","=","mix","(","gh","[","0","]",".","rgb",",","gh","[","1","]",".","rgb",",","max","(","sign","(","gi",".","x",")",",","0.0",")",")",";","gk","=","mix","(","gh","[","2","]",".","rgb",",","gh","[","3","]",".","rgb",",","max","(","sign","(","gi",".","z",")",",","0.0",")",")",";","gl","=","vec3","(","gh","[","0","]",".","a",",","gh","[","1","]",".","a",",","gh","[","2","]",".","a",")",";","gj","=","mix","(","gj",",","gk",",","abs","(","gi",".","z",")",")",";","gj","=","mix","(","gj",",","gl",",","abs","(","gi",".","y",")",")",";","return","gj",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","go","(","inout","float","gn",")","{","gn","-=","0.5",";","gn","=","4.0","*","(","gn","*","gn","*","gn",")","+","0.5",";","}","void","gC","(","inout","vec3","gp",",","in","float","gq",",","in","vec3","gr",",","in","float","gs",",","in","vec4","gt",",","in","vec4","gu",",","in","float","gv",",","in","float","gw",")","{","vec3","gx",",","gy",";","float","gz",",","gA",",","gB",";","gz","=","gu",".","w","*","gq",";","gz","=","exp","(","-","gz","*","gz",")",";","gz","=","clamp","(","gz",",","0.0",",","1.0",")",";","gA","=","max","(","gr",".","y",",","0.0",")",";","gq","=","max","(","gq","-","max","(","gs","/","gA",",","0.0",")",",","0.0",")",";","gB","=","gt",".","w","*","gq",";","gB","=","1.0","-","gB",";","gB","=","max","(","gB",",","0.0",")",";","go","(","gB",")",";","gB","+=","max","(","gv","-","0.5",",","0.0",")",";","if","(","gB","<","gz",")","{","gx","=","vec3","(","0.0",",","0.02",",","0.05",")",";","gy","=","gt",".","rgb",";","gs","=","clamp","(","-","gs","*","0.03",",","0.0",",","0.8",")",";","gy","=","mix","(","gy",",","gx",",","min","(","gA",",","1.0",")",")",";","gy","=","mix","(","gy",",","vec3","(","0.0",")",",","gs",")","*","gw",";","gp","=","mix","(","gy",",","gp",",","gB",")",";","}","if","(","gB",">=","gz",")","{","gp","=","mix","(","gu",".","rgb",",","gp",",","gz",")",";","}","}","void","gK","(","inout","vec3","gD",",","in","float","gE",",","in","float","gF",",","in","vec4","gG",",","in","float","gH",")","{","vec3","gI",";","float","gJ",";","gJ","=","gG",".","w","*","gE",";","gJ","=","1.0","-","gJ",";","gJ","=","clamp","(","gJ",",","0.0",",","1.0",")",";","go","(","gJ",")",";","gF","=","clamp","(","-","gF","*","0.03",",","0.0",",","0.8",")",";","gI","=","mix","(","gG",".","rgb",",","vec3","(","0.0",")",",","gF",")","*","gH",";","gD","=","mix","(","gI",",","gD",",","gJ",")",";","}"]}]}}]}]},exports["include/lighting.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","gL","=","0.0",";","float","gM","=","1.0",";","float","gN","=","0.5",";","struct","gO","{","vec4","a",";","vec3","b",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","gW","(","vec3","gP",",","vec3","gQ",",","vec3","gR",",","float","gS",",","float","gT",")","{","float","gU",";","vec3","gV",";","gV","=","normalize","(","gP","+","gQ",")",";","gU","=","(","gM","-","gS",")","*","max","(","dot","(","gR",",","gV",")",",","gL",")","+","gS",";","return","pow","(","gU",",","gT",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","hf","(","vec3","gX",",","vec3","gY",",","vec3","gZ",",","float","g_",")","{","float","ha",",","hb",",","hc",",","hd",";","vec3","he",";","he","=","normalize","(","gX","+","gY",")",";","ha","=","max","(","dot","(","gZ",",","he",")",",","0.001",")",";","hb","=","max","(","dot","(","gZ",",","gY",")",",","0.01",")",";","hc","=","max","(","dot","(","gZ",",","gX",")",",","0.01",")",";","ha","=","tan","(","acos","(","ha",")",")",";","hd","=","max","(","g_",",","0.001",")",";","return","hc","*","(","gM","/","(","4.0","*","M_PI","*","hd","*","hd",")",")","*","(","exp","(","-","(","ha","*","ha",")","/","(","hd","*","hd",")",")","/","(","sqrt","(","hb","*","hc",")",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["float","hn","(","vec3","hg",",","vec3","hh",",","vec3","hi",",","float","hj",",","float","hk",")","{","float","hl",";","vec3","hm",";","hm","=","normalize","(","hg","+","hh",")",";","hl","=","acos","(","dot","(","hm",",","hi",")",")",";","if","(","hl","<","hj",")","return","gM",";","else","if","(","hl",">=","hj","+","hk","||","hk","==","gL",")","return","gL",";","else","return","gM","-","(","hl","-","hj",")","/","hk",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["void","hC","(","float","ho",",","vec3","hp",",","vec3","hq",",","vec3","hr",",","float","hs",",","inout","float","ht",")","{","vec3","hu",",","hv",";","float","hw",",","hx",",","hy",",","hz",",","hA",",","hB",";","if","(","hs",">","gL",")","{","hw","=","max","(","dot","(","hp",",","hr",")",",","gL",")",";","hx","=","hs","*","hs",";","hy","=","gM","-","gN","*","(","hx","/","(","hx","+","0.33",")",")",";","hu","=","hq","-","ho","*","hp",";","hv","=","hr","-","hw","*","hp",";","if","(","length","(","hu",")","==","gL","||","length","(","hv",")","==","gL","||","abs","(","ho",")",">","gM","||","abs","(","hw",")",">","gM",")","ht","=","ht","*","hy",";","else","{","hz","=","acos","(","ho",")",";","hw","=","acos","(","hw",")",";","hu","=","normalize","(","hu",")",";","hv","=","normalize","(","hv",")",";","hA","=","max","(","hz",",","hw",")",";","hB","=","min","(","hz",",","hw",")",";","hB","*=","0.95",";","hz","=","max","(","dot","(","hu",",","hv",")",",","gL",")",";","hw","=","0.45","*","(","hx","/","(","hx","+","0.09",")",")",";","ht","=","ht","*","(","hy","+","(","hw","*","hz","*","sin","(","hA",")","*","tan","(","hB",")",")",")",";","}","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["void","hJ","(","vec3","hD",",","vec3","hE",",","float","hF",",","float","hG",",","out","float","hH",")","{","float","hI",";","if","(","hF","==","gL",")","{","hH","=","gM",";","}","else","{","hI","=","gM","+","abs","(","dot","(","hE",",","hD",")",")",";","hI","=","hG","+","(","gM","-","hG",")","*","pow","(","hI",",","hF",")",";","hH","=","clamp","(","hI",",","gL",",","gM",")",";","}","}"]}]}}]},{type:"textline",tokens:["void","hR","(","vec3","hK",",","vec3","hL",",","vec3","hM",",","vec2","hN",",","const","float","hO",",","out","float","hP",")","{","float","hQ",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["hJ","(","hK",",","hL",",","hN","[","0","]",",","hN","[","1","]",",","hP",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hQ","=","max","(","dot","(","hK",",","hL",")",",","gL",")",";","hP","=","(","gM","-","hO",")","*","hQ","+","hO",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["hC","(","hQ",",","hK",",","hL",",","hM",",","hN","[","0","]",",","hP",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","void","hY","(","vec3","hS",",","vec3","hT",",","vec3","hU",",","float","hV",",","vec2","hW",",","out","float","hX",")","{"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["hX","=","gW","(","hS",",","hT",",","hU",",","hV",",","hW","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["hX","=","hf","(","hS",",","hT",",","hU",",","hW","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["hX","=","hn","(","hS",",","hT",",","hU",",","hW","[","0","]",",","hW","[","1","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hX","=","gL",";"]}]}}]},{type:"textline",tokens:["}","void","iv","(","vec3","hZ",",","vec3","h_",",","vec3","ia",",","vec2","ib",",","vec4","ic",",","vec3","id",",","vec3","ie",",","vec3","ig",",","inout","gO","ih",",","float","ii",",","vec2","ij",",","vec2","ik",",","float","il",")","{","float","im",",","io",",","ip",",","iq",",","ir",",","is",",","it",",","iu",";","im","=","gL",";","if","(","ib",".","r","!=","gL",")","hR","(","ia",",","h_",",","hZ",",","ij",",","il",",","im",")",";","io","=","gL",";","if","(","ib",".","g","!=","gL",")","hY","(","h_",",","hZ",",","ia",",","il",",","ik",",","io",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","h_",",","ia",")","*","dot","(","hZ",",","ia",")","<","gL",")","{","ip","=","ic",".","x",";","iq","=","ic",".","y",";","ir","=","ic",".","z",";","is","=","ic",".","w",";","it","=","clamp","(","abs","(","dot","(","h_",",","ia",")",")",",","gL",",","gM",")",";","iu","=","clamp","(","dot","(","hZ",",","-","h_",")",",","gL",",","gM",")",";","iu","=","pow","(","iu",",","iq",")",";","ih",".","a","+=","ii","*","vec4","(","ig","*","it","*","pow","(","id",",","vec3","(","ip",")",")",",","gM",")",";","ih",".","a","+=","ir","*","mix","(","vec4","(","id",",","gM",")",",","vec4","(","gM",")",",","is",")","*","ii","*","vec4","(","ig","*","it","*","vec3","(","iu",")",",","gM",")",";","}","else","{","ih",".","b","+=","ig","*","ie","*","io",";","ih",".","a","+=","vec4","(","ig","*","id","*","im",",","io",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ih",".","b","+=","ig","*","ie","*","io",";","ih",".","a","+=","vec4","(","ig","*","id","*","im",",","io",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"lamp",name:"POINT",statements:[{type:"textline",tokens:["iY","=","iJ","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","iQ","=","iG","[","LAMP_IND","]",";","iR","=","iI","[","LAMP_IND","]",";","iM","=","gL",";"]},{type:"textline",tokens:["iR","=","iR",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","iR","*=","iF",";","iQ","=","iQ","-","iA",";"]},{type:"textline",tokens:["iN","=","length","(","iQ",")",";","iR","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","iN","*","iN",")",";","iQ","=","normalize","(","iQ",")",";","iv","(","iC",",","iQ",",","iB",",","iY",",","iL",",","iy",",","iz",",","iR",",","jb",",","iK",",","iE",",","iD",",","iM",")",";"]}]},{type:"lamp",name:"SPOT",statements:[{type:"textline",tokens:["iZ","=","iJ","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","iS","=","iG","[","LAMP_IND","]",";","iT","=","iI","[","LAMP_IND","]",";","iU","=","iH","[","LAMP_IND","]",";","iN","=","gL",";"]},{type:"textline",tokens:["iT","=","iT",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","iT","*=","iF",";","iS","=","iS","-","iA",";"]},{type:"textline",tokens:["iO","=","length","(","iS",")",";","iT","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","iO","*","iO",")",";","iS","=","normalize","(","iS",")",";"]},{type:"textline",tokens:["iO","=","dot","(","iS",",","iU",")",";","iO","*=","smoothstep","(","gL",",","gM",",","(","iO","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","iT","*=","iO",";","iv","(","iC",",","iS",",","iB",",","iZ",",","iL",",","iy",",","iz",",","iT",",","jb",",","iK",",","iE",",","iD",",","iN",")",";"]}]},{type:"lamp",name:"SUN",statements:[{type:"textline",tokens:["i_","=","iJ","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","iU","=","iI","[","LAMP_IND","]",";","iV","=","iH","[","LAMP_IND","]",";","iO","=","gL",";"]},{type:"textline",tokens:["iU","=","iU",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","iU","*=","iF",";","iv","(","iC",",","iV",",","iB",",","i_",",","iL",",","iy",",","iz",",","iU",",","jb",",","iK",",","iE",",","iD",",","iO",")",";"]}]},{type:"lamp",name:"HEMI",statements:[{type:"textline",tokens:["ja","=","iJ","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","iW","=","iI","[","LAMP_IND","]",";","iX","=","iH","[","LAMP_IND","]",";","iP","=","gN",";"]},{type:"textline",tokens:["iW","=","iW",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","iW","*=","iF",";","iv","(","iC",",","iX",",","iB",",","ja",",","iL",",","iy",",","iz",",","iW",",","jb",",","iK",",","iE",",","iD",",","iP",")",";"]}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["gO","jc","(","vec3","iw",",","vec3","ix",",","vec3","iy",",","vec3","iz",",","vec3","iA",",","vec3","iB",",","vec3","iC",",","vec2","iD",",","vec2","iE",",","float","iF",",","vec3","iG","[","NUM_LIGHTS","]",",","vec3","iH","[","NUM_LIGHTS","]",",","vec3","iI","[","NUM_LIGHTS","]",",","vec4","iJ","[","NUM_LFACTORS","]",",","float","iK",",","vec4","iL",")","{","float","iM",",","iN",",","iO",",","iP",";","vec3","iQ",",","iR",",","iS",",","iT",",","iU",",","iV",",","iW",",","iX",";","vec2","iY",",","iZ",",","i_",",","ja",";","gO","jb",";","jb",".","a","=","vec4","(","iw","+","iy","*","ix",",","gL",")",";","jb",".","b","=","vec3","(","gL",")",";"]},{type:"lamps_main"},{type:"textline",tokens:["return","jb",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gO","jh","(","vec3","jd",",","vec3","je",",","vec3","jf",")","{","gO","jg",";","jg",".","a","=","vec4","(","jd","+","jf","*","je",",","gL",")",";","jg",".","b","=","vec3","(","gL",")",";","return","jg",";","}"]}]}}]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","jA","(","inout","vec3","ji",",","float","jj",",","float","jk",",","float","jl",",","vec3","jm",",","vec3","jn",",","vec3","jo",",","vec4","jp",",","vec3","jq",",","float","jr",")","{","mat3","js",";","float","jt",",","ju",",","jv",",","jw",";","vec2","jx",";","vec3","jy",";","vec4","jz",";","if","(","jr",">","CAUSTICS_VIEW_DISTANCE",")","return",";","jz","=","jp",";","jy","=","jq","+","jm",";","jy",".","xz","=","10.0","*","sin","(","0.1","*","jy",".","xz",")",";","jy","=","jy","+","2.0","*","cross","(","-","jz",".","xyz",",","cross","(","-","jz",".","xyz",",","jy",")","+","jz",".","w","*","jy",")",";","jx","=","jy",".","xz",";","jy","=","jn",";","jt","=","max","(","dot","(","jm",",","jy",")",",","0.0",")",";","ju","=","0.025",";","jx",".","s","+=","0.5","*","sin","(","dot","(","jq","+","jk",",","vec3","(","1.0",")",")",")",";","jx",".","t","+=","0.7","*","(","-","sin","(","dot","(","jq","-","jk",",","vec3","(","-","0.7",")",")",")",")",";","jx",".","st","+=","0.23","*","cos","(","4.0","*","jj","-","CAUST_SPEED",".","x","*","jk",")",";","jx",".","st","+=","3.0","*","sin","(","jj","-","0.3","*","CAUST_SPEED",".","y","*","jk",")",";","jv","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","jj",",","0.0",")",")",";","js","=","dj","(","(","jx","/","jv",")",",","ju",")",";","jv","=","(","js","*","vec3","(","1.0",",","0.0",",","0.0",")",")",".","x",";","ju","=","(","js","*","vec3","(","0.0",",","1.0",",","0.0",")",")",".","x",";","jw","=","(","js","*","vec3","(","0.0",",","0.0",",","1.0",")",")",".","x",";","jy","=","CAUST_BRIGHT","*","vec3","(","jv",",","ju",",","jw",")",";","jv","=","jl","*","jt",";","ju","=","max","(","sign","(","jj",")",",","0.0",")",";","jv","=","min","(","jv","+","0.5","*","sign","(","-","jm",".","y",")","*","ju",",","1.0",")",";","jv","*=","1.0","-","ju","*","(","0.1","*","jj",")",";","jy","*=","jv",";","jy","*=","jy",";","jw","=","min","(","-","jj","+","10.0",",","1.0",")",";","ji","+=","max","(","(","2.0","*","jo","*","jy",")","*","jw",",","0.0",")",";","}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_PLANE","||","REFLECTION_TYPE","==","REFL_CUBE","||","REFLECTION_TYPE","==","REFL_MIRRORMAP"],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","jN","(","in","vec3","jH",",","vec3","jI",",","float","jJ",",","float","jK",")","{","float","jL",";","vec3","jM",";","jM","=","normalize","(","jI","+","jH",")",";","jL","=","1.0","-","dot","(","jH",",","jM",")",";","jL","=","jK","+","(","1.0","-","jK",")","*","pow","(","jL",",","jJ",")",";","return","jL",";","}","void","j_","(","inout","vec3","jO",",","vec3","jP",",","vec3","jQ",",","float","jR",")","{","vec2","jS",",","jT",";","float","jU",",","jV",",","jW",";","vec3","jX",",","jY",",","jZ",";","jX","=","reflect","(","-","jP",",","jQ",")",";","jU","=","u_fresnel_params","[","2","]",";","jV","=","u_fresnel_params","[","3","]",";","jW","=","1.0",";","if","(","jU","!=","0.0",")","jW","=","jN","(","jP",",","jX",",","jU",",","jV",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","==","REFL_CUBE"],group:{type:"group",parts:[{type:"textline",tokens:["jY","=","textureCube","(","u_cube_reflection",",","jX",")",".","xyz",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_PLANE"],group:{type:"group",parts:[{type:"textline",tokens:["jZ","=","u_refl_plane",".","xyz","*","dot","(","jQ",",","u_refl_plane",".","xyz",")",";","jZ","=","jQ","-","jZ",";","jS","=","(","u_view_matrix_frag","*","vec4","(","jZ",",","0.0",")",")",".","xy",";","jT","=","cI",".","xy","/","cI",".","z",";","jT","+=","jS","*","REFL_BUMP",";","jY","=","texture2D","(","u_plane_reflection",",","jT",")",".","rgb",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","==","REFL_MIRRORMAP"],group:{type:"group",parts:[{type:"textline",tokens:["jY","=","textureCube","(","u_mirrormap",",","jX",")",".","xyz",";","jR","=","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["fV","(","jY",".","rgb",")",";","jO","=","mix","(","jO",",","jY",",","jR","*","jW",")",";","}"]}]}}]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["float","kf","(","in","float","ka",",","inout","vec2","kb",",","in","vec2","kc",")","{","float","kd",";","vec4","ke",";","ke","=","texture2D","(","u_scene_depth",",","kb",")",";","kd","=","cu","(","ke",")",";","if","(","kd","<","jG",")","{","kb","=","kc",";","return","ka",";","}","else","{","return","kd",";","}","return","ka",";","}"]}]}}]},{type:"textline",tokens:["vec3","kn","(","in","vec3","kg",",","in","vec2","kh",")","{","vec3","ki",";","float","kj",";","vec4","kk",";","vec2","kl",",","km",";","kl","=","kg",".","xy","/","kg",".","z",";","km","=","kl","+","kh",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["kk","=","texture2DProj","(","u_scene_depth",",","kg",")",";","kj","=","cu","(","kk",")",";","kf","(","kj",",","km",",","kl",")",";"]}]}}]},{type:"textline",tokens:["ki","=","texture2D","(","u_refractmap",",","km",")",".","rgb",";","fV","(","ki",")",";","return","ki",";","}"]}]}}]}]},exports["include/environment.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec3","kq","(","vec3","ko",")","{","float","kp",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["return","textureCube","(","u_sky_texture",",","ko",")",".","rgb",";"]}]}},{type:"elif",expression:["SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["kp","=","0.5","*","ko",".","y","+","0.5",";","return","mix","(","u_horizon_color",",","u_zenith_color",",","kp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","kU","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","k_","(","inout","float","kV",",","float","kW",",","vec2","kX",",","vec2","kY",")","{","float","kZ",";","kZ","=","kY",".","x","-","kX",".","x",";","kZ","=","(","kW","-","kX",".","x",")","/","kZ",";","kV","=","mix","(","kV",",","kY",".","y",",","clamp","(","kZ",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","lf","(","inout","vec3","la",",","float","lb",",","vec4","lc",",","vec4","ld",")","{","float","le",";","le","=","ld",".","x","-","lc",".","x",";","le","=","(","lb","-","lc",".","x",")","/","le",";","la","=","mix","(","la",",","ld",".","yzw",",","clamp","(","le",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["float","ll","(","float","lg",",","float","lh",",","vec2","li","[","SIZE_RAMP_LENGTH","]",")","{","float","lj",",","lk",";","lj","=","lg","/","lh",";","lk","=","li","[","0","]",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["k_","(","lk",",","lj",",","li","[","0","]",",","li","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["k_","(","lk",",","lj",",","li","[","1","]",",","li","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["k_","(","lk",",","lj",",","li","[","2","]",",","li","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","lk",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lr","(","float","lm",",","float","ln",",","vec4","lo","[","COLOR_RAMP_LENGTH","]",")","{","vec3","lp",";","float","lq",";","lq","=","lm","/","ln",";","lp","=","lo","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["lf","(","lp",",","lq",",","lo","[","0","]",",","lo","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["lf","(","lp",",","lq",",","lo","[","1","]",",","lo","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["lf","(","lp",",","lq",",","lo","[","2","]",",","lo","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","lp",";","}"]}]}}]},{type:"textline",tokens:["float","lz","(","float","ls",",","float","lt",",","float","lu",",","float","lv",")","{","float","lw",",","lx",",","ly",";","lw","=","max","(","0.01",",","min","(","lt",",","lu",")",")",";","lx","=","max","(","0.01",",","min","(","lt",",","lv",")",")",";","ly","=","lt","-","lx",";","lw","=","clamp","(","ls","/","lw",",","0.0",",","1.0",")","-","step","(","ly",",","ls",")","*","(","ls","-","ly",")","/","lx",";","return","lw",";","}","kU","lF","(",")","{","vec3","lA",",","lB",";","float","lC",",","lD",";","kU","lE",";","if","(","u_p_cyclic","==","1",")","{","lC","=","mod","(","u_p_time",",","u_p_length",")","-","a_p_delay",";","if","(","lC","<","0.0",")","lC","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","lC","=","u_p_time","-","a_p_delay",";","}","if","(","lC","<","0.0","||","lC",">=","a_p_lifetime",")","{","lE",".","a","=","0.0001",";","lE",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","lC","<","0.0","||","lC",">=","a_p_lifetime",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["lA","=","a_position",";","lB","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lA","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","lB","=","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";"]}]}}]},{type:"textline",tokens:["lA","+=","u_p_nfactor","*","lC","*","lB",";","lA","+=","a_p_vels",".","xyz","*","lC",";","lA",".","y","-=","u_p_gravity","*","lC","*","lC","/","2.0",";","lD","=","max","(","u_p_mass",",","EPSILON",")",";","lA","+=","(","u_p_wind","/","lD",")","*","lC","*","lC","/","2.0",";","lE",".","b","=","lA",";","lE",".","e","=","a_p_vels",".","w","*","lC",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["lE",".","a","=","ll","(","lC",",","u_p_max_lifetime",",","u_p_size_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lE",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["lE",".","d","=","lr","(","lC",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lE",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["lE",".","c","=","lz","(","lC",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","lE",";","}"]}]},exports["include/blending.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","lH","=","0.0",";","float","lI","=","1.0",";","vec3","lJ","=","vec3","(","lH",")",";","vec3","lK","=","vec3","(","lI",")",";","vec3","lP","(","vec3","lL",")","{","float","lM",",","lN",";","vec4","lO",";","lO","=","vec4","(","lH",",","-","lI","/","3.0",",","2.0","/","3.0",",","-","lI",")",";","lO","=","mix","(","vec4","(","lL",".","bg",",","lO",".","wz",")",",","vec4","(","lL",".","gb",",","lO",".","xy",")",",","step","(","lL",".","b",",","lL",".","g",")",")",";","lO","=","mix","(","vec4","(","lO",".","xyw",",","lL",".","r",")",",","vec4","(","lL",".","r",",","lO",".","yzx",")",",","step","(","lO",".","x",",","lL",".","r",")",")",";","lM","=","lO",".","x","-","min","(","lO",".","w",",","lO",".","y",")",";","lN","=","1.0e-10",";","return","vec3","(","abs","(","lO",".","z","+","(","lO",".","w","-","lO",".","y",")","/","(","6.0","*","lM","+","lN",")",")",",","lM","/","(","lO",".","x","+","lN",")",",","lO",".","x",")",";","}","vec3","lT","(","vec3","lQ",")","{","vec3","lR",";","vec4","lS",";","lS","=","vec4","(","lI",",","2.0","/","3.0",",","lI","/","3.0",",","3.0",")",";","lR","=","abs","(","fract","(","vec3","(","lQ",".","r",",","lQ",".","r",",","lQ",".","r",")","+","lS",".","xyz",")","*","6.0","-","lS",".","www",")",";","return","lQ",".","b","*","mix","(","lS",".","xxx",",","clamp","(","lR","-","lS",".","xxx",",","lH",",","lI",")",",","lQ",".","g",")",";","}","vec3","lX","(","vec3","lU",",","vec3","lV",",","float","lW",")","{","return","mix","(","lU",",","lV",",","lW",")",";","}","vec3","ma","(","vec3","lY",",","vec3","lZ",",","float","l_",")","{","return","l_","*","lY","+","lZ",";","}","vec3","me","(","vec3","mb",",","vec3","mc",",","float","md",")","{","return","mc","-","md","*","mb",";","}","vec3","mj","(","vec3","mf",",","vec3","mg",",","float","mh",")","{","float","mi",";","mi","=","lI","-","mh",";","return","(","vec3","(","mi",")","+","mh","*","mf",")","*","mg",";","}","vec3","mo","(","vec3","mk",",","vec3","ml",",","float","mm",")","{","vec3","mn",";","mn","=","vec3","(","lI","-","mm",")",";","return","lK","-","(","mn","+","mm","*","(","lK","-","mk",")",")","*","(","lK","-","ml",")",";","}","vec3","mt","(","vec3","mp",",","vec3","mq",",","float","mr",")","{","vec3","ms",";","ms","=","vec3","(","lI","-","mr",")",";","return","mix","(","mq","*","(","ms","+","2.0","*","mr","*","mp",")",",","lK","-","(","ms","+","2.0","*","mr","*","(","lK","-","mp",")",")","*","(","lK","-","mq",")",",","step","(","0.5",",","mq",")",")",";","}","vec3","mx","(","vec3","mu",",","vec3","mv",",","float","mw",")","{","return","mix","(","mv",",","abs","(","mu","-","mv",")",",","mw",")",";","}","vec3","mB","(","vec3","my",",","vec3","mz",",","float","mA",")","{","return","mix","(","mz",",","mz","/","(","my","+","step","(","my",",","lJ",")",")",",","mA",")",";","}","vec3","mF","(","vec3","mC",",","vec3","mD",",","float","mE",")","{","return","mix","(","mD",",","min","(","mC",",","mD",")",",","mE",")",";","}","vec3","mJ","(","vec3","mG",",","vec3","mH",",","float","mI",")","{","return","max","(","mI","*","mG",",","mH",")",";","}","vec3","mP","(","vec3","mK",",","vec3","mL",",","float","mM",")","{","vec3","mN",",","mO",";","mN","=","lP","(","mL",")",";","if","(","mN",".","y","!=","lH",")","{","mO","=","lP","(","mK",")",";","mN","=","lT","(","vec3","(","mN",".","x",",","mO",".","yz",")",")",";","return","mix","(","mK",",","mN",",","mM",")",";","}","return","mK",";","}","vec3","mV","(","vec3","mQ",",","vec3","mR",",","float","mS",")","{","vec3","mT",",","mU",";","mT","=","lP","(","mQ",")",";","if","(","mT",".","y","!=","lH",")","{","mU","=","lP","(","mR",")",";","return","lT","(","vec3","(","mT",".","x",",","mix","(","mT",".","y",",","mU",".","y",",","mS",")",",","mT",".","z",")",")",";","}","return","mQ",";","}","vec3","na","(","vec3","mW",",","vec3","mX",",","float","mY",")","{","vec3","mZ",",","m_",";","mZ","=","lP","(","mW",")",";","m_","=","lP","(","mX",")",";","return","lT","(","vec3","(","mZ",".","xy",",","mix","(","mZ",".","z",",","m_",".","z",",","mY",")",")",")",";","}","vec3","ng","(","vec3","nb",",","vec3","nc",",","float","nd",")","{","vec3","ne",",","nf",";","ne","=","lP","(","nc",")",";","if","(","ne",".","y","!=","lH",")","{","nf","=","lP","(","nb",")",";","ne","=","lT","(","vec3","(","ne",".","xy",",","nf",".","z",")",")",";","return","mix","(","nb",",","ne",",","nd",")",";","}","return","nb",";","}","vec3","nl","(","vec3","nh",",","vec3","ni",",","float","nj",")","{","vec3","nk",";","nk","=","lK","-","(","lK","-","ni",")","*","(","lK","-","nh",")",";","return","mix","(","nh",",","(","(","lK","-","nh",")","*","ni","*","nh",")","+","nh","*","nk",",","nj",")",";","}","vec3","np","(","vec3","nm",",","vec3","nn",",","float","no",")","{","return","nm","+","no","*","(","2.0","*","nn","-","lI",")",";","}","float","nv","(","float","nq",",","float","nr",",","float","ns",",","float","nt",")","{","float","nu",";","nu","=","lI","-","nt",";","return","(","nu","+","ns","*","nq",")","*","nr",";","}","float","nB","(","float","nw",",","float","nx",",","float","ny",",","float","nz",")","{","float","nA",";","nA","=","lI","-","nz",";","return","lI","-","(","nA","+","ny","*","(","lI","-","nw",")",")","*","(","lI","-","nx",")",";","}","float","nH","(","float","nC",",","float","nD",",","float","nE",",","float","nF",")","{","float","nG",";","nG","=","lI","-","nF",";","return","mix","(","nD","*","(","nG","+","2.0","*","nE","*","nC",")",",","lI","-","(","nG","+","2.0","*","nE","*","(","lI","-","nC",")",")","*","(","lI","-","nD",")",",","step","(","0.5",",","nD",")",")",";","}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","nS","(","in","sampler2D","nM",",","in","vec2","nN",",","in","vec2","nO",")","{","float","nP",",","nQ",",","nR",";","nP","=","texture2D","(","nM",",","nN",")",".","r",";","nQ","=","nO",".","x",";","nR","=","nO",".","y",";","nP","=","2.0","*","nQ","/","(","nQ","+","nR","-","(","2.0","*","nP","-","1.0",")","*","(","nR","-","nQ",")",")",";","return","nP",";","}"]}]}}