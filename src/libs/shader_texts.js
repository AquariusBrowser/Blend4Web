/**
 * Copyright (C) 2014-2016 Triumph LLC
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

b4w.module["shader_texts"] = function(exports, require) {exports["anchors.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["void","main","(",")","{","gl_FragColor","=","vec4","(","1.0",")",";","}"]}]},exports["anchors.glslv"] = {type:"group",parts:[{type:"var",name:"ANCHOR_NUM",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","float","a_index",";","uniform","vec3","u_position","[","ANCHOR_NUM","]",";","uniform","mat4","u_view_proj_matrix",";","void","main","(",")","{","gl_Position","=","u_view_proj_matrix","*","vec4","(","u_position","[","int","(","a_index",")","]",",","1.0",")",";","gl_PointSize","=","4.0",";","}"]}]},exports["color_id.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"std_enums.glsl"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","uniform","float","u_alpha_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_color_id",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_outline_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";","varying","vec4","bD",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";","varying","vec4","bJ",";","varying","vec4","bK",";","varying","vec4","bL",";","uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";","uniform","sampler2D","u_shadow_map1",";","uniform","sampler2D","u_shadow_map2",";","uniform","sampler2D","u_shadow_map3",";","uniform","sampler2D","u_shadow_mask",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","mat4","qN",";","float","qO",",","qP",";","vec4","qQ",";","vec3","qR",",","qS",",","qT",",","qU",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["qR","=","u_camera_eye_frag","-","bC",";","qR","=","normalize","(","qR",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["qN","=","O","(","u_view_tsr_frag",")",";","qM","(","qR",",","qN",",","qS",",","qT",",","qU",",","qQ",",","qO",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qM","(","qR",",","mat4","(","0.0",")",",","qS",",","qT",",","qU",",","qQ",",","qO",")",";"]}]}}]},{type:"textline",tokens:["qO","=","qO",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["qO","=","(","texture2D","(","u_sampler",",","bM",")",")",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["qP","=","u_alpha_factor","*","qO",";","qP","+=","(","1.0","-","step","(","0.0",",","qP",")",")",";","qO","=","mix","(","qP",",","1.0",",","u_diffuse_color",".","a",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qO","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","qO","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_outline_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";","varying","vec4","bD",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","tv",";","float","tw",",","tx",",","ty",";","vec3","tz",",","tA",",","tB",",","tC",",","tD",",","tE",";","mat4","tF",",","tG",",","tH",";","tF","=","O","(","u_view_tsr",")",";","tz","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["tA","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tB","=","vec3","(","a_tangent",")",";","tC","=","a_tangent","[","3","]","*","cross","(","tA",",","tB",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tB","=","vec3","(","0.0",")",";","tC","=","vec3","(","0.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tA","=","vec3","(","0.0",")",";","tB","=","vec3","(","0.0",")",";","tC","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["tz","=","mix","(","tz",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["tA","=","mix","(","tA",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tD","=","vec3","(","a_tangent",")",";","tE","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","tD",")",";","tB","=","mix","(","tB",",","tD",",","u_va_frame_factor",")",";","tC","=","mix","(","tC",",","tE",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sB","(","tz",",","tB",",","tC",",","tA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tC","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tC","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tG","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["tB","=","(","tG","*","vec4","(","tC",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tH","=","ru","(","u_camera_eye",",","tB",",","tF",",","tG",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tH","=","ro","(","u_camera_eye",",","tB",",","tF",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tH","=","tH","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","tB",")",";"]}]}}]},{type:"textline",tokens:["c","tI","=","rB","(","tz","-","tC",",","tC",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","tH",")",";","tI",".","b","=","tB",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","tI","=","rB","(","tz",",","tC",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","tG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tp","(","tI",".","a",",","tI",".","b",",","tA",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tA","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tA","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tp","(","tI",".","a",",","tI",".","b",",","tA",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rE","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bC","=","tI",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","tI",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tw","=","(","dot","(","cross","(","tI",".","e",",","tI",".","c",")",",","tI",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","tI",".","c",",","tw",")",";"]}]}}]},{type:"textline",tokens:["bD","=","tF","*","vec4","(","tI",".","a",",","1.0",")",";","tv","=","u_proj_matrix","*","bD",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["tv",".","xy","+=","u_subpixel_jitter","*","tv",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tw","=","tv",".","x",";","tx","=","tv",".","y",";","ty","=","tv",".","w",";","bG",".","x","=","(","tw","+","ty",")","/","2.0",";","bG",".","y","=","(","tx","+","ty",")","/","2.0",";","bG",".","z","=","ty",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","bD",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["tu","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","tF","*","vec4","(","tI",".","a",",","1.0",")",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","tv",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","tv",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","tv",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","tv",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","tv",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","tv",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","tv",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","tv",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","tv",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","tw",";","vec3","tx",";","mat4","ty",",","tz",",","tA",";","ty","=","O","(","u_view_tsr",")",";","tz","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["tx","=","(","tz","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","tA","=","ro","(","u_camera_eye",",","tx",",","ty",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tA","=","tA","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["c","tB","=","rB","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","tA",")",";","tB",".","b","=","tx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","tB","=","rB","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","tz",")",";"]}]}}]},{type:"textline",tokens:["tw","=","u_proj_matrix","*","ty","*","vec4","(","tB",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["tv","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tv","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["tv","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","tw",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","tw",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","varying","float","tx",";"]},{type:"include",file:"color_util.glslf"},{type:"include",file:"halo_color.glslf"},{type:"textline",tokens:["void","main","(",")","{","float","ud",";","vec3","ue",";","vec4","uf",";","uf","=","uc","(",")",";","ue","=","uf",".","rgb",";","ud","=","uf",".","a",";","bu","(","ue",")",";","bx","(","ue",",","ud",")",";","gl_FragColor","=","vec4","(","ue",",","ud",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","attribute","float","a_random_vals",";","uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","bM",";","varying","float","tx",";"]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","tw",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","ud",",","ue",";","vec3","uf",";","mat4","ug",",","uh",",","ui",";","ug","=","O","(","u_view_tsr",")",";","uh","=","O","(","u_model_tsr",")",";","uf","=","(","uh","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","bM","=","a_halo_bb_vertex","*","2.0",";","tx","=","a_random_vals",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uh","=","qT","(","uf",",","ug",")",";","ui","=","ug",";","ui","[","3","]","[","0","]","=","0.0",";","ui","[","3","]","[","1","]","=","0.0",";","ui","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uh","=","qT","(","uf",",","ug",")",";"]}]}}]},{type:"textline",tokens:["ud","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","ud","=","uh","*","ud",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["ue","=","u_proj_matrix","*","ui","*","ud",";","ue",".","z","=","0.99999","*","ue",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tw","=","ud",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ue","=","u_proj_matrix","*","ug","*","ud",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","ue",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","float","ud",";","vec3","ue",";","ue","=","u_diffuse_color",".","xyz",";","ud","=","u_diffuse_color",".","a",";","bu","(","ue",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","ue",",","ud",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","ue",",","ud",")",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_direction",";","uniform","mat3","u_model_tsr",";","uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_line_width",";"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["void","main","(",")","{","mat2","ud",";","float","ue",";","vec2","uf",",","ug",";","vec4","uh",";","mat4","ui",",","uj",";","ui","=","O","(","u_view_tsr",")",";","uj","=","O","(","u_model_tsr",")",";","c","uk","=","rB","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","normalize","(","a_direction",")",",","uj",")",";","uh","=","u_proj_matrix","*","ui","*","vec4","(","uk",".","a",",","1.0",")",";","uh",".","xyz","/=","uh",".","w",";","uf","=","(","u_proj_matrix","*","ui","*","vec4","(","uk",".","e",",","0.0",")",")",".","xy",";","ue","=","M_PI","/","2.0",";","ud","=","mat2","(","cos","(","ue",")",",","sin","(","ue",")",",","-","sin","(","ue",")",",","cos","(","ue",")",")",";","uf","=","ud","*","normalize","(","uf",")",";","ug","=","(","u_line_width","/","u_height",")","*","vec2","(","u_proj_matrix","[","0","]","[","0","]","/","u_proj_matrix","[","1","]","[","1","]",",","1.0",")",";","gl_Position","=","vec4","(","uh",".","xy","+","uf",".","xy","*","ug","/","2.0",",","uh",".","z",",","1.0",")",";","gl_Position","*=","uh",".","w",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_VECTOR_VIEW",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION","REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"nodes.glslf"},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","uK",";","mat4","uL",";","vec4","uM",";","vec3","uN",",","uO",",","uP",",","uQ",",","uR",";","float","uS",",","uT",",","uU",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["uS","=","length","(","bD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uT","=","bC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uN","=","u_sun_intensity",";"]}]}}]},{type:"textline",tokens:["uO","=","normalize","(","u_camera_eye_frag","-","bC",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uL","=","O","(","u_view_tsr_frag",")",";","qM","(","uO",",","uL",",","uP",",","uQ",",","uR",",","uM",",","uU",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qM","(","uO",",","mat4","(","0.0",")",",","uP",",","uQ",",","uR",",","uM",",","uU",")",";"]}]}}]},{type:"textline",tokens:["uP","=","uP",";","uU","=","uU",";","uR","=","uR",";","uM","=","uM",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["uP","=","max","(","uP","-","sqrt","(","0.01","*","-","min","(","uT",",","0.0",")",")",",","0.5","*","uP",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["bp","(","uP",",","uT",",","u_time",",","uM",",","uR",",","u_sun_direction",",","uN",",","u_sun_quaternion",",","bC",",","uS",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","uU","<","0.5",")","discard",";","uU","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uU","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uJ","(","uP",",","length","(","bD",")",",","uO",",","uT",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uJ","(","uP",",","length","(","bD",")",",","uO",",","1.0",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uK","=","texture2DProj","(","u_shadow_mask",",","bG",")",".","rg",";","uT","=","uK",".","g",";","uP","=","vec3","(","uT",")",";"]}]}}]},{type:"textline",tokens:["bu","(","uP",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","uP",",","uU",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","uP",",","uU",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"NUM_CAST_LAMPS",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat3","u_view_tsr",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"BILLBOARD","DYNAMIC_GRASS",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";"]},{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_v_light_tsr","[","NUM_CAST_LAMPS","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_v_light_ts","[","NUM_CAST_LAMPS","]",";","uniform","vec4","u_v_light_r","[","NUM_CAST_LAMPS","]",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uK",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","vD",",","vE",";","float","vF",";","vec3","vG",",","vH",",","vI",",","vJ",",","vK",",","vL",",","vM",";","mat4","vN",",","vO",",","vP",",","vQ",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["vN","=","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vO","=","O","(","u_view_tsr",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vN","=","O","(","u_view_tsr",")",";"]}]}}]},{type:"textline",tokens:["vP","=","O","(","u_model_tsr",")",";","vG","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"NODES",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vH","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vH","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vI","=","vec3","(","a_tangent",")",";","vJ","=","a_tangent","[","3","]","*","cross","(","vH",",","vI",")",";"]}]}},{type:"elif",expression:["NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vK","=","(","vP","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vL","=","normalize","(","(","vP","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","vK","=","vK","-","u_camera_eye",";","vJ","=","cross","(","vK",",","vL",")",";","vI","=","cross","(","vL",",","vJ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vI","=","vec3","(","0.0",")",";","vJ","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["vG","=","mix","(","vG",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["vH","=","mix","(","vH",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vL","=","vec3","(","a_tangent",")",";","vK","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","vL",")",";","vI","=","mix","(","vI",",","vL",",","u_va_frame_factor",")",";","vJ","=","mix","(","vJ",",","vK",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sB","(","vG",",","vI",",","vJ",",","vH",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vK","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vK","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","vR","=","vq","(","vG",",","vI",",","vJ",",","vH",",","vK",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","vN",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vL","=","(","vP","*","vec4","(","vK",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vQ","=","ru","(","u_camera_eye",",","vL",",","vN",",","vP",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vQ","=","ro","(","u_camera_eye",",","vL",",","vN",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vM","=","(","vP","*","vec4","(","vK",",","1.0",")",")",".","xyz",";","vQ","=","vQ","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vM",")",";"]}]}}]},{type:"textline",tokens:["c","vR","=","rB","(","vG","-","vK",",","vK",",","vI",",","vJ",",","vH",",","vQ",")",";","vR",".","b","=","vL",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","vR","=","rB","(","vG",",","vK",",","vI",",","vJ",",","vH",",","vP",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vF","=","(","dot","(","cross","(","vR",".","e",",","vR",".","c",")",",","vR",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","vR",".","c",",","vF",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tp","(","vR",".","a",",","vR",".","b",",","vH",")",";"]}]}}]},{type:"textline",tokens:["bC","=","vR",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","vR",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uK","=","u_camera_eye","-","vR",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rE","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uL","=","vR",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uL","=","a_color",";"]}]}}]}]}}]},{type:"textline",tokens:["vD","=","vN","*","vec4","(","vR",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["vE","=","vO","*","vec4","(","vR",".","a",",","1.0",")",";","bD","=","vE",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bD","=","vD",";"]}]}}]}]}}]},{type:"textline",tokens:["vE","=","u_proj_matrix","*","vD",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["vE",".","xy","+=","u_subpixel_jitter","*","vE",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bG","=","L","(","vE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vC","(","vR",".","a",",","vR",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","vD",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["tu","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vE",";","}"]}]},exports["main_stack.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","ALPHA_AS_SPEC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";","varying","vec3","bE",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"textline",tokens:["varying","vec3","uK",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"lighting_nodes.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","xI",",","xJ",",","xK",",","xL",";","mat4","xM",";","mat3","xN",";","vec2","xO",",","xP",",","xQ",",","xR",";","vec3","xS",",","xT",",","xU",",","xV",",","xW",",","xX",",","xY",",","xZ",",","x_",";","float","ya",",","yb",",","yc",",","yd",",","ye",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["ya","=","length","(","bD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["yb","=","bC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["xS","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xO","=","bM",";"]}]}}]},{type:"textline",tokens:["xT","=","normalize","(","bE",")",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["INVERT_FRONTFACING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")"]}]}}]},{type:"textline",tokens:["xT","=","xT",";","else","xT","=","-","xT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["xU","=","cross","(","xT",",","bF",".","xyz",")","*","bF",".","w",";","xN","=","mat3","(","bF",".","xyz",",","xU",",","xT",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xM","=","O","(","u_view_tsr_frag",")",";","xP","=","normalize","(","xM","*","vec4","(","bE",",","0.0",")",")",".","st",";","xP","=","xP","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ya","<","PARALLAX_LOD_DIST",")","{","yc","=","clamp","(","0.5","*","(","PARALLAX_LOD_DIST","-","ya",")",",","0.0",",","1.0",")",";","yc","=","u_parallax_scale","*","yc",";","xU","=","normalize","(","uK","*","xN",")",";","yd","=","1.0","/","PARALLAX_STEPS",";","xQ","=","xU",".","xy","*","yc","/","(","PARALLAX_STEPS","*","xU",".","z",")",";","yc","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xR","=","xP",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xR","=","xO",";"]}]}}]},{type:"textline",tokens:["ye","=","texture2D","(","u_normalmap0",",","xR",")",".","a",";","for","(","float","yf","=","1.0",";","yf","<=","PARALLAX_STEPS",";","yf","++",")","{","if","(","ye","<","yc",")","{","yc","-=","yd",";","xR","-=","xQ",";","ye","=","texture2D","(","u_normalmap0",",","xR",")",".","a",";","}","}","xQ","=","xR","+","xQ",";","yd","=","texture2D","(","u_normalmap0",",","xQ",")",".","a","-","(","yc","+","yd",")",";","yc","=","ye","-","yc",";","yd","=","yc","/","(","yc","-","yd",")",";","xR","=","yd","*","xQ","+","(","1.0","-","yd",")","*","xR",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xO","+=","xR","-","xP",";"]}]}}]},{type:"textline",tokens:["xP","=","xR",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xP","+=","xR","-","xO",";"]}]}}]},{type:"textline",tokens:["xO","=","xR",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xI","=","texture2D","(","u_normalmap0",",","xP",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xI","=","texture2D","(","u_normalmap0",",","xO",")",";"]}]}}]},{type:"textline",tokens:["xU","=","xI",".","rgb","-","0.5",";","xU","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","xU",",","u_normal_factor",")",";","xU","=","xN","*","xU",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xU","=","xT",";"]}]}}]},{type:"textline",tokens:["xU","=","normalize","(","xU",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["xP","=","normalize","(","xM","*","vec4","(","xU",",","0.0",")",")",".","st",";","xP","=","xP","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"textline",tokens:["xT","=","normalize","(","uK",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xV","=","uL",";","br","(","xV",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xI","=","vec4","(","xV",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xI","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["yd","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xJ","=","texture2D","(","u_colormap0",",","xP",")",";"]}]}},{type:"elif",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xJ","=","texture2D","(","u_colormap0",",","xO",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["br","(","xJ",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR1_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xK","=","texture2D","(","u_colormap1",",","xP",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xK","=","texture2D","(","u_colormap1",",","xO",")",";"]}]}}]},{type:"textline",tokens:["br","(","xK",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xL","=","texture2D","(","u_stencil0",",","xP",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xL","=","texture2D","(","u_stencil0",",","xO",")",";"]}]}}]},{type:"textline",tokens:["xJ","=","mix","(","xJ",",","xK",",","xL",".","r",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xI",".","rgb","=","mix","(","xI",".","rgb",",","xJ",".","rgb",",","u_diffuse_color_factor",")",";","yc","=","u_alpha_factor","*","xJ",".","a",";","yc","+=","(","1.0","-","step","(","0.0",",","yc",")",")",";","xI",".","a","=","mix","(","yc",",","1.0",",","u_diffuse_color",".","a",")",";","yd","=","xJ",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xI",".","rgb","*=","mix","(","vec3","(","1.0",")",",","xJ",".","rgb",",","u_diffuse_color_factor",")",";","xI",".","a","=","xJ",".","a",";","yd","=","xJ",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["xV","=","u_diffuse_intensity","*","xI",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["xW","=","xV",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xX","=","u_environment_energy","*","dS","(","xU",")",";","xX","=","u_ambient","*","xX",";","xJ","=","du","(","xV",")",";","xY","=","u_emit","*","xI",".","rgb",";","xZ","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["x_","=","vec3","(","yd",")",";"]}]}},{type:"elif",expression:["TEXTURE_SPEC_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["x_","=","texture2D","(","u_specmap0",",","xP",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["x_","=","texture2D","(","u_specmap0",",","xO",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["br","(","x_",".","rgb",")",";","xZ","=","mix","(","xZ",",","x_",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["yd","=","u_specular_params","[","0","]",";","xO","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","xZ","=","yd","*","xZ",";","xH","(","xY",",","xX",",","xV",",","xZ",",","bC",",","xU",",","xT",",","xO",",","u_diffuse_params",",","xJ",",","0.0",",","vec4","(","0.0",")",",","xW",",","x_",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["dP","(","xW",",","xT",",","xU",",","u_reflect_factor",",","xM",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dP","(","xW",",","xT",",","xU",",","u_reflect_factor",",","mat4","(","0.0",")",")",";"]}]}}]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["dP","(","xW",",","xT",",","xU",",","0.0",",","xM",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dP","(","xW",",","xT",",","xU",",","0.0",",","mat4","(","0.0",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["xW","+=","x_",";"]}]}}]},{type:"textline",tokens:["yd","=","xI",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["xW","=","max","(","xW","-","sqrt","(","0.01","*","-","min","(","yb",",","0.0",")",")",",","0.5","*","xW",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["bp","(","xW",",","yb",",","u_time",",","xJ",",","xU",",","u_sun_direction",",","xS",",","u_sun_quaternion",",","bC",",","ya",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","yd","<","0.5",")","discard",";","yd","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["yc","=","max","(","max","(","x_",".","r",",","x_",".","g",")",",","x_",".","b",")","*","u_specular_alpha",";","yd","=","xI",".","a","*","(","1.0","-","yc",")","+","yc",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yd","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["xW","=","mix","(","ef","(","bG",",","xU",".","xz","*","u_refr_bump",")",",","xW",",","yd",")",";","yd","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uJ","(","xW",",","ya",",","xT",",","yb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uJ","(","xW",",","ya",",","xT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["bu","(","xW",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","xW",",","yd",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","xW",",","yd",")",";","}"]}]},exports["particle_system.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","NODES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","float","u_time",";","uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_VECTOR_VIEW",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"NODES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bE",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"include",file:"environment.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"particles_nodes.glslf"},{type:"textline",tokens:["void","main","(",")","{","mat4","Kd",";","float","Ke",",","Kf",",","Kg",";","vec4","Kh",";","vec3","Ki",",","Kj",",","Kk",",","Kl",";","Ki","=","normalize","(","u_camera_eye_frag","-","bC",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Kd","=","O","(","u_view_tsr_frag",")",";","Kc","(","Ki",",","Kd",",","Kj",",","Kk",",","Kl",",","Kh",",","Ke",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Kc","(","Ki",",","mat4","(","0.0",")",",","Kj",",","Kk",",","Kl",",","Kh",",","Ke",")",";"]}]}}]},{type:"textline",tokens:["Kj","=","Kj",";","Ke","=","Ke",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","Ke","<","0.5",")","discard",";","Ke","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ke","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uJ","(","Kj",",","length","(","bD",")",",","Ki",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["Kf","=","-","bD",".","z","/","u_view_max_depth",";","Kh","=","texture2DProj","(","u_scene_depth",",","bG",")",";","Kg","=","Z","(","Kh",")",";","Kf","=","Kg","-","Kf",";","Kf","=","u_view_max_depth","/","SOFT_STRENGTH","*","Kf",";","Ke","=","Ke","*","min","(","Kf",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["bu","(","Kj",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","Kj",",","Ke",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Kj",",","Ke",")",";","}"]}]},exports["particle_system.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","vec3","a_p_data",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"textline",tokens:["attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","float","u_p_wind_fac",";","uniform","float","u_p_max_lifetime",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","vec3","u_wind",";","uniform","float","u_p_size",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE",{type:"logic_negative_expr",places:1},"NODES","HALO_PARTICLES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_COLOR_RAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_ramp_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","Kd",";"]}]}}]},{type:"textline",tokens:["varying","vec3","uL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:8}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"NODES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","tx",";"]}]}}]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"particles.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"particles_nodes.glslv"}]}}]},{type:"textline",tokens:["float","KR","(","vec2","KP",",","vec2","KQ",")","{","return","(","atan","(","KQ",".","y",",","KQ",".","x",")","-","atan","(","KP",".","y",",","KP",".","x",")",")",";","}","void","main","(",")","{","vec3","KS",",","KT",";","vec4","KU",",","KV",",","KW",";","float","KX",",","KY",",","KZ",";","mat4","K_",",","La",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["K_","=","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["K_","=","O","(","u_view_tsr",")",";"]}]}}]},{type:"textline",tokens:["Ke","Lb",";","Lb","=","KG","(",")",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","KX","=","Lb",".","e",";","La","=","qT","(","Lb",".","b",",","K_",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","KX","=","Lb",".","e",";","La","=","w","(",")",";","La","[","3","]","=","vec4","(","Lb",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","KX","=","Lb",".","e",";","La","=","A","(","radians","(","90.0",")",")",";","La","[","3","]","=","vec4","(","Lb",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","KX","=","KR","(","vec2","(","EPSILON",",","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","Lb",".","e",";","La","=","y","(","radians","(","-","90.0",")",")",";","La","[","3","]","=","vec4","(","Lb",".","b",",","1.0",")",";","}","KU","=","vec4","(","a_p_bb_vertex","*","2.0","*","Lb",".","a","*","u_p_size",",","0.0",",","1.0",")",";","KU","=","La","*","C","(","KX",")","*","KU",";","KV","=","K_","*","KU",";","KW","=","u_proj_matrix","*","KV",";"]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["tx","=","a_p_data","[","2","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KS","=","vec3","(","a_tangent",")",";","KT","=","a_tangent","[","3","]","*","cross","(","a_normal",",","KS",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KS","=","vec3","(","0.0",")",";","KT","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["c","Lc","=","rB","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","KS",",","KT",",","vec3","(","0.0",")",",","La","*","C","(","KX",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KX","=","(","dot","(","cross","(","a_normal",",","Lc",".","c",")",",","Lc",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","Lc",".","c",",","KX",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","a_normal",";"]}]}}]},{type:"textline",tokens:["KO","(","Lb",".","b",",","Lb",".","f",",","Lb",".","g",",","Lb",".","h",",","Lb",".","a",",","a_p_bb_vertex",",","a_p_data","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_p_bb_vertex","+","0.5",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_p_bb_vertex","*","2.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Kd","=","Lb",".","c",";"]}]}}]},{type:"textline",tokens:["uL","=","Lb",".","d",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["KX","=","KW",".","x",";","KY","=","KW",".","y",";","KZ","=","KW",".","w",";","bG",".","x","=","(","KX","+","KZ",")","/","2.0",";","bG",".","y","=","(","KY","+","KZ",")","/","2.0",";","bG",".","z","=","KZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"NODES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","KV",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","KW",";","bC","=","KU",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uK","=","u_camera_eye","-","KU",".","xyz",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["particle_system_stack.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","NODES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_size",";","uniform","vec3","u_halo_rings_color",";","uniform","float","u_halo_hardness",";","uniform","vec3","u_halo_lines_color",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:8}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","Kd",";"]}]}}]},{type:"textline",tokens:["varying","vec3","uL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"NODES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","tx",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","tw",";"]}]}}]}]}}]},{type:"include",file:"lighting_nodes.glslf"},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"environment.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"include",file:"halo_color.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","KP",";","float","KQ",",","KR",",","KS",";","vec4","KT",",","KU",";","vec3","KV",",","KW",",","KX",",","KY",",","KZ",",","K_",",","La",",","Lb",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KV","=","normalize","(","uK",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["KT","=","uc","(",")",";","KW","=","KT",".","rgb","*","uL",";","KQ","=","0.9","*","length","(","bM",")",";","KQ","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","KQ",")",";","KQ","=","KT",".","a","*","(","1.0","-","KQ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KT","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["KU","=","texture2D","(","u_sampler",",","bM",")",";","br","(","KU",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KT",".","rgb","=","mix","(","KT",".","rgb",",","KU",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KT",".","rgb","*=","mix","(","vec3","(","1.0",")",",","KU",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["KT",".","a","=","KU",".","a",";"]}]}}]},{type:"textline",tokens:["KT",".","rgb","*=","uL",";","KX","=","u_diffuse_intensity","*","KT",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["KY","=","u_emit","*","KT",".","rgb",";","KZ","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logic_negative_expr",places:1},"SKY_COLOR",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["K_","=","u_environment_energy","*","dS","(","vec3","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["K_","=","u_environment_energy","*","dS","(","KZ",")",";"]}]}}]},{type:"textline",tokens:["K_","=","u_ambient","*","K_",";","KR","=","u_specular_params","[","0","]",";","KP","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","La","=","KR","*","u_specular_color",";","xH","(","KY",",","K_",",","KX",",","La",",","bC",",","KZ",",","KV",",","KP",",","u_diffuse_params",",","vec4","(","1.0",")",",","0.0",",","vec4","(","0.0",")",",","KW",",","Lb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KW","=","KX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uJ","(","KW",",","length","(","bD",")",",","KV",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["KQ","=","KT",".","a","*","Kd",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uJ","(","KW",",","length","(","bD",")",",","KV",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["KR","=","-","bD",".","z","/","u_view_max_depth",";","KT","=","texture2DProj","(","u_scene_depth",",","bG",")",";","KS","=","Z","(","KT",")",";","KR","=","KS","-","KR",";","KR","=","u_view_max_depth","/","SOFT_STRENGTH","*","KR",";","KQ","=","KQ","*","min","(","KR",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["bu","(","KW",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","KW",",","KQ",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","KW",",","KQ",")",";","}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","KP",";","const","float","KQ","=","0.99",";","const","float","KR","=","1.8",";","const","int","KS","=","8",";","float","KY","(","vec3","KT",",","vec3","KU",")","{","float","KV",",","KW",",","KX",";","KV","=","dot","(","KU",",","KU",")",";","KW","=","2.0","*","dot","(","KU",",","KT",")",";","KX","=","dot","(","KT",",","KT",")","-","1.0",";","KV","=","KW","*","KW","-","4.0","*","KV","*","KX",";","KV","=","sqrt","(","KV",")",";","KV","=","(","-","KW","-","KV",")","/","2.0",";","KV","=","KX","/","KV",";","return","KV",";","}","float","Le","(","float","KZ",",","float","K_",")","{","float","La",",","Lb",",","Lc",",","Ld",";","La","=","3.0","*","(","1.0","-","K_","*","K_",")",";","Lb","=","2.0","*","(","2.0","+","K_","*","K_",")",";","Lc","=","1.0","+","KZ","*","KZ",";","Ld","=","pow","(","1.0","+","K_","*","K_","-","2.0","*","K_","*","KZ",",","1.5",")",";","Ld","=","max","(","Ld",",","0.00001",")",";","return","(","La","/","Lb",")","*","(","Lc","/","Ld",")",";","}","float","Lk","(","vec3","Lf",",","vec3","Lg",",","float","Lh",")","{","vec3","Li",";","float","Lj",";","Lj","=","dot","(","Lg",",","-","Lf",")",";","if","(","Lj","<","0.0",")","{","return","1.0",";","}","Li","=","Lf","+","Lj","*","Lg",";","if","(","length","(","Li",")","<","Lh",")","{","return","0.0",";","}","else","if","(","length","(","Li",")",">=","Lh",")","{","Li","=","normalize","(","Li",")","*","Lh","-","Lf",";","Lj","=","acos","(","dot","(","normalize","(","Li",")",",","Lg",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","Lj","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","Lo","(","float","Ll",",","vec3","Lm",",","float","Ln",")","{","return","Lm","-","Lm","*","pow","(","u_sky_color",",","vec3","(","Ln","/","Ll",")",")",";","}","void","main","(",")","{","float","Lp",",","Lq",",","Lr",",","Ls",",","Lt",",","Lu",",","Lv",",","Lw",",","Lx",";","vec3","Ly",",","Lz",",","LA",",","LB",",","LC",",","LD",",","LE",";","Ly","=","normalize","(","KP",")",";","Lz","=","u_sun_direction",";","Lp","=","dot","(","Ly",",","Lz",")",";","Lq","=","Le","(","Lp",",","-","0.01",")","*","u_rayleigh_brightness","*","Lz",".","y",";","Lr","=","Le","(","Lp","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","Lz",".","y",")",";","Lp","=","smoothstep","(","0.0",",","100.0",",","Le","(","Lp",",","0.9995",")",")","*","u_spot_brightness",";","LA","=","vec3","(","0.0",",","KQ",",","0.0",")",";","Ls","=","KY","(","LA",",","Ly",")",";","Lt","=","Ls","/","float","(","KS",")",";","Lu","=","Lk","(","LA",",","Ly",",","KQ","-","0.3",")",";","LB","=","vec3","(","0.0",",","0.0",",","0.0",")",";","LC","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","LF","=","0",";","LF","<","KS",";","LF","++",")","{","Lv","=","Lt","*","float","(","LF",")",";","LD","=","LA","+","Ly","*","Lv",";","Lw","=","Lk","(","LD",",","Lz",",","KQ","-","0.2",")",";","Lx","=","KY","(","LD",",","Lz",")",";","LE","=","Lo","(","Lx",",","vec3","(","KR",")",",","u_scatter_strength",")","*","Lw",";","LB","+=","Lo","(","sqrt","(","Lv",")",",","u_sky_color","*","LE",",","u_rayleigh_strength",")",";","LC","+=","Lo","(","Lv",",","LE",",","u_mie_strength",")",";","}","LB","=","LB","*","Lu","*","pow","(","Ls",",","u_rayleigh_collection_power",")","/","float","(","KS",")",";","LC","=","(","LC","*","Lu","*","pow","(","Ls",",","u_mie_collection_power",")",")","/","float","(","KS",")",";","LB","=","vec3","(","Lp","*","LC","+","Lr","*","LC","+","Lq","*","LB",")",";","bu","(","LB",")",";","gl_FragColor","=","vec4","(","LB",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","KP",";","void","main","(",")","{","vec4","KQ",",","KR",";","KQ","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","KR","=","u_cube_view_matrix","*","KQ",";","KP","=","KR",".","xyz",";","gl_Position","=","KQ",";","}"]}]},exports["shadow.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","mat4","KQ",";","float","KR",",","KS",";","vec4","KT",";","vec3","KU",",","KV",",","KW",",","KX",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["KU","=","u_camera_eye_frag","-","bC",";","KU","=","normalize","(","KU",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KQ","=","O","(","u_view_tsr_frag",")",";","qM","(","KU",",","KQ",",","KV",",","KW",",","KX",",","KT",",","KR",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qM","(","KU",",","mat4","(","0.0",")",",","KV",",","KW",",","KX",",","KT",",","KR",")",";"]}]}}]},{type:"textline",tokens:["KR","=","KR",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["KR","=","(","texture2D","(","u_colormap0",",","bM",")",")",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KS","=","u_alpha_factor","*","KR",";","KS","+=","(","1.0","-","step","(","0.0",",","KS",")",")",";","KR","=","mix","(","KS",",","1.0",",","u_diffuse_color",".","a",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KR","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","KR","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","NO_SHADOWS",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","dr","(","bD",".","z",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor",".","a","*=","clamp","(","bF",".","r",",","0.999999999",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["shadow.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"NUM_CAST_LAMPS",tokens:["0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_shadow_cast_billboard_view_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";"]},{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_v_light_tsr","[","NUM_CAST_LAMPS","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_v_light_ts","[","NUM_CAST_LAMPS","]",";","uniform","vec4","u_v_light_r","[","NUM_CAST_LAMPS","]",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","KQ",";","vec4","KR",",","KS",";","float","KT",";","vec3","KU",",","KV",",","KW",",","KX",",","KY",",","KZ",";","mat4","K_",",","La",",","Lb",",","Lc",";","K_","=","O","(","u_view_tsr",")",";","KU","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["KV","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KV","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["KW","=","vec3","(","a_tangent",")",";","KX","=","a_tangent","[","3","]","*","cross","(","KV",",","KW",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KW","=","vec3","(","0.0",")",";","KX","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["KU","=","mix","(","KU",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["KV","=","mix","(","KV",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["KY","=","vec3","(","a_tangent",")",";","KZ","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","KY",")",";","KW","=","mix","(","KW",",","KY",",","u_va_frame_factor",")",";","KX","=","mix","(","KX",",","KZ",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sB","(","KU",",","KW",",","KX",",","KV",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["KX","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KX","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","Ld","=","vq","(","KU",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","KV",",","KX",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","K_",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["La","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["KW","=","(","La","*","vec4","(","KX",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD",{type:"logic_negative_expr",places:1},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lb","=","O","(","u_shadow_cast_billboard_view_tsr",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lb","=","K_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lc","=","ru","(","u_camera_eye",",","KW",",","Lb",",","La",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lc","=","ro","(","u_camera_eye",",","KW",",","Lb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lc","=","Lc","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","KW",")",";"]}]}}]},{type:"textline",tokens:["c","Ld","=","rB","(","KU","-","KX",",","KX",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","KV",",","Lc",")",";","Ld",".","b","=","KW",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","Ld","=","rB","(","KU",",","KX",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","KV",",","La",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KV","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KV","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tp","(","Ld",".","a",",","Ld",".","b",",","KV",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bC","=","Ld",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","Ld",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["KT","=","(","dot","(","cross","(","Ld",".","e",",","Ld",".","c",")",",","Ld",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","Ld",".","c",",","KT",")",";"]}]}}]}]}}]},{type:"textline",tokens:["KR","=","K_","*","vec4","(","Ld",".","a",",","1.0",")",";","KS","=","u_proj_matrix","*","KR",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["KS",".","xy","+=","u_subpixel_jitter","*","KS",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bG","=","L","(","KS",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","bD",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["tu","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rE","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vC","(","Ld",".","a",",","Ld",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","KR",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KQ","=","(","u_proj_matrix","*","K_","[","3","]",")",".","xy",";","KT","=","SHADOW_TEX_RES","/","2.0",";","KQ","=","floor","(","KQ","*","KT","+","0.5",")","/","KT","-","KQ",";","KS",".","xy","+=","KQ",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","KS",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","bM",";","void","main","(",")","{","vec4","KQ",";","KQ","=","texture2D","(","u_sampler",",","bM",")",";","bu","(","KQ",".","rgb",")",";","bx","(","KQ",".","rgb",",","KQ",".","a",")",";","gl_FragColor","=","KQ",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","bM",";","void","main","(",")","{","vec2","KQ",";","float","KR",";","vec4","KS",";","vec3","KT",";","mat4","KU",";","KU","=","O","(","u_view_tsr",")",";","bM","=","a_texcoord",";","KT","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","KS","=","u_proj_matrix","*","KU","*","vec4","(","KT",",","0.0",")",";","KS",".","x","/=","KS",".","w",";","KS",".","y","/=","KS",".","w",";","KS","+=","99999.0","*","step","(","KS",".","z",",","0.0",")",";","KS","+=","100.0","*","(","step","(","1.0",",","abs","(","KS",".","x",")",")","+","step","(","1.0",",","abs","(","KS",".","y",")",")",")",";","KS",".","x","=","-","a_lf_dist","*","KS",".","x",";","KS",".","y","=","-","a_lf_dist","*","KS",".","y",";","KR","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","KQ","=","vec2","(","a_lf_bb_vertex",".","x","/","KR",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","KV","=","1.9",";","KQ","*=","(","1.0","+","KV","*","length","(","KS",".","xy",")",")",";","}","gl_Position","=","vec4","(","KS",".","xy","+","KQ",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"define",name:"INV_PI",tokens:["0.318309886"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX","PROCEDURAL_SKYDOME",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"blending.glslf"},{type:"textline",tokens:["uniform","vec4","u_sky_tex_fac",";","uniform","vec3","u_sky_tex_color",";","uniform","float","u_sky_tex_dvar",";","vec3","MU","(","vec3","MP",",","vec3","MQ",",","float","MR",",","float","MS",")","{","float","MT",";","MT","=","MR","*","MS",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Ld","(","MQ",",","MP",",","MT",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lh","(","MP",",","MQ",",","MT",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Ll","(","MP",",","MQ",",","MT",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lq","(","MP",",","MQ",",","MT",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lv","(","MP",",","MQ",",","MT",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LA","(","MP",",","MQ",",","MT",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LE","(","MP",",","MQ",",","MT",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LI","(","MP",",","MQ",",","MT",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LM","(","MP",",","MQ",",","MT",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LQ","(","MP",",","MQ",",","MT",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","HUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LW","(","MQ",",","MP",",","MT",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SATURATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Mb","(","MQ",",","MP",",","MT",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","VALUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Mh","(","MQ",",","MP",",","MT",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","COLOR",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Mn","(","MQ",",","MP",",","MT",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Ms","(","MQ",",","MP",",","MT",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Mw","(","MQ",",","MP",",","MT",")",";"]}]}}]},{type:"textline",tokens:["return","vec3","(","1.0",",","0.0",",","1.0",")",";","}","float","Nb","(","float","MV",",","float","MW",",","float","MX",",","float","MY",")","{","float","MZ",";","vec3","M_",",","Na",";","M_","=","vec3","(","MV",")",",","Na","=","vec3","(","MW",")",";","MZ","=","MX","*","MY",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Ld","(","Na",",","M_",",","MZ",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lh","(","M_",",","Na",",","MZ",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Ll","(","M_",",","Na",",","MZ",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MC","(","MV",",","MW",",","MZ",",","MY",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MI","(","MV",",","MW",",","MZ",",","MY",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MO","(","MV",",","MW",",","MZ",",","MY",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LE","(","M_",",","Na",",","MZ",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LI","(","M_",",","Na",",","MZ",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LM","(","M_",",","Na",",","MZ",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LQ","(","M_",",","Na",",","MZ",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Ms","(","Na",",","M_",",","MZ",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Mw","(","Na",",","M_",",","MZ",")",".","x",";"]}]}}]},{type:"textline",tokens:["return","0.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","KP",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Nc",";","float","Nd",",","Ne",",","Nf",";","vec3","Ng",",","Nh",",","Ni",",","Nj",",","Nk",";","Nh","=","normalize","(","KP",")",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME"],group:{type:"group",parts:[{type:"textline",tokens:["Ng","=","textureCube","(","u_sky",",","Nh",")",".","rgb",";"]}]}},{type:"elif",expression:["WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Ng","=","u_horizon_color",";","bu","(","Ng",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"textline",tokens:["Ni","=","vec3","(","bM",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ni","=","vec3","(","KP",".","xy",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["Nd","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["Nd","=","abs","(","bM",".","y",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nd","=","(","bM",".","y","+","1.0",")","*","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ne","=","acos","(","Nh",".","y",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["Nd","=","abs","(","Ne","*","INV_PI","-","0.5",")","*","2.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nd","=","1.0","-","Ne","*","INV_PI",";"]}]}}]}]}}]}]}}]},{type:"textline",tokens:["Nj","=","u_horizon_color",";","Nk","=","u_zenith_color",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX"],group:{type:"group",parts:[{type:"textline",tokens:["Ne","=","1.0",";","Nc","=","textureCube","(","u_sky",",","Nh",")",";","br","(","Nc",".","rgb",")",";","Ne","=","Nc",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["Ne","=","bB","(","Nc",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MTEX_NEGATIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Nc","=","vec4","(","vec3","(","1.0",")","-","Nc",".","rgb",",","Nc",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ne","=","1.0","-","Ne",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ","WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["Nc","=","vec4","(","u_sky_tex_color",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ne","=","Nc",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ"],group:{type:"group",parts:[{type:"textline",tokens:["Nj","=","MU","(","Nc",".","rgb",",","Nj",",","Ne",",","u_sky_tex_fac","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nf","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","Ni",",","vec3","(","0.0",",","1.0",",","0.0",")",")",">=","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["Nf","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["else","Nf","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["Nf","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"elif",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["Nf","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","Nf","!=","0.0",")","Nk","=","MU","(","Nc",".","rgb",",","Nk",",","Ne",",","Nf",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_BLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Ne","=","dot","(","Nc",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";"]}]}}]},{type:"textline",tokens:["Nd","=","Nb","(","u_sky_tex_dvar",",","Nd",",","Ne",",","u_sky_tex_fac","[","0","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["Ng","=","mix","(","Nj",",","Nk",",","Nd",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ng","=","Nj",";"]}]}}]},{type:"textline",tokens:["bu","(","Ng",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bu","(","Nj",")",";","bu","(","Nk",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["Ng","=","mix","(","Nj",",","Nk",",","Nd",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ng","=","Nj",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["br","(","Ng",")",";","Nd","=","WATER_LEVEL","-","u_camera_eye_frag",".","y",";","Nj","=","vec3","(","0.0",")",";","Nj","=","mix","(","u_underwater_fog_color_density",".","rgb",",","Nj",",","min","(","-","Nh",".","y",",","1.0",")",")",";","Nj","*=","min","(","1.0","-","min","(","0.03","*","Nd",",","0.8",")",",","1.0",")",";","Nd","=","clamp","(","sign","(","0.01","*","Nd","-","Nh",".","y",")",",","0.0",",","1.0",")",";","Ng","=","mix","(","Ng",",","Nj",",","Nd",")",";","bu","(","Ng",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ng",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","KP",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","MP",",","MQ",";","MP","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","MQ","=","u_sky_vp_inverse","*","MP",";","KP","=","MQ",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_position",".","xy",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","MP",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0005"]},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHORE_SMOOTHING","WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_norm_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","MP","=","1.0",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","uK",";","varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bF",";","varying","vec3","MQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","MR",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","MS",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","MT",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","SHORE_SMOOTHING","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["vec3","Ne","(","in","vec2","MU",",","in","vec3","MV",",","in","vec3","MW",",","in","vec3","MX",",","out","float","MY",")","{","float","MZ",",","M_",",","Na",";","vec2","Nb",";","vec3","Nc",",","Nd",";","MY","=","0.0",";","Nc","=","reflect","(","-","MW",",","MV",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nb","=","MU",".","xy","+","MV",".","xz","*","REFL_BUMP","/","bH",";","MY","=","u_reflect_factor",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nd","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nd","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["}","else","{","Nd","=","texture2D","(","u_plane_reflection",",","Nb",")",".","rgb",";","br","(","Nd",")",";","}"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["MY","=","u_mirror_factor",";","Nd","=","MX","*","textureCube","(","u_mirrormap",",","Nc",")",".","rgb",";","br","(","Nd",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["MY","=","u_reflect_factor",";","Nd","=","MX","*","vec3","(","0.3",",","0.5",",","1.0",")",";","br","(","Nd",")",";"]}]}}]},{type:"textline",tokens:["Nc","=","normalize","(","Nc","+","MW",")",";","MZ","=","1.0","-","dot","(","MW",",","Nc",")",";","M_","=","u_fresnel_params","[","3","]",";","Na","=","u_fresnel_params","[","2","]",";","Na","=","M_","+","(","1.0","-","M_",")","*","pow","(","MZ",",","Na",")",";","MY","=","min","(","MY","*","Na",",","1.0",")",";","return","Nd",";","}"]},{type:"include",file:"lighting_nodes.glslf"},{type:"textline",tokens:["void","main","(",")","{","vec4","Nf",";","vec2","Ng",",","Nh",",","Ni",";","float","Nj",",","Nk",",","Nl",",","Nm",",","Nn",";","vec3","No",",","Np",",","Nq",",","Nr",",","Ns",",","Nt",",","Nu",",","Nv",",","Nw",";","mat3","Nx",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nx","=","mat3","(","bF",",","MQ",",","bE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["No","=","normalize","(","bE",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["No","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","FOAM",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nj","=","bC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Ng","=","vec2","(","MR",".","x",",","-","MR",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ng","=","vec2","(","bC",".","x",",","-","bC",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ng","=","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Np","=","vec3","(","0.0",")",";","Nq","=","texture2D","(","u_normalmap0",",","Ng","*","u_normalmap0_scale","+","vec2","(","0.3",",","0.5",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Np","+=","Nq",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["Nr","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["Nr","+=","Nq",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nq","=","texture2D","(","u_normalmap0",",","Ng","*","u_normalmap1_scale","+","vec2","(","-","0.3",",","0.7",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Np","+=","Nq",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["Nr","+=","Nq",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nq","=","texture2D","(","u_normalmap0",",","Ng","*","u_normalmap2_scale","+","vec2","(","0.0",",","1.1",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Np","+=","Nq",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["Nr","+=","Nq",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nq","=","texture2D","(","u_normalmap0",",","Ng","*","u_normalmap3_scale","+","vec2","(","-","0.66",",","-","0.3",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","Np","+=","Nq",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["Nr","+=","Nq",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["Nr","=","Nx","*","Nr",";","if","(","!","f","(","Nr",",","vec3","(","0.0",")",")",")","Nr","=","normalize","(","Nr",")",";","Nr","=","mix","(","No",",","Nr",",","0.2",")",";","Nr","=","normalize","(","Nr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["No","=","mix","(","No",",","normalize","(","Nx","*","Np",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["No","=","mix","(","No",",","normalize","(","Nx","*","Np",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["No","=","normalize","(","No",")",";"]}]}}]},{type:"textline",tokens:["Np","=","normalize","(","uK",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nh","=","bG",".","xy","/","bG",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Ni","=","Nh","+","No",".","xz","*","u_refr_bump","/","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["Nk","=","u_diffuse_color",".","a",";","Nf","=","texture2DProj","(","u_scene_depth",",","bG",")",";","Nl","=","Z","(","Nf",")",";","Nm","=","max","(","Nl","-","bH",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Nl","=","dY","(","Nl",",","Ni",",","Nh",")",";","Nl","=","max","(","Nl","-","bH",",","0.0",")",";","Nl","=","u_view_max_depth","/","ABSORB","*","Nl",";","Nl","=","min","(","Nk","*","Nl",",","1.0",")",";","Nk","=","min","(","15.0","*","Nk","*","u_view_max_depth","*","Nm",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nn","=","u_view_max_depth","/","ABSORB","*","Nm",";","if","(","u_cam_water_depth",">","0.0",")","Nk","=","min","(","Nk","*","Nn",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nk","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Nl","=","Nk",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","Nl","=","0.0",";","Nq","=","texture2D","(","u_refractmap",",","Ni",")",".","rgb",";","br","(","Nq",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Nn","=","pow","(","min","(","MS",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","Ns","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","Nn",")",";","Nn","=","pow","(","min","(","MS",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","Ns","=","mix","(","u_shore_water_col",",","Ns",",","Nn",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ns","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["Nm","=","max","(","1.0","-","u_view_max_depth","*","Nm",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nm","=","1.0","-","Nk",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Nj","=","max","(","Nj","/","WAVES_HEIGHT","+","0.1",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Nt","=","normalize","(","vec3","(","MS",".","r",",","0.0",",","MS",".","g",")",")",";","Nt","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","Nt",",","0.8",")",")",";","Nn","=","1.25","*","max","(","dot","(","Nr",",","Nt",")","-","0.2",",","0.0",")",";","Nn","+=","max","(","dot","(","Nr",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",",","0.0",")",";","Nm","+=","Nn","*","(","1.0","-","MS",".","b",")",";","Nj","*=","(","1.0","-","0.95","*","pow","(","MS",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["Nm","+=","Nj",";","Nm","=","min","(","u_foam_factor","*","Nm",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["Nf","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","Ng","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["Nj","=","u_specular_params","[","0","]",";","Ng","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","Nr","=","Nj","*","u_specular_color",";","Nt","=","u_environment_energy","*","dS","(","No",")",";","Nt","=","u_ambient","*","Nt",";","Nt","=","Nt","+","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nu","=","Ne","(","Nh",",","No",",","Np",",","Nt",",","Nj",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nu","=","Ne","(","vec2","(","0.0",")",",","No",",","Np",",","Nt",",","Nj",")",";"]}]}}]},{type:"textline",tokens:["Ns","=","u_diffuse_intensity","*","Ns",";","xH","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Ns",",","Nr",",","bC",",","No",",","Np",",","Ng",",","u_diffuse_params",",","vec4","(","1.0",")",",","0.0",",","vec4","(","0.0",")",",","Nv",",","Nw",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Nn","=","max","(","dot","(","u_sun_direction",",","-","bE",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","Np",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","Nn","=","clamp","(","SSS_STRENGTH","*","Nn",",","0.0",",","1.0",")",";","Nv","=","mix","(","Nv",",","u_shallow_water_col",",","Nn",")",";","Nv","=","mix","(","Nv",",","u_shore_water_col",",","Nn",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Nv","=","mix","(","Nq",",","Nv",",","Nl",")",";"]}]}}]},{type:"textline",tokens:["Nv","=","mix","(","Nv",",","Nu",",","Nj",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["Nj","=","mix","(","Nf",".","g",",","Nf",".","r",",","max","(","4.0","*","(","Nm","-","0.75",")",",","0.0",")",")",";","Nj","=","mix","(","Nf",".","b",",","Nj",",","max","(","2.0","*","Nm","-","1.0",",","0.0",")",")",";","Nj","=","mix","(","0.0",",","Nj",",","Nm",")",";","Nv","=","mix","(","Nv",",","Nt",",","Nj",")",";"]}]}}]},{type:"textline",tokens:["Nv","+=","Nw",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Nm","=","bH","*","u_view_max_depth",";","Nl","=","1.0",";","if","(","u_cam_water_depth",">","1.0",")","Nl","=","2.0",";","uJ","(","Nv",",","Nm",",","Np",",","Nl",")",";"]}]}}]},{type:"textline",tokens:["bu","(","Nv",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Nk","=","max","(","Nk",",","Nw",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["Nk","+=","Nj",";"]}]}}]}]}},{type:"elif",expression:["SHORE_SMOOTHING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Nk","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","Nv",",","Nk",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["Nw","=","fwidth","(","MT",")",";","Nw","=","smoothstep","(","vec3","(","0.0",")",",","Nw","*","MP",",","MT",")",";","Nj","=","min","(","min","(","Nw",".","x",",","Nw",".","y",")",",","Nw",".","z",")",";","Nj","=","clamp","(","Nj",",","0.0",",","1.0",")",";","Nv","=","mix","(","u_wireframe_edge_color",",","Nv",",","Nj",")",";","Nk","=","mix","(","1.0",",","Nk",",","Nj",")",";"]}]}},{type:"elif",expression:["DEBUG_WIREFRAME",2,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nw","=","sign","(","MT","-","vec3","(","0.02","*","MP",")",")",";","Nj","=","1.0",";","if","(","Nw",".","x","<","0.0","||","Nw",".","y","<","0.0","||","Nw",".","z","<","0.0",")","Nj","=","0.0",";","Nv","=","mix","(","u_wireframe_edge_color",",","Nv",",","Nj",")",";","Nk","=","mix","(","1.0",",","Nk",",","Nj",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Nv",",","Nk",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Y",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Y",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"DYNAMIC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";","attribute","vec3","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH",{type:"logic_negative_expr",places:1},"NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_polyindex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","uK",";","varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bF",";","varying","vec3","MQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","MR",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","MS",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","MT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","MY","(","in","vec2","MP",")","{","float","MU",";","vec4","MV",";","vec2","MW",";","MW","=","0.5","+","vec2","(","(","MP",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","MP",".","y","+","SHORE_MAP_CENTER_Y",")","/","SHORE_MAP_SIZE_Y",")",";","MV","=","texture2D","(","u_shore_dist_map",",","MW",")",";","const","vec2","MX","=","vec2","(","1.0","/","255.0",",","1.0",")",";","MU","=","dot","(","MV",".","ba",",","MX",")",";","MW","=","normalize","(","MV",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","MW",",","MU",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"SMALL_WAVES_FAC",tokens:["0.3"]},{type:"textline",tokens:["void","Nj","(","inout","vec3","MZ",",","in","float","M_",",","in","vec3","Na",")","{","vec2","Nb",",","Nc",",","Nd",";","float","Ne",",","Nf",",","Ng",",","Nh",",","Ni",";","Ne","=","aU","(","DST_NOISE_SCALE_0","*","(","MZ",".","xz","+","DST_NOISE_FREQ_0","*","M_",")",")","*","aU","(","DST_NOISE_SCALE_1","*","(","MZ",".","zx","-","DST_NOISE_FREQ_1","*","M_",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Nf","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","Ng","=","Na",".","b",";","Nh","=","sqrt","(","Ng",")",";","Nf","=","max","(","Ng",",","DIR_MIN_SHR_FAC",")","*","sin","(","Nh","/","Nf","+","DIR_FREQ","*","M_",")",";","Ni","=","max","(","aU","(","DIR_NOISE_SCALE","*","(","MZ",".","xz","+","DIR_NOISE_FREQ","*","M_",")",")",",","DIR_MIN_NOISE_FAC",")",";","Nf","*=","Ni",";","Nh","=","WAVES_HEIGHT","*","mix","(","Nf",",","Ne",",","max","(","Nh",",","DST_MIN_FAC",")",")",";","Nb","=","Na",".","rg",";","Nf","=","WAVES_HOR_FAC","*","Nf","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","Ng",")",",","0.0",")",";","Nb","=","Nf","*","Nb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nh","=","WAVES_HEIGHT","*","Ne",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["Nc","=","2.0","*","(","MZ",".","xz","-","0.1","*","M_",")",";","Nd","=","1.3","*","(","MZ",".","zx","+","0.03","*","M_",")",";","Ne","=","ay","(","0.5","*","(","Nc","+","Nd",")",")",".","x","-","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["MZ",".","xz","+=","Nb",";","Ne","*=","Ng",";"]}]}}]},{type:"textline",tokens:["Nh","+=","SMALL_WAVES_FAC","*","Ne",";"]}]}}]},{type:"textline",tokens:["MZ",".","y","+=","Nh",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Nk",",","Nl",";","vec2","Nm",";","float","Nn",",","No",",","Np",";","vec3","Nq",",","Nr",",","Ns",",","Nt",",","Nu",";","mat4","Nv",",","Nw",";","Nv","=","O","(","u_view_tsr",")",";","Nw","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_polyindex","==","0.0",")","MT","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","MT","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","MT","=","vec3","(","0.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["Nq","=","a_position",";","Nn","=","abs","(","Nq",".","y",")",";","Nm","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","Nn",")",";","Nq",".","y","=","WATER_LEVEL",";","Nq",".","xz","+=","Nm",";","Nq","=","Nq",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["c","Nx","=","rB","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Nw",")",";","Nq","=","Nx",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["MS","=","MY","(","Nq",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["No","=","length","(","u_wind",")",";","Np","=","u_time",";","Np","*=","No",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["Nn","=","Nn",";","Nr","=","Nq","+","vec3","(","Nn",",","0.0",",","0.0",")",";","Ns","=","Nq","+","vec3","(","0.0",",","0.0",",","Nn",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["MR","=","Nq",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nr","=","Nq","+","vec3","(","0.05",",","0.0",",","0.0",")",";","Ns","=","Nq","+","vec3","(","0.0",",","0.0",",","0.05",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Nt","=","MY","(","Nr",".","xz",")",";","Nu","=","MY","(","Ns",".","xz",")",";","Nj","(","Nr",",","Np",",","Nt",")",";","Nj","(","Ns",",","Np",",","Nu",")",";","Nj","(","Nq",",","Np",",","MS",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nj","(","Nr",",","Np",",","vec3","(","0.0",")",")",";","Nj","(","Ns",",","Np",",","vec3","(","0.0",")",")",";","Nj","(","Nq",",","Np",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_position",".","y","<","0.0",")","{","Nq",".","y","=","WATER_LEVEL","-","1.0",";","Nr",".","y","=","Nq",".","y",";","Ns",".","y","=","Nq",".","y",";","}"]}]}}]},{type:"textline",tokens:["Nr","=","normalize","(","Nr","-","Nq",")",";","Ns","=","normalize","(","Ns","-","Nq",")",";","bE","=","normalize","(","cross","(","Ns",",","Nr",")",")",";","Np","=","dot","(","bE",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","Np","=","clamp","(","0.8","-","Np",",","0.0",",","1.0",")",";","bE","=","mix","(","bE",",","vec3","(","0.0",",","1.0",",","0.0",")",",","Np",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Ns","=","a_tangent",";","bE","=","a_normal",";"]}]}}]},{type:"textline",tokens:["bF","=","Ns",";","MQ","=","cross","(","bE",",","bF",")",";"]}]}}]},{type:"textline",tokens:["bC","=","Nq",";","uK","=","u_camera_eye","-","Nq",";","Nk","=","Nv","*","vec4","(","Nq",",","1.0",")",";","Nl","=","u_proj_matrix","*","Nk",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["Np","=","Nl",".","x",";","Nn","=","Nl",".","y",";","No","=","Nl",".","w",";","bG",".","x","=","(","Np","+","No",")","/","2.0",";","bG",".","y","=","(","Nn","+","No",")","/","2.0",";","bG",".","z","=","No",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","Nk",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","Nl",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_NONE",tokens:["0"]},{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["2"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["3"]},{type:"define",name:"WM_DEBUG_SPHERES",tokens:["4"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","MT",";","const","float","MP","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","MU","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","MU","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","MV","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","MW","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","MX","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","MY",",","MZ",";","vec3","M_",",","Na",";","M_","=","vec3","(","0.0",")",";","MY","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Na","=","sign","(","MT","-","vec3","(","0.02","*","MP",")",")",";","if","(","Na",".","x","<","0.0","||","Na",".","y","<","0.0","||","Na",".","z","<","0.0",")","{","M_","=","MU",";","MY","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY",0,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Na","=","sign","(","MT","-","vec3","(","0.02","*","MP",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","Na",".","x","<","0.0","||","Na",".","y","<","0.0","||","Na",".","z","<","0.0",")","M_","=","u_wireframe_edge_color",";","else","M_","=","MX",";","MY","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","Na",".","x","<","0.0","||","Na",".","y","<","0.0","||","Na",".","z","<","0.0",")","MY","=","1.0",";","else","MY","=","0.0",";","M_","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","Na",".","x","<","0.0","||","Na",".","y","<","0.0","||","Na",".","z","<","0.0",")","M_","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","M_","=","MV",";","else","M_","=","MW",";","MY","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["Na","=","fwidth","(","MT",")",";","Na","=","smoothstep","(","vec3","(","0.0",")",",","Na","*","MP",",","MT",")",";","MZ","=","min","(","min","(","Na",".","x",",","Na",".","y",")",",","Na",".","z",")",";","MZ","=","clamp","(","MZ",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","M_","=","vec3","(","mix","(","u_wireframe_edge_color",",","MX",",","MZ",")",")",";","MY","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","M_","=","u_wireframe_edge_color",";","MY","=","mix","(","1.0",",","0.0",",","MZ",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","M_","=","mix","(","u_wireframe_edge_color",",","MV",",","MZ",")",";","else","M_","=","mix","(","u_wireframe_edge_color",",","MW",",","MZ",")",";","MY","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["bu","(","M_",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","M_",",","MY",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","M_",",","MY",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","MT",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","MP",",","MU",",","MV",",","MW",",","MX",";","mat4","MY",",","MZ",",","M_",";","MY","=","O","(","u_view_tsr",")",";","MZ","=","O","(","u_model_tsr",")",";","if","(","a_polyindex","==","0.0",")","MT","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","MT","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","MT","=","vec3","(","0.0",",","0.0",",","1.0",")",";","MP","=","a_position",";","MU","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["c","Na","=","rB","(","MP",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","MZ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["MP","=","mix","(","MP",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["MV","=","vec3","(","0.0",")",";","MW","=","vec3","(","0.0",")",";","sB","(","MP",",","MV",",","MW",",","MU",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["MW","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["MW","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","Na","=","vq","(","MP",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","MW",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","MY",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["MV","=","(","MZ","*","vec4","(","MW",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["M_","=","ru","(","u_camera_eye",",","MV",",","MY",",","MZ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["M_","=","ro","(","u_camera_eye",",","MV",",","MY",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["MX","=","(","MZ","*","vec4","(","MW",",","1.0",")",")",".","xyz",";","M_","=","M_","*","rg","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","MX",")",";"]}]}}]},{type:"textline",tokens:["c","Na","=","rB","(","MP","-","MW",",","MW",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","M_",")",";","Na",".","b","=","MV",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","Na","=","rB","(","MP",",","MW",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","MZ",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tp","(","Na",".","a",",","Na",".","b",",","MU",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","MY","*","vec4","(","Na",".","a",",","1.0",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["2"]},{type:"define",name:"AA_QUALITY_LOW",tokens:["0"]},{type:"define",name:"AA_QUALITY_MEDIUM",tokens:["1"]},{type:"define",name:"AA_QUALITY_HIGH",tokens:["2"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["vec4","MW","(","float","MP",",","float","MU",")","{","vec2","MV",";","MV","=","bM","+","vec2","(","MP",",","MU",")","*","u_texel_size",";","return","texture2D","(","u_color",",","MV",")",";","}","vec4","Ni","(",")","{","vec2","MX",";","float","MY",",","MZ",",","M_",",","Na",",","Nb",",","Nc",";","vec4","Nd",",","Ne",",","Nf",",","Ng",",","Nh",";","Nd","=","MW","(","-","1.0",",","-","1.0",")",";","Ne","=","MW","(","1.0",",","-","1.0",")",";","Nf","=","MW","(","-","1.0",",","1.0",")",";","Ng","=","MW","(","1.0",",","1.0",")",";","Nh","=","MW","(","0.0",",","0.0",")",";","MY","=","bB","(","Nh",")",";","MZ","=","bB","(","Nd",")",";","M_","=","bB","(","Ne",")",";","Na","=","bB","(","Nf",")",";","Nb","=","bB","(","Ng",")",";","Nc","=","min","(","MY",",","min","(","min","(","MZ",",","M_",")",",","min","(","Na",",","Nb",")",")",")",";","MY","=","max","(","MY",",","max","(","max","(","MZ",",","M_",")",",","max","(","Na",",","Nb",")",")",")",";","MX",".","x","=","-","(","(","MZ","+","M_",")","-","(","Na","+","Nb",")",")",";","MX",".","y","=","(","(","MZ","+","Na",")","-","(","M_","+","Nb",")",")",";","Nb","=","max","(","(","MZ","+","M_","+","Na","+","Nb",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","Nb","=","1.0","/","(","min","(","abs","(","MX",".","x",")",",","abs","(","MX",".","y",")",")","+","Nb",")",";","MX","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","MX","*","Nb",")",")","*","u_texel_size",";","Ng","=","0.5","*","(","texture2D","(","u_color",",","bM","+","MX","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","bM","+","MX","*","(","2.0","/","3.0","-","0.5",")",")",")",";","Nf","=","Ng","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","bM","+","MX","*","-","0.5",")","+","texture2D","(","u_color",",","bM","+","MX","*","0.5",")",")",";","Nb","=","bB","(","Nf",")",";","if","(","(","Nb","<","Nc",")","||","(","Nb",">","MY",")",")","return","Ng",";","else","return","Nf",";","}"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_GREEN_AS_LUMA",tokens:["1"]},{type:"define",name:"FXAA_BLEND4WEB",tokens:["1"]},{type:"include",file:"fxaa.glslf"},{type:"condition",parts:[{type:"if",expression:["AA_QUALITY","AA_QUALITY_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["39"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["1.00"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.063"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0312"]}]}},{type:"elif",expression:["AA_QUALITY","AA_QUALITY_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["20"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["0.65"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.166"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0625"]}]}},{type:"elif",expression:["AA_QUALITY","AA_QUALITY_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["0.50"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.166"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0833"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","N_",";"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","Ni","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["N_","=","u_texel_size",";","gl_FragColor","=","NZ","(","bM",",","u_color",",","N_",",","FXAA_QUALITY_SUBPIX",",","FXAA_QUALITY_EDGE_THRESHOLD",",","FXAA_QUALITY_EDGE_THRESHOLD_MIN",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","bM",";","void","main","(",")","{","vec4","MP",";","vec2","MU",",","MV",";","MU","=","vec2","(","0.0",",","0.0",")",";","MV","=","u_texel_size",";","MP","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","MP","*","0.0875447373698",";","MU","+=","MV",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","MU",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","MU",")","*","0.0858112354248",";","MU","+=","MV",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","MU",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","MU",")","*","0.0808139781061",";","MU","+=","MV",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","MU",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","MU",")","*","0.0731235112908",";","MU","+=","MV",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","MU",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","MU",")","*","0.0635705267419",";","MU","+=","MV",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","MU",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","MU",")","*","0.0530985673112",";","MU","+=","MV",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","MU",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","MU",")","*","0.0426125984122",";","MU","+=","MV",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","MU",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","MU",")","*","0.0328565115809",";","MU","+=","MV",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","MU",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","MU",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","MP",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","bM",";","void","main","(",")","{","vec4","MP",",","MU",";","MP","=","texture2D","(","u_main",",","bM",")",";","MU","=","texture2D","(","u_bloom",",","bM",")",";","MP","=","MP",";","MP","+=","MU",";","gl_FragColor","=","vec4","(","MP",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","bM",";","void","main","(",")","{","float","MP",";","vec3","MU",";","vec4","MV",";","MV","=","texture2D","(","u_color",",","bM",")",";","MU","=","MV",".","rgb",";","if","(","u_brightness","<","0.0",")","MU","=","MU","*","(","1.0","+","u_brightness",")",";","else","MU","=","MU","+","(","(","1.0","-","MU",")","*","u_brightness",")",";","MU","=","(","MU","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","MU","*=","u_exposure",";","MP","=","bB","(","vec4","(","MU",",","0.0",")",")",";","MU","=","mix","(","vec3","(","MP",")",",","MU",",","u_saturation",")",";","gl_FragColor","=","vec4","(","MU",",","MV",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","bM",";","void","main","(",")","{","gl_FragColor","=","V","(","clamp","(","Of","(","u_depth",",","bM",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","bM",";","void","main","(",")","{","float","MP",",","MU",";","vec4","MV",",","MW",";","MV","=","texture2D","(","u_sharp",",","bM",")",";","if","(","u_dof_dist",">","0.0",")","{","MP","=","Of","(","u_depth",",","bM",",","u_camera_range",")",";","MP","*=","u_view_max_depth",";","if","(","MP","<","u_dof_dist",")","MU","=","(","u_dof_dist","-","MP",")","/","u_dof_front",";","else","MU","=","(","MP","-","u_dof_dist",")","/","u_dof_rear",";","MU","=","clamp","(","MU",",","0.0",",","1.0",")",";","MW","=","texture2D","(","u_blurred",",","bM",")",";","gl_FragColor","=","mix","(","MV",",","MW",",","MU",")",";","}","else","gl_FragColor","=","MV",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_src_color",";","uniform","sampler2D","u_glow_mask_small",";","uniform","sampler2D","u_glow_mask_large",";","uniform","float","u_glow_mask_small_coeff",";","uniform","float","u_glow_mask_large_coeff",";","varying","vec2","bM",";","void","main","(",")","{","float","MP",";","vec4","MU",",","MV",",","MW",";","MU","=","texture2D","(","u_src_color",",","bM",")",";","MV","=","texture2D","(","u_glow_mask_small",",","bM",")",";","MW","=","texture2D","(","u_glow_mask_large",",","bM",")",";","gl_FragColor","=","MU",";","if","(","MW",".","a","!=","0.0",")","{","MP","=","u_glow_mask_large_coeff","*","MW",".","a",";","MP","=","clamp","(","MP",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","MW",".","rgb","/","MW",".","a",",","MP",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","MP",")",";","}","if","(","MV",".","a","!=","0.0",")","{","MP","=","u_glow_mask_small_coeff","*","MV",".","a",";","MP","=","clamp","(","MP",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","MV",".","rgb","/","MV",".","a",",","MP",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","MP",")",";","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","Og",";","varying","vec2","Oh",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","varying","vec4","Oi",";","void","main","(",")","{","vec4","Oj",";","int","Ok",";","float","Ol",",","Om",",","On",",","Oo",";","vec2","Op",",","Oq",",","Or",";","Op","=","(","Oi",".","xy","-","bM",")",";","Ol","=","length","(","Op",")",";","Op","=","u_radial_blur_step","*","Op","/","Ol",";","Om","=","Ol","/","u_radial_blur_step",";","Op","*=","min","(","Om",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","Om","=","max","(","Om",",","STEPS_PER_PASS",")",";","Oq","=","bM",";","On","=","0.0",";","const","int","Os","=","int","(","STEPS_PER_PASS",")",";","Ok","=","int","(","Om","+","0.5",")",";","for","(","int","Ot","=","0",";","Ot","<","Os",";","Ot","+=","1",")","{","if","(","Ot","<=","Ok",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["Om","=","Of","(","u_input",",","Oq",",","u_camera_range",")",";","On","+=","max","(","(","1.0","-","pow","(","Ol",",","0.3",")",")","*","step","(","0.9",",","Om",")",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Oj","=","texture2D","(","u_input",",","Oq",")",";","On","+=","Z","(","Oj",")",";"]}]}}]},{type:"textline",tokens:["}","Oq","+=","Op",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Or","=","bM","+","Oh",";","Oo","=","ay","(","vec2","(","2.5","*","(","Or",".","x",")",",","2.5","*","(","Or",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","ay","(","vec2","(","5.0","*","(","Or",".","x",")","-","0.66","*","u_time",",","5.0","*","(","Or",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","aU","(","vec2","(","7.5","*","(","Or",".","x",")","+","0.33","*","u_time",",","7.5","*","(","Or",".","y",")","-","0.33","*","u_time",")",")",";","Oo","*=","clamp","(","1.2","-","sqrt","(","0.2","*","Ol",")",",","0.0",",","1.0",")","*","Og",";","On","=","max","(","Oo",",","On",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","V","(","On","/","STEPS_PER_PASS",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","float","u_cam_water_depth",";","varying","float","Og",";","varying","vec2","Oh",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","varying","vec4","Oi",";","void","main","(",")","{","float","MP",",","MU",";","vec3","MV",";","bM","=","a_bb_vertex","+","0.5",";","MV","=","normalize","(","u_sun_direction",")",";","Oi","=","u_view_proj_matrix","*","vec4","(","MV",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","Og","=","1.0",";","MV","=","vec3","(","0.0",",","1.0",",","0.0",")",";","MV","=","i","(","u_camera_quat",",","MV",")",";","MV","=","normalize","(","MV",")",";","MP","=","dot","(","MV",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","MU","=","atan","(","MV",".","x",",","MV",".","z",")",";","Oh","=","vec2","(","-","MU",",","acos","(","MP",")",")",";","}","else","{","Og","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["Oi",".","xy","=","0.5","*","(","Oi",".","xy","/","Oi",".","w","+","1.0",")",";","Oi","+=","99999.0","*","step","(","Oi",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","uniform","vec3","u_sun_intensity",";","varying","vec2","bM",";","void","main","(",")","{","float","MP",";","vec3","MU",";","vec4","MV",";","MV","=","texture2D","(","u_main",",","bM",")",";","MU","=","clamp","(","u_sun_intensity",",","0.4",",","0.8",")",";","br","(","MV",".","rgb",")",";","MP","=","Z","(","texture2D","(","u_god_rays",",","bM",")",")",";","MU","=","MV",".","rgb","+","u_god_rays_intensity","*","vec3","(","MP",")","*","MU",";","bu","(","MU",")",";"]},{type:"condition",parts:[{type:"if",expression:["SAFARI_CANVAS_ALPHA_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","MU",",","max","(","0.01",",","MV",".","a",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","MU",",","MV",".","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","bM",";","void","main","(",")","{","float","MP",";","vec4","MU",";","MU","=","texture2D","(","u_input",",","bM",")",";","MP","=","dot","(","MU",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","MP",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","MP",",","MU",",","MV",",","MW",";","MU","=","0.0",";","MV","=","0.025",";","MW","=","0.025",";","for","(","int","MX","=","0",";","MX","<","20",";","MX","+=","1",")","{","MW","=","0.025",";","for","(","int","MY","=","0",";","MY","<","20",";","MY","+=","1",")","{","MP","=","max","(","texture2D","(","u_input",",","vec2","(","MV",",","MW",")",")",".","r",",","0.01",")",";","MU","+=","log","(","MP",")",";","MW","+=","0.05",";","}","MV","+=","0.05",";","}","MU","=","exp","(","MU","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","MU",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","bM",";","varying","float","Oj",";","void","main","(",")","{","vec4","Ok",";","float","Ol",",","Om",";","Ol","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","Om","=","texture2D","(","u_luminance",",","bM",")",".","r",";","Ok","=","texture2D","(","u_main",",","bM",")",";","Ol","=","Om","/","Ol",";","Om","=","u_bloom_edge_lum",";","gl_FragColor","=","Ok","*","max","(","Ol","-","Om",",","0.0",")","*","Oj",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","bM",";","varying","float","Oj",";","const","vec3","MP","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","Na","(","in","vec4","MU",",","in","vec3","MV",",","out","vec3","MW",")","{","float","MX",",","MY",",","MZ",",","M_",";","MX","=","MU",".","w","*","MV",".","x","+","MU",".","y","*","MV",".","z","-","MU",".","z","*","MV",".","y",";","MY","=","MU",".","w","*","MV",".","y","+","MU",".","z","*","MV",".","x","-","MU",".","x","*","MV",".","z",";","MZ","=","MU",".","w","*","MV",".","z","+","MU",".","x","*","MV",".","y","-","MU",".","y","*","MV",".","x",";","M_","=","-","MU",".","x","*","MV",".","x","-","MU",".","y","*","MV",".","y","-","MU",".","z","*","MV",".","z",";","MW",".","x","=","MX","*","MU",".","w","-","M_","*","MU",".","x","-","MY","*","MU",".","z","+","MZ","*","MU",".","y",";","MW",".","y","=","MY","*","MU",".","w","-","M_","*","MU",".","y","-","MZ","*","MU",".","x","+","MX","*","MU",".","z",";","MW",".","z","=","MZ","*","MU",".","w","-","M_","*","MU",".","z","-","MX","*","MU",".","y","+","MY","*","MU",".","x",";","}","void","main","(",")","{","vec3","Nb",";","bM","=","2.0","*","a_position",";","Na","(","u_camera_quat",",","MP",",","Nb",")",";","Oj","=","dot","(","-","Nb",",","u_sun_direction",")","*","u_bloom_key",";","Oj","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","uniform","float","u_motion_blur_decay_threshold",";","varying","vec2","bM",";","float","MP","=","0.0042",";","void","main","(",")","{","vec4","MU",",","MV",",","MW",",","MX",";","MU","=","texture2D","(","u_mb_tex_curr",",","bM",")",";","MV","=","texture2D","(","u_mb_tex_accum",",","bM",")",";","if","(","length","(","MU","-","MV",")",">","u_motion_blur_decay_threshold",")","{","MW","=","(","1.0","-","u_motion_blur_exp",")","*","MU","+","u_motion_blur_exp","*","MV",";","MW","=","MW","-","MV",";","MX","=","MU","-","MV",";","MW","=","min","(","max","(","abs","(","MW",")",",","vec4","(","MP",")",")",",","abs","(","MX",")",")","*","sign","(","MW",")",";","gl_FragColor","=","MV","+","MW",";","}","else","{","gl_FragColor","=","MU",";","}","}"]}]},exports["postprocessing/outline.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_outline_src",";","uniform","sampler2D","u_outline_mask",";","uniform","sampler2D","u_outline_mask_blurred",";","uniform","vec3","u_outline_color",";","uniform","float","u_draw_outline",";","varying","vec2","bM",";","void","main","(",")","{","vec3","MP",";","float","MU",";","vec4","MV",",","MW",",","MX",";","MV","=","texture2D","(","u_outline_src",",","bM",")",";","gl_FragColor","=","MV",";","if","(","u_draw_outline","!=","0.0",")","{","MW","=","texture2D","(","u_outline_mask",",","bM",")",";","MX","=","texture2D","(","u_outline_mask_blurred",",","bM",")",";","MU","=","MX",".","a","-","MW",".","a",";","if","(","MU","!=","0.0",")","{","MU","=","smoothstep","(","0.0",",","1.0",",","MX",".","a",")",";","if","(","MW",".","a","==","0.0",")","{","MP","=","u_outline_color",";","bu","(","MP",")",";","MW","=","vec4","(","clamp","(","MP",",","0.0",",","1.0",")",",","1.0",")",";","gl_FragColor","=","mix","(","MV",",","MW",",","MU",")",";","}","}","}","}"]}]},exports["postprocessing/performance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_color",";","varying","vec2","bM",";","void","main","(",")","{","vec4","MP",";","MP","=","vec4","(","0.0",")",";","for","(","int","MU","=","0",";","MU","<","100",";","MU","++",")","MP","+=","0.001","*","texture2D","(","u_color",",","bM","+","vec2","(","0.001","*","vec2","(","MU",")",")",")",";","gl_FragColor","=","MP",";","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"define",name:"FLIP_CUBEMAP_COORDS",tokens:["7"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_tex_number",";","uniform","vec2","u_delta",";"]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","void","main","(",")","{","float","MP",",","MU",",","MV",",","MW",";","vec2","MX",",","MY",";","vec4","MZ",";"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","POST_EFFECT_NONE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","bM",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_GRAYSCALE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["MZ","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor",".","rgb","=","vec3","(","(","MZ",".","r","+","MZ",".","g","+","MZ",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["MX","=","vec2","(","0.0",",","0.0",")",";","MY","=","u_texel_size",";","MZ","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","MZ","*","0.2270270270",";","MX","+=","MY",";","MZ","=","texture2D","(","u_color",",","bM","+","MX",")",";","gl_FragColor","+=","MZ","*","0.1945945946",";","MZ","=","texture2D","(","u_color",",","bM","-","MX",")",";","gl_FragColor","+=","MZ","*","0.1945945946",";","MX","+=","MY",";","MZ","=","texture2D","(","u_color",",","bM","+","MX",")",";","gl_FragColor","+=","MZ","*","0.1216216216",";","MZ","=","texture2D","(","u_color",",","bM","-","MX",")",";","gl_FragColor","+=","MZ","*","0.1216216216",";","MX","+=","MY",";","MZ","=","texture2D","(","u_color",",","bM","+","MX",")",";","gl_FragColor","+=","MZ","*","0.0540540541",";","MZ","=","texture2D","(","u_color",",","bM","-","MX",")",";","gl_FragColor","+=","MZ","*","0.0540540541",";","MX","+=","MY",";","MZ","=","texture2D","(","u_color",",","bM","+","MX",")",";","gl_FragColor","+=","MZ","*","0.0162162162",";","MZ","=","texture2D","(","u_color",",","bM","-","MX",")",";","gl_FragColor","+=","MZ","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_GLOW_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_GLOW_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["MX","=","vec2","(","0.0",",","0.0",")",";","MY","=","u_texel_size",";","MZ","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","MZ","*","(","1.0","-","step","(","0.0",",","-","MZ",".","a",")",")","*","0.152507",";","MX","+=","MY",";","MZ","=","texture2D","(","u_color",",","bM","+","MX",")",";","gl_FragColor","+=","MZ","*","(","1.0","-","step","(","0.0",",","-","MZ",".","a",")",")","*","0.141763",";","MZ","=","texture2D","(","u_color",",","bM","-","MX",")",";","gl_FragColor","+=","MZ","*","(","1.0","-","step","(","0.0",",","-","MZ",".","a",")",")","*","0.141763",";","MX","+=","MY",";","MZ","=","texture2D","(","u_color",",","bM","+","MX",")",";","gl_FragColor","+=","MZ","*","(","1.0","-","step","(","0.0",",","-","MZ",".","a",")",")","*","0.113861",";","MZ","=","texture2D","(","u_color",",","bM","-","MX",")",";","gl_FragColor","+=","MZ","*","(","1.0","-","step","(","0.0",",","-","MZ",".","a",")",")","*","0.113861",";","MX","+=","MY",";","MZ","=","texture2D","(","u_color",",","bM","+","MX",")",";","gl_FragColor","+=","MZ","*","(","1.0","-","step","(","0.0",",","-","MZ",".","a",")",")","*","0.079019",";","MZ","=","texture2D","(","u_color",",","bM","-","MX",")",";","gl_FragColor","+=","MZ","*","(","1.0","-","step","(","0.0",",","-","MZ",".","a",")",")","*","0.079019",";","MX","+=","MY",";","MZ","=","texture2D","(","u_color",",","bM","+","MX",")",";","gl_FragColor","+=","MZ","*","(","1.0","-","step","(","0.0",",","-","MZ",".","a",")",")","*","0.047383",";","MZ","=","texture2D","(","u_color",",","bM","-","MX",")",";","gl_FragColor","+=","MZ","*","(","1.0","-","step","(","0.0",",","-","MZ",".","a",")",")","*","0.047383",";","MX","+=","MY",";","MZ","=","texture2D","(","u_color",",","bM","+","MX",")",";","gl_FragColor","+=","MZ","*","(","1.0","-","step","(","0.0",",","-","MZ",".","a",")",")","*","0.024549",";","MZ","=","texture2D","(","u_color",",","bM","-","MX",")",";","gl_FragColor","+=","MZ","*","(","1.0","-","step","(","0.0",",","-","MZ",".","a",")",")","*","0.024549",";","MX","+=","MY",";","MZ","=","texture2D","(","u_color",",","bM","+","MX",")",";","gl_FragColor","+=","MZ","*","(","1.0","-","step","(","0.0",",","-","MZ",".","a",")",")","*","0.01099",";","MZ","=","texture2D","(","u_color",",","bM","-","MX",")",";","gl_FragColor","+=","MZ","*","(","1.0","-","step","(","0.0",",","-","MZ",".","a",")",")","*","0.01099",";","MX","+=","MY",";","MZ","=","texture2D","(","u_color",",","bM","+","MX",")",";","gl_FragColor","+=","MZ","*","(","1.0","-","step","(","0.0",",","-","MZ",".","a",")",")","*","0.00425",";","MZ","=","texture2D","(","u_color",",","bM","-","MX",")",";","gl_FragColor","+=","MZ","*","(","1.0","-","step","(","0.0",",","-","MZ",".","a",")",")","*","0.00425",";","MX","+=","MY",";","MZ","=","texture2D","(","u_color",",","bM","+","MX",")",";","gl_FragColor","+=","MZ","*","(","1.0","-","step","(","0.0",",","-","MZ",".","a",")",")","*","0.00142",";","MZ","=","texture2D","(","u_color",",","bM","-","MX",")",";","gl_FragColor","+=","MZ","*","(","1.0","-","step","(","0.0",",","-","MZ",".","a",")",")","*","0.00142",";","gl_FragColor","=","clamp","(","gl_FragColor",",","0.0",",","1.0",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_EXTEND",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_EXTEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["MY","=","u_texel_size",";","MZ","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","MZ",";","if","(","MZ",".","a","==","0.0",")","{","MZ","=","texture2D","(","u_color",",","bM","+","MY",")",";","if","(","MZ",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","MZ",".","a",")",";","else","{","MZ","=","texture2D","(","u_color",",","bM","-","MY",")",";","if","(","MZ",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","MZ",".","a",")",";","}","}"]}]}},{type:"elif",expression:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["MP","=","u_delta","[","0","]",";","MU","=","u_delta","[","1","]",";","MV","=","1.0","/","3.0",";","MW","=","0.5",";","MY","=","vec2","(","MV",",","MW",")",";","if","(","u_tex_number","==","0",")","{","MX","=","bM","*","MY","+","vec2","(","2.0","*","MV",",","0.0",")",";","MX","[","0","]","=","min","(","MX","[","0","]",",","1.0","-","MP",")",";","MX","[","1","]","=","min","(","MX","[","1","]",",","0.5","-","MU",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","5.0","*","MV","-","MX","[","0","]",",","MX","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","1",")","{","MX","=","bM","*","MY",";","MX","[","0","]","=","max","(","MX","[","0","]",",","MP",")",";","MX","[","1","]","=","min","(","MX","[","1","]",",","0.5","-","MU",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","MV","-","MX","[","0","]",",","MX","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","2",")","{","MX","=","bM","*","MY","+","vec2","(","MV",",","MW",")",";","MX","[","0","]","=","max","(","MX","[","0","]",",","MV","+","MP",")",";","MX","[","0","]","=","min","(","MX","[","0","]",",","2.0","*","MV","-","MP",")",";","MX","[","1","]","=","min","(","MX","[","1","]",",","1.0","-","MU",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","MX","[","0","]",",","3.0","*","MW","-","MX","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","3",")","{","MX","=","bM","*","MY","+","vec2","(","0.0",",","MW",")",";","MX","[","0","]","=","min","(","MX","[","0","]",",","MV","-","MP",")",";","MX","[","1","]","=","min","(","MX","[","1","]",",","1.0","-","MU",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","MX","[","0","]",",","3.0","*","MW","-","MX","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","4",")","{","MX","=","bM","*","MY","+","vec2","(","MV",",","0.0",")",";","MX","[","0","]","=","max","(","MX","[","0","]",",","MV","+","MP",")",";","MX","[","0","]","=","min","(","MX","[","0","]",",","2.0","*","MV","-","MP",")",";","MX","[","1","]","=","min","(","MX","[","1","]",",","0.5","-","MU",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","1.0","-","MX","[","0","]",",","MX","[","1","]",")",")",";","}","else","{","MY","=","bM","*","MY","+","vec2","(","2.0","*","MV",",","MW",")",";","MY","[","0","]","=","min","(","MY","[","0","]",",","1.0","-","MP",")",";","MY","[","1","]","=","max","(","MY","[","1","]",",","0.5","+","MU",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","5.0","*","MV","-","MY","[","0","]",",","MY","[","1","]",")",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","varying","vec2","bM",";","void","main","(",")","{","bM","=","2.0","*","a_position",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2},"SMAA_PREDICATION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Ok",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Ol",";","varying","vec4","Om",";","varying","vec4","On",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","Oo",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Ou","(","vec2","Op",",","sampler2D","Oq",")","{","float","Or",",","Os",",","Ot",";","Or","=","texture2D","(","Oq",",","Op",")",".","r",";","Os","=","texture2D","(","Oq",",","Ol",".","xy",")",".","r",";","Ot","=","texture2D","(","Oq",",","Ol",".","zw",")",".","r",";","return","vec3","(","Or",",","Os",",","Ot",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Oz","(","vec2","Ov",",","sampler2D","Ow",")","{","vec2","Ox",";","vec3","Oy",";","Oy","=","Ou","(","Ov",",","Ow",")",";","Ox","=","abs","(","Oy",".","xx","-","Oy",".","yz",")",";","Ox","=","step","(","SMAA_PREDICATION_THRESHOLD",",","Ox",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","Ox",")",";","}"]}]}}]},{type:"textline",tokens:["void","OD","(","bvec2","OA",",","inout","vec2","OB",",","vec2","OC",")","{","if","(","OA",".","x",")","OB",".","x","=","OC",".","x",";","if","(","OA",".","y",")","OB",".","y","=","OC",".","y",";","}","void","OD","(","bvec4","OE",",","inout","vec4","OF",",","vec4","OG",")","{","OD","(","OE",".","xy",",","OF",".","xy",",","OG",".","xy",")",";","OD","(","OE",".","zw",",","OF",".","zw",",","OG",".","zw",")",";","}","vec2","OI","(","vec2","OH",")","{","return","sign","(","OH",")","*","floor","(","abs","(","OH",")","+",".5",")",";","}","vec4","OI","(","vec4","OJ",")","{","return","sign","(","OJ",")","*","floor","(","abs","(","OJ",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","OW","(","vec2","OK",",","sampler2D","OL"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","OM"]}]}}]},{type:"textline",tokens:[")","{","vec4","ON",";","float","OO",",","OP",",","OQ",",","OR",",","OS",";","vec3","OT",";","vec2","OU",",","OV",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["OU","=","Oz","(","OK",",","OM",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["OU","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["OT","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","OO","=","dot","(","texture2D","(","OL",",","OK",")",".","rgb",",","OT",")",";","OP","=","dot","(","texture2D","(","OL",",","Ol",".","xy",")",".","rgb",",","OT",")",";","OQ","=","dot","(","texture2D","(","OL",",","Ol",".","zw",")",".","rgb",",","OT",")",";","ON",".","xy","=","abs","(","OO","-","vec2","(","OP",",","OQ",")",")",";","OU","=","step","(","OU",",","ON",".","xy",")",";","if","(","dot","(","OU",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","OR","=","dot","(","texture2D","(","OL",",","Om",".","xy",")",".","rgb",",","OT",")",";","OS","=","dot","(","texture2D","(","OL",",","Om",".","zw",")",".","rgb",",","OT",")",";","ON",".","zw","=","abs","(","OO","-","vec2","(","OR",",","OS",")",")",";","OV","=","max","(","ON",".","xy",",","ON",".","zw",")",";","OS","=","dot","(","texture2D","(","OL",",","On",".","xy",")",".","rgb",",","OT",")",";","OR","=","dot","(","texture2D","(","OL",",","On",".","zw",")",".","rgb",",","OT",")",";","ON",".","zw","=","abs","(","vec2","(","OP",",","OQ",")","-","vec2","(","OS",",","OR",")",")",";","OV","=","max","(","OV",".","xy",",","ON",".","zw",")",";","OR","=","max","(","OV",".","x",",","OV",".","y",")",";","OU",".","xy","*=","step","(","OR",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","ON",".","xy",")",";","return","OU",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","OY","(","vec2","OX",")","{","OX",".","r","=","OX",".","r","*","abs","(","5.0","*","OX",".","r","-","5.0","*","0.75",")",";","return","OI","(","OX",")",";","}","vec4","OY","(","vec4","OZ",")","{","OZ",".","rb","=","OZ",".","rb","*","abs","(","5.0","*","OZ",".","rb","-","5.0","*","0.75",")",";","return","OI","(","OZ",")",";","}","vec2","Pg","(","sampler2D","O_",",","vec2","Pa",",","vec2","Pb",",","out","vec2","Pc",")","{","vec3","Pd",";","vec4","Pe",";","Pe","=","vec4","(","Pa",",","-","1.0",",","1.0",")",";","Pd","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","Pf","=","0",";","Pf","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","Pf","++",")","{","if","(","Pe",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","Pe",".","w",">","0.9",")","{","Pe",".","xyz","+=","Pd","*","vec3","(","Pb",",","1.0",")",";","Pc","=","texture2D","(","O_",",","Pe",".","xy",",","0.0",")",".","rg",";","Pe",".","w","=","dot","(","Pc",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","Pe",".","zw",";","}","vec2","Po","(","sampler2D","Ph",",","vec2","Pi",",","vec2","Pj",",","out","vec2","Pk",")","{","vec3","Pl",";","vec4","Pm",";","Pm","=","vec4","(","Pi",",","-","1.0",",","1.0",")",";","Pm",".","x","+=","0.25","*","u_texel_size",".","x",";","Pl","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","Pn","=","0",";","Pn","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","Pn","++",")","{","if","(","Pm",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","Pm",".","w",">","0.9",")","{","Pm",".","xyz","=","Pl","*","vec3","(","Pj",",","1.0",")","+","Pm",".","xyz",";","Pk","=","texture2D","(","Ph",",","Pm",".","xy",",","0.0",")",".","rg",";","Pk","=","OY","(","Pk",")",";","Pm",".","w","=","dot","(","Pk",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","Pm",".","zw",";","}","vec2","Pu","(","sampler2D","Pp",",","vec2","Pq",",","vec2","Pr",",","float","Ps",")","{","vec2","Pt",";","Pt","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","Pr","+","Pq",";","Pt","=","SMAA_AREATEX_PIXEL_SIZE","*","Pt","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","Pt",".","x","+=","0.5",";","Pt",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","Ps",";","return","texture2D","(","Pp",",","Pt",",","0.0",")",".","rg",";","}","vec2","PG","(","sampler2D","Pv",",","sampler2D","Pw",",","vec2","Px",",","vec2","Py",",","vec4","Pz",")","{","vec4","PA",",","PB",",","PC",";","vec2","PD",",","PE",",","PF",";","PD","=","vec2","(","0.0",",","0.0",")",";","if","(","Py",".","r",">","0.0",")","{","PA",".","xz","=","Pg","(","Pv",",","Px",",","vec2","(","-","1.0",",","1.0",")",",","PE",")",";","PA",".","x","+=","float","(","PE",".","y",">","0.9",")",";","}","else","PA",".","xz","=","vec2","(","0.0",",","0.0",")",";","PA",".","yw","=","Pg","(","Pv",",","Px",",","vec2","(","1.0",",","-","1.0",")",",","PE",")",";","if","(","PA",".","x","+","PA",".","y",">","2.0",")","{","PB","=","vec4","(","-","PA",".","x","+","0.25",",","PA",".","x",",","PA",".","y",",","-","PA",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","Px",".","xyxy",";","PC",".","xy","=","texture2D","(","Pv",",","PB",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","PC",".","zw","=","texture2D","(","Pv",",","PB",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","PC",".","yxwz","=","OY","(","PC",".","xyzw",")",";","PF","=","vec2","(","2.0",",","2.0",")","*","PC",".","xz","+","PC",".","yw",";","OD","(","bvec2","(","step","(","0.9",",","PA",".","zw",")",")",",","PF",",","vec2","(","0.0",",","0.0",")",")",";","PD","+=","Pu","(","Pw",",","PA",".","xy",",","PF",",","Pz",".","z",")",";","}","PA",".","xz","=","Po","(","Pv",",","Px",",","vec2","(","-","1",",","-","1",")",",","PE",")",";","if","(","texture2D","(","Pv",",","Px","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","PA",".","yw","=","Po","(","Pv",",","Px",",","vec2","(","1",",","1",")",",","PE",")",";","PA",".","y","+=","float","(","PE",".","y",">","0.9",")",";","}","else","PA",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","PA",".","x","+","PA",".","y",">","2.0",")","{","PC","=","vec4","(","-","PA",".","x",",","-","PA",".","x",",","PA",".","y",",","PA",".","y",")","*","u_texel_size",".","xyxy","+","Px",".","xyxy",";","PB",".","x","=","texture2D","(","Pv",",","PC",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","PB",".","y","=","texture2D","(","Pv",",","PC",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","PB",".","zw","=","texture2D","(","Pv",",","PC",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","PE","=","vec2","(","2.0",",","2.0",")","*","PB",".","xz","+","PB",".","yw",";","OD","(","bvec2","(","step","(","0.9",",","PA",".","zw",")",")",",","PE",",","vec2","(","0",",","0",")",")",";","PD","+=","Pu","(","Pw",",","PA",".","xy",",","PE",",","Pz",".","w",")",".","gr",";","}","return","PD",";","}"]}]}}]},{type:"textline",tokens:["float","PM","(","sampler2D","PH",",","vec2","PI",",","float","PJ",")","{","vec2","PK",",","PL",";","PK","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","PL","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","PJ",",","1.0",")",";","PK","+=","vec2","(","-","1.0",",","1.0",")",";","PL","+=","vec2","(","0.5",",","-","0.5",")",";","PK","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","PL","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","PH",",","PK","*","PI","+","PL",",","0.0",")",".","r",";","}","float","PU","(","sampler2D","PN",",","sampler2D","PO",",","vec2","PP",",","float","PQ",")","{","float","PR",";","vec2","PS",";","PS","=","vec2","(","0.0",",","1.0",")",";","for","(","int","PT","=","0",";","PT","<","SMAA_MAX_SEARCH_STEPS",";","PT","++",")","{","if","(","PP",".","x",">","PQ","&&","PS",".","g",">","0.8281","&&","PS",".","r","==","0.0",")","{","PS","=","texture2D","(","PN",",","PP",",","0.0",")",".","rg",";","PP","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","PP",";","}","}","PR","=","-","(","255.0","/","127.0",")","*","PM","(","PO",",","PS",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","PR","+","PP",".","x",";","}","float","Qb","(","sampler2D","PV",",","sampler2D","PW",",","vec2","PX",",","float","PY",")","{","float","PZ",";","vec2","P_",";","P_","=","vec2","(","0.0",",","1.0",")",";","for","(","int","Qa","=","0",";","Qa","<","SMAA_MAX_SEARCH_STEPS",";","Qa","++",")","{","if","(","PX",".","x","<","PY","&&","P_",".","g",">","0.8281","&&","P_",".","r","==","0.0",")","{","P_","=","texture2D","(","PV",",","PX",",","0.0",")",".","rg",";","PX","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","PX",";","}","}","PZ","=","-","(","255.0","/","127.0",")","*","PM","(","PW",",","P_",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","PZ","+","PX",".","x",";","}","float","Qj","(","sampler2D","Qc",",","sampler2D","Qd",",","vec2","Qe",",","float","Qf",")","{","float","Qg",";","vec2","Qh",";","Qh","=","vec2","(","1.0",",","0.0",")",";","for","(","int","Qi","=","0",";","Qi","<","SMAA_MAX_SEARCH_STEPS",";","Qi","++",")","{","if","(","Qe",".","y",">","Qf","&&","Qh",".","r",">","0.8281","&&","Qh",".","g","==","0.0",")","{","Qh","=","texture2D","(","Qc",",","Qe",",","0.0",")",".","rg",";","Qe","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","Qe",";","}","}","Qg","=","-","(","255.0","/","127.0",")","*","PM","(","Qd",",","Qh",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","Qg","+","Qe",".","y",";","}","float","Qr","(","sampler2D","Qk",",","sampler2D","Ql",",","vec2","Qm",",","float","Qn",")","{","float","Qo",";","vec2","Qp",";","Qp","=","vec2","(","1.0",",","0.0",")",";","for","(","int","Qq","=","0",";","Qq","<","SMAA_MAX_SEARCH_STEPS",";","Qq","++",")","{","if","(","Qm",".","y","<","Qn","&&","Qp",".","r",">","0.8281","&&","Qp",".","g","==","0.0",")","{","Qp","=","texture2D","(","Qk",",","Qm",",","0.0",")",".","rg",";","Qm","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","Qm",";","}","}","Qo","=","-","(","255.0","/","127.0",")","*","PM","(","Ql",",","Qp",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","Qo","+","Qm",".","y",";","}","vec2","Qy","(","sampler2D","Qs",",","vec2","Qt",",","float","Qu",",","float","Qv",",","float","Qw",")","{","vec2","Qx",";","Qx","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","OI","(","4.0","*","vec2","(","Qu",",","Qv",")",")","+","Qt",";","Qx","=","SMAA_AREATEX_PIXEL_SIZE","*","Qx","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","Qx",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","Qw","+","Qx",".","y",";","return","texture2D","(","Qs",",","Qx",",","0.0",")",".","rg",";","}","void","QF","(","sampler2D","Qz",",","inout","vec2","QA",",","vec4","QB",",","vec2","QC",")","{","vec2","QD",",","QE",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["QD","=","step","(","QC",".","xy",",","QC",".","yx",")",";","QE","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","QD",";","QE","/=","QD",".","x","+","QD",".","y",";","QD","=","vec2","(","1.0",",","1.0",")",";","QD",".","x","-=","QE",".","x","*","texture2D","(","Qz",",","QB",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","QD",".","x","-=","QE",".","y","*","texture2D","(","Qz",",","QB",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","QD",".","y","-=","QE",".","x","*","texture2D","(","Qz",",","QB",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","QD",".","y","-=","QE",".","y","*","texture2D","(","Qz",",","QB",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","QA","*=","clamp","(","QD",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","QM","(","sampler2D","QG",",","inout","vec2","QH",",","vec4","QI",",","vec2","QJ",")","{","vec2","QK",",","QL",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["QK","=","step","(","QJ",".","xy",",","QJ",".","yx",")",";","QL","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","QK",";","QL","/=","QK",".","x","+","QK",".","y",";","QK","=","vec2","(","1.0",",","1.0",")",";","QK",".","x","-=","QL",".","x","*","texture2D","(","QG",",","QI",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","QK",".","x","-=","QL",".","y","*","texture2D","(","QG",",","QI",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","QK",".","y","-=","QL",".","x","*","texture2D","(","QG",",","QI",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","QK",".","y","-=","QL",".","y","*","texture2D","(","QG",",","QI",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","QH","*=","clamp","(","QK",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Q_","(","vec2","QN",",","vec2","QO",",","sampler2D","QP",",","sampler2D","QQ",",","sampler2D","QR",",","vec4","QS",")","{","float","QT",",","QU",";","vec3","QV",";","vec2","QW",",","QX",",","QY",";","vec4","QZ",";","QZ","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","QW","=","texture2D","(","QP",",","QN",")",".","rg",";","if","(","QW",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["QZ",".","rg","=","PG","(","QP",",","QQ",",","QN",",","QW",",","QS",")",";","if","(","QZ",".","r","==","-","QZ",".","g",")","{"]}]}}]},{type:"textline",tokens:[";","QV",".","x","=","PU","(","QP",",","QR",",","Ol",".","xy",",","On",".","x",")",";","QV",".","y","=","Om",".","y",";","QX",".","x","=","QV",".","x",";","QT","=","texture2D","(","QP",",","QV",".","xy",",","0.0",")",".","r",";","QV",".","z","=","Qb","(","QP",",","QR",",","Ol",".","zw",",","On",".","y",")",";","QX",".","y","=","QV",".","z",";","QX","=","abs","(","OI","(","QX","/","u_texel_size",".","xx","-","QO",".","xx",")",")",";","QY","=","sqrt","(","QX",")",";","QU","=","texture2D","(","QP",",","QV",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","QZ",".","rg","=","Qy","(","QQ",",","QY",",","QT",",","QU",",","QS",".","y",")",";","QV",".","y","=","QN",".","y",";","QF","(","QP",",","QZ",".","rg",",","QV",".","xyzy",",","QX",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["}","else","QW",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","QW",".","r",">","0.0",")","{",";","QV",".","y","=","Qj","(","QP",",","QR",",","Om",".","xy",",","On",".","z",")",";","QV",".","x","=","Ol",".","x",";","QW",".","x","=","QV",".","y",";","QU","=","texture2D","(","QP",",","QV",".","xy",",","0.0",")",".","g",";","QV",".","z","=","Qr","(","QP",",","QR",",","Om",".","zw",",","On",".","w",")",";","QW",".","y","=","QV",".","z",";","QW","=","abs","(","OI","(","QW","/","u_texel_size",".","yy","-","QO",".","yy",")",")",";","QX","=","sqrt","(","QW",")",";","QT","=","texture2D","(","QP",",","QV",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","QZ",".","ba","=","Qy","(","QQ",",","QX",",","QU",",","QT",",","QS",".","x",")",";","QV",".","x","=","QN",".","x",";","QM","(","QP",",","QZ",".","ba",",","QV",".","xyxz",",","QW",")",";","}","return","QZ",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Rl","(","vec2","Ra",",","sampler2D","Rb",",","sampler2D","Rc"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","Rd"]}]}}]},{type:"textline",tokens:[")","{","bool","Re",";","vec2","Rf",",","Rg",",","Rh",";","vec4","Ri",",","Rj",",","Rk",";","Ri",".","x","=","texture2D","(","Rc",",","Ok",".","xy",")",".","a",";","Ri",".","y","=","texture2D","(","Rc",",","Ok",".","zw",")",".","g",";","Ri",".","wz","=","texture2D","(","Rc",",","Ra",")",".","xz",";","if","(","dot","(","Ri",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","Rj","=","texture2D","(","Rb",",","Ra",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["Rk","=","texture2D","(","Rd",",","bM",")",";","Rf","=","2.0","*","ag","(","Rk",")","-","1.0",";","Rj",".","a","=","sqrt","(","2.0","*","length","(","Rf",")",")",";"]}]}}]},{type:"textline",tokens:["return","Rj",";","}","else","{","Re","=","max","(","Ri",".","x",",","Ri",".","z",")",">","max","(","Ri",".","y",",","Ri",".","w",")",";","Rj","=","vec4","(","0.0",",","Ri",".","y",",","0.0",",","Ri",".","w",")",";","Rf","=","Ri",".","yw",";","OD","(","bvec4","(","Re",",","Re",",","Re",",","Re",")",",","Rj",",","vec4","(","Ri",".","x",",","0.0",",","Ri",".","z",",","0.0",")",")",";","OD","(","bvec2","(","Re",",","Re",")",",","Rf",",","Ri",".","xz",")",";","Rf","/=","dot","(","Rf",",","vec2","(","1.0",",","1.0",")",")",";","Rj","=","Rj","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","Ra",".","xyxy",";","Ri","=","Rf",".","x","*","texture2D","(","Rb",",","Rj",".","xy",",","0.0",")",";","Ri","+=","Rf",".","y","*","texture2D","(","Rb",",","Rj",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["Rk","=","texture2D","(","Rd",",","Rj",".","xy",")",";","Rg","=","2.0","*","ag","(","Rk",")","-","1.0",";","Rh","=","Rf",".","x","*","Rg",";","Rk","=","texture2D","(","Rd",",","Rj",".","zw",")",";","Rg","=","2.0","*","ag","(","Rk",")","-","1.0",";","Rh","+=","Rf",".","y","*","Rg",";","Ri",".","a","=","sqrt","(","2.0","*","length","(","Rh",")",")",";"]}]}}]},{type:"textline",tokens:["return","Ri",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Rv","(","vec2","Rm",",","sampler2D","Rn",",","sampler2D","Ro"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","Rp"]}]}}]},{type:"textline",tokens:[")","{","float","Rq",";","vec2","Rr",";","vec4","Rs",",","Rt",",","Ru",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["Rs","=","texture2D","(","Rp",",","bM",")",";","Rr","=","2.0","*","ag","(","Rs",")","-","1.0",";","Rs","=","texture2D","(","Rn",",","Rm",")",";","Rt","=","texture2D","(","Ro",",","Rm","-","Rr",")",";","Rq","=","abs","(","Rs",".","a","*","Rs",".","a","-","Rt",".","a","*","Rt",".","a",")","/","2.0",";","Rq","=","0.5","*","clamp","(","1.0","-","sqrt","(","Rq",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","Ru","=","mix","(","Rs",",","Rt",",","Rq",")",";","Ru",".","a","=","1.0",";","return","Ru",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Rs","=","texture2D","(","Rn",",","Rm",")",";","Rt","=","texture2D","(","Ro",",","Rm",")",";","return","mix","(","Rs",",","Rt",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Rw",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Rw","=","vec4","(","OW","(","bM",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Rw","=","Q_","(","bM",",","Oo",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Rw","=","Rl","(","bM",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Rw","=","vec4","(","Rv","(","bM",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Rw","=","texture2D","(","u_color",",","bM",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","Rw",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Ok",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","Ol",";","varying","vec4","Om",";","varying","vec4","On",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","Oo",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","MU","(","vec2","MP",")","{","Ol","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","MP",".","xyxy",";","Om","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","MP",".","xyxy",";","On","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","MP",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","MX","(","vec2","MV",",","out","vec2","MW",")","{","MW","=","MV","/","u_texel_size",";","Ol","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","MV",".","xyxy",";","Om","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","MV",".","xyxy",";","On","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","Ol",".","xz",",","Om",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","MZ","(","vec2","MY",")","{","Ok","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","MY",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","bM","=","2.0","*","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["MU","(","bM",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["MX","(","bM",",","Oo",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["MZ","(","bM",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"define",name:"SSAO_QUALITY_8",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_16",tokens:["2"]},{type:"define",name:"SSAO_QUALITY_24",tokens:["3"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","sampler2D","u_ssao_special_tex",";","uniform","vec2","u_camera_range",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","float","MU","(","in","vec2","MP",")","{","return","Of","(","u_depth",",","MP",",","u_camera_range",")",";","}","void","main","(",")","{","float","MV",",","MW",",","MX",",","MY",",","MZ",",","M_",";","vec3","Na",",","Nb",",","Nc",",","Nd",";","Na","=","texture2D","(","u_color",",","bM",")",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","Na",",","1.0",")",";","return",";"]}]}}]},{type:"textline",tokens:["Nb","=","normalize","(","2.0","*","texture2D","(","u_ssao_special_tex",",","bM","*","0.25","/","u_texel_size",")",".","rgb","-","1.0",")",";","MV","=","MU","(","bM",")",";","MW","=","MV","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","SSAO_QUALITY_8",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Ne","=","8.0",";","const","int","Nf","=","1",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_16",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Ne","=","16.0",";","const","int","Nf","=","2",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_24",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Ne","=","24.0",";","const","int","Nf","=","3",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_32",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Ne","=","32.0",";","const","int","Nf","=","4",";"]}]}}]},{type:"textline",tokens:["MX","=","u_ssao_radius_increase","*","0.001",";","const","float","Ng","=","1.0","+","2.4","/","Ne",";","MY","=","0.0",";","for","(","int","Nh","=","0",";","Nh","<","Nf",";","Nh","++",")","for","(","int","Ni","=","-","1",";","Ni","<=","1",";","Ni","+=","2",")","for","(","int","Op","=","-","1",";","Op","<=","1",";","Op","+=","2",")","for","(","int","Oq","=","-","1",";","Oq","<=","1",";","Oq","+=","2",")","{","Nc","=","reflect","(","normalize","(","vec3","(","Ni",",","Op",",","Oq",")",")",",","Nb",")","*","(","MX","*=","Ng",")",";","Nd","=","vec3","(","bM",",","MW",")",";","Nd","+=","vec3","(","Nc",".","xy",",","Nc",".","z","*","MW","*","2.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Nd",".","z","-=","1.4","*","(","Nd",".","z","-","MW",")","*","step","(","MW",",","Nd",".","z",")",";"]}]}}]},{type:"textline",tokens:["MZ","=","MU","(","Nd",".","xy",")","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";","M_","=","clamp","(","(","MW","-","MZ",")","/","MZ",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["MY","+=","mix","(","1.0",",","M_",",","step","(","MZ",",","Nd",".","z",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["MY","+=","mix","(","step","(","Nd",".","z",",","MZ",")",",","0.5",",","M_",")",";"]}]}}]},{type:"textline",tokens:["}","MY","=","MY","/","Ne",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["MY","=","clamp","(","MY","*","MY","+","0.6","*","MY",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["MY","=","clamp","(","MY","*","MY","+","MY",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["MV","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","MV",")",";","MY","=","mix","(","1.0",",","MY",",","MV",")",";","gl_FragColor","=","vec4","(","Na",",","MY",")",";","}"]}]},exports["postprocessing/ssao_blur.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"include",file:"depth_fetch.glslf"}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_ssao_mask",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","uniform","float","u_ssao_blur_discard_value",";","float","MU","(","in","vec2","MP",")","{","return","Of","(","u_depth",",","MP",",","u_camera_range",")",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","MV",",","MW",";","float","MX",",","MY",",","MZ",",","M_",",","Na",",","Nb",",","Nc",";","MX","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["MY","=","MU","(","bM",")",";","MZ","=","0.0",";","M_","=","u_ssao_blur_discard_value","*","100.0",";"]}]}}]},{type:"textline",tokens:["MV","=","vec2","(","-","2.0",")",";","for","(","int","Nd","=","0",";","Nd","<","4",";","++","Nd",")","{","for","(","int","Ne","=","0",";","Ne","<","4",";","++","Ne",")","{","MW","=","(","MV","+","vec2","(","float","(","Nd",")",",","float","(","Ne",")",")",")","*","u_texel_size",";","Na","=","texture2D","(","u_ssao_mask",",","bM","+","MW",")",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["Nb","=","MU","(","bM","+","MW",")",";","Nc","=","1.0","-","clamp","(","abs","(","Nb","-","MY",")","*","M_",",","0.0",",","1.0",")",";","MX","+=","Na","*","Nc",";","MZ","+=","Nc",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["MX","+=","Na",";"]}]}}]},{type:"textline",tokens:["}","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","bM",")",".","rgb",",","MX","/","MZ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","bM",")",".","rgb",",","MX","/","16.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/stereo.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["ANAGLYPH",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_enable_hmd_stereo",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_DISTORTION_CORRECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_distortion_params",";","uniform","vec4","u_chromatic_aberration_coefs",";","void","Nb","(","vec2","MP",",","vec2","MU",",","sampler2D","MV",")","{","vec4","MW",";","float","MX",";","vec2","MY",",","MZ",",","M_",",","Na",";","MY","=","(","MP","-","MU",")","*","2.0",";","MX","=","MY",".","x","*","MY",".","x","+","MY",".","y","*","MY",".","y",";","MY","=","MY","*","(","1.0","+","u_distortion_params","[","0","]","*","MX","+","u_distortion_params","[","1","]","*","MX","*","MX",")",";","MY","=","MY","*","0.5","/","(","1.0","+","u_distortion_params","[","0","]","+","u_distortion_params","[","1","]",")",";","if","(","length","(","u_chromatic_aberration_coefs",")",">","0.0",")","{","MZ","=","MY","*","(","1.0","+","u_chromatic_aberration_coefs","[","0","]","+","MX","*","u_chromatic_aberration_coefs","[","1","]",")","+","MU",";","M_","=","MY","+","MU",";","Na","=","MY","*","(","1.0","+","u_chromatic_aberration_coefs","[","2","]","+","MX","*","u_chromatic_aberration_coefs","[","3","]",")","+","MU",";","if","(","clamp","(","Na",",","0.0",",","1.0",")","!=","Na",")","{","gl_FragColor","=","vec4","(","0.0",")",";","}","else","{","MW","=","texture2D","(","MV",",","M_",")",";","gl_FragColor","[","0","]","=","texture2D","(","MV",",","MZ",")",".","x",";","gl_FragColor","[","1","]","=","MW",".","y",";","gl_FragColor","[","2","]","=","texture2D","(","MV",",","Na",")",".","z",";","gl_FragColor","[","3","]","=","MW",".","w",";","}","}","else","{","MY","+=","MU",";","if","(","clamp","(","MY",",","0.0",",","1.0",")","!=","MY",")","{","gl_FragColor","=","vec4","(","0.0",")",";","}","else","{","gl_FragColor","=","texture2D","(","MV",",","MY",")",";","}","}","}"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Nc",",","Nd",";","mat3","Ne",",","Nf",";","vec3","Ng",",","Nh",";","vec4","Ni",",","Op",";"]},{type:"condition",parts:[{type:"if",expression:["ANAGLYPH"],group:{type:"group",parts:[{type:"textline",tokens:["Ni","=","texture2D","(","u_sampler_left",",","bM",")",";","Op","=","texture2D","(","u_sampler_right",",","bM",")",";","Ng","=","vec3","(","Ni","[","0","]",",","Ni","[","1","]",",","Ni","[","2","]",")",";","br","(","Ng",")",";","Nh","=","vec3","(","Op","[","0","]",",","Op","[","1","]",",","Op","[","2","]",")",";","br","(","Nh",")",";","Ne","=","mat3","(","0.437",",","-","0.062",",","-","0.048",",","0.449",",","-","0.062",",","-","0.050",",","0.164",",","-","0.024",",","-","0.017",")",";","Nf","=","mat3","(","-","0.011",",","0.377",",","-","0.026",",","-","0.032",",","0.761",",","-","0.093",",","-","0.007",",","0.009",",","1.234",")",";","Nh","=","clamp","(","Ne","*","Ng",",","0.0",",","1.0",")","+","clamp","(","Nf","*","Nh",",","0.0",",","1.0",")",";","bu","(","Nh",")",";","gl_FragColor","=","vec4","(","Nh",",","Ni","[","3","]","+","Op","[","3","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_enable_hmd_stereo","!=","0",")","{","if","(","bM","[","0","]","<","0.5",")","{","Nc","=","vec2","(","2.0","*","bM","[","0","]",",","bM","[","1","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_DISTORTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_sampler_left",",","Nc",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nd","=","vec2","(","0.5","-","u_distortion_params","[","3","]",",","u_distortion_params","[","2","]",")",";","Nb","(","Nc",",","Nd",",","u_sampler_left",")",";"]}]}}]},{type:"textline",tokens:["}","else","{","Nd","=","vec2","(","2.0","*","(","bM","[","0","]","-","0.5",")",",","bM","[","1","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_DISTORTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_sampler_right",",","Nd",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nc","=","vec2","(","0.5","+","u_distortion_params","[","3","]",",","u_distortion_params","[","2","]",")",";","Nb","(","Nd",",","Nc",",","u_sampler_right",")",";"]}]}}]},{type:"textline",tokens:["}","}","else","{","gl_FragColor","=","texture2D","(","u_sampler_left",",","bM",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","bM",";","void","main","(",")","{","vec2","MP",";","vec4","MU",",","MV",";","float","MW",";","MW","=","texture2D","(","u_depth",",","bM",")",".","x",";","MU","=","vec4","(","bM","*","2.0","-","1.0",",","2.0","*","MW","-","1.0",",","1.0",")",";","MV","=","u_view_proj_inverse","*","MU",";","MV","=","MV","/","MV",".","w",";","MV","=","u_view_proj_prev","*","MV",";","MV","/=","MV",".","w",";","MP","=","(","MU",".","xy","-","MV",".","xy",")","/","4.0","+","0.5",";","MP","=","clamp","(","MP",",","0.0",",","1.0",")",";","gl_FragColor","=","V","(","MP",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","a","=","0.0",";","float","b","=","1.0",";","struct","c","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","f","(","vec3","d",",","vec3","e",")","{","return","any","(","lessThan","(","abs","(","d","-","e",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","i","(","in","vec4","g",",","in","vec3","h",")","{","return","h","+","2.0","*","cross","(","g",".","xyz",",","cross","(","g",".","xyz",",","h",")","+","g",".","w","*","h",")",";","}","vec4","k","(","in","vec4","j",")","{","return","vec4","(","-","j",".","xyz",",","j",".","w",")","/","dot","(","j",",","j",")",";","}","vec3","p","(","vec4","l",",","vec4","m",",","vec4","n",")","{","vec3","o",";","o","=","n",".","xyz","*","l",".","w",";","o","=","i","(","m",",","o",")",";","o","+=","l",".","xyz","*","n",".","w",";","return","o",";","}","vec3","v","(","vec4","q",",","vec4","r",",","vec4","s",")","{","vec4","t",";","vec3","u",";","u","=","s",".","xyz","-","q",".","xyz","*","s",".","w",";","t","=","k","(","r",")",";","u","=","i","(","t",",","u",")",";","u","/=","q",".","w",";","return","u",";","}","mat4","w","(",")","{","return","mat4","(","b",",","a",",","a",",","a",",","a",",","b",",","a",",","a",",","a",",","a",",","b",",","a",",","a",",","a",",","a",",","b",")",";","}","mat4","y","(","float","x",")","{","return","mat4","(","b",",","a",",","a",",","a",",","a",",","cos","(","x",")",",","sin","(","x",")",",","a",",","a",",","-","sin","(","x",")",",","cos","(","x",")",",","a",",","a",",","a",",","a",",","b",")",";","}","mat4","A","(","float","z",")","{","return","mat4","(","cos","(","z",")",",","a",",","-","sin","(","z",")",",","a",",","a",",","b",",","a",",","a",",","sin","(","z",")",",","a",",","cos","(","z",")",",","a",",","a",",","a",",","a",",","b",")",";","}","mat4","C","(","float","B",")","{","return","mat4","(","cos","(","B",")",",","sin","(","B",")",",","a",",","a",",","-","sin","(","B",")",",","cos","(","B",")",",","a",",","a",",","a",",","a",",","b",",","a",",","a",",","a",",","a",",","b",")",";","}","c","E","(","in","c","D",")","{","return","c","(","D",".","a",",","D",".","b",",","normalize","(","D",".","c",")",",","normalize","(","D",".","d",")",",","normalize","(","D",".","e",")",",","D",".","f",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","L","(","vec4","F",")","{","vec3","G",";","float","H",",","I",",","J",";","H","=","F",".","x",";","I","=","F",".","y",";","J","=","F",".","w",";","G",".","x","=","(","H","+","J",")","/","2.0",";","G",".","y","=","(","I","+","J",")","/","2.0",";","G",".","z","=","J",";","return","G",";","}"]}]}}]},{type:"textline",tokens:["mat4","O","(","mat3","M",")","{","mat4","N",";","N","[","0","]","[","0","]","=","(","b","-","(","M","[","1","]","[","2","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")","+","M","[","2","]","[","0","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")",")","*","M","[","1","]","[","0","]",";","N","[","0","]","[","1","]","=","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")","+","M","[","2","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")","*","M","[","1","]","[","0","]",";","N","[","0","]","[","2","]","=","(","M","[","1","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","-","M","[","2","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")",")","*","M","[","1","]","[","0","]",";","N","[","0","]","[","3","]","=","a",";","N","[","1","]","[","0","]","=","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")","-","M","[","2","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")","*","M","[","1","]","[","0","]",";","N","[","1","]","[","1","]","=","(","b","-","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")","+","M","[","2","]","[","0","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")",")","*","M","[","1","]","[","0","]",";","N","[","1","]","[","2","]","=","(","M","[","1","]","[","2","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","+","M","[","2","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")",")","*","M","[","1","]","[","0","]",";","N","[","1","]","[","3","]","=","a",";","N","[","2","]","[","0","]","=","(","M","[","1","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","+","M","[","2","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")",")","*","M","[","1","]","[","0","]",";","N","[","2","]","[","1","]","=","(","M","[","1","]","[","2","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","-","M","[","2","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")",")","*","M","[","1","]","[","0","]",";","N","[","2","]","[","2","]","=","(","b","-","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")","+","M","[","1","]","[","2","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")",")",")","*","M","[","1","]","[","0","]",";","N","[","2","]","[","3","]","=","a",";","N","[","3","]","[","0","]","=","M","[","0","]","[","0","]",";","N","[","3","]","[","1","]","=","M","[","0","]","[","1","]",";","N","[","3","]","[","2","]","=","M","[","0","]","[","2","]",";","N","[","3","]","[","3","]","=","1.0",";","return","N",";","}"]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV_ORCO",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["3"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["3"]},{type:"define",name:"NO_SHADOWS",tokens:["1"]},{type:"define",name:"SHADOW_CASTING",tokens:["2"]},{type:"define",name:"SHADOW_MASK_GENERATION",tokens:["3"]},{type:"define",name:"SHADOW_MAPPING_OPAQUE",tokens:["4"]},{type:"define",name:"SHADOW_MAPPING_BLEND",tokens:["5"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"SPECULAR_BLINN",tokens:["4"]},{type:"define",name:"SPECULAR_TOON",tokens:["5"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]},{type:"define",name:"DIFFUSE_MINNAERT",tokens:["4"]},{type:"define",name:"DIFFUSE_TOON",tokens:["5"]},{type:"define",name:"MAPPING_TYPE_TEXTURE",tokens:["0.0"]},{type:"define",name:"MAPPING_TYPE_POINT",tokens:["1.0"]},{type:"define",name:"MAPPING_TYPE_VECTOR",tokens:["2.0"]},{type:"define",name:"MAPPING_TYPE_NORMAL",tokens:["3.0"]},{type:"define",name:"MIX",tokens:["0"]},{type:"define",name:"ADD",tokens:["1"]},{type:"define",name:"SUBTRACT",tokens:["2"]},{type:"define",name:"MULTIPLY",tokens:["3"]},{type:"define",name:"SCREEN",tokens:["4"]},{type:"define",name:"OVERLAY",tokens:["5"]},{type:"define",name:"DIFFERENCE",tokens:["6"]},{type:"define",name:"DIVIDE",tokens:["7"]},{type:"define",name:"DARKEN",tokens:["8"]},{type:"define",name:"LIGHTEN",tokens:["9"]},{type:"define",name:"HUE",tokens:["10"]},{type:"define",name:"SATURATION",tokens:["11"]},{type:"define",name:"VALUE",tokens:["12"]},{type:"define",name:"COLOR",tokens:["13"]},{type:"define",name:"SOFT_LIGHT",tokens:["14"]},{type:"define",name:"LINEAR_LIGHT",tokens:["15"]},{type:"define",name:"REFL_NONE",tokens:["0"]},{type:"define",name:"REFL_MIRRORMAP",tokens:["1"]},{type:"define",name:"REFL_PLANE",tokens:["2"]},{type:"define",name:"REFL_CUBE",tokens:["3"]},{type:"define",name:"INVERSE_QUADRATIC",tokens:["0"]},{type:"define",name:"LINEAR",tokens:["1"]},{type:"define",name:"QUADRATIC",tokens:["2"]},{type:"define",name:"HEMI",tokens:["1"]},{type:"define",name:"SPOT",tokens:["2"]},{type:"define",name:"POINT",tokens:["3"]},{type:"define",name:"SUN",tokens:["4"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","P","=","255.0",";","float","Q","=","0.0",";","float","R","=","1.0",";","vec4","V","(","const","in","float","S",")","{","vec4","T",",","U",";","T","=","vec4","(","P","*","P","*","P",",","P","*","P",",","P",",","R",")",";","U","=","vec4","(","Q",",","R","/","P",",","R","/","P",",","R","/","P",")",";","T","=","fract","(","S","*","T",")",";","T","-=","T",".","xxyz","*","U",";","return","T",";","}","float","Z","(","const","in","vec4","W",")","{","vec4","X",";","float","Y",";","X","=","vec4","(","R","/","(","P","*","P","*","P",")",",","R","/","(","P","*","P",")",",","R","/","P",",","R",")",";","Y","=","dot","(","W",",","X",")",";","return","Y",";","}","vec4","V","(","const","in","vec2","_",")","{","vec4","aa",";","vec2","ab",",","ac",";","ab","=","vec2","(","P",",","R",")",";","ac","=","vec2","(","Q",",","R","/","P",")",";","aa","=","fract","(","_",".","xxyy","*","ab",".","xyxy",")",";","aa","-=","aa",".","xxzz","*","ac",".","xyxy",";","if","(","_",".","r","==","R",")","aa",".","rg","=","vec2","(","Q",",","R",")",";","if","(","_",".","g","==","R",")","aa",".","ba","=","vec2","(","Q",",","R",")",";","return","aa",";","}","vec2","ag","(","const","in","vec4","ad",")","{","vec2","ae",",","af",";","af","=","vec2","(","R","/","P",",","R",")",";","ae",".","r","=","dot","(","ad",".","rg",",","af",")",";","ae",".","g","=","dot","(","ad",".","ba",",","af",")",";","return","ae",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","ah","=","0.0",";","float","ai","=","1.0",";","vec4","ak","(","vec4","aj",")","{","return","aj","-","floor","(","aj","*","(","ai","/","289.0",")",")","*","289.0",";","}","vec3","ak","(","vec3","al",")","{","return","al","-","floor","(","al","*","(","ai","/","289.0",")",")","*","289.0",";","}","vec2","ak","(","vec2","am",")","{","return","am","-","floor","(","am","*","(","ai","/","289.0",")",")","*","289.0",";","}","vec4","ao","(","vec4","an",")","{","return","an","-","floor","(","an","*","(","ai","/","7.0",")",")","*","7.0",";","}","vec4","aq","(","vec4","ap",")","{","return","ak","(","(","34.0","*","ap","+","5.0",")","*","ap",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","ay","(","vec2","ar",")","{","vec4","as",",","at",",","au",",","av",";","vec2","aw",",","ax",";","aw","=","ak","(","floor","(","ar",")",")",";","ax","=","fract","(","ar",")",";","as","=","ax",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","at","=","ax",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","au","=","aq","(","aw",".","x","+","vec4","(","ah",",","ai",",","ah",",","ai",")",")",";","au","=","aq","(","au","+","aw",".","y","+","vec4","(","ah",",","ah",",","ai",",","ai",")",")",";","av","=","ao","(","au",")","*","K","+","K2",";","au","=","ao","(","floor","(","au","*","K",")",")","*","K","+","K2",";","av","=","as","+","JITTER","*","av",";","au","=","at","+","JITTER","*","au",";","au","=","av","*","av","+","au","*","au",";"]},{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"textline",tokens:["au",".","xy","=","min","(","au",".","xy",",","au",".","zw",")",";","au",".","x","=","min","(","au",".","x",",","au",".","y",")",";","return","au",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["au",".","xy","=","(","au",".","x","<","au",".","y",")","?","au",".","xy",":","au",".","yx",";","au",".","xz","=","(","au",".","x","<","au",".","z",")","?","au",".","xz",":","au",".","zx",";","au",".","xw","=","(","au",".","x","<","au",".","w",")","?","au",".","xw",":","au",".","wx",";","au",".","y","=","min","(","au",".","y",",","au",".","z",")",";","au",".","y","=","min","(","au",".","y",",","au",".","w",")",";","return","sqrt","(","au",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","aH","(","vec2","az",",","float","aA",")","{","vec4","aB",",","aC",",","aD",",","aE",";","vec2","aF",",","aG",";","aF","=","ak","(","floor","(","az",")",")",";","aG","=","fract","(","az",")",";","aB","=","aG",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","aC","=","aG",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","aD","=","aq","(","aF",".","x","+","vec4","(","ah",",","ai",",","ah",",","ai",")",")",";","aD","=","aq","(","aD","+","aF",".","y","+","vec4","(","ah",",","ah",",","ai",",","ai",")",")",";","aE","=","ao","(","aD",")","*","K","+","K2",";","aD","=","ao","(","floor","(","aD","*","K",")",")","*","K","+","K2",";","aE","=","aB","+","JITTER","*","aE",";","aD","=","aC","+","JITTER","*","aD",";","aC","=","aE","*","aE","+","aD","*","aD",";","aE","+=","aA",";","aD","+=","aA",";","aB","=","aE","*","aE","+","aD","*","aD",";","aE","+=","aA",";","aD","+=","aA",";","aD","=","aE","*","aE","+","aD","*","aD",";","aC",".","xy","=","min","(","aC",".","xy",",","aC",".","zw",")",";","aC",".","x","=","min","(","aC",".","x",",","aC",".","y",")",";","aB",".","xy","=","min","(","aB",".","xy",",","aB",".","zw",")",";","aB",".","x","=","min","(","aB",".","x",",","aB",".","y",")",";","aD",".","xy","=","min","(","aD",".","xy",",","aD",".","zw",")",";","aD",".","x","=","min","(","aD",".","x",",","aD",".","y",")",";","return","vec3","(","aC",".","x",",","aB",".","x",",","aD",".","x",")",";","}","vec3","aJ","(","vec3","aI",")","{","return","ak","(","(","(","aI","*","34.0",")","+","ai",")","*","aI",")",";","}","float","aU","(","vec2","aK",")","{","vec3","aL",",","aM",",","aN",",","aO",";","vec4","aP",";","vec2","aQ",",","aR",",","aS",";","const","vec4","aT","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","aQ","=","floor","(","aK","+","dot","(","aK",",","aT",".","yy",")",")",";","aR","=","aK","-","aQ","+","dot","(","aQ",",","aT",".","xx",")",";","aS","=","(","aR",".","x",">","aR",".","y",")","?","vec2","(","ai",",","ah",")",":","vec2","(","ah",",","ai",")",";","aP","=","aR",".","xyxy","+","aT",".","xxzz",";","aP",".","xy","-=","aS",";","aQ","=","ak","(","aQ",")",";","aL","=","aJ","(","aJ","(","aQ",".","y","+","vec3","(","ah",",","aS",".","y",",","ai",")",")","+","aQ",".","x","+","vec3","(","ah",",","aS",".","x",",","ai",")",")",";","aM","=","max","(","0.5","-","vec3","(","dot","(","aR",",","aR",")",",","dot","(","aP",".","xy",",","aP",".","xy",")",",","dot","(","aP",".","zw",",","aP",".","zw",")",")",",","ah",")",";","aM","=","aM","*","aM",";","aM","=","aM","*","aM",";","aL","=","2.0","*","fract","(","aL","*","aT",".","www",")","-","ai",";","aN","=","abs","(","aL",")","-","0.5",";","aO","=","floor","(","aL","+","0.5",")",";","aO","=","aL","-","aO",";","aM","*=","1.79284291400159","-","0.85373472095314","*","(","aO","*","aO","+","aN","*","aN",")",";","aL",".","x","=","aO",".","x","*","aR",".","x","+","aN",".","x","*","aR",".","y",";","aL",".","yz","=","aO",".","yz","*","aP",".","xz","+","aN",".","yz","*","aP",".","yw",";","return","130.0","*","dot","(","aM",",","aL",")",";","}","vec2","aY","(","vec2","aV",")","{","float","aW",",","aX",";","aW","=","dot","(","aV",",","vec2","(","12.9898",",","78.233",")",")",";","aX","=","dot","(","aV",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","aW","=","fract","(","sin","(","aW",")","*","43758.5453",")","*","2.0","-","ai",";","aX","=","fract","(","sin","(","aX",")","*","43758.5453",")","*","2.0","-","ai",";","return","vec2","(","aW",",","aX",")",";","}"]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"var",name:"SUN_NUM",tokens:["0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","bp","(","inout","vec3","aZ",",","float","a_",",","float","ba",",","vec4","bb",",","vec3","bc",",","vec3","bd",",","vec3","be",",","vec4","bf",",","vec3","bg",",","float","bh",")","{","float","bi",",","bj",",","bk",";","vec2","bl",",","bm",";","vec3","bn",";","vec4","bo",";","if","(","bh",">","CAUSTICS_VIEW_DISTANCE",")","return",";","bo","=","bf",";","bn","=","bg","+","bc",";","bn",".","xz","=","10.0","*","sin","(","0.1","*","bn",".","xz",")",";","bn","=","bn","+","2.0","*","cross","(","-","bo",".","xyz",",","cross","(","-","bo",".","xyz",",","bn",")","+","bo",".","w","*","bn",")",";","bl","=","bn",".","xz",";","bn","=","bd",";","bi","=","max","(","dot","(","bc",",","bn",")",",","0.0",")",";","bj","=","0.025",";","bm","=","CAUST_SPEED","*","ba",";","bl",".","s","+=","0.25","*","sin","(","dot","(","bg","+","ba",",","vec3","(","1.0",")",")",")",";","bl",".","t","+=","0.35","*","(","-","sin","(","dot","(","bg","-","ba",",","vec3","(","-","0.7",")",")",")",")",";","bl",".","st","+=","0.15","*","cos","(","4.0","*","a_","-","bm",".","x",")","+","1.5","*","sin","(","a_","-","0.3","*","bm",".","y",")",";","bk","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","a_",",","0.0",")",")",";","bn","=","aH","(","(","bl","/","bk",")",",","bj",")",";","bn","*=","CAUST_BRIGHT",";","bn","*=","bn",";","bj","=","min","(","0.25","*","a_",",","-","a_",")","+","1.0",";","bj","=","max","(","bj",",","0.0",")",";","bi","=","bb","[","SUN_NUM","]","*","bi",";","bk","=","max","(","sign","(","a_",")",",","0.0",")",";","bi","=","bi","+","max","(","0.5","*","sign","(","-","bc",".","y",")","*","bk",",","0.0",")",";","bi","=","min","(","bi",",","1.0",")",";","aZ","+=","be","*","bn","*","bj","*","bi",";","}"]}]},exports["include/color_util.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","br","(","inout","vec3","bq",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["bq","=","max","(","vec3","(","0.0",")",",","bq",")",";","bq","=","pow","(","bq",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","br","(","inout","float","bs",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["bs","=","pow","(","max","(","0.0",",","bs",")",",","2.2",")",";"]}]}}]},{type:"textline",tokens:["}","void","bu","(","inout","vec3","bt",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["bt","=","max","(","vec3","(","0.0",")",",","bt",")",";","bt","=","pow","(","bt",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","bx","(","inout","vec3","bv",",","in","float","bw",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bv","=","bv","*","bw",";"]}]}}]},{type:"textline",tokens:["}","float","bB","(","vec4","by",")","{","float","bz",";","vec3","bA",";","bA","=","vec3","(","0.299",",","0.587",",","0.114",")",";","bz","=","dot","(","by",".","rgb",",","bA",")",";","return","bz",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"CSM_BLEND_BETWEEN_CASCADES",tokens:["1.0"]},{type:"var",name:"CSM_FADE_LAST_CASCADE",tokens:["1.0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","bN","=","0.1",";","const","float","bO","=","0.1",";","const","float","bP","=","-","0.01",";","const","float","bQ","=","0.05",";","vec4","bR","=","vec4","(","0.14383161",",","0.34495938",",","-","0.38277543",",","-","0.26496911",")",";","vec4","bS","=","vec4","(","0.53742981",",","0.19984126",",","0.79197514",",","-","0.094184101",")",";","vec4","bT","=","vec4","(","-","0.94201624",",","-","0.91588581",",","-","0.2418884",",","0.44323325",")",";","vec4","bU","=","vec4","(","-","0.81544232",",","0.94558609",",","-","0.81409955",",","0.97484398",")",";","vec4","bV","=","vec4","(","-","0.1410079",",","0.2938776",",","0.27676845",",","-","0.41893023",")",";","vec4","bW","=","vec4","(","-","0.4737342",",","0.78641367",",","0.19090188",",","-","0.9293887",")",";","vec4","bX","=","vec4","(","-","0.39906216",",","0.45771432",",","0.99706507",",","-","0.97511554",")",";","vec4","bY","=","vec4","(","-","0.87912464",",","-","0.76890725",",","0.9143759",",","0.7564837",")",";","bool","ca","(","vec2","bZ",",","float","b_",")","{","return","all","(","lessThanEqual","(","bZ",",","vec2","(","1.0","+","b_",")",")",")","&&","all","(","greaterThanEqual","(","bZ",",","vec2","(","0.0","-","b_",")",")",")",";","}","float","cj","(","float","cb",",","float","cc",",","mat2","cd",",","vec3","ce",",","float","cf",",","PRECISION","sampler2D","cg",")","{","vec2","ch",",","ci",";","ci",".","x","=","cb",";","ci",".","y","=","cc",";","ci","=","cd","*","ci",";","ch","=","ce",".","xy","+","ci","*","cf","/","SHADOW_TEX_RES",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","ca","(","ch",",","bP",")",")","return","1.0",";","else"]}]}}]},{type:"textline",tokens:["return","step","(","ce",".","z",",","texture2D","(","cg",",","ch",")",".","r",")",";","}","float","cs","(","vec3","ck",",","PRECISION","sampler2D","cl",",","float","cm",")","{","mat2","cn",";","float","co",",","cp",",","cq",";","co","=","0.0",";","ck",".","z","=","clamp","(","ck",".","z",",","0.0",",","1.0",")",";","cp","=","aY","(","ck",".","xy",")",".","x","*","M_PI",";","cq","=","cos","(","cp",")",";","cp","=","sin","(","cp",")",";","cn","=","mat2","(","cq",",","cp",",","-","cp",",","cq",")",";","for","(","int","cr","=","0",";","cr","<","4",";","cr","++",")","{","co","+=","cj","(","bR","[","cr","]",",","bV","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","co","+=","cj","(","bS","[","cr","]",",","bW","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","co","+=","cj","(","bT","[","cr","]",",","bX","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","co","+=","cj","(","bU","[","cr","]",",","bY","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","}","return","clamp","(","co","/","16.0",",","0.0",",","1.0",")",";","}","float","cH","(","vec3","ct",",","PRECISION","sampler2D","cu",",","vec3","cv",",","PRECISION","sampler2D","cw",",","float","cx",",","float","cy",",","float","cz",")","{","mat2","cA",";","float","cB",",","cC",",","cD",",","cE",";","ct",".","z","=","clamp","(","ct",".","z",",","0.0",",","1.0",")",";","cv",".","z","=","clamp","(","cv",".","z",",","0.0",",","1.0",")",";","cB","=","0.0",";","cC","=","0.0",";","cD","=","aY","(","ct",".","xy",")",".","x","*","M_PI",";","cE","=","cos","(","cD",")",";","cD","=","sin","(","cD",")",";","cA","=","mat2","(","cE",",","cD",",","-","cD",",","cE",")",";","for","(","int","cF","=","0",";","cF","<","4",";","cF","++",")","{","cB","+=","cj","(","bR","[","cF","]",",","bV","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","cB","+=","cj","(","bS","[","cF","]",",","bW","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","cB","+=","cj","(","bT","[","cF","]",",","bX","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","cB","+=","cj","(","bU","[","cF","]",",","bY","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","}","for","(","int","cG","=","0",";","cG","<","4",";","cG","++",")","{","cC","+=","cj","(","bR","[","cG","]",",","bV","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","cC","+=","cj","(","bS","[","cG","]",",","bW","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","cC","+=","cj","(","bT","[","cG","]",",","bX","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","cC","+=","cj","(","bU","[","cG","]",",","bY","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","}","cB","=","mix","(","cB",",","cC",",","cz",")",";","cB","/=","16.0",";","return","clamp","(","cB",",","0.0",",","1.0",")",";","}","float","cL","(","vec2","cI",")","{","float","cJ",",","cK",";","cJ","=","min","(","cI",".","x",",","cI",".","y",")",";","cK","=","min","(","1.0","-","cI",".","x",",","1.0","-","cI",".","y",")",";","return","min","(","cJ",",","cK",")",";","}","float","cO","(","float","cM",",","float","cN",")","{","if","(","cN",">=","0.0","&&","cN","<=","bO",")","cM","=","(","cM","-","1.0",")","/","bO","*","cN","+","1.0",";","return","cM",";","}","float","cZ","(","vec3","cP",",","vec3","cQ",",","PRECISION","sampler2D","cR",",","PRECISION","sampler2D","cS",",","float","cT",",","float","cU",",","float","cV",",","float","cW",")","{","float","cX",",","cY",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_BLEND_BETWEEN_CASCADES"],group:{type:"group",parts:[{type:"textline",tokens:["cY","=","cL","(","cP",".","xy",")",";","if","(","-","cW",">","cV","&&","cY",">=","0.0","&&","cY","<=","bN","&&","ca","(","cQ",".","xy",",","0.0",")",")","{","cY","=","1.0","-","cY","/","bN",";","cX","=","cH","(","cP",",","cR",",","cQ",",","cS",",","cT",",","cU",",","cY",")",";","}","else"]}]}}]},{type:"textline",tokens:["cX","=","cs","(","cP",",","cR",",","cT",")",";","return","cX",";","}","float","dg","(","vec3","c_",",","PRECISION","sampler2D","da",",","float","db",",","float","dc",",","float","dd",")","{","float","de",",","df",";","de","=","cs","(","c_",",","da",",","db",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_FADE_LAST_CASCADE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","-","dd",">","dc",")","{","df","=","cL","(","c_",".","xy",")",";","de","=","cO","(","de",",","df",")",";","}"]}]}}]},{type:"textline",tokens:["return","de",";","}","vec4","dr","(","float","dh",")","{","vec3","di",",","dj",",","dk",",","dl",";","float","dm",",","dn",",","dp",",","dq",";","dm","=","1.0",";","di","=","bI",".","xyz","/","bI",".","w",";","if","(","bI",".","w","<","0.0",")","di",".","z","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dj","=","bJ",".","xyz","/","bJ",".","w",";","if","(","bJ",".","w","<","0.0",")","dj",".","z","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dk","=","bK",".","xyz","/","bK",".","w",";","if","(","bK",".","w","<","0.0",")","dk",".","z","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dl","=","bL",".","xyz","/","bL",".","w",";","if","(","bL",".","w","<","0.0",")","dl",".","z","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ca","(","di",".","xy",",","0.0",")",")","{","dm","=","cZ","(","di",",","dj",",","u_shadow_map0",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","0","]",",","dh",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","ca","(","di",".","xy",",","bQ",")",")","{","dm","=","dg","(","di",",","u_shadow_map0",",","u_pcf_blur_radii","[","0","]",",","u_csm_center_dists","[","0","]",",","dh",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ca","(","dj",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["dm","=","cZ","(","dj",",","dk",",","u_shadow_map1",",","u_shadow_map2",",","u_pcf_blur_radii","[","1","]",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","1","]",",","dh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dm","=","dg","(","dj",",","u_shadow_map1",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","1","]",",","dh",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ca","(","dk",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["dm","=","cZ","(","dk",",","dl",",","u_shadow_map2",",","u_shadow_map3",",","u_pcf_blur_radii","[","2","]",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","2","]",",","dh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dm","=","dg","(","dk",",","u_shadow_map2",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","2","]",",","dh",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ca","(","dl",".","xy",",","0.0",")",")","dm","=","dg","(","dl",",","u_shadow_map3",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","3","]",",","dh",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dn","=","cs","(","dj",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dn","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dp","=","cs","(","dk",",","u_shadow_map2",",","u_pcf_blur_radii","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dp","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dq","=","cs","(","dl",",","u_shadow_map3",",","u_pcf_blur_radii","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dq","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","vec4","(","dm",",","dn",",","dp",",","dq",")",";","}"]}]}}]},{type:"textline",tokens:["vec4","du","(","inout","vec3","ds",")","{","vec4","dt",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dt","=","texture2DProj","(","u_shadow_mask",",","bG",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",3,{type:"l_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ds","*=","dt",".","a",";"]}]}}]},{type:"textline",tokens:["return","dt",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dt","=","dr","(","bD",".","z",")",";","return","dt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec4","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","dB","(","in","vec3","dv",",","vec3","dw",",","float","dx",",","float","dy",")","{","float","dz",";","vec3","dA",";","dA","=","normalize","(","dw","+","dv",")",";","dz","=","1.0","-","dot","(","dv",",","dA",")",";","dz","=","dy","+","(","1.0","-","dy",")","*","pow","(","dz",",","dx",")",";","return","dz",";","}","void","dP","(","inout","vec3","dC",",","vec3","dD",",","vec3","dE",",","float","dF",",","mat4","dG",")","{","vec2","dH",",","dI",";","float","dJ",",","dK",",","dL",";","vec3","dM",",","dN",",","dO",";","dM","=","reflect","(","-","dD",",","dE",")",";","dJ","=","u_fresnel_params","[","2","]",";","dK","=","u_fresnel_params","[","3","]",";","dL","=","1.0",";","if","(","dJ","!=","0.0",")","dL","=","dB","(","dD",",","dM",",","dJ",",","dK",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dN","=","textureCube","(","u_cube_reflection",",","dM",")",".","xyz",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["dO","=","u_refl_plane",".","xyz","*","dot","(","dE",",","u_refl_plane",".","xyz",")",";","dO","=","dE","-","dO",";","dH","=","(","dG","*","vec4","(","dO",",","0.0",")",")",".","xy",";","dI","=","bG",".","xy","/","bG",".","z",";","dI","+=","dH","*","REFL_BUMP",";","dN","=","texture2D","(","u_plane_reflection",",","dI",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dN","=","vec3","(","1.0",")",";","dF","=","0.0",";"]}]}}]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dN","=","textureCube","(","u_mirrormap",",","dM",")",".","xyz",";","dF","=","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["br","(","dN",".","rgb",")",";","dC","=","mix","(","dC",",","dN",",","dF","*","dL",")",";","}"]}]}}]}]},exports["include/environment.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec3","dS","(","vec3","dQ",")","{","float","dR",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["return","textureCube","(","u_sky_texture",",","dQ",")",".","rgb",";"]}]}},{type:"elif",expression:["SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["dR","=","0.5","*","dQ",".","y","+","0.5",";","return","mix","(","u_horizon_color",",","u_zenith_color",",","dR",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["float","dY","(","in","float","dT",",","inout","vec2","dU",",","in","vec2","dV",")","{","float","dW",";","vec4","dX",";","dX","=","texture2D","(","u_scene_depth",",","dU",")",";","dW","=","Z","(","dX",")",";","if","(","dW","<","bH",")","{","dU","=","dV",";","return","dT",";","}","else","{","return","dW",";","}","return","dT",";","}"]}]}}]},{type:"textline",tokens:["vec3","ef","(","in","vec3","dZ",",","in","vec2","d_",")","{","vec3","ea",";","float","eb",";","vec4","ec",";","vec2","ed",",","ee",";","ed","=","dZ",".","xy","/","dZ",".","z",";","ee","=","ed","+","d_",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["ec","=","texture2DProj","(","u_scene_depth",",","dZ",")",";","eb","=","Z","(","ec",")",";","dY","(","eb",",","ee",",","ed",")",";"]}]}}]},{type:"textline",tokens:["ea","=","texture2D","(","u_refractmap",",","ee",")",".","rgb",";","br","(","ea",")",";","return","ea",";","}"]}]}}]}]},exports["include/nodes.glslf"] = {type:"group",parts:[{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NODE_TEX_ROW",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eg",";"]}]}}]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","eh","=","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","el","(","in","vec3","ei",",","in","float","ej",")","{","vec3","ek",";","ek","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["ek","=","ef","(","bG",",","ei",".","xz","*","ej",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ek","=","texture2D","(","u_refractmap",",","bG",".","xy","/","bG",".","z",")",".","rgb",";","br","(","ek",")",";"]}]}}]},{type:"textline",tokens:["return","ek",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eq","(","vec3","em",")","{","float","en",",","eo",";","vec4","ep",";","ep","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","ep","=","mix","(","vec4","(","em",".","bg",",","ep",".","wz",")",",","vec4","(","em",".","gb",",","ep",".","xy",")",",","step","(","em",".","b",",","em",".","g",")",")",";","ep","=","mix","(","vec4","(","ep",".","xyw",",","em",".","r",")",",","vec4","(","em",".","r",",","ep",".","yzx",")",",","step","(","ep",".","x",",","em",".","r",")",")",";","en","=","ep",".","x","-","min","(","ep",".","w",",","ep",".","y",")",";","eo","=","1.0e-10",";","return","vec3","(","abs","(","ep",".","z","+","(","ep",".","w","-","ep",".","y",")","/","(","6.0","*","en","+","eo",")",")",",","en","/","(","ep",".","x","+","eo",")",",","ep",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eu","(","vec3","er",")","{","vec3","es",";","vec4","et",";","et","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","es","=","abs","(","fract","(","vec3","(","er",".","r",",","er",".","r",",","er",".","r",")","+","et",".","xyz",")","*","6.0","-","et",".","www",")",";","return","er",".","b","*","mix","(","et",".","xxx",",","clamp","(","es","-","et",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","er",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ew","(","vec2","ev",")","{","return","vec3","(","ev","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ey","(","vec3","ex",")","{","return","vec2","(","ex",".","xy","*","eh","+","vec2","(","eh",",","eh",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"fm",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"fn",qualifier:["float"],is_optional:true},{type:"node_out",name:"fo",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fm"],statements:[{type:"textline",tokens:["fm","=","normalize","(","fd",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fn"],statements:[{type:"textline",tokens:["fn","=","abs","(","fd",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fo"],statements:[{type:"textline",tokens:["fo","=","length","(","fd",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"fp",qualifier:["float"],is_optional:false},{type:"node_in",name:"fq",qualifier:["float"],is_optional:false},{type:"node_in",name:"fr",qualifier:["float"],is_optional:false},{type:"node_out",name:"fs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fs","=","vec3","(","fp",",","fq",",","fr",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"ft",qualifier:["float"],is_optional:false},{type:"node_in",name:"fu",qualifier:["float"],is_optional:false},{type:"node_in",name:"fv",qualifier:["float"],is_optional:false},{type:"node_out",name:"fw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fw","=","eu","(","vec3","(","ft",",","fu",",","fv",")",")",";"]}]},{type:"node",name:"EMPTY_UV",declarations:[{type:"node_out",name:"fx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fx","=","vec3","(","-","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"EMPTY_VC",declarations:[{type:"node_out",name:"fy",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fy","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"fz",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"ez",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["fz","=","ew","(","ez",")",";"]}]},{type:"node",name:"GEOMETRY_OR",declarations:[{type:"node_out",name:"fA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fA","=","2.0","*","eg","-","vec3","(","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"fB",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eA",qualifier:["varying","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fB","=","eA",";","br","(","fB",")",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"fC",qualifier:["float"],is_optional:false},{type:"node_param",name:"eB",qualifier:["varying","float"],is_optional:false}],statements:[{type:"textline",tokens:["fC","=","eB",";","br","(","fC",")",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"fD",qualifier:["float"],is_optional:false},{type:"node_out",name:"fE",qualifier:["float"],is_optional:false},{type:"node_param",name:"eC",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["fD","=","eC","[","0","]",";","fE","=","eC","[","1","]",";","br","(","fD",")",";","br","(","fE",")",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"fF",qualifier:["float"],is_optional:false},{type:"node_out",name:"fG",qualifier:["float"],is_optional:false},{type:"node_out",name:"fH",qualifier:["float"],is_optional:false},{type:"node_param",name:"eD",qualifier:["varying","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fF","=","eD","[","0","]",";","fG","=","eD","[","1","]",";","fH","=","eD","[","2","]",";","br","(","fF",")",";","br","(","fG",")",";","br","(","fH",")",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"fI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fI","=","fg",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"fJ",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["INVERT_FRONTFACING"],statements:[{type:"textline",tokens:["fJ","=","(","gl_FrontFacing",")","?","ZERO_VALUE_NODES",":","UNITY_VALUE_NODES",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["fJ","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"fK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fK","=","eM",";"]}]},{type:"node",name:"GEOMETRY_LO",declarations:[{type:"node_out",name:"fL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fL","[","0","]","=","fd","[","0","]",";","fL","[","1","]","=","fd","[","1","]",";","fL","[","2","]","=","fd","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"fM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fM","=","vec3","(","fh",".","r",",","-","fh",".","b",",","fh",".","g",")",";"]}]},{type:"node",name:"NEW_GEOMETRY",declarations:[{type:"node_out",name:"fN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fT",qualifier:["float"],is_optional:false},{type:"node_out",name:"fU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["fN","=","vec3","(","ZERO_VALUE_NODES",")",";","fO","=","vec3","(","ZERO_VALUE_NODES",")",";","fP","=","vec3","(","ZERO_VALUE_NODES",")",";","fQ","=","vec3","(","ZERO_VALUE_NODES",")",";","fR","=","vec3","(","ZERO_VALUE_NODES",")",";","fS","=","vec3","(","ZERO_VALUE_NODES",")",";","fT","=","ZERO_VALUE_NODES",";","fU","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"fV",qualifier:["float"],is_optional:false},{type:"node_in",name:"fW",qualifier:["float"],is_optional:false},{type:"node_in",name:"fX",qualifier:["float"],is_optional:false},{type:"node_in",name:"fY",qualifier:["float"],is_optional:false},{type:"node_in",name:"fZ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"f_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fj","=","eq","(","fZ",")",";","fj","[","0","]","+=","(","fV","-","eh",")",";","if","(","fj","[","0","]",">","UNITY_VALUE_NODES",")","fj","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","fj","[","0","]","<","ZERO_VALUE_NODES",")","fj","[","0","]","+=","UNITY_VALUE_NODES",";","fj","*=","vec3","(","UNITY_VALUE_NODES",",","fW",",","fX",")",";","fj","=","mix","(","vec3","(","UNITY_VALUE_NODES",")",",","mix","(","vec3","(","ZERO_VALUE_NODES",")",",","fj",",","step","(","vec3","(","ZERO_VALUE_NODES",")",",","fj",")",")",",","step","(","fj",",","vec3","(","UNITY_VALUE_NODES",")",")",")",";","f_","=","mix","(","fZ",",","eu","(","fj",")",",","fY",")",";"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"ga",qualifier:["float"],is_optional:false},{type:"node_in",name:"gb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gc","=","mix","(","gb",",","vec3","(","UNITY_VALUE_NODES",")","-","gb",",","ga",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"gd",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"ge",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gf",qualifier:["float"],is_optional:false},{type:"node_out",name:"gg",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gd"],statements:[{type:"textline",tokens:["gd","=","u_lamp_light_color_intensities","[","LAMP_INDEX","]",";"]}]}]},{type:"textline",tokens:["fe","=","u_lamp_light_factors","[","LAMP_INDEX","]",";","fj","=","u_lamp_light_directions","[","LAMP_INDEX","]",";","fk","=","u_lamp_light_positions","[","LAMP_INDEX","]",";","eX","=","fe",".","z",";","if","(","eX","!=","-","UNITY_VALUE_NODES",")","{"]},{type:"textline",tokens:["ge","=","fk","-","bC",";","gf","=","length","(","ge",")",";","ge","=","normalize","(","ge",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gg"],statements:[{type:"textline",tokens:["gg","=","eX","/","(","eX","+","gf","*","gf",")",";","eX","=","fe",".","x",";","eY","=","fe",".","y",";","if","(","eX",">","-","UNITY_VALUE_NODES",")","{","eZ","=","dot","(","ge",",","fj",")",";","eZ","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","eZ","-","eX",")","/","eY",")",";","gg","*=","eZ",";","}"]}]}]},{type:"textline",tokens:["}","else","{"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ge"],statements:[{type:"textline",tokens:["ge","=","fj",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gf"],statements:[{type:"textline",tokens:["gf","=","length","(","fk","-","bC",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gg"],statements:[{type:"textline",tokens:["gg","=","UNITY_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"gh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gi",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"gj",qualifier:["float"],is_optional:true},{type:"node_param",name:"eE",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gi"],statements:[{type:"textline",tokens:["gi","=","eE",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gj"],statements:[{type:"textline",tokens:["gj","=","-","dot","(","gh",",","eE",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"gk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gl",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gl","=","-","(","eN","*","vec4","(","gk",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"BSDF_ANISOTROPIC",declarations:[{type:"node_in",name:"gm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gn",qualifier:["float"],is_optional:false},{type:"node_in",name:"go",qualifier:["float"],is_optional:false},{type:"node_in",name:"gp",qualifier:["float"],is_optional:false},{type:"node_in",name:"gq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gs","=","gm",";"]},{type:"textline",tokens:["gn",";","go",";","gp",";","gq",";","gr",";"]}]},{type:"node",name:"BSDF_DIFFUSE",declarations:[{type:"node_in",name:"gt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gu",qualifier:["float"],is_optional:false},{type:"node_in",name:"gv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gw","=","gt",";"]},{type:"textline",tokens:["gu",";","gv",";"]}]},{type:"node",name:"BSDF_GLASS",declarations:[{type:"node_in",name:"gx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gy",qualifier:["float"],is_optional:false},{type:"node_in",name:"gz",qualifier:["float"],is_optional:false},{type:"node_in",name:"gA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gB","=","gx",";"]},{type:"textline",tokens:["gy",";","gz",";","gA",";"]}]},{type:"node",name:"BSDF_GLOSSY",declarations:[{type:"node_in",name:"gC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gD",qualifier:["float"],is_optional:false},{type:"node_in",name:"gE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gF","=","gC",";"]},{type:"textline",tokens:["gD",";","gE",";"]}]},{type:"node",name:"BSDF_HAIR",declarations:[{type:"node_in",name:"gG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gH",qualifier:["float"],is_optional:false},{type:"node_in",name:"gI",qualifier:["float"],is_optional:false},{type:"node_in",name:"gJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"gK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gK","=","gG",";"]},{type:"textline",tokens:["gH",";","gI",";","gJ",";"]}]},{type:"node",name:"BSDF_TRANSPARENT",declarations:[{type:"node_in",name:"gL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gM","=","gL",";"]}]},{type:"node",name:"BSDF_TRANSLUCENT",declarations:[{type:"node_in",name:"gN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gP","=","gN",";"]},{type:"textline",tokens:["gO",";"]}]},{type:"node",name:"BSDF_REFRACTION",declarations:[{type:"node_in",name:"gQ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gR",qualifier:["float"],is_optional:false},{type:"node_in",name:"gS",qualifier:["float"],is_optional:false},{type:"node_in",name:"gT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gU","[","0","]","=","gU","[","1","]","=","gU","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["gQ",";","gR",";","gS",";","gT",";"]}]},{type:"node",name:"BSDF_TOON",declarations:[{type:"node_in",name:"gV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gW",qualifier:["float"],is_optional:false},{type:"node_in",name:"gX",qualifier:["float"],is_optional:false},{type:"node_in",name:"gY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gZ","=","gV",";"]},{type:"textline",tokens:["gW",";","gX",";","gY",";"]}]},{type:"node",name:"BSDF_VELVET",declarations:[{type:"node_in",name:"g_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ha",qualifier:["float"],is_optional:false},{type:"node_in",name:"hb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hc","=","g_",";"]},{type:"textline",tokens:["ha",";","hb",";"]}]},{type:"node",name:"SUBSURFACE_SCATTERING",declarations:[{type:"node_in",name:"hd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"he",qualifier:["float"],is_optional:false},{type:"node_in",name:"hf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hg",qualifier:["float"],is_optional:false},{type:"node_in",name:"hh",qualifier:["float"],is_optional:false},{type:"node_in",name:"hi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hj","[","0","]","=","hj","[","1","]","=","hj","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hd",";","hf",";","hg",";","hh",";","hi",";","he",";"]}]},{type:"node",name:"EMISSION",declarations:[{type:"node_in",name:"hk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hl",qualifier:["float"],is_optional:false},{type:"node_out",name:"hm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hm","=","hk",";"]},{type:"textline",tokens:["hl",";"]}]},{type:"node",name:"AMBIENT_OCCLUSION",declarations:[{type:"node_in",name:"hn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ho",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ho","[","0","]","=","ho","[","1","]","=","ho","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hn",";"]}]},{type:"node",name:"HOLDOUT",declarations:[{type:"node_out",name:"hp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hp","[","0","]","=","hp","[","1","]","=","hp","[","2","]","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"VOLUME_ABSORPTION",declarations:[{type:"node_in",name:"hq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hr",qualifier:["float"],is_optional:false},{type:"node_out",name:"hs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hs","[","0","]","=","hs","[","1","]","=","hs","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hq",";","hr",";"]}]},{type:"node",name:"VOLUME_SCATTER",declarations:[{type:"node_in",name:"ht",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hu",qualifier:["float"],is_optional:false},{type:"node_in",name:"hv",qualifier:["float"],is_optional:false},{type:"node_out",name:"hw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hw","[","0","]","=","hw","[","1","]","=","hw","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ht",";","hu",";","hv",";"]}]},{type:"node",name:"BUMP",declarations:[{type:"node_in",name:"hx",qualifier:["float"],is_optional:false},{type:"node_in",name:"hy",qualifier:["float"],is_optional:false},{type:"node_in",name:"hz",qualifier:["float"],is_optional:false},{type:"node_in",name:"hA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hB","=","hA",";"]},{type:"textline",tokens:["hx",";","hy",";","hz",";"]}]},{type:"node",name:"NORMAL_MAP",declarations:[{type:"node_in",name:"hC",qualifier:["float"],is_optional:false},{type:"node_in",name:"hD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hE","=","hD",";"]},{type:"textline",tokens:["hC",";"]}]},{type:"node",name:"VECT_TRANSFORM",declarations:[{type:"node_in",name:"hF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hG","[","0","]","=","hG","[","1","]","=","hG","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hF",";"]}]},{type:"node",name:"BLACKBODY",declarations:[{type:"node_in",name:"hH",qualifier:["float"],is_optional:false},{type:"node_out",name:"hI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hI","[","0","]","=","hI","[","1","]","=","hI","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hH",";"]}]},{type:"node",name:"WAVELENGTH",declarations:[{type:"node_in",name:"hJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"hK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hK","[","0","]","=","hK","[","1","]","=","hK","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hJ",";"]}]},{type:"node",name:"SEPXYZ",declarations:[{type:"node_in",name:"hL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hM",qualifier:["float"],is_optional:false},{type:"node_out",name:"hN",qualifier:["float"],is_optional:false},{type:"node_out",name:"hO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["hM","=","hL","[","0","]",";","hN","=","hL","[","1","]",";","hO","=","hL","[","2","]",";"]}]},{type:"node",name:"COMBXYZ",declarations:[{type:"node_in",name:"hP",qualifier:["float"],is_optional:false},{type:"node_in",name:"hQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"hR",qualifier:["float"],is_optional:false},{type:"node_out",name:"hS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hS","[","0","]","=","hP",";","hS","[","1","]","=","hQ",";","hS","[","2","]","=","hR",";"]}]},{type:"node",name:"BRIGHTCONTRAST",declarations:[{type:"node_in",name:"hT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hU",qualifier:["float"],is_optional:false},{type:"node_in",name:"hV",qualifier:["float"],is_optional:false},{type:"node_out",name:"hW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","hU","-","hV","*","eh",";","hW","=","max","(","(","UNITY_VALUE_NODES","+","hV",")","*","hT","+","eZ",",","vec3","(","ZERO_VALUE_NODES",")",")",";"]}]},{type:"node",name:"LIGHT_FALLOFF",declarations:[{type:"node_in",name:"hX",qualifier:["float"],is_optional:false},{type:"node_in",name:"hY",qualifier:["float"],is_optional:false},{type:"node_out",name:"hZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"h_",qualifier:["float"],is_optional:false},{type:"node_out",name:"ia",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["hZ","=","h_","=","ia","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hX",";","hY",";"]}]},{type:"node",name:"TEX_IMAGE",declarations:[{type:"node_in",name:"ib",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ic",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"id",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ic","[","0","]","=","ic","[","1","]","=","ic","[","2","]","=","ZERO_VALUE_NODES",";","id","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["ib",";"]}]},{type:"node",name:"TEX_ENVIRONMENT",declarations:[{type:"node_in",name:"ie",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ig",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ig","[","0","]","=","ig","[","1","]","=","ig","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ie",";"]}]},{type:"node",name:"TEX_SKY",declarations:[{type:"node_in",name:"ih",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ii",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ii","[","0","]","=","ii","[","1","]","=","ii","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ih",";"]}]},{type:"node",name:"TEX_NOISE",declarations:[{type:"node_in",name:"ij",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ik",qualifier:["float"],is_optional:false},{type:"node_in",name:"il",qualifier:["float"],is_optional:false},{type:"node_in",name:"im",qualifier:["float"],is_optional:false},{type:"node_out",name:"io",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ip",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["io","[","0","]","=","io","[","1","]","=","io","[","2","]","=","ZERO_VALUE_NODES",";","ip","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["ij",";","ik",";","il",";","im",";"]}]},{type:"node",name:"TEX_WAVE",declarations:[{type:"node_in",name:"iq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ir",qualifier:["float"],is_optional:false},{type:"node_in",name:"is",qualifier:["float"],is_optional:false},{type:"node_in",name:"it",qualifier:["float"],is_optional:false},{type:"node_in",name:"iu",qualifier:["float"],is_optional:false},{type:"node_out",name:"iv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iw",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iv","[","0","]","=","iv","[","1","]","=","iv","[","2","]","=","ZERO_VALUE_NODES",";","iw","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iq",";","ir",";","is",";","it",";","iu",";"]}]},{type:"node",name:"TEX_VORONOI",declarations:[{type:"node_in",name:"ix",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iy",qualifier:["float"],is_optional:false},{type:"node_out",name:"iz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iz","[","0","]","=","iz","[","1","]","=","iz","[","2","]","=","ZERO_VALUE_NODES",";","iA","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["ix",";","iy",";"]}]},{type:"node",name:"TEX_MUSGRAVE",declarations:[{type:"node_in",name:"iB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iC",qualifier:["float"],is_optional:false},{type:"node_in",name:"iD",qualifier:["float"],is_optional:false},{type:"node_in",name:"iE",qualifier:["float"],is_optional:false},{type:"node_in",name:"iF",qualifier:["float"],is_optional:false},{type:"node_in",name:"iG",qualifier:["float"],is_optional:false},{type:"node_in",name:"iH",qualifier:["float"],is_optional:false},{type:"node_out",name:"iI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iI","[","0","]","=","iI","[","1","]","=","iI","[","2","]","=","ZERO_VALUE_NODES",";","iJ","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iB",";","iC",";","iD",";","iE",";","iF",";","iG",";","iH",";"]}]},{type:"node",name:"TEX_GRADIENT",declarations:[{type:"node_in",name:"iK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iL","[","0","]","=","iL","[","1","]","=","iL","[","2","]","=","ZERO_VALUE_NODES",";","iM","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iK",";"]}]},{type:"node",name:"TEX_MAGIC",declarations:[{type:"node_in",name:"iN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iO",qualifier:["float"],is_optional:false},{type:"node_in",name:"iP",qualifier:["float"],is_optional:false},{type:"node_out",name:"iQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iQ","[","0","]","=","iQ","[","1","]","=","iQ","[","2","]","=","ZERO_VALUE_NODES",";","iR","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iN",";","iO",";","iP",";"]}]},{type:"node",name:"TEX_CHECKER",declarations:[{type:"node_in",name:"iS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iV",qualifier:["float"],is_optional:false},{type:"node_out",name:"iW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iW","[","0","]","=","iW","[","1","]","=","iW","[","2","]","=","ZERO_VALUE_NODES",";","iX","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iS",";","iT",";","iU",";","iV",";"]}]},{type:"node",name:"TEX_BRICK",declarations:[{type:"node_in",name:"iY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"i_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ja",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jb",qualifier:["float"],is_optional:false},{type:"node_in",name:"jc",qualifier:["float"],is_optional:false},{type:"node_in",name:"jd",qualifier:["float"],is_optional:false},{type:"node_in",name:"je",qualifier:["float"],is_optional:false},{type:"node_in",name:"jf",qualifier:["float"],is_optional:false},{type:"node_out",name:"jg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jh",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jg","[","0","]","=","jg","[","1","]","=","jg","[","2","]","=","ZERO_VALUE_NODES",";","jh","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iY",";","iZ",";","i_",";","ja",";","jb",";","jc",";","jd",";","je",";","jf",";"]}]},{type:"node",name:"ADD_SHADER",declarations:[{type:"node_in",name:"ji",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jk",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jk","=","clamp","(","ji","+","jj",",","vec3","(","ZERO_VALUE_NODES",")",",","vec3","(","UNITY_VALUE_NODES",")",")",";"]}]},{type:"node",name:"MIX_SHADER",declarations:[{type:"node_in",name:"jl",qualifier:["float"],is_optional:false},{type:"node_in",name:"jm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jo",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eZ","=","clamp","(","jl",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","jo","=","eZ","*","jm","+","(","UNITY_VALUE_NODES","-","eZ",")","*","jn",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_out",name:"jp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jq",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eF",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jp"],statements:[{type:"textline",tokens:["jp","=","ew","(","eF",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jq"],statements:[{type:"textline",tokens:["jq","=","vec3","(","eF",",","ZERO_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_out",name:"jr",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eG",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["jr","=","vec3","(","eG",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_NO",declarations:[{type:"node_out",name:"js",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["js","=","fi",";"]}]},{type:"node",name:"TEX_COORD_GE",declarations:[{type:"node_out",name:"jt",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jt","=","eg",";"]}]},{type:"node",name:"TEX_COORD_OB",declarations:[{type:"node_out",name:"ju",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ju","[","0","]","=","ju","[","1","]","=","ju","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_CA",declarations:[{type:"node_out",name:"jv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jv","[","0","]","=","fd","[","0","]",";","jv","[","1","]","=","fd","[","1","]",";","jv","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_WI",declarations:[{type:"node_out",name:"jw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jw","[","0","]","=","jw","[","1","]","=","jw","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_RE",declarations:[{type:"node_out",name:"jx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jx","[","0","]","=","jx","[","1","]","=","jx","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_out",name:"jy",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eH",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["jy","=","vec3","(","eH",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_out",name:"jz",qualifier:["float"],is_optional:false},{type:"node_out",name:"jA",qualifier:["float"],is_optional:false},{type:"node_out",name:"jB",qualifier:["float"],is_optional:false},{type:"node_out",name:"jC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jD",qualifier:["float"],is_optional:false},{type:"node_out",name:"jE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jz","=","ZERO_VALUE_NODES",";","jA","=","ZERO_VALUE_NODES",";","jB","=","ZERO_VALUE_NODES",";","jC","=","vec3","(","ZERO_VALUE_NODES",")",";","jD","=","ZERO_VALUE_NODES",";","jE","=","jC",";","jF","=","jC",";"]}]},{type:"node",name:"HAIR_INFO",declarations:[{type:"node_out",name:"jG",qualifier:["float"],is_optional:false},{type:"node_out",name:"jH",qualifier:["float"],is_optional:false},{type:"node_out",name:"jI",qualifier:["float"],is_optional:false},{type:"node_out",name:"jJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jG","=","ZERO_VALUE_NODES",";","jH","=","ZERO_VALUE_NODES",";","jI","=","ZERO_VALUE_NODES",";","jJ","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"OBJECT_INFO",declarations:[{type:"node_out",name:"jK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jL",qualifier:["float"],is_optional:false},{type:"node_out",name:"jM",qualifier:["float"],is_optional:false},{type:"node_out",name:"jN",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jL","=","ZERO_VALUE_NODES",";","jM","=","ZERO_VALUE_NODES",";","jN","=","ZERO_VALUE_NODES",";","jK","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"WIREFRAME",declarations:[{type:"node_in",name:"jO",qualifier:["float"],is_optional:false},{type:"node_out",name:"jP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jP","=","jO",";"]}]},{type:"node",name:"TANGENT",declarations:[{type:"node_out",name:"jQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jQ","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LAYER_WEIGHT",declarations:[{type:"node_in",name:"jR",qualifier:["float"],is_optional:false},{type:"node_in",name:"jS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jT",qualifier:["float"],is_optional:false},{type:"node_out",name:"jU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jT","=","jU","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["jS",";","jR",";"]}]},{type:"node",name:"LIGHT_PATH",declarations:[{type:"node_out",name:"jV",qualifier:["float"],is_optional:false},{type:"node_out",name:"jW",qualifier:["float"],is_optional:false},{type:"node_out",name:"jX",qualifier:["float"],is_optional:false},{type:"node_out",name:"jY",qualifier:["float"],is_optional:false},{type:"node_out",name:"jZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"j_",qualifier:["float"],is_optional:false},{type:"node_out",name:"ka",qualifier:["float"],is_optional:false},{type:"node_out",name:"kb",qualifier:["float"],is_optional:false},{type:"node_out",name:"kc",qualifier:["float"],is_optional:false},{type:"node_out",name:"kd",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jV","=","jW","=","jX","=","ZERO_VALUE_NODES",";","jY","=","jZ","=","j_","=","ZERO_VALUE_NODES",";","ka","=","ka","=","kc","=","kd","=","ZERO_VALUE_NODES",";","kb","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"ATTRIBUTE",declarations:[{type:"node_out",name:"ke",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ke","=","kf","=","vec3","(","ZERO_VALUE_NODES",")",";","kg","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"SCRIPT",declarations:[],statements:[]},{type:"node",name:"CURVE_VEC",declarations:[{type:"node_in",name:"kh",qualifier:["float"],is_optional:false},{type:"node_in",name:"ki",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kj","=","ki",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_R"],statements:[{type:"textline",tokens:["kj",".","r","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","ki",".","r","+","0.5",",","NODE_TEX_ROW",")",")",".","r","-","0.5",")","*","2.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_G"],statements:[{type:"textline",tokens:["kj",".","g","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","ki",".","g","+","0.5",",","NODE_TEX_ROW",")",")",".","g","-","0.5",")","*","2.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_B"],statements:[{type:"textline",tokens:["kj",".","b","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","ki",".","b","+","0.5",",","NODE_TEX_ROW",")",")",".","b","-","0.5",")","*","2.0",";"]}]}]},{type:"textline",tokens:["kj","=","mix","(","ki",",","kj",",","kh",")",";"]}]},{type:"node",name:"CURVE_RGB",declarations:[{type:"node_in",name:"kk",qualifier:["float"],is_optional:false},{type:"node_in",name:"kl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"km",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["READ_A"],statements:[{type:"textline",tokens:["eZ","=","texture2D","(","u_nodes_texture",",","vec2","(","kl",".","r",",","NODE_TEX_ROW",")",")",".","a",";","eY","=","texture2D","(","u_nodes_texture",",","vec2","(","kl",".","g",",","NODE_TEX_ROW",")",")",".","a",";","eX","=","texture2D","(","u_nodes_texture",",","vec2","(","kl",".","b",",","NODE_TEX_ROW",")",")",".","a",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["eZ","=","kl",".","r",";","eY","=","kl",".","g",";","eX","=","kl",".","b",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_R"],statements:[{type:"textline",tokens:["km",".","r","=","texture2D","(","u_nodes_texture",",","vec2","(","eZ",",","NODE_TEX_ROW",")",")",".","r",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["km",".","r","=","eZ",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_G"],statements:[{type:"textline",tokens:["km",".","g","=","texture2D","(","u_nodes_texture",",","vec2","(","eY",",","NODE_TEX_ROW",")",")",".","g",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["km",".","g","=","eY",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_B"],statements:[{type:"textline",tokens:["km",".","b","=","texture2D","(","u_nodes_texture",",","vec2","(","eX",",","NODE_TEX_ROW",")",")",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["km",".","b","=","eX",";"]}]}]},{type:"textline",tokens:["km","=","mix","(","kl",",","km",",","kk",")",";"]}]},{type:"node",name:"VALTORGB",declarations:[{type:"node_in",name:"kn",qualifier:["float"],is_optional:false},{type:"node_out",name:"ko",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["fe","=","texture2D","(","u_nodes_texture",",","vec2","(","kn",",","NODE_TEX_ROW",")",")",";","ko","=","fe",".","rgb",";","kp","=","fe",".","a",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"kq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kr","=","kq",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["kr","=","(","MAPPING_TRS_MATRIX","*","vec4","(","kr",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["kr","=","kr","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["kr","=","kr","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["kr","=","max","(","kr",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["kr","=","min","(","kr",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["kr","=","normalize","(","kr",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"ks",qualifier:["float"],is_optional:false},{type:"node_in",name:"kt",qualifier:["float"],is_optional:false},{type:"node_out",name:"ku",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ku","=","ks","+","kt",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ku","=","clamp","(","ku",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"kv",qualifier:["float"],is_optional:false},{type:"node_in",name:"kw",qualifier:["float"],is_optional:false},{type:"node_out",name:"kx",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kx","=","kv","-","kw",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kx","=","clamp","(","kx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"ky",qualifier:["float"],is_optional:false},{type:"node_in",name:"kz",qualifier:["float"],is_optional:false},{type:"node_out",name:"kA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kA","=","ky","*","kz",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kA","=","clamp","(","kA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"kB",qualifier:["float"],is_optional:false},{type:"node_in",name:"kC",qualifier:["float"],is_optional:false},{type:"node_out",name:"kD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kD","=","(","kC","!=","ZERO_VALUE_NODES",")","?","kB","/","kC",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kD","=","clamp","(","kD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"kE",qualifier:["float"],is_optional:false},{type:"node_in",name:"kF",qualifier:["float"],is_optional:false},{type:"node_out",name:"kG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kG","=","sin","(","kE",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kG","=","clamp","(","kG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kF",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"kH",qualifier:["float"],is_optional:false},{type:"node_in",name:"kI",qualifier:["float"],is_optional:false},{type:"node_out",name:"kJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kJ","=","cos","(","kH",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kJ","=","clamp","(","kJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kI",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"kK",qualifier:["float"],is_optional:false},{type:"node_in",name:"kL",qualifier:["float"],is_optional:false},{type:"node_out",name:"kM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kM","=","tan","(","kK",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kM","=","clamp","(","kM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kL",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"kN",qualifier:["float"],is_optional:false},{type:"node_in",name:"kO",qualifier:["float"],is_optional:false},{type:"node_out",name:"kP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kP","=","(","kN","<=","UNITY_VALUE_NODES","&&","kN",">=","-","UNITY_VALUE_NODES",")","?","asin","(","kN",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kP","=","clamp","(","kP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kO",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"kQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"kR",qualifier:["float"],is_optional:false},{type:"node_out",name:"kS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kS","=","(","kQ","<=","UNITY_VALUE_NODES","&&","kQ",">=","-","UNITY_VALUE_NODES",")","?","acos","(","kQ",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kS","=","clamp","(","kS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kR",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"kT",qualifier:["float"],is_optional:false},{type:"node_in",name:"kU",qualifier:["float"],is_optional:false},{type:"node_out",name:"kV",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kV","=","atan","(","kT",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kV","=","clamp","(","kV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kU",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"kW",qualifier:["float"],is_optional:false},{type:"node_in",name:"kX",qualifier:["float"],is_optional:false},{type:"node_out",name:"kY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","kW","<","ZERO_VALUE_NODES","&&","kX","!=","floor","(","kX",")",")","kY","=","ZERO_VALUE_NODES",";","else","if","(","kX","==","ZERO_VALUE_NODES",")"]},{type:"textline",tokens:["kY","=","UNITY_VALUE_NODES",";","else","if","(","kW","<","ZERO_VALUE_NODES",")","kY","=","mix","(","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","sign","(","mod","(","-","kX",",","2.0",")",")",")","*","pow","(","-","kW",",","kX",")",";","else","if","(","kW","==","ZERO_VALUE_NODES",")","kY","=","ZERO_VALUE_NODES",";","else","kY","=","pow","(","kW",",","kX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kY","=","clamp","(","kY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"kZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"k_",qualifier:["float"],is_optional:false},{type:"node_out",name:"la",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["la","=","(","kZ",">","ZERO_VALUE_NODES","&&","k_",">","ZERO_VALUE_NODES",")","?","log2","(","kZ",")","/","log2","(","k_",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["la","=","clamp","(","la",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"lb",qualifier:["float"],is_optional:false},{type:"node_in",name:"lc",qualifier:["float"],is_optional:false},{type:"node_out",name:"ld",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ld","=","min","(","lb",",","lc",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ld","=","clamp","(","ld",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"le",qualifier:["float"],is_optional:false},{type:"node_in",name:"lf",qualifier:["float"],is_optional:false},{type:"node_out",name:"lg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lg","=","max","(","le",",","lf",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lg","=","clamp","(","lg",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"lh",qualifier:["float"],is_optional:false},{type:"node_in",name:"li",qualifier:["float"],is_optional:false},{type:"node_out",name:"lj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lj","=","floor","(","lh","+","eh",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lj","=","clamp","(","lj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["li",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"lk",qualifier:["float"],is_optional:false},{type:"node_in",name:"ll",qualifier:["float"],is_optional:false},{type:"node_out",name:"lm",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lm","=","(","lk","<","ll",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lm","=","clamp","(","lm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"ln",qualifier:["float"],is_optional:false},{type:"node_in",name:"lo",qualifier:["float"],is_optional:false},{type:"node_out",name:"lp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lp","=","(","ln",">","lo",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lp","=","clamp","(","lp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"lq",qualifier:["float"],is_optional:false},{type:"node_in",name:"lr",qualifier:["float"],is_optional:false},{type:"node_out",name:"ls",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ls","=","abs","(","lr",")",">","0.000001","?","mod","(","lq",",","lr",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ls","=","clamp","(","ls",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"lt",qualifier:["float"],is_optional:false},{type:"node_in",name:"lu",qualifier:["float"],is_optional:false},{type:"node_out",name:"lv",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lv","=","abs","(","lt",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lv","=","clamp","(","lv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["lu",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"lw",qualifier:["float"],is_optional:false},{type:"node_in",name:"lx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ly",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","lw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lz","=","mix","(","lx",",","ly",",","eX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lz","=","clamp","(","lz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"lA",qualifier:["float"],is_optional:false},{type:"node_in",name:"lB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lD",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","lA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lD","=","mix","(","lB",",","lB","+","lC",",","eX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lD","=","clamp","(","lD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"lE",qualifier:["float"],is_optional:false},{type:"node_in",name:"lF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","lE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lH","=","mix","(","lF",",","lF","*","lG",",","eX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lH","=","clamp","(","lH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"lI",qualifier:["float"],is_optional:false},{type:"node_in",name:"lJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","lI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lL","=","mix","(","lJ",",","lJ","-","lK",",","eX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lL","=","clamp","(","lL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"lM",qualifier:["float"],is_optional:false},{type:"node_in",name:"lN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","lM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eX",";","lP","=","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","eY",")","+","eX","*","(","vec3","(","UNITY_VALUE_NODES",")","-","lO",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","lN",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lP","=","clamp","(","lP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"lQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"lR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","lQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eX",";","lS","+=","step","(","lS",",","vec3","(","ZERO_VALUE_NODES",")",")",";","lT","=","eY","*","lR","+","eX","*","lR","/","lS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lT","=","clamp","(","lT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"lU",qualifier:["float"],is_optional:false},{type:"node_in",name:"lV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","lU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lX","=","mix","(","lV",",","abs","(","lV","-","lW",")",",","eX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lX","=","clamp","(","lX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"lY",qualifier:["float"],is_optional:false},{type:"node_in",name:"lZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"l_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ma",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","lY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","ma","=","min","(","lZ",".","rgb",",","l_",".","rgb","*","eX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["ma","=","clamp","(","ma",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"mb",qualifier:["float"],is_optional:false},{type:"node_in",name:"mc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"md",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"me",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","me","=","max","(","mc",".","rgb",",","md",".","rgb","*","eX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["me","=","clamp","(","me",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"mf",qualifier:["float"],is_optional:false},{type:"node_in",name:"mg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mf",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fk","=","vec3","(","UNITY_VALUE_NODES","-","eX",")",";","mi","=","mix","(","mg","*","(","fk","+","2.0","*","eX","*","mh",")",",","vec3","(","UNITY_VALUE_NODES",")","-","(","fk","+","2.0","*","eX","*","(","vec3","(","UNITY_VALUE_NODES",")","-","mh",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","mg",")",",","step","(","eh",",","mg",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mi","=","clamp","(","mi",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"mj",qualifier:["float"],is_optional:false},{type:"node_in",name:"mk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ml",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fk","=","vec3","(","UNITY_VALUE_NODES",")","-","eX","*","ml",";","fj","=","clamp","(","mk","/","fk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mm","=","mix","(","mix","(","fj",",","vec3","(","UNITY_VALUE_NODES",")",",","step","(","fk",",","vec3","(","ZERO_VALUE_NODES",")",")",")",",","mk",",","step","(","mk",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mm","=","clamp","(","mm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"mn",qualifier:["float"],is_optional:false},{type:"node_in",name:"mo",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fk","=","vec3","(","UNITY_VALUE_NODES","-","eX",")",";","fk","=","fk","+","eX","*","mp",";","fj","=","clamp","(","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","UNITY_VALUE_NODES",")","-","mo",")","/","fk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mq","=","mix","(","fj",",","vec3","(","ZERO_VALUE_NODES",")",",","step","(","fk",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mq","=","clamp","(","mq",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"mr",qualifier:["float"],is_optional:false},{type:"node_in",name:"ms",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mu",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mu","=","ms",";","fj","=","eq","(","mt",")",";","if","(","fj",".","y","!=","ZERO_VALUE_NODES",")","{","fk","=","eq","(","mu",")",";","fk",".","x","=","fj",".","x",";","fl","=","eu","(","fk",")",";","mu","=","mix","(","mu",",","fl",",","eX",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mu","=","clamp","(","mu",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"mv",qualifier:["float"],is_optional:false},{type:"node_in",name:"mw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"my",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eX",";","my","=","mw",";","fl","=","eq","(","my",")",";","if","(","fl",".","y","!=","ZERO_VALUE_NODES",")","{","fk","=","eq","(","mx",")",";","fl",".","y","=","eY","*","fl",".","y","+","eX","*","fk",".","y",";","my","=","eu","(","fl",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["my","=","clamp","(","my",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"mz",qualifier:["float"],is_optional:false},{type:"node_in",name:"mA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eX",";","fl","=","eq","(","mA",")",";","fk","=","eq","(","mB",")",";","fl",".","z","=","eY","*","fl",".","z","+","eX","*","fk",".","z",";","mC","=","eu","(","fl",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mC","=","clamp","(","mC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"mD",qualifier:["float"],is_optional:false},{type:"node_in",name:"mE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mG","=","mE",";","fk","=","eq","(","mF",")",";","if","(","fk",".","y","!=","ZERO_VALUE_NODES",")","{","fl","=","eq","(","mG",")",";","fl",".","x","=","fk",".","x",";","fl",".","y","=","fk",".","y",";","fj","=","eu","(","fl",")",";","mG","=","mix","(","mG",",","fj",",","eX",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mG","=","clamp","(","mG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"mH",qualifier:["float"],is_optional:false},{type:"node_in",name:"mI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","UNITY_VALUE_NODES","-","eX",";","fj","=","mJ","+","mI","-","mJ","*","mI",";","mK","=","mI","*","(","vec3","(","eY",")","+","vec3","(","eX",")","*","(","(","vec3","(","UNITY_VALUE_NODES",")","-","mI",")","*","mJ","+","fj",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mK","=","clamp","(","mK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"mL",qualifier:["float"],is_optional:false},{type:"node_in",name:"mM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["eX","=","clamp","(","mL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mO","=","mM","+","eX","*","(","2.0","*","mN","-","vec3","(","UNITY_VALUE_NODES",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mO","=","clamp","(","mO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"mP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mQ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["eO","=","mP",";","eS","=","mQ",";"]}]},{type:"node",name:"MATERIAL_BEGIN",declarations:[{type:"node_in",name:"mR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mT",qualifier:["float"],is_optional:false},{type:"node_in",name:"mU",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"mV",qualifier:["float"],is_optional:true},{type:"node_out",name:"mW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mZ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"m_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"na",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nb",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nc",qualifier:["vec4"],is_optional:false},{type:"node_param",name:"eI",qualifier:["const","vec2"],is_optional:false},{type:"node_param",name:"eJ",qualifier:["const","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mY","=","clamp","(","mR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["mZ","=","eJ","[","0","]","*","clamp","(","mS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["m_","=","normalize","(","mU",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["m_","=","fi",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["SHADELESS_MAT",{type:"logic_negative_expr",places:1}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"textline",tokens:["mW","=","mV","*","mY",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["mW","=","eV","*","mY",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["mY","*=","mT",";"]}]}]},{type:"textline",tokens:["mX","=","eW","*","u_environment_energy","*","dS","(","m_",")",";","nc","=","du","(","mY",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],statements:[{type:"textline",tokens:["na","=","vec2","(","eI","[","0","]",",","eI","[","1","]",")",";"]},{type:"textline",tokens:["nb","=","vec2","(","eJ","[","1","]",",","eJ","[","2","]",")",";"]}]}]},{type:"textline",tokens:["eR","=","nc",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["mW","=","vec3","(","ZERO_VALUE_NODES",")",";","mX","=","vec3","(","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATERIAL_END",declarations:[{type:"node_in",name:"nd",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"ne",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ng",qualifier:["float"],is_optional:true},{type:"node_in",name:"nh",qualifier:["float"],is_optional:true},{type:"node_in",name:"ni",qualifier:["float"],is_optional:true},{type:"node_out",name:"nj",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nk",qualifier:["float"],is_optional:true},{type:"node_out",name:"nl",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nm",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nn",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"eK",qualifier:["float"],is_optional:false},{type:"node_param",name:"eL",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nj"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["nj","=","nd",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nj","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT","REFLECTION_TYPE","REFL_NONE",{type:"non_equal_expr",places:2},{type:"logical_and_expr",places:2}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["dP","(","nj",",","eM",",","nf",",","ng",",","eN",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["dP","(","nj",",","eM",",","nf",",","ng",",","mat4","(","ZERO_VALUE_NODES",")",")",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["nj","+=","ne",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nl"],statements:[{type:"textline",tokens:["nl","=","nf",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nm"],statements:[{type:"textline",tokens:["nm","=","nd",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nn"],statements:[{type:"textline",tokens:["nn","=","ne",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nk"],statements:[{type:"textline",tokens:["nk","=","clamp","(","ni",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["eX","=","max","(","max","(","ne",".","r",",","ne",".","g",")",",","ne",".","b",")","*","nh",";","nk","=","clamp","(","ni","*","(","UNITY_VALUE_NODES","-","eX",")","+","eX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]}]},{type:"node_else",statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nk"],statements:[{type:"textline",tokens:["nk","=","clamp","(","eK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["eX","=","max","(","max","(","ne",".","r",",","ne",".","g",")",",","ne",".","b",")","*","eL",";","nk","=","eK","*","(","UNITY_VALUE_NODES","-","eX",")","+","eX",";"]}]}]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["eP","=","ne",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["eP","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["eQ","=","nf",";"]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"no",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"np",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nr",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"ns",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nr","=","vec4","(","no","+","nq","*","np",",","ZERO_VALUE_NODES",")",";","ns","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"nt",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"nu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nv",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nx",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nv","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["nx","=","eh",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nx","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["nw","=","u_light_color_intensities","[","LAMP_IND","]",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_SHADOW_MAP_IND",1,{type:"negative_expr",places:1},{type:"non_equal_expr",places:2}],statements:[{type:"textline",tokens:["nw","*=","nt","[","LAMP_SHADOW_MAP_IND","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["fj","=","u_light_positions","[","LAMP_IND","]",";","nu","=","fj","-","fh",";"]},{type:"textline",tokens:["eX","=","length","(","nu",")",";","nw","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","eX","*","eX",")",";","nu","=","normalize","(","nu",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["fj","=","u_light_directions","[","LAMP_IND","]",";","eX","=","dot","(","nu",",","fj",")",";","eX","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","eX","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","nw","*=","eX",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["nu","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"ny",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nz",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nB",qualifier:["float"],is_optional:false},{type:"node_in",name:"nC",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nD","=","ZERO_VALUE_NODES",";","if","(","nz",".","r","!=","ZERO_VALUE_NODES",")","{","eX","=","(","UNITY_VALUE_NODES","-","nB",")","*","dot","(","nA",",","ny",")","+","nB",";","if","(","nC","[","0","]","==","ZERO_VALUE_NODES",")","{","nD","=","UNITY_VALUE_NODES",";","}","else","{","eX","=","UNITY_VALUE_NODES","+","abs","(","eX",")",";","eX","=","nC","[","1","]","+","(","UNITY_VALUE_NODES","-","nC","[","1","]",")","*","pow","(","eX",",","nC","[","0","]",")",";","nD","=","clamp","(","eX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","nD","=","max","(","nD",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"nE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nF",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nH",qualifier:["float"],is_optional:false},{type:"node_out",name:"nI",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nI","=","ZERO_VALUE_NODES",";","if","(","nF",".","r","!=","ZERO_VALUE_NODES",")","{","eX","=","(","UNITY_VALUE_NODES","-","nH",")","*","dot","(","nG",",","nE",")","+","nH",";","nI","=","max","(","eX",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"nJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nK",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nM",qualifier:["float"],is_optional:false},{type:"node_in",name:"nN",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nO","=","ZERO_VALUE_NODES",";","if","(","nK",".","r","!=","ZERO_VALUE_NODES",")","{","eX","=","(","UNITY_VALUE_NODES","-","nM",")","*","dot","(","nL",",","nJ",")","+","nM",";","if","(","nN","[","0","]",">","ZERO_VALUE_NODES",")","{","eY","=","max","(","dot","(","nL",",","eM",")",",","ZERO_VALUE_NODES",")",";","eZ","=","nN","[","0","]","*","nN","[","0","]",";","e_","=","UNITY_VALUE_NODES","-","eh","*","(","eZ","/","(","eZ","+","0.33",")",")",";","fj","=","nJ","-","eX","*","nL",";","fl","=","eM","-","eY","*","nL",";"]},{type:"textline",tokens:["if","(","length","(","fj",")","==","ZERO_VALUE_NODES","||","length","(","fl",")","==","ZERO_VALUE_NODES","||","abs","(","eX",")",">","UNITY_VALUE_NODES","||","abs","(","eY",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["nO","=","eX","*","e_",";","else","{","fa","=","acos","(","eX",")",";","eY","=","acos","(","eY",")",";","fj","=","normalize","(","fj",")",";","fl","=","normalize","(","fl",")",";","fb","=","max","(","fa",",","eY",")",";","fc","=","min","(","fa",",","eY",")",";","fc","*=","0.95",";","eY","=","max","(","dot","(","fj",",","fl",")",",","ZERO_VALUE_NODES",")",";","eZ","=","0.45","*","(","eZ","/","(","eZ","+","0.09",")",")",";","nO","=","eX","*","(","e_","+","(","eZ","*","eY","*","sin","(","fb",")","*","tan","(","fc",")",")",")",";","}","}","else","nO","=","eX",";","nO","=","max","(","nO",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"nP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nQ",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nS",qualifier:["float"],is_optional:false},{type:"node_in",name:"nT",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nU","=","ZERO_VALUE_NODES",";","if","(","nQ",".","r","!=","ZERO_VALUE_NODES",")","{","eX","=","(","UNITY_VALUE_NODES","-","nS",")","*","dot","(","nR",",","nP",")","+","nS",";","fc","=","max","(","dot","(","nR",",","eM",")",",","ZERO_VALUE_NODES",")",";","if","(","nT","[","0","]","<=","UNITY_VALUE_NODES",")","nU","=","eX","*","pow","(","max","(","fc","*","eX",",","0.1",")",",","nT","[","0","]","-","UNITY_VALUE_NODES",")",";","else","nU","=","eX","*","pow","(","1.0001","-","fc",",","nT","[","0","]","-","UNITY_VALUE_NODES",")",";","nU","=","max","(","nU",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"nV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nW",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nY",qualifier:["float"],is_optional:false},{type:"node_in",name:"nZ",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"n_",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["n_","=","ZERO_VALUE_NODES",";","if","(","nW",".","r","!=","ZERO_VALUE_NODES",")","{","fc","=","(","UNITY_VALUE_NODES","-","nY",")","*","dot","(","nX",",","nV",")","+","nY",";","fc","=","acos","(","fc",")",";","if","(","fc","<","nZ","[","0","]",")","n_","=","UNITY_VALUE_NODES",";","else","if","(","fc",">","(","nZ","[","0","]","+","nZ","[","1","]",")","||","nZ","[","1","]","==","ZERO_VALUE_NODES",")","n_","=","ZERO_VALUE_NODES",";","else","n_","=","UNITY_VALUE_NODES","-","(","(","fc","-","nZ","[","0","]",")","/","nZ","[","1","]",")",";","n_","=","max","(","n_",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"oa",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ob",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"oc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"od",qualifier:["float"],is_optional:false},{type:"node_in",name:"oe",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"of",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["of","=","ZERO_VALUE_NODES",";","if","(","ob",".","g","==","UNITY_VALUE_NODES",")","{","fl","=","normalize","(","oa","+","eM",")",";","of","=","(","UNITY_VALUE_NODES","-","od",")","*","max","(","dot","(","oc",",","fl",")",",","ZERO_VALUE_NODES",")","+","od",";","of","=","pow","(","of",",","oe","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"og",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oh",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"oi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oj",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ok",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ok","=","ZERO_VALUE_NODES",";","if","(","oh",".","g","==","UNITY_VALUE_NODES",")","{","fl","=","normalize","(","og","+","eM",")",";","fc","=","max","(","dot","(","oi",",","fl",")",",","0.001",")",";"]},{type:"textline",tokens:["eX","=","max","(","dot","(","oi",",","eM",")",",","0.01",")",";","fb","=","max","(","dot","(","oi",",","og",")",",","0.01",")",";","fc","=","tan","(","acos","(","fc",")",")",";","eY","=","max","(","oj","[","0","]",",","0.001",")",";","ok","=","fb","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","eY","*","eY",")",")","*","(","exp","(","-","(","fc","*","fc",")","/","(","eY","*","eY",")",")","/","(","sqrt","(","eX","*","fb",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"ol",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"om",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"on",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oo",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"op",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["op","=","ZERO_VALUE_NODES",";","if","(","om",".","g","==","UNITY_VALUE_NODES",")","{","fl","=","normalize","(","ol","+","eM",")",";","fb","=","acos","(","dot","(","fl",",","on",")",")",";","if","(","fb","<","oo","[","0","]",")","op","=","UNITY_VALUE_NODES",";","else","if","(","fb",">=","oo","[","0","]","+","oo","[","1","]","||","oo","[","1","]","==","ZERO_VALUE_NODES",")","op","=","ZERO_VALUE_NODES",";","else","op","=","UNITY_VALUE_NODES","-","(","fb","-","oo","[","0","]",")","/","oo","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"oq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"or",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"os",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ot",qualifier:["float"],is_optional:false},{type:"node_in",name:"ou",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ov",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ov","=","ZERO_VALUE_NODES",";","if","(","or",".","g","==","UNITY_VALUE_NODES",")","{","if","(","ou","[","0","]","<","UNITY_VALUE_NODES","||","ou","[","1","]","==","ZERO_VALUE_NODES",")","ov","=","ZERO_VALUE_NODES",";","else","{","if","(","ou","[","1","]","<","100.0",")","ou","[","1","]","=","sqrt","(","UNITY_VALUE_NODES","/","ou","[","1","]",")",";","else","ou","[","1","]","=","10.0","/","ou","[","1","]",";","fl","=","normalize","(","eM","+","oq",")",";","fb","=","(","UNITY_VALUE_NODES","-","ot",")","*","max","(","dot","(","os",",","fl",")",",","ZERO_VALUE_NODES",")","+","ot",";","if","(","fb","<","ZERO_VALUE_NODES",")","ov","=","ZERO_VALUE_NODES",";","else","{","eX","=","max","(","dot","(","os",",","eM",")",",","0.01",")",";","eY","=","dot","(","os",",","oq",")",";","if","(","eY","<=","0.01",")","ov","=","ZERO_VALUE_NODES",";","else","{","fc","=","max","(","dot","(","eM",",","fl",")",",","0.01",")",";","eZ","=","UNITY_VALUE_NODES",";","eX","=","(","2.0","*","fb","*","eX",")","/","fc",";","eY","=","(","2.0","*","fb","*","eY",")","/","fc",";","eY","=","min","(","min","(","eZ",",","eX",")",",","eY",")",";","eX","=","sqrt","(","pow","(","ou","[","0","]",",","2.0",")","+","pow","(","fc",",","2.0",")","-","UNITY_VALUE_NODES",")",";","fc","=","pow","(","eX","-","fc",",","2.0",")","/","pow","(","eX","+","fc",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","fc","*","(","eX","+","fc",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","fc","*","(","eX","-","fc",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","fb","=","acos","(","fb",")",";","ov","=","max","(","fc","*","eY","*","exp","(","-","pow","(","fb",",","2.0",")","/","(","2.0","*","pow","(","ou","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"ow",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"ox",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oy",qualifier:["float"],is_optional:false},{type:"node_in",name:"oz",qualifier:["float"],is_optional:false},{type:"node_in",name:"oA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oC",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"oD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oG",qualifier:["float"],is_optional:false},{type:"node_out",name:"oH",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"oI",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_NODE_B4W_TRANSLUCENCY"],statements:[{type:"textline",tokens:["if","(","dot","(","oA",",","oB",")","*","dot","(","eM",",","oB",")","<","ZERO_VALUE_NODES",")","{","fb","=","oC",".","x",";","eY","=","oC",".","y",";","fc","=","oC",".","z",";","eX","=","oC",".","w",";"]},{type:"textline",tokens:["eZ","=","clamp","(","abs","(","dot","(","oA",",","oB",")",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","e_","=","clamp","(","dot","(","eM",",","-","oA",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","pow","(","e_",",","eY",")",";"]},{type:"textline",tokens:["oH","=","ow","+","oG","*","vec4","(","oF","*","eZ","*","pow","(","oD",",","vec3","(","fb",")",")",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["oH","+=","fc","*","mix","(","vec4","(","oD",",","UNITY_VALUE_NODES",")",",","vec4","(","UNITY_VALUE_NODES",")",",","eX",")","*","oG","*","vec4","(","oF","*","eZ","*","vec3","(","eY",")",",","UNITY_VALUE_NODES",")",";","oI","=","ox",";","}","else","{"]},{type:"textline",tokens:["oI","=","ox","+","oF","*","oE","*","oz",";","oH","=","ow","+","vec4","(","oF","*","oD","*","oy",",","oz",")",";","}"]}]},{type:"node_else",statements:[{type:"textline",tokens:["oI","=","ox","+","oF","*","oE","*","oz",";","oH","=","ow","+","vec4","(","oF","*","oD","*","oy",",","oz",")",";"]}]}]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"oJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oJ","=","u_node_rgbs","[","RGB_IND","]",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"oK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oL","=","dot","(","oK",",","vec3","(","0.35",",","0.45",",","0.2",")",")",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"oM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oN",qualifier:["float"],is_optional:true},{type:"node_out",name:"oO",qualifier:["float"],is_optional:true},{type:"node_out",name:"oP",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oN"],statements:[{type:"textline",tokens:["oN","=","oM",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oO"],statements:[{type:"textline",tokens:["oO","=","oM",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oP"],statements:[{type:"textline",tokens:["oP","=","oM",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"oQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oR",qualifier:["float"],is_optional:true},{type:"node_out",name:"oS",qualifier:["float"],is_optional:true},{type:"node_out",name:"oT",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["fl","=","eq","(","oQ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oR"],statements:[{type:"textline",tokens:["oR","=","fl",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oS"],statements:[{type:"textline",tokens:["oS","=","fl",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oT"],statements:[{type:"textline",tokens:["oT","=","fl",".","b",";"]}]}]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"oU",qualifier:["float"],is_optional:false},{type:"node_in",name:"oV",qualifier:["float"],is_optional:false},{type:"node_in",name:"oW",qualifier:["float"],is_optional:false},{type:"node_out",name:"oX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oX","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","oU","-","oW",")","*","oV",")",")",";"]}]},{type:"node",name:"GAMMA",declarations:[{type:"node_in",name:"oY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"o_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["o_","=","oY",";","if","(","o_",".","x",">","ZERO_VALUE_NODES",")","o_",".","x","=","pow","(","oY",".","x",",","oZ",")",";","if","(","o_",".","y",">","ZERO_VALUE_NODES",")","o_",".","y","=","pow","(","oY",".","y",",","oZ",")",";","if","(","o_",".","z",">","ZERO_VALUE_NODES",")","o_",".","z","=","pow","(","oY",".","z",",","oZ",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"pa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pb","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","pa",")",";","pb","=","pow","(","pb",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"pc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pd",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pd","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","pc",")",";","pd","=","pow","(","pd",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_EMPTY",declarations:[{type:"node_out",name:"pe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pg",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pe"],statements:[{type:"textline",tokens:["pe","[","2","]","=","pe","[","1","]","=","pe","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pf"],statements:[{type:"textline",tokens:["pf","[","2","]","=","pf","[","1","]","=","pf","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pg"],statements:[{type:"textline",tokens:["pg","=","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"ph",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pi",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pj",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"],is_optional:false}],statements:[{type:"textline",tokens:["fe","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","ph",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pi"],statements:[{type:"textline",tokens:["pi","=","fe",".","xyz",";","br","(","pi",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pj"],statements:[{type:"textline",tokens:["pj","=","fe",".","w",";"]}]}]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"pk",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pl",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pm",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pn",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"po",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pp",qualifier:["float"],is_optional:true},{type:"node_out",name:"pq",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pr",qualifier:["float"],is_optional:true},{type:"node_out",name:"ps",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pt",qualifier:["float"],is_optional:true},{type:"node_out",name:"pu",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pv",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pk",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_po"],statements:[{type:"textline",tokens:["po","=","fe",".","xyz",";","br","(","po",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pp"],statements:[{type:"textline",tokens:["pp","=","fe",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pl",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pq"],statements:[{type:"textline",tokens:["pq","=","fe",".","xyz",";","br","(","pq",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pr"],statements:[{type:"textline",tokens:["pr","=","fe",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pm",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ps"],statements:[{type:"textline",tokens:["ps","=","fe",".","xyz",";","br","(","ps",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pt"],statements:[{type:"textline",tokens:["pt","=","fe",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pn",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pu"],statements:[{type:"textline",tokens:["pu","=","fe",".","xyz",";","br","(","pu",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pv"],statements:[{type:"textline",tokens:["pv","=","fe",".","w",";"]}]}]}]}]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"pw",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"px",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"py",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pz",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pA",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pB",qualifier:["float"],is_optional:true},{type:"node_out",name:"pC",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pD",qualifier:["float"],is_optional:true},{type:"node_out",name:"pE",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pF",qualifier:["float"],is_optional:true},{type:"node_out",name:"pG",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pH",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","pw",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pA"],statements:[{type:"textline",tokens:["pA","=","normalize","(","ff","*","(","fe",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pB"],statements:[{type:"textline",tokens:["pB","=","fe",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","px",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pC"],statements:[{type:"textline",tokens:["pC","=","normalize","(","ff","*","(","fe",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pD"],statements:[{type:"textline",tokens:["pD","=","fe",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","py",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pE"],statements:[{type:"textline",tokens:["pE","=","normalize","(","ff","*","(","fe",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pF"],statements:[{type:"textline",tokens:["pF","=","fe",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["fe","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","pz",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pG"],statements:[{type:"textline",tokens:["pG","=","normalize","(","ff","*","(","fe",".","xyz","-","eh",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pH"],statements:[{type:"textline",tokens:["pH","=","fe",".","w",";"]}]}]}]}]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"pI",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pI","=","u_node_values","[","VALUE_IND","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"pJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pM",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pL","=","pJ","+","pK",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pM"],statements:[{type:"textline",tokens:["pM","=","(","abs","(","pL","[","0","]",")","+","abs","(","pL","[","1","]",")","+","abs","(","pL","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"pN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pQ",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pP","=","pN","-","pO",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pQ"],statements:[{type:"textline",tokens:["pQ","=","(","abs","(","pP","[","0","]",")","+","abs","(","pP","[","1","]",")","+","abs","(","pP","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"pR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pU",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pT","=","pR","+","pS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pU"],statements:[{type:"textline",tokens:["pU","=","length","(","pT",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pT"],statements:[{type:"textline",tokens:["pT","=","normalize","(","pT",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"pV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pY",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pX","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pY"],statements:[{type:"textline",tokens:["pY","=","dot","(","pV",",","pW",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"pZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"p_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qb",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qa","=","cross","(","pZ",",","p_",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qb"],statements:[{type:"textline",tokens:["qb","=","length","(","qa",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"qc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qf",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qe","=","normalize","(","qc",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qf"],statements:[{type:"textline",tokens:["qf","=","length","(","qc",")",";"]}]}]},{type:"textline",tokens:["qd",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"qg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qi","=","reflect","(","-","qg",",","qh",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"qj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qk",qualifier:["float"],is_optional:false},{type:"node_in",name:"ql",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"qm",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"qn",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["eY","=","length","(","fd",")",";","if","(","eY","<","qm",")","{","eT","=","ey","(","qj",")",";","eY","=","clamp","(","eh","*","(","qm","-","eY",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","eY","=","qk","*","eY",";"]},{type:"textline",tokens:["fl","=","normalize","(","eM","*","ff",")",";"]},{type:"textline",tokens:["eZ","=","UNITY_VALUE_NODES","/","ql",";"]},{type:"textline",tokens:["eU","=","fl",".","xy","*","eY","/","(","ql","*","fl",".","z",")",";","eY","=","UNITY_VALUE_NODES",";","eX","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eT",")",".","a",";"]},{type:"textline",tokens:["for","(","float","qo","=","1.0",";","qo","<=","ql",";","qo","++",")","{","if","(","eX","<","eY",")","{","eY","-=","eZ",";","eT","-=","eU",";","eX","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eT",")",".","a",";","}","}"]},{type:"textline",tokens:["eU","=","eT","+","eU",";","eZ","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eU",")",".","a","-","(","eY","+","eZ",")",";","eY","=","eX","-","eY",";","eZ","=","eY","/","(","eY","-","eZ",")",";"]},{type:"textline",tokens:["eT","=","eZ","*","eU","+","(","UNITY_VALUE_NODES","-","eZ",")","*","eT",";","qn","=","ew","(","eT",")",";","}","else","qn","=","qj",";"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"qp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qq","=","clamp","(","qp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"qr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qs",qualifier:["float"],is_optional:false},{type:"node_out",name:"qt",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qt","=","el","(","qr",",","qs",")",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"qu",qualifier:["float"],is_optional:false},{type:"node_in",name:"qv",qualifier:["float"],is_optional:false},{type:"node_in",name:"qw",qualifier:["float"],is_optional:false},{type:"node_in",name:"qx",qualifier:["float"],is_optional:false},{type:"node_in",name:"qy",qualifier:["float"],is_optional:false},{type:"node_out",name:"qz",qualifier:["float"],is_optional:true},{type:"node_out",name:"qA",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qz"],statements:[{type:"textline",tokens:["qz","=","qu",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qA"],statements:[{type:"textline",tokens:["qA","=","vec4","(","qv",",","qw",",","qx",",","qy",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"qB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qB","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"qC",qualifier:["float"],is_optional:false},{type:"node_in",name:"qD",qualifier:["float"],is_optional:false},{type:"node_in",name:"qE",qualifier:["float"],is_optional:false},{type:"node_out",name:"qF",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qF","=","smoothstep","(","qD",",","qE",",","qC",")",";"]}]},{type:"node",name:"B4W_GLOW_OUTPUT",declarations:[{type:"node_in",name:"qG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qH",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["eO","=","qG",";","eS","=","qH",";"]}]},{type:"node",name:"B4W_VECTOSCAL",declarations:[{type:"node_in",name:"qI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qJ","=","(","qI",".","r","+","qI",".","g","+","qI",".","b",")","/","3.0",";"]}]},{type:"node",name:"B4W_SCALTOVEC",declarations:[{type:"node_in",name:"qK",qualifier:["float"],is_optional:false},{type:"node_out",name:"qL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qL","[","0","]","=","qK",";","qL","[","1","]","=","qK",";","qL","[","2","]","=","qK",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","qM","(","in","vec3","eM",",","in","mat4","eN",",","out","vec3","eO",",","out","vec3","eP",",","out","vec3","eQ",",","out","vec4","eR",",","out","float","eS",")","{","vec2","eT",",","eU",";","float","eV",",","eW",",","eX",",","eY",",","eZ",",","e_",",","fa",",","fb",",","fc",";","vec4","fd",",","fe",";","mat3","ff",";","vec3","fg",",","fh",",","fi",",","fj",",","fk",",","fl",";","eO","=","vec3","(","ZERO_VALUE_NODES",")",";","eP","=","vec3","(","ZERO_VALUE_NODES",")",";","eQ","=","vec3","(","ZERO_VALUE_NODES",")",";","eR","=","vec4","(","ZERO_VALUE_NODES",")",";","eS","=","ZERO_VALUE_NODES",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["fg","=","normalize","(","bE",")",";","fh","=","fg",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["INVERT_FRONTFACING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")"]}]}}]},{type:"textline",tokens:["fh","=","fh",";","else","fh","=","-","fh",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["fi","=","fh",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fi","=","fg",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["fg","=","fh",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["fj","=","cross","(","fh",",","bF",".","xyz",")","*","bF",".","w",";","ff","=","mat3","(","bF",".","xyz",",","fj",",","fh",")",";","ff","=","ff",";"]}]}}]},{type:"textline",tokens:["fh","=","bC",";","fd","=","bD",";","eV","=","u_emit",";","eW","=","u_ambient",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","qN","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","qT","(","vec3","qO",",","mat4","qP",")","{","vec3","qQ",",","qR",",","qS",";","qQ","=","vec3","(","qP","[","0","]","[","0","]",",","qP","[","1","]","[","0","]",",","qP","[","2","]","[","0","]",")",";","qR","=","vec3","(","qP","[","0","]","[","1","]",",","qP","[","1","]","[","1","]",",","qP","[","2","]","[","1","]",")",";","qS","=","vec3","(","qP","[","0","]","[","2","]",",","qP","[","1","]","[","2","]",",","qP","[","2","]","[","2","]",")",";","qR","=","cross","(","qS",",","qQ",")",";","return","mat4","(","vec4","(","qQ",",","0.0",")",",","vec4","(","qR",",","0.0",")",",","vec4","(","qS",",","0.0",")",",","vec4","(","qO",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","qZ","(","vec3","qU",",","vec3","qV",")","{","vec3","qW",",","qX",",","qY",";","qW","=","qU","-","qV",";","qW",".","y","=","0.0",";","qW","=","normalize","(","qW",")",";","qX","=","normalize","(","cross","(","qN",",","qW",")",")",";","qY","=","normalize","(","cross","(","qW",",","qX",")",")",";","return","mat4","(","vec4","(","qX",",","0.0",")",",","vec4","(","qY",",","0.0",")",",","vec4","(","qW",",","0.0",")",",","vec4","(","qV",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","rg","(","in","vec3","q_",",","float","ra",",","float","rb",",","float","rc",",","vec3","rd",")","{","float","re",",","rf",";","re","=","fract","(","length","(","rd",")","/","0.17",")",";","rf","=","rc","+","re","/","10.0",";","re","=","re",";","if","(","rc","!=","0.0",")","re","/=","rc",";","q_","*=","1.0","+","0.5","*","sin","(","ra",")",";","re","=","length","(","q_",")","*","rb","*","sin","(","2.0","*","3.14","*","ra","*","rf","+","re",")",";","return","C","(","re",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","ro","(","in","vec3","rh",",","in","vec3","ri",",","in","mat4","rj",")","{","vec3","rk",";","float","rl",",","rm",";","mat4","rn",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["rn","=","qT","(","ri",",","rj",")",";"]}]}},{type:"elif",expression:["BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["rl","=","fract","(","(","ri",".","x","*","1.43","+","ri",".","y","*","0.123","+","ri",".","z","*","6.1",")",")",";","rl","=","2.0","*","M_PI","*","rl",";","rk","=","normalize","(","vec3","(","rj","[","0","]","[","2","]",",","0.0",",","rj","[","2","]","[","2","]",")",")",";","rm","=","acos","(","rk","[","2","]",")",";","if","(","rk","[","0","]","<","0.0",")","rm","=","2.0","*","M_PI","-","rm",";","rm","=","rm","-","rl",";","if","(","rm","<","0.0",")","rm","=","2.0","*","M_PI","+","rm",";","rl","=","rl",";","if","(","rm","<=","MAX_BILLBOARD_ANGLE",")","rl","+=","rm",";","else","if","(","rm","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","rl","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","rm","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","rm","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","rl","+=","rm","-","M_PI",";","else","if","(","rm","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","rl","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","rm","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","rl","+=","rm","-","2.0","*","M_PI",";","rn","=","A","(","rl",")",";","rn","[","3","]","=","vec4","(","ri",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["rn","=","qZ","(","rh",",","ri",")",";"]}]}}]},{type:"textline",tokens:["return","rn",";","}"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","ru","(","in","vec3","rp",",","in","vec3","rq",",","in","mat4","rr",",","mat4","rs",")","{","mat4","rt",";","rt","=","ro","(","rp",",","rq",",","rr",")",";","rs","[","3","]","=","vec4","(","0.0",",","0.0",",","0.0",",","1.0",")",";","rt","=","rt","*","rs",";","return","rt",";","}"]}]}}]},{type:"textline",tokens:["c","rB","(","in","vec3","rv",",","in","vec3","rw",",","in","vec3","rx",",","in","vec3","ry",",","in","vec3","rz",",","in","mat4","rA",")","{","rv","=","(","rA","*","vec4","(","rv",",","1.0",")",")",".","xyz",";","rw","=","(","rA","*","vec4","(","rw",",","1.0",")",")",".","xyz",";","rx","=","(","rA","*","vec4","(","rx",",","0.0",")",")",".","xyz",";","ry","=","(","rA","*","vec4","(","ry",",","0.0",")",")",".","xyz",";","rz","=","(","rA","*","vec4","(","rz",",","0.0",")",")",".","xyz",";","return","E","(","c","(","rv",",","rw",",","rx",",","ry",",","rz",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","rE","(","vec2","rC",",","vec3","rD",")","{","return","(","rC","+","0.5",")","*","rD",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","rL","(","in","vec4","rF",",","in","vec4","rG",",","in","float","rH",")","{","float","rI",",","rJ",",","rK",";","rI","=","rF","[","0","]","*","rG","[","0","]","+","rF","[","1","]","*","rG","[","1","]","+","rF","[","2","]","*","rG","[","2","]","+","rF","[","3","]","*","rG","[","3","]",";","if","(","rI","<","0.0",")","{","rG","*=","-","1.0",";","rI","=","-","rI",";","}","if","(","abs","(","rI",")",">=","1.0",")","return","rF",";","rJ","=","acos","(","rI",")",";","rI","=","sqrt","(","1.0","-","rI","*","rI",")",";","if","(","abs","(","rI",")","<","0.001",")","return","vec4","(","rF","*","0.5","+","rG","*","0.5",")",";","rK","=","sin","(","(","1.0","-","rH",")","*","rJ",")","/","rI",";","rI","=","sin","(","rH","*","rJ",")","/","rI",";","return","rF","*","rK","+","rG","*","rI",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","rX","(","in","vec3","rM",",","in","vec4","rN",",","in","vec4","rO",",","in","vec4","rP",",","in","vec4","rQ",",","in","float","rR",")","{","vec4","rS",",","rT",";","vec3","rU",",","rV",",","rW",";","rU","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rM",",","1.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["rS","=","rL","(","rN",",","rO",",","rR",")",";","rT","=","mix","(","rP",",","rQ",",","rR",")",";","rV","=","i","(","rS",",","rU",")",";","rV","=","rV","*","rT",".","w","+","rT",".","xyz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["rW","=","i","(","rN",",","rU",")",";","rU","=","i","(","rO",",","rU",")",";","rW","=","rW","*","rP",".","w","+","rP",".","xyz",";","rU","=","rU","*","rQ",".","w","+","rQ",".","xyz",";","rV","=","mix","(","rW",",","rU",",","rR",")",";"]}]}}]},{type:"textline",tokens:["return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rV",",","1.0",")",")",";","}","vec3","sf","(","in","vec3","rY",",","in","vec4","rZ",",","in","vec4","r_",",","in","float","sa",")","{","vec4","sb",";","vec3","sc",",","sd",",","se",";","sc","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rY",",","0.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["sb","=","rL","(","rZ",",","r_",",","sa",")",";","sd","=","i","(","sb",",","sc",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["se","=","i","(","rZ",",","sc",")",";","sc","=","i","(","r_",",","sc",")",";","sd","=","mix","(","se",",","sc",",","sa",")",";"]}]}}]},{type:"textline",tokens:["return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sd",",","0.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","rX","(","in","vec3","sg",",","in","vec4","sh",",","in","vec4","si",")","{","vec3","sj",";","sj","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sg",",","1.0",")",")",";","sj","=","i","(","sh",",","sj",")",";","sj","=","sj","*","si",".","w","+","si",".","xyz",";","return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sj",",","1.0",")",")",";","}","vec3","sf","(","in","vec3","sk",",","in","vec4","sl",")","{","vec3","sm",";","sm","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sk",",","0.0",")",")",";","sm","=","i","(","sl",",","sm",")",";","return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sm",",","0.0",")",")",";","}"]}]}}]},{type:"textline",tokens:["void","sB","(","inout","vec3","sn",",","inout","vec3","so",",","inout","vec3","sp",",","inout","vec3","sq",")","{","int","sr",",","ss",";","vec4","st",";","vec3","su",",","sv",",","sw",",","sx",";","float","sy",",","sz",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sy","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","su","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sv","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sw","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sx","=","vec3","(","0.0",",","0.0",",","0.0",")",";","st","=","a_influence",";","for","(","int","sA","=","0",";","sA","<","4",";","sA","++",")","{","sr","=","int","(","st","[","sA","]",")",";","sz","=","fract","(","st","[","sA","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["su","+=","sz","*","rX","(","sn",",","u_quatsb","[","sr","]",",","u_quatsa","[","sr","]",",","u_transb","[","sr","]",",","u_transa","[","sr","]",",","sy",")",";","sv","+=","sz","*","sf","(","so",",","u_quatsb","[","sr","]",",","u_quatsa","[","sr","]",",","sy",")",";","sw","+=","sz","*","sf","(","sp",",","u_quatsb","[","sr","]",",","u_quatsa","[","sr","]",",","sy",")",";","sx","+=","sz","*","sf","(","sq",",","u_quatsb","[","sr","]",",","u_quatsa","[","sr","]",",","sy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["su","+=","sz","*","rX","(","sn",",","u_quatsb","[","sr","]",",","u_transb","[","sr","]",")",";","sx","+=","sz","*","sf","(","sq",",","u_quatsb","[","sr","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["sv","+=","sz","*","sf","(","so",",","u_quatsb","[","sr","]",")",";","sw","+=","sz","*","sf","(","sp",",","u_quatsb","[","sr","]",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","sn","=","su",";","sq","=","sx",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["so","=","sv",";","sp","=","sw",";"]}]}}]},{type:"textline",tokens:["}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","ss","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","ss",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sn","=","rX","(","sn",",","u_quatsb","[","ss","]",",","u_quatsa","[","ss","]",",","u_transb","[","ss","]",",","u_transa","[","ss","]",",","sy",")",";","so","=","sf","(","so",",","u_quatsb","[","ss","]",",","u_quatsa","[","ss","]",",","sy",")",";","sp","=","sf","(","sp",",","u_quatsb","[","ss","]",",","u_quatsa","[","ss","]",",","sy",")",";","sq","=","sf","(","sq",",","u_quatsb","[","ss","]",",","u_quatsa","[","ss","]",",","sy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sn","=","rX","(","sn",",","u_quatsb","[","ss","]",",","u_transb","[","ss","]",")",";","sq","=","sf","(","sq",",","u_quatsb","[","ss","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["so","=","sf","(","so",",","u_quatsb","[","ss","]",")",";","sp","=","sf","(","sp",",","u_quatsb","[","ss","]",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","sM","(","inout","vec3","sC",",","in","vec3","sD",",","in","float","sE",",","in","float","sF",",","in","float","sG",",","in","vec3","sH",",","in","float","sI",")","{","vec3","sJ",";","float","sK",",","sL",";","sK","=","length","(","sD",")",";","sL","=","sF","*","(","1.0","+","0.1","*","fract","(","sK",")",")",";","sK","=","sE","*","sI","*","(","1.0","+","sin","(","2.0","*","3.14","*","sG","*","sL","+","sK",")",")",";","sL","=","(","sC",".","y","-","sD",".","y",")","*","abs","(","sK",")",";","sL","+=","1.0",";","sL","*=","sL",";","sL","=","sL","*","sL","-","sL",";","sJ","=","sC",";","sJ",".","xz","+=","sH",".","xz","*","sL","*","sign","(","sK",")",";","sJ","=","sJ","-","sD",";","if","(","all","(","equal","(","sJ",",","vec3","(","0.0",")",")",")",")","sC","=","sD",";","else","{","sK","=","length","(","sC","-","sD",")",";","sC","=","sD","+","normalize","(","sJ",")","*","sK",";","}","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","sO","(","vec4","sN",")","{","return","sN","*","sN","*","(","3.0","-","2.0","*","sN",")",";","}","vec4","sQ","(","vec4","sP",")","{","return","abs","(","fract","(","sP","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","sS","(","vec4","sR",")","{","return","sO","(","sQ","(","sR",")",")",";","}","void","ti","(","inout","vec3","sT",",","in","float","sU",",","in","vec3","sV",",","in","vec3","sW",",","in","vec3","sX",",","in","float","sY",",","in","float","sZ",",","in","float","s_",",","in","vec3","ta",")","{","vec3","tb",";","vec4","tc",";","vec2","td",",","te",";","float","tf",",","tg",",","th",";","tf","=","dot","(","sX",",","vec3","(","1.0",")",")",";","tg","=","tf","+","ta",".","g",";","th","=","dot","(","sT",",","vec3","(","ta",".","g",")",")",";","td","=","(","sU","+","vec2","(","th",",","tg",")",")",";","tc","=","(","(","fract","(","(","td",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","sW",")","*","sY",";","tc","=","sS","(","tc",")",";","te","=","tc",".","xz","+","tc",".","yw",";","te",".","y","=","0.5","-","te",".","y",";","tb","=","te",".","xyx","*","ta",".","rbr","*","vec3","(","sZ","*","sV",".","x",",","s_",",","sZ","*","sV",".","z",")",";","sT","+=","tb",";","}"]}]}}]},{type:"textline",tokens:["void","tp","(","inout","vec3","tj",",","inout","vec3","tk",",","in","vec3","tl",")","{","vec3","tm",",","tn",",","to",";","tm","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["tn","=","tk",";","to","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tn","=","tj",";","to","=","tk",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ti","(","tn",",","u_time",",","tl",",","tm",",","to",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["sM","(","tn",",","to",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","tm",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sM","(","tn",",","to",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","tm",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["tj","+=","tn","-","tk",";","tk","=","tn",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tj","=","tn",";","tk","=","to",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/nodes.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2},"PARTICLE_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_orco_tex_coord",";","varying","vec3","eg",";"]}]}}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_param",name:"node_TEX_COORD_UV_var_a_uv",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"eG",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["eG","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_param",name:"node_UV_MERGED_var_a_uv",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"eF",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["eF","=","node_UV_MERGED_var_a_uv",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_param",name:"node_UVMAP_var_a_uv",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"eH",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["eH","=","node_UVMAP_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"ez",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["ez","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"],is_optional:false},{type:"node_param",name:"tq",qualifier:["varying","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["tq","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"],is_optional:false},{type:"node_param",name:"tr",qualifier:["varying","float"],is_optional:false}],statements:[{type:"textline",tokens:["tr","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"ts",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["ts","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"],is_optional:false},{type:"node_param",name:"tt",qualifier:["varying","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["tt","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","tu","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["eg","=","a_orco_tex_coord",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/halo_color.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["float","tz","(","float","ty",")","{","return","ty","-","floor","(","ty","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","tH","(","inout","float","tA",",","in","float","tB",")","{","float","tC",",","tD",",","tE",",","tF",";","for","(","int","tG","=","0",";","tG","<","NUM_RINGS",";","tG","++",")","{","tC","=","40.0","*","fract","(","tx","/","float","(","tG","+","1",")",")","-","1.0",";","tD","=","300.0","*","(","tz","(","tC",")","-","0.005",")",";","tE","=","tC",";","tF","=","abs","(","tE","*","(","u_halo_size","*","tD","-","tB",")",")",";","tA","+=","1.0","-","min","(","tF",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","tP","(","inout","float","tI",",","in","float","tJ",")","{","float","tK",",","tL",",","tM",",","tN",";","for","(","int","tO","=","0",";","tO","<","NUM_LINES",";","tO","++",")","{","tK","=","fract","(","tx","/","float","(","tO","+","1",")",")","-","1.0",";","tL","=","tK",";","tM","=","1000.0","*","(","tz","(","tK",")","-","0.005",")",";","tN","=","20.0","*","abs","(","tL","*","bM",".","x","+","tM","*","bM",".","y",")",";","tI","+=","1.0","-","min","(","tN",",","1.0",")",";","}","tI","*=","tJ",";","}"]}]}}]},{type:"textline",tokens:["void","tW","(","inout","float","tQ",",","in","vec2","tR",")","{","float","tS",",","tT",",","tU",",","tV",";","tT","=","atan","(","tR",".","y",",","tR",".","x",")",";","tT","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","tU","=","cos","(","tT",")",";","tV","=","sin","(","tT",")",";","tT","=","(","tU","*","tR",".","x","+","tV","*","tR",".","y",")","*","(","tU","*","tR",".","y","-","tV","*","tR",".","x",")",";","tS","=","abs","(","tT",")",";","if","(","tS","<","1.0",")","{","tS","=","(","0.01","*","u_halo_size",")","/","(","tS",")",";","tQ","*=","sqrt","(","min","(","tS",",","1.0",")",")",";","}","}","vec4","uc","(",")","{","vec4","tX",";","vec3","tY",";","float","tZ",",","t_",",","ua",",","ub",";","tZ","=","(","bM",".","x","*","bM",".","x","+","bM",".","y","*","bM",".","y",")",";","t_","=","sqrt","(","tZ",")",";","tZ","=","max","(","1.0","-","tZ",",","0.0",")",";","tZ","=","pow","(","tZ",",","u_halo_hardness",")",";","ua","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["ub","=","0.0",";","tH","(","ub",",","t_",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["t_","=","0.0",";","tP","(","t_",",","tZ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["tW","(","tZ",",","bM",")",";"]}]}}]},{type:"textline",tokens:["tZ","*=","ua",";","tY","=","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["ub","*=","tZ",";","tY","+=","u_halo_rings_color","*","ub",";","tZ","+=","ub",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["t_","*=","ua",";","tY","+=","u_halo_lines_color","*","t_",";","tZ","+=","t_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["tZ","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["t_","=","u_halo_stars_blend","*","(","tw",".","y","-","u_halo_stars_height",")",";","tZ","*=","clamp","(","t_",",","0.0",",","1.0",")",";","tZ","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["tX","=","vec4","(","tY",",","tZ",")",";","return","tX",";","}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["void","uj","(","inout","vec3","ud",",","in","float","ue",",","in","float","uf",",","in","vec4","ug",")","{","float","uh",",","ui",";","uh","=","clamp","(","(","ue","-","u_fog_params",".","z",")","/","u_fog_params",".","y",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOG_TYPE","QUADRATIC",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uh","*=","uh",";"]}]}},{type:"elif",expression:["FOG_TYPE","LINEAR",{type:"equal_expr",places:2}],group:{type:"group",parts:[]}},{type:"elif",expression:["FOG_TYPE","INVERSE_QUADRATIC",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uh","=","sqrt","(","uh",")",";"]}]}}]},{type:"textline",tokens:["if","(","u_fog_params",".","w",">","0.0",")","{","if","(","uf",">","u_fog_params",".","w",")","uh","=","0.0",";","else","if","(","uf",">","0.0",")","{","ui","=","(","u_fog_params",".","w","-","uf",")","/","u_fog_params",".","w",";","uh","*=","ui","*","ui",";","}","}","ug",".","a","=","1.0","-","(","1.0","-","uh",")","*","(","1.0","-","u_fog_params",".","x",")",";","ud","=","mix","(","ud",",","ug",".","rgb",",","ug",".","a",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","up","(","in","mat4","uk",",","in","vec3","ul",")","{","vec3","um",",","un",",","uo",";","um","=","mix","(","uk","[","0","]",".","rgb",",","uk","[","1","]",".","rgb",",","max","(","sign","(","ul",".","x",")",",","0.0",")",")",";","un","=","mix","(","uk","[","2","]",".","rgb",",","uk","[","3","]",".","rgb",",","max","(","sign","(","ul",".","z",")",",","0.0",")",")",";","uo","=","vec3","(","uk","[","0","]",".","a",",","uk","[","1","]",".","a",",","uk","[","2","]",".","a",")",";","un","=","mix","(","um",",","un",",","abs","(","ul",".","z",")",")",";","un","=","mix","(","un",",","uo",",","abs","(","ul",".","y",")",")",";","br","(","un",")",";","return","un",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","ur","(","inout","float","uq",")","{","uq","-=","0.5",";","uq","=","4.0","*","(","uq","*","uq","*","uq",")","+","0.5",";","}"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","uC","(","inout","vec3","us",",","in","float","ut",",","in","vec3","uu",",","in","float","uv",",","in","vec4","uw",",","in","float","ux",")","{","vec3","uy",",","uz",";","float","uA",",","uB",";","uA","=","max","(","uu",".","y",",","0.0",")",";","uB","=","max","(","ut","-","max","(","uv","/","uA",",","0.0",")",",","0.0",")",";","uB","=","uw",".","w","*","uB",";","uy","=","vec3","(","0.0",",","0.02",",","0.05",")",";","uz","=","uw",".","rgb",";","uB","=","min","(","uB",",","1.0",")",";","ur","(","uB",")",";","uB","*=","clamp","(","2.0","-","ux",",","0.0",",","1.0",")",";","uy","=","mix","(","uz",",","uy",",","min","(","uA",",","1.0",")",")",";","uv","=","clamp","(","-","uv","*","0.03",",","0.0",",","0.8",")",";","uy","*=","1.0","-","uv",";","us","=","mix","(","us",",","uy",",","uB",")",";","}"]}]}}]}]}}]},{type:"textline",tokens:["void","uJ","(","inout","vec3","uD",",","float","uE",",","vec3","uF",",","float","uG",")","{","vec4","uH",";","vec3","uI",";"]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uI","=","up","(","u_cube_fog",",","uF",")",";","uH","=","vec4","(","uI",",","u_fog_color_density",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uH","=","u_fog_color_density",";"]}]}}]},{type:"textline",tokens:["uj","(","uD",",","uE",",","bC",".","y",",","uH",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uC","(","uD",",","uE",",","uF",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","uG",")",";"]}]}},{type:"else",group:{type:"group",parts:[]}}]},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","uQ","(","vec3","uM",",","float","uN",",","vec2","uO",")","{","vec2","uP",";","uP","=","vec2","(","(","uM",".","x","-","uO",".","x",")","/","uN",",","-","(","uM",".","z","-","uO",".","y",")","/","uN",")",";","return","fract","(","uP",")",";","}","vec2","uU","(","vec2","uR",",","float","uS",",","vec2","uT",")","{","return","vec2","(","uR",".","x","*","uS",",","-","uR",".","y","*","uS",")","+","uT",";","}","c","uV","(",")","{","return","c","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","c","vq","(","vec3","uW",",","vec3","uX",",","vec3","uY",",","vec3","uZ",",","vec3","u_",",","PRECISION","sampler2D","va",",","sampler2D","vb",",","vec3","vc",",","float","vd",",","vec3","ve",",","vec4","vf",",","mat4","vg",")","{","mat4","vh",";","vec4","vi",";","vec2","vj",",","vk",",","vl",";","float","vm",",","vn",";","vec3","vo",";","vo","=","i","(","vf",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","vm","=","-","vo",".","x",";","vn","=","-","vo",".","z",";","vj","=","vec2","(","ve",".","x","+","vd","*","(","-","1.0","-","vm",")","/","2.0",",","ve",".","z","+","vd","*","(","1.0","-","vn",")","/","2.0",")",";","vk","=","uQ","(","u_",",","vd",",","vj",")",";","vn","=","vd","/","2.0",";","vl","=","abs","(","uU","(","vk","-","vec2","(","0.5",")",",","vd",",","vec2","(","0.0",")",")",")",";","vn","=","vn","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","vl",")",">","vn",")","return","uV","(",")",";","vn","=","vd","/","vc",".","z",";","vl","=","(","vk","-","vec2","(","0.5",")",")","*","vn","+","vec2","(","0.5",")",";","vo","=","vo","*","(","vd","/","vc",".","z","-","1.0",")","/","2.0",";","vl",".","x","+=","vo",".","x",";","vl",".","y","-=","vo",".","z",";","vi","=","texture2D","(","vb",",","vl",")",";","vn","=","vi",".","r",";","if","(","vn","<","u_scale_threshold",")","return","uV","(",")",";","vm","=","vc",".","y","-","vc",".","x",";","vm","=","vc",".","y","-","texture2D","(","va",",","vl",")",".","r","*","vm",";","vl","=","uW",".","xz","-","u_",".","xz",";","u_",".","xz","=","uU","(","vk",",","vd",",","vj",")",";","u_",".","y","=","vm",";","uW",".","xz","=","u_",".","xz","+","vl",";","uW",".","y","*=","vn",";","uW",".","y","+=","vm",";","vo","=","vi",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uW","-=","u_",";","vh","=","ro","(","ve",",","u_",",","vg",")",";","c","vp","=","rB","(","uW",",","u_",",","uX",",","uY",",","uZ",",","vh",")",";","vp",".","b","=","u_",";","vp",".","f","=","vo",";","return","E","(","vp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","E","(","c","(","uW",",","u_",",","uX",",","uY",",","uZ",",","vo",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","vx","(","mat4","vr",",","vec4","vs",",","mat4","vt",")","{","vec4","vu",";","float","vv",";","vec2","vw",";","vw","=","(","vr","*","vt","[","3","]",")",".","xy",";","vv","=","SHADOW_TEX_RES","/","2.0",";","vw","=","floor","(","vw","*","vv","+","0.5",")","/","vv","-","vw",";","vu","=","vr","*","vs",";","vu",".","xy","+=","vw",";","vu",".","xyz","=","0.5","*","(","vu",".","xyz","+","vu",".","w",")",";","return","vu",";","}","void","vC","(","vec3","vy",",","vec3","vz",")","{","vec4","vA",";","mat4","vB",";"]},{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["vB","=","O","(","u_v_light_tsr","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vB","=","O","(","mat3","(","u_v_light_ts","[","0","]",",","u_v_light_r","[","0","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vA","=","vB","*","vec4","(","vy","+","u_normal_offset","*","vz",",","1.0",")",";","bI","=","vx","(","u_p_light_matrix0",",","vA",",","vB",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["vB","=","O","(","u_v_light_tsr","[","1","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vB","=","O","(","mat3","(","u_v_light_ts","[","1","]",",","u_v_light_r","[","1","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vA","=","vB","*","vec4","(","vy","+","u_normal_offset","*","vz",",","1.0",")",";","bJ","=","vx","(","u_p_light_matrix1",",","vA",",","vB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["vB","=","O","(","u_v_light_tsr","[","2","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vB","=","O","(","mat3","(","u_v_light_ts","[","2","]",",","u_v_light_r","[","2","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vA","=","vB","*","vec4","(","vy","+","u_normal_offset","*","vz",",","1.0",")",";","bK","=","vx","(","u_p_light_matrix2",",","vA",",","vB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["vB","=","O","(","u_v_light_tsr","[","3","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vB","=","O","(","mat3","(","u_v_light_ts","[","3","]",",","u_v_light_r","[","3","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vA","=","vB","*","vec4","(","vy","+","u_normal_offset","*","vz",",","1.0",")",";","bL","=","vx","(","u_p_light_matrix3",",","vA",",","vB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["bJ","=","vx","(","u_p_light_matrix1",",","vA",",","vB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["bK","=","vx","(","u_p_light_matrix2",",","vA",",","vB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["bL","=","vx","(","u_p_light_matrix3",",","vA",",","vB",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/lighting_nodes.glslf"] = {type:"group",parts:[{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","vD","=","0.5",";"]},{type:"node",name:"LIGHTING_BEGIN",declarations:[{type:"node_out",name:"wa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wd",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"we",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"wf",qualifier:["vec2"],is_optional:true},{type:"node_out",name:"wg",qualifier:["vec2"],is_optional:true},{type:"node_out",name:"wh",qualifier:["vec4"],is_optional:true},{type:"node_out",name:"wi",qualifier:["float"],is_optional:true},{type:"node_out",name:"wj",qualifier:["vec4"],is_optional:true}],statements:[{type:"textline",tokens:["wa","=","vE",";","wb","=","vF",";","wc","=","vG",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wd"],statements:[{type:"textline",tokens:["wd","=","vH",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_we"],statements:[{type:"textline",tokens:["we","=","vJ",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wg"],statements:[{type:"textline",tokens:["wg","=","vL",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wf"],statements:[{type:"textline",tokens:["wf","=","vM",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wh"],statements:[{type:"textline",tokens:["wh","=","vN",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wi"],statements:[{type:"textline",tokens:["wi","=","vO",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wj"],statements:[{type:"textline",tokens:["wj","=","vP",";"]}]}]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"wk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wl",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wn",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"wo",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["wn","=","vec4","(","wk","+","wm","*","wl",",","ZERO_VALUE_NODES",")",";","wo","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"wp",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"wq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wr",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ws",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wt",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wr","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["wt","=","vD",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["wt","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["ws","=","u_light_color_intensities","[","LAMP_IND","]",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_SHADOW_MAP_IND",1,{type:"negative_expr",places:1},{type:"non_equal_expr",places:2}],statements:[{type:"textline",tokens:["ws","*=","wp","[","LAMP_SHADOW_MAP_IND","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["vZ","=","u_light_positions","[","LAMP_IND","]",";","wq","=","vZ","-","vI",";"]},{type:"textline",tokens:["vS","=","length","(","wq",")",";","ws","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","vS","*","vS",")",";","wq","=","normalize","(","wq",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["vZ","=","u_light_directions","[","LAMP_IND","]",";","vS","=","dot","(","wq",",","vZ",")",";","vS","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","vS","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","ws","*=","vS",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["wq","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"wu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wv",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"ww",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wx",qualifier:["float"],is_optional:false},{type:"node_in",name:"wy",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wz",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wz","=","ZERO_VALUE_NODES",";","if","(","wv",".","r","!=","ZERO_VALUE_NODES",")","{","vS","=","(","UNITY_VALUE_NODES","-","wx",")","*","dot","(","ww",",","wu",")","+","wx",";","if","(","wy","[","0","]","==","ZERO_VALUE_NODES",")","{","wz","=","UNITY_VALUE_NODES",";","}","else","{","vS","=","UNITY_VALUE_NODES","+","abs","(","vS",")",";","vS","=","wy","[","1","]","+","(","UNITY_VALUE_NODES","-","wy","[","1","]",")","*","pow","(","vS",",","wy","[","0","]",")",";","wz","=","clamp","(","vS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","wz","=","max","(","wz",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"wA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wB",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wD",qualifier:["float"],is_optional:false},{type:"node_out",name:"wE",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wE","=","ZERO_VALUE_NODES",";","if","(","wB",".","r","!=","ZERO_VALUE_NODES",")","{","vS","=","(","UNITY_VALUE_NODES","-","wD",")","*","dot","(","wC",",","wA",")","+","wD",";","wE","=","max","(","vS",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"wF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wG",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wI",qualifier:["float"],is_optional:false},{type:"node_in",name:"wJ",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wK",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wK","=","ZERO_VALUE_NODES",";","if","(","wG",".","r","!=","ZERO_VALUE_NODES",")","{","vS","=","(","UNITY_VALUE_NODES","-","wI",")","*","dot","(","wH",",","wF",")","+","wI",";","if","(","wJ","[","0","]",">","ZERO_VALUE_NODES",")","{","vT","=","max","(","dot","(","wH",",","vK",")",",","ZERO_VALUE_NODES",")",";","vU","=","wJ","[","0","]","*","wJ","[","0","]",";","vV","=","UNITY_VALUE_NODES","-","vD","*","(","vU","/","(","vU","+","0.33",")",")",";","vZ","=","wF","-","vS","*","wH",";","v_","=","vK","-","vT","*","wH",";"]},{type:"textline",tokens:["if","(","length","(","vZ",")","==","ZERO_VALUE_NODES","||","length","(","v_",")","==","ZERO_VALUE_NODES","||","abs","(","vS",")",">","UNITY_VALUE_NODES","||","abs","(","vT",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["wK","=","vS","*","vV",";","else","{","vW","=","acos","(","vS",")",";","vT","=","acos","(","vT",")",";","vZ","=","normalize","(","vZ",")",";","v_","=","normalize","(","v_",")",";","vX","=","max","(","vW",",","vT",")",";","vY","=","min","(","vW",",","vT",")",";","vY","*=","0.95",";","vT","=","max","(","dot","(","vZ",",","v_",")",",","ZERO_VALUE_NODES",")",";","vU","=","0.45","*","(","vU","/","(","vU","+","0.09",")",")",";","wK","=","vS","*","(","vV","+","(","vU","*","vT","*","sin","(","vX",")","*","tan","(","vY",")",")",")",";","}","}","else","wK","=","vS",";","wK","=","max","(","wK",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"wL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wM",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wO",qualifier:["float"],is_optional:false},{type:"node_in",name:"wP",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wQ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wQ","=","ZERO_VALUE_NODES",";","if","(","wM",".","r","!=","ZERO_VALUE_NODES",")","{","vS","=","(","UNITY_VALUE_NODES","-","wO",")","*","dot","(","wN",",","wL",")","+","wO",";","vY","=","max","(","dot","(","wN",",","vK",")",",","ZERO_VALUE_NODES",")",";","if","(","wP","[","0","]","<=","UNITY_VALUE_NODES",")","wQ","=","vS","*","pow","(","max","(","vY","*","vS",",","0.1",")",",","wP","[","0","]","-","UNITY_VALUE_NODES",")",";","else","wQ","=","vS","*","pow","(","1.0001","-","vY",",","wP","[","0","]","-","UNITY_VALUE_NODES",")",";","wQ","=","max","(","wQ",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"wR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wS",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wU",qualifier:["float"],is_optional:false},{type:"node_in",name:"wV",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wW",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wW","=","ZERO_VALUE_NODES",";","if","(","wS",".","r","!=","ZERO_VALUE_NODES",")","{","vY","=","(","UNITY_VALUE_NODES","-","wU",")","*","dot","(","wT",",","wR",")","+","wU",";","vY","=","acos","(","vY",")",";","if","(","vY","<","wV","[","0","]",")","wW","=","UNITY_VALUE_NODES",";","else","if","(","vY",">","(","wV","[","0","]","+","wV","[","1","]",")","||","wV","[","1","]","==","ZERO_VALUE_NODES",")","wW","=","ZERO_VALUE_NODES",";","else","wW","=","UNITY_VALUE_NODES","-","(","(","vY","-","wV","[","0","]",")","/","wV","[","1","]",")",";","wW","=","max","(","wW",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"wX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wY",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"w_",qualifier:["float"],is_optional:false},{type:"node_in",name:"xa",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xb",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xb","=","ZERO_VALUE_NODES",";","if","(","wY",".","g","!=","ZERO_VALUE_NODES",")","{","v_","=","normalize","(","wX","+","vK",")",";","xb","=","(","UNITY_VALUE_NODES","-","w_",")","*","max","(","dot","(","wZ",",","v_",")",",","ZERO_VALUE_NODES",")","+","w_",";","xb","=","pow","(","xb",",","xa","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"xc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xd",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"xe",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xf",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xg","=","ZERO_VALUE_NODES",";","if","(","xd",".","g","!=","ZERO_VALUE_NODES",")","{","v_","=","normalize","(","xc","+","vK",")",";","vY","=","max","(","dot","(","xe",",","v_",")",",","0.001",")",";"]},{type:"textline",tokens:["vS","=","max","(","dot","(","xe",",","vK",")",",","0.01",")",";","vX","=","max","(","dot","(","xe",",","xc",")",",","0.01",")",";","vY","=","tan","(","acos","(","vY",")",")",";","vT","=","max","(","xf","[","0","]",",","0.001",")",";","xg","=","vX","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","vT","*","vT",")",")","*","(","exp","(","-","(","vY","*","vY",")","/","(","vT","*","vT",")",")","/","(","sqrt","(","vS","*","vX",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"xh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xi",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"xj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xk",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xl",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xl","=","ZERO_VALUE_NODES",";","if","(","xi",".","g","!=","ZERO_VALUE_NODES",")","{","v_","=","normalize","(","xh","+","vK",")",";","vX","=","acos","(","dot","(","v_",",","xj",")",")",";","if","(","vX","<","xk","[","0","]",")","xl","=","UNITY_VALUE_NODES",";","else","if","(","vX",">=","xk","[","0","]","+","xk","[","1","]","||","xk","[","1","]","==","ZERO_VALUE_NODES",")","xl","=","ZERO_VALUE_NODES",";","else","xl","=","UNITY_VALUE_NODES","-","(","vX","-","xk","[","0","]",")","/","xk","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"xm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xn",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"xo",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xp",qualifier:["float"],is_optional:false},{type:"node_in",name:"xq",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xr",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xr","=","ZERO_VALUE_NODES",";","if","(","xn",".","g","!=","ZERO_VALUE_NODES",")","{","if","(","xq","[","0","]","<","1.0","||","xq","[","1","]","==","ZERO_VALUE_NODES",")","xr","=","ZERO_VALUE_NODES",";","else","{","if","(","xq","[","1","]","<","100.0",")","xq","[","1","]","=","sqrt","(","1.0","/","xq","[","1","]",")",";","else","xq","[","1","]","=","10.0","/","xq","[","1","]",";","v_","=","normalize","(","vK","+","xm",")",";","vX","=","(","UNITY_VALUE_NODES","-","xp",")","*","max","(","dot","(","xo",",","v_",")",",","ZERO_VALUE_NODES",")","+","xp",";","if","(","vX","<","ZERO_VALUE_NODES",")","xr","=","ZERO_VALUE_NODES",";","else","{","vS","=","max","(","dot","(","xo",",","vK",")",",","0.01",")",";","vT","=","dot","(","xo",",","xm",")",";","if","(","vT","<=","0.01",")","xr","=","ZERO_VALUE_NODES",";","else","{","vY","=","max","(","dot","(","vK",",","v_",")",",","0.01",")",";","vU","=","UNITY_VALUE_NODES",";","vS","=","(","2.0","*","vX","*","vS",")","/","vY",";","vT","=","(","2.0","*","vX","*","vT",")","/","vY",";","vT","=","min","(","min","(","vU",",","vS",")",",","vT",")",";","vS","=","sqrt","(","pow","(","xq","[","0","]",",","2.0",")","+","pow","(","vY",",","2.0",")","-","UNITY_VALUE_NODES",")",";","vY","=","pow","(","vS","-","vY",",","2.0",")","/","pow","(","vS","+","vY",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","vY","*","(","vS","+","vY",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","vY","*","(","vS","-","vY",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","vX","=","acos","(","vX",")",";","xr","=","max","(","vY","*","vT","*","exp","(","-","pow","(","vX",",","2.0",")","/","(","2.0","*","pow","(","xq","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"xs",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"xt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xu",qualifier:["float"],is_optional:false},{type:"node_in",name:"xv",qualifier:["float"],is_optional:false},{type:"node_in",name:"xw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xy",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"xz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xC",qualifier:["float"],is_optional:false},{type:"node_out",name:"xD",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"xE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["xE","=","xt","+","xB","*","xA","*","xv",";","xD","=","xs","+","vec4","(","xB","*","xz","*","xu",",","xv",")",";"]}]},{type:"node",name:"LIGHTING_END",declarations:[{type:"node_in",name:"xF",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"xG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["vQ","=","xF",".","rgb",";","vR","=","xG",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","xH","(","vec3","vE",",","vec3","vF",",","vec3","vG",",","vec3","vH",",","vec3","vI",",","vec3","vJ",",","vec3","vK",",","vec2","vL",",","vec2","vM",",","vec4","vN",",","float","vO",",","vec4","vP",",","out","vec3","vQ",",","out","vec3","vR",")","{","float","vS",",","vT",",","vU",",","vV",",","vW",",","vX",",","vY",";","vec3","vZ",",","v_",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/particles_nodes.glslf"] = {type:"group",parts:[{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NODE_TEX_ROW",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","xI","=","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xN","(","vec3","xJ",")","{","float","xK",",","xL",";","vec4","xM",";","xM","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","xM","=","mix","(","vec4","(","xJ",".","bg",",","xM",".","wz",")",",","vec4","(","xJ",".","gb",",","xM",".","xy",")",",","step","(","xJ",".","b",",","xJ",".","g",")",")",";","xM","=","mix","(","vec4","(","xM",".","xyw",",","xJ",".","r",")",",","vec4","(","xJ",".","r",",","xM",".","yzx",")",",","step","(","xM",".","x",",","xJ",".","r",")",")",";","xK","=","xM",".","x","-","min","(","xM",".","w",",","xM",".","y",")",";","xL","=","1.0e-10",";","return","vec3","(","abs","(","xM",".","z","+","(","xM",".","w","-","xM",".","y",")","/","(","6.0","*","xK","+","xL",")",")",",","xK","/","(","xM",".","x","+","xL",")",",","xM",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xR","(","vec3","xO",")","{","vec3","xP",";","vec4","xQ",";","xQ","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","xP","=","abs","(","fract","(","vec3","(","xO",".","r",",","xO",".","r",",","xO",".","r",")","+","xQ",".","xyz",")","*","6.0","-","xQ",".","www",")",";","return","xO",".","b","*","mix","(","xQ",".","xxx",",","clamp","(","xP","-","xQ",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","xO",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xT","(","vec2","xS",")","{","return","vec3","(","xS","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","xV","(","vec3","xU",")","{","return","vec2","(","xU",".","xy","*","xI","+","vec2","(","xI",",","xI",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"yF",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"yG",qualifier:["float"],is_optional:true},{type:"node_out",name:"yH",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yF"],statements:[{type:"textline",tokens:["yF","=","normalize","(","yw",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yG"],statements:[{type:"textline",tokens:["yG","=","abs","(","yw",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yH"],statements:[{type:"textline",tokens:["yH","=","length","(","yw",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"yI",qualifier:["float"],is_optional:false},{type:"node_in",name:"yJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"yK",qualifier:["float"],is_optional:false},{type:"node_out",name:"yL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yL","=","vec3","(","yI",",","yJ",",","yK",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"yM",qualifier:["float"],is_optional:false},{type:"node_in",name:"yN",qualifier:["float"],is_optional:false},{type:"node_in",name:"yO",qualifier:["float"],is_optional:false},{type:"node_out",name:"yP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yP","=","xR","(","vec3","(","yM",",","yN",",","yO",")",")",";"]}]},{type:"node",name:"EMPTY_UV",declarations:[{type:"node_out",name:"yQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yQ","=","vec3","(","-","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"EMPTY_VC",declarations:[{type:"node_out",name:"yR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yR","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"yS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yS","=","xT","(","bM",")",";"]}]},{type:"node",name:"GEOMETRY_OR",declarations:[{type:"node_out",name:"yT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yT","=","2.0","*","vec3","(","bM",",","ZERO_VALUE_NODES",")","-","vec3","(","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"yU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yU","=","vec3","(","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"yV",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["yV","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"yW",qualifier:["float"],is_optional:false},{type:"node_out",name:"yX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["yW","=","UNITY_VALUE_NODES",";","yX","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"yY",qualifier:["float"],is_optional:false},{type:"node_out",name:"yZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"y_",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["yY","=","UNITY_VALUE_NODES",";","yZ","=","UNITY_VALUE_NODES",";","y_","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"za",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["za","=","yz",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"zb",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["INVERT_FRONTFACING"],statements:[{type:"textline",tokens:["zb","=","(","gl_FrontFacing",")","?","ZERO_VALUE_NODES",":","UNITY_VALUE_NODES",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["zb","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"zc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zc","=","ye",";"]}]},{type:"node",name:"GEOMETRY_LO",declarations:[{type:"node_out",name:"zd",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zd","[","0","]","=","yw","[","0","]",";","zd","[","1","]","=","yw","[","1","]",";","zd","[","2","]","=","yw","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"ze",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ze","=","vec3","(","yA",".","r",",","-","yA",".","b",",","yA",".","g",")",";"]}]},{type:"node",name:"NEW_GEOMETRY",declarations:[{type:"node_out",name:"zf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zl",qualifier:["float"],is_optional:false},{type:"node_out",name:"zm",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["zf","=","vec3","(","ZERO_VALUE_NODES",")",";","zg","=","vec3","(","ZERO_VALUE_NODES",")",";","zh","=","vec3","(","ZERO_VALUE_NODES",")",";","zi","=","vec3","(","ZERO_VALUE_NODES",")",";","zj","=","vec3","(","ZERO_VALUE_NODES",")",";","zk","=","vec3","(","ZERO_VALUE_NODES",")",";","zl","=","ZERO_VALUE_NODES",";","zm","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"zn",qualifier:["float"],is_optional:false},{type:"node_in",name:"zo",qualifier:["float"],is_optional:false},{type:"node_in",name:"zp",qualifier:["float"],is_optional:false},{type:"node_in",name:"zq",qualifier:["float"],is_optional:false},{type:"node_in",name:"zr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yC","=","xN","(","zr",")",";","yC","[","0","]","+=","(","zn","-","xI",")",";","if","(","yC","[","0","]",">","UNITY_VALUE_NODES",")","yC","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","yC","[","0","]","<","ZERO_VALUE_NODES",")","yC","[","0","]","+=","UNITY_VALUE_NODES",";","yC","*=","vec3","(","UNITY_VALUE_NODES",",","zo",",","zp",")",";","yC","=","mix","(","vec3","(","UNITY_VALUE_NODES",")",",","mix","(","vec3","(","ZERO_VALUE_NODES",")",",","yC",",","step","(","vec3","(","ZERO_VALUE_NODES",")",",","yC",")",")",",","step","(","yC",",","vec3","(","UNITY_VALUE_NODES",")",")",")",";","zs","=","mix","(","zr",",","xR","(","yC",")",",","zq",")",";"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"zt",qualifier:["float"],is_optional:false},{type:"node_in",name:"zu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zv","=","mix","(","zu",",","vec3","(","UNITY_VALUE_NODES",")","-","zu",",","zt",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"zw",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"zx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zy",qualifier:["float"],is_optional:false},{type:"node_out",name:"zz",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zw"],statements:[{type:"textline",tokens:["zw","=","u_lamp_light_color_intensities","[","LAMP_INDEX","]",";"]}]}]},{type:"textline",tokens:["yx","=","u_lamp_light_factors","[","LAMP_INDEX","]",";","yC","=","u_lamp_light_directions","[","LAMP_INDEX","]",";","yD","=","u_lamp_light_positions","[","LAMP_INDEX","]",";","yp","=","yx",".","z",";","if","(","yp","!=","-","UNITY_VALUE_NODES",")","{"]},{type:"textline",tokens:["zx","=","yD","-","bC",";","zy","=","length","(","zx",")",";","zx","=","normalize","(","zx",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zz"],statements:[{type:"textline",tokens:["zz","=","yp","/","(","yp","+","zy","*","zy",")",";","yp","=","yx",".","x",";","yq","=","yx",".","y",";","if","(","yp",">","-","UNITY_VALUE_NODES",")","{","yr","=","dot","(","zx",",","yC",")",";","yr","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","yr","-","yp",")","/","yq",")",";","zz","*=","yr",";","}"]}]}]},{type:"textline",tokens:["}","else","{"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zx"],statements:[{type:"textline",tokens:["zx","=","yC",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zy"],statements:[{type:"textline",tokens:["zy","=","length","(","yD","-","bC",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zz"],statements:[{type:"textline",tokens:["zz","=","UNITY_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"zA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zB",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"zC",qualifier:["float"],is_optional:true},{type:"node_param",name:"xW",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zB"],statements:[{type:"textline",tokens:["zB","=","xW",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zC"],statements:[{type:"textline",tokens:["zC","=","-","dot","(","zA",",","xW",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"zD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zE","=","-","(","yf","*","vec4","(","zD",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"BSDF_ANISOTROPIC",declarations:[{type:"node_in",name:"zF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zG",qualifier:["float"],is_optional:false},{type:"node_in",name:"zH",qualifier:["float"],is_optional:false},{type:"node_in",name:"zI",qualifier:["float"],is_optional:false},{type:"node_in",name:"zJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zL","=","zF",";"]},{type:"textline",tokens:["zG",";","zH",";","zI",";","zJ",";","zK",";"]}]},{type:"node",name:"BSDF_DIFFUSE",declarations:[{type:"node_in",name:"zM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zN",qualifier:["float"],is_optional:false},{type:"node_in",name:"zO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zP","=","zM",";"]},{type:"textline",tokens:["zN",";","zO",";"]}]},{type:"node",name:"BSDF_GLASS",declarations:[{type:"node_in",name:"zQ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zR",qualifier:["float"],is_optional:false},{type:"node_in",name:"zS",qualifier:["float"],is_optional:false},{type:"node_in",name:"zT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zU","=","zQ",";"]},{type:"textline",tokens:["zR",";","zS",";","zT",";"]}]},{type:"node",name:"BSDF_GLOSSY",declarations:[{type:"node_in",name:"zV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zW",qualifier:["float"],is_optional:false},{type:"node_in",name:"zX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zY",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zY","=","zV",";"]},{type:"textline",tokens:["zW",";","zX",";"]}]},{type:"node",name:"BSDF_HAIR",declarations:[{type:"node_in",name:"zZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"z_",qualifier:["float"],is_optional:false},{type:"node_in",name:"Aa",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ab",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ac",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Ac","=","zZ",";"]},{type:"textline",tokens:["z_",";","Aa",";","Ab",";"]}]},{type:"node",name:"BSDF_TRANSPARENT",declarations:[{type:"node_in",name:"Ad",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ae",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Ae","=","Ad",";"]}]},{type:"node",name:"BSDF_TRANSLUCENT",declarations:[{type:"node_in",name:"Af",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ag",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ah",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Ah","=","Af",";"]},{type:"textline",tokens:["Ag",";"]}]},{type:"node",name:"BSDF_REFRACTION",declarations:[{type:"node_in",name:"Ai",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Aj",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ak",qualifier:["float"],is_optional:false},{type:"node_in",name:"Al",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Am",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Am","[","0","]","=","Am","[","1","]","=","Am","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Ai",";","Aj",";","Ak",";","Al",";"]}]},{type:"node",name:"BSDF_TOON",declarations:[{type:"node_in",name:"An",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ao",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ap",qualifier:["float"],is_optional:false},{type:"node_in",name:"Aq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ar",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Ar","=","An",";"]},{type:"textline",tokens:["Ao",";","Ap",";","Aq",";"]}]},{type:"node",name:"BSDF_VELVET",declarations:[{type:"node_in",name:"As",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"At",qualifier:["float"],is_optional:false},{type:"node_in",name:"Au",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Av",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Av","=","As",";"]},{type:"textline",tokens:["At",";","Au",";"]}]},{type:"node",name:"SUBSURFACE_SCATTERING",declarations:[{type:"node_in",name:"Aw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ax",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ay",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Az",qualifier:["float"],is_optional:false},{type:"node_in",name:"AA",qualifier:["float"],is_optional:false},{type:"node_in",name:"AB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AC","[","0","]","=","AC","[","1","]","=","AC","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Aw",";","Ay",";","Az",";","AA",";","AB",";","Ax",";"]}]},{type:"node",name:"EMISSION",declarations:[{type:"node_in",name:"AD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AE",qualifier:["float"],is_optional:false},{type:"node_out",name:"AF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AF","=","AD",";"]},{type:"textline",tokens:["AE",";"]}]},{type:"node",name:"AMBIENT_OCCLUSION",declarations:[{type:"node_in",name:"AG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AH","[","0","]","=","AH","[","1","]","=","AH","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["AG",";"]}]},{type:"node",name:"HOLDOUT",declarations:[{type:"node_out",name:"AI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AI","[","0","]","=","AI","[","1","]","=","AI","[","2","]","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"VOLUME_ABSORPTION",declarations:[{type:"node_in",name:"AJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AK",qualifier:["float"],is_optional:false},{type:"node_out",name:"AL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AL","[","0","]","=","AL","[","1","]","=","AL","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["AJ",";","AK",";"]}]},{type:"node",name:"VOLUME_SCATTER",declarations:[{type:"node_in",name:"AM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AN",qualifier:["float"],is_optional:false},{type:"node_in",name:"AO",qualifier:["float"],is_optional:false},{type:"node_out",name:"AP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AP","[","0","]","=","AP","[","1","]","=","AP","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["AM",";","AN",";","AO",";"]}]},{type:"node",name:"BUMP",declarations:[{type:"node_in",name:"AQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"AR",qualifier:["float"],is_optional:false},{type:"node_in",name:"AS",qualifier:["float"],is_optional:false},{type:"node_in",name:"AT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AU","=","AT",";"]},{type:"textline",tokens:["AQ",";","AR",";","AS",";"]}]},{type:"node",name:"NORMAL_MAP",declarations:[{type:"node_in",name:"AV",qualifier:["float"],is_optional:false},{type:"node_in",name:"AW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AX","=","AW",";"]},{type:"textline",tokens:["AV",";"]}]},{type:"node",name:"VECT_TRANSFORM",declarations:[{type:"node_in",name:"AY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AZ","[","0","]","=","AZ","[","1","]","=","AZ","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["AY",";"]}]},{type:"node",name:"BLACKBODY",declarations:[{type:"node_in",name:"A_",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ba",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Ba","[","0","]","=","Ba","[","1","]","=","Ba","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["A_",";"]}]},{type:"node",name:"WAVELENGTH",declarations:[{type:"node_in",name:"Bb",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Bc","[","0","]","=","Bc","[","1","]","=","Bc","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Bb",";"]}]},{type:"node",name:"SEPXYZ",declarations:[{type:"node_in",name:"Bd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Be",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bf",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Be","=","Bd","[","0","]",";","Bf","=","Bd","[","1","]",";","Bg","=","Bd","[","2","]",";"]}]},{type:"node",name:"COMBXYZ",declarations:[{type:"node_in",name:"Bh",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bi",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bj",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bk",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Bk","[","0","]","=","Bh",";","Bk","[","1","]","=","Bi",";","Bk","[","2","]","=","Bj",";"]}]},{type:"node",name:"BRIGHTCONTRAST",declarations:[{type:"node_in",name:"Bl",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Bm",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bn",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bo",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yr","=","Bm","-","Bn","*","xI",";","Bo","=","max","(","(","UNITY_VALUE_NODES","+","Bn",")","*","Bl","+","yr",",","vec3","(","ZERO_VALUE_NODES",")",")",";"]}]},{type:"node",name:"LIGHT_FALLOFF",declarations:[{type:"node_in",name:"Bp",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bq",qualifier:["float"],is_optional:false},{type:"node_out",name:"Br",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bs",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bt",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Br","=","Bs","=","Bt","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Bp",";","Bq",";"]}]},{type:"node",name:"TEX_IMAGE",declarations:[{type:"node_in",name:"Bu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Bv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Bw",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Bv","[","0","]","=","Bv","[","1","]","=","Bv","[","2","]","=","ZERO_VALUE_NODES",";","Bw","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Bu",";"]}]},{type:"node",name:"TEX_ENVIRONMENT",declarations:[{type:"node_in",name:"Bx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"By",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["By","[","0","]","=","By","[","1","]","=","By","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Bx",";"]}]},{type:"node",name:"TEX_SKY",declarations:[{type:"node_in",name:"Bz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["BA","[","0","]","=","BA","[","1","]","=","BA","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Bz",";"]}]},{type:"node",name:"TEX_NOISE",declarations:[{type:"node_in",name:"BB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"BC",qualifier:["float"],is_optional:false},{type:"node_in",name:"BD",qualifier:["float"],is_optional:false},{type:"node_in",name:"BE",qualifier:["float"],is_optional:false},{type:"node_out",name:"BF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["BF","[","0","]","=","BF","[","1","]","=","BF","[","2","]","=","ZERO_VALUE_NODES",";","BG","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["BB",";","BC",";","BD",";","BE",";"]}]},{type:"node",name:"TEX_WAVE",declarations:[{type:"node_in",name:"BH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"BI",qualifier:["float"],is_optional:false},{type:"node_in",name:"BJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"BK",qualifier:["float"],is_optional:false},{type:"node_in",name:"BL",qualifier:["float"],is_optional:false},{type:"node_out",name:"BM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BN",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["BM","[","0","]","=","BM","[","1","]","=","BM","[","2","]","=","ZERO_VALUE_NODES",";","BN","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["BH",";","BI",";","BJ",";","BK",";","BL",";"]}]},{type:"node",name:"TEX_VORONOI",declarations:[{type:"node_in",name:"BO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"BP",qualifier:["float"],is_optional:false},{type:"node_out",name:"BQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["BQ","[","0","]","=","BQ","[","1","]","=","BQ","[","2","]","=","ZERO_VALUE_NODES",";","BR","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["BO",";","BP",";"]}]},{type:"node",name:"TEX_MUSGRAVE",declarations:[{type:"node_in",name:"BS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"BT",qualifier:["float"],is_optional:false},{type:"node_in",name:"BU",qualifier:["float"],is_optional:false},{type:"node_in",name:"BV",qualifier:["float"],is_optional:false},{type:"node_in",name:"BW",qualifier:["float"],is_optional:false},{type:"node_in",name:"BX",qualifier:["float"],is_optional:false},{type:"node_in",name:"BY",qualifier:["float"],is_optional:false},{type:"node_out",name:"BZ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"B_",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["BZ","[","0","]","=","BZ","[","1","]","=","BZ","[","2","]","=","ZERO_VALUE_NODES",";","B_","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["BS",";","BT",";","BU",";","BV",";","BW",";","BX",";","BY",";"]}]},{type:"node",name:"TEX_GRADIENT",declarations:[{type:"node_in",name:"Ca",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Cb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Cc",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Cb","[","0","]","=","Cb","[","1","]","=","Cb","[","2","]","=","ZERO_VALUE_NODES",";","Cc","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Ca",";"]}]},{type:"node",name:"TEX_MAGIC",declarations:[{type:"node_in",name:"Cd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ce",qualifier:["float"],is_optional:false},{type:"node_in",name:"Cf",qualifier:["float"],is_optional:false},{type:"node_out",name:"Cg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ch",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Cg","[","0","]","=","Cg","[","1","]","=","Cg","[","2","]","=","ZERO_VALUE_NODES",";","Ch","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Cd",";","Ce",";","Cf",";"]}]},{type:"node",name:"TEX_CHECKER",declarations:[{type:"node_in",name:"Ci",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ck",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cl",qualifier:["float"],is_optional:false},{type:"node_out",name:"Cm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Cn",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Cm","[","0","]","=","Cm","[","1","]","=","Cm","[","2","]","=","ZERO_VALUE_NODES",";","Cn","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Ci",";","Cj",";","Ck",";","Cl",";"]}]},{type:"node",name:"TEX_BRICK",declarations:[{type:"node_in",name:"Co",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cs",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ct",qualifier:["float"],is_optional:false},{type:"node_in",name:"Cu",qualifier:["float"],is_optional:false},{type:"node_in",name:"Cv",qualifier:["float"],is_optional:false},{type:"node_in",name:"Cw",qualifier:["float"],is_optional:false},{type:"node_out",name:"Cx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Cy",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Cx","[","0","]","=","Cx","[","1","]","=","Cx","[","2","]","=","ZERO_VALUE_NODES",";","Cy","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Co",";","Cp",";","Cq",";","Cr",";","Cs",";","Ct",";","Cu",";","Cv",";","Cw",";"]}]},{type:"node",name:"ADD_SHADER",declarations:[{type:"node_in",name:"Cz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"CA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CB","=","clamp","(","Cz","+","CA",",","vec3","(","ZERO_VALUE_NODES",")",",","vec3","(","UNITY_VALUE_NODES",")",")",";"]}]},{type:"node",name:"MIX_SHADER",declarations:[{type:"node_in",name:"CC",qualifier:["float"],is_optional:false},{type:"node_in",name:"CD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"CE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yr","=","clamp","(","CC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","CF","=","yr","*","CD","+","(","UNITY_VALUE_NODES","-","yr",")","*","CE",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_out",name:"CG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CH",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CG"],statements:[{type:"textline",tokens:["CG","=","xT","(","bM",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CH"],statements:[{type:"textline",tokens:["CH","=","vec3","(","bM",",","ZERO_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_out",name:"CI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CI","=","vec3","(","bM",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_NO",declarations:[{type:"node_out",name:"CJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CJ","=","yB",";"]}]},{type:"node",name:"TEX_COORD_GE",declarations:[{type:"node_out",name:"CK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CK","=","vec3","(","bM",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_OB",declarations:[{type:"node_out",name:"CL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CL","[","0","]","=","CL","[","1","]","=","CL","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_CA",declarations:[{type:"node_out",name:"CM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CM","[","0","]","=","yw","[","0","]",";","CM","[","1","]","=","yw","[","1","]",";","CM","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_WI",declarations:[{type:"node_out",name:"CN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CN","[","0","]","=","CN","[","1","]","=","CN","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_RE",declarations:[{type:"node_out",name:"CO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CO","[","0","]","=","CO","[","1","]","=","CO","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_out",name:"CP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CP","=","vec3","(","bM",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_out",name:"CQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"CR",qualifier:["float"],is_optional:false},{type:"node_out",name:"CS",qualifier:["float"],is_optional:false},{type:"node_out",name:"CT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CU",qualifier:["float"],is_optional:false},{type:"node_out",name:"CV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CW",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"xX",qualifier:["varying","vec4"],is_optional:true},{type:"node_param",name:"xY",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"xZ",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"x_",qualifier:["varying","vec3"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["PARTICLE_BATCH"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CQ"],statements:[{type:"textline",tokens:["CQ","=","xX","[","0","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CR"],statements:[{type:"textline",tokens:["CR","=","xX","[","1","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CS"],statements:[{type:"textline",tokens:["CS","=","xX","[","2","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CT"],statements:[{type:"textline",tokens:["CT","=","vec3","(","xY",".","r",",","-","xY",".","b",",","xY",".","g",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CU"],statements:[{type:"textline",tokens:["CU","=","xX","[","3","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CV"],statements:[{type:"textline",tokens:["CV","=","vec3","(","xZ",".","r",",","-","xZ",".","b",",","xZ",".","g",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CW"],statements:[{type:"textline",tokens:["CW","=","vec3","(","x_",".","r",",","-","x_",".","b",",","x_",".","g",")",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["CQ","=","ZERO_VALUE_NODES",";","CR","=","ZERO_VALUE_NODES",";","CS","=","ZERO_VALUE_NODES",";","CT","=","vec3","(","ZERO_VALUE_NODES",")",";","CU","=","ZERO_VALUE_NODES",";","CV","=","CT",";","CW","=","CT",";"]}]}]}]},{type:"node",name:"HAIR_INFO",declarations:[{type:"node_out",name:"CX",qualifier:["float"],is_optional:false},{type:"node_out",name:"CY",qualifier:["float"],is_optional:false},{type:"node_out",name:"CZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"C_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CX","=","ZERO_VALUE_NODES",";","CY","=","ZERO_VALUE_NODES",";","CZ","=","ZERO_VALUE_NODES",";","C_","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"OBJECT_INFO",declarations:[{type:"node_out",name:"Da",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Db",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dc",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dd",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Db","=","ZERO_VALUE_NODES",";","Dc","=","ZERO_VALUE_NODES",";","Dd","=","ZERO_VALUE_NODES",";","Da","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"WIREFRAME",declarations:[{type:"node_in",name:"De",qualifier:["float"],is_optional:false},{type:"node_out",name:"Df",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Df","=","De",";"]}]},{type:"node",name:"TANGENT",declarations:[{type:"node_out",name:"Dg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Dg","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LAYER_WEIGHT",declarations:[{type:"node_in",name:"Dh",qualifier:["float"],is_optional:false},{type:"node_in",name:"Di",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Dj",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dk",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Dj","=","Dk","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Di",";","Dh",";"]}]},{type:"node",name:"LIGHT_PATH",declarations:[{type:"node_out",name:"Dl",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dm",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dn",qualifier:["float"],is_optional:false},{type:"node_out",name:"Do",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dp",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dq",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dr",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ds",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dt",qualifier:["float"],is_optional:false},{type:"node_out",name:"Du",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Dl","=","Dm","=","Dn","=","ZERO_VALUE_NODES",";","Do","=","Dp","=","Dq","=","ZERO_VALUE_NODES",";","Dr","=","Dr","=","Dt","=","Du","=","ZERO_VALUE_NODES",";","Ds","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"ATTRIBUTE",declarations:[{type:"node_out",name:"Dv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Dw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Dx",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Dv","=","Dw","=","vec3","(","ZERO_VALUE_NODES",")",";","Dx","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"SCRIPT",declarations:[],statements:[]},{type:"node",name:"CURVE_VEC",declarations:[{type:"node_in",name:"Dy",qualifier:["float"],is_optional:false},{type:"node_in",name:"Dz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["DA","=","Dz",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_R"],statements:[{type:"textline",tokens:["DA",".","r","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","Dz",".","r","+","0.5",",","NODE_TEX_ROW",")",")",".","r","-","0.5",")","*","2.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_G"],statements:[{type:"textline",tokens:["DA",".","g","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","Dz",".","g","+","0.5",",","NODE_TEX_ROW",")",")",".","g","-","0.5",")","*","2.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_B"],statements:[{type:"textline",tokens:["DA",".","b","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","Dz",".","b","+","0.5",",","NODE_TEX_ROW",")",")",".","b","-","0.5",")","*","2.0",";"]}]}]},{type:"textline",tokens:["DA","=","mix","(","Dz",",","DA",",","Dy",")",";"]}]},{type:"node",name:"CURVE_RGB",declarations:[{type:"node_in",name:"DB",qualifier:["float"],is_optional:false},{type:"node_in",name:"DC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DD",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["READ_A"],statements:[{type:"textline",tokens:["yr","=","texture2D","(","u_nodes_texture",",","vec2","(","DC",".","r",",","NODE_TEX_ROW",")",")",".","a",";","yq","=","texture2D","(","u_nodes_texture",",","vec2","(","DC",".","g",",","NODE_TEX_ROW",")",")",".","a",";","yp","=","texture2D","(","u_nodes_texture",",","vec2","(","DC",".","b",",","NODE_TEX_ROW",")",")",".","a",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["yr","=","DC",".","r",";","yq","=","DC",".","g",";","yp","=","DC",".","b",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_R"],statements:[{type:"textline",tokens:["DD",".","r","=","texture2D","(","u_nodes_texture",",","vec2","(","yr",",","NODE_TEX_ROW",")",")",".","r",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["DD",".","r","=","yr",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_G"],statements:[{type:"textline",tokens:["DD",".","g","=","texture2D","(","u_nodes_texture",",","vec2","(","yq",",","NODE_TEX_ROW",")",")",".","g",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["DD",".","g","=","yq",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_B"],statements:[{type:"textline",tokens:["DD",".","b","=","texture2D","(","u_nodes_texture",",","vec2","(","yp",",","NODE_TEX_ROW",")",")",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["DD",".","b","=","yp",";"]}]}]},{type:"textline",tokens:["DD","=","mix","(","DC",",","DD",",","DB",")",";"]}]},{type:"node",name:"VALTORGB",declarations:[{type:"node_in",name:"DE",qualifier:["float"],is_optional:false},{type:"node_out",name:"DF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["yx","=","texture2D","(","u_nodes_texture",",","vec2","(","DE",",","NODE_TEX_ROW",")",")",";","DF","=","yx",".","rgb",";","DG","=","yx",".","a",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"DH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["DI","=","DH",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["DI","=","(","MAPPING_TRS_MATRIX","*","vec4","(","DI",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["DI","=","DI","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["DI","=","DI","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["DI","=","max","(","DI",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["DI","=","min","(","DI",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["DI","=","normalize","(","DI",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"DJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"DK",qualifier:["float"],is_optional:false},{type:"node_out",name:"DL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["DL","=","DJ","+","DK",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["DL","=","clamp","(","DL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"DM",qualifier:["float"],is_optional:false},{type:"node_in",name:"DN",qualifier:["float"],is_optional:false},{type:"node_out",name:"DO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["DO","=","DM","-","DN",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["DO","=","clamp","(","DO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"DP",qualifier:["float"],is_optional:false},{type:"node_in",name:"DQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"DR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["DR","=","DP","*","DQ",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["DR","=","clamp","(","DR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"DS",qualifier:["float"],is_optional:false},{type:"node_in",name:"DT",qualifier:["float"],is_optional:false},{type:"node_out",name:"DU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["DU","=","(","DT","!=","ZERO_VALUE_NODES",")","?","DS","/","DT",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["DU","=","clamp","(","DU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"DV",qualifier:["float"],is_optional:false},{type:"node_in",name:"DW",qualifier:["float"],is_optional:false},{type:"node_out",name:"DX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["DX","=","sin","(","DV",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["DX","=","clamp","(","DX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["DW",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"DY",qualifier:["float"],is_optional:false},{type:"node_in",name:"DZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"D_",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["D_","=","cos","(","DY",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["D_","=","clamp","(","D_",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["DZ",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"Ea",qualifier:["float"],is_optional:false},{type:"node_in",name:"Eb",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ec",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ec","=","tan","(","Ea",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Ec","=","clamp","(","Ec",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Eb",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"Ed",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ee",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ef",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ef","=","(","Ed","<=","UNITY_VALUE_NODES","&&","Ed",">=","-","UNITY_VALUE_NODES",")","?","asin","(","Ed",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Ef","=","clamp","(","Ef",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Ee",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"Eg",qualifier:["float"],is_optional:false},{type:"node_in",name:"Eh",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ei",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ei","=","(","Eg","<=","UNITY_VALUE_NODES","&&","Eg",">=","-","UNITY_VALUE_NODES",")","?","acos","(","Eg",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Ei","=","clamp","(","Ei",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Eh",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"Ej",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ek",qualifier:["float"],is_optional:false},{type:"node_out",name:"El",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["El","=","atan","(","Ej",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["El","=","clamp","(","El",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Ek",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"Em",qualifier:["float"],is_optional:false},{type:"node_in",name:"En",qualifier:["float"],is_optional:false},{type:"node_out",name:"Eo",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","Em","<","ZERO_VALUE_NODES","&&","En","!=","floor","(","En",")",")","Eo","=","ZERO_VALUE_NODES",";","else","if","(","En","==","ZERO_VALUE_NODES",")"]},{type:"textline",tokens:["Eo","=","UNITY_VALUE_NODES",";","else","if","(","Em","<","ZERO_VALUE_NODES",")","Eo","=","mix","(","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","sign","(","mod","(","-","En",",","2.0",")",")",")","*","pow","(","-","Em",",","En",")",";","else","if","(","Em","==","ZERO_VALUE_NODES",")","Eo","=","ZERO_VALUE_NODES",";","else","Eo","=","pow","(","Em",",","En",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Eo","=","clamp","(","Eo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"Ep",qualifier:["float"],is_optional:false},{type:"node_in",name:"Eq",qualifier:["float"],is_optional:false},{type:"node_out",name:"Er",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Er","=","(","Ep",">","ZERO_VALUE_NODES","&&","Eq",">","ZERO_VALUE_NODES",")","?","log2","(","Ep",")","/","log2","(","Eq",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Er","=","clamp","(","Er",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"Es",qualifier:["float"],is_optional:false},{type:"node_in",name:"Et",qualifier:["float"],is_optional:false},{type:"node_out",name:"Eu",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Eu","=","min","(","Es",",","Et",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Eu","=","clamp","(","Eu",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"Ev",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ew",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ex",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ex","=","max","(","Ev",",","Ew",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Ex","=","clamp","(","Ex",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"Ey",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ez",qualifier:["float"],is_optional:false},{type:"node_out",name:"EA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EA","=","floor","(","Ey","+","xI",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EA","=","clamp","(","EA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Ez",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"EB",qualifier:["float"],is_optional:false},{type:"node_in",name:"EC",qualifier:["float"],is_optional:false},{type:"node_out",name:"ED",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ED","=","(","EB","<","EC",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ED","=","clamp","(","ED",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"EE",qualifier:["float"],is_optional:false},{type:"node_in",name:"EF",qualifier:["float"],is_optional:false},{type:"node_out",name:"EG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EG","=","(","EE",">","EF",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EG","=","clamp","(","EG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"EH",qualifier:["float"],is_optional:false},{type:"node_in",name:"EI",qualifier:["float"],is_optional:false},{type:"node_out",name:"EJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EJ","=","abs","(","EI",")",">","0.000001","?","mod","(","EH",",","EI",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EJ","=","clamp","(","EJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"EK",qualifier:["float"],is_optional:false},{type:"node_in",name:"EL",qualifier:["float"],is_optional:false},{type:"node_out",name:"EM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EM","=","abs","(","EK",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EM","=","clamp","(","EM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["EL",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"EN",qualifier:["float"],is_optional:false},{type:"node_in",name:"EO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"EP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"EQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","EN",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","EQ","=","mix","(","EO",",","EP",",","yp",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["EQ","=","clamp","(","EQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"ER",qualifier:["float"],is_optional:false},{type:"node_in",name:"ES",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ET",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"EU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","ER",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","EU","=","mix","(","ES",",","ES","+","ET",",","yp",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["EU","=","clamp","(","EU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"EV",qualifier:["float"],is_optional:false},{type:"node_in",name:"EW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"EX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"EY",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","EV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","EY","=","mix","(","EW",",","EW","*","EX",",","yp",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["EY","=","clamp","(","EY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"EZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"E_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","EZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Fb","=","mix","(","E_",",","E_","-","Fa",",","yp",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fb","=","clamp","(","Fb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"Fc",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ff",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","Fc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yq","=","UNITY_VALUE_NODES","-","yp",";","Ff","=","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","yq",")","+","yp","*","(","vec3","(","UNITY_VALUE_NODES",")","-","Fe",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","Fd",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Ff","=","clamp","(","Ff",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"Fg",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","Fg",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yq","=","UNITY_VALUE_NODES","-","yp",";","Fi","+=","step","(","Fi",",","vec3","(","ZERO_VALUE_NODES",")",")",";","Fj","=","yq","*","Fh","+","yp","*","Fh","/","Fi",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fj","=","clamp","(","Fj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"Fk",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fl",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fn",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","Fk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Fn","=","mix","(","Fl",",","abs","(","Fl","-","Fm",")",",","yp",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fn","=","clamp","(","Fn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"Fo",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","Fo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Fr","=","min","(","Fp",".","rgb",",","Fq",".","rgb","*","yp",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fr","=","clamp","(","Fr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"Fs",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ft",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","Fs",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Fv","=","max","(","Ft",".","rgb",",","Fu",".","rgb","*","yp",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fv","=","clamp","(","Fv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"Fw",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fy",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","Fw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yD","=","vec3","(","UNITY_VALUE_NODES","-","yp",")",";","Fz","=","mix","(","Fx","*","(","yD","+","2.0","*","yp","*","Fy",")",",","vec3","(","UNITY_VALUE_NODES",")","-","(","yD","+","2.0","*","yp","*","(","vec3","(","UNITY_VALUE_NODES",")","-","Fy",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","Fx",")",",","step","(","xI",",","Fx",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fz","=","clamp","(","Fz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"FA",qualifier:["float"],is_optional:false},{type:"node_in",name:"FB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FD",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","FA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yD","=","vec3","(","UNITY_VALUE_NODES",")","-","yp","*","FC",";","yC","=","clamp","(","FB","/","yD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FD","=","mix","(","mix","(","yC",",","vec3","(","UNITY_VALUE_NODES",")",",","step","(","yD",",","vec3","(","ZERO_VALUE_NODES",")",")",")",",","FB",",","step","(","FB",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FD","=","clamp","(","FD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"FE",qualifier:["float"],is_optional:false},{type:"node_in",name:"FF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","FE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yD","=","vec3","(","UNITY_VALUE_NODES","-","yp",")",";","yD","=","yD","+","yp","*","FG",";","yC","=","clamp","(","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","UNITY_VALUE_NODES",")","-","FF",")","/","yD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FH","=","mix","(","yC",",","vec3","(","ZERO_VALUE_NODES",")",",","step","(","yD",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FH","=","clamp","(","FH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"FI",qualifier:["float"],is_optional:false},{type:"node_in",name:"FJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","FI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FL","=","FJ",";","yC","=","xN","(","FK",")",";","if","(","yC",".","y","!=","ZERO_VALUE_NODES",")","{","yD","=","xN","(","FL",")",";","yD",".","x","=","yC",".","x",";","yE","=","xR","(","yD",")",";","FL","=","mix","(","FL",",","yE",",","yp",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FL","=","clamp","(","FL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"FM",qualifier:["float"],is_optional:false},{type:"node_in",name:"FN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","FM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yq","=","UNITY_VALUE_NODES","-","yp",";","FP","=","FN",";","yE","=","xN","(","FP",")",";","if","(","yE",".","y","!=","ZERO_VALUE_NODES",")","{","yD","=","xN","(","FO",")",";","yE",".","y","=","yq","*","yE",".","y","+","yp","*","yD",".","y",";","FP","=","xR","(","yE",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FP","=","clamp","(","FP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"FQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"FR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","FQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yq","=","UNITY_VALUE_NODES","-","yp",";","yE","=","xN","(","FR",")",";","yD","=","xN","(","FS",")",";","yE",".","z","=","yq","*","yE",".","z","+","yp","*","yD",".","z",";","FT","=","xR","(","yE",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FT","=","clamp","(","FT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"FU",qualifier:["float"],is_optional:false},{type:"node_in",name:"FV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","FU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FX","=","FV",";","yD","=","xN","(","FW",")",";","if","(","yD",".","y","!=","ZERO_VALUE_NODES",")","{","yE","=","xN","(","FX",")",";","yE",".","x","=","yD",".","x",";","yE",".","y","=","yD",".","y",";","yC","=","xR","(","yE",")",";","FX","=","mix","(","FX",",","yC",",","yp",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FX","=","clamp","(","FX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"FY",qualifier:["float"],is_optional:false},{type:"node_in",name:"FZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"F_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ga",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","FY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yq","=","UNITY_VALUE_NODES","-","yp",";","yC","=","F_","+","FZ","-","F_","*","FZ",";","Ga","=","FZ","*","(","vec3","(","yq",")","+","vec3","(","yp",")","*","(","(","vec3","(","UNITY_VALUE_NODES",")","-","FZ",")","*","F_","+","yC",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Ga","=","clamp","(","Ga",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"Gb",qualifier:["float"],is_optional:false},{type:"node_in",name:"Gc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ge",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yp","=","clamp","(","Gb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Ge","=","Gc","+","yp","*","(","2.0","*","Gd","-","vec3","(","UNITY_VALUE_NODES",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Ge","=","clamp","(","Ge",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"Gf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["yg","=","Gf",";","yk","=","Gg",";"]}]},{type:"node",name:"MATERIAL_BEGIN",declarations:[{type:"node_in",name:"Gh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gj",qualifier:["float"],is_optional:false},{type:"node_in",name:"Gk",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"Gl",qualifier:["float"],is_optional:true},{type:"node_out",name:"Gm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Go",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gr",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Gs",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Gt",qualifier:["vec4"],is_optional:false},{type:"node_param",name:"ya",qualifier:["const","vec2"],is_optional:true},{type:"node_param",name:"yb",qualifier:["const","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Go","=","clamp","(","Gh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["Gp","=","yb","[","0","]","*","clamp","(","Gi",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["Gq","=","normalize","(","Gk",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["Gq","=","yB",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["SHADELESS_MAT",{type:"logic_negative_expr",places:1}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"textline",tokens:["Gm","=","Gl","*","Go",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["Gm","=","yn","*","Go",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["Go","*=","Gj",";"]}]}]},{type:"textline",tokens:["Gn","=","yo","*","u_environment_energy","*","dS","(","Gq",")",";","Gt","=","vec4","(","1.0",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],statements:[{type:"textline",tokens:["Gr","=","vec2","(","ya","[","0","]",",","ya","[","1","]",")",";"]},{type:"textline",tokens:["Gs","=","vec2","(","yb","[","1","]",",","yb","[","2","]",")",";"]}]}]},{type:"textline",tokens:["yj","=","Gt",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["Gm","=","vec3","(","ZERO_VALUE_NODES",")",";","Gn","=","vec3","(","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATERIAL_END",declarations:[{type:"node_in",name:"Gu",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"Gv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gx",qualifier:["float"],is_optional:true},{type:"node_in",name:"Gy",qualifier:["float"],is_optional:true},{type:"node_in",name:"Gz",qualifier:["float"],is_optional:true},{type:"node_out",name:"GA",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"GB",qualifier:["float"],is_optional:true},{type:"node_out",name:"GC",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"GD",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"GE",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"yc",qualifier:["float"],is_optional:false},{type:"node_param",name:"yd",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Gx",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GA"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["GA","=","Gu",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["GA","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["GA","+=","Gv",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GC"],statements:[{type:"textline",tokens:["GC","=","Gw",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GD"],statements:[{type:"textline",tokens:["GD","=","Gu",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GE"],statements:[{type:"textline",tokens:["GE","=","Gv",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GB"],statements:[{type:"textline",tokens:["GB","=","clamp","(","Gz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["yp","=","max","(","max","(","Gv",".","r",",","Gv",".","g",")",",","Gv",".","b",")","*","Gy",";","GB","=","clamp","(","Gz","*","(","UNITY_VALUE_NODES","-","yp",")","+","yp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]}]},{type:"node_else",statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GB"],statements:[{type:"textline",tokens:["GB","=","clamp","(","yc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["yp","=","max","(","max","(","Gv",".","r",",","Gv",".","g",")",",","Gv",".","b",")","*","yd",";","GB","=","yc","*","(","UNITY_VALUE_NODES","-","yp",")","+","yp",";"]}]}]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["yh","=","Gv",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["yh","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["yi","=","Gw",";"]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"GF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"GI",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"GJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["GI","=","vec4","(","GF","+","GH","*","GG",",","ZERO_VALUE_NODES",")",";","GJ","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"GK",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"GL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"GM",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"GN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"GO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["GM","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["GO","=","xI",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["GO","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["GN","=","u_light_color_intensities","[","LAMP_IND","]",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_SHADOW_MAP_IND",1,{type:"negative_expr",places:1},{type:"non_equal_expr",places:2}],statements:[{type:"textline",tokens:["GN","*=","GK","[","LAMP_SHADOW_MAP_IND","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["yC","=","u_light_positions","[","LAMP_IND","]",";","GL","=","yC","-","yA",";"]},{type:"textline",tokens:["yp","=","length","(","GL",")",";","GN","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","yp","*","yp",")",";","GL","=","normalize","(","GL",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["yC","=","u_light_directions","[","LAMP_IND","]",";","yp","=","dot","(","GL",",","yC",")",";","yp","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","yp","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","GN","*=","yp",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["GL","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"GP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GQ",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"GR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GS",qualifier:["float"],is_optional:false},{type:"node_in",name:"GT",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"GU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["GU","=","ZERO_VALUE_NODES",";","if","(","GQ",".","r","!=","ZERO_VALUE_NODES",")","{","yp","=","(","UNITY_VALUE_NODES","-","GS",")","*","dot","(","GR",",","GP",")","+","GS",";","if","(","GT","[","0","]","==","ZERO_VALUE_NODES",")","{","GU","=","UNITY_VALUE_NODES",";","}","else","{","yp","=","UNITY_VALUE_NODES","+","abs","(","yp",")",";","yp","=","GT","[","1","]","+","(","UNITY_VALUE_NODES","-","GT","[","1","]",")","*","pow","(","yp",",","GT","[","0","]",")",";","GU","=","clamp","(","yp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","GU","=","max","(","GU",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"GV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GW",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"GX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GY",qualifier:["float"],is_optional:false},{type:"node_out",name:"GZ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["GZ","=","ZERO_VALUE_NODES",";","if","(","GW",".","r","!=","ZERO_VALUE_NODES",")","{","yp","=","(","UNITY_VALUE_NODES","-","GY",")","*","dot","(","GX",",","GV",")","+","GY",";","GZ","=","max","(","yp",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"G_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ha",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Hb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hc",qualifier:["float"],is_optional:false},{type:"node_in",name:"Hd",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"He",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["He","=","ZERO_VALUE_NODES",";","if","(","Ha",".","r","!=","ZERO_VALUE_NODES",")","{","yp","=","(","UNITY_VALUE_NODES","-","Hc",")","*","dot","(","Hb",",","G_",")","+","Hc",";","if","(","Hd","[","0","]",">","ZERO_VALUE_NODES",")","{","yq","=","max","(","dot","(","Hb",",","ye",")",",","ZERO_VALUE_NODES",")",";","yr","=","Hd","[","0","]","*","Hd","[","0","]",";","ys","=","UNITY_VALUE_NODES","-","xI","*","(","yr","/","(","yr","+","0.33",")",")",";","yC","=","G_","-","yp","*","Hb",";","yE","=","ye","-","yq","*","Hb",";"]},{type:"textline",tokens:["if","(","length","(","yC",")","==","ZERO_VALUE_NODES","||","length","(","yE",")","==","ZERO_VALUE_NODES","||","abs","(","yp",")",">","UNITY_VALUE_NODES","||","abs","(","yq",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["He","=","yp","*","ys",";","else","{","yt","=","acos","(","yp",")",";","yq","=","acos","(","yq",")",";","yC","=","normalize","(","yC",")",";","yE","=","normalize","(","yE",")",";","yu","=","max","(","yt",",","yq",")",";","yv","=","min","(","yt",",","yq",")",";","yv","*=","0.95",";","yq","=","max","(","dot","(","yC",",","yE",")",",","ZERO_VALUE_NODES",")",";","yr","=","0.45","*","(","yr","/","(","yr","+","0.09",")",")",";","He","=","yp","*","(","ys","+","(","yr","*","yq","*","sin","(","yu",")","*","tan","(","yv",")",")",")",";","}","}","else","He","=","yp",";","He","=","max","(","He",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"Hf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hg",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Hh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hi",qualifier:["float"],is_optional:false},{type:"node_in",name:"Hj",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Hk",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Hk","=","ZERO_VALUE_NODES",";","if","(","Hg",".","r","!=","ZERO_VALUE_NODES",")","{","yp","=","(","UNITY_VALUE_NODES","-","Hi",")","*","dot","(","Hh",",","Hf",")","+","Hi",";","yv","=","max","(","dot","(","Hh",",","ye",")",",","ZERO_VALUE_NODES",")",";","if","(","Hj","[","0","]","<=","UNITY_VALUE_NODES",")","Hk","=","yp","*","pow","(","max","(","yv","*","yp",",","0.1",")",",","Hj","[","0","]","-","UNITY_VALUE_NODES",")",";","else","Hk","=","yp","*","pow","(","1.0001","-","yv",",","Hj","[","0","]","-","UNITY_VALUE_NODES",")",";","Hk","=","max","(","Hk",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"Hl",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hm",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Hn",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ho",qualifier:["float"],is_optional:false},{type:"node_in",name:"Hp",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Hq",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Hq","=","ZERO_VALUE_NODES",";","if","(","Hm",".","r","!=","ZERO_VALUE_NODES",")","{","yv","=","(","UNITY_VALUE_NODES","-","Ho",")","*","dot","(","Hn",",","Hl",")","+","Ho",";","yv","=","acos","(","yv",")",";","if","(","yv","<","Hp","[","0","]",")","Hq","=","UNITY_VALUE_NODES",";","else","if","(","yv",">","(","Hp","[","0","]","+","Hp","[","1","]",")","||","Hp","[","1","]","==","ZERO_VALUE_NODES",")","Hq","=","ZERO_VALUE_NODES",";","else","Hq","=","UNITY_VALUE_NODES","-","(","(","yv","-","Hp","[","0","]",")","/","Hp","[","1","]",")",";","Hq","=","max","(","Hq",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"Hr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hs",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Ht",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hu",qualifier:["float"],is_optional:false},{type:"node_in",name:"Hv",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Hw",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Hw","=","ZERO_VALUE_NODES",";","if","(","Hs",".","g","==","UNITY_VALUE_NODES",")","{","yE","=","normalize","(","Hr","+","ye",")",";","Hw","=","(","UNITY_VALUE_NODES","-","Hu",")","*","max","(","dot","(","Ht",",","yE",")",",","ZERO_VALUE_NODES",")","+","Hu",";","Hw","=","pow","(","Hw",",","Hv","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"Hx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hy",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Hz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HA",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"HB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["HB","=","ZERO_VALUE_NODES",";","if","(","Hy",".","g","==","UNITY_VALUE_NODES",")","{","yE","=","normalize","(","Hx","+","ye",")",";","yv","=","max","(","dot","(","Hz",",","yE",")",",","0.001",")",";"]},{type:"textline",tokens:["yp","=","max","(","dot","(","Hz",",","ye",")",",","0.01",")",";","yu","=","max","(","dot","(","Hz",",","Hx",")",",","0.01",")",";","yv","=","tan","(","acos","(","yv",")",")",";","yq","=","max","(","HA","[","0","]",",","0.001",")",";","HB","=","yu","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","yq","*","yq",")",")","*","(","exp","(","-","(","yv","*","yv",")","/","(","yq","*","yq",")",")","/","(","sqrt","(","yp","*","yu",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"HC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HD",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"HE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HF",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"HG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["HG","=","ZERO_VALUE_NODES",";","if","(","HD",".","g","==","UNITY_VALUE_NODES",")","{","yE","=","normalize","(","HC","+","ye",")",";","yu","=","acos","(","dot","(","yE",",","HE",")",")",";","if","(","yu","<","HF","[","0","]",")","HG","=","UNITY_VALUE_NODES",";","else","if","(","yu",">=","HF","[","0","]","+","HF","[","1","]","||","HF","[","1","]","==","ZERO_VALUE_NODES",")","HG","=","ZERO_VALUE_NODES",";","else","HG","=","UNITY_VALUE_NODES","-","(","yu","-","HF","[","0","]",")","/","HF","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"HH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HI",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"HJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HK",qualifier:["float"],is_optional:false},{type:"node_in",name:"HL",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"HM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["HM","=","ZERO_VALUE_NODES",";","if","(","HI",".","g","==","UNITY_VALUE_NODES",")","{","if","(","HL","[","0","]","<","UNITY_VALUE_NODES","||","HL","[","1","]","==","ZERO_VALUE_NODES",")","HM","=","ZERO_VALUE_NODES",";","else","{","if","(","HL","[","1","]","<","100.0",")","HL","[","1","]","=","sqrt","(","UNITY_VALUE_NODES","/","HL","[","1","]",")",";","else","HL","[","1","]","=","10.0","/","HL","[","1","]",";","yE","=","normalize","(","ye","+","HH",")",";","yu","=","(","UNITY_VALUE_NODES","-","HK",")","*","max","(","dot","(","HJ",",","yE",")",",","ZERO_VALUE_NODES",")","+","HK",";","if","(","yu","<","ZERO_VALUE_NODES",")","HM","=","ZERO_VALUE_NODES",";","else","{","yp","=","max","(","dot","(","HJ",",","ye",")",",","0.01",")",";","yq","=","dot","(","HJ",",","HH",")",";","if","(","yq","<=","0.01",")","HM","=","ZERO_VALUE_NODES",";","else","{","yv","=","max","(","dot","(","ye",",","yE",")",",","0.01",")",";","yr","=","UNITY_VALUE_NODES",";","yp","=","(","2.0","*","yu","*","yp",")","/","yv",";","yq","=","(","2.0","*","yu","*","yq",")","/","yv",";","yq","=","min","(","min","(","yr",",","yp",")",",","yq",")",";","yp","=","sqrt","(","pow","(","HL","[","0","]",",","2.0",")","+","pow","(","yv",",","2.0",")","-","UNITY_VALUE_NODES",")",";","yv","=","pow","(","yp","-","yv",",","2.0",")","/","pow","(","yp","+","yv",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","yv","*","(","yp","+","yv",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","yv","*","(","yp","-","yv",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","yu","=","acos","(","yu",")",";","HM","=","max","(","yv","*","yq","*","exp","(","-","pow","(","yu",",","2.0",")","/","(","2.0","*","pow","(","HL","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"HN",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"HO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HP",qualifier:["float"],is_optional:false},{type:"node_in",name:"HQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"HR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HT",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"HU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HX",qualifier:["float"],is_optional:false},{type:"node_out",name:"HY",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"HZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_NODE_B4W_TRANSLUCENCY"],statements:[{type:"textline",tokens:["if","(","dot","(","HR",",","HS",")","*","dot","(","ye",",","HS",")","<","ZERO_VALUE_NODES",")","{","yu","=","HT",".","x",";","yq","=","HT",".","y",";","yv","=","HT",".","z",";","yp","=","HT",".","w",";"]},{type:"textline",tokens:["yr","=","clamp","(","abs","(","dot","(","HR",",","HS",")",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","ys","=","clamp","(","dot","(","ye",",","-","HR",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yq","=","pow","(","ys",",","yq",")",";"]},{type:"textline",tokens:["HY","=","HN","+","HX","*","vec4","(","HW","*","yr","*","pow","(","HU",",","vec3","(","yu",")",")",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["HY","+=","yv","*","mix","(","vec4","(","HU",",","UNITY_VALUE_NODES",")",",","vec4","(","UNITY_VALUE_NODES",")",",","yp",")","*","HX","*","vec4","(","HW","*","yr","*","vec3","(","yq",")",",","UNITY_VALUE_NODES",")",";","HZ","=","HO",";","}","else","{"]},{type:"textline",tokens:["HZ","=","HO","+","HW","*","HV","*","HQ",";","HY","=","HN","+","vec4","(","HW","*","HU","*","HP",",","HQ",")",";","}"]}]},{type:"node_else",statements:[{type:"textline",tokens:["HZ","=","HO","+","HW","*","HV","*","HQ",";","HY","=","HN","+","vec4","(","HW","*","HU","*","HP",",","HQ",")",";"]}]}]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"H_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["H_","=","u_node_rgbs","[","RGB_IND","]",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"Ia",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ib",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ib","=","dot","(","Ia",",","vec3","(","0.35",",","0.45",",","0.2",")",")",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"Ic",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Id",qualifier:["float"],is_optional:true},{type:"node_out",name:"Ie",qualifier:["float"],is_optional:true},{type:"node_out",name:"If",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Id"],statements:[{type:"textline",tokens:["Id","=","Ic",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ie"],statements:[{type:"textline",tokens:["Ie","=","Ic",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_If"],statements:[{type:"textline",tokens:["If","=","Ic",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"Ig",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ih",qualifier:["float"],is_optional:true},{type:"node_out",name:"Ii",qualifier:["float"],is_optional:true},{type:"node_out",name:"Ij",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["yE","=","xN","(","Ig",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ih"],statements:[{type:"textline",tokens:["Ih","=","yE",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ii"],statements:[{type:"textline",tokens:["Ii","=","yE",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ij"],statements:[{type:"textline",tokens:["Ij","=","yE",".","b",";"]}]}]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"Ik",qualifier:["float"],is_optional:false},{type:"node_in",name:"Il",qualifier:["float"],is_optional:false},{type:"node_in",name:"Im",qualifier:["float"],is_optional:false},{type:"node_out",name:"In",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["In","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","Ik","-","Im",")","*","Il",")",")",";"]}]},{type:"node",name:"GAMMA",declarations:[{type:"node_in",name:"Io",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ip",qualifier:["float"],is_optional:false},{type:"node_out",name:"Iq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Iq","=","Io",";","if","(","Iq",".","x",">","ZERO_VALUE_NODES",")","Iq",".","x","=","pow","(","Io",".","x",",","Ip",")",";","if","(","Iq",".","y",">","ZERO_VALUE_NODES",")","Iq",".","y","=","pow","(","Io",".","y",",","Ip",")",";","if","(","Iq",".","z",">","ZERO_VALUE_NODES",")","Iq",".","z","=","pow","(","Io",".","z",",","Ip",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"Ir",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Is",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Is","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","Ir",")",";","Is","=","pow","(","Is",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"It",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Iu",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Iu","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","It",")",";","Iu","=","pow","(","Iu",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_EMPTY",declarations:[{type:"node_out",name:"Iv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Iw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ix",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ix"],statements:[{type:"textline",tokens:["Iv","[","2","]","=","Iv","[","1","]","=","Iv","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ix"],statements:[{type:"textline",tokens:["Iw","[","2","]","=","Iw","[","1","]","=","Iw","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ix"],statements:[{type:"textline",tokens:["Ix","=","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"Iy",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Iz",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IA",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"],is_optional:false}],statements:[{type:"textline",tokens:["yx","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","Iy",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Iz"],statements:[{type:"textline",tokens:["Iz","=","yx",".","xyz",";","br","(","Iz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IA"],statements:[{type:"textline",tokens:["IA","=","yx",".","w",";"]}]}]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"IB",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"IC",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"ID",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"IE",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IF",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IG",qualifier:["float"],is_optional:true},{type:"node_out",name:"IH",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"II",qualifier:["float"],is_optional:true},{type:"node_out",name:"IJ",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IK",qualifier:["float"],is_optional:true},{type:"node_out",name:"IL",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IM",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["yx","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","xV","(","IB",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IF"],statements:[{type:"textline",tokens:["IF","=","yx",".","xyz",";","br","(","IF",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IG"],statements:[{type:"textline",tokens:["IG","=","yx",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["yx","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","xV","(","IC",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IH"],statements:[{type:"textline",tokens:["IH","=","yx",".","xyz",";","br","(","IH",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_II"],statements:[{type:"textline",tokens:["II","=","yx",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["yx","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","xV","(","ID",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IJ"],statements:[{type:"textline",tokens:["IJ","=","yx",".","xyz",";","br","(","IJ",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IK"],statements:[{type:"textline",tokens:["IK","=","yx",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["yx","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","xV","(","IE",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IL"],statements:[{type:"textline",tokens:["IL","=","yx",".","xyz",";","br","(","IL",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IM"],statements:[{type:"textline",tokens:["IM","=","yx",".","w",";"]}]}]}]}]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"IN",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"IO",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"IP",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"IQ",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IR",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IS",qualifier:["float"],is_optional:true},{type:"node_out",name:"IT",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IU",qualifier:["float"],is_optional:true},{type:"node_out",name:"IV",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IW",qualifier:["float"],is_optional:true},{type:"node_out",name:"IX",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IY",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["yx","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","xV","(","IN",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IR"],statements:[{type:"textline",tokens:["IR","=","normalize","(","yy","*","(","yx",".","xyz","-","xI",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IS"],statements:[{type:"textline",tokens:["IS","=","yx",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["yx","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","xV","(","IO",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IT"],statements:[{type:"textline",tokens:["IT","=","normalize","(","yy","*","(","yx",".","xyz","-","xI",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IU"],statements:[{type:"textline",tokens:["IU","=","yx",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["yx","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","xV","(","IP",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IV"],statements:[{type:"textline",tokens:["IV","=","normalize","(","yy","*","(","yx",".","xyz","-","xI",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IW"],statements:[{type:"textline",tokens:["IW","=","yx",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["yx","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","xV","(","IQ",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IX"],statements:[{type:"textline",tokens:["IX","=","normalize","(","yy","*","(","yx",".","xyz","-","xI",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IY"],statements:[{type:"textline",tokens:["IY","=","yx",".","w",";"]}]}]}]}]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"IZ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["IZ","=","u_node_values","[","VALUE_IND","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"I_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ja",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jc",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["Jb","=","I_","+","Ja",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jc"],statements:[{type:"textline",tokens:["Jc","=","(","abs","(","Jb","[","0","]",")","+","abs","(","Jb","[","1","]",")","+","abs","(","Jb","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"Jd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Je",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jg",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["Jf","=","Jd","-","Je",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jg"],statements:[{type:"textline",tokens:["Jg","=","(","abs","(","Jf","[","0","]",")","+","abs","(","Jf","[","1","]",")","+","abs","(","Jf","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"Jh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ji",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jk",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["Jj","=","Jh","+","Ji",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jk"],statements:[{type:"textline",tokens:["Jk","=","length","(","Jj",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jj"],statements:[{type:"textline",tokens:["Jj","=","normalize","(","Jj",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"Jl",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Jm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jo",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["Jn","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jo"],statements:[{type:"textline",tokens:["Jo","=","dot","(","Jl",",","Jm",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"Jp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Jq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Js",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["Jr","=","cross","(","Jp",",","Jq",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Js"],statements:[{type:"textline",tokens:["Js","=","length","(","Jr",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"Jt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ju",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jw",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["Jv","=","normalize","(","Jt",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jw"],statements:[{type:"textline",tokens:["Jw","=","length","(","Jt",")",";"]}]}]},{type:"textline",tokens:["Ju",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"Jx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Jy",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Jz","=","reflect","(","-","Jx",",","Jy",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"JA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"JB",qualifier:["float"],is_optional:false},{type:"node_in",name:"JC",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"JD",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"JE",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["yq","=","length","(","yw",")",";","if","(","yq","<","JD",")","{","yl","=","xV","(","JA",")",";","yq","=","clamp","(","xI","*","(","JD","-","yq",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yq","=","JB","*","yq",";"]},{type:"textline",tokens:["yE","=","normalize","(","ye","*","yy",")",";"]},{type:"textline",tokens:["yr","=","UNITY_VALUE_NODES","/","JC",";"]},{type:"textline",tokens:["ym","=","yE",".","xy","*","yq","/","(","JC","*","yE",".","z",")",";","yq","=","UNITY_VALUE_NODES",";","yp","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","yl",")",".","a",";"]},{type:"textline",tokens:["for","(","float","JF","=","1.0",";","JF","<=","JC",";","JF","++",")","{","if","(","yp","<","yq",")","{","yq","-=","yr",";","yl","-=","ym",";","yp","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","yl",")",".","a",";","}","}"]},{type:"textline",tokens:["ym","=","yl","+","ym",";","yr","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","ym",")",".","a","-","(","yq","+","yr",")",";","yq","=","yp","-","yq",";","yr","=","yq","/","(","yq","-","yr",")",";"]},{type:"textline",tokens:["yl","=","yr","*","ym","+","(","UNITY_VALUE_NODES","-","yr",")","*","yl",";","JE","=","xT","(","yl",")",";","}","else","JE","=","JA",";"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"JG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["JH","=","clamp","(","JG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"JI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"JJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"JK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["JK","=","JI",";","JJ",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"JL",qualifier:["float"],is_optional:false},{type:"node_in",name:"JM",qualifier:["float"],is_optional:false},{type:"node_in",name:"JN",qualifier:["float"],is_optional:false},{type:"node_in",name:"JO",qualifier:["float"],is_optional:false},{type:"node_in",name:"JP",qualifier:["float"],is_optional:false},{type:"node_out",name:"JQ",qualifier:["float"],is_optional:true},{type:"node_out",name:"JR",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_JQ"],statements:[{type:"textline",tokens:["JQ","=","JL",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_JR"],statements:[{type:"textline",tokens:["JR","=","vec4","(","JM",",","JN",",","JO",",","JP",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"JS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["JS","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"JT",qualifier:["float"],is_optional:false},{type:"node_in",name:"JU",qualifier:["float"],is_optional:false},{type:"node_in",name:"JV",qualifier:["float"],is_optional:false},{type:"node_out",name:"JW",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["JW","=","smoothstep","(","JU",",","JV",",","JT",")",";"]}]},{type:"node",name:"B4W_GLOW_OUTPUT",declarations:[{type:"node_in",name:"JX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"JY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["yg","=","JX",";","yk","=","JY",";"]}]},{type:"node",name:"B4W_VECTOSCAL",declarations:[{type:"node_in",name:"JZ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"J_",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["J_","=","(","JZ",".","r","+","JZ",".","g","+","JZ",".","b",")","/","3.0",";"]}]},{type:"node",name:"B4W_SCALTOVEC",declarations:[{type:"node_in",name:"Ka",qualifier:["float"],is_optional:false},{type:"node_out",name:"Kb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Kb","[","0","]","=","Ka",";","Kb","[","1","]","=","Ka",";","Kb","[","2","]","=","Ka",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","Kc","(","in","vec3","ye",",","in","mat4","yf",",","out","vec3","yg",",","out","vec3","yh",",","out","vec3","yi",",","out","vec4","yj",",","out","float","yk",")","{","vec2","yl",",","ym",";","float","yn",",","yo",",","yp",",","yq",",","yr",",","ys",",","yt",",","yu",",","yv",";","vec4","yw",",","yx",";","mat3","yy",";","vec3","yz",",","yA",",","yB",",","yC",",","yD",",","yE",";","yg","=","vec3","(","ZERO_VALUE_NODES",")",";","yh","=","vec3","(","ZERO_VALUE_NODES",")",";","yi","=","vec3","(","ZERO_VALUE_NODES",")",";","yj","=","vec4","(","ZERO_VALUE_NODES",")",";","yk","=","ZERO_VALUE_NODES",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["yz","=","normalize","(","bE",")",";","yA","=","yz",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["INVERT_FRONTFACING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")"]}]}}]},{type:"textline",tokens:["yA","=","yA",";","else","yA","=","-","yA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["yB","=","yA",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yB","=","yz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["yz","=","yA",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["yC","=","cross","(","yA",",","bF",".","xyz",")","*","bF",".","w",";","yy","=","mat3","(","bF",".","xyz",",","yC",",","yA",")",";","yy","=","yy",";"]}]}}]},{type:"textline",tokens:["yA","=","bC",";","yw","=","bD",";","yn","=","u_emit",";","yo","=","u_ambient",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","Ke","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","vec3","f",";","vec3","g",";","float","h",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Kk","(","inout","vec3","Kf",",","float","Kg",",","vec4","Kh",",","vec4","Ki",")","{","float","Kj",";","Kj","=","Ki",".","x","-","Kh",".","x",";","Kj","=","(","Kg","-","Kh",".","x",")","/","Kj",";","Kf","=","mix","(","Kf",",","Ki",".","yzw",",","clamp","(","Kj",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","Kq","(","float","Kl",",","float","Km",",","vec4","Kn","[","COLOR_RAMP_LENGTH","]",")","{","vec3","Ko",";","float","Kp",";","Kp","=","Kl","/","Km",";","Ko","=","Kn","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Kk","(","Ko",",","Kp",",","Kn","[","0","]",",","Kn","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Kk","(","Ko",",","Kp",",","Kn","[","1","]",",","Kn","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Kk","(","Ko",",","Kp",",","Kn","[","2","]",",","Kn","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","Ko",";","}"]}]}}]},{type:"textline",tokens:["float","Ky","(","float","Kr",",","float","Ks",",","float","Kt",",","float","Ku",")","{","float","Kv",",","Kw",",","Kx",";","Kv","=","max","(","0.01",",","min","(","Ks",",","Kt",")",")",";","Kw","=","max","(","0.01",",","min","(","Ks",",","Ku",")",")",";","Kx","=","Ks","-","Kw",";","Kw","=","clamp","(","Kr","/","Kv",",","0.0",",","1.0",")","-","step","(","Kx",",","Kr",")","*","(","Kr","-","Kx",")","/","Kw",";","return","Kw",";","}","Ke","KG","(",")","{","mat4","Kz",";","vec3","KA",",","KB",";","float","KC",",","KD",",","KE",";","Ke","KF",";","KD","=","a_p_data","[","0","]",";","KE","=","a_p_data","[","1","]",";","if","(","u_p_cyclic","==","1",")","{","KC","=","mod","(","u_p_time",",","u_p_length",")","-","KE",";","if","(","KC","<","0.0",")","KC","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","KC","=","u_p_time","-","KE",";","}","if","(","KC","<","0.0","||","KC",">=","KD",")","{","KF",".","a","=","0.0001",";","KF",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","KC","<","0.0","||","KC",">=","KD",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["KA","=","a_position",";","KB","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Kz","=","O","(","u_model_tsr",")",";","KA","=","(","Kz","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","KB","=","(","Kz","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";"]}]}}]},{type:"textline",tokens:["KB","=","u_p_nfactor","*","KB",";","KB","+=","a_p_vels",".","xyz",";","KB",".","y","-=","u_p_gravity","*","KC","/","2.0",";","KD","=","max","(","u_p_mass",",","EPSILON",")",";","KB","+=","(","u_p_wind_fac","*","u_wind","/","KD",")","*","KC","/","2.0",";","KF",".","h","=","KC",";","KF",".","f","=","KB",";","KF",".","g","=","a_normal","*","a_p_vels",".","w",";","KF",".","b","=","KA","+","KB","*","KC",";","KF",".","e","=","a_p_vels",".","w","*","KC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_COLOR_RAMP"],group:{type:"group",parts:[{type:"textline",tokens:["KF",".","a","=","texture2D","(","u_color_ramp_tex",",","vec2","(","KC","/","u_p_max_lifetime",",","0.5",")",")",".","g",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KF",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KF",".","d","=","Kq","(","KC",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KF",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["KF",".","c","=","Ky","(","KC",",","a_p_data","[","0","]",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","KF",";","}"]}]},exports["include/particles_nodes.glslv"] = {type:"group",parts:[{type:"node",name:"TEX_COORD_UV",declarations:[],statements:[{type:"textline",tokens:["bM","=","KM","+","0.5",";"]}]},{type:"node",name:"UV_MERGED",declarations:[],statements:[{type:"textline",tokens:["bM","=","KM","+","0.5",";"]}]},{type:"node",name:"UVMAP",declarations:[],statements:[{type:"textline",tokens:["bM","=","KM","+","0.5",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[],statements:[{type:"textline",tokens:["bM","=","KM","+","0.5",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_param",name:"xX",qualifier:["varying","vec4"],is_optional:true},{type:"node_param",name:"xY",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"xZ",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"x_",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"node_PARTICLE_INFO_var_a_p_indices",qualifier:["attribute","float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_SIZE"],statements:[{type:"textline",tokens:["xX","[","3","]","=","KL",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_AGE"],statements:[{type:"textline",tokens:["xX","[","1","]","=","KK",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_LT"],statements:[{type:"textline",tokens:["xX","[","2","]","=","KN",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_LOC"],statements:[{type:"textline",tokens:["xY","=","KH",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_IND"],statements:[{type:"textline",tokens:["xX","[","0","]","=","node_PARTICLE_INFO_var_a_p_indices",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_VEL"],statements:[{type:"textline",tokens:["xZ","=","KI",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_A_VEL"],statements:[{type:"textline",tokens:["x_","=","KJ",";"]}]}]}]},{type:"nodes_global"},{type:"textline",tokens:["void","KO","(","in","vec3","KH",",","in","vec3","KI",",","in","vec3","KJ",",","in","float","KK",",","in","float","KL",",","in","vec2","KM",",","in","float","KN",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","KM","+","0.5",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/blending.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","KQ","=","0.0",";","float","KR","=","1.0",";","vec3","KW","(","vec3","KS",")","{","float","KT",",","KU",";","vec4","KV",";","KV","=","vec4","(","KQ",",","-","KR","/","3.0",",","2.0","/","3.0",",","-","KR",")",";","KV","=","mix","(","vec4","(","KS",".","bg",",","KV",".","wz",")",",","vec4","(","KS",".","gb",",","KV",".","xy",")",",","step","(","KS",".","b",",","KS",".","g",")",")",";","KV","=","mix","(","vec4","(","KV",".","xyw",",","KS",".","r",")",",","vec4","(","KS",".","r",",","KV",".","yzx",")",",","step","(","KV",".","x",",","KS",".","r",")",")",";","KT","=","KV",".","x","-","min","(","KV",".","w",",","KV",".","y",")",";","KU","=","1.0e-10",";","return","vec3","(","abs","(","KV",".","z","+","(","KV",".","w","-","KV",".","y",")","/","(","6.0","*","KT","+","KU",")",")",",","KT","/","(","KV",".","x","+","KU",")",",","KV",".","x",")",";","}","vec3","K_","(","vec3","KX",")","{","vec3","KY",";","vec4","KZ",";","KZ","=","vec4","(","KR",",","2.0","/","3.0",",","KR","/","3.0",",","3.0",")",";","KY","=","abs","(","fract","(","vec3","(","KX",".","r",",","KX",".","r",",","KX",".","r",")","+","KZ",".","xyz",")","*","6.0","-","KZ",".","www",")",";","return","KX",".","b","*","mix","(","KZ",".","xxx",",","clamp","(","KY","-","KZ",".","xxx",",","KQ",",","KR",")",",","KX",".","g",")",";","}","vec3","Ld","(","vec3","La",",","vec3","Lb",",","float","Lc",")","{","return","mix","(","La",",","Lb",",","Lc",")",";","}","vec3","Lh","(","vec3","Le",",","vec3","Lf",",","float","Lg",")","{","return","Lg","*","Le","+","Lf",";","}","vec3","Ll","(","vec3","Li",",","vec3","Lj",",","float","Lk",")","{","return","Lj","-","Lk","*","Li",";","}","vec3","Lq","(","vec3","Lm",",","vec3","Ln",",","float","Lo",")","{","float","Lp",";","Lp","=","KR","-","Lo",";","return","(","vec3","(","Lp",")","+","Lo","*","Lm",")","*","Ln",";","}","vec3","Lv","(","vec3","Lr",",","vec3","Ls",",","float","Lt",")","{","vec3","Lu",";","Lu","=","vec3","(","KR","-","Lt",")",";","return","vec3","(","KR",")","-","(","Lu","+","Lt","*","(","vec3","(","KR",")","-","Lr",")",")","*","(","vec3","(","KR",")","-","Ls",")",";","}","vec3","LA","(","vec3","Lw",",","vec3","Lx",",","float","Ly",")","{","vec3","Lz",";","Lz","=","vec3","(","KR","-","Ly",")",";","return","mix","(","Lx","*","(","Lz","+","2.0","*","Ly","*","Lw",")",",","vec3","(","KR",")","-","(","Lz","+","2.0","*","Ly","*","(","vec3","(","KR",")","-","Lw",")",")","*","(","vec3","(","KR",")","-","Lx",")",",","step","(","0.5",",","Lx",")",")",";","}","vec3","LE","(","vec3","LB",",","vec3","LC",",","float","LD",")","{","return","mix","(","LC",",","abs","(","LB","-","LC",")",",","LD",")",";","}","vec3","LI","(","vec3","LF",",","vec3","LG",",","float","LH",")","{","return","mix","(","LG",",","LG","/","(","LF","+","step","(","LF",",","vec3","(","KQ",")",")",")",",","LH",")",";","}","vec3","LM","(","vec3","LJ",",","vec3","LK",",","float","LL",")","{","return","mix","(","LK",",","min","(","LJ",",","LK",")",",","LL",")",";","}","vec3","LQ","(","vec3","LN",",","vec3","LO",",","float","LP",")","{","return","max","(","LP","*","LN",",","LO",")",";","}","vec3","LW","(","vec3","LR",",","vec3","LS",",","float","LT",")","{","vec3","LU",",","LV",";","LU","=","KW","(","LS",")",";","if","(","LU",".","y","!=","KQ",")","{","LV","=","KW","(","LR",")",";","LV","=","K_","(","vec3","(","LU",".","x",",","LV",".","yz",")",")",";","return","mix","(","LR",",","LV",",","LT",")",";","}","return","LR",";","}","vec3","Mb","(","vec3","LX",",","vec3","LY",",","float","LZ",")","{","vec3","L_",",","Ma",";","L_","=","KW","(","LX",")",";","if","(","L_",".","y","!=","KQ",")","{","Ma","=","KW","(","LY",")",";","return","K_","(","vec3","(","L_",".","x",",","mix","(","L_",".","y",",","Ma",".","y",",","LZ",")",",","L_",".","z",")",")",";","}","return","LX",";","}","vec3","Mh","(","vec3","Mc",",","vec3","Md",",","float","Me",")","{","vec3","Mf",",","Mg",";","Mf","=","KW","(","Mc",")",";","Mg","=","KW","(","Md",")",";","return","K_","(","vec3","(","Mf",".","xy",",","mix","(","Mf",".","z",",","Mg",".","z",",","Me",")",")",")",";","}","vec3","Mn","(","vec3","Mi",",","vec3","Mj",",","float","Mk",")","{","vec3","Ml",",","Mm",";","Ml","=","KW","(","Mj",")",";","if","(","Ml",".","y","!=","KQ",")","{","Mm","=","KW","(","Mi",")",";","Mm","=","K_","(","vec3","(","Ml",".","xy",",","Mm",".","z",")",")",";","return","mix","(","Mi",",","Mm",",","Mk",")",";","}","return","Mi",";","}","vec3","Ms","(","vec3","Mo",",","vec3","Mp",",","float","Mq",")","{","vec3","Mr",";","Mr","=","vec3","(","KR",")","-","(","vec3","(","KR",")","-","Mp",")","*","(","vec3","(","KR",")","-","Mo",")",";","return","mix","(","Mo",",","(","(","vec3","(","KR",")","-","Mo",")","*","Mp","*","Mo",")","+","Mo","*","Mr",",","Mq",")",";","}","vec3","Mw","(","vec3","Mt",",","vec3","Mu",",","float","Mv",")","{","return","Mt","+","Mv","*","(","2.0","*","Mu","-","KR",")",";","}","float","MC","(","float","Mx",",","float","My",",","float","Mz",",","float","MA",")","{","float","MB",";","MB","=","KR","-","MA",";","return","(","MB","+","Mz","*","Mx",")","*","My",";","}","float","MI","(","float","MD",",","float","ME",",","float","MF",",","float","MG",")","{","float","MH",";","MH","=","KR","-","MG",";","return","KR","-","(","MH","+","MF","*","(","KR","-","MD",")",")","*","(","KR","-","ME",")",";","}","float","MO","(","float","MJ",",","float","MK",",","float","ML",",","float","MM",")","{","float","MN",";","MN","=","KR","-","MM",";","return","mix","(","MK","*","(","MN","+","2.0","*","ML","*","MJ",")",",","KR","-","(","MN","+","2.0","*","ML","*","(","KR","-","MJ",")",")","*","(","KR","-","MK",")",",","step","(","0.5",",","MK",")",")",";","}"]}]},exports["include/fxaa.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"ifndef",name:"FXAA_PS3",group:{type:"group",parts:[{type:"define",name:"FXAA_PS3",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_360",group:{type:"group",parts:[{type:"define",name:"FXAA_360",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_360_OPT",group:{type:"group",parts:[{type:"define",name:"FXAA_360_OPT",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_PC",group:{type:"group",parts:[{type:"define",name:"FXAA_PC",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_PC_CONSOLE",group:{type:"group",parts:[{type:"define",name:"FXAA_PC_CONSOLE",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GLSL_120",group:{type:"group",parts:[{type:"define",name:"FXAA_GLSL_120",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GLSL_130",group:{type:"group",parts:[{type:"define",name:"FXAA_GLSL_130",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_3",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_3",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_4",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_4",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_5",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_5",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GREEN_AS_LUMA",group:{type:"group",parts:[{type:"define",name:"FXAA_GREEN_AS_LUMA",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_EARLY_EXIT",group:{type:"group",parts:[{type:"define",name:"FXAA_EARLY_EXIT",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_DISCARD",group:{type:"group",parts:[{type:"define",name:"FXAA_DISCARD",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_FAST_PIXEL_OFFSET",group:{type:"group",parts:[{type:"condition",parts:[{type:"ifdef",name:"GL_EXT_gpu_shader4",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_NV_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_ARB_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_FAST_PIXEL_OFFSET",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GATHER4_ALPHA",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FXAA_HLSL_5",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_ARB_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_NV_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GATHER4_ALPHA",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:[0],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["4.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:[0],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["2.0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",tokens:["0.125"]}]}},{type:"else",group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",tokens:["0.25"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_QUALITY_PRESET",group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["12"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",10,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["3"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",11,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["4"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",12,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["5"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",13,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["6"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",14,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["7"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",15,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["8"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",20,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["3"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",21,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["4"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",22,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["5"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",23,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["6"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",24,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["7"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",25,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["8"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",26,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["9"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",27,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["10"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",28,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["11"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",29,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P11",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",39,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P11",tokens:["8.0"]}]}}]},{type:"var",name:"FXAA_QUALITY_P12",tokens:["0.0"]},{type:"textline",tokens:["float","Nk","(","float","Nj",")","{","return","clamp","(","Nj",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["FXAA_BLEND4WEB",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Nn","(","sampler2D","Nl",",","vec2","Nm",")","{","return","texture2D","(","Nl",",","Nm",")",";","}","vec4","Ns","(","sampler2D","No",",","vec2","Np",",","vec2","Nq",",","vec2","Nr",")","{","return","texture2D","(","No",",","Np","+","(","Nq","*","Nr",")",")",";","}"]}]}}]},{type:"textline",tokens:["vec4","NZ","(","vec2","Nt",",","sampler2D","Nu",",","vec2","Nv",",","float","Nw",",","float","Nx",",","float","Ny",")","{","bool","Nz",",","NA",",","NB",",","NC",",","ND",";","float","NE",",","NF",",","NG",",","NH",",","NI",",","NJ",",","NK",",","NL",",","NM",",","NN",",","NO",",","NP",",","NQ",",","NR",",","NS",";","vec4","NT",";","vec2","NU",",","NV",",","NW",",","NX",",","NY",";","NU",".","x","=","Nt",".","x",";","NU",".","y","=","Nt",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_GATHER4_ALPHA",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["NT","=","Nn","(","Nu",",","NU",")",";","NE","=","bB","(","NT",")",";","NF","=","bB","(","Ns","(","Nu",",","NU",",","vec2","(","0",",","1",")",",","Nv",".","xy",")",")",";","NG","=","bB","(","Ns","(","Nu",",","NU",",","vec2","(","1",",","0",")",",","Nv",".","xy",")",")",";","NH","=","bB","(","Ns","(","Nu",",","NU",",","vec2","(","0",",","-","1",")",",","Nv",".","xy",")",")",";","NI","=","bB","(","Ns","(","Nu",",","NU",",","vec2","(","-","1",",","0",")",",","Nv",".","xy",")",")",";"]}]}}]},{type:"textline",tokens:["NJ","=","max","(","NF",",","NE",")",";","NK","=","min","(","NF",",","NE",")",";","NJ","=","max","(","NG",",","NJ",")",";","NK","=","min","(","NG",",","NK",")",";","NL","=","max","(","NH",",","NI",")",";","NM","=","min","(","NH",",","NI",")",";","NJ","=","max","(","NL",",","NJ",")",";","NK","=","min","(","NM",",","NK",")",";","NM","=","NJ","*","Nx",";","NK","=","NJ","-","NK",";","NM","=","max","(","Ny",",","NM",")",";","Nz","=","NK","<","NM",";","if","(","Nz",")","return","NT",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_GATHER4_ALPHA",0,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["NM","=","bB","(","Ns","(","Nu",",","NU",",","vec2","(","-","1",",","-","1",")",",","Nv",".","xy",")",")",";","NJ","=","bB","(","Ns","(","Nu",",","NU",",","vec2","(","1",",","1",")",",","Nv",".","xy",")",")",";","NL","=","bB","(","Ns","(","Nu",",","NU",",","vec2","(","1",",","-","1",")",",","Nv",".","xy",")",")",";","NN","=","bB","(","Ns","(","Nu",",","NU",",","vec2","(","-","1",",","1",")",",","Nv",".","xy",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[]}}]},{type:"textline",tokens:["NO","=","NH","+","NF",";","NP","=","NI","+","NG",";","NK","=","1.0","/","NK",";","NQ","=","NO","+","NP",";","NO","=","(","-","2.0","*","NE",")","+","NO",";","NP","=","(","-","2.0","*","NE",")","+","NP",";","NR","=","NL","+","NJ",";","NL","=","NM","+","NL",";","NS","=","(","-","2.0","*","NG",")","+","NR",";","NL","=","(","-","2.0","*","NH",")","+","NL",";","NM","=","NM","+","NN",";","NJ","=","NN","+","NJ",";","NS","=","(","abs","(","NO",")","*","2.0",")","+","abs","(","NS",")",";","NL","=","(","abs","(","NP",")","*","2.0",")","+","abs","(","NL",")",";","NP","=","(","-","2.0","*","NI",")","+","NM",";","NJ","=","(","-","2.0","*","NF",")","+","NJ",";","NS","=","abs","(","NP",")","+","NS",";","NL","=","abs","(","NJ",")","+","NL",";","NR","=","NM","+","NR",";","NM","=","Nv",".","x",";","Nz","=","NS",">=","NL",";","NR","=","NQ","*","2.0","+","NR",";","if","(","!","Nz",")","NH","=","NI",";","if","(","!","Nz",")","NF","=","NG",";","if","(","Nz",")","NM","=","Nv",".","y",";","NR","=","(","NR","*","(","1.0","/","12.0",")",")","-","NE",";","NG","=","NH","-","NE",";","NI","=","NF","-","NE",";","NH","=","NH","+","NE",";","NF","=","NF","+","NE",";","NA","=","abs","(","NG",")",">=","abs","(","NI",")",";","NI","=","max","(","abs","(","NG",")",",","abs","(","NI",")",")",";","if","(","NA",")","NM","=","-","NM",";","NK","=","Nk","(","abs","(","NR",")","*","NK",")",";","NV",".","x","=","NU",".","x",";","NV",".","y","=","NU",".","y",";","NW",".","x","=","(","!","Nz",")","?","0.0",":","Nv",".","x",";","NW",".","y","=","(","Nz",")","?","0.0",":","Nv",".","y",";","if","(","!","Nz",")","NV",".","x","+=","NM","*","0.5",";","if","(","Nz",")","NV",".","y","+=","NM","*","0.5",";","NX",".","x","=","NV",".","x","-","NW",".","x","*","FXAA_QUALITY_P0",";","NX",".","y","=","NV",".","y","-","NW",".","y","*","FXAA_QUALITY_P0",";","NY",".","x","=","NV",".","x","+","NW",".","x","*","FXAA_QUALITY_P0",";","NY",".","y","=","NV",".","y","+","NW",".","y","*","FXAA_QUALITY_P0",";","NR","=","(","(","-","2.0",")","*","NK",")","+","3.0",";","NG","=","bB","(","Nn","(","Nu",",","NX",")",")",";","NK","=","NK","*","NK",";","NQ","=","bB","(","Nn","(","Nu",",","NY",")",")",";","if","(","!","NA",")","NH","=","NF",";","NI","=","NI","*","1.0","/","4.0",";","NF","=","NE","-","NH","*","0.5",";","NK","=","NR","*","NK",";","NA","=","NF","<","0.0",";","NG","-=","NH","*","0.5",";","NQ","-=","NH","*","0.5",";","NB","=","abs","(","NG",")",">=","NI",";","NC","=","abs","(","NQ",")",">=","NI",";","if","(","!","NB",")","NX",".","x","-=","NW",".","x","*","FXAA_QUALITY_P1",";","if","(","!","NB",")","NX",".","y","-=","NW",".","y","*","FXAA_QUALITY_P1",";","ND","=","(","!","NB",")","||","(","!","NC",")",";","if","(","!","NC",")","NY",".","x","+=","NW",".","x","*","FXAA_QUALITY_P1",";","if","(","!","NC",")","NY",".","y","+=","NW",".","y","*","FXAA_QUALITY_P1",";","if","(","ND",")","{","if","(","!","NB",")","NG","=","bB","(","Nn","(","Nu",",","NX",".","xy",")",")",";","if","(","!","NC",")","NQ","=","bB","(","Nn","(","Nu",",","NY",".","xy",")",")",";","if","(","!","NB",")","NG","=","NG","-","NH","*","0.5",";","if","(","!","NC",")","NQ","=","NQ","-","NH","*","0.5",";","NB","=","abs","(","NG",")",">=","NI",";","NC","=","abs","(","NQ",")",">=","NI",";","if","(","!","NB",")","NX",".","x","-=","NW",".","x","*","FXAA_QUALITY_P2",";","if","(","!","NB",")","NX",".","y","-=","NW",".","y","*","FXAA_QUALITY_P2",";","ND","=","(","!","NB",")","||","(","!","NC",")",";","if","(","!","NC",")","NY",".","x","+=","NW",".","x","*","FXAA_QUALITY_P2",";","if","(","!","NC",")","NY",".","y","+=","NW",".","y","*","FXAA_QUALITY_P2",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ND",")","{","if","(","!","NB",")","NG","=","bB","(","Nn","(","Nu",",","NX",".","xy",")",")",";","if","(","!","NC",")","NQ","=","bB","(","Nn","(","Nu",",","NY",".","xy",")",")",";","if","(","!","NB",")","NG","=","NG","-","NH","*","0.5",";","if","(","!","NC",")","NQ","=","NQ","-","NH","*","0.5",";","NB","=","abs","(","NG",")",">=","NI",";","NC","=","abs","(","NQ",")",">=","NI",";","if","(","!","NB",")","NX",".","x","-=","NW",".","x","*","FXAA_QUALITY_P3",";","if","(","!","NB",")","NX",".","y","-=","NW",".","y","*","FXAA_QUALITY_P3",";","ND","=","(","!","NB",")","||","(","!","NC",")",";","if","(","!","NC",")","NY",".","x","+=","NW",".","x","*","FXAA_QUALITY_P3",";","if","(","!","NC",")","NY",".","y","+=","NW",".","y","*","FXAA_QUALITY_P3",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",4,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ND",")","{","if","(","!","NB",")","NG","=","bB","(","Nn","(","Nu",",","NX",".","xy",")",")",";","if","(","!","NC",")","NQ","=","bB","(","Nn","(","Nu",",","NY",".","xy",")",")",";","if","(","!","NB",")","NG","=","NG","-","NH","*","0.5",";","if","(","!","NC",")","NQ","=","NQ","-","NH","*","0.5",";","NB","=","abs","(","NG",")",">=","NI",";","NC","=","abs","(","NQ",")",">=","NI",";","if","(","!","NB",")","NX",".","x","-=","NW",".","x","*","FXAA_QUALITY_P4",";","if","(","!","NB",")","NX",".","y","-=","NW",".","y","*","FXAA_QUALITY_P4",";","ND","=","(","!","NB",")","||","(","!","NC",")",";","if","(","!","NC",")","NY",".","x","+=","NW",".","x","*","FXAA_QUALITY_P4",";","if","(","!","NC",")","NY",".","y","+=","NW",".","y","*","FXAA_QUALITY_P4",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",5,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ND",")","{","if","(","!","NB",")","NG","=","bB","(","Nn","(","Nu",",","NX",".","xy",")",")",";","if","(","!","NC",")","NQ","=","bB","(","Nn","(","Nu",",","NY",".","xy",")",")",";","if","(","!","NB",")","NG","=","NG","-","NH","*","0.5",";","if","(","!","NC",")","NQ","=","NQ","-","NH","*","0.5",";","NB","=","abs","(","NG",")",">=","NI",";","NC","=","abs","(","NQ",")",">=","NI",";","if","(","!","NB",")","NX",".","x","-=","NW",".","x","*","FXAA_QUALITY_P5",";","if","(","!","NB",")","NX",".","y","-=","NW",".","y","*","FXAA_QUALITY_P5",";","ND","=","(","!","NB",")","||","(","!","NC",")",";","if","(","!","NC",")","NY",".","x","+=","NW",".","x","*","FXAA_QUALITY_P5",";","if","(","!","NC",")","NY",".","y","+=","NW",".","y","*","FXAA_QUALITY_P5",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",6,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ND",")","{","if","(","!","NB",")","NG","=","bB","(","Nn","(","Nu",",","NX",".","xy",")",")",";","if","(","!","NC",")","NQ","=","bB","(","Nn","(","Nu",",","NY",".","xy",")",")",";","if","(","!","NB",")","NG","=","NG","-","NH","*","0.5",";","if","(","!","NC",")","NQ","=","NQ","-","NH","*","0.5",";","NB","=","abs","(","NG",")",">=","NI",";","NC","=","abs","(","NQ",")",">=","NI",";","if","(","!","NB",")","NX",".","x","-=","NW",".","x","*","FXAA_QUALITY_P6",";","if","(","!","NB",")","NX",".","y","-=","NW",".","y","*","FXAA_QUALITY_P6",";","ND","=","(","!","NB",")","||","(","!","NC",")",";","if","(","!","NC",")","NY",".","x","+=","NW",".","x","*","FXAA_QUALITY_P6",";","if","(","!","NC",")","NY",".","y","+=","NW",".","y","*","FXAA_QUALITY_P6",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",7,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ND",")","{","if","(","!","NB",")","NG","=","bB","(","Nn","(","Nu",",","NX",".","xy",")",")",";","if","(","!","NC",")","NQ","=","bB","(","Nn","(","Nu",",","NY",".","xy",")",")",";","if","(","!","NB",")","NG","=","NG","-","NH","*","0.5",";","if","(","!","NC",")","NQ","=","NQ","-","NH","*","0.5",";","NB","=","abs","(","NG",")",">=","NI",";","NC","=","abs","(","NQ",")",">=","NI",";","if","(","!","NB",")","NX",".","x","-=","NW",".","x","*","FXAA_QUALITY_P7",";","if","(","!","NB",")","NX",".","y","-=","NW",".","y","*","FXAA_QUALITY_P7",";","ND","=","(","!","NB",")","||","(","!","NC",")",";","if","(","!","NC",")","NY",".","x","+=","NW",".","x","*","FXAA_QUALITY_P7",";","if","(","!","NC",")","NY",".","y","+=","NW",".","y","*","FXAA_QUALITY_P7",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",8,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ND",")","{","if","(","!","NB",")","NG","=","bB","(","Nn","(","Nu",",","NX",".","xy",")",")",";","if","(","!","NC",")","NQ","=","bB","(","Nn","(","Nu",",","NY",".","xy",")",")",";","if","(","!","NB",")","NG","=","NG","-","NH","*","0.5",";","if","(","!","NC",")","NQ","=","NQ","-","NH","*","0.5",";","NB","=","abs","(","NG",")",">=","NI",";","NC","=","abs","(","NQ",")",">=","NI",";","if","(","!","NB",")","NX",".","x","-=","NW",".","x","*","FXAA_QUALITY_P8",";","if","(","!","NB",")","NX",".","y","-=","NW",".","y","*","FXAA_QUALITY_P8",";","ND","=","(","!","NB",")","||","(","!","NC",")",";","if","(","!","NC",")","NY",".","x","+=","NW",".","x","*","FXAA_QUALITY_P8",";","if","(","!","NC",")","NY",".","y","+=","NW",".","y","*","FXAA_QUALITY_P8",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",9,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ND",")","{","if","(","!","NB",")","NG","=","bB","(","Nn","(","Nu",",","NX",".","xy",")",")",";","if","(","!","NC",")","NQ","=","bB","(","Nn","(","Nu",",","NY",".","xy",")",")",";","if","(","!","NB",")","NG","=","NG","-","NH","*","0.5",";","if","(","!","NC",")","NQ","=","NQ","-","NH","*","0.5",";","NB","=","abs","(","NG",")",">=","NI",";","NC","=","abs","(","NQ",")",">=","NI",";","if","(","!","NB",")","NX",".","x","-=","NW",".","x","*","FXAA_QUALITY_P9",";","if","(","!","NB",")","NX",".","y","-=","NW",".","y","*","FXAA_QUALITY_P9",";","ND","=","(","!","NB",")","||","(","!","NC",")",";","if","(","!","NC",")","NY",".","x","+=","NW",".","x","*","FXAA_QUALITY_P9",";","if","(","!","NC",")","NY",".","y","+=","NW",".","y","*","FXAA_QUALITY_P9",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",10,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ND",")","{","if","(","!","NB",")","NG","=","bB","(","Nn","(","Nu",",","NX",".","xy",")",")",";","if","(","!","NC",")","NQ","=","bB","(","Nn","(","Nu",",","NY",".","xy",")",")",";","if","(","!","NB",")","NG","=","NG","-","NH","*","0.5",";","if","(","!","NC",")","NQ","=","NQ","-","NH","*","0.5",";","NB","=","abs","(","NG",")",">=","NI",";","NC","=","abs","(","NQ",")",">=","NI",";","if","(","!","NB",")","NX",".","x","-=","NW",".","x","*","FXAA_QUALITY_P10",";","if","(","!","NB",")","NX",".","y","-=","NW",".","y","*","FXAA_QUALITY_P10",";","ND","=","(","!","NB",")","||","(","!","NC",")",";","if","(","!","NC",")","NY",".","x","+=","NW",".","x","*","FXAA_QUALITY_P10",";","if","(","!","NC",")","NY",".","y","+=","NW",".","y","*","FXAA_QUALITY_P10",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",11,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ND",")","{","if","(","!","NB",")","NG","=","bB","(","Nn","(","Nu",",","NX",".","xy",")",")",";","if","(","!","NC",")","NQ","=","bB","(","Nn","(","Nu",",","NY",".","xy",")",")",";","if","(","!","NB",")","NG","=","NG","-","NH","*","0.5",";","if","(","!","NC",")","NQ","=","NQ","-","NH","*","0.5",";","NB","=","abs","(","NG",")",">=","NI",";","NC","=","abs","(","NQ",")",">=","NI",";","if","(","!","NB",")","NX",".","x","-=","NW",".","x","*","FXAA_QUALITY_P11",";","if","(","!","NB",")","NX",".","y","-=","NW",".","y","*","FXAA_QUALITY_P11",";","ND","=","(","!","NB",")","||","(","!","NC",")",";","if","(","!","NC",")","NY",".","x","+=","NW",".","x","*","FXAA_QUALITY_P11",";","if","(","!","NC",")","NY",".","y","+=","NW",".","y","*","FXAA_QUALITY_P11",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",12,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ND",")","{","if","(","!","NB",")","NG","=","bB","(","Nn","(","Nu",",","NX",".","xy",")",")",";","if","(","!","NC",")","NQ","=","bB","(","Nn","(","Nu",",","NY",".","xy",")",")",";","if","(","!","NB",")","NG","=","NG","-","NH","*","0.5",";","if","(","!","NC",")","NQ","=","NQ","-","NH","*","0.5",";","NB","=","abs","(","NG",")",">=","NI",";","NC","=","abs","(","NQ",")",">=","NI",";","if","(","!","NB",")","NX",".","x","-=","NW",".","x","*","FXAA_QUALITY_P12",";","if","(","!","NB",")","NX",".","y","-=","NW",".","y","*","FXAA_QUALITY_P12",";","ND","=","(","!","NB",")","||","(","!","NC",")",";","if","(","!","NC",")","NY",".","x","+=","NW",".","x","*","FXAA_QUALITY_P12",";","if","(","!","NC",")","NY",".","y","+=","NW",".","y","*","FXAA_QUALITY_P12",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}","NI","=","NU",".","x","-","NX",".","x",";","NH","=","NY",".","x","-","NU",".","x",";","if","(","!","Nz",")","NI","=","NU",".","y","-","NX",".","y",";","if","(","!","Nz",")","NH","=","NY",".","y","-","NU",".","y",";","NC","=","(","NG","<","0.0",")","!=","NA",";","NG","=","(","NH","+","NI",")",";","NA","=","(","NQ","<","0.0",")","!=","NA",";","NG","=","1.0","/","NG",";","NB","=","NI","<","NH",";","NH","=","min","(","NI",",","NH",")",";","NA","=","NB","?","NC",":","NA",";","NK","=","NK","*","NK",";","NG","=","(","NH","*","(","-","NG",")",")","+","0.5",";","NK","=","NK","*","Nw",";","NG","=","NA","?","NG",":","0.0",";","NK","=","max","(","NG",",","NK",")",";","if","(","!","Nz",")","NU",".","x","+=","NK","*","NM",";","if","(","Nz",")","NU",".","y","+=","NK","*","NM",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_DISCARD",1,{type:"equal_expr",places:2},"FXAA_BLEND4WEB",1,{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Nn","(","Nu",",","NU",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec4","(","Nn","(","Nu",",","NU",")",".","xyz",",","NE",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","Of","(","in","sampler2D","N_",",","in","vec2","Oa",",","in","vec2","Ob",")","{","float","Oc",",","Od",",","Oe",";","Oc","=","texture2D","(","N_",",","Oa",")",".","r",";","Od","=","Ob",".","x",";","Oe","=","Ob",".","y",";","Od","=","2.0","*","Od","/","(","Od","+","Oe","-","(","2.0","*","Oc","-","1.0",")","*","(","Oe","-","Od",")",")",";","return","Od",";","}"]}]}}