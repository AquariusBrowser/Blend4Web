/**
 * Copyright (C) 2014-2016 Triumph LLC
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

b4w.module["shader_texts"] = function(exports, require) {exports["anchors.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["void","main","(",")","{","gl_FragColor","=","vec4","(","1.0",")",";","}"]}]},exports["anchors.glslv"] = {type:"group",parts:[{type:"var",name:"ANCHOR_NUM",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","float","a_index",";","uniform","vec3","u_position","[","ANCHOR_NUM","]",";","uniform","mat4","u_view_proj_matrix",";","void","main","(",")","{","gl_Position","=","u_view_proj_matrix","*","vec4","(","u_position","[","int","(","a_index",")","]",",","1.0",")",";","gl_PointSize","=","4.0",";","}"]}]},exports["color_id.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"std_enums.glsl"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_GEOMETRY_VW",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_zup_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_zup_tsr_inverse",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_zup_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_zup_tsr_inverse",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","uniform","float","u_alpha_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_color_id",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_outline_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";","varying","vec4","bD",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";","varying","vec4","bJ",";","varying","vec4","bK",";","varying","vec4","bL",";","uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";","uniform","sampler2D","u_shadow_map1",";","uniform","sampler2D","u_shadow_map2",";","uniform","sampler2D","u_shadow_map3",";","uniform","sampler2D","u_shadow_mask",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","mat4","qT",",","qU",",","qV",",","qW",",","qX",";","float","qY",",","qZ",";","vec4","q_",";","vec3","ra",",","rb",",","rc",",","rd",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["ra","=","u_camera_eye_frag","-","bC",";","ra","=","normalize","(","ra",")",";","qT","=","mat4","(","0.0",")",";","qU","=","mat4","(","0.0",")",";","qV","=","mat4","(","0.0",")",";","qW","=","mat4","(","0.0",")",";","qX","=","mat4","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_GEOMETRY_VW",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["qT","=","O","(","u_view_tsr_frag",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["qU","=","O","(","u_view_zup_tsr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["qV","=","O","(","u_view_zup_tsr_inverse",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["qW","=","O","(","u_model_zup_tsr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["qX","=","O","(","u_model_zup_tsr_inverse",")",";"]}]}}]},{type:"textline",tokens:["qS","(","ra",",","qT",",","qU",",","qV",",","qW",",","qX",",","rb",",","rc",",","rd",",","q_",",","qY",")",";","qY","=","qY",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["qY","=","(","texture2D","(","u_sampler",",","bM",")",")",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["qZ","=","u_alpha_factor","*","qY",";","qZ","+=","(","1.0","-","step","(","0.0",",","qZ",")",")",";","qY","=","mix","(","qZ",",","1.0",",","u_diffuse_color",".","a",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["qY","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","qY","<","0.5",")","discard",";","qY","=","1.0",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_outline_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";","varying","vec4","bD",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","tB",";","float","tC",",","tD",",","tE",";","vec3","tF",",","tG",",","tH",",","tI",",","tJ",",","tK",";","mat4","tL",",","tM",",","tN",";","tL","=","O","(","u_view_tsr",")",";","tF","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["tG","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tH","=","vec3","(","a_tangent",")",";","tI","=","a_tangent","[","3","]","*","cross","(","tG",",","tH",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tH","=","vec3","(","0.0",")",";","tI","=","vec3","(","0.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tG","=","vec3","(","0.0",")",";","tH","=","vec3","(","0.0",")",";","tI","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["tF","=","mix","(","tF",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["tG","=","mix","(","tG",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tJ","=","vec3","(","a_tangent",")",";","tK","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","tJ",")",";","tH","=","mix","(","tH",",","tJ",",","u_va_frame_factor",")",";","tI","=","mix","(","tI",",","tK",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sH","(","tF",",","tH",",","tI",",","tG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tI","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tI","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tM","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["tH","=","(","tM","*","vec4","(","tI",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tN","=","rA","(","u_camera_eye",",","tH",",","tL",",","tM",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tN","=","ru","(","u_camera_eye",",","tH",",","tL",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tN","=","tN","*","rm","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","tH",")",";"]}]}}]},{type:"textline",tokens:["c","tO","=","rH","(","tF","-","tI",",","tI",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","tN",")",";","tO",".","b","=","tH",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","tO","=","rH","(","tF",",","tI",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","tM",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tv","(","tO",".","a",",","tO",".","b",",","tG",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tG","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tG","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tv","(","tO",".","a",",","tO",".","b",",","tG",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rK","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bC","=","tO",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","tO",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["tC","=","(","dot","(","cross","(","tO",".","e",",","tO",".","c",")",",","tO",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","tO",".","c",",","tC",")",";"]}]}}]},{type:"textline",tokens:["bD","=","tL","*","vec4","(","tO",".","a",",","1.0",")",";","tB","=","u_proj_matrix","*","bD",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["tB",".","xy","+=","u_subpixel_jitter","*","tB",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tC","=","tB",".","x",";","tD","=","tB",".","y",";","tE","=","tB",".","w",";","bG",".","x","=","(","tC","+","tE",")","/","2.0",";","bG",".","y","=","(","tD","+","tE",")","/","2.0",";","bG",".","z","=","tE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","bD",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["tA","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","tL","*","vec4","(","tO",".","a",",","1.0",")",";","}"]}]},exports["debug_view.glslf"] = {type:"group",parts:[{type:"define",name:"DV_NONE",tokens:["0"]},{type:"define",name:"DV_OPAQUE_WIREFRAME",tokens:["1"]},{type:"define",name:"DV_TRANSPARENT_WIREFRAME",tokens:["2"]},{type:"define",name:"DV_FRONT_BACK_VIEW",tokens:["3"]},{type:"define",name:"DV_DEBUG_SPHERES",tokens:["4"]},{type:"define",name:"DV_CLUSTERS_VIEW",tokens:["5"]},{type:"define",name:"DV_BATCHES_VIEW",tokens:["6"]},{type:"define",name:"DV_RENDER_TIME",tokens:["7"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_debug_view_mode",";","uniform","float","u_cluster_id",";","uniform","float","u_batch_debug_id_color",";","uniform","float","u_batch_debug_main_render_time",";","uniform","float","u_debug_colors_seed",";","uniform","float","u_debug_render_time_threshold",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","tB",";","const","float","tC","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","tD","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","tD","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","tE","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","tF","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","tG","=","vec3","(","1.0",",","1.0",",","1.0",")",";","const","vec3","tH","=","vec3","(","0.0",",","133.0","/","255.0",",","66.0","/","255.0",")",";","const","vec3","tI","=","vec3","(","160.0","/","255.0",",","38.0","/","255.0",",","33.0","/","255.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["float","tL","(",")","{","vec3","tJ",";","float","tK",";","tK","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["WIREFRAME_QUALITY",0,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["tJ","=","sign","(","tB","-","vec3","(","0.02","*","tC",")",")",";","if","(","tJ",".","x","<","0.0","||","tJ",".","y","<","0.0","||","tJ",".","z","<","0.0",")","tK","=","0.0",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["tJ","=","fwidth","(","tB",")",";","tJ","=","smoothstep","(","vec3","(","0.0",")",",","tJ","*","tC",",","tB",")",";","tK","=","min","(","min","(","tJ",".","x",",","tJ",".","y",")",",","tJ",".","z",")",";","tK","=","clamp","(","tK",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["return","tK",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","tM",",","tN",",","tO",",","tP",";","vec3","tQ",",","tR",";","tQ","=","vec3","(","0.0",")",";","tM","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["tR","=","sign","(","tB","-","vec3","(","0.02","*","tC",")",")",";","if","(","tR",".","x","<","0.0","||","tR",".","y","<","0.0","||","tR",".","z","<","0.0",")","{","tQ","=","tD",";","tM","=","1.0",";","}","else","discard",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_debug_view_mode","==","DV_OPAQUE_WIREFRAME",")","{","tN","=","tL","(",")",";","tQ","=","vec3","(","mix","(","u_wireframe_edge_color",",","tG",",","tN",")",")",";","tM","=","1.0",";","}","else","if","(","u_debug_view_mode","==","DV_TRANSPARENT_WIREFRAME",")","{","tN","=","tL","(",")",";","tQ","=","u_wireframe_edge_color",";","tM","=","mix","(","1.0",",","0.0",",","tN",")",";","}","else","if","(","u_debug_view_mode","==","DV_FRONT_BACK_VIEW",")","{","tN","=","tL","(",")",";","if","(","gl_FrontFacing",")","tQ","=","mix","(","u_wireframe_edge_color",",","tE",",","tN",")",";","else","tQ","=","mix","(","u_wireframe_edge_color",",","tF",",","tN",")",";","tM","=","1.0",";","}","else","if","(","u_debug_view_mode","==","DV_CLUSTERS_VIEW",")","{","tN","=","u_cluster_id","+","u_debug_colors_seed","+","2.0",";","tQ","=","vec3","(","fract","(","tN","*","19.73",")",",","fract","(","tN","*","6.34",")",",","fract","(","tN","*","1.56",")",")",";","tM","=","1.0",";","}","else","if","(","u_debug_view_mode","==","DV_BATCHES_VIEW",")","{","tN","=","u_batch_debug_id_color","+","u_debug_colors_seed",";","tQ","=","vec3","(","fract","(","tN","*","19.73",")",",","fract","(","tN","*","6.34",")",",","fract","(","tN","*","1.56",")",")",";","tM","=","1.0",";","}","else","if","(","u_debug_view_mode","==","DV_RENDER_TIME",")","{",";","if","(","u_debug_render_time_threshold",">","0.0",")","tN","=","clamp","(","u_batch_debug_main_render_time",",","0.0",",","u_debug_render_time_threshold",")","/","u_debug_render_time_threshold",";","else","tN","=","1.0",";","tO","=","clamp","(","2.0","*","tN",",","0.0",",","1.0",")",";","tP","=","clamp","(","2.0","*","tN","-","1.0",",","0.0",",","1.0",")",";","tN","=","tN",";","tQ","=","mix","(","tH",",","tI",",","vec3","(","tO",",","tP",",","tN",")",")",";","tM","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["bu","(","tQ",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","tQ",",","tM",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","tQ",",","tM",")",";","}"]}]},exports["debug_view.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","tB",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","uh",",","ui",",","uj",",","uk",",","ul",";","mat4","um",",","un",",","uo",";","if","(","a_polyindex","==","0.0",")","tB","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","tB","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","tB","=","vec3","(","0.0",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_VIEW_SPECIAL_SKYDOME"],group:{type:"group",parts:[{type:"textline",tokens:["gl_Position","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["um","=","O","(","u_view_tsr",")",";","un","=","O","(","u_model_tsr",")",";","uh","=","a_position",";","ui","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["c","up","=","rH","(","uh",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","un",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uh","=","mix","(","uh",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uj","=","vec3","(","0.0",")",";","uk","=","vec3","(","0.0",")",";","sH","(","uh",",","uj",",","uk",",","ui",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uk","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uk","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","up","=","ug","(","uh",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","uk",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","um",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uj","=","(","un","*","vec4","(","uk",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uo","=","rA","(","u_camera_eye",",","uj",",","um",",","un",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uo","=","ru","(","u_camera_eye",",","uj",",","um",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ul","=","(","un","*","vec4","(","uk",",","1.0",")",")",".","xyz",";","uo","=","uo","*","rm","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","ul",")",";"]}]}}]},{type:"textline",tokens:["c","up","=","rH","(","uh","-","uk",",","uk",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","uo",")",";","up",".","b","=","uj",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","up","=","rH","(","uh",",","uk",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","un",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tv","(","up",".","a",",","up",".","b",",","ui",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","um","*","vec4","(","up",".","a",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","uh",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","uh",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uh",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","uh",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","uh",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","uh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","uh",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","uh",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","uh",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","ui",";","vec3","uj",";","mat4","uk",",","ul",",","um",";","uk","=","O","(","u_view_tsr",")",";","ul","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uj","=","(","ul","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","um","=","ru","(","u_camera_eye",",","uj",",","uk",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["um","=","um","*","rm","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["c","un","=","rH","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","um",")",";","un",".","b","=","uj",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","un","=","rH","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ul",")",";"]}]}}]},{type:"textline",tokens:["ui","=","u_proj_matrix","*","uk","*","vec4","(","un",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uh","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uh","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uh","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","ui",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","ui",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","varying","float","uj",";"]},{type:"include",file:"color_util.glslf"},{type:"include",file:"halo_color.glslf"},{type:"textline",tokens:["void","main","(",")","{","float","uV",";","vec3","uW",";","vec4","uX",";","uX","=","uU","(",")",";","uW","=","uX",".","rgb",";","uV","=","uX",".","a",";","bu","(","uW",")",";","bx","(","uW",",","uV",")",";","gl_FragColor","=","vec4","(","uW",",","uV",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","attribute","float","a_random_vals",";","uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","bM",";","varying","float","uj",";"]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ui",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","uV",",","uW",";","vec3","uX",";","mat4","uY",",","uZ",",","u_",";","uY","=","O","(","u_view_tsr",")",";","uZ","=","O","(","u_model_tsr",")",";","uX","=","(","uZ","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","bM","=","a_halo_bb_vertex","*","2.0",";","uj","=","a_random_vals",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uZ","=","qZ","(","uX",",","uY",")",";","u_","=","uY",";","u_","[","3","]","[","0","]","=","0.0",";","u_","[","3","]","[","1","]","=","0.0",";","u_","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uZ","=","qZ","(","uX",",","uY",")",";"]}]}}]},{type:"textline",tokens:["uV","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","uV","=","uZ","*","uV",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uW","=","u_proj_matrix","*","u_","*","uV",";","uW",".","z","=","0.99999","*","uW",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ui","=","uV",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uW","=","u_proj_matrix","*","uY","*","uV",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","uW",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","float","uV",";","vec3","uW",";","uW","=","u_diffuse_color",".","xyz",";","uV","=","u_diffuse_color",".","a",";","bu","(","uW",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","uW",",","uV",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","uW",",","uV",")",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_direction",";","uniform","mat3","u_model_tsr",";","uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_line_width",";"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["void","main","(",")","{","mat2","uV",";","float","uW",";","vec2","uX",",","uY",";","vec4","uZ",";","mat4","u_",",","va",";","u_","=","O","(","u_view_tsr",")",";","va","=","O","(","u_model_tsr",")",";","c","vb","=","rH","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","normalize","(","a_direction",")",",","va",")",";","uZ","=","u_proj_matrix","*","u_","*","vec4","(","vb",".","a",",","1.0",")",";","uZ",".","xyz","/=","uZ",".","w",";","uX","=","(","u_proj_matrix","*","u_","*","vec4","(","vb",".","e",",","0.0",")",")",".","xy",";","uW","=","M_PI","/","2.0",";","uV","=","mat2","(","cos","(","uW",")",",","sin","(","uW",")",",","-","sin","(","uW",")",",","cos","(","uW",")",")",";","uX","=","uV","*","normalize","(","uX",")",";","uY","=","(","u_line_width","/","u_height",")","*","vec2","(","u_proj_matrix","[","0","]","[","0","]","/","u_proj_matrix","[","1","]","[","1","]",",","1.0",")",";","gl_Position","=","vec4","(","uZ",".","xy","+","uX",".","xy","*","uY","/","2.0",",","uZ",".","z",",","1.0",")",";","gl_Position","*=","uZ",".","w",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_GEOMETRY_VW",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_zup_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_zup_tsr_inverse",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_zup_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_zup_tsr_inverse",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION","REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"nodes.glslf"},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","vB",";","mat4","vC",",","vD",",","vE",",","vF",",","vG",";","vec4","vH",";","vec3","vI",",","vJ",",","vK",",","vL",",","vM",";","float","vN",",","vO",",","vP",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vN","=","length","(","bD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vO","=","bC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vI","=","u_sun_intensity",";"]}]}}]},{type:"textline",tokens:["vJ","=","normalize","(","u_camera_eye_frag","-","bC",")",";","vC","=","mat4","(","0.0",")",";","vD","=","mat4","(","0.0",")",";","vE","=","mat4","(","0.0",")",";","vF","=","mat4","(","0.0",")",";","vG","=","mat4","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_GEOMETRY_VW",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vC","=","O","(","u_view_tsr_frag",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["vD","=","O","(","u_view_zup_tsr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["vE","=","O","(","u_view_zup_tsr_inverse",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["vF","=","O","(","u_model_zup_tsr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["vG","=","O","(","u_model_zup_tsr_inverse",")",";"]}]}}]},{type:"textline",tokens:["qS","(","vJ",",","vC",",","vD",",","vE",",","vF",",","vG",",","vK",",","vL",",","vM",",","vH",",","vP",")",";","vK","=","vK",";","vP","=","vP",";","vM","=","vM",";","vH","=","vH",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["vK","=","max","(","vK","-","sqrt","(","0.01","*","-","min","(","vO",",","0.0",")",")",",","0.5","*","vK",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["bp","(","vK",",","vO",",","u_time",",","vH",",","vM",",","u_sun_direction",",","vI",",","u_sun_quaternion",",","bC",",","vN",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","vP","<","0.5",")","discard",";","vP","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vP","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vA","(","vK",",","length","(","bD",")",",","vJ",",","vO",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vA","(","vK",",","length","(","bD",")",",","vJ",",","1.0",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vB","=","texture2DProj","(","u_shadow_mask",",","bG",")",".","rg",";","vO","=","vB",".","g",";","vK","=","vec3","(","vO",")",";"]}]}}]},{type:"textline",tokens:["bu","(","vK",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","vK",",","vP",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","vK",",","vP",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"NUM_CAST_LAMPS",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat3","u_view_tsr",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"BILLBOARD","DYNAMIC_GRASS",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";"]},{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_v_light_tsr","[","NUM_CAST_LAMPS","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_v_light_ts","[","NUM_CAST_LAMPS","]",";","uniform","vec4","u_v_light_r","[","NUM_CAST_LAMPS","]",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vB",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vC",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","vP",",","vQ",";","float","vR",";","vec3","vS",",","vT",",","vU",",","vV",",","vW",",","vX",",","vY",";","mat4","vZ",",","v_",",","wa",",","wb",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["vZ","=","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["v_","=","O","(","u_view_tsr",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vZ","=","O","(","u_view_tsr",")",";"]}]}}]},{type:"textline",tokens:["wa","=","O","(","u_model_tsr",")",";","vS","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"NODES",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vT","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vT","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vU","=","vec3","(","a_tangent",")",";","vV","=","a_tangent","[","3","]","*","cross","(","vT",",","vU",")",";"]}]}},{type:"elif",expression:["NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vW","=","(","wa","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vX","=","normalize","(","(","wa","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","vW","=","vW","-","u_camera_eye",";","vV","=","cross","(","vW",",","vX",")",";","vU","=","cross","(","vX",",","vV",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vU","=","vec3","(","0.0",")",";","vV","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["vS","=","mix","(","vS",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["vT","=","mix","(","vT",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vX","=","vec3","(","a_tangent",")",";","vW","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","vX",")",";","vU","=","mix","(","vU",",","vX",",","u_va_frame_factor",")",";","vV","=","mix","(","vV",",","vW",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sH","(","vS",",","vU",",","vV",",","vT",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vW","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vW","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","wc","=","ug","(","vS",",","vU",",","vV",",","vT",",","vW",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","vZ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vX","=","(","wa","*","vec4","(","vW",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["wb","=","rA","(","u_camera_eye",",","vX",",","vZ",",","wa",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["wb","=","ru","(","u_camera_eye",",","vX",",","vZ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vY","=","(","wa","*","vec4","(","vW",",","1.0",")",")",".","xyz",";","wb","=","wb","*","rm","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vY",")",";"]}]}}]},{type:"textline",tokens:["c","wc","=","rH","(","vS","-","vW",",","vW",",","vU",",","vV",",","vT",",","wb",")",";","wc",".","b","=","vX",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","wc","=","rH","(","vS",",","vW",",","vU",",","vV",",","vT",",","wa",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vR","=","(","dot","(","cross","(","wc",".","e",",","wc",".","c",")",",","wc",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","wc",".","c",",","vR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["tv","(","wc",".","a",",","wc",".","b",",","vT",")",";"]}]}}]},{type:"textline",tokens:["bC","=","wc",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","wc",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vB","=","u_camera_eye","-","wc",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rK","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vC","=","wc",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vC","=","a_color",";"]}]}}]}]}}]},{type:"textline",tokens:["vP","=","vZ","*","vec4","(","wc",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["vQ","=","v_","*","vec4","(","wc",".","a",",","1.0",")",";","bD","=","vQ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bD","=","vP",";"]}]}}]}]}}]},{type:"textline",tokens:["vQ","=","u_proj_matrix","*","vP",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["vQ",".","xy","+=","u_subpixel_jitter","*","vQ",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bG","=","L","(","vQ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vO","(","wc",".","a",",","wc",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","NODES",{type:"logic_negative_expr",places:1},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","vP",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["tA","(",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vQ",";","}"]}]},exports["main_stack.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","ALPHA_AS_SPEC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";","varying","vec3","bE",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vB",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"lighting_nodes.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","xU",",","xV",",","xW",",","xX",";","mat4","xY",";","mat3","xZ",";","vec2","x_",",","ya",",","yb",",","yc",";","vec3","yd",",","ye",",","yf",",","yg",",","yh",",","yi",",","yj",",","yk",",","yl",";","float","ym",",","yn",",","yo",",","yp",",","yq",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2},"WATER_EFFECTS","CAUSTICS",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["ym","=","length","(","bD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["yn","=","bC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"CAUSTICS","WATER_EFFECTS",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["yd","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["x_","=","bM",";"]}]}}]},{type:"textline",tokens:["ye","=","normalize","(","bE",")",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["INVERT_FRONTFACING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")"]}]}}]},{type:"textline",tokens:["ye","=","ye",";","else","ye","=","-","ye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["yf","=","cross","(","ye",",","bF",".","xyz",")","*","bF",".","w",";","xZ","=","mat3","(","bF",".","xyz",",","yf",",","ye",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFRACTIVE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xY","=","O","(","u_view_tsr_frag",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["ya","=","normalize","(","xY","*","vec4","(","bE",",","0.0",")",")",".","st",";","ya","=","ya","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","PARALLAX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ym","<","PARALLAX_LOD_DIST",")","{","yo","=","clamp","(","0.5","*","(","PARALLAX_LOD_DIST","-","ym",")",",","0.0",",","1.0",")",";","yo","=","u_parallax_scale","*","yo",";","yf","=","normalize","(","vB","*","xZ",")",";","yp","=","1.0","/","PARALLAX_STEPS",";","yb","=","yf",".","xy","*","yo","/","(","PARALLAX_STEPS","*","yf",".","z",")",";","yo","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["yc","=","ya",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yc","=","x_",";"]}]}}]},{type:"textline",tokens:["yq","=","texture2D","(","u_normalmap0",",","yc",")",".","a",";","for","(","float","yr","=","1.0",";","yr","<=","PARALLAX_STEPS",";","yr","++",")","{","if","(","yq","<","yo",")","{","yo","-=","yp",";","yc","-=","yb",";","yq","=","texture2D","(","u_normalmap0",",","yc",")",".","a",";","}","}","yb","=","yc","+","yb",";","yp","=","texture2D","(","u_normalmap0",",","yb",")",".","a","-","(","yo","+","yp",")",";","yo","=","yq","-","yo",";","yp","=","yo","/","(","yo","-","yp",")",";","yc","=","yp","*","yb","+","(","1.0","-","yp",")","*","yc",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["x_","+=","yc","-","ya",";"]}]}}]},{type:"textline",tokens:["ya","=","yc",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["ya","+=","yc","-","x_",";"]}]}}]},{type:"textline",tokens:["x_","=","yc",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xU","=","texture2D","(","u_normalmap0",",","ya",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xU","=","texture2D","(","u_normalmap0",",","x_",")",";"]}]}}]},{type:"textline",tokens:["yf","=","xU",".","rgb","-","0.5",";","yf","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","yf",",","u_normal_factor",")",";","yf","=","xZ","*","yf",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yf","=","ye",";"]}]}}]},{type:"textline",tokens:["yf","=","normalize","(","yf",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["ya","=","normalize","(","xY","*","vec4","(","yf",",","0.0",")",")",".","st",";","ya","=","ya","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"textline",tokens:["ye","=","normalize","(","vB",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["yg","=","vC",";","br","(","yg",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","DYNAMIC_GRASS",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xU","=","vec4","(","yg",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xU","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["yp","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xV","=","texture2D","(","u_colormap0",",","ya",")",";"]}]}},{type:"elif",expression:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xV","=","texture2D","(","u_colormap0",",","x_",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["br","(","xV",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR1_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xW","=","texture2D","(","u_colormap1",",","ya",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xW","=","texture2D","(","u_colormap1",",","x_",")",";"]}]}}]},{type:"textline",tokens:["br","(","xW",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xX","=","texture2D","(","u_stencil0",",","ya",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["xX","=","texture2D","(","u_stencil0",",","x_",")",";"]}]}}]},{type:"textline",tokens:["xV","=","mix","(","xV",",","xW",",","xX",".","r",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xU",".","rgb","=","mix","(","xU",".","rgb",",","xV",".","rgb",",","u_diffuse_color_factor",")",";","yo","=","u_alpha_factor","*","xV",".","a",";","yo","+=","(","1.0","-","step","(","0.0",",","yo",")",")",";","xU",".","a","=","mix","(","yo",",","1.0",",","u_diffuse_color",".","a",")",";","yp","=","xV",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["xU",".","rgb","*=","mix","(","vec3","(","1.0",")",",","xV",".","rgb",",","u_diffuse_color_factor",")",";","xU",".","a","=","xV",".","a",";","yp","=","xV",".","a",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["yg","=","xU",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yh","=","u_diffuse_intensity","*","xU",".","rgb",";","yi","=","u_environment_energy","*","dS","(","yf",")",";","yi","=","u_ambient","*","yi",";","xV","=","du","(","yh",")",";","yj","=","u_emit","*","xU",".","rgb",";","yk","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["yl","=","vec3","(","yp",")",";"]}]}},{type:"elif",expression:["TEXTURE_SPEC_CO","TEXTURE_COORDS_NORMAL",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["yl","=","texture2D","(","u_specmap0",",","ya",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yl","=","texture2D","(","u_specmap0",",","x_",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["br","(","yl",".","rgb",")",";","yk","=","mix","(","yk",",","yl",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["yp","=","u_specular_params","[","0","]",";","x_","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","yk","=","yp","*","yk",";","xT","(","yj",",","yi",",","yh",",","yk",",","bC",",","yf",",","ye",",","x_",",","u_diffuse_params",",","xV",",","0.0",",","vec4","(","0.0",")",",","yg",",","yl",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["dP","(","yg",",","ye",",","yf",",","u_reflect_factor",",","xY",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dP","(","yg",",","ye",",","yf",",","u_reflect_factor",",","mat4","(","0.0",")",")",";"]}]}}]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["dP","(","yg",",","ye",",","yf",",","0.0",",","xY",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dP","(","yg",",","ye",",","yf",",","0.0",",","mat4","(","0.0",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["yg","+=","yl",";"]}]}}]},{type:"textline",tokens:["yp","=","xU",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["yg","=","max","(","yg","-","sqrt","(","0.01","*","-","min","(","yn",",","0.0",")",")",",","0.5","*","yg",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["bp","(","yg",",","yn",",","u_time",",","xV",",","yf",",","u_sun_direction",",","yd",",","u_sun_quaternion",",","bC",",","ym",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","yp","<","0.5",")","discard",";","yp","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["yo","=","max","(","max","(","yl",".","r",",","yl",".","g",")",",","yl",".","b",")","*","u_specular_alpha",";","yp","=","xU",".","a","*","(","1.0","-","yo",")","+","yo",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yp","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["x_","=","-","(","xY","*","vec4","(","yf",",","0.0",")",")",".","xy",";","yg","=","mix","(","ef","(","bG",",","x_","*","u_refr_bump",")",",","yg",",","yp",")",";","yp","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vA","(","yg",",","ym",",","ye",",","yn",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vA","(","yg",",","ym",",","ye",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["bu","(","yg",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","yg",",","yp",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","yg",",","yp",")",";","}"]}]},exports["particle_system.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","NODES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","float","u_time",";","uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_GEOMETRY_VW",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_zup_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_zup_tsr_inverse",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_zup_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_zup_tsr_inverse",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:7}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"NODES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bE",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"include",file:"environment.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"particles_nodes.glslf"},{type:"textline",tokens:["void","main","(",")","{","mat4","Kv",",","Kw",",","Kx",",","Ky",",","Kz",";","float","KA",",","KB",",","KC",";","vec4","KD",";","vec3","KE",",","KF",",","KG",",","KH",";","KE","=","normalize","(","u_camera_eye_frag","-","bC",")",";","Kv","=","mat4","(","0.0",")",";","Kw","=","mat4","(","0.0",")",";","Kx","=","mat4","(","0.0",")",";","Ky","=","mat4","(","0.0",")",";","Kz","=","mat4","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_GEOMETRY_VW",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Kv","=","O","(","u_view_tsr_frag",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["Kw","=","O","(","u_view_zup_tsr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["Kx","=","O","(","u_view_zup_tsr_inverse",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["Ky","=","O","(","u_model_zup_tsr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["Kz","=","O","(","u_model_zup_tsr_inverse",")",";"]}]}}]},{type:"textline",tokens:["Ku","(","KE",",","Kv",",","Kw",",","Kx",",","Ky",",","Kz",",","KF",",","KG",",","KH",",","KD",",","KA",")",";","KF","=","KF",";","KA","=","KA",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","KA","<","0.5",")","discard",";","KA","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KA","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vA","(","KF",",","length","(","bD",")",",","KE",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["KB","=","-","bD",".","z","/","u_view_max_depth",";","KD","=","texture2DProj","(","u_scene_depth",",","bG",")",";","KC","=","Z","(","KD",")",";","KB","=","KC","-","KB",";","KB","=","u_view_max_depth","/","SOFT_STRENGTH","*","KB",";","KA","=","KA","*","min","(","KB",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["bu","(","KF",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","KF",",","KA",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","KF",",","KA",")",";","}"]}]},exports["particle_system.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","vec3","a_p_data",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"textline",tokens:["attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","float","u_p_wind_fac",";","uniform","float","u_p_max_lifetime",";","uniform","float","u_p_tilt",";","uniform","float","u_p_tilt_rand",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","vec3","u_wind",";","uniform","float","u_p_size",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE",{type:"logic_negative_expr",places:1},"NODES","HALO_PARTICLES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_COLOR_RAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_ramp_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","Kv",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:8}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"NODES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","uj",";"]}]}}]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"particles.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"particles_nodes.glslv"}]}}]},{type:"textline",tokens:["float","Li","(","vec2","Lg",",","vec2","Lh",")","{","return","(","atan","(","Lh",".","y",",","Lh",".","x",")","-","atan","(","Lg",".","y",",","Lg",".","x",")",")",";","}","void","main","(",")","{","vec3","Lj",",","Lk",";","vec4","Ll",",","Lm",",","Ln",";","float","Lo",",","Lp",",","Lq",";","mat4","Lr",",","Ls",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["Lr","=","u_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lr","=","O","(","u_view_tsr",")",";"]}]}}]},{type:"textline",tokens:["Kw","Lt",";","Lt","=","KY","(",")",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","Lo","=","Lt",".","e",";","Ls","=","qZ","(","Lt",".","b",",","Lr",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","Lo","=","Lt",".","e",";","Ls","=","w","(",")",";","Ls","[","3","]","=","vec4","(","Lt",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","Lo","=","Lt",".","e",";","Ls","=","A","(","radians","(","90.0",")",")",";","Ls","[","3","]","=","vec4","(","Lt",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","Lo","=","Li","(","vec2","(","EPSILON",",","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","Lt",".","e",";","Ls","=","y","(","radians","(","-","90.0",")",")",";","Ls","[","3","]","=","vec4","(","Lt",".","b",",","1.0",")",";","}","Ll","=","vec4","(","a_p_bb_vertex","*","2.0","*","Lt",".","a","*","u_p_size",",","0.0",",","1.0",")",";","Lp","=","a_p_data","[","2","]",";","Lq","=","u_p_tilt","*","u_p_tilt_rand","*","(","2.0","*","Lp","-","1.0",")",";","Lq","=","(","Lq","+","u_p_tilt",")","*","M_PI",";","Ll","=","Ls","*","C","(","Lq","+","Lo",")","*","Ll",";","Lm","=","Lr","*","Ll",";","Ln","=","u_proj_matrix","*","Lm",";"]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uj","=","Lp",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE","NODES",{type:"logic_negative_expr",places:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lj","=","vec3","(","a_tangent",")",";","Lk","=","a_tangent","[","3","]","*","cross","(","a_normal",",","Lj",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lj","=","vec3","(","0.0",")",";","Lk","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["c","Lu","=","rH","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Lj",",","Lk",",","vec3","(","0.0",")",",","Ls","*","C","(","Lo",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","CALC_TBN_SPACE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lo","=","(","dot","(","cross","(","a_normal",",","Lu",".","c",")",",","Lu",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","Lu",".","c",",","Lo",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","a_normal",";"]}]}}]},{type:"textline",tokens:["Lf","(","Lt",".","b",",","Lt",".","f",",","Lt",".","g",",","Lt",".","h",",","Lt",".","a",",","a_p_bb_vertex",",","a_p_data","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_p_bb_vertex","+","0.5",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_p_bb_vertex","*","2.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Kv","=","Lt",".","c",";"]}]}}]},{type:"textline",tokens:["vC","=","Lt",".","d",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["Lo","=","Ln",".","x",";","Lp","=","Ln",".","y",";","Lq","=","Ln",".","w",";","bG",".","x","=","(","Lo","+","Lq",")","/","2.0",";","bG",".","y","=","(","Lp","+","Lq",")","/","2.0",";","bG",".","z","=","Lq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"NODES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","Lm",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","Ln",";","bC","=","Ll",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vB","=","u_camera_eye","-","Ll",".","xyz",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["particle_system_stack.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","NODES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"}]}}]},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"var",name:"SOFT_STRENGTH",tokens:["1.0"]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_size",";","uniform","vec3","u_halo_rings_color",";","uniform","float","u_halo_hardness",";","uniform","vec3","u_halo_lines_color",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";","uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:8}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NODES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","Kv",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","vB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES","DISABLE_FOG",{type:"logic_negative_expr",places:1},"NODES",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","uj",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ui",";"]}]}}]}]}}]},{type:"include",file:"lighting_nodes.glslf"},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"environment.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"include",file:"halo_color.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Lg",";","float","Lh",",","Li",",","Lj",";","vec4","Lk",",","Ll",";","vec3","Lm",",","Ln",",","Lo",",","Lp",",","Lq",",","Lr",",","Ls",",","Lt",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1},"DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lm","=","normalize","(","vB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HALO_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["Lk","=","uU","(",")",";","Ln","=","Lk",".","rgb","*","vC",";","Lh","=","0.9","*","length","(","bM",")",";","Lh","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","Lh",")",";","Lh","=","Lk",".","a","*","(","1.0","-","Lh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lk","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["Ll","=","texture2D","(","u_sampler",",","bM",")",";","br","(","Ll",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lk",".","rgb","=","mix","(","Lk",".","rgb",",","Ll",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lk",".","rgb","*=","mix","(","vec3","(","1.0",")",",","Ll",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["Lk",".","a","=","Ll",".","a",";"]}]}}]},{type:"textline",tokens:["Lk",".","rgb","*=","vC",";"]},{type:"condition",parts:[{type:"if",expression:["PARTICLES_SHADELESS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Lo","=","u_diffuse_intensity","*","Lk",".","rgb",";","Lp","=","u_emit","*","Lk",".","rgb",";","Lq","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logic_negative_expr",places:1},"SKY_COLOR",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["Lr","=","u_environment_energy","*","dS","(","vec3","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lr","=","u_environment_energy","*","dS","(","Lq",")",";"]}]}}]},{type:"textline",tokens:["Lr","=","u_ambient","*","Lr",";","Li","=","u_specular_params","[","0","]",";","Lg","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","Ls","=","Li","*","u_specular_color",";","xT","(","Lp",",","Lr",",","Lo",",","Ls",",","bC",",","Lq",",","Lm",",","Lg",",","u_diffuse_params",",","vec4","(","1.0",")",",","0.0",",","vec4","(","0.0",")",",","Ln",",","Lt",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ln","=","Lk",".","rgb",";"]}]}}]},{type:"textline",tokens:["Lh","=","Lk",".","a","*","Kv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","Lh","<","0.5",")","discard",";","Lh","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lh","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vA","(","Ln",",","length","(","bD",")",",","Lm",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SOFT_PARTICLES"],group:{type:"group",parts:[{type:"textline",tokens:["Li","=","-","bD",".","z","/","u_view_max_depth",";","Lk","=","texture2DProj","(","u_scene_depth",",","bG",")",";","Lj","=","Z","(","Lk",")",";","Li","=","Lj","-","Li",";","Li","=","u_view_max_depth","/","SOFT_STRENGTH","*","Li",";","Lh","=","Lh","*","min","(","Li",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["bu","(","Ln",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","ALPHA_CLIP",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","Ln",",","Lh",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ln",",","Lh",")",";","}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","Lg",";","const","float","Lh","=","0.99",";","const","float","Li","=","1.8",";","const","int","Lj","=","8",";","float","Lp","(","vec3","Lk",",","vec3","Ll",")","{","float","Lm",",","Ln",",","Lo",";","Lm","=","dot","(","Ll",",","Ll",")",";","Ln","=","2.0","*","dot","(","Ll",",","Lk",")",";","Lo","=","dot","(","Lk",",","Lk",")","-","1.0",";","Lm","=","Ln","*","Ln","-","4.0","*","Lm","*","Lo",";","Lm","=","sqrt","(","Lm",")",";","Lm","=","(","-","Ln","-","Lm",")","/","2.0",";","Lm","=","Lo","/","Lm",";","return","Lm",";","}","float","Lw","(","float","Lq",",","float","Lr",")","{","float","Ls",",","Lt",",","Lu",",","Lv",";","Ls","=","3.0","*","(","1.0","-","Lr","*","Lr",")",";","Lt","=","2.0","*","(","2.0","+","Lr","*","Lr",")",";","Lu","=","1.0","+","Lq","*","Lq",";","Lv","=","pow","(","1.0","+","Lr","*","Lr","-","2.0","*","Lr","*","Lq",",","1.5",")",";","Lv","=","max","(","Lv",",","0.00001",")",";","return","(","Ls","/","Lt",")","*","(","Lu","/","Lv",")",";","}","float","LC","(","vec3","Lx",",","vec3","Ly",",","float","Lz",")","{","vec3","LA",";","float","LB",";","LB","=","dot","(","Ly",",","-","Lx",")",";","if","(","LB","<","0.0",")","{","return","1.0",";","}","LA","=","Lx","+","LB","*","Ly",";","if","(","length","(","LA",")","<","Lz",")","{","return","0.0",";","}","else","if","(","length","(","LA",")",">=","Lz",")","{","LA","=","normalize","(","LA",")","*","Lz","-","Lx",";","LB","=","acos","(","dot","(","normalize","(","LA",")",",","Ly",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","LB","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","LG","(","float","LD",",","vec3","LE",",","float","LF",")","{","return","LE","-","LE","*","pow","(","u_sky_color",",","vec3","(","LF","/","LD",")",")",";","}","void","main","(",")","{","float","LH",",","LI",",","LJ",",","LK",",","LL",",","LM",",","LN",",","LO",",","LP",";","vec3","LQ",",","LR",",","LS",",","LT",",","LU",",","LV",",","LW",";","LQ","=","normalize","(","Lg",")",";","LR","=","u_sun_direction",";","LH","=","dot","(","LQ",",","LR",")",";","LI","=","Lw","(","LH",",","-","0.01",")","*","u_rayleigh_brightness","*","LR",".","y",";","LJ","=","Lw","(","LH","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","LR",".","y",")",";","LH","=","smoothstep","(","0.0",",","100.0",",","Lw","(","LH",",","0.9995",")",")","*","u_spot_brightness",";","LS","=","vec3","(","0.0",",","Lh",",","0.0",")",";","LK","=","Lp","(","LS",",","LQ",")",";","LL","=","LK","/","float","(","Lj",")",";","LM","=","LC","(","LS",",","LQ",",","Lh","-","0.3",")",";","LT","=","vec3","(","0.0",",","0.0",",","0.0",")",";","LU","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","LX","=","0",";","LX","<","Lj",";","LX","++",")","{","LN","=","LL","*","float","(","LX",")",";","LV","=","LS","+","LQ","*","LN",";","LO","=","LC","(","LV",",","LR",",","Lh","-","0.2",")",";","LP","=","Lp","(","LV",",","LR",")",";","LW","=","LG","(","LP",",","vec3","(","Li",")",",","u_scatter_strength",")","*","LO",";","LT","+=","LG","(","sqrt","(","LN",")",",","u_sky_color","*","LW",",","u_rayleigh_strength",")",";","LU","+=","LG","(","LN",",","LW",",","u_mie_strength",")",";","}","LT","=","LT","*","LM","*","pow","(","LK",",","u_rayleigh_collection_power",")","/","float","(","Lj",")",";","LU","=","(","LU","*","LM","*","pow","(","LK",",","u_mie_collection_power",")",")","/","float","(","Lj",")",";","LT","=","vec3","(","LH","*","LU","+","LJ","*","LU","+","LI","*","LT",")",";","bu","(","LT",")",";","gl_FragColor","=","vec4","(","LT",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","Lg",";","void","main","(",")","{","vec4","Lh",",","Li",";","Lh","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","Li","=","u_cube_view_matrix","*","Lh",";","Lg","=","Li",".","xyz",";","gl_Position","=","Lh",";","}"]}]},exports["shadow.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"pack.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_GEOMETRY_VW",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_zup_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_view_zup_tsr_inverse",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_zup_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_zup_tsr_inverse",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_cube_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_refl_plane",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","PRECISION","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADELESS",{type:"logic_negative_expr",places:1},"NODES","ALPHA",{type:"logical_and_expr",places:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]}]}}]},{type:"include",file:"nodes.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","mat4","Lh",",","Li",",","Lj",",","Lk",",","Ll",";","float","Lm",",","Ln",";","vec4","Lo",";","vec3","Lp",",","Lq",",","Lr",",","Ls",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NODES"],group:{type:"group",parts:[{type:"textline",tokens:["Lp","=","u_camera_eye_frag","-","bC",";","Lp","=","normalize","(","Lp",")",";","Lh","=","mat4","(","0.0",")",";","Li","=","mat4","(","0.0",")",";","Lj","=","mat4","(","0.0",")",";","Lk","=","mat4","(","0.0",")",";","Ll","=","mat4","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_GEOMETRY_VW",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lh","=","O","(","u_view_tsr_frag",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["Li","=","O","(","u_view_zup_tsr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_VIEW_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["Lj","=","O","(","u_view_zup_tsr_inverse",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX"],group:{type:"group",parts:[{type:"textline",tokens:["Lk","=","O","(","u_model_zup_tsr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ZUP_MODEL_MATRIX_INVERSE"],group:{type:"group",parts:[{type:"textline",tokens:["Ll","=","O","(","u_model_zup_tsr_inverse",")",";"]}]}}]},{type:"textline",tokens:["qS","(","Lp",",","Lh",",","Li",",","Lj",",","Lk",",","Ll",",","Lq",",","Lr",",","Ls",",","Lo",",","Lm",")",";","Lm","=","Lm",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["Lm","=","(","texture2D","(","u_colormap0",",","bM",")",")",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ln","=","u_alpha_factor","*","Lm",";","Ln","+=","(","1.0","-","step","(","0.0",",","Ln",")",")",";","Lm","=","mix","(","Ln",",","1.0",",","u_diffuse_color",".","a",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lm","=","u_diffuse_color",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","Lm","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","NO_SHADOWS",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","dr","(","bD",".","z",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor",".","a","*=","clamp","(","bF",".","r",",","0.999999999",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["shadow.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"NUM_CAST_LAMPS",tokens:["0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_shadow_cast_billboard_view_tsr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logic_negative_expr",places:1},"TEXTURE_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";"]},{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_v_light_tsr","[","NUM_CAST_LAMPS","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_v_light_ts","[","NUM_CAST_LAMPS","]",";","uniform","vec4","u_v_light_r","[","NUM_CAST_LAMPS","]",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bF",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bI",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","bL",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"nodes.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Lh",";","vec4","Li",",","Lj",";","float","Lk",";","vec3","Ll",",","Lm",",","Ln",",","Lo",",","Lp",",","Lq",";","mat4","Lr",",","Ls",",","Lt",",","Lu",";","Lr","=","O","(","u_view_tsr",")",";","Ll","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["Lm","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lm","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA","CALC_TBN_SPACE",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["Ln","=","vec3","(","a_tangent",")",";","Lo","=","a_tangent","[","3","]","*","cross","(","Lm",",","Ln",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ln","=","vec3","(","0.0",")",";","Lo","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["Ll","=","mix","(","Ll",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["Lm","=","mix","(","Lm",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["Lp","=","vec3","(","a_tangent",")",";","Lq","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","Lp",")",";","Ln","=","mix","(","Ln",",","Lp",",","u_va_frame_factor",")",";","Lo","=","mix","(","Lo",",","Lq",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["sH","(","Ll",",","Ln",",","Lo",",","Lm",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["Lo","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lo","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","Lv","=","ug","(","Ll",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Lm",",","Lo",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","Lr",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ls","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["Ln","=","(","Ls","*","vec4","(","Lo",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD",{type:"logic_negative_expr",places:1},"SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lt","=","O","(","u_shadow_cast_billboard_view_tsr",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lt","=","Lr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lu","=","rA","(","u_camera_eye",",","Ln",",","Lt",",","Ls",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lu","=","ru","(","u_camera_eye",",","Ln",",","Lt",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","BILLBOARD_JITTERED",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lu","=","Lu","*","rm","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","Ln",")",";"]}]}}]},{type:"textline",tokens:["c","Lv","=","rH","(","Ll","-","Lo",",","Lo",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Lm",",","Lu",")",";","Lv",".","b","=","Ln",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","Lv","=","rH","(","Ll",",","Lo",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","Lm",",","Ls",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lm","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Lm","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["tv","(","Lv",".","a",",","Lv",".","b",",","Lm",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bC","=","Lv",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{type:"logical_and_expr",places:3},{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["bE","=","Lv",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["Lk","=","(","dot","(","cross","(","Lv",".","e",",","Lv",".","c",")",",","Lv",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","bF","=","vec4","(","Lv",".","c",",","Lk",")",";"]}]}}]}]}}]},{type:"textline",tokens:["Li","=","Lr","*","vec4","(","Lv",".","a",",","1.0",")",";","Lj","=","u_proj_matrix","*","Li",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["Lj",".","xy","+=","u_subpixel_jitter","*","Lj",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NODES","ALPHA",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bG","=","L","(","Lj",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","Li",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["tA","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","rK","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vO","(","Lv",".","a",",","Lv",".","e",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"NODES","ALPHA",{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bD","=","Li",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_CASTING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Lh","=","(","u_proj_matrix","*","Lr","[","3","]",")",".","xy",";","Lk","=","SHADOW_TEX_RES","/","2.0",";","Lh","=","floor","(","Lh","*","Lk","+","0.5",")","/","Lk","-","Lh",";","Lj",".","xy","+=","Lh",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","Lj",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","bM",";","void","main","(",")","{","vec4","Lh",";","Lh","=","texture2D","(","u_sampler",",","bM",")",";","bu","(","Lh",".","rgb",")",";","bx","(","Lh",".","rgb",",","Lh",".","a",")",";","gl_FragColor","=","Lh",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","bM",";","void","main","(",")","{","vec2","Lh",";","float","Li",";","vec4","Lj",";","vec3","Lk",";","mat4","Ll",";","Ll","=","O","(","u_view_tsr",")",";","bM","=","a_texcoord",";","Lk","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","Lj","=","u_proj_matrix","*","Ll","*","vec4","(","Lk",",","0.0",")",";","Lj",".","x","/=","Lj",".","w",";","Lj",".","y","/=","Lj",".","w",";","Lj","+=","99999.0","*","step","(","Lj",".","z",",","0.0",")",";","Lj","+=","100.0","*","(","step","(","1.0",",","abs","(","Lj",".","x",")",")","+","step","(","1.0",",","abs","(","Lj",".","y",")",")",")",";","Lj",".","x","=","-","a_lf_dist","*","Lj",".","x",";","Lj",".","y","=","-","a_lf_dist","*","Lj",".","y",";","Li","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","Lh","=","vec2","(","a_lf_bb_vertex",".","x","/","Li",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","Lm","=","1.9",";","Lh","*=","(","1.0","+","Lm","*","length","(","Lj",".","xy",")",")",";","}","gl_Position","=","vec4","(","Lj",".","xy","+","Lh",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"define",name:"INV_PI",tokens:["0.318309886"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX","PROCEDURAL_SKYDOME",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"blending.glslf"},{type:"textline",tokens:["uniform","vec4","u_sky_tex_fac",";","uniform","vec3","u_sky_tex_color",";","uniform","float","u_sky_tex_dvar",";","vec3","Nl","(","vec3","Ng",",","vec3","Nh",",","float","Ni",",","float","Nj",")","{","float","Nk",";","Nk","=","Ni","*","Nj",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lv","(","Nh",",","Ng",",","Nk",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lz","(","Ng",",","Nh",",","Nk",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LD","(","Ng",",","Nh",",","Nk",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LI","(","Ng",",","Nh",",","Nk",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LN","(","Ng",",","Nh",",","Nk",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LS","(","Ng",",","Nh",",","Nk",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LW","(","Ng",",","Nh",",","Nk",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","L_","(","Ng",",","Nh",",","Nk",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Md","(","Ng",",","Nh",",","Nk",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Mh","(","Ng",",","Nh",",","Nk",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","HUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Mn","(","Nh",",","Ng",",","Nk",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SATURATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Mt","(","Nh",",","Ng",",","Nk",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","VALUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Mz","(","Nh",",","Ng",",","Nk",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","COLOR",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MF","(","Nh",",","Ng",",","Nk",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MK","(","Nh",",","Ng",",","Nk",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MO","(","Nh",",","Ng",",","Nk",")",";"]}]}}]},{type:"textline",tokens:["return","vec3","(","1.0",",","0.0",",","1.0",")",";","}","float","Nt","(","float","Nm",",","float","Nn",",","float","No",",","float","Np",")","{","float","Nq",";","vec3","Nr",",","Ns",";","Nr","=","vec3","(","Nm",")",",","Ns","=","vec3","(","Nn",")",";","Nq","=","No","*","Np",";"]},{type:"condition",parts:[{type:"if",expression:["BLENDTYPE","MIX",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lv","(","Ns",",","Nr",",","Nq",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","ADD",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Lz","(","Nr",",","Ns",",","Nq",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SUBTRACT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LD","(","Nr",",","Ns",",","Nq",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","MULTIPLY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MU","(","Nm",",","Nn",",","Nq",",","Np",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","SCREEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","M_","(","Nm",",","Nn",",","Nq",",","Np",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","OVERLAY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Nf","(","Nm",",","Nn",",","Nq",",","Np",")",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIFFERENCE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","LW","(","Nr",",","Ns",",","Nq",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DIVIDE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","L_","(","Nr",",","Ns",",","Nq",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","DARKEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Md","(","Nr",",","Ns",",","Nq",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LIGHTEN",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","Mh","(","Nr",",","Ns",",","Nq",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","SOFT_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MK","(","Ns",",","Nr",",","Nq",")",".","x",";"]}]}},{type:"elif",expression:["BLENDTYPE","LINEAR_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","MO","(","Ns",",","Nr",",","Nq",")",".","x",";"]}]}}]},{type:"textline",tokens:["return","0.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","Lg",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Nu",";","float","Nv",",","Nw",",","Nx",";","vec3","Ny",",","Nz",",","NA",",","NB",",","NC",";","Nz","=","normalize","(","Lg",")",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME"],group:{type:"group",parts:[{type:"textline",tokens:["Ny","=","textureCube","(","u_sky",",","Nz",")",".","rgb",";"]}]}},{type:"elif",expression:["WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Ny","=","u_horizon_color",";","bu","(","Ny",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"textline",tokens:["NA","=","vec3","(","bM",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["NA","=","vec3","(","Lg",".","xy",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["Nv","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYPAPER"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["Nv","=","abs","(","bM",".","y",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nv","=","(","bM",".","y","+","1.0",")","*","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nw","=","acos","(","Nz",".","y",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["Nv","=","abs","(","Nw","*","INV_PI","-","0.5",")","*","2.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nv","=","1.0","-","Nw","*","INV_PI",";"]}]}}]}]}}]}]}}]},{type:"textline",tokens:["NB","=","u_horizon_color",";","NC","=","u_zenith_color",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYTEX"],group:{type:"group",parts:[{type:"textline",tokens:["Nw","=","1.0",";","Nu","=","textureCube","(","u_sky",",","Nz",")",";","br","(","Nu",".","rgb",")",";","Nw","=","Nu",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["Nw","=","bB","(","Nu",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MTEX_NEGATIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Nu","=","vec4","(","vec3","(","1.0",")","-","Nu",".","rgb",",","Nu",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nw","=","1.0","-","Nw",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ","WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT"],group:{type:"group",parts:[{type:"textline",tokens:["Nu","=","vec4","(","u_sky_tex_color",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nw","=","Nu",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_HORIZ"],group:{type:"group",parts:[{type:"textline",tokens:["NB","=","Nl","(","Nu",".","rgb",",","NB",",","Nw",",","u_sky_tex_fac","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP","WOMAP_ZENDOWN",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nx","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYREAL"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","NA",",","vec3","(","0.0",",","1.0",",","0.0",")",")",">=","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["Nx","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:[";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["else","Nx","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WOMAP_ZENUP"],group:{type:"group",parts:[{type:"textline",tokens:["Nx","=","u_sky_tex_fac","[","2","]",";"]}]}},{type:"elif",expression:["WOMAP_ZENDOWN"],group:{type:"group",parts:[{type:"textline",tokens:["Nx","=","u_sky_tex_fac","[","3","]",";"]}]}}]}]}}]},{type:"textline",tokens:["if","(","Nx","!=","0.0",")","NC","=","Nl","(","Nu",".","rgb",",","NC",",","Nw",",","Nx",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WOMAP_BLEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MTEX_RGBTOINT",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Nw","=","dot","(","Nu",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";"]}]}}]},{type:"textline",tokens:["Nv","=","Nt","(","u_sky_tex_dvar",",","Nv",",","Nw",",","u_sky_tex_fac","[","0","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["Ny","=","mix","(","NB",",","NC",",","Nv",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ny","=","NB",";"]}]}}]},{type:"textline",tokens:["bu","(","Ny",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bu","(","NB",")",";","bu","(","NC",")",";"]},{type:"condition",parts:[{type:"if",expression:["WO_SKYBLEND"],group:{type:"group",parts:[{type:"textline",tokens:["Ny","=","mix","(","NB",",","NC",",","Nv",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ny","=","NB",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},"REFLECTION_PASS",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["br","(","Ny",")",";","Nv","=","WATER_LEVEL","-","u_camera_eye_frag",".","y",";","NB","=","vec3","(","0.0",")",";","NB","=","mix","(","u_underwater_fog_color_density",".","rgb",",","NB",",","min","(","-","Nz",".","y",",","1.0",")",")",";","NB","*=","min","(","1.0","-","min","(","0.03","*","Nv",",","0.8",")",",","1.0",")",";","Nv","=","clamp","(","sign","(","0.01","*","Nv","-","Nz",".","y",")",",","0.0",",","1.0",")",";","Ny","=","mix","(","Ny",",","NB",",","Nv",")",";","bu","(","Ny",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","Ny",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","Lg",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","Ng",",","Nh",";","Ng","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","Nh","=","u_sky_vp_inverse","*","Ng",";","Lg","=","Nh",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_SKYDOME",{type:"logic_negative_expr",places:1},"WO_SKYTEX","WO_SKYBLEND",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_position",".","xy",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","Ng",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0005"]},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHORE_SMOOTHING","WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_plane_reflection",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_norm_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Ng","=","1.0",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vB",";","varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bF",";","varying","vec3","Nh",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Ni",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Nj",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","tB",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","SHORE_SMOOTHING","USE_REFRACTION_CORRECTION",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"include",file:"fog.glslf"}]}}]},{type:"textline",tokens:["vec3","Nv","(","in","vec2","Nk",",","in","vec3","Nl",",","in","vec3","Nm",",","in","vec3","Nn",",","out","float","No",")","{","float","Np",",","Nq",",","Nr",";","vec2","Ns",";","vec3","Nt",",","Nu",";","No","=","0.0",";","Nt","=","reflect","(","-","Nm",",","Nl",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ns","=","Nk",".","xy","+","Nl",".","xz","*","REFL_BUMP","/","bH",";","No","=","u_reflect_factor",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1},"WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nu","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nu","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["}","else","{","Nu","=","texture2D","(","u_plane_reflection",",","Ns",")",".","rgb",";","br","(","Nu",")",";","}"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["No","=","u_mirror_factor",";","Nu","=","Nn","*","textureCube","(","u_mirrormap",",","Nt",")",".","rgb",";","br","(","Nu",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["No","=","u_reflect_factor",";","Nu","=","Nn","*","vec3","(","0.3",",","0.5",",","1.0",")",";","br","(","Nu",")",";"]}]}}]},{type:"textline",tokens:["Nt","=","normalize","(","Nt","+","Nm",")",";","Np","=","1.0","-","dot","(","Nm",",","Nt",")",";","Nq","=","u_fresnel_params","[","3","]",";","Nr","=","u_fresnel_params","[","2","]",";","Nr","=","Nq","+","(","1.0","-","Nq",")","*","pow","(","Np",",","Nr",")",";","No","=","min","(","No","*","Nr",",","1.0",")",";","return","Nu",";","}"]},{type:"include",file:"lighting_nodes.glslf"},{type:"textline",tokens:["void","main","(",")","{","vec4","Nw",";","vec2","Nx",",","Ny",",","Nz",";","float","NA",",","NB",",","NC",",","ND",",","NE",";","vec3","NF",",","NG",",","NH",",","NI",",","NJ",",","NK",",","NL",",","NM",",","NN",";","mat3","NO",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["NO","=","mat3","(","bF",",","Nh",",","bE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["NF","=","normalize","(","bE",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["NF","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","FOAM",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["NA","=","bC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["Nx","=","vec2","(","Ni",".","x",",","-","Ni",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nx","=","vec2","(","bC",".","x",",","-","bC",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nx","=","bM",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["NG","=","vec3","(","0.0",")",";","NH","=","texture2D","(","u_normalmap0",",","Nx","*","u_normalmap0_scale","+","vec2","(","0.3",",","0.5",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","NG","+=","NH",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["NI","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["NI","+=","NH",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["NH","=","texture2D","(","u_normalmap0",",","Nx","*","u_normalmap1_scale","+","vec2","(","-","0.3",",","0.7",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","NG","+=","NH",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["NI","+=","NH",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["NH","=","texture2D","(","u_normalmap0",",","Nx","*","u_normalmap2_scale","+","vec2","(","0.0",",","1.1",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","NG","+=","NH",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["NI","+=","NH",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["NH","=","texture2D","(","u_normalmap0",",","Nx","*","u_normalmap3_scale","+","vec2","(","-","0.66",",","-","0.3",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","NG","+=","NH",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["NI","+=","NH",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["NI","=","NO","*","NI",";","if","(","!","f","(","NI",",","vec3","(","0.0",")",")",")","NI","=","normalize","(","NI",")",";","NI","=","mix","(","NF",",","NI",",","0.2",")",";","NI","=","normalize","(","NI",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["NF","=","mix","(","NF",",","normalize","(","NO","*","NG",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["NF","=","mix","(","NF",",","normalize","(","NO","*","NG",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["NF","=","normalize","(","NF",")",";"]}]}}]},{type:"textline",tokens:["NG","=","normalize","(","vB",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ny","=","bG",".","xy","/","bG",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["Nz","=","Ny","+","NF",".","xz","*","u_refr_bump","/","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["NB","=","u_diffuse_color",".","a",";","Nw","=","texture2DProj","(","u_scene_depth",",","bG",")",";","NC","=","Z","(","Nw",")",";","ND","=","max","(","NC","-","bH",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["NC","=","dY","(","NC",",","Nz",",","Ny",")",";","NC","=","max","(","NC","-","bH",",","0.0",")",";","NC","=","u_view_max_depth","/","ABSORB","*","NC",";","NC","=","min","(","NB","*","NC",",","1.0",")",";","NB","=","min","(","15.0","*","NB","*","u_view_max_depth","*","ND",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["NE","=","u_view_max_depth","/","ABSORB","*","ND",";","if","(","u_cam_water_depth",">","0.0",")","NB","=","min","(","NB","*","NE",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["NB","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["NC","=","NB",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","NC","=","0.0",";","NH","=","texture2D","(","u_refractmap",",","Nz",")",".","rgb",";","br","(","NH",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["NE","=","pow","(","min","(","Nj",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","NJ","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","NE",")",";","NE","=","pow","(","min","(","Nj",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","NJ","=","mix","(","u_shore_water_col",",","NJ",",","NE",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["NJ","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["ND","=","max","(","1.0","-","u_view_max_depth","*","ND",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ND","=","1.0","-","NB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["NA","=","max","(","NA","/","WAVES_HEIGHT","+","0.1",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["NK","=","normalize","(","vec3","(","Nj",".","r",",","0.0",",","Nj",".","g",")",")",";","NK","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","NK",",","0.8",")",")",";","NE","=","1.25","*","max","(","dot","(","NI",",","NK",")","-","0.2",",","0.0",")",";","NE","+=","max","(","dot","(","NI",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",",","0.0",")",";","ND","+=","NE","*","(","1.0","-","Nj",".","b",")",";","NA","*=","(","1.0","-","0.95","*","pow","(","Nj",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["ND","+=","NA",";","ND","=","min","(","u_foam_factor","*","ND",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["Nw","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","Nx","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["NA","=","u_specular_params","[","0","]",";","Nx","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","NI","=","NA","*","u_specular_color",";","NK","=","u_environment_energy","*","dS","(","NF",")",";","NK","=","u_ambient","*","NK",";","NK","=","NK","+","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["NL","=","Nv","(","Ny",",","NF",",","NG",",","NK",",","NA",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["NL","=","Nv","(","vec2","(","0.0",")",",","NF",",","NG",",","NK",",","NA",")",";"]}]}}]},{type:"textline",tokens:["NJ","=","u_diffuse_intensity","*","NJ",";","xT","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","NJ",",","NI",",","bC",",","NF",",","NG",",","Nx",",","u_diffuse_params",",","vec4","(","1.0",")",",","0.0",",","vec4","(","0.0",")",",","NM",",","NN",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["NE","=","max","(","dot","(","u_sun_direction",",","-","bE",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","NG",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","NE","=","clamp","(","SSS_STRENGTH","*","NE",",","0.0",",","1.0",")",";","NM","=","mix","(","NM",",","u_shallow_water_col",",","NE",")",";","NM","=","mix","(","NM",",","u_shore_water_col",",","NE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["NM","=","mix","(","NH",",","NM",",","NC",")",";"]}]}}]},{type:"textline",tokens:["NM","=","mix","(","NM",",","NL",",","NA",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["NA","=","mix","(","Nw",".","g",",","Nw",".","r",",","max","(","4.0","*","(","ND","-","0.75",")",",","0.0",")",")",";","NA","=","mix","(","Nw",".","b",",","NA",",","max","(","2.0","*","ND","-","1.0",",","0.0",")",")",";","NA","=","mix","(","0.0",",","NA",",","ND",")",";","NM","=","mix","(","NM",",","NK",",","NA",")",";"]}]}}]},{type:"textline",tokens:["NM","+=","NN",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_FOG",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["ND","=","bH","*","u_view_max_depth",";","NC","=","1.0",";","if","(","u_cam_water_depth",">","1.0",")","NC","=","2.0",";","vA","(","NM",",","ND",",","NG",",","NC",")",";"]}]}}]},{type:"textline",tokens:["bu","(","NM",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["NB","=","max","(","NB",",","NN",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["NB","+=","NA",";"]}]}}]}]}},{type:"elif",expression:["SHORE_SMOOTHING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["NB","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bx","(","NM",",","NB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["NN","=","fwidth","(","tB",")",";","NN","=","smoothstep","(","vec3","(","0.0",")",",","NN","*","Ng",",","tB",")",";","NA","=","min","(","min","(","NN",".","x",",","NN",".","y",")",",","NN",".","z",")",";","NA","=","clamp","(","NA",",","0.0",",","1.0",")",";","NM","=","mix","(","u_wireframe_edge_color",",","NM",",","NA",")",";","NB","=","mix","(","1.0",",","NB",",","NA",")",";"]}]}},{type:"elif",expression:["DEBUG_WIREFRAME",2,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["NN","=","sign","(","tB","-","vec3","(","0.02","*","Ng",")",")",";","NA","=","1.0",";","if","(","NN",".","x","<","0.0","||","NN",".","y","<","0.0","||","NN",".","z","<","0.0",")","NA","=","0.0",";","NM","=","mix","(","u_wireframe_edge_color",",","NM",",","NA",")",";","NB","=","mix","(","1.0",",","NB",",","NA",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","NM",",","NB",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Y",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Y",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"DYNAMIC",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";","attribute","vec3","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH",{type:"logic_negative_expr",places:1},"NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_polyindex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat3","u_model_tsr","=","mat3","(","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat3","u_model_tsr",";"]}]}}]},{type:"textline",tokens:["uniform","mat3","u_view_tsr",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","vB",";","varying","vec3","bC",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","bM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bF",";","varying","vec3","Nh",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","NUM_NORMALMAPS",0,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2},"GENERATED_MESH","DYNAMIC",{type:"logical_and_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Ni",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","Nj",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","bG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","bH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","tB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","No","(","in","vec2","Ng",")","{","float","Nk",";","vec4","Nl",";","vec2","Nm",";","Nm","=","0.5","+","vec2","(","(","Ng",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","Ng",".","y","+","SHORE_MAP_CENTER_Y",")","/","SHORE_MAP_SIZE_Y",")",";","Nl","=","texture2D","(","u_shore_dist_map",",","Nm",")",";","const","vec2","Nn","=","vec2","(","1.0","/","255.0",",","1.0",")",";","Nk","=","dot","(","Nl",".","ba",",","Nn",")",";","Nm","=","normalize","(","Nl",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","Nm",",","Nk",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"SMALL_WAVES_FAC",tokens:["0.3"]},{type:"textline",tokens:["void","NA","(","inout","vec3","Np",",","in","float","Nq",",","in","vec3","Nr",")","{","vec2","Ns",",","Nt",",","Nu",";","float","Nv",",","Nw",",","Nx",",","Ny",",","Nz",";","Nv","=","aU","(","DST_NOISE_SCALE_0","*","(","Np",".","xz","+","DST_NOISE_FREQ_0","*","Nq",")",")","*","aU","(","DST_NOISE_SCALE_1","*","(","Np",".","zx","-","DST_NOISE_FREQ_1","*","Nq",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Nw","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","Nx","=","Nr",".","b",";","Ny","=","sqrt","(","Nx",")",";","Nw","=","max","(","Nx",",","DIR_MIN_SHR_FAC",")","*","sin","(","Ny","/","Nw","+","DIR_FREQ","*","Nq",")",";","Nz","=","max","(","aU","(","DIR_NOISE_SCALE","*","(","Np",".","xz","+","DIR_NOISE_FREQ","*","Nq",")",")",",","DIR_MIN_NOISE_FAC",")",";","Nw","*=","Nz",";","Ny","=","WAVES_HEIGHT","*","mix","(","Nw",",","Nv",",","max","(","Ny",",","DST_MIN_FAC",")",")",";","Ns","=","Nr",".","rg",";","Nw","=","WAVES_HOR_FAC","*","Nw","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","Nx",")",",","0.0",")",";","Ns","=","Nw","*","Ns",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Ny","=","WAVES_HEIGHT","*","Nv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["Nt","=","2.0","*","(","Np",".","xz","-","0.1","*","Nq",")",";","Nu","=","1.3","*","(","Np",".","zx","+","0.03","*","Nq",")",";","Nv","=","ay","(","0.5","*","(","Nt","+","Nu",")",")",".","x","-","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Np",".","xz","+=","Ns",";","Nv","*=","Nx",";"]}]}}]},{type:"textline",tokens:["Ny","+=","SMALL_WAVES_FAC","*","Nv",";"]}]}}]},{type:"textline",tokens:["Np",".","y","+=","Ny",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","NB",",","NC",";","vec2","ND",";","float","NE",",","NF",",","NG",";","vec3","NH",",","NI",",","NJ",",","NK",",","NL",";","mat4","NM",",","NN",";","NM","=","O","(","u_view_tsr",")",";","NN","=","O","(","u_model_tsr",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_polyindex","==","0.0",")","tB","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","tB","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","tB","=","vec3","(","0.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["NH","=","a_position",";","NE","=","abs","(","NH",".","y",")",";","ND","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","NE",")",";","NH",".","y","=","WATER_LEVEL",";","NH",".","xz","+=","ND",";","NH","=","NH",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["c","NO","=","rH","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","NN",")",";","NH","=","NO",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["Nj","=","No","(","NH",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["NF","=","length","(","u_wind",")",";","NG","=","u_time",";","NG","*=","NF",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["NE","=","NE",";","NI","=","NH","+","vec3","(","NE",",","0.0",",","0.0",")",";","NJ","=","NH","+","vec3","(","0.0",",","0.0",",","NE",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2},"FOAM",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ni","=","NH",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["NI","=","NH","+","vec3","(","0.05",",","0.0",",","0.0",")",";","NJ","=","NH","+","vec3","(","0.0",",","0.0",",","0.05",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["NK","=","No","(","NI",".","xz",")",";","NL","=","No","(","NJ",".","xz",")",";","NA","(","NI",",","NG",",","NK",")",";","NA","(","NJ",",","NG",",","NL",")",";","NA","(","NH",",","NG",",","Nj",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["NA","(","NI",",","NG",",","vec3","(","0.0",")",")",";","NA","(","NJ",",","NG",",","vec3","(","0.0",")",")",";","NA","(","NH",",","NG",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_position",".","y","<","0.0",")","{","NH",".","y","=","WATER_LEVEL","-","1.0",";","NI",".","y","=","NH",".","y",";","NJ",".","y","=","NH",".","y",";","}"]}]}}]},{type:"textline",tokens:["NI","=","normalize","(","NI","-","NH",")",";","NJ","=","normalize","(","NJ","-","NH",")",";","bE","=","normalize","(","cross","(","NJ",",","NI",")",")",";","NG","=","dot","(","bE",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","NG","=","clamp","(","0.8","-","NG",",","0.0",",","1.0",")",";","bE","=","mix","(","bE",",","vec3","(","0.0",",","1.0",",","0.0",")",",","NG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["NJ","=","a_tangent",";","bE","=","a_normal",";"]}]}}]},{type:"textline",tokens:["bF","=","NJ",";","Nh","=","cross","(","bE",",","bF",")",";"]}]}}]},{type:"textline",tokens:["bC","=","NH",";","vB","=","u_camera_eye","-","NH",";","NB","=","NM","*","vec4","(","NH",",","1.0",")",";","NC","=","u_proj_matrix","*","NB",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["NG","=","NC",".","x",";","NE","=","NC",".","y",";","NF","=","NC",".","w",";","bG",".","x","=","(","NG","+","NF",")","/","2.0",";","bG",".","y","=","(","NE","+","NF",")","/","2.0",";","bG",".","z","=","NF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFRACTIVE","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["bH","=","-","NB",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","NC",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["2"]},{type:"define",name:"AA_QUALITY_LOW",tokens:["0"]},{type:"define",name:"AA_QUALITY_MEDIUM",tokens:["1"]},{type:"define",name:"AA_QUALITY_HIGH",tokens:["2"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["vec4","Nm","(","float","Ng",",","float","Nk",")","{","vec2","Nl",";","Nl","=","bM","+","vec2","(","Ng",",","Nk",")","*","u_texel_size",";","return","texture2D","(","u_color",",","Nl",")",";","}","vec4","Nz","(",")","{","vec2","Nn",";","float","No",",","Np",",","Nq",",","Nr",",","Ns",",","Nt",";","vec4","Nu",",","Nv",",","Nw",",","Nx",",","Ny",";","Nu","=","Nm","(","-","1.0",",","-","1.0",")",";","Nv","=","Nm","(","1.0",",","-","1.0",")",";","Nw","=","Nm","(","-","1.0",",","1.0",")",";","Nx","=","Nm","(","1.0",",","1.0",")",";","Ny","=","Nm","(","0.0",",","0.0",")",";","No","=","bB","(","Ny",")",";","Np","=","bB","(","Nu",")",";","Nq","=","bB","(","Nv",")",";","Nr","=","bB","(","Nw",")",";","Ns","=","bB","(","Nx",")",";","Nt","=","min","(","No",",","min","(","min","(","Np",",","Nq",")",",","min","(","Nr",",","Ns",")",")",")",";","No","=","max","(","No",",","max","(","max","(","Np",",","Nq",")",",","max","(","Nr",",","Ns",")",")",")",";","Nn",".","x","=","-","(","(","Np","+","Nq",")","-","(","Nr","+","Ns",")",")",";","Nn",".","y","=","(","(","Np","+","Nr",")","-","(","Nq","+","Ns",")",")",";","Ns","=","max","(","(","Np","+","Nq","+","Nr","+","Ns",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","Ns","=","1.0","/","(","min","(","abs","(","Nn",".","x",")",",","abs","(","Nn",".","y",")",")","+","Ns",")",";","Nn","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","Nn","*","Ns",")",")","*","u_texel_size",";","Nx","=","0.5","*","(","texture2D","(","u_color",",","bM","+","Nn","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","bM","+","Nn","*","(","2.0","/","3.0","-","0.5",")",")",")",";","Nw","=","Nx","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","bM","+","Nn","*","-","0.5",")","+","texture2D","(","u_color",",","bM","+","Nn","*","0.5",")",")",";","Ns","=","bB","(","Nw",")",";","if","(","(","Ns","<","Nt",")","||","(","Ns",">","No",")",")","return","Nx",";","else","return","Nw",";","}"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_GREEN_AS_LUMA",tokens:["1"]},{type:"define",name:"FXAA_BLEND4WEB",tokens:["1"]},{type:"include",file:"fxaa.glslf"},{type:"condition",parts:[{type:"if",expression:["AA_QUALITY","AA_QUALITY_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["39"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["1.00"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.063"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0312"]}]}},{type:"elif",expression:["AA_QUALITY","AA_QUALITY_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["20"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["0.65"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.166"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0625"]}]}},{type:"elif",expression:["AA_QUALITY","AA_QUALITY_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["0.50"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["0.166"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["0.0833"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Oq",";"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","Nz","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Oq","=","u_texel_size",";","gl_FragColor","=","Op","(","bM",",","u_color",",","Oq",",","FXAA_QUALITY_SUBPIX",",","FXAA_QUALITY_EDGE_THRESHOLD",",","FXAA_QUALITY_EDGE_THRESHOLD_MIN",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","bM",";","void","main","(",")","{","vec4","Ng",";","vec2","Nk",",","Nl",";","Nk","=","vec2","(","0.0",",","0.0",")",";","Nl","=","u_texel_size",";","Ng","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","Ng","*","0.0875447373698",";","Nk","+=","Nl",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Nk",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Nk",")","*","0.0858112354248",";","Nk","+=","Nl",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Nk",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Nk",")","*","0.0808139781061",";","Nk","+=","Nl",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Nk",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Nk",")","*","0.0731235112908",";","Nk","+=","Nl",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Nk",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Nk",")","*","0.0635705267419",";","Nk","+=","Nl",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Nk",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Nk",")","*","0.0530985673112",";","Nk","+=","Nl",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Nk",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Nk",")","*","0.0426125984122",";","Nk","+=","Nl",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Nk",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Nk",")","*","0.0328565115809",";","Nk","+=","Nl",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","+","Nk",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","bM","-","Nk",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","Ng",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","bM",";","void","main","(",")","{","vec4","Ng",",","Nk",";","Ng","=","texture2D","(","u_main",",","bM",")",";","Nk","=","texture2D","(","u_bloom",",","bM",")",";","Ng","=","Ng",";","Ng","+=","Nk",";","gl_FragColor","=","vec4","(","Ng",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","bM",";","void","main","(",")","{","float","Ng",";","vec3","Nk",";","vec4","Nl",";","Nl","=","texture2D","(","u_color",",","bM",")",";","Nk","=","Nl",".","rgb",";","if","(","u_brightness","<","0.0",")","Nk","=","Nk","*","(","1.0","+","u_brightness",")",";","else","Nk","=","Nk","+","(","(","1.0","-","Nk",")","*","u_brightness",")",";","Nk","=","(","Nk","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","Nk","*=","u_exposure",";","Ng","=","bB","(","vec4","(","Nk",",","0.0",")",")",";","Nk","=","mix","(","vec3","(","Ng",")",",","Nk",",","u_saturation",")",";","gl_FragColor","=","vec4","(","Nk",",","Nl",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","bM",";","void","main","(",")","{","gl_FragColor","=","V","(","clamp","(","Ow","(","u_depth",",","bM",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","bM",";","void","main","(",")","{","float","Ng",",","Nk",";","vec4","Nl",",","Nm",";","Nl","=","texture2D","(","u_sharp",",","bM",")",";","if","(","u_dof_dist",">","0.0",")","{","Ng","=","Ow","(","u_depth",",","bM",",","u_camera_range",")",";","Ng","*=","u_view_max_depth",";","if","(","Ng","<","u_dof_dist",")","Nk","=","(","u_dof_dist","-","Ng",")","/","u_dof_front",";","else","Nk","=","(","Ng","-","u_dof_dist",")","/","u_dof_rear",";","Nk","=","clamp","(","Nk",",","0.0",",","1.0",")",";","Nm","=","texture2D","(","u_blurred",",","bM",")",";","gl_FragColor","=","mix","(","Nl",",","Nm",",","Nk",")",";","}","else","gl_FragColor","=","Nl",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_src_color",";","uniform","sampler2D","u_glow_mask_small",";","uniform","sampler2D","u_glow_mask_large",";","uniform","float","u_glow_mask_small_coeff",";","uniform","float","u_glow_mask_large_coeff",";","varying","vec2","bM",";","void","main","(",")","{","float","Ng",";","vec4","Nk",",","Nl",",","Nm",";","Nk","=","texture2D","(","u_src_color",",","bM",")",";","Nl","=","texture2D","(","u_glow_mask_small",",","bM",")",";","Nm","=","texture2D","(","u_glow_mask_large",",","bM",")",";","gl_FragColor","=","Nk",";","if","(","Nm",".","a","!=","0.0",")","{","Ng","=","u_glow_mask_large_coeff","*","Nm",".","a",";","Ng","=","clamp","(","Ng",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","Nm",".","rgb","/","Nm",".","a",",","Ng",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","Ng",")",";","}","if","(","Nl",".","a","!=","0.0",")","{","Ng","=","u_glow_mask_small_coeff","*","Nl",".","a",";","Ng","=","clamp","(","Ng",",","0.0",",","1.0",")",";","gl_FragColor",".","rgb","=","mix","(","gl_FragColor",".","rgb",",","Nl",".","rgb","/","Nl",".","a",",","Ng",")",";","gl_FragColor",".","a","=","mix","(","gl_FragColor",".","a",",","1.0",",","Ng",")",";","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","Ox",";","varying","vec2","Oy",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","varying","vec4","Oz",";","void","main","(",")","{","vec4","OA",";","int","OB",";","float","OC",",","OD",",","OE",",","OF",";","vec2","OG",",","OH",",","OI",";","OG","=","(","Oz",".","xy","-","bM",")",";","OC","=","length","(","OG",")",";","OG","=","u_radial_blur_step","*","OG","/","OC",";","OD","=","OC","/","u_radial_blur_step",";","OG","*=","min","(","OD",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","OD","=","max","(","OD",",","STEPS_PER_PASS",")",";","OH","=","bM",";","OE","=","0.0",";","const","int","OJ","=","int","(","STEPS_PER_PASS",")",";","OB","=","int","(","OD","+","0.5",")",";","for","(","int","OK","=","0",";","OK","<","OJ",";","OK","+=","1",")","{","if","(","OK","<=","OB",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["OD","=","Ow","(","u_input",",","OH",",","u_camera_range",")",";","OE","+=","max","(","(","1.0","-","pow","(","OC",",","0.3",")",")","*","step","(","0.9",",","OD",")",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["OA","=","texture2D","(","u_input",",","OH",")",";","OE","+=","Z","(","OA",")",";"]}]}}]},{type:"textline",tokens:["}","OH","+=","OG",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["OI","=","bM","+","Oy",";","OF","=","ay","(","vec2","(","2.5","*","(","OI",".","x",")",",","2.5","*","(","OI",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","ay","(","vec2","(","5.0","*","(","OI",".","x",")","-","0.66","*","u_time",",","5.0","*","(","OI",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","aU","(","vec2","(","7.5","*","(","OI",".","x",")","+","0.33","*","u_time",",","7.5","*","(","OI",".","y",")","-","0.33","*","u_time",")",")",";","OF","*=","clamp","(","1.2","-","sqrt","(","0.2","*","OC",")",",","0.0",",","1.0",")","*","Ox",";","OE","=","max","(","OF",",","OE",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","V","(","OE","/","STEPS_PER_PASS",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","float","u_cam_water_depth",";","varying","float","Ox",";","varying","vec2","Oy",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","varying","vec4","Oz",";","void","main","(",")","{","float","Ng",",","Nk",";","vec3","Nl",";","bM","=","a_bb_vertex","+","0.5",";","Nl","=","normalize","(","u_sun_direction",")",";","Oz","=","u_view_proj_matrix","*","vec4","(","Nl",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","WATER_EFFECTS",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","Ox","=","1.0",";","Nl","=","vec3","(","0.0",",","1.0",",","0.0",")",";","Nl","=","i","(","u_camera_quat",",","Nl",")",";","Nl","=","normalize","(","Nl",")",";","Ng","=","dot","(","Nl",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","Nk","=","atan","(","Nl",".","x",",","Nl",".","z",")",";","Oy","=","vec2","(","-","Nk",",","acos","(","Ng",")",")",";","}","else","{","Ox","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["Oz",".","xy","=","0.5","*","(","Oz",".","xy","/","Oz",".","w","+","1.0",")",";","Oz","+=","99999.0","*","step","(","Oz",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","uniform","vec3","u_sun_intensity",";","varying","vec2","bM",";","void","main","(",")","{","float","Ng",";","vec3","Nk",";","vec4","Nl",";","Nl","=","texture2D","(","u_main",",","bM",")",";","Nk","=","clamp","(","u_sun_intensity",",","0.4",",","0.8",")",";","br","(","Nl",".","rgb",")",";","Ng","=","Z","(","texture2D","(","u_god_rays",",","bM",")",")",";","Nk","=","Nl",".","rgb","+","u_god_rays_intensity","*","vec3","(","Ng",")","*","Nk",";","bu","(","Nk",")",";"]},{type:"condition",parts:[{type:"if",expression:["SAFARI_CANVAS_ALPHA_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","Nk",",","max","(","0.01",",","Nl",".","a",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","Nk",",","Nl",".","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","bM",";","void","main","(",")","{","float","Ng",";","vec4","Nk",";","Nk","=","texture2D","(","u_input",",","bM",")",";","Ng","=","dot","(","Nk",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","Ng",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","Ng",",","Nk",",","Nl",",","Nm",";","Nk","=","0.0",";","Nl","=","0.025",";","Nm","=","0.025",";","for","(","int","Nn","=","0",";","Nn","<","20",";","Nn","+=","1",")","{","Nm","=","0.025",";","for","(","int","No","=","0",";","No","<","20",";","No","+=","1",")","{","Ng","=","max","(","texture2D","(","u_input",",","vec2","(","Nl",",","Nm",")",")",".","r",",","0.01",")",";","Nk","+=","log","(","Ng",")",";","Nm","+=","0.05",";","}","Nl","+=","0.05",";","}","Nk","=","exp","(","Nk","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","Nk",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","bM",";","varying","float","OA",";","void","main","(",")","{","vec4","OB",";","float","OC",",","OD",";","OC","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","OD","=","texture2D","(","u_luminance",",","bM",")",".","r",";","OB","=","texture2D","(","u_main",",","bM",")",";","OC","=","OD","/","OC",";","OD","=","u_bloom_edge_lum",";","gl_FragColor","=","OB","*","max","(","OC","-","OD",",","0.0",")","*","OA",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","bM",";","varying","float","OA",";","const","vec3","Ng","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","Nr","(","in","vec4","Nk",",","in","vec3","Nl",",","out","vec3","Nm",")","{","float","Nn",",","No",",","Np",",","Nq",";","Nn","=","Nk",".","w","*","Nl",".","x","+","Nk",".","y","*","Nl",".","z","-","Nk",".","z","*","Nl",".","y",";","No","=","Nk",".","w","*","Nl",".","y","+","Nk",".","z","*","Nl",".","x","-","Nk",".","x","*","Nl",".","z",";","Np","=","Nk",".","w","*","Nl",".","z","+","Nk",".","x","*","Nl",".","y","-","Nk",".","y","*","Nl",".","x",";","Nq","=","-","Nk",".","x","*","Nl",".","x","-","Nk",".","y","*","Nl",".","y","-","Nk",".","z","*","Nl",".","z",";","Nm",".","x","=","Nn","*","Nk",".","w","-","Nq","*","Nk",".","x","-","No","*","Nk",".","z","+","Np","*","Nk",".","y",";","Nm",".","y","=","No","*","Nk",".","w","-","Nq","*","Nk",".","y","-","Np","*","Nk",".","x","+","Nn","*","Nk",".","z",";","Nm",".","z","=","Np","*","Nk",".","w","-","Nq","*","Nk",".","z","-","Nn","*","Nk",".","y","+","No","*","Nk",".","x",";","}","void","main","(",")","{","vec3","Ns",";","bM","=","2.0","*","a_position",";","Nr","(","u_camera_quat",",","Ng",",","Ns",")",";","OA","=","dot","(","-","Ns",",","u_sun_direction",")","*","u_bloom_key",";","OA","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","uniform","float","u_motion_blur_decay_threshold",";","varying","vec2","bM",";","float","Ng","=","0.0042",";","void","main","(",")","{","vec4","Nk",",","Nl",",","Nm",",","Nn",";","Nk","=","texture2D","(","u_mb_tex_curr",",","bM",")",";","Nl","=","texture2D","(","u_mb_tex_accum",",","bM",")",";","if","(","length","(","Nk","-","Nl",")",">","u_motion_blur_decay_threshold",")","{","Nm","=","(","1.0","-","u_motion_blur_exp",")","*","Nk","+","u_motion_blur_exp","*","Nl",";","Nm","=","Nm","-","Nl",";","Nn","=","Nk","-","Nl",";","Nm","=","min","(","max","(","abs","(","Nm",")",",","vec4","(","Ng",")",")",",","abs","(","Nn",")",")","*","sign","(","Nm",")",";","gl_FragColor","=","Nl","+","Nm",";","}","else","{","gl_FragColor","=","Nk",";","}","}"]}]},exports["postprocessing/outline.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_outline_src",";","uniform","sampler2D","u_outline_mask",";","uniform","sampler2D","u_outline_mask_blurred",";","uniform","vec3","u_outline_color",";","uniform","float","u_draw_outline",";","varying","vec2","bM",";","void","main","(",")","{","vec3","Ng",";","float","Nk",";","vec4","Nl",",","Nm",",","Nn",";","Nl","=","texture2D","(","u_outline_src",",","bM",")",";","gl_FragColor","=","Nl",";","if","(","u_draw_outline","!=","0.0",")","{","Nm","=","texture2D","(","u_outline_mask",",","bM",")",";","Nn","=","texture2D","(","u_outline_mask_blurred",",","bM",")",";","Nk","=","Nn",".","a","-","Nm",".","a",";","if","(","Nk","!=","0.0",")","{","Nk","=","smoothstep","(","0.0",",","1.0",",","Nn",".","a",")",";","if","(","Nm",".","a","==","0.0",")","{","Ng","=","u_outline_color",";","bu","(","Ng",")",";","Nm","=","vec4","(","clamp","(","Ng",",","0.0",",","1.0",")",",","1.0",")",";","gl_FragColor","=","mix","(","Nl",",","Nm",",","Nk",")",";","}","}","}","}"]}]},exports["postprocessing/performance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_color",";","varying","vec2","bM",";","void","main","(",")","{","vec4","Ng",";","Ng","=","vec4","(","0.0",")",";","for","(","int","Nk","=","0",";","Nk","<","100",";","Nk","++",")","Ng","+=","0.001","*","texture2D","(","u_color",",","bM","+","vec2","(","0.001","*","vec2","(","Nk",")",")",")",";","gl_FragColor","=","Ng",";","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"define",name:"FLIP_CUBEMAP_COORDS",tokens:["7"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_tex_number",";","uniform","vec2","u_delta",";"]}]}}]},{type:"textline",tokens:["varying","vec2","bM",";","void","main","(",")","{","float","Ng",",","Nk",",","Nl",",","Nm",";","vec2","Nn",",","No",";","vec4","Np",";"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","POST_EFFECT_NONE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","bM",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_GRAYSCALE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Np","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor",".","rgb","=","vec3","(","(","Np",".","r","+","Np",".","g","+","Np",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nn","=","vec2","(","0.0",",","0.0",")",";","No","=","u_texel_size",";","Np","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","Np","*","0.2270270270",";","Nn","+=","No",";","Np","=","texture2D","(","u_color",",","bM","+","Nn",")",";","gl_FragColor","+=","Np","*","0.1945945946",";","Np","=","texture2D","(","u_color",",","bM","-","Nn",")",";","gl_FragColor","+=","Np","*","0.1945945946",";","Nn","+=","No",";","Np","=","texture2D","(","u_color",",","bM","+","Nn",")",";","gl_FragColor","+=","Np","*","0.1216216216",";","Np","=","texture2D","(","u_color",",","bM","-","Nn",")",";","gl_FragColor","+=","Np","*","0.1216216216",";","Nn","+=","No",";","Np","=","texture2D","(","u_color",",","bM","+","Nn",")",";","gl_FragColor","+=","Np","*","0.0540540541",";","Np","=","texture2D","(","u_color",",","bM","-","Nn",")",";","gl_FragColor","+=","Np","*","0.0540540541",";","Nn","+=","No",";","Np","=","texture2D","(","u_color",",","bM","+","Nn",")",";","gl_FragColor","+=","Np","*","0.0162162162",";","Np","=","texture2D","(","u_color",",","bM","-","Nn",")",";","gl_FragColor","+=","Np","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_GLOW_BLUR",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_GLOW_BLUR",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nn","=","vec2","(","0.0",",","0.0",")",";","No","=","u_texel_size",";","Np","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","Np","*","(","1.0","-","step","(","0.0",",","-","Np",".","a",")",")","*","0.152507",";","Nn","+=","No",";","Np","=","texture2D","(","u_color",",","bM","+","Nn",")",";","gl_FragColor","+=","Np","*","(","1.0","-","step","(","0.0",",","-","Np",".","a",")",")","*","0.141763",";","Np","=","texture2D","(","u_color",",","bM","-","Nn",")",";","gl_FragColor","+=","Np","*","(","1.0","-","step","(","0.0",",","-","Np",".","a",")",")","*","0.141763",";","Nn","+=","No",";","Np","=","texture2D","(","u_color",",","bM","+","Nn",")",";","gl_FragColor","+=","Np","*","(","1.0","-","step","(","0.0",",","-","Np",".","a",")",")","*","0.113861",";","Np","=","texture2D","(","u_color",",","bM","-","Nn",")",";","gl_FragColor","+=","Np","*","(","1.0","-","step","(","0.0",",","-","Np",".","a",")",")","*","0.113861",";","Nn","+=","No",";","Np","=","texture2D","(","u_color",",","bM","+","Nn",")",";","gl_FragColor","+=","Np","*","(","1.0","-","step","(","0.0",",","-","Np",".","a",")",")","*","0.079019",";","Np","=","texture2D","(","u_color",",","bM","-","Nn",")",";","gl_FragColor","+=","Np","*","(","1.0","-","step","(","0.0",",","-","Np",".","a",")",")","*","0.079019",";","Nn","+=","No",";","Np","=","texture2D","(","u_color",",","bM","+","Nn",")",";","gl_FragColor","+=","Np","*","(","1.0","-","step","(","0.0",",","-","Np",".","a",")",")","*","0.047383",";","Np","=","texture2D","(","u_color",",","bM","-","Nn",")",";","gl_FragColor","+=","Np","*","(","1.0","-","step","(","0.0",",","-","Np",".","a",")",")","*","0.047383",";","Nn","+=","No",";","Np","=","texture2D","(","u_color",",","bM","+","Nn",")",";","gl_FragColor","+=","Np","*","(","1.0","-","step","(","0.0",",","-","Np",".","a",")",")","*","0.024549",";","Np","=","texture2D","(","u_color",",","bM","-","Nn",")",";","gl_FragColor","+=","Np","*","(","1.0","-","step","(","0.0",",","-","Np",".","a",")",")","*","0.024549",";","Nn","+=","No",";","Np","=","texture2D","(","u_color",",","bM","+","Nn",")",";","gl_FragColor","+=","Np","*","(","1.0","-","step","(","0.0",",","-","Np",".","a",")",")","*","0.01099",";","Np","=","texture2D","(","u_color",",","bM","-","Nn",")",";","gl_FragColor","+=","Np","*","(","1.0","-","step","(","0.0",",","-","Np",".","a",")",")","*","0.01099",";","Nn","+=","No",";","Np","=","texture2D","(","u_color",",","bM","+","Nn",")",";","gl_FragColor","+=","Np","*","(","1.0","-","step","(","0.0",",","-","Np",".","a",")",")","*","0.00425",";","Np","=","texture2D","(","u_color",",","bM","-","Nn",")",";","gl_FragColor","+=","Np","*","(","1.0","-","step","(","0.0",",","-","Np",".","a",")",")","*","0.00425",";","Nn","+=","No",";","Np","=","texture2D","(","u_color",",","bM","+","Nn",")",";","gl_FragColor","+=","Np","*","(","1.0","-","step","(","0.0",",","-","Np",".","a",")",")","*","0.00142",";","Np","=","texture2D","(","u_color",",","bM","-","Nn",")",";","gl_FragColor","+=","Np","*","(","1.0","-","step","(","0.0",",","-","Np",".","a",")",")","*","0.00142",";","gl_FragColor","=","clamp","(","gl_FragColor",",","0.0",",","1.0",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","POST_EFFECT_X_EXTEND",{type:"equal_expr",places:2},"POST_EFFECT","POST_EFFECT_Y_EXTEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["No","=","u_texel_size",";","Np","=","texture2D","(","u_color",",","bM",")",";","gl_FragColor","=","Np",";","if","(","Np",".","a","==","0.0",")","{","Np","=","texture2D","(","u_color",",","bM","+","No",")",";","if","(","Np",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","Np",".","a",")",";","else","{","Np","=","texture2D","(","u_color",",","bM","-","No",")",";","if","(","Np",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","Np",".","a",")",";","}","}"]}]}},{type:"elif",expression:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Ng","=","u_delta","[","0","]",";","Nk","=","u_delta","[","1","]",";","Nl","=","1.0","/","3.0",";","Nm","=","0.5",";","No","=","vec2","(","Nl",",","Nm",")",";","if","(","u_tex_number","==","0",")","{","Nn","=","bM","*","No","+","vec2","(","2.0","*","Nl",",","0.0",")",";","Nn","[","0","]","=","min","(","Nn","[","0","]",",","1.0","-","Ng",")",";","Nn","[","1","]","=","min","(","Nn","[","1","]",",","0.5","-","Nk",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","5.0","*","Nl","-","Nn","[","0","]",",","Nn","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","1",")","{","Nn","=","bM","*","No",";","Nn","[","0","]","=","max","(","Nn","[","0","]",",","Ng",")",";","Nn","[","1","]","=","min","(","Nn","[","1","]",",","0.5","-","Nk",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","Nl","-","Nn","[","0","]",",","Nn","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","2",")","{","Nn","=","bM","*","No","+","vec2","(","Nl",",","Nm",")",";","Nn","[","0","]","=","max","(","Nn","[","0","]",",","Nl","+","Ng",")",";","Nn","[","0","]","=","min","(","Nn","[","0","]",",","2.0","*","Nl","-","Ng",")",";","Nn","[","1","]","=","min","(","Nn","[","1","]",",","1.0","-","Nk",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","Nn","[","0","]",",","3.0","*","Nm","-","Nn","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","3",")","{","Nn","=","bM","*","No","+","vec2","(","0.0",",","Nm",")",";","Nn","[","0","]","=","min","(","Nn","[","0","]",",","Nl","-","Ng",")",";","Nn","[","1","]","=","min","(","Nn","[","1","]",",","1.0","-","Nk",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","Nn","[","0","]",",","3.0","*","Nm","-","Nn","[","1","]",")",")",";","}","else","if","(","u_tex_number","==","4",")","{","Nn","=","bM","*","No","+","vec2","(","Nl",",","0.0",")",";","Nn","[","0","]","=","max","(","Nn","[","0","]",",","Nl","+","Ng",")",";","Nn","[","0","]","=","min","(","Nn","[","0","]",",","2.0","*","Nl","-","Ng",")",";","Nn","[","1","]","=","min","(","Nn","[","1","]",",","0.5","-","Nk",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","1.0","-","Nn","[","0","]",",","Nn","[","1","]",")",")",";","}","else","{","No","=","bM","*","No","+","vec2","(","2.0","*","Nl",",","Nm",")",";","No","[","0","]","=","min","(","No","[","0","]",",","1.0","-","Ng",")",";","No","[","1","]","=","max","(","No","[","1","]",",","0.5","+","Nk",")",";","gl_FragColor","=","texture2D","(","u_color",",","vec2","(","5.0","*","Nl","-","No","[","0","]",",","No","[","1","]",")",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","varying","vec2","bM",";","void","main","(",")","{","bM","=","2.0","*","a_position",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2},"SMAA_PREDICATION",{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","OB",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","OC",";","varying","vec4","OD",";","varying","vec4","OE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","OF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","OL","(","vec2","OG",",","sampler2D","OH",")","{","float","OI",",","OJ",",","OK",";","OI","=","texture2D","(","OH",",","OG",")",".","r",";","OJ","=","texture2D","(","OH",",","OC",".","xy",")",".","r",";","OK","=","texture2D","(","OH",",","OC",".","zw",")",".","r",";","return","vec3","(","OI",",","OJ",",","OK",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","OQ","(","vec2","OM",",","sampler2D","ON",")","{","vec2","OO",";","vec3","OP",";","OP","=","OL","(","OM",",","ON",")",";","OO","=","abs","(","OP",".","xx","-","OP",".","yz",")",";","OO","=","step","(","SMAA_PREDICATION_THRESHOLD",",","OO",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","OO",")",";","}"]}]}}]},{type:"textline",tokens:["void","OU","(","bvec2","OR",",","inout","vec2","OS",",","vec2","OT",")","{","if","(","OR",".","x",")","OS",".","x","=","OT",".","x",";","if","(","OR",".","y",")","OS",".","y","=","OT",".","y",";","}","void","OU","(","bvec4","OV",",","inout","vec4","OW",",","vec4","OX",")","{","OU","(","OV",".","xy",",","OW",".","xy",",","OX",".","xy",")",";","OU","(","OV",".","zw",",","OW",".","zw",",","OX",".","zw",")",";","}","vec2","OZ","(","vec2","OY",")","{","return","sign","(","OY",")","*","floor","(","abs","(","OY",")","+",".5",")",";","}","vec4","OZ","(","vec4","O_",")","{","return","sign","(","O_",")","*","floor","(","abs","(","O_",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Pm","(","vec2","Pa",",","sampler2D","Pb"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","Pc"]}]}}]},{type:"textline",tokens:[")","{","vec4","Pd",";","float","Pe",",","Pf",",","Pg",",","Ph",",","Pi",";","vec3","Pj",";","vec2","Pk",",","Pl",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["Pk","=","OQ","(","Pa",",","Pc",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Pk","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["Pj","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","Pe","=","dot","(","texture2D","(","Pb",",","Pa",")",".","rgb",",","Pj",")",";","Pf","=","dot","(","texture2D","(","Pb",",","OC",".","xy",")",".","rgb",",","Pj",")",";","Pg","=","dot","(","texture2D","(","Pb",",","OC",".","zw",")",".","rgb",",","Pj",")",";","Pd",".","xy","=","abs","(","Pe","-","vec2","(","Pf",",","Pg",")",")",";","Pk","=","step","(","Pk",",","Pd",".","xy",")",";","if","(","dot","(","Pk",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","Ph","=","dot","(","texture2D","(","Pb",",","OD",".","xy",")",".","rgb",",","Pj",")",";","Pi","=","dot","(","texture2D","(","Pb",",","OD",".","zw",")",".","rgb",",","Pj",")",";","Pd",".","zw","=","abs","(","Pe","-","vec2","(","Ph",",","Pi",")",")",";","Pl","=","max","(","Pd",".","xy",",","Pd",".","zw",")",";","Pi","=","dot","(","texture2D","(","Pb",",","OE",".","xy",")",".","rgb",",","Pj",")",";","Ph","=","dot","(","texture2D","(","Pb",",","OE",".","zw",")",".","rgb",",","Pj",")",";","Pd",".","zw","=","abs","(","vec2","(","Pf",",","Pg",")","-","vec2","(","Pi",",","Ph",")",")",";","Pl","=","max","(","Pl",".","xy",",","Pd",".","zw",")",";","Ph","=","max","(","Pl",".","x",",","Pl",".","y",")",";","Pk",".","xy","*=","step","(","Ph",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","Pd",".","xy",")",";","return","Pk",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","Po","(","vec2","Pn",")","{","Pn",".","r","=","Pn",".","r","*","abs","(","5.0","*","Pn",".","r","-","5.0","*","0.75",")",";","return","OZ","(","Pn",")",";","}","vec4","Po","(","vec4","Pp",")","{","Pp",".","rb","=","Pp",".","rb","*","abs","(","5.0","*","Pp",".","rb","-","5.0","*","0.75",")",";","return","OZ","(","Pp",")",";","}","vec2","Px","(","sampler2D","Pq",",","vec2","Pr",",","vec2","Ps",",","out","vec2","Pt",")","{","vec3","Pu",";","vec4","Pv",";","Pv","=","vec4","(","Pr",",","-","1.0",",","1.0",")",";","Pu","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","Pw","=","0",";","Pw","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","Pw","++",")","{","if","(","Pv",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","Pv",".","w",">","0.9",")","{","Pv",".","xyz","+=","Pu","*","vec3","(","Ps",",","1.0",")",";","Pt","=","texture2D","(","Pq",",","Pv",".","xy",",","0.0",")",".","rg",";","Pv",".","w","=","dot","(","Pt",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","Pv",".","zw",";","}","vec2","PF","(","sampler2D","Py",",","vec2","Pz",",","vec2","PA",",","out","vec2","PB",")","{","vec3","PC",";","vec4","PD",";","PD","=","vec4","(","Pz",",","-","1.0",",","1.0",")",";","PD",".","x","+=","0.25","*","u_texel_size",".","x",";","PC","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","PE","=","0",";","PE","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","PE","++",")","{","if","(","PD",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","PD",".","w",">","0.9",")","{","PD",".","xyz","=","PC","*","vec3","(","PA",",","1.0",")","+","PD",".","xyz",";","PB","=","texture2D","(","Py",",","PD",".","xy",",","0.0",")",".","rg",";","PB","=","Po","(","PB",")",";","PD",".","w","=","dot","(","PB",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","PD",".","zw",";","}","vec2","PL","(","sampler2D","PG",",","vec2","PH",",","vec2","PI",",","float","PJ",")","{","vec2","PK",";","PK","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","PI","+","PH",";","PK","=","SMAA_AREATEX_PIXEL_SIZE","*","PK","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","PK",".","x","+=","0.5",";","PK",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","PJ",";","return","texture2D","(","PG",",","PK",",","0.0",")",".","rg",";","}","vec2","PX","(","sampler2D","PM",",","sampler2D","PN",",","vec2","PO",",","vec2","PP",",","vec4","PQ",")","{","vec4","PR",",","PS",",","PT",";","vec2","PU",",","PV",",","PW",";","PU","=","vec2","(","0.0",",","0.0",")",";","if","(","PP",".","r",">","0.0",")","{","PR",".","xz","=","Px","(","PM",",","PO",",","vec2","(","-","1.0",",","1.0",")",",","PV",")",";","PR",".","x","+=","float","(","PV",".","y",">","0.9",")",";","}","else","PR",".","xz","=","vec2","(","0.0",",","0.0",")",";","PR",".","yw","=","Px","(","PM",",","PO",",","vec2","(","1.0",",","-","1.0",")",",","PV",")",";","if","(","PR",".","x","+","PR",".","y",">","2.0",")","{","PS","=","vec4","(","-","PR",".","x","+","0.25",",","PR",".","x",",","PR",".","y",",","-","PR",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","PO",".","xyxy",";","PT",".","xy","=","texture2D","(","PM",",","PS",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","PT",".","zw","=","texture2D","(","PM",",","PS",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","PT",".","yxwz","=","Po","(","PT",".","xyzw",")",";","PW","=","vec2","(","2.0",",","2.0",")","*","PT",".","xz","+","PT",".","yw",";","OU","(","bvec2","(","step","(","0.9",",","PR",".","zw",")",")",",","PW",",","vec2","(","0.0",",","0.0",")",")",";","PU","+=","PL","(","PN",",","PR",".","xy",",","PW",",","PQ",".","z",")",";","}","PR",".","xz","=","PF","(","PM",",","PO",",","vec2","(","-","1",",","-","1",")",",","PV",")",";","if","(","texture2D","(","PM",",","PO","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","PR",".","yw","=","PF","(","PM",",","PO",",","vec2","(","1",",","1",")",",","PV",")",";","PR",".","y","+=","float","(","PV",".","y",">","0.9",")",";","}","else","PR",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","PR",".","x","+","PR",".","y",">","2.0",")","{","PT","=","vec4","(","-","PR",".","x",",","-","PR",".","x",",","PR",".","y",",","PR",".","y",")","*","u_texel_size",".","xyxy","+","PO",".","xyxy",";","PS",".","x","=","texture2D","(","PM",",","PT",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","PS",".","y","=","texture2D","(","PM",",","PT",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","PS",".","zw","=","texture2D","(","PM",",","PT",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","PV","=","vec2","(","2.0",",","2.0",")","*","PS",".","xz","+","PS",".","yw",";","OU","(","bvec2","(","step","(","0.9",",","PR",".","zw",")",")",",","PV",",","vec2","(","0",",","0",")",")",";","PU","+=","PL","(","PN",",","PR",".","xy",",","PV",",","PQ",".","w",")",".","gr",";","}","return","PU",";","}"]}]}}]},{type:"textline",tokens:["float","Qc","(","sampler2D","PY",",","vec2","PZ",",","float","P_",")","{","vec2","Qa",",","Qb",";","Qa","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","Qb","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","P_",",","1.0",")",";","Qa","+=","vec2","(","-","1.0",",","1.0",")",";","Qb","+=","vec2","(","0.5",",","-","0.5",")",";","Qa","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","Qb","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","PY",",","Qa","*","PZ","+","Qb",",","0.0",")",".","r",";","}","float","Qk","(","sampler2D","Qd",",","sampler2D","Qe",",","vec2","Qf",",","float","Qg",")","{","float","Qh",";","vec2","Qi",";","Qi","=","vec2","(","0.0",",","1.0",")",";","for","(","int","Qj","=","0",";","Qj","<","SMAA_MAX_SEARCH_STEPS",";","Qj","++",")","{","if","(","Qf",".","x",">","Qg","&&","Qi",".","g",">","0.8281","&&","Qi",".","r","==","0.0",")","{","Qi","=","texture2D","(","Qd",",","Qf",",","0.0",")",".","rg",";","Qf","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","Qf",";","}","}","Qh","=","-","(","255.0","/","127.0",")","*","Qc","(","Qe",",","Qi",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","Qh","+","Qf",".","x",";","}","float","Qs","(","sampler2D","Ql",",","sampler2D","Qm",",","vec2","Qn",",","float","Qo",")","{","float","Qp",";","vec2","Qq",";","Qq","=","vec2","(","0.0",",","1.0",")",";","for","(","int","Qr","=","0",";","Qr","<","SMAA_MAX_SEARCH_STEPS",";","Qr","++",")","{","if","(","Qn",".","x","<","Qo","&&","Qq",".","g",">","0.8281","&&","Qq",".","r","==","0.0",")","{","Qq","=","texture2D","(","Ql",",","Qn",",","0.0",")",".","rg",";","Qn","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","Qn",";","}","}","Qp","=","-","(","255.0","/","127.0",")","*","Qc","(","Qm",",","Qq",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","Qp","+","Qn",".","x",";","}","float","QA","(","sampler2D","Qt",",","sampler2D","Qu",",","vec2","Qv",",","float","Qw",")","{","float","Qx",";","vec2","Qy",";","Qy","=","vec2","(","1.0",",","0.0",")",";","for","(","int","Qz","=","0",";","Qz","<","SMAA_MAX_SEARCH_STEPS",";","Qz","++",")","{","if","(","Qv",".","y",">","Qw","&&","Qy",".","r",">","0.8281","&&","Qy",".","g","==","0.0",")","{","Qy","=","texture2D","(","Qt",",","Qv",",","0.0",")",".","rg",";","Qv","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","Qv",";","}","}","Qx","=","-","(","255.0","/","127.0",")","*","Qc","(","Qu",",","Qy",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","Qx","+","Qv",".","y",";","}","float","QI","(","sampler2D","QB",",","sampler2D","QC",",","vec2","QD",",","float","QE",")","{","float","QF",";","vec2","QG",";","QG","=","vec2","(","1.0",",","0.0",")",";","for","(","int","QH","=","0",";","QH","<","SMAA_MAX_SEARCH_STEPS",";","QH","++",")","{","if","(","QD",".","y","<","QE","&&","QG",".","r",">","0.8281","&&","QG",".","g","==","0.0",")","{","QG","=","texture2D","(","QB",",","QD",",","0.0",")",".","rg",";","QD","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","QD",";","}","}","QF","=","-","(","255.0","/","127.0",")","*","Qc","(","QC",",","QG",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","QF","+","QD",".","y",";","}","vec2","QP","(","sampler2D","QJ",",","vec2","QK",",","float","QL",",","float","QM",",","float","QN",")","{","vec2","QO",";","QO","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","OZ","(","4.0","*","vec2","(","QL",",","QM",")",")","+","QK",";","QO","=","SMAA_AREATEX_PIXEL_SIZE","*","QO","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","QO",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","QN","+","QO",".","y",";","return","texture2D","(","QJ",",","QO",",","0.0",")",".","rg",";","}","void","QW","(","sampler2D","QQ",",","inout","vec2","QR",",","vec4","QS",",","vec2","QT",")","{","vec2","QU",",","QV",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["QU","=","step","(","QT",".","xy",",","QT",".","yx",")",";","QV","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","QU",";","QV","/=","QU",".","x","+","QU",".","y",";","QU","=","vec2","(","1.0",",","1.0",")",";","QU",".","x","-=","QV",".","x","*","texture2D","(","QQ",",","QS",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","QU",".","x","-=","QV",".","y","*","texture2D","(","QQ",",","QS",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","QU",".","y","-=","QV",".","x","*","texture2D","(","QQ",",","QS",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","QU",".","y","-=","QV",".","y","*","texture2D","(","QQ",",","QS",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","QR","*=","clamp","(","QU",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","Rc","(","sampler2D","QX",",","inout","vec2","QY",",","vec4","QZ",",","vec2","Q_",")","{","vec2","Ra",",","Rb",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_CORNER_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Ra","=","step","(","Q_",".","xy",",","Q_",".","yx",")",";","Rb","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","Ra",";","Rb","/=","Ra",".","x","+","Ra",".","y",";","Ra","=","vec2","(","1.0",",","1.0",")",";","Ra",".","x","-=","Rb",".","x","*","texture2D","(","QX",",","QZ",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","Ra",".","x","-=","Rb",".","y","*","texture2D","(","QX",",","QZ",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","Ra",".","y","-=","Rb",".","x","*","texture2D","(","QX",",","QZ",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","Ra",".","y","-=","Rb",".","y","*","texture2D","(","QX",",","QZ",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","QY","*=","clamp","(","Ra",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","Rq","(","vec2","Rd",",","vec2","Re",",","sampler2D","Rf",",","sampler2D","Rg",",","sampler2D","Rh",",","vec4","Ri",")","{","float","Rj",",","Rk",";","vec3","Rl",";","vec2","Rm",",","Rn",",","Ro",";","vec4","Rp",";","Rp","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","Rm","=","texture2D","(","Rf",",","Rd",")",".","rg",";","if","(","Rm",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["Rp",".","rg","=","PX","(","Rf",",","Rg",",","Rd",",","Rm",",","Ri",")",";","if","(","Rp",".","r","==","-","Rp",".","g",")","{"]}]}}]},{type:"textline",tokens:[";","Rl",".","x","=","Qk","(","Rf",",","Rh",",","OC",".","xy",",","OE",".","x",")",";","Rl",".","y","=","OD",".","y",";","Rn",".","x","=","Rl",".","x",";","Rj","=","texture2D","(","Rf",",","Rl",".","xy",",","0.0",")",".","r",";","Rl",".","z","=","Qs","(","Rf",",","Rh",",","OC",".","zw",",","OE",".","y",")",";","Rn",".","y","=","Rl",".","z",";","Rn","=","abs","(","OZ","(","Rn","/","u_texel_size",".","xx","-","Re",".","xx",")",")",";","Ro","=","sqrt","(","Rn",")",";","Rk","=","texture2D","(","Rf",",","Rl",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","Rp",".","rg","=","QP","(","Rg",",","Ro",",","Rj",",","Rk",",","Ri",".","y",")",";","Rl",".","y","=","Rd",".","y",";","QW","(","Rf",",","Rp",".","rg",",","Rl",".","xyzy",",","Rn",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_DISABLE_DIAG_DETECTION",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["}","else","Rm",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","Rm",".","r",">","0.0",")","{",";","Rl",".","y","=","QA","(","Rf",",","Rh",",","OD",".","xy",",","OE",".","z",")",";","Rl",".","x","=","OC",".","x",";","Rm",".","x","=","Rl",".","y",";","Rk","=","texture2D","(","Rf",",","Rl",".","xy",",","0.0",")",".","g",";","Rl",".","z","=","QI","(","Rf",",","Rh",",","OD",".","zw",",","OE",".","w",")",";","Rm",".","y","=","Rl",".","z",";","Rm","=","abs","(","OZ","(","Rm","/","u_texel_size",".","yy","-","Re",".","yy",")",")",";","Rn","=","sqrt","(","Rm",")",";","Rj","=","texture2D","(","Rf",",","Rl",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","Rp",".","ba","=","QP","(","Rg",",","Rn",",","Rk",",","Rj",",","Ri",".","x",")",";","Rl",".","x","=","Rd",".","x",";","Rc","(","Rf",",","Rp",".","ba",",","Rl",".","xyxz",",","Rm",")",";","}","return","Rp",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","RC","(","vec2","Rr",",","sampler2D","Rs",",","sampler2D","Rt"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","Ru"]}]}}]},{type:"textline",tokens:[")","{","bool","Rv",";","vec2","Rw",",","Rx",",","Ry",";","vec4","Rz",",","RA",",","RB",";","Rz",".","x","=","texture2D","(","Rt",",","OB",".","xy",")",".","a",";","Rz",".","y","=","texture2D","(","Rt",",","OB",".","zw",")",".","g",";","Rz",".","wz","=","texture2D","(","Rt",",","Rr",")",".","xz",";","if","(","dot","(","Rz",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","RA","=","texture2D","(","Rs",",","Rr",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["RB","=","texture2D","(","Ru",",","bM",")",";","Rw","=","2.0","*","ag","(","RB",")","-","1.0",";","RA",".","a","=","sqrt","(","2.0","*","length","(","Rw",")",")",";"]}]}}]},{type:"textline",tokens:["return","RA",";","}","else","{","Rv","=","max","(","Rz",".","x",",","Rz",".","z",")",">","max","(","Rz",".","y",",","Rz",".","w",")",";","RA","=","vec4","(","0.0",",","Rz",".","y",",","0.0",",","Rz",".","w",")",";","Rw","=","Rz",".","yw",";","OU","(","bvec4","(","Rv",",","Rv",",","Rv",",","Rv",")",",","RA",",","vec4","(","Rz",".","x",",","0.0",",","Rz",".","z",",","0.0",")",")",";","OU","(","bvec2","(","Rv",",","Rv",")",",","Rw",",","Rz",".","xz",")",";","Rw","/=","dot","(","Rw",",","vec2","(","1.0",",","1.0",")",")",";","RA","=","RA","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","Rr",".","xyxy",";","Rz","=","Rw",".","x","*","texture2D","(","Rs",",","RA",".","xy",",","0.0",")",";","Rz","+=","Rw",".","y","*","texture2D","(","Rs",",","RA",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["RB","=","texture2D","(","Ru",",","RA",".","xy",")",";","Rx","=","2.0","*","ag","(","RB",")","-","1.0",";","Ry","=","Rw",".","x","*","Rx",";","RB","=","texture2D","(","Ru",",","RA",".","zw",")",";","Rx","=","2.0","*","ag","(","RB",")","-","1.0",";","Ry","+=","Rw",".","y","*","Rx",";","Rz",".","a","=","sqrt","(","2.0","*","length","(","Ry",")",")",";"]}]}}]},{type:"textline",tokens:["return","Rz",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","RM","(","vec2","RD",",","sampler2D","RE",",","sampler2D","RF"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","RG"]}]}}]},{type:"textline",tokens:[")","{","float","RH",";","vec2","RI",";","vec4","RJ",",","RK",",","RL",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["RJ","=","texture2D","(","RG",",","bM",")",";","RI","=","2.0","*","ag","(","RJ",")","-","1.0",";","RJ","=","texture2D","(","RE",",","RD",")",";","RK","=","texture2D","(","RF",",","RD","-","RI",")",";","RH","=","abs","(","RJ",".","a","*","RJ",".","a","-","RK",".","a","*","RK",".","a",")","/","2.0",";","RH","=","0.5","*","clamp","(","1.0","-","sqrt","(","RH",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","RL","=","mix","(","RJ",",","RK",",","RH",")",";","RL",".","a","=","1.0",";","return","RL",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["RJ","=","texture2D","(","RE",",","RD",")",";","RK","=","texture2D","(","RF",",","RD",")",";","return","mix","(","RJ",",","RK",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","RN",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["RN","=","vec4","(","Pm","(","bM",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["RN","=","Rq","(","bM",",","OF",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["RN","=","RC","(","bM",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_RESOLVE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["RN","=","vec4","(","RM","(","bM",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["RN","=","texture2D","(","u_color",",","bM",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","RN",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","OB",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","OC",";","varying","vec4","OD",";","varying","vec4","OE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","OF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","AA_METHOD_SMAA_LOW",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_HIGH",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Nk","(","vec2","Ng",")","{","OC","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","Ng",".","xyxy",";","OD","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","Ng",".","xyxy",";","OE","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","Ng",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Nn","(","vec2","Nl",",","out","vec2","Nm",")","{","Nm","=","Nl","/","u_texel_size",";","OC","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","Nl",".","xyxy",";","OD","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","Nl",".","xyxy",";","OE","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","OC",".","xz",",","OD",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","Np","(","vec2","No",")","{","OB","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","No",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","bM","=","2.0","*","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","SMAA_EDGE_DETECTION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nk","(","bM",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Nn","(","bM",",","OF",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Np","(","bM",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"define",name:"SSAO_QUALITY_8",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_16",tokens:["2"]},{type:"define",name:"SSAO_QUALITY_24",tokens:["3"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","sampler2D","u_ssao_special_tex",";","uniform","vec2","u_camera_range",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","float","Nk","(","in","vec2","Ng",")","{","return","Ow","(","u_depth",",","Ng",",","u_camera_range",")",";","}","void","main","(",")","{","float","Nl",",","Nm",",","Nn",",","No",",","Np",",","Nq",";","vec3","Nr",",","Ns",",","Nt",",","Nu",";","Nr","=","texture2D","(","u_color",",","bM",")",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","Nr",",","1.0",")",";","return",";"]}]}}]},{type:"textline",tokens:["Ns","=","normalize","(","2.0","*","texture2D","(","u_ssao_special_tex",",","bM","*","0.25","/","u_texel_size",")",".","rgb","-","1.0",")",";","Nl","=","Nk","(","bM",")",";","Nm","=","Nl","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","SSAO_QUALITY_8",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Nv","=","8.0",";","const","int","Nw","=","1",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_16",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Nv","=","16.0",";","const","int","Nw","=","2",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_24",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Nv","=","24.0",";","const","int","Nw","=","3",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","SSAO_QUALITY_32",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","Nv","=","32.0",";","const","int","Nw","=","4",";"]}]}}]},{type:"textline",tokens:["Nn","=","u_ssao_radius_increase","*","0.001",";","const","float","Nx","=","1.0","+","2.4","/","Nv",";","No","=","0.0",";","for","(","int","Ny","=","0",";","Ny","<","Nw",";","Ny","++",")","for","(","int","Nz","=","-","1",";","Nz","<=","1",";","Nz","+=","2",")","for","(","int","OG","=","-","1",";","OG","<=","1",";","OG","+=","2",")","for","(","int","OH","=","-","1",";","OH","<=","1",";","OH","+=","2",")","{","Nt","=","reflect","(","normalize","(","vec3","(","Nz",",","OG",",","OH",")",")",",","Ns",")","*","(","Nn","*=","Nx",")",";","Nu","=","vec3","(","bM",",","Nm",")",";","Nu","+=","vec3","(","Nt",".","xy",",","Nt",".","z","*","Nm","*","2.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["Nu",".","z","-=","1.4","*","(","Nu",".","z","-","Nm",")","*","step","(","Nm",",","Nu",".","z",")",";"]}]}}]},{type:"textline",tokens:["Np","=","Nk","(","Nu",".","xy",")","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";","Nq","=","clamp","(","(","Nm","-","Np",")","/","Np",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["No","+=","mix","(","1.0",",","Nq",",","step","(","Np",",","Nu",".","z",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["No","+=","mix","(","step","(","Nu",".","z",",","Np",")",",","0.5",",","Nq",")",";"]}]}}]},{type:"textline",tokens:["}","No","=","No","/","Nv",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["No","=","clamp","(","No","*","No","+","0.6","*","No",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["No","=","clamp","(","No","*","No","+","No",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["Nl","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","Nl",")",";","No","=","mix","(","1.0",",","No",",","Nl",")",";","gl_FragColor","=","vec4","(","Nr",",","No",")",";","}"]}]},exports["postprocessing/ssao_blur.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","sampler2D",";"]},{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"include",file:"depth_fetch.glslf"}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_ssao_mask",";","uniform","vec2","u_texel_size",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","uniform","float","u_ssao_blur_discard_value",";","float","Nk","(","in","vec2","Ng",")","{","return","Ow","(","u_depth",",","Ng",",","u_camera_range",")",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","Nl",",","Nm",";","float","Nn",",","No",",","Np",",","Nq",",","Nr",",","Ns",",","Nt",";","Nn","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["No","=","Nk","(","bM",")",";","Np","=","0.0",";","Nq","=","u_ssao_blur_discard_value","*","100.0",";"]}]}}]},{type:"textline",tokens:["Nl","=","vec2","(","-","2.0",")",";","for","(","int","Nu","=","0",";","Nu","<","4",";","++","Nu",")","{","for","(","int","Nv","=","0",";","Nv","<","4",";","++","Nv",")","{","Nm","=","(","Nl","+","vec2","(","float","(","Nu",")",",","float","(","Nv",")",")",")","*","u_texel_size",";","Nr","=","texture2D","(","u_ssao_mask",",","bM","+","Nm",")",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["Ns","=","Nk","(","bM","+","Nm",")",";","Nt","=","1.0","-","clamp","(","abs","(","Ns","-","No",")","*","Nq",",","0.0",",","1.0",")",";","Nn","+=","Nr","*","Nt",";","Np","+=","Nt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Nn","+=","Nr",";"]}]}}]},{type:"textline",tokens:["}","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","bM",")",".","rgb",",","Nn","/","Np",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","bM",")",".","rgb",",","Nn","/","16.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/stereo.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"color_util.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","bM",";"]},{type:"condition",parts:[{type:"if",expression:["ANAGLYPH",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_enable_hmd_stereo",";","uniform","vec4","u_distortion_params",";","uniform","vec4","u_chromatic_aberration_coefs",";","void","Nt","(","vec2","Ng",",","vec2","Nk",",","float","Nl",",","sampler2D","Nm",")","{","vec4","Nn",";","float","No",";","vec2","Np",",","Nq",",","Nr",",","Ns",";","Np","=","(","Ng","-","Nk",")","*","2.0",";","Np","/=","Nl",";","No","=","Np",".","x","*","Np",".","x","+","Np",".","y","*","Np",".","y",";","Np","=","Np","*","(","1.0","+","u_distortion_params","[","0","]","*","No","+","u_distortion_params","[","1","]","*","No","*","No",")",";","Np","=","Np","*","0.5","/","(","1.0","+","u_distortion_params","[","0","]","+","u_distortion_params","[","1","]",")",";","if","(","length","(","u_chromatic_aberration_coefs",")",">","0.0",")","{","Nq","=","Np","*","(","1.0","+","u_chromatic_aberration_coefs","[","0","]","+","No","*","u_chromatic_aberration_coefs","[","1","]",")","+","Nk",";","Nr","=","Np","+","Nk",";","Ns","=","Np","*","(","1.0","+","u_chromatic_aberration_coefs","[","2","]","+","No","*","u_chromatic_aberration_coefs","[","3","]",")","+","Nk",";","if","(","clamp","(","Ns",",","0.0",",","1.0",")","!=","Ns",")","{","gl_FragColor","=","vec4","(","0.0",")",";","}","else","{","Nn","=","texture2D","(","Nm",",","Nr",")",";","gl_FragColor","[","0","]","=","texture2D","(","Nm",",","Nq",")",".","x",";","gl_FragColor","[","1","]","=","Nn",".","y",";","gl_FragColor","[","2","]","=","texture2D","(","Nm",",","Ns",")",".","z",";","gl_FragColor","[","3","]","=","Nn",".","w",";","}","}","else","{","Np","=","Np","*","Nl","+","Nk",";","if","(","clamp","(","Np",",","0.0",",","1.0",")","!=","Np",")","{","gl_FragColor","=","vec4","(","0.0",")",";","}","else","{","gl_FragColor","=","texture2D","(","Nm",",","Np",")",";","}","}","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","Nu",";","vec2","Nv",",","Nw",";","mat3","Nx",",","Ny",";","vec3","Nz",",","OG",";","vec4","OH",",","OI",";"]},{type:"condition",parts:[{type:"if",expression:["ANAGLYPH"],group:{type:"group",parts:[{type:"textline",tokens:["OH","=","texture2D","(","u_sampler_left",",","bM",")",";","OI","=","texture2D","(","u_sampler_right",",","bM",")",";","Nz","=","vec3","(","OH","[","0","]",",","OH","[","1","]",",","OH","[","2","]",")",";","br","(","Nz",")",";","OG","=","vec3","(","OI","[","0","]",",","OI","[","1","]",",","OI","[","2","]",")",";","br","(","OG",")",";","Nx","=","mat3","(","0.437",",","-","0.062",",","-","0.048",",","0.449",",","-","0.062",",","-","0.050",",","0.164",",","-","0.024",",","-","0.017",")",";","Ny","=","mat3","(","-","0.011",",","0.377",",","-","0.026",",","-","0.032",",","0.761",",","-","0.093",",","-","0.007",",","0.009",",","1.234",")",";","OG","=","clamp","(","Nx","*","Nz",",","0.0",",","1.0",")","+","clamp","(","Ny","*","OG",",","0.0",",","1.0",")",";","bu","(","OG",")",";","gl_FragColor","=","vec4","(","OG",",","OH","[","3","]","+","OI","[","3","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_enable_hmd_stereo","!=","0",")","{","if","(","bM","[","0","]","<","0.5",")","{","Nv","=","vec2","(","2.0","*","bM","[","0","]",",","bM","[","1","]",")",";","Nw","=","vec2","(","0.5","-","(","u_distortion_params","[","3","]","-","0.5",")","/","2.0",",","u_distortion_params","[","2","]",")",";","Nu","=","2.0","*","u_distortion_params","[","3","]",";","Nt","(","Nv",",","Nw",",","Nu",",","u_sampler_left",")",";","}","else","{","Nw","=","vec2","(","2.0","*","(","bM","[","0","]","-","0.5",")",",","bM","[","1","]",")",";","Nv","=","vec2","(","0.5","+","(","u_distortion_params","[","3","]","-","0.5",")","/","2.0",",","u_distortion_params","[","2","]",")",";","Nu","=","2.0","*","u_distortion_params","[","3","]",";","Nt","(","Nw",",","Nv",",","Nu",",","u_sampler_right",")",";","}","}","else","{","gl_FragColor","=","texture2D","(","u_sampler_left",",","bM",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","bM",";","void","main","(",")","{","vec2","Ng",";","vec4","Nk",",","Nl",";","float","Nm",";","Nm","=","texture2D","(","u_depth",",","bM",")",".","x",";","Nk","=","vec4","(","bM","*","2.0","-","1.0",",","2.0","*","Nm","-","1.0",",","1.0",")",";","Nl","=","u_view_proj_inverse","*","Nk",";","Nl","=","Nl","/","Nl",".","w",";","Nl","=","u_view_proj_prev","*","Nl",";","Nl","/=","Nl",".","w",";","Ng","=","(","Nk",".","xy","-","Nl",".","xy",")","/","4.0","+","0.5",";","Ng","=","clamp","(","Ng",",","0.0",",","1.0",")",";","gl_FragColor","=","V","(","Ng",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","a","=","0.0",";","float","b","=","1.0",";","struct","c","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","f","(","vec3","d",",","vec3","e",")","{","return","any","(","lessThan","(","abs","(","d","-","e",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","i","(","in","vec4","g",",","in","vec3","h",")","{","return","h","+","2.0","*","cross","(","g",".","xyz",",","cross","(","g",".","xyz",",","h",")","+","g",".","w","*","h",")",";","}","vec4","k","(","in","vec4","j",")","{","return","vec4","(","-","j",".","xyz",",","j",".","w",")","/","dot","(","j",",","j",")",";","}","vec3","p","(","vec4","l",",","vec4","m",",","vec4","n",")","{","vec3","o",";","o","=","n",".","xyz","*","l",".","w",";","o","=","i","(","m",",","o",")",";","o","+=","l",".","xyz","*","n",".","w",";","return","o",";","}","vec3","v","(","vec4","q",",","vec4","r",",","vec4","s",")","{","vec4","t",";","vec3","u",";","u","=","s",".","xyz","-","q",".","xyz","*","s",".","w",";","t","=","k","(","r",")",";","u","=","i","(","t",",","u",")",";","u","/=","q",".","w",";","return","u",";","}","mat4","w","(",")","{","return","mat4","(","b",",","a",",","a",",","a",",","a",",","b",",","a",",","a",",","a",",","a",",","b",",","a",",","a",",","a",",","a",",","b",")",";","}","mat4","y","(","float","x",")","{","return","mat4","(","b",",","a",",","a",",","a",",","a",",","cos","(","x",")",",","sin","(","x",")",",","a",",","a",",","-","sin","(","x",")",",","cos","(","x",")",",","a",",","a",",","a",",","a",",","b",")",";","}","mat4","A","(","float","z",")","{","return","mat4","(","cos","(","z",")",",","a",",","-","sin","(","z",")",",","a",",","a",",","b",",","a",",","a",",","sin","(","z",")",",","a",",","cos","(","z",")",",","a",",","a",",","a",",","a",",","b",")",";","}","mat4","C","(","float","B",")","{","return","mat4","(","cos","(","B",")",",","sin","(","B",")",",","a",",","a",",","-","sin","(","B",")",",","cos","(","B",")",",","a",",","a",",","a",",","a",",","b",",","a",",","a",",","a",",","a",",","b",")",";","}","c","E","(","in","c","D",")","{","return","c","(","D",".","a",",","D",".","b",",","normalize","(","D",".","c",")",",","normalize","(","D",".","d",")",",","normalize","(","D",".","e",")",",","D",".","f",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2},"REFRACTIVE","USE_NODE_B4W_REFRACTION",{type:"logical_or_expr",places:4}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","L","(","vec4","F",")","{","vec3","G",";","float","H",",","I",",","J",";","H","=","F",".","x",";","I","=","F",".","y",";","J","=","F",".","w",";","G",".","x","=","(","H","+","J",")","/","2.0",";","G",".","y","=","(","I","+","J",")","/","2.0",";","G",".","z","=","J",";","return","G",";","}"]}]}}]},{type:"textline",tokens:["mat4","O","(","mat3","M",")","{","mat4","N",";","N","[","0","]","[","0","]","=","(","b","-","(","M","[","1","]","[","2","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")","+","M","[","2","]","[","0","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")",")","*","M","[","1","]","[","0","]",";","N","[","0","]","[","1","]","=","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")","+","M","[","2","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")","*","M","[","1","]","[","0","]",";","N","[","0","]","[","2","]","=","(","M","[","1","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","-","M","[","2","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")",")","*","M","[","1","]","[","0","]",";","N","[","0","]","[","3","]","=","a",";","N","[","1","]","[","0","]","=","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")","-","M","[","2","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")","*","M","[","1","]","[","0","]",";","N","[","1","]","[","1","]","=","(","b","-","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")","+","M","[","2","]","[","0","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")",")",")","*","M","[","1","]","[","0","]",";","N","[","1","]","[","2","]","=","(","M","[","1","]","[","2","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","+","M","[","2","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")",")","*","M","[","1","]","[","0","]",";","N","[","1","]","[","3","]","=","a",";","N","[","2","]","[","0","]","=","(","M","[","1","]","[","1","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","+","M","[","2","]","[","1","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")",")","*","M","[","1","]","[","0","]",";","N","[","2","]","[","1","]","=","(","M","[","1","]","[","2","]","*","(","M","[","2","]","[","0","]","+","M","[","2","]","[","0","]",")","-","M","[","2","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")",")","*","M","[","1","]","[","0","]",";","N","[","2","]","[","2","]","=","(","b","-","(","M","[","1","]","[","1","]","*","(","M","[","1","]","[","1","]","+","M","[","1","]","[","1","]",")","+","M","[","1","]","[","2","]","*","(","M","[","1","]","[","2","]","+","M","[","1","]","[","2","]",")",")",")","*","M","[","1","]","[","0","]",";","N","[","2","]","[","3","]","=","a",";","N","[","3","]","[","0","]","=","M","[","0","]","[","0","]",";","N","[","3","]","[","1","]","=","M","[","0","]","[","1","]",";","N","[","3","]","[","2","]","=","M","[","0","]","[","2","]",";","N","[","3","]","[","3","]","=","1.0",";","return","N",";","}"]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV_ORCO",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["3"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["3"]},{type:"define",name:"NO_SHADOWS",tokens:["1"]},{type:"define",name:"SHADOW_CASTING",tokens:["2"]},{type:"define",name:"SHADOW_MASK_GENERATION",tokens:["3"]},{type:"define",name:"SHADOW_MAPPING_OPAQUE",tokens:["4"]},{type:"define",name:"SHADOW_MAPPING_BLEND",tokens:["5"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"SPECULAR_BLINN",tokens:["4"]},{type:"define",name:"SPECULAR_TOON",tokens:["5"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]},{type:"define",name:"DIFFUSE_MINNAERT",tokens:["4"]},{type:"define",name:"DIFFUSE_TOON",tokens:["5"]},{type:"define",name:"MAPPING_TYPE_TEXTURE",tokens:["0.0"]},{type:"define",name:"MAPPING_TYPE_POINT",tokens:["1.0"]},{type:"define",name:"MAPPING_TYPE_VECTOR",tokens:["2.0"]},{type:"define",name:"MAPPING_TYPE_NORMAL",tokens:["3.0"]},{type:"define",name:"MIX",tokens:["0"]},{type:"define",name:"ADD",tokens:["1"]},{type:"define",name:"SUBTRACT",tokens:["2"]},{type:"define",name:"MULTIPLY",tokens:["3"]},{type:"define",name:"SCREEN",tokens:["4"]},{type:"define",name:"OVERLAY",tokens:["5"]},{type:"define",name:"DIFFERENCE",tokens:["6"]},{type:"define",name:"DIVIDE",tokens:["7"]},{type:"define",name:"DARKEN",tokens:["8"]},{type:"define",name:"LIGHTEN",tokens:["9"]},{type:"define",name:"HUE",tokens:["10"]},{type:"define",name:"SATURATION",tokens:["11"]},{type:"define",name:"VALUE",tokens:["12"]},{type:"define",name:"COLOR",tokens:["13"]},{type:"define",name:"SOFT_LIGHT",tokens:["14"]},{type:"define",name:"LINEAR_LIGHT",tokens:["15"]},{type:"define",name:"REFL_NONE",tokens:["0"]},{type:"define",name:"REFL_MIRRORMAP",tokens:["1"]},{type:"define",name:"REFL_PLANE",tokens:["2"]},{type:"define",name:"REFL_CUBE",tokens:["3"]},{type:"define",name:"INVERSE_QUADRATIC",tokens:["0"]},{type:"define",name:"LINEAR",tokens:["1"]},{type:"define",name:"QUADRATIC",tokens:["2"]},{type:"define",name:"HEMI",tokens:["1"]},{type:"define",name:"SPOT",tokens:["2"]},{type:"define",name:"POINT",tokens:["3"]},{type:"define",name:"SUN",tokens:["4"]},{type:"define",name:"VT_WORLD_TO_WORLD",tokens:["0"]},{type:"define",name:"VT_WORLD_TO_OBJECT",tokens:["1"]},{type:"define",name:"VT_WORLD_TO_CAMERA",tokens:["2"]},{type:"define",name:"VT_OBJECT_TO_WORLD",tokens:["3"]},{type:"define",name:"VT_OBJECT_TO_OBJECT",tokens:["4"]},{type:"define",name:"VT_OBJECT_TO_CAMERA",tokens:["5"]},{type:"define",name:"VT_CAMERA_TO_WORLD",tokens:["6"]},{type:"define",name:"VT_CAMERA_TO_OBJECT",tokens:["7"]},{type:"define",name:"VT_CAMERA_TO_CAMERA",tokens:["8"]},{type:"define",name:"VT_POINT",tokens:["0"]},{type:"define",name:"VT_VECTOR",tokens:["1"]},{type:"define",name:"VT_NORMAL",tokens:["2"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","P","=","255.0",";","float","Q","=","0.0",";","float","R","=","1.0",";","vec4","V","(","const","in","float","S",")","{","vec4","T",",","U",";","T","=","vec4","(","P","*","P","*","P",",","P","*","P",",","P",",","R",")",";","U","=","vec4","(","Q",",","R","/","P",",","R","/","P",",","R","/","P",")",";","T","=","fract","(","S","*","T",")",";","T","-=","T",".","xxyz","*","U",";","return","T",";","}","float","Z","(","const","in","vec4","W",")","{","vec4","X",";","float","Y",";","X","=","vec4","(","R","/","(","P","*","P","*","P",")",",","R","/","(","P","*","P",")",",","R","/","P",",","R",")",";","Y","=","dot","(","W",",","X",")",";","return","Y",";","}","vec4","V","(","const","in","vec2","_",")","{","vec4","aa",";","vec2","ab",",","ac",";","ab","=","vec2","(","P",",","R",")",";","ac","=","vec2","(","Q",",","R","/","P",")",";","aa","=","fract","(","_",".","xxyy","*","ab",".","xyxy",")",";","aa","-=","aa",".","xxzz","*","ac",".","xyxy",";","if","(","_",".","r","==","R",")","aa",".","rg","=","vec2","(","Q",",","R",")",";","if","(","_",".","g","==","R",")","aa",".","ba","=","vec2","(","Q",",","R",")",";","return","aa",";","}","vec2","ag","(","const","in","vec4","ad",")","{","vec2","ae",",","af",";","af","=","vec2","(","R","/","P",",","R",")",";","ae",".","r","=","dot","(","ad",".","rg",",","af",")",";","ae",".","g","=","dot","(","ad",".","ba",",","af",")",";","return","ae",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","ah","=","0.0",";","float","ai","=","1.0",";","vec4","ak","(","vec4","aj",")","{","return","aj","-","floor","(","aj","*","(","ai","/","289.0",")",")","*","289.0",";","}","vec3","ak","(","vec3","al",")","{","return","al","-","floor","(","al","*","(","ai","/","289.0",")",")","*","289.0",";","}","vec2","ak","(","vec2","am",")","{","return","am","-","floor","(","am","*","(","ai","/","289.0",")",")","*","289.0",";","}","vec4","ao","(","vec4","an",")","{","return","an","-","floor","(","an","*","(","ai","/","7.0",")",")","*","7.0",";","}","vec4","aq","(","vec4","ap",")","{","return","ak","(","(","34.0","*","ap","+","5.0",")","*","ap",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","ay","(","vec2","ar",")","{","vec4","as",",","at",",","au",",","av",";","vec2","aw",",","ax",";","aw","=","ak","(","floor","(","ar",")",")",";","ax","=","fract","(","ar",")",";","as","=","ax",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","at","=","ax",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","au","=","aq","(","aw",".","x","+","vec4","(","ah",",","ai",",","ah",",","ai",")",")",";","au","=","aq","(","au","+","aw",".","y","+","vec4","(","ah",",","ah",",","ai",",","ai",")",")",";","av","=","ao","(","au",")","*","K","+","K2",";","au","=","ao","(","floor","(","au","*","K",")",")","*","K","+","K2",";","av","=","as","+","JITTER","*","av",";","au","=","at","+","JITTER","*","au",";","au","=","av","*","av","+","au","*","au",";"]},{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"textline",tokens:["au",".","xy","=","min","(","au",".","xy",",","au",".","zw",")",";","au",".","x","=","min","(","au",".","x",",","au",".","y",")",";","return","au",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["au",".","xy","=","(","au",".","x","<","au",".","y",")","?","au",".","xy",":","au",".","yx",";","au",".","xz","=","(","au",".","x","<","au",".","z",")","?","au",".","xz",":","au",".","zx",";","au",".","xw","=","(","au",".","x","<","au",".","w",")","?","au",".","xw",":","au",".","wx",";","au",".","y","=","min","(","au",".","y",",","au",".","z",")",";","au",".","y","=","min","(","au",".","y",",","au",".","w",")",";","return","sqrt","(","au",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","aH","(","vec2","az",",","float","aA",")","{","vec4","aB",",","aC",",","aD",",","aE",";","vec2","aF",",","aG",";","aF","=","ak","(","floor","(","az",")",")",";","aG","=","fract","(","az",")",";","aB","=","aG",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","aC","=","aG",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","aD","=","aq","(","aF",".","x","+","vec4","(","ah",",","ai",",","ah",",","ai",")",")",";","aD","=","aq","(","aD","+","aF",".","y","+","vec4","(","ah",",","ah",",","ai",",","ai",")",")",";","aE","=","ao","(","aD",")","*","K","+","K2",";","aD","=","ao","(","floor","(","aD","*","K",")",")","*","K","+","K2",";","aE","=","aB","+","JITTER","*","aE",";","aD","=","aC","+","JITTER","*","aD",";","aC","=","aE","*","aE","+","aD","*","aD",";","aE","+=","aA",";","aD","+=","aA",";","aB","=","aE","*","aE","+","aD","*","aD",";","aE","+=","aA",";","aD","+=","aA",";","aD","=","aE","*","aE","+","aD","*","aD",";","aC",".","xy","=","min","(","aC",".","xy",",","aC",".","zw",")",";","aC",".","x","=","min","(","aC",".","x",",","aC",".","y",")",";","aB",".","xy","=","min","(","aB",".","xy",",","aB",".","zw",")",";","aB",".","x","=","min","(","aB",".","x",",","aB",".","y",")",";","aD",".","xy","=","min","(","aD",".","xy",",","aD",".","zw",")",";","aD",".","x","=","min","(","aD",".","x",",","aD",".","y",")",";","return","vec3","(","aC",".","x",",","aB",".","x",",","aD",".","x",")",";","}","vec3","aJ","(","vec3","aI",")","{","return","ak","(","(","(","aI","*","34.0",")","+","ai",")","*","aI",")",";","}","float","aU","(","vec2","aK",")","{","vec3","aL",",","aM",",","aN",",","aO",";","vec4","aP",";","vec2","aQ",",","aR",",","aS",";","const","vec4","aT","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","aQ","=","floor","(","aK","+","dot","(","aK",",","aT",".","yy",")",")",";","aR","=","aK","-","aQ","+","dot","(","aQ",",","aT",".","xx",")",";","aS","=","(","aR",".","x",">","aR",".","y",")","?","vec2","(","ai",",","ah",")",":","vec2","(","ah",",","ai",")",";","aP","=","aR",".","xyxy","+","aT",".","xxzz",";","aP",".","xy","-=","aS",";","aQ","=","ak","(","aQ",")",";","aL","=","aJ","(","aJ","(","aQ",".","y","+","vec3","(","ah",",","aS",".","y",",","ai",")",")","+","aQ",".","x","+","vec3","(","ah",",","aS",".","x",",","ai",")",")",";","aM","=","max","(","0.5","-","vec3","(","dot","(","aR",",","aR",")",",","dot","(","aP",".","xy",",","aP",".","xy",")",",","dot","(","aP",".","zw",",","aP",".","zw",")",")",",","ah",")",";","aM","=","aM","*","aM",";","aM","=","aM","*","aM",";","aL","=","2.0","*","fract","(","aL","*","aT",".","www",")","-","ai",";","aN","=","abs","(","aL",")","-","0.5",";","aO","=","floor","(","aL","+","0.5",")",";","aO","=","aL","-","aO",";","aM","*=","1.79284291400159","-","0.85373472095314","*","(","aO","*","aO","+","aN","*","aN",")",";","aL",".","x","=","aO",".","x","*","aR",".","x","+","aN",".","x","*","aR",".","y",";","aL",".","yz","=","aO",".","yz","*","aP",".","xz","+","aN",".","yz","*","aP",".","yw",";","return","130.0","*","dot","(","aM",",","aL",")",";","}","vec2","aY","(","vec2","aV",")","{","float","aW",",","aX",";","aW","=","dot","(","aV",",","vec2","(","12.9898",",","78.233",")",")",";","aX","=","dot","(","aV",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","aW","=","fract","(","sin","(","aW",")","*","43758.5453",")","*","2.0","-","ai",";","aX","=","fract","(","sin","(","aX",")","*","43758.5453",")","*","2.0","-","ai",";","return","vec2","(","aW",",","aX",")",";","}"]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"var",name:"SUN_NUM",tokens:["0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","bp","(","inout","vec3","aZ",",","float","a_",",","float","ba",",","vec4","bb",",","vec3","bc",",","vec3","bd",",","vec3","be",",","vec4","bf",",","vec3","bg",",","float","bh",")","{","float","bi",",","bj",",","bk",";","vec2","bl",",","bm",";","vec3","bn",";","vec4","bo",";","if","(","bh",">","CAUSTICS_VIEW_DISTANCE",")","return",";","bo","=","bf",";","bn","=","bg","+","bc",";","bn",".","xz","=","10.0","*","sin","(","0.1","*","bn",".","xz",")",";","bn","=","bn","+","2.0","*","cross","(","-","bo",".","xyz",",","cross","(","-","bo",".","xyz",",","bn",")","+","bo",".","w","*","bn",")",";","bl","=","bn",".","xz",";","bn","=","bd",";","bi","=","max","(","dot","(","bc",",","bn",")",",","0.0",")",";","bj","=","0.025",";","bm","=","CAUST_SPEED","*","ba",";","bl",".","s","+=","0.25","*","sin","(","dot","(","bg","+","ba",",","vec3","(","1.0",")",")",")",";","bl",".","t","+=","0.35","*","(","-","sin","(","dot","(","bg","-","ba",",","vec3","(","-","0.7",")",")",")",")",";","bl",".","st","+=","0.15","*","cos","(","4.0","*","a_","-","bm",".","x",")","+","1.5","*","sin","(","a_","-","0.3","*","bm",".","y",")",";","bk","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","a_",",","0.0",")",")",";","bn","=","aH","(","(","bl","/","bk",")",",","bj",")",";","bn","*=","CAUST_BRIGHT",";","bn","*=","bn",";","bj","=","min","(","0.25","*","a_",",","-","a_",")","+","1.0",";","bj","=","max","(","bj",",","0.0",")",";","bi","=","bb","[","SUN_NUM","]","*","bi",";","bk","=","max","(","sign","(","a_",")",",","0.0",")",";","bi","=","bi","+","max","(","0.5","*","sign","(","-","bc",".","y",")","*","bk",",","0.0",")",";","bi","=","min","(","bi",",","1.0",")",";","aZ","+=","be","*","bn","*","bj","*","bi",";","}"]}]},exports["include/color_util.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","br","(","inout","vec3","bq",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["bq","=","max","(","vec3","(","0.0",")",",","bq",")",";","bq","=","pow","(","bq",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","br","(","inout","float","bs",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["bs","=","pow","(","max","(","0.0",",","bs",")",",","2.2",")",";"]}]}}]},{type:"textline",tokens:["}","void","bu","(","inout","vec3","bt",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["bt","=","max","(","vec3","(","0.0",")",",","bt",")",";","bt","=","pow","(","bt",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","bx","(","inout","vec3","bv",",","in","float","bw",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["bv","=","bv","*","bw",";"]}]}}]},{type:"textline",tokens:["}","float","bB","(","vec4","by",")","{","float","bz",";","vec3","bA",";","bA","=","vec3","(","0.299",",","0.587",",","0.114",")",";","bz","=","dot","(","by",".","rgb",",","bA",")",";","return","bz",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"CSM_BLEND_BETWEEN_CASCADES",tokens:["1.0"]},{type:"var",name:"CSM_FADE_LAST_CASCADE",tokens:["1.0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","float","bN","=","0.1",";","const","float","bO","=","0.1",";","const","float","bP","=","-","0.01",";","const","float","bQ","=","0.05",";","vec4","bR","=","vec4","(","0.14383161",",","0.34495938",",","-","0.38277543",",","-","0.26496911",")",";","vec4","bS","=","vec4","(","0.53742981",",","0.19984126",",","0.79197514",",","-","0.094184101",")",";","vec4","bT","=","vec4","(","-","0.94201624",",","-","0.91588581",",","-","0.2418884",",","0.44323325",")",";","vec4","bU","=","vec4","(","-","0.81544232",",","0.94558609",",","-","0.81409955",",","0.97484398",")",";","vec4","bV","=","vec4","(","-","0.1410079",",","0.2938776",",","0.27676845",",","-","0.41893023",")",";","vec4","bW","=","vec4","(","-","0.4737342",",","0.78641367",",","0.19090188",",","-","0.9293887",")",";","vec4","bX","=","vec4","(","-","0.39906216",",","0.45771432",",","0.99706507",",","-","0.97511554",")",";","vec4","bY","=","vec4","(","-","0.87912464",",","-","0.76890725",",","0.9143759",",","0.7564837",")",";","bool","ca","(","vec2","bZ",",","float","b_",")","{","return","all","(","lessThanEqual","(","bZ",",","vec2","(","1.0","+","b_",")",")",")","&&","all","(","greaterThanEqual","(","bZ",",","vec2","(","0.0","-","b_",")",")",")",";","}","float","cj","(","float","cb",",","float","cc",",","mat2","cd",",","vec3","ce",",","float","cf",",","PRECISION","sampler2D","cg",")","{","vec2","ch",",","ci",";","ci",".","x","=","cb",";","ci",".","y","=","cc",";","ci","=","cd","*","ci",";","ch","=","ce",".","xy","+","ci","*","cf","/","SHADOW_TEX_RES",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","ca","(","ch",",","bP",")",")","return","1.0",";","else"]}]}}]},{type:"textline",tokens:["return","step","(","ce",".","z",",","texture2D","(","cg",",","ch",")",".","r",")",";","}","float","cs","(","vec3","ck",",","PRECISION","sampler2D","cl",",","float","cm",")","{","mat2","cn",";","float","co",",","cp",",","cq",";","co","=","0.0",";","ck",".","z","=","clamp","(","ck",".","z",",","0.0",",","1.0",")",";","cp","=","aY","(","ck",".","xy",")",".","x","*","M_PI",";","cq","=","cos","(","cp",")",";","cp","=","sin","(","cp",")",";","cn","=","mat2","(","cq",",","cp",",","-","cp",",","cq",")",";","for","(","int","cr","=","0",";","cr","<","4",";","cr","++",")","{","co","+=","cj","(","bR","[","cr","]",",","bV","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","co","+=","cj","(","bS","[","cr","]",",","bW","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","co","+=","cj","(","bT","[","cr","]",",","bX","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","co","+=","cj","(","bU","[","cr","]",",","bY","[","cr","]",",","cn",",","ck",",","cm",",","cl",")",";","}","return","clamp","(","co","/","16.0",",","0.0",",","1.0",")",";","}","float","cH","(","vec3","ct",",","PRECISION","sampler2D","cu",",","vec3","cv",",","PRECISION","sampler2D","cw",",","float","cx",",","float","cy",",","float","cz",")","{","mat2","cA",";","float","cB",",","cC",",","cD",",","cE",";","ct",".","z","=","clamp","(","ct",".","z",",","0.0",",","1.0",")",";","cv",".","z","=","clamp","(","cv",".","z",",","0.0",",","1.0",")",";","cB","=","0.0",";","cC","=","0.0",";","cD","=","aY","(","ct",".","xy",")",".","x","*","M_PI",";","cE","=","cos","(","cD",")",";","cD","=","sin","(","cD",")",";","cA","=","mat2","(","cE",",","cD",",","-","cD",",","cE",")",";","for","(","int","cF","=","0",";","cF","<","4",";","cF","++",")","{","cB","+=","cj","(","bR","[","cF","]",",","bV","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","cB","+=","cj","(","bS","[","cF","]",",","bW","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","cB","+=","cj","(","bT","[","cF","]",",","bX","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","cB","+=","cj","(","bU","[","cF","]",",","bY","[","cF","]",",","cA",",","ct",",","cx",",","cu",")",";","}","for","(","int","cG","=","0",";","cG","<","4",";","cG","++",")","{","cC","+=","cj","(","bR","[","cG","]",",","bV","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","cC","+=","cj","(","bS","[","cG","]",",","bW","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","cC","+=","cj","(","bT","[","cG","]",",","bX","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","cC","+=","cj","(","bU","[","cG","]",",","bY","[","cG","]",",","cA",",","cv",",","cy",",","cw",")",";","}","cB","=","mix","(","cB",",","cC",",","cz",")",";","cB","/=","16.0",";","return","clamp","(","cB",",","0.0",",","1.0",")",";","}","float","cL","(","vec2","cI",")","{","float","cJ",",","cK",";","cJ","=","min","(","cI",".","x",",","cI",".","y",")",";","cK","=","min","(","1.0","-","cI",".","x",",","1.0","-","cI",".","y",")",";","return","min","(","cJ",",","cK",")",";","}","float","cO","(","float","cM",",","float","cN",")","{","if","(","cN",">=","0.0","&&","cN","<=","bO",")","cM","=","(","cM","-","1.0",")","/","bO","*","cN","+","1.0",";","return","cM",";","}","float","cZ","(","vec3","cP",",","vec3","cQ",",","PRECISION","sampler2D","cR",",","PRECISION","sampler2D","cS",",","float","cT",",","float","cU",",","float","cV",",","float","cW",")","{","float","cX",",","cY",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_BLEND_BETWEEN_CASCADES"],group:{type:"group",parts:[{type:"textline",tokens:["cY","=","cL","(","cP",".","xy",")",";","if","(","-","cW",">","cV","&&","cY",">=","0.0","&&","cY","<=","bN","&&","ca","(","cQ",".","xy",",","0.0",")",")","{","cY","=","1.0","-","cY","/","bN",";","cX","=","cH","(","cP",",","cR",",","cQ",",","cS",",","cT",",","cU",",","cY",")",";","}","else"]}]}}]},{type:"textline",tokens:["cX","=","cs","(","cP",",","cR",",","cT",")",";","return","cX",";","}","float","dg","(","vec3","c_",",","PRECISION","sampler2D","da",",","float","db",",","float","dc",",","float","dd",")","{","float","de",",","df",";","de","=","cs","(","c_",",","da",",","db",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_FADE_LAST_CASCADE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","-","dd",">","dc",")","{","df","=","cL","(","c_",".","xy",")",";","de","=","cO","(","de",",","df",")",";","}"]}]}}]},{type:"textline",tokens:["return","de",";","}","vec4","dr","(","float","dh",")","{","vec3","di",",","dj",",","dk",",","dl",";","float","dm",",","dn",",","dp",",","dq",";","dm","=","1.0",";","di","=","bI",".","xyz","/","bI",".","w",";","if","(","bI",".","w","<","0.0",")","di",".","z","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1","NUM_CAST_LAMPS",1,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dj","=","bJ",".","xyz","/","bJ",".","w",";","if","(","bJ",".","w","<","0.0",")","dj",".","z","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2","NUM_CAST_LAMPS",2,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dk","=","bK",".","xyz","/","bK",".","w",";","if","(","bK",".","w","<","0.0",")","dk",".","z","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3","NUM_CAST_LAMPS",3,{type:"g_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dl","=","bL",".","xyz","/","bL",".","w",";","if","(","bL",".","w","<","0.0",")","dl",".","z","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ca","(","di",".","xy",",","0.0",")",")","{","dm","=","cZ","(","di",",","dj",",","u_shadow_map0",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","0","]",",","dh",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","ca","(","di",".","xy",",","bQ",")",")","{","dm","=","dg","(","di",",","u_shadow_map0",",","u_pcf_blur_radii","[","0","]",",","u_csm_center_dists","[","0","]",",","dh",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ca","(","dj",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["dm","=","cZ","(","dj",",","dk",",","u_shadow_map1",",","u_shadow_map2",",","u_pcf_blur_radii","[","1","]",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","1","]",",","dh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dm","=","dg","(","dj",",","u_shadow_map1",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","1","]",",","dh",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ca","(","dk",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["dm","=","cZ","(","dk",",","dl",",","u_shadow_map2",",","u_shadow_map3",",","u_pcf_blur_radii","[","2","]",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","2","]",",","dh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dm","=","dg","(","dk",",","u_shadow_map2",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","2","]",",","dh",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ca","(","dl",".","xy",",","0.0",")",")","dm","=","dg","(","dl",",","u_shadow_map3",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","3","]",",","dh",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dn","=","cs","(","dj",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dn","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dp","=","cs","(","dk",",","u_shadow_map2",",","u_pcf_blur_radii","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dp","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dq","=","cs","(","dl",",","u_shadow_map3",",","u_pcf_blur_radii","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dq","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","vec4","(","dm",",","dn",",","dp",",","dq",")",";","}"]}]}}]},{type:"textline",tokens:["vec4","du","(","inout","vec3","ds",")","{","vec4","dt",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dt","=","texture2DProj","(","u_shadow_mask",",","bG",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",3,{type:"l_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["ds","*=","dt",".","a",";"]}]}}]},{type:"textline",tokens:["return","dt",";"]}]}},{type:"elif",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dt","=","dr","(","bD",".","z",")",";","return","dt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec4","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2},"REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","dB","(","in","vec3","dv",",","vec3","dw",",","float","dx",",","float","dy",")","{","float","dz",";","vec3","dA",";","dA","=","normalize","(","dw","+","dv",")",";","dz","=","1.0","-","dot","(","dv",",","dA",")",";","dz","=","dy","+","(","1.0","-","dy",")","*","pow","(","dz",",","dx",")",";","return","dz",";","}","void","dP","(","inout","vec3","dC",",","vec3","dD",",","vec3","dE",",","float","dF",",","mat4","dG",")","{","vec2","dH",",","dI",";","float","dJ",",","dK",",","dL",";","vec3","dM",",","dN",",","dO",";","dM","=","reflect","(","-","dD",",","dE",")",";","dJ","=","u_fresnel_params","[","2","]",";","dK","=","u_fresnel_params","[","3","]",";","dL","=","1.0",";","if","(","dJ","!=","0.0",")","dL","=","dB","(","dD",",","dM",",","dJ",",","dK",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTION_TYPE","REFL_CUBE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dN","=","textureCube","(","u_cube_reflection",",","dM",")",".","xyz",";"]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTION_PASS",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["dO","=","u_refl_plane",".","xyz","*","dot","(","dE",",","u_refl_plane",".","xyz",")",";","dO","=","dE","-","dO",";","dH","=","(","dG","*","vec4","(","dO",",","0.0",")",")",".","xy",";","dI","=","bG",".","xy","/","bG",".","z",";","dI","+=","dH","*","REFL_BUMP",";","dN","=","texture2D","(","u_plane_reflection",",","dI",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dN","=","vec3","(","1.0",")",";","dF","=","0.0",";"]}]}}]}]}},{type:"elif",expression:["REFLECTION_TYPE","REFL_MIRRORMAP",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["dN","=","textureCube","(","u_mirrormap",",","dM",")",".","xyz",";","dF","=","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["br","(","dN",".","rgb",")",";","dC","=","mix","(","dC",",","dN",",","dF","*","dL",")",";","}"]}]}}]}]},exports["include/environment.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec3","dS","(","vec3","dQ",")","{","float","dR",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["return","textureCube","(","u_sky_texture",",","dQ",")",".","rgb",";"]}]}},{type:"elif",expression:["SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["dR","=","0.5","*","dQ",".","y","+","0.5",";","return","mix","(","u_horizon_color",",","u_zenith_color",",","dR",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["float","dY","(","in","float","dT",",","inout","vec2","dU",",","in","vec2","dV",")","{","float","dW",";","vec4","dX",";","dX","=","texture2D","(","u_scene_depth",",","dU",")",";","dW","=","Z","(","dX",")",";","if","(","dW","<","bH",")","{","dU","=","dV",";","return","dT",";","}","else","{","return","dW",";","}","return","dT",";","}"]}]}}]},{type:"textline",tokens:["vec3","ef","(","in","vec3","dZ",",","in","vec2","d_",")","{","vec3","ea",";","float","eb",";","vec4","ec",";","vec2","ed",",","ee",";","ed","=","dZ",".","xy","/","dZ",".","z",";","ee","=","ed","+","d_",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["ec","=","texture2DProj","(","u_scene_depth",",","dZ",")",";","eb","=","Z","(","ec",")",";","dY","(","eb",",","ee",",","ed",")",";"]}]}}]},{type:"textline",tokens:["ea","=","texture2D","(","u_refractmap",",","ee",")",".","rgb",";","br","(","ea",")",";","return","ea",";","}"]}]}}]}]},exports["include/nodes.glslf"] = {type:"group",parts:[{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NODE_TEX_ROW",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eg",";"]}]}}]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","eh","=","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","el","(","in","vec3","ei",",","in","float","ej",")","{","vec3","ek",";","ek","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["ek","=","ef","(","bG",",","ei",".","xy","*","ej",")",";"]}]}},{type:"elif",expression:["HAS_REFRACT_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["ek","=","texture2D","(","u_refractmap",",","bG",".","xy","/","bG",".","z",")",".","rgb",";","br","(","ek",")",";"]}]}}]},{type:"textline",tokens:["return","ek",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eq","(","vec3","em",")","{","float","en",",","eo",";","vec4","ep",";","ep","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","ep","=","mix","(","vec4","(","em",".","bg",",","ep",".","wz",")",",","vec4","(","em",".","gb",",","ep",".","xy",")",",","step","(","em",".","b",",","em",".","g",")",")",";","ep","=","mix","(","vec4","(","ep",".","xyw",",","em",".","r",")",",","vec4","(","em",".","r",",","ep",".","yzx",")",",","step","(","ep",".","x",",","em",".","r",")",")",";","en","=","ep",".","x","-","min","(","ep",".","w",",","ep",".","y",")",";","eo","=","1.0e-10",";","return","vec3","(","abs","(","ep",".","z","+","(","ep",".","w","-","ep",".","y",")","/","(","6.0","*","en","+","eo",")",")",",","en","/","(","ep",".","x","+","eo",")",",","ep",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eu","(","vec3","er",")","{","vec3","es",";","vec4","et",";","et","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","es","=","abs","(","fract","(","vec3","(","er",".","r",",","er",".","r",",","er",".","r",")","+","et",".","xyz",")","*","6.0","-","et",".","www",")",";","return","er",".","b","*","mix","(","et",".","xxx",",","clamp","(","es","-","et",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","er",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ew","(","vec2","ev",")","{","return","vec3","(","ev","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ey","(","vec3","ex",")","{","return","vec2","(","ex",".","xy","*","eh","+","vec2","(","eh",",","eh",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"fq",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"fr",qualifier:["float"],is_optional:true},{type:"node_out",name:"fs",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fq"],statements:[{type:"textline",tokens:["fq","=","normalize","(","fh",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fr"],statements:[{type:"textline",tokens:["fr","=","abs","(","fh",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_fs"],statements:[{type:"textline",tokens:["fs","=","length","(","fh",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"ft",qualifier:["float"],is_optional:false},{type:"node_in",name:"fu",qualifier:["float"],is_optional:false},{type:"node_in",name:"fv",qualifier:["float"],is_optional:false},{type:"node_out",name:"fw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fw","=","vec3","(","ft",",","fu",",","fv",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"fx",qualifier:["float"],is_optional:false},{type:"node_in",name:"fy",qualifier:["float"],is_optional:false},{type:"node_in",name:"fz",qualifier:["float"],is_optional:false},{type:"node_out",name:"fA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fA","=","eu","(","vec3","(","fx",",","fy",",","fz",")",")",";"]}]},{type:"node",name:"EMPTY_UV",declarations:[{type:"node_out",name:"fB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fB","=","vec3","(","-","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"EMPTY_VC",declarations:[{type:"node_out",name:"fC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fC","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"fD",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"ez",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["fD","=","ew","(","ez",")",";"]}]},{type:"node",name:"GEOMETRY_OR",declarations:[{type:"node_out",name:"fE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fE","=","2.0","*","eg","-","vec3","(","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"fF",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eA",qualifier:["varying","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fF","=","eA",";","br","(","fF",")",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"fG",qualifier:["float"],is_optional:false},{type:"node_param",name:"eB",qualifier:["varying","float"],is_optional:false}],statements:[{type:"textline",tokens:["fG","=","eB",";","br","(","fG",")",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"fH",qualifier:["float"],is_optional:false},{type:"node_out",name:"fI",qualifier:["float"],is_optional:false},{type:"node_param",name:"eC",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["fH","=","eC","[","0","]",";","fI","=","eC","[","1","]",";","br","(","fH",")",";","br","(","fI",")",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"fJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"fK",qualifier:["float"],is_optional:false},{type:"node_out",name:"fL",qualifier:["float"],is_optional:false},{type:"node_param",name:"eD",qualifier:["varying","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fJ","=","eD","[","0","]",";","fK","=","eD","[","1","]",";","fL","=","eD","[","2","]",";","br","(","fJ",")",";","br","(","fK",")",";","br","(","fL",")",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"fM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fM","=","fk",".","xzy",";","fM",".","y","*=","-","1.0",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"fN",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["INVERT_FRONTFACING"],statements:[{type:"textline",tokens:["fN","=","(","gl_FrontFacing",")","?","ZERO_VALUE_NODES",":","UNITY_VALUE_NODES",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["fN","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"fO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fO","=","-","(","eN","*","vec4","(","eM",",","0.0",")",")",".","xyz",";"]}]},{type:"node",name:"GEOMETRY_LO",declarations:[{type:"node_out",name:"fP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fP","[","0","]","=","fh","[","0","]",";","fP","[","1","]","=","fh","[","1","]",";","fP","[","2","]","=","fh","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"fQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fQ","=","vec3","(","fl",".","r",",","-","fl",".","b",",","fl",".","g",")",";"]}]},{type:"node",name:"NEW_GEOMETRY",declarations:[{type:"node_out",name:"fR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"fX",qualifier:["float"],is_optional:false},{type:"node_out",name:"fY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["fR","=","vec3","(","ZERO_VALUE_NODES",")",";","fS","=","vec3","(","ZERO_VALUE_NODES",")",";","fT","=","vec3","(","ZERO_VALUE_NODES",")",";","fU","=","vec3","(","ZERO_VALUE_NODES",")",";","fV","=","vec3","(","ZERO_VALUE_NODES",")",";","fW","=","vec3","(","ZERO_VALUE_NODES",")",";","fX","=","ZERO_VALUE_NODES",";","fY","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"fZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"f_",qualifier:["float"],is_optional:false},{type:"node_in",name:"ga",qualifier:["float"],is_optional:false},{type:"node_in",name:"gb",qualifier:["float"],is_optional:false},{type:"node_in",name:"gc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gd",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fn","=","eq","(","gc",")",";","fn","[","0","]","+=","(","fZ","-","eh",")",";","if","(","fn","[","0","]",">","UNITY_VALUE_NODES",")","fn","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","fn","[","0","]","<","ZERO_VALUE_NODES",")","fn","[","0","]","+=","UNITY_VALUE_NODES",";","fn","*=","vec3","(","UNITY_VALUE_NODES",",","f_",",","ga",")",";","fn","=","mix","(","vec3","(","UNITY_VALUE_NODES",")",",","mix","(","vec3","(","ZERO_VALUE_NODES",")",",","fn",",","step","(","vec3","(","ZERO_VALUE_NODES",")",",","fn",")",")",",","step","(","fn",",","vec3","(","UNITY_VALUE_NODES",")",")",")",";","gd","=","mix","(","gc",",","eu","(","fn",")",",","gb",")",";"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"ge",qualifier:["float"],is_optional:false},{type:"node_in",name:"gf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gg","=","mix","(","gf",",","vec3","(","UNITY_VALUE_NODES",")","-","gf",",","ge",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"gh",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"gi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gj",qualifier:["float"],is_optional:false},{type:"node_out",name:"gk",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gh"],statements:[{type:"textline",tokens:["gh","=","u_lamp_light_color_intensities","[","LAMP_INDEX","]",";"]}]}]},{type:"textline",tokens:["fi","=","u_lamp_light_factors","[","LAMP_INDEX","]",";","fn","=","u_lamp_light_directions","[","LAMP_INDEX","]",";","fo","=","u_lamp_light_positions","[","LAMP_INDEX","]",";","fa","=","fi",".","z",";","if","(","fa","!=","-","UNITY_VALUE_NODES",")","{"]},{type:"textline",tokens:["gi","=","bC","-","fo",";","gj","=","length","(","gi",")",";","gi","=","normalize","(","gi",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gk"],statements:[{type:"textline",tokens:["gk","=","fa","/","(","fa","+","gj","*","gj",")",";","fa","=","fi",".","x",";","fb","=","fi",".","y",";","if","(","fa",">","-","UNITY_VALUE_NODES",")","{","fc","=","dot","(","-","gi",",","fn",")",";","fc","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","fc","-","fa",")","/","fb",")",";","gk","*=","fc",";","}"]}]}]},{type:"textline",tokens:["}","else","{"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gi"],statements:[{type:"textline",tokens:["gi","=","fn",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gj"],statements:[{type:"textline",tokens:["gj","=","length","(","fo","-","bC",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gk"],statements:[{type:"textline",tokens:["gk","=","UNITY_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["}"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gi"],statements:[{type:"textline",tokens:["gi",".","yz","=","vec2","(","-","gi",".","z",",","gi",".","y",")",";"]}]}]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"gl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gm",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"gn",qualifier:["float"],is_optional:true},{type:"node_param",name:"eE",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gm"],statements:[{type:"textline",tokens:["gm","=","eE",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_gn"],statements:[{type:"textline",tokens:["gn","=","-","dot","(","gl",",","eE",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"go",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gp","=","-","(","eO","*","vec4","(","go",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"BSDF_ANISOTROPIC",declarations:[{type:"node_in",name:"gq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gr",qualifier:["float"],is_optional:false},{type:"node_in",name:"gs",qualifier:["float"],is_optional:false},{type:"node_in",name:"gt",qualifier:["float"],is_optional:false},{type:"node_in",name:"gu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gw","=","gq",";"]},{type:"textline",tokens:["gr",";","gs",";","gt",";","gu",";","gv",";"]}]},{type:"node",name:"BSDF_DIFFUSE",declarations:[{type:"node_in",name:"gx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gy",qualifier:["float"],is_optional:false},{type:"node_in",name:"gz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gA","=","gx",";"]},{type:"textline",tokens:["gy",";","gz",";"]}]},{type:"node",name:"BSDF_GLASS",declarations:[{type:"node_in",name:"gB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gC",qualifier:["float"],is_optional:false},{type:"node_in",name:"gD",qualifier:["float"],is_optional:false},{type:"node_in",name:"gE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gF","=","gB",";"]},{type:"textline",tokens:["gC",";","gD",";","gE",";"]}]},{type:"node",name:"BSDF_GLOSSY",declarations:[{type:"node_in",name:"gG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gH",qualifier:["float"],is_optional:false},{type:"node_in",name:"gI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gJ","=","gG",";"]},{type:"textline",tokens:["gH",";","gI",";"]}]},{type:"node",name:"BSDF_HAIR",declarations:[{type:"node_in",name:"gK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gL",qualifier:["float"],is_optional:false},{type:"node_in",name:"gM",qualifier:["float"],is_optional:false},{type:"node_in",name:"gN",qualifier:["float"],is_optional:false},{type:"node_out",name:"gO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gO","=","gK",";"]},{type:"textline",tokens:["gL",";","gM",";","gN",";"]}]},{type:"node",name:"BSDF_TRANSPARENT",declarations:[{type:"node_in",name:"gP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gQ","=","gP",";"]}]},{type:"node",name:"BSDF_TRANSLUCENT",declarations:[{type:"node_in",name:"gR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gT","=","gR",";"]},{type:"textline",tokens:["gS",";"]}]},{type:"node",name:"BSDF_REFRACTION",declarations:[{type:"node_in",name:"gU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"gV",qualifier:["float"],is_optional:false},{type:"node_in",name:"gW",qualifier:["float"],is_optional:false},{type:"node_in",name:"gX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"gY",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["gY","[","0","]","=","gY","[","1","]","=","gY","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["gU",";","gV",";","gW",";","gX",";"]}]},{type:"node",name:"BSDF_TOON",declarations:[{type:"node_in",name:"gZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"g_",qualifier:["float"],is_optional:false},{type:"node_in",name:"ha",qualifier:["float"],is_optional:false},{type:"node_in",name:"hb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hc","=","gZ",";"]},{type:"textline",tokens:["g_",";","ha",";","hb",";"]}]},{type:"node",name:"BSDF_VELVET",declarations:[{type:"node_in",name:"hd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"he",qualifier:["float"],is_optional:false},{type:"node_in",name:"hf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hg","=","hd",";"]},{type:"textline",tokens:["he",";","hf",";"]}]},{type:"node",name:"SUBSURFACE_SCATTERING",declarations:[{type:"node_in",name:"hh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hi",qualifier:["float"],is_optional:false},{type:"node_in",name:"hj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hk",qualifier:["float"],is_optional:false},{type:"node_in",name:"hl",qualifier:["float"],is_optional:false},{type:"node_in",name:"hm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hn",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hn","[","0","]","=","hn","[","1","]","=","hn","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hh",";","hj",";","hk",";","hl",";","hm",";","hi",";"]}]},{type:"node",name:"EMISSION",declarations:[{type:"node_in",name:"ho",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hp",qualifier:["float"],is_optional:false},{type:"node_out",name:"hq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hq","=","ho",";"]},{type:"textline",tokens:["hp",";"]}]},{type:"node",name:"AMBIENT_OCCLUSION",declarations:[{type:"node_in",name:"hr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hs","[","0","]","=","hs","[","1","]","=","hs","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hr",";"]}]},{type:"node",name:"HOLDOUT",declarations:[{type:"node_out",name:"ht",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ht","[","0","]","=","ht","[","1","]","=","ht","[","2","]","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"VOLUME_ABSORPTION",declarations:[{type:"node_in",name:"hu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hv",qualifier:["float"],is_optional:false},{type:"node_out",name:"hw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hw","[","0","]","=","hw","[","1","]","=","hw","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hu",";","hv",";"]}]},{type:"node",name:"VOLUME_SCATTER",declarations:[{type:"node_in",name:"hx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hy",qualifier:["float"],is_optional:false},{type:"node_in",name:"hz",qualifier:["float"],is_optional:false},{type:"node_out",name:"hA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hA","[","0","]","=","hA","[","1","]","=","hA","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hx",";","hy",";","hz",";"]}]},{type:"node",name:"BUMP",declarations:[{type:"node_in",name:"hB",qualifier:["float"],is_optional:false},{type:"node_in",name:"hC",qualifier:["float"],is_optional:false},{type:"node_in",name:"hD",qualifier:["float"],is_optional:false},{type:"node_in",name:"hE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hF","=","hE",";"]},{type:"textline",tokens:["hB",";","hC",";","hD",";"]}]},{type:"node",name:"NORMAL_MAP",declarations:[{type:"node_in",name:"hG",qualifier:["float"],is_optional:false},{type:"node_in",name:"hH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hI","=","hH",";"]},{type:"textline",tokens:["hG",";"]}]},{type:"node",name:"VECT_TRANSFORM",declarations:[{type:"node_in",name:"hJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hK",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["CONVERT_TYPE","VT_WORLD_TO_WORLD",{type:"equal_expr",places:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",{type:"equal_expr",places:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],statements:[{type:"textline",tokens:["hK","=","hJ",";"]}]},{type:"node_else",statements:[{type:"node_condition",parts:[{type:"node_if",expression:["VECTOR_TYPE","VT_POINT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["fi","=","vec4","(","hJ",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["fi","=","vec4","(","hJ",",","ZERO_VALUE_NODES",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["hK","=","(","eO","*","fi",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["hK","=","(","eR","*","fi",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["hK","=","(","eQ","*","fi",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["hK","=","(","eO","*","eQ","*","fi",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["hK","=","(","eP","*","fi",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["hK","=","(","eR","*","eP","*","fi",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["VECTOR_TYPE","VT_NORMAL",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["hK","=","normalize","(","hK",")",";"]}]}]}]}]}]},{type:"node",name:"BLACKBODY",declarations:[{type:"node_in",name:"hL",qualifier:["float"],is_optional:false},{type:"node_out",name:"hM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hM","[","0","]","=","hM","[","1","]","=","hM","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hL",";"]}]},{type:"node",name:"WAVELENGTH",declarations:[{type:"node_in",name:"hN",qualifier:["float"],is_optional:false},{type:"node_out",name:"hO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hO","[","0","]","=","hO","[","1","]","=","hO","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["hN",";"]}]},{type:"node",name:"SEPXYZ",declarations:[{type:"node_in",name:"hP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"hQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"hR",qualifier:["float"],is_optional:false},{type:"node_out",name:"hS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["hQ","=","hP","[","0","]",";","hR","=","hP","[","1","]",";","hS","=","hP","[","2","]",";"]}]},{type:"node",name:"COMBXYZ",declarations:[{type:"node_in",name:"hT",qualifier:["float"],is_optional:false},{type:"node_in",name:"hU",qualifier:["float"],is_optional:false},{type:"node_in",name:"hV",qualifier:["float"],is_optional:false},{type:"node_out",name:"hW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["hW","[","0","]","=","hT",";","hW","[","1","]","=","hU",";","hW","[","2","]","=","hV",";"]}]},{type:"node",name:"BRIGHTCONTRAST",declarations:[{type:"node_in",name:"hX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"hY",qualifier:["float"],is_optional:false},{type:"node_in",name:"hZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"h_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fc","=","hY","-","hZ","*","eh",";","h_","=","max","(","(","UNITY_VALUE_NODES","+","hZ",")","*","hX","+","fc",",","vec3","(","ZERO_VALUE_NODES",")",")",";"]}]},{type:"node",name:"LIGHT_FALLOFF",declarations:[{type:"node_in",name:"ia",qualifier:["float"],is_optional:false},{type:"node_in",name:"ib",qualifier:["float"],is_optional:false},{type:"node_out",name:"ic",qualifier:["float"],is_optional:false},{type:"node_out",name:"id",qualifier:["float"],is_optional:false},{type:"node_out",name:"ie",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ic","=","id","=","ie","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ia",";","ib",";"]}]},{type:"node",name:"TEX_IMAGE",declarations:[{type:"node_in",name:"ig",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ih",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ii",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ih","[","0","]","=","ih","[","1","]","=","ih","[","2","]","=","ZERO_VALUE_NODES",";","ii","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["ig",";"]}]},{type:"node",name:"TEX_ENVIRONMENT",declarations:[{type:"node_in",name:"ij",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ik",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ik","[","0","]","=","ik","[","1","]","=","ik","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["ij",";"]}]},{type:"node",name:"TEX_SKY",declarations:[{type:"node_in",name:"il",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"im",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["im","[","0","]","=","im","[","1","]","=","im","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["il",";"]}]},{type:"node",name:"TEX_NOISE",declarations:[{type:"node_in",name:"io",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ip",qualifier:["float"],is_optional:false},{type:"node_in",name:"iq",qualifier:["float"],is_optional:false},{type:"node_in",name:"ir",qualifier:["float"],is_optional:false},{type:"node_out",name:"is",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"it",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["is","[","0","]","=","is","[","1","]","=","is","[","2","]","=","ZERO_VALUE_NODES",";","it","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["io",";","ip",";","iq",";","ir",";"]}]},{type:"node",name:"TEX_WAVE",declarations:[{type:"node_in",name:"iu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iv",qualifier:["float"],is_optional:false},{type:"node_in",name:"iw",qualifier:["float"],is_optional:false},{type:"node_in",name:"ix",qualifier:["float"],is_optional:false},{type:"node_in",name:"iy",qualifier:["float"],is_optional:false},{type:"node_out",name:"iz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iz","[","0","]","=","iz","[","1","]","=","iz","[","2","]","=","ZERO_VALUE_NODES",";","iA","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iu",";","iv",";","iw",";","ix",";","iy",";"]}]},{type:"node",name:"TEX_VORONOI",declarations:[{type:"node_in",name:"iB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iC",qualifier:["float"],is_optional:false},{type:"node_out",name:"iD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iE",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iD","[","0","]","=","iD","[","1","]","=","iD","[","2","]","=","ZERO_VALUE_NODES",";","iE","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iB",";","iC",";"]}]},{type:"node",name:"TEX_MUSGRAVE",declarations:[{type:"node_in",name:"iF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iG",qualifier:["float"],is_optional:false},{type:"node_in",name:"iH",qualifier:["float"],is_optional:false},{type:"node_in",name:"iI",qualifier:["float"],is_optional:false},{type:"node_in",name:"iJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"iK",qualifier:["float"],is_optional:false},{type:"node_in",name:"iL",qualifier:["float"],is_optional:false},{type:"node_out",name:"iM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iN",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iM","[","0","]","=","iM","[","1","]","=","iM","[","2","]","=","ZERO_VALUE_NODES",";","iN","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iF",";","iG",";","iH",";","iI",";","iJ",";","iK",";","iL",";"]}]},{type:"node",name:"TEX_GRADIENT",declarations:[{type:"node_in",name:"iO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iQ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iP","[","0","]","=","iP","[","1","]","=","iP","[","2","]","=","ZERO_VALUE_NODES",";","iQ","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iO",";"]}]},{type:"node",name:"TEX_MAGIC",declarations:[{type:"node_in",name:"iR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iS",qualifier:["float"],is_optional:false},{type:"node_in",name:"iT",qualifier:["float"],is_optional:false},{type:"node_out",name:"iU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"iV",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["iU","[","0","]","=","iU","[","1","]","=","iU","[","2","]","=","ZERO_VALUE_NODES",";","iV","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iR",";","iS",";","iT",";"]}]},{type:"node",name:"TEX_CHECKER",declarations:[{type:"node_in",name:"iW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"iZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"i_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ja",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["i_","[","0","]","=","i_","[","1","]","=","i_","[","2","]","=","ZERO_VALUE_NODES",";","ja","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["iW",";","iX",";","iY",";","iZ",";"]}]},{type:"node",name:"TEX_BRICK",declarations:[{type:"node_in",name:"jb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"je",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jf",qualifier:["float"],is_optional:false},{type:"node_in",name:"jg",qualifier:["float"],is_optional:false},{type:"node_in",name:"jh",qualifier:["float"],is_optional:false},{type:"node_in",name:"ji",qualifier:["float"],is_optional:false},{type:"node_in",name:"jj",qualifier:["float"],is_optional:false},{type:"node_out",name:"jk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jl",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jk","[","0","]","=","jk","[","1","]","=","jk","[","2","]","=","ZERO_VALUE_NODES",";","jl","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["jb",";","jc",";","jd",";","je",";","jf",";","jg",";","jh",";","ji",";","jj",";"]}]},{type:"node",name:"ADD_SHADER",declarations:[{type:"node_in",name:"jm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jo",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jo","=","clamp","(","jm","+","jn",",","vec3","(","ZERO_VALUE_NODES",")",",","vec3","(","UNITY_VALUE_NODES",")",")",";"]}]},{type:"node",name:"MIX_SHADER",declarations:[{type:"node_in",name:"jp",qualifier:["float"],is_optional:false},{type:"node_in",name:"jq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"jr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"js",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fc","=","clamp","(","jp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","js","=","fc","*","jq","+","(","UNITY_VALUE_NODES","-","fc",")","*","jr",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_out",name:"jt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ju",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eF",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_jt"],statements:[{type:"textline",tokens:["jt","=","ew","(","eF",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ju"],statements:[{type:"textline",tokens:["ju","=","vec3","(","eF",",","ZERO_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_out",name:"jv",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eG",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["jv","=","vec3","(","eG",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_NO",declarations:[{type:"node_out",name:"jw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jw","=","fm",";"]}]},{type:"node",name:"TEX_COORD_GE",declarations:[{type:"node_out",name:"jx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jx","=","eg",";"]}]},{type:"node",name:"TEX_COORD_OB",declarations:[{type:"node_out",name:"jy",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jy","[","0","]","=","jy","[","1","]","=","jy","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_CA",declarations:[{type:"node_out",name:"jz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jz","[","0","]","=","fh","[","0","]",";","jz","[","1","]","=","fh","[","1","]",";","jz","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_WI",declarations:[{type:"node_out",name:"jA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jA","[","0","]","=","jA","[","1","]","=","jA","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_RE",declarations:[{type:"node_out",name:"jB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jB","[","0","]","=","jB","[","1","]","=","jB","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_out",name:"jC",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"eH",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["jC","=","vec3","(","eH",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_out",name:"jD",qualifier:["float"],is_optional:false},{type:"node_out",name:"jE",qualifier:["float"],is_optional:false},{type:"node_out",name:"jF",qualifier:["float"],is_optional:false},{type:"node_out",name:"jG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jH",qualifier:["float"],is_optional:false},{type:"node_out",name:"jI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jD","=","ZERO_VALUE_NODES",";","jE","=","ZERO_VALUE_NODES",";","jF","=","ZERO_VALUE_NODES",";","jG","=","vec3","(","ZERO_VALUE_NODES",")",";","jH","=","ZERO_VALUE_NODES",";","jI","=","jG",";","jJ","=","jG",";"]}]},{type:"node",name:"HAIR_INFO",declarations:[{type:"node_out",name:"jK",qualifier:["float"],is_optional:false},{type:"node_out",name:"jL",qualifier:["float"],is_optional:false},{type:"node_out",name:"jM",qualifier:["float"],is_optional:false},{type:"node_out",name:"jN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jK","=","ZERO_VALUE_NODES",";","jL","=","ZERO_VALUE_NODES",";","jM","=","ZERO_VALUE_NODES",";","jN","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"OBJECT_INFO",declarations:[{type:"node_out",name:"jO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jP",qualifier:["float"],is_optional:false},{type:"node_out",name:"jQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"jR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jP","=","ZERO_VALUE_NODES",";","jQ","=","ZERO_VALUE_NODES",";","jR","=","ZERO_VALUE_NODES",";","jO","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"WIREFRAME",declarations:[{type:"node_in",name:"jS",qualifier:["float"],is_optional:false},{type:"node_out",name:"jT",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jT","=","jS",";"]}]},{type:"node",name:"TANGENT",declarations:[{type:"node_out",name:"jU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["jU","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LAYER_WEIGHT",declarations:[{type:"node_in",name:"jV",qualifier:["float"],is_optional:false},{type:"node_in",name:"jW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"jX",qualifier:["float"],is_optional:false},{type:"node_out",name:"jY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jX","=","jY","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["jW",";","jV",";"]}]},{type:"node",name:"LIGHT_PATH",declarations:[{type:"node_out",name:"jZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"j_",qualifier:["float"],is_optional:false},{type:"node_out",name:"ka",qualifier:["float"],is_optional:false},{type:"node_out",name:"kb",qualifier:["float"],is_optional:false},{type:"node_out",name:"kc",qualifier:["float"],is_optional:false},{type:"node_out",name:"kd",qualifier:["float"],is_optional:false},{type:"node_out",name:"ke",qualifier:["float"],is_optional:false},{type:"node_out",name:"kf",qualifier:["float"],is_optional:false},{type:"node_out",name:"kg",qualifier:["float"],is_optional:false},{type:"node_out",name:"kh",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["jZ","=","j_","=","ka","=","ZERO_VALUE_NODES",";","kb","=","kc","=","kd","=","ZERO_VALUE_NODES",";","ke","=","ke","=","kg","=","kh","=","ZERO_VALUE_NODES",";","kf","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"ATTRIBUTE",declarations:[{type:"node_out",name:"ki",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kk",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ki","=","kj","=","vec3","(","ZERO_VALUE_NODES",")",";","kk","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"SCRIPT",declarations:[],statements:[]},{type:"node",name:"CURVE_VEC",declarations:[{type:"node_in",name:"kl",qualifier:["float"],is_optional:false},{type:"node_in",name:"km",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kn",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kn","=","km",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_R"],statements:[{type:"textline",tokens:["kn",".","r","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","km",".","r","+","0.5",",","NODE_TEX_ROW",")",")",".","r","-","0.5",")","*","2.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_G"],statements:[{type:"textline",tokens:["kn",".","g","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","km",".","g","+","0.5",",","NODE_TEX_ROW",")",")",".","g","-","0.5",")","*","2.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_B"],statements:[{type:"textline",tokens:["kn",".","b","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","km",".","b","+","0.5",",","NODE_TEX_ROW",")",")",".","b","-","0.5",")","*","2.0",";"]}]}]},{type:"textline",tokens:["kn","=","mix","(","km",",","kn",",","kl",")",";"]}]},{type:"node",name:"CURVE_RGB",declarations:[{type:"node_in",name:"ko",qualifier:["float"],is_optional:false},{type:"node_in",name:"kp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kq",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["READ_A"],statements:[{type:"textline",tokens:["fc","=","texture2D","(","u_nodes_texture",",","vec2","(","kp",".","r",",","NODE_TEX_ROW",")",")",".","a",";","fb","=","texture2D","(","u_nodes_texture",",","vec2","(","kp",".","g",",","NODE_TEX_ROW",")",")",".","a",";","fa","=","texture2D","(","u_nodes_texture",",","vec2","(","kp",".","b",",","NODE_TEX_ROW",")",")",".","a",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["fc","=","kp",".","r",";","fb","=","kp",".","g",";","fa","=","kp",".","b",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_R"],statements:[{type:"textline",tokens:["kq",".","r","=","texture2D","(","u_nodes_texture",",","vec2","(","fc",",","NODE_TEX_ROW",")",")",".","r",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["kq",".","r","=","fc",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_G"],statements:[{type:"textline",tokens:["kq",".","g","=","texture2D","(","u_nodes_texture",",","vec2","(","fb",",","NODE_TEX_ROW",")",")",".","g",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["kq",".","g","=","fb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_B"],statements:[{type:"textline",tokens:["kq",".","b","=","texture2D","(","u_nodes_texture",",","vec2","(","fa",",","NODE_TEX_ROW",")",")",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["kq",".","b","=","fa",";"]}]}]},{type:"textline",tokens:["kq","=","mix","(","kp",",","kq",",","ko",")",";"]}]},{type:"node",name:"VALTORGB",declarations:[{type:"node_in",name:"kr",qualifier:["float"],is_optional:false},{type:"node_out",name:"ks",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kt",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["fi","=","texture2D","(","u_nodes_texture",",","vec2","(","kr",",","NODE_TEX_ROW",")",")",";","ks","=","fi",".","rgb",";","kt","=","fi",".","a",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"ku",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"kv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["kv","=","ku",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["kv","=","(","MAPPING_TRS_MATRIX","*","vec4","(","kv",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["kv","=","kv","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["kv","=","kv","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["kv","=","max","(","kv",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["kv","=","min","(","kv",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["kv","=","normalize","(","kv",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"kw",qualifier:["float"],is_optional:false},{type:"node_in",name:"kx",qualifier:["float"],is_optional:false},{type:"node_out",name:"ky",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ky","=","kw","+","kx",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ky","=","clamp","(","ky",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"kz",qualifier:["float"],is_optional:false},{type:"node_in",name:"kA",qualifier:["float"],is_optional:false},{type:"node_out",name:"kB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kB","=","kz","-","kA",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kB","=","clamp","(","kB",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"kC",qualifier:["float"],is_optional:false},{type:"node_in",name:"kD",qualifier:["float"],is_optional:false},{type:"node_out",name:"kE",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kE","=","kC","*","kD",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kE","=","clamp","(","kE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"kF",qualifier:["float"],is_optional:false},{type:"node_in",name:"kG",qualifier:["float"],is_optional:false},{type:"node_out",name:"kH",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kH","=","(","kG","!=","ZERO_VALUE_NODES",")","?","kF","/","kG",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kH","=","clamp","(","kH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"kI",qualifier:["float"],is_optional:false},{type:"node_in",name:"kJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"kK",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kK","=","sin","(","kI",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kK","=","clamp","(","kK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kJ",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"kL",qualifier:["float"],is_optional:false},{type:"node_in",name:"kM",qualifier:["float"],is_optional:false},{type:"node_out",name:"kN",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kN","=","cos","(","kL",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kN","=","clamp","(","kN",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kM",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"kO",qualifier:["float"],is_optional:false},{type:"node_in",name:"kP",qualifier:["float"],is_optional:false},{type:"node_out",name:"kQ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kQ","=","tan","(","kO",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kQ","=","clamp","(","kQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kP",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"kR",qualifier:["float"],is_optional:false},{type:"node_in",name:"kS",qualifier:["float"],is_optional:false},{type:"node_out",name:"kT",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kT","=","(","kR","<=","UNITY_VALUE_NODES","&&","kR",">=","-","UNITY_VALUE_NODES",")","?","asin","(","kR",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kT","=","clamp","(","kT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kS",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"kU",qualifier:["float"],is_optional:false},{type:"node_in",name:"kV",qualifier:["float"],is_optional:false},{type:"node_out",name:"kW",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kW","=","(","kU","<=","UNITY_VALUE_NODES","&&","kU",">=","-","UNITY_VALUE_NODES",")","?","acos","(","kU",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kW","=","clamp","(","kW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kV",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"kX",qualifier:["float"],is_optional:false},{type:"node_in",name:"kY",qualifier:["float"],is_optional:false},{type:"node_out",name:"kZ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["kZ","=","atan","(","kX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["kZ","=","clamp","(","kZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["kY",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"k_",qualifier:["float"],is_optional:false},{type:"node_in",name:"la",qualifier:["float"],is_optional:false},{type:"node_out",name:"lb",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","k_","<","ZERO_VALUE_NODES","&&","la","!=","floor","(","la",")",")","lb","=","ZERO_VALUE_NODES",";","else","if","(","la","==","ZERO_VALUE_NODES",")"]},{type:"textline",tokens:["lb","=","UNITY_VALUE_NODES",";","else","if","(","k_","<","ZERO_VALUE_NODES",")","lb","=","mix","(","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","sign","(","mod","(","-","la",",","2.0",")",")",")","*","pow","(","-","k_",",","la",")",";","else","if","(","k_","==","ZERO_VALUE_NODES",")","lb","=","ZERO_VALUE_NODES",";","else","lb","=","pow","(","k_",",","la",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lb","=","clamp","(","lb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"lc",qualifier:["float"],is_optional:false},{type:"node_in",name:"ld",qualifier:["float"],is_optional:false},{type:"node_out",name:"le",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["le","=","(","lc",">","ZERO_VALUE_NODES","&&","ld",">","ZERO_VALUE_NODES",")","?","log2","(","lc",")","/","log2","(","ld",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["le","=","clamp","(","le",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"lf",qualifier:["float"],is_optional:false},{type:"node_in",name:"lg",qualifier:["float"],is_optional:false},{type:"node_out",name:"lh",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lh","=","min","(","lf",",","lg",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lh","=","clamp","(","lh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"li",qualifier:["float"],is_optional:false},{type:"node_in",name:"lj",qualifier:["float"],is_optional:false},{type:"node_out",name:"lk",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lk","=","max","(","li",",","lj",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lk","=","clamp","(","lk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"ll",qualifier:["float"],is_optional:false},{type:"node_in",name:"lm",qualifier:["float"],is_optional:false},{type:"node_out",name:"ln",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ln","=","floor","(","ll","+","eh",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ln","=","clamp","(","ln",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["lm",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"lo",qualifier:["float"],is_optional:false},{type:"node_in",name:"lp",qualifier:["float"],is_optional:false},{type:"node_out",name:"lq",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lq","=","(","lo","<","lp",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lq","=","clamp","(","lq",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"lr",qualifier:["float"],is_optional:false},{type:"node_in",name:"ls",qualifier:["float"],is_optional:false},{type:"node_out",name:"lt",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lt","=","(","lr",">","ls",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lt","=","clamp","(","lt",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"lu",qualifier:["float"],is_optional:false},{type:"node_in",name:"lv",qualifier:["float"],is_optional:false},{type:"node_out",name:"lw",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lw","=","abs","(","lv",")",">","0.000001","?","mod","(","lu",",","lv",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lw","=","clamp","(","lw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"lx",qualifier:["float"],is_optional:false},{type:"node_in",name:"ly",qualifier:["float"],is_optional:false},{type:"node_out",name:"lz",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lz","=","abs","(","lx",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["lz","=","clamp","(","lz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["ly",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"lA",qualifier:["float"],is_optional:false},{type:"node_in",name:"lB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lD",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","lA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lD","=","mix","(","lB",",","lC",",","fa",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lD","=","clamp","(","lD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"lE",qualifier:["float"],is_optional:false},{type:"node_in",name:"lF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","lE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lH","=","mix","(","lF",",","lF","+","lG",",","fa",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lH","=","clamp","(","lH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"lI",qualifier:["float"],is_optional:false},{type:"node_in",name:"lJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","lI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lL","=","mix","(","lJ",",","lJ","*","lK",",","fa",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lL","=","clamp","(","lL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"lM",qualifier:["float"],is_optional:false},{type:"node_in",name:"lN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","lM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lP","=","mix","(","lN",",","lN","-","lO",",","fa",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lP","=","clamp","(","lP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"lQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"lR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","lQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fb","=","UNITY_VALUE_NODES","-","fa",";","lT","=","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","fb",")","+","fa","*","(","vec3","(","UNITY_VALUE_NODES",")","-","lS",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","lR",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lT","=","clamp","(","lT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"lU",qualifier:["float"],is_optional:false},{type:"node_in",name:"lV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"lW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"lX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","lU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fb","=","UNITY_VALUE_NODES","-","fa",";","lW","+=","step","(","lW",",","vec3","(","ZERO_VALUE_NODES",")",")",";","lX","=","fb","*","lV","+","fa","*","lV","/","lW",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["lX","=","clamp","(","lX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"lY",qualifier:["float"],is_optional:false},{type:"node_in",name:"lZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"l_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ma",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","lY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","ma","=","mix","(","lZ",",","abs","(","lZ","-","l_",")",",","fa",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["ma","=","clamp","(","ma",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"mb",qualifier:["float"],is_optional:false},{type:"node_in",name:"mc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"md",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"me",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","me","=","min","(","mc",".","rgb",",","md",".","rgb","*","fa",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["me","=","clamp","(","me",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"mf",qualifier:["float"],is_optional:false},{type:"node_in",name:"mg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mf",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mi","=","max","(","mg",".","rgb",",","mh",".","rgb","*","fa",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mi","=","clamp","(","mi",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"mj",qualifier:["float"],is_optional:false},{type:"node_in",name:"mk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ml",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fo","=","vec3","(","UNITY_VALUE_NODES","-","fa",")",";","mm","=","mix","(","mk","*","(","fo","+","2.0","*","fa","*","ml",")",",","vec3","(","UNITY_VALUE_NODES",")","-","(","fo","+","2.0","*","fa","*","(","vec3","(","UNITY_VALUE_NODES",")","-","ml",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","mk",")",",","step","(","eh",",","mk",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mm","=","clamp","(","mm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"mn",qualifier:["float"],is_optional:false},{type:"node_in",name:"mo",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fo","=","vec3","(","UNITY_VALUE_NODES",")","-","fa","*","mp",";","fn","=","clamp","(","mo","/","fo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mq","=","mix","(","mix","(","fn",",","vec3","(","UNITY_VALUE_NODES",")",",","step","(","fo",",","vec3","(","ZERO_VALUE_NODES",")",")",")",",","mo",",","step","(","mo",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mq","=","clamp","(","mq",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"mr",qualifier:["float"],is_optional:false},{type:"node_in",name:"ms",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mu",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fo","=","vec3","(","UNITY_VALUE_NODES","-","fa",")",";","fo","=","fo","+","fa","*","mt",";","fn","=","clamp","(","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","UNITY_VALUE_NODES",")","-","ms",")","/","fo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mu","=","mix","(","fn",",","vec3","(","ZERO_VALUE_NODES",")",",","step","(","fo",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mu","=","clamp","(","mu",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"mv",qualifier:["float"],is_optional:false},{type:"node_in",name:"mw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"my",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","my","=","mw",";","fn","=","eq","(","mx",")",";","if","(","fn",".","y","!=","ZERO_VALUE_NODES",")","{","fo","=","eq","(","my",")",";","fo",".","x","=","fn",".","x",";","fp","=","eu","(","fo",")",";","my","=","mix","(","my",",","fp",",","fa",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["my","=","clamp","(","my",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"mz",qualifier:["float"],is_optional:false},{type:"node_in",name:"mA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fb","=","UNITY_VALUE_NODES","-","fa",";","mC","=","mA",";","fp","=","eq","(","mC",")",";","if","(","fp",".","y","!=","ZERO_VALUE_NODES",")","{","fo","=","eq","(","mB",")",";","fp",".","y","=","fb","*","fp",".","y","+","fa","*","fo",".","y",";","mC","=","eu","(","fp",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mC","=","clamp","(","mC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"mD",qualifier:["float"],is_optional:false},{type:"node_in",name:"mE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fb","=","UNITY_VALUE_NODES","-","fa",";","fp","=","eq","(","mE",")",";","fo","=","eq","(","mF",")",";","fp",".","z","=","fb","*","fp",".","z","+","fa","*","fo",".","z",";","mG","=","eu","(","fp",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mG","=","clamp","(","mG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"mH",qualifier:["float"],is_optional:false},{type:"node_in",name:"mI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mK","=","mI",";","fo","=","eq","(","mJ",")",";","if","(","fo",".","y","!=","ZERO_VALUE_NODES",")","{","fp","=","eq","(","mK",")",";","fp",".","x","=","fo",".","x",";","fp",".","y","=","fo",".","y",";","fn","=","eu","(","fp",")",";","mK","=","mix","(","mK",",","fn",",","fa",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mK","=","clamp","(","mK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"mL",qualifier:["float"],is_optional:false},{type:"node_in",name:"mM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fb","=","UNITY_VALUE_NODES","-","fa",";","fn","=","mN","+","mM","-","mN","*","mM",";","mO","=","mM","*","(","vec3","(","fb",")","+","vec3","(","fa",")","*","(","(","vec3","(","UNITY_VALUE_NODES",")","-","mM",")","*","mN","+","fn",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mO","=","clamp","(","mO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"mP",qualifier:["float"],is_optional:false},{type:"node_in",name:"mQ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fa","=","clamp","(","mP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mS","=","mQ","+","fa","*","(","2.0","*","mR","-","vec3","(","UNITY_VALUE_NODES",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["mS","=","clamp","(","mS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"mT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["eS","=","mT",";","eW","=","mU",";"]}]},{type:"node",name:"MATERIAL_BEGIN",declarations:[{type:"node_in",name:"mV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"mX",qualifier:["float"],is_optional:false},{type:"node_in",name:"mY",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"mZ",qualifier:["float"],is_optional:true},{type:"node_out",name:"m_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"na",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ne",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nf",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ng",qualifier:["vec4"],is_optional:false},{type:"node_param",name:"eI",qualifier:["const","vec2"],is_optional:false},{type:"node_param",name:"eJ",qualifier:["const","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nb","=","clamp","(","mV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["nc","=","eJ","[","0","]","*","clamp","(","mW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["nd","=","normalize","(","mY",")",";"]},{type:"textline",tokens:["nd",".","yz","=","vec2","(","nd",".","z",",","-","nd",".","y",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nd","=","fm",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["SHADELESS_MAT",{type:"logic_negative_expr",places:1}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"textline",tokens:["m_","=","mZ","*","nb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["m_","=","eZ","*","nb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["nb","*=","mX",";"]}]}]},{type:"textline",tokens:["na","=","e_","*","u_environment_energy","*","dS","(","nd",")",";","ng","=","du","(","nb",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],statements:[{type:"textline",tokens:["ne","=","vec2","(","eI","[","0","]",",","eI","[","1","]",")",";"]},{type:"textline",tokens:["nf","=","vec2","(","eJ","[","1","]",",","eJ","[","2","]",")",";"]}]}]},{type:"textline",tokens:["eV","=","ng",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["m_","=","vec3","(","ZERO_VALUE_NODES",")",";","na","=","vec3","(","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATERIAL_END",declarations:[{type:"node_in",name:"nh",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"ni",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nk",qualifier:["float"],is_optional:true},{type:"node_in",name:"nl",qualifier:["float"],is_optional:true},{type:"node_in",name:"nm",qualifier:["float"],is_optional:true},{type:"node_out",name:"nn",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"no",qualifier:["float"],is_optional:true},{type:"node_out",name:"np",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nq",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nr",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"eK",qualifier:["float"],is_optional:false},{type:"node_param",name:"eL",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nn"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["nn","=","nh",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nn","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT","REFLECTION_TYPE","REFL_NONE",{type:"non_equal_expr",places:2},{type:"logical_and_expr",places:2}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["REFLECTION_TYPE","REFL_PLANE",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["dP","(","nn",",","eM",",","nj",",","nk",",","eN",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["dP","(","nn",",","eM",",","nj",",","nk",",","mat4","(","ZERO_VALUE_NODES",")",")",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["nn","+=","ni",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_np"],statements:[{type:"textline",tokens:["np","=","nj",";"]},{type:"textline",tokens:["np",".","yz","=","vec2","(","-","np",".","z",",","np",".","y",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nq"],statements:[{type:"textline",tokens:["nq","=","nh",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nr"],statements:[{type:"textline",tokens:["nr","=","ni",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_no"],statements:[{type:"textline",tokens:["no","=","clamp","(","nm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["fa","=","max","(","max","(","ni",".","r",",","ni",".","g",")",",","ni",".","b",")","*","nl",";","no","=","clamp","(","nm","*","(","UNITY_VALUE_NODES","-","fa",")","+","fa",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]}]},{type:"node_else",statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_no"],statements:[{type:"textline",tokens:["no","=","clamp","(","eK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["fa","=","max","(","max","(","ni",".","r",",","ni",".","g",")",",","ni",".","b",")","*","eL",";","no","=","eK","*","(","UNITY_VALUE_NODES","-","fa",")","+","fa",";"]}]}]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["eT","=","ni",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["eT","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["eU","=","nj",";"]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"ns",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nv",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"nw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nv","=","vec4","(","ns","+","nu","*","nt",",","ZERO_VALUE_NODES",")",";","nw","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"nx",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"ny",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nz",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nz","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["nB","=","eh",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["nB","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["nA","=","u_light_color_intensities","[","LAMP_IND","]",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_SHADOW_MAP_IND",1,{type:"negative_expr",places:1},{type:"non_equal_expr",places:2}],statements:[{type:"textline",tokens:["nA","*=","nx","[","LAMP_SHADOW_MAP_IND","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["fn","=","u_light_positions","[","LAMP_IND","]",";","ny","=","fn","-","fl",";"]},{type:"textline",tokens:["fa","=","length","(","ny",")",";","nA","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","fa","*","fa",")",";","ny","=","normalize","(","ny",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["fn","=","u_light_directions","[","LAMP_IND","]",";","fa","=","dot","(","ny",",","fn",")",";","fa","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","fa","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","nA","*=","fa",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["ny","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"nC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nD",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nF",qualifier:["float"],is_optional:false},{type:"node_in",name:"nG",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nH",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nH","=","ZERO_VALUE_NODES",";","if","(","nD",".","r","!=","ZERO_VALUE_NODES",")","{","fa","=","(","UNITY_VALUE_NODES","-","nF",")","*","dot","(","nE",",","nC",")","+","nF",";","if","(","nG","[","0","]","==","ZERO_VALUE_NODES",")","{","nH","=","UNITY_VALUE_NODES",";","}","else","{","fa","=","UNITY_VALUE_NODES","+","abs","(","fa",")",";","fa","=","nG","[","1","]","+","(","UNITY_VALUE_NODES","-","nG","[","1","]",")","*","pow","(","fa",",","nG","[","0","]",")",";","nH","=","clamp","(","fa",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","nH","=","max","(","nH",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"nI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nJ",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nL",qualifier:["float"],is_optional:false},{type:"node_out",name:"nM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nM","=","ZERO_VALUE_NODES",";","if","(","nJ",".","r","!=","ZERO_VALUE_NODES",")","{","fa","=","(","UNITY_VALUE_NODES","-","nL",")","*","dot","(","nK",",","nI",")","+","nL",";","nM","=","max","(","fa",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"nN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nO",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"nR",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nS","=","ZERO_VALUE_NODES",";","if","(","nO",".","r","!=","ZERO_VALUE_NODES",")","{","fa","=","(","UNITY_VALUE_NODES","-","nQ",")","*","dot","(","nP",",","nN",")","+","nQ",";","if","(","nR","[","0","]",">","ZERO_VALUE_NODES",")","{","fb","=","max","(","dot","(","nP",",","eM",")",",","ZERO_VALUE_NODES",")",";","fc","=","nR","[","0","]","*","nR","[","0","]",";","fd","=","UNITY_VALUE_NODES","-","eh","*","(","fc","/","(","fc","+","0.33",")",")",";","fn","=","nN","-","fa","*","nP",";","fp","=","eM","-","fb","*","nP",";"]},{type:"textline",tokens:["if","(","length","(","fn",")","==","ZERO_VALUE_NODES","||","length","(","fp",")","==","ZERO_VALUE_NODES","||","abs","(","fa",")",">","UNITY_VALUE_NODES","||","abs","(","fb",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["nS","=","fa","*","fd",";","else","{","fe","=","acos","(","fa",")",";","fb","=","acos","(","fb",")",";","fn","=","normalize","(","fn",")",";","fp","=","normalize","(","fp",")",";","ff","=","max","(","fe",",","fb",")",";","fg","=","min","(","fe",",","fb",")",";","fg","*=","0.95",";","fb","=","max","(","dot","(","fn",",","fp",")",",","ZERO_VALUE_NODES",")",";","fc","=","0.45","*","(","fc","/","(","fc","+","0.09",")",")",";","nS","=","fa","*","(","fd","+","(","fc","*","fb","*","sin","(","ff",")","*","tan","(","fg",")",")",")",";","}","}","else","nS","=","fa",";","nS","=","max","(","nS",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"nT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nU",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"nV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nW",qualifier:["float"],is_optional:false},{type:"node_in",name:"nX",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"nY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nY","=","ZERO_VALUE_NODES",";","if","(","nU",".","r","!=","ZERO_VALUE_NODES",")","{","fa","=","(","UNITY_VALUE_NODES","-","nW",")","*","dot","(","nV",",","nT",")","+","nW",";","fg","=","max","(","dot","(","nV",",","eM",")",",","ZERO_VALUE_NODES",")",";","if","(","nX","[","0","]","<=","UNITY_VALUE_NODES",")","nY","=","fa","*","pow","(","max","(","fg","*","fa",",","0.1",")",",","nX","[","0","]","-","UNITY_VALUE_NODES",")",";","else","nY","=","fa","*","pow","(","1.0001","-","fg",",","nX","[","0","]","-","UNITY_VALUE_NODES",")",";","nY","=","max","(","nY",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"nZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"n_",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"oa",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ob",qualifier:["float"],is_optional:false},{type:"node_in",name:"oc",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"od",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["od","=","ZERO_VALUE_NODES",";","if","(","n_",".","r","!=","ZERO_VALUE_NODES",")","{","fg","=","(","UNITY_VALUE_NODES","-","ob",")","*","dot","(","oa",",","nZ",")","+","ob",";","fg","=","acos","(","fg",")",";","if","(","fg","<","oc","[","0","]",")","od","=","UNITY_VALUE_NODES",";","else","if","(","fg",">","(","oc","[","0","]","+","oc","[","1","]",")","||","oc","[","1","]","==","ZERO_VALUE_NODES",")","od","=","ZERO_VALUE_NODES",";","else","od","=","UNITY_VALUE_NODES","-","(","(","fg","-","oc","[","0","]",")","/","oc","[","1","]",")",";","od","=","max","(","od",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"oe",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"of",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"og",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oh",qualifier:["float"],is_optional:false},{type:"node_in",name:"oi",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"oj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oj","=","ZERO_VALUE_NODES",";","if","(","of",".","g","==","UNITY_VALUE_NODES",")","{","fp","=","normalize","(","oe","+","eM",")",";","oj","=","(","UNITY_VALUE_NODES","-","oh",")","*","max","(","dot","(","og",",","fp",")",",","ZERO_VALUE_NODES",")","+","oh",";","oj","=","pow","(","oj",",","oi","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"ok",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ol",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"om",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"on",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"oo",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oo","=","ZERO_VALUE_NODES",";","if","(","ol",".","g","==","UNITY_VALUE_NODES",")","{","fp","=","normalize","(","ok","+","eM",")",";","fg","=","max","(","dot","(","om",",","fp",")",",","0.001",")",";"]},{type:"textline",tokens:["fa","=","max","(","dot","(","om",",","eM",")",",","0.01",")",";","ff","=","max","(","dot","(","om",",","ok",")",",","0.01",")",";","fg","=","tan","(","acos","(","fg",")",")",";","fb","=","max","(","on","[","0","]",",","0.001",")",";","oo","=","ff","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","fb","*","fb",")",")","*","(","exp","(","-","(","fg","*","fg",")","/","(","fb","*","fb",")",")","/","(","sqrt","(","fa","*","ff",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"op",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oq",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"or",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"os",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"ot",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ot","=","ZERO_VALUE_NODES",";","if","(","oq",".","g","==","UNITY_VALUE_NODES",")","{","fp","=","normalize","(","op","+","eM",")",";","ff","=","acos","(","dot","(","fp",",","or",")",")",";","if","(","ff","<","os","[","0","]",")","ot","=","UNITY_VALUE_NODES",";","else","if","(","ff",">=","os","[","0","]","+","os","[","1","]","||","os","[","1","]","==","ZERO_VALUE_NODES",")","ot","=","ZERO_VALUE_NODES",";","else","ot","=","UNITY_VALUE_NODES","-","(","ff","-","os","[","0","]",")","/","os","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"ou",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ov",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"ow",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ox",qualifier:["float"],is_optional:false},{type:"node_in",name:"oy",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"oz",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oz","=","ZERO_VALUE_NODES",";","if","(","ov",".","g","==","UNITY_VALUE_NODES",")","{","if","(","oy","[","0","]","<","UNITY_VALUE_NODES","||","oy","[","1","]","==","ZERO_VALUE_NODES",")","oz","=","ZERO_VALUE_NODES",";","else","{","if","(","oy","[","1","]","<","100.0",")","oy","[","1","]","=","sqrt","(","UNITY_VALUE_NODES","/","oy","[","1","]",")",";","else","oy","[","1","]","=","10.0","/","oy","[","1","]",";","fp","=","normalize","(","eM","+","ou",")",";","ff","=","(","UNITY_VALUE_NODES","-","ox",")","*","max","(","dot","(","ow",",","fp",")",",","ZERO_VALUE_NODES",")","+","ox",";","if","(","ff","<","ZERO_VALUE_NODES",")","oz","=","ZERO_VALUE_NODES",";","else","{","fa","=","max","(","dot","(","ow",",","eM",")",",","0.01",")",";","fb","=","dot","(","ow",",","ou",")",";","if","(","fb","<=","0.01",")","oz","=","ZERO_VALUE_NODES",";","else","{","fg","=","max","(","dot","(","eM",",","fp",")",",","0.01",")",";","fc","=","UNITY_VALUE_NODES",";","fa","=","(","2.0","*","ff","*","fa",")","/","fg",";","fb","=","(","2.0","*","ff","*","fb",")","/","fg",";","fb","=","min","(","min","(","fc",",","fa",")",",","fb",")",";","fa","=","sqrt","(","pow","(","oy","[","0","]",",","2.0",")","+","pow","(","fg",",","2.0",")","-","UNITY_VALUE_NODES",")",";","fg","=","pow","(","fa","-","fg",",","2.0",")","/","pow","(","fa","+","fg",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","fg","*","(","fa","+","fg",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","fg","*","(","fa","-","fg",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","ff","=","acos","(","ff",")",";","oz","=","max","(","fg","*","fb","*","exp","(","-","pow","(","ff",",","2.0",")","/","(","2.0","*","pow","(","oy","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"oA",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"oB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oC",qualifier:["float"],is_optional:false},{type:"node_in",name:"oD",qualifier:["float"],is_optional:false},{type:"node_in",name:"oE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oG",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"oH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oK",qualifier:["float"],is_optional:false},{type:"node_out",name:"oL",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"oM",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_NODE_B4W_TRANSLUCENCY"],statements:[{type:"textline",tokens:["if","(","dot","(","oE",",","oF",")","*","dot","(","eM",",","oF",")","<","ZERO_VALUE_NODES",")","{","ff","=","oG",".","x",";","fb","=","oG",".","y",";","fg","=","oG",".","z",";","fa","=","oG",".","w",";"]},{type:"textline",tokens:["fc","=","clamp","(","abs","(","dot","(","oE",",","oF",")",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fd","=","clamp","(","dot","(","eM",",","-","oE",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fb","=","pow","(","fd",",","fb",")",";"]},{type:"textline",tokens:["oL","=","oA","+","oK","*","vec4","(","oJ","*","fc","*","pow","(","oH",",","vec3","(","ff",")",")",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["oL","+=","fg","*","mix","(","vec4","(","oH",",","UNITY_VALUE_NODES",")",",","vec4","(","UNITY_VALUE_NODES",")",",","fa",")","*","oK","*","vec4","(","oJ","*","fc","*","vec3","(","fb",")",",","UNITY_VALUE_NODES",")",";","oM","=","oB",";","}","else","{"]},{type:"textline",tokens:["oM","=","oB","+","oJ","*","oI","*","oD",";","oL","=","oA","+","vec4","(","oJ","*","oH","*","oC",",","oD",")",";","}"]}]},{type:"node_else",statements:[{type:"textline",tokens:["oM","=","oB","+","oJ","*","oI","*","oD",";","oL","=","oA","+","vec4","(","oJ","*","oH","*","oC",",","oD",")",";"]}]}]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"oN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["oN","=","u_node_rgbs","[","RGB_IND","]",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"oO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oP","=","dot","(","oO",",","vec3","(","0.35",",","0.45",",","0.2",")",")",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"oQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oR",qualifier:["float"],is_optional:true},{type:"node_out",name:"oS",qualifier:["float"],is_optional:true},{type:"node_out",name:"oT",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oR"],statements:[{type:"textline",tokens:["oR","=","oQ",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oS"],statements:[{type:"textline",tokens:["oS","=","oQ",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oT"],statements:[{type:"textline",tokens:["oT","=","oQ",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"oU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oV",qualifier:["float"],is_optional:true},{type:"node_out",name:"oW",qualifier:["float"],is_optional:true},{type:"node_out",name:"oX",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["fp","=","eq","(","oU",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oV"],statements:[{type:"textline",tokens:["oV","=","fp",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oW"],statements:[{type:"textline",tokens:["oW","=","fp",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_oX"],statements:[{type:"textline",tokens:["oX","=","fp",".","b",";"]}]}]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"oY",qualifier:["float"],is_optional:false},{type:"node_in",name:"oZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"o_",qualifier:["float"],is_optional:false},{type:"node_out",name:"pa",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pa","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","oY","-","o_",")","*","oZ",")",")",";"]}]},{type:"node",name:"GAMMA",declarations:[{type:"node_in",name:"pb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pc",qualifier:["float"],is_optional:false},{type:"node_out",name:"pd",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pd","=","pb",";","if","(","pd",".","x",">","ZERO_VALUE_NODES",")","pd",".","x","=","pow","(","pb",".","x",",","pc",")",";","if","(","pd",".","y",">","ZERO_VALUE_NODES",")","pd",".","y","=","pow","(","pb",".","y",",","pc",")",";","if","(","pd",".","z",">","ZERO_VALUE_NODES",")","pd",".","z","=","pow","(","pb",".","z",",","pc",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"pe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pf",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pf","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","pe",")",";","pf","=","pow","(","pf",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"pg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ph",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ph","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","pg",")",";","ph","=","pow","(","ph",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_EMPTY",declarations:[{type:"node_out",name:"pi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pk",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pi"],statements:[{type:"textline",tokens:["pi","[","2","]","=","pi","[","1","]","=","pi","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pj"],statements:[{type:"textline",tokens:["pj","[","2","]","=","pj","[","1","]","=","pj","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pk"],statements:[{type:"textline",tokens:["pk","=","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"pl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pm",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pn",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"],is_optional:false}],statements:[{type:"textline",tokens:["fp","=","vec3","(","pl",".","x",",","pl",".","z",",","-","pl",".","y",")",";","fi","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","fp",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pm"],statements:[{type:"textline",tokens:["pm","=","fi",".","xyz",";","br","(","pm",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pn"],statements:[{type:"textline",tokens:["pn","=","fi",".","w",";"]}]}]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"po",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pp",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pq",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pr",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"ps",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pt",qualifier:["float"],is_optional:true},{type:"node_out",name:"pu",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pv",qualifier:["float"],is_optional:true},{type:"node_out",name:"pw",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"px",qualifier:["float"],is_optional:true},{type:"node_out",name:"py",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pz",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["fi","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","po",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ps"],statements:[{type:"textline",tokens:["ps","=","fi",".","xyz",";","br","(","ps",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pt"],statements:[{type:"textline",tokens:["pt","=","fi",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["fi","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pp",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pu"],statements:[{type:"textline",tokens:["pu","=","fi",".","xyz",";","br","(","pu",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pv"],statements:[{type:"textline",tokens:["pv","=","fi",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["fi","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pq",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pw"],statements:[{type:"textline",tokens:["pw","=","fi",".","xyz",";","br","(","pw",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_px"],statements:[{type:"textline",tokens:["px","=","fi",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["fi","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ey","(","pr",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_py"],statements:[{type:"textline",tokens:["py","=","fi",".","xyz",";","br","(","py",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pz"],statements:[{type:"textline",tokens:["pz","=","fi",".","w",";"]}]}]}]}]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"pA",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pB",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pC",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pD",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pE",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pF",qualifier:["float"],is_optional:true},{type:"node_out",name:"pG",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pH",qualifier:["float"],is_optional:true},{type:"node_out",name:"pI",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pJ",qualifier:["float"],is_optional:true},{type:"node_out",name:"pK",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pL",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["fi","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","pA",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pE"],statements:[{type:"textline",tokens:["pE","=","normalize","(","fj","*","(","fi",".","xyz","-","eh",")",")",";"]},{type:"textline",tokens:["pE",".","yz","=","vec2","(","-","pE",".","z",",","pE",".","y",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pF"],statements:[{type:"textline",tokens:["pF","=","fi",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["fi","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","pB",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pG"],statements:[{type:"textline",tokens:["pG","=","normalize","(","fj","*","(","fi",".","xyz","-","eh",")",")",";"]},{type:"textline",tokens:["pG",".","yz","=","vec2","(","-","pG",".","z",",","pG",".","y",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pH"],statements:[{type:"textline",tokens:["pH","=","fi",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["fi","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","pC",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pI"],statements:[{type:"textline",tokens:["pI","=","normalize","(","fj","*","(","fi",".","xyz","-","eh",")",")",";"]},{type:"textline",tokens:["pI",".","yz","=","vec2","(","-","pI",".","z",",","pI",".","y",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pJ"],statements:[{type:"textline",tokens:["pJ","=","fi",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["fi","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ey","(","pD",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pK"],statements:[{type:"textline",tokens:["pK","=","normalize","(","fj","*","(","fi",".","xyz","-","eh",")",")",";"]},{type:"textline",tokens:["pK",".","yz","=","vec2","(","-","pK",".","z",",","pK",".","y",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pL"],statements:[{type:"textline",tokens:["pL","=","fi",".","w",";"]}]}]}]}]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"pM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pM","=","u_node_values","[","VALUE_IND","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"pN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pQ",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pP","=","pN","+","pO",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pQ"],statements:[{type:"textline",tokens:["pQ","=","(","abs","(","pP","[","0","]",")","+","abs","(","pP","[","1","]",")","+","abs","(","pP","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"pR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pU",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pT","=","pR","-","pS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pU"],statements:[{type:"textline",tokens:["pU","=","(","abs","(","pT","[","0","]",")","+","abs","(","pT","[","1","]",")","+","abs","(","pT","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"pV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pY",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["pX","=","pV","+","pW",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pY"],statements:[{type:"textline",tokens:["pY","=","length","(","pX",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pX"],statements:[{type:"textline",tokens:["pX","=","normalize","(","pX",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"pZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"p_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qb",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qa","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qb"],statements:[{type:"textline",tokens:["qb","=","dot","(","pZ",",","p_",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"qc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qf",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qe","=","cross","(","qc",",","qd",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qf"],statements:[{type:"textline",tokens:["qf","=","length","(","qe",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"qg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qj",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qi","=","normalize","(","qg",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qj"],statements:[{type:"textline",tokens:["qj","=","length","(","qg",")",";"]}]}]},{type:"textline",tokens:["qh",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"qk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ql",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qm","=","reflect","(","(","eP","*","vec4","(","qk",",","0.0",")",")",".","xyz",",","ql",")",";"]}]},{type:"node",name:"B4W_REFLECT_WORLD",declarations:[{type:"node_in",name:"qn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qo",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["fp","=","vec3","(","-","eM",".","x",",","eM",".","z",",","-","eM",".","y",")",";","qo","=","reflect","(","fp",",","qn",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"qp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qq",qualifier:["float"],is_optional:false},{type:"node_in",name:"qr",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"qs",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"qt",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["fb","=","length","(","fh",")",";","if","(","fb","<","qs",")","{","eX","=","ey","(","qp",")",";","fb","=","clamp","(","eh","*","(","qs","-","fb",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","fb","=","qq","*","fb",";"]},{type:"textline",tokens:["fp","=","normalize","(","eM","*","fj",")",";"]},{type:"textline",tokens:["fc","=","UNITY_VALUE_NODES","/","qr",";"]},{type:"textline",tokens:["eY","=","fp",".","xy","*","fb","/","(","qr","*","fp",".","z",")",";","fb","=","UNITY_VALUE_NODES",";","fa","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eX",")",".","a",";"]},{type:"textline",tokens:["for","(","float","qu","=","1.0",";","qu","<=","qr",";","qu","++",")","{","if","(","fa","<","fb",")","{","fb","-=","fc",";","eX","-=","eY",";","fa","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eX",")",".","a",";","}","}"]},{type:"textline",tokens:["eY","=","eX","+","eY",";","fc","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","eY",")",".","a","-","(","fb","+","fc",")",";","fb","=","fa","-","fb",";","fc","=","fb","/","(","fb","-","fc",")",";"]},{type:"textline",tokens:["eX","=","fc","*","eY","+","(","UNITY_VALUE_NODES","-","fc",")","*","eX",";","qt","=","ew","(","eX",")",";","}","else","qt","=","qp",";"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"qv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qw","=","clamp","(","qv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"qx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qy",qualifier:["float"],is_optional:false},{type:"node_out",name:"qz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qz","=","el","(","qx",",","qy",")",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"qA",qualifier:["float"],is_optional:false},{type:"node_in",name:"qB",qualifier:["float"],is_optional:false},{type:"node_in",name:"qC",qualifier:["float"],is_optional:false},{type:"node_in",name:"qD",qualifier:["float"],is_optional:false},{type:"node_in",name:"qE",qualifier:["float"],is_optional:false},{type:"node_out",name:"qF",qualifier:["float"],is_optional:true},{type:"node_out",name:"qG",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qF"],statements:[{type:"textline",tokens:["qF","=","qA",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qG"],statements:[{type:"textline",tokens:["qG","=","vec4","(","qB",",","qC",",","qD",",","qE",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"qH",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qH","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"qI",qualifier:["float"],is_optional:false},{type:"node_in",name:"qJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"qK",qualifier:["float"],is_optional:false},{type:"node_out",name:"qL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qL","=","smoothstep","(","qJ",",","qK",",","qI",")",";"]}]},{type:"node",name:"B4W_GLOW_OUTPUT",declarations:[{type:"node_in",name:"qM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qN",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["eS","=","qM",";","eW","=","qN",";"]}]},{type:"node",name:"B4W_VECTOSCAL",declarations:[{type:"node_in",name:"qO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qP","=","(","qO",".","r","+","qO",".","g","+","qO",".","b",")","/","3.0",";"]}]},{type:"node",name:"B4W_SCALTOVEC",declarations:[{type:"node_in",name:"qQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"qR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qR","[","0","]","=","qQ",";","qR","[","1","]","=","qQ",";","qR","[","2","]","=","qQ",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","qS","(","in","vec3","eM",",","in","mat4","eN",",","in","mat4","eO",",","in","mat4","eP",",","in","mat4","eQ",",","in","mat4","eR",",","out","vec3","eS",",","out","vec3","eT",",","out","vec3","eU",",","out","vec4","eV",",","out","float","eW",")","{","vec2","eX",",","eY",";","float","eZ",",","e_",",","fa",",","fb",",","fc",",","fd",",","fe",",","ff",",","fg",";","vec4","fh",",","fi",";","mat3","fj",";","vec3","fk",",","fl",",","fm",",","fn",",","fo",",","fp",";","eS","=","vec3","(","ZERO_VALUE_NODES",")",";","eT","=","vec3","(","ZERO_VALUE_NODES",")",";","eU","=","vec3","(","ZERO_VALUE_NODES",")",";","eV","=","vec4","(","ZERO_VALUE_NODES",")",";","eW","=","ZERO_VALUE_NODES",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["fk","=","normalize","(","bE",")",";","fl","=","fk",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["INVERT_FRONTFACING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")"]}]}}]},{type:"textline",tokens:["fl","=","fl",";","else","fl","=","-","fl",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["fm","=","fl",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fm","=","fk",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["fk","=","fl",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["fn","=","cross","(","fl",",","bF",".","xyz",")","*","bF",".","w",";","fj","=","mat3","(","bF",".","xyz",",","fn",",","fl",")",";","fj","=","fj",";"]}]}}]},{type:"textline",tokens:["fl","=","bC",";","fh","=","bD",";","eZ","=","u_emit",";","e_","=","u_ambient",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","qT","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","qZ","(","vec3","qU",",","mat4","qV",")","{","vec3","qW",",","qX",",","qY",";","qW","=","vec3","(","qV","[","0","]","[","0","]",",","qV","[","1","]","[","0","]",",","qV","[","2","]","[","0","]",")",";","qX","=","vec3","(","qV","[","0","]","[","1","]",",","qV","[","1","]","[","1","]",",","qV","[","2","]","[","1","]",")",";","qY","=","vec3","(","qV","[","0","]","[","2","]",",","qV","[","1","]","[","2","]",",","qV","[","2","]","[","2","]",")",";","qX","=","cross","(","qY",",","qW",")",";","return","mat4","(","vec4","(","qW",",","0.0",")",",","vec4","(","qX",",","0.0",")",",","vec4","(","qY",",","0.0",")",",","vec4","(","qU",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","re","(","vec3","q_",",","vec3","ra",")","{","vec3","rb",",","rc",",","rd",";","rb","=","q_","-","ra",";","rb",".","y","=","0.0",";","rb","=","normalize","(","rb",")",";","rc","=","normalize","(","cross","(","qT",",","rb",")",")",";","rd","=","normalize","(","cross","(","rb",",","rc",")",")",";","return","mat4","(","vec4","(","rc",",","0.0",")",",","vec4","(","rd",",","0.0",")",",","vec4","(","rb",",","0.0",")",",","vec4","(","ra",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","rm","(","in","vec3","rf",",","float","rg",",","float","rh",",","float","ri",",","vec3","rj",")","{","float","rk",",","rl",";","rk","=","fract","(","length","(","rj",")","/","0.17",")",";","rl","=","ri","+","rk","/","10.0",";","rk","=","rk",";","if","(","ri","!=","0.0",")","rk","/=","ri",";","rf","*=","1.0","+","0.5","*","sin","(","rg",")",";","rk","=","length","(","rf",")","*","rh","*","sin","(","2.0","*","3.14","*","rg","*","rl","+","rk",")",";","return","C","(","rk",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","ru","(","in","vec3","rn",",","in","vec3","ro",",","in","mat4","rp",")","{","vec3","rq",";","float","rr",",","rs",";","mat4","rt",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","BILLBOARD",{type:"logic_negative_expr",places:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{type:"equal_expr",places:2},{type:"logical_and_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["rt","=","qZ","(","ro",",","rp",")",";"]}]}},{type:"elif",expression:["BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["rr","=","fract","(","(","ro",".","x","*","1.43","+","ro",".","y","*","0.123","+","ro",".","z","*","6.1",")",")",";","rr","=","2.0","*","M_PI","*","rr",";","rq","=","normalize","(","vec3","(","rp","[","0","]","[","2","]",",","0.0",",","rp","[","2","]","[","2","]",")",")",";","rs","=","acos","(","rq","[","2","]",")",";","if","(","rq","[","0","]","<","0.0",")","rs","=","2.0","*","M_PI","-","rs",";","rs","=","rs","-","rr",";","if","(","rs","<","0.0",")","rs","=","2.0","*","M_PI","+","rs",";","rr","=","rr",";","if","(","rs","<=","MAX_BILLBOARD_ANGLE",")","rr","+=","rs",";","else","if","(","rs","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","rr","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","rs","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","rs","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","rr","+=","rs","-","M_PI",";","else","if","(","rs","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","rr","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","rs","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","rr","+=","rs","-","2.0","*","M_PI",";","rt","=","A","(","rr",")",";","rt","[","3","]","=","vec4","(","ro",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["rt","=","re","(","rn",",","ro",")",";"]}]}}]},{type:"textline",tokens:["return","rt",";","}"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["mat4","rA","(","in","vec3","rv",",","in","vec3","rw",",","in","mat4","rx",",","mat4","ry",")","{","mat4","rz",";","rz","=","ru","(","rv",",","rw",",","rx",")",";","ry","[","3","]","=","vec4","(","0.0",",","0.0",",","0.0",",","1.0",")",";","rz","=","rz","*","ry",";","return","rz",";","}"]}]}}]},{type:"textline",tokens:["c","rH","(","in","vec3","rB",",","in","vec3","rC",",","in","vec3","rD",",","in","vec3","rE",",","in","vec3","rF",",","in","mat4","rG",")","{","rB","=","(","rG","*","vec4","(","rB",",","1.0",")",")",".","xyz",";","rC","=","(","rG","*","vec4","(","rC",",","1.0",")",")",".","xyz",";","rD","=","(","rG","*","vec4","(","rD",",","0.0",")",")",".","xyz",";","rE","=","(","rG","*","vec4","(","rE",",","0.0",")",")",".","xyz",";","rF","=","(","rG","*","vec4","(","rF",",","0.0",")",")",".","xyz",";","return","E","(","c","(","rB",",","rC",",","rD",",","rE",",","rF",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","rK","(","vec2","rI",",","vec3","rJ",")","{","return","(","rI","+","0.5",")","*","rJ",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","rR","(","in","vec4","rL",",","in","vec4","rM",",","in","float","rN",")","{","float","rO",",","rP",",","rQ",";","rO","=","rL","[","0","]","*","rM","[","0","]","+","rL","[","1","]","*","rM","[","1","]","+","rL","[","2","]","*","rM","[","2","]","+","rL","[","3","]","*","rM","[","3","]",";","if","(","rO","<","0.0",")","{","rM","*=","-","1.0",";","rO","=","-","rO",";","}","if","(","abs","(","rO",")",">=","1.0",")","return","rL",";","rP","=","acos","(","rO",")",";","rO","=","sqrt","(","1.0","-","rO","*","rO",")",";","if","(","abs","(","rO",")","<","0.001",")","return","vec4","(","rL","*","0.5","+","rM","*","0.5",")",";","rQ","=","sin","(","(","1.0","-","rN",")","*","rP",")","/","rO",";","rO","=","sin","(","rN","*","rP",")","/","rO",";","return","rL","*","rQ","+","rM","*","rO",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","sc","(","in","vec3","rS",",","in","vec4","rT",",","in","vec4","rU",",","in","vec4","rV",",","in","vec4","rW",",","in","float","rX",")","{","vec4","rY",",","rZ",";","vec3","r_",",","sa",",","sb",";","r_","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","rS",",","1.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["rY","=","rR","(","rT",",","rU",",","rX",")",";","rZ","=","mix","(","rV",",","rW",",","rX",")",";","sa","=","i","(","rY",",","r_",")",";","sa","=","sa","*","rZ",".","w","+","rZ",".","xyz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sb","=","i","(","rT",",","r_",")",";","r_","=","i","(","rU",",","r_",")",";","sb","=","sb","*","rV",".","w","+","rV",".","xyz",";","r_","=","r_","*","rW",".","w","+","rW",".","xyz",";","sa","=","mix","(","sb",",","r_",",","rX",")",";"]}]}}]},{type:"textline",tokens:["return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sa",",","1.0",")",")",";","}","vec3","sl","(","in","vec3","sd",",","in","vec4","se",",","in","vec4","sf",",","in","float","sg",")","{","vec4","sh",";","vec3","si",",","sj",",","sk",";","si","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sd",",","0.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["sh","=","rR","(","se",",","sf",",","sg",")",";","sj","=","i","(","sh",",","si",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sk","=","i","(","se",",","si",")",";","si","=","i","(","sf",",","si",")",";","sj","=","mix","(","sk",",","si",",","sg",")",";"]}]}}]},{type:"textline",tokens:["return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sj",",","0.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","sc","(","in","vec3","sm",",","in","vec4","sn",",","in","vec4","so",")","{","vec3","sp",";","sp","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sm",",","1.0",")",")",";","sp","=","i","(","sn",",","sp",")",";","sp","=","sp","*","so",".","w","+","so",".","xyz",";","return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sp",",","1.0",")",")",";","}","vec3","sl","(","in","vec3","sq",",","in","vec4","sr",")","{","vec3","ss",";","ss","=","p","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","sq",",","0.0",")",")",";","ss","=","i","(","sr",",","ss",")",";","return","v","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","ss",",","0.0",")",")",";","}"]}]}}]},{type:"textline",tokens:["void","sH","(","inout","vec3","st",",","inout","vec3","su",",","inout","vec3","sv",",","inout","vec3","sw",")","{","int","sx",",","sy",";","vec4","sz",";","vec3","sA",",","sB",",","sC",",","sD",";","float","sE",",","sF",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sE","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","sA","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sB","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sC","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sD","=","vec3","(","0.0",",","0.0",",","0.0",")",";","sz","=","a_influence",";","for","(","int","sG","=","0",";","sG","<","4",";","sG","++",")","{","sx","=","int","(","sz","[","sG","]",")",";","sF","=","fract","(","sz","[","sG","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["sA","+=","sF","*","sc","(","st",",","u_quatsb","[","sx","]",",","u_quatsa","[","sx","]",",","u_transb","[","sx","]",",","u_transa","[","sx","]",",","sE",")",";","sB","+=","sF","*","sl","(","su",",","u_quatsb","[","sx","]",",","u_quatsa","[","sx","]",",","sE",")",";","sC","+=","sF","*","sl","(","sv",",","u_quatsb","[","sx","]",",","u_quatsa","[","sx","]",",","sE",")",";","sD","+=","sF","*","sl","(","sw",",","u_quatsb","[","sx","]",",","u_quatsa","[","sx","]",",","sE",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sA","+=","sF","*","sc","(","st",",","u_quatsb","[","sx","]",",","u_transb","[","sx","]",")",";","sD","+=","sF","*","sl","(","sw",",","u_quatsb","[","sx","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["sB","+=","sF","*","sl","(","su",",","u_quatsb","[","sx","]",")",";","sC","+=","sF","*","sl","(","sv",",","u_quatsb","[","sx","]",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","st","=","sA",";","sw","=","sD",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["su","=","sB",";","sv","=","sC",";"]}]}}]},{type:"textline",tokens:["}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","sy","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","sy",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["st","=","sc","(","st",",","u_quatsb","[","sy","]",",","u_quatsa","[","sy","]",",","u_transb","[","sy","]",",","u_transa","[","sy","]",",","sE",")",";","su","=","sl","(","su",",","u_quatsb","[","sy","]",",","u_quatsa","[","sy","]",",","sE",")",";","sv","=","sl","(","sv",",","u_quatsb","[","sy","]",",","u_quatsa","[","sy","]",",","sE",")",";","sw","=","sl","(","sw",",","u_quatsb","[","sy","]",",","u_quatsa","[","sy","]",",","sE",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["st","=","sc","(","st",",","u_quatsb","[","sy","]",",","u_transb","[","sy","]",")",";","sw","=","sl","(","sw",",","u_quatsb","[","sy","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["DISABLE_TANGENT_SKINNING",{type:"logic_negative_expr",places:1}],group:{type:"group",parts:[{type:"textline",tokens:["su","=","sl","(","su",",","u_quatsb","[","sy","]",")",";","sv","=","sl","(","sv",",","u_quatsb","[","sy","]",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","sS","(","inout","vec3","sI",",","in","vec3","sJ",",","in","float","sK",",","in","float","sL",",","in","float","sM",",","in","vec3","sN",",","in","float","sO",")","{","vec3","sP",";","float","sQ",",","sR",";","sQ","=","length","(","sJ",")",";","sR","=","sL","*","(","1.0","+","0.1","*","fract","(","sQ",")",")",";","sQ","=","sK","*","sO","*","(","1.0","+","sin","(","2.0","*","3.14","*","sM","*","sR","+","sQ",")",")",";","sR","=","(","sI",".","y","-","sJ",".","y",")","*","abs","(","sQ",")",";","sR","+=","1.0",";","sR","*=","sR",";","sR","=","sR","*","sR","-","sR",";","sP","=","sI",";","sP",".","xz","+=","sN",".","xz","*","sR","*","sign","(","sQ",")",";","sP","=","sP","-","sJ",";","if","(","all","(","equal","(","sP",",","vec3","(","0.0",")",")",")",")","sI","=","sJ",";","else","{","sQ","=","length","(","sI","-","sJ",")",";","sI","=","sJ","+","normalize","(","sP",")","*","sQ",";","}","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","sU","(","vec4","sT",")","{","return","sT","*","sT","*","(","3.0","-","2.0","*","sT",")",";","}","vec4","sW","(","vec4","sV",")","{","return","abs","(","fract","(","sV","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","sY","(","vec4","sX",")","{","return","sU","(","sW","(","sX",")",")",";","}","void","to","(","inout","vec3","sZ",",","in","float","s_",",","in","vec3","ta",",","in","vec3","tb",",","in","vec3","tc",",","in","float","td",",","in","float","te",",","in","float","tf",",","in","vec3","tg",")","{","vec3","th",";","vec4","ti",";","vec2","tj",",","tk",";","float","tl",",","tm",",","tn",";","tl","=","dot","(","tc",",","vec3","(","1.0",")",")",";","tm","=","tl","+","tg",".","g",";","tn","=","dot","(","sZ",",","vec3","(","tg",".","g",")",")",";","tj","=","(","s_","+","vec2","(","tn",",","tm",")",")",";","ti","=","(","(","fract","(","(","tj",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","tb",")","*","td",";","ti","=","sY","(","ti",")",";","tk","=","ti",".","xz","+","ti",".","yw",";","tk",".","y","=","0.5","-","tk",".","y",";","th","=","tk",".","xyx","*","tg",".","rbr","*","vec3","(","te","*","ta",".","x",",","tf",",","te","*","ta",".","z",")",";","sZ","+=","th",";","}"]}]}}]},{type:"textline",tokens:["void","tv","(","inout","vec3","tp",",","inout","vec3","tq",",","in","vec3","tr",")","{","vec3","ts",",","tt",",","tu",";","ts","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["tt","=","tq",";","tu","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tt","=","tp",";","tu","=","tq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["to","(","tt",",","u_time",",","tr",",","ts",",","tu",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["sS","(","tt",",","tu",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","ts",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["sS","(","tt",",","tu",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","ts",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["tp","+=","tt","-","tq",";","tq","=","tt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["tp","=","tt",";","tq","=","tu",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/nodes.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2},"PARTICLE_BATCH",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_orco_tex_coord",";","varying","vec3","eg",";"]}]}}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_param",name:"node_TEX_COORD_UV_var_a_uv",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"eG",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["eG","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_param",name:"node_UV_MERGED_var_a_uv",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"eF",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["eF","=","node_UV_MERGED_var_a_uv",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_param",name:"node_UVMAP_var_a_uv",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"eH",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["eH","=","node_UVMAP_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"ez",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["ez","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"],is_optional:false},{type:"node_param",name:"tw",qualifier:["varying","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["tw","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"],is_optional:false},{type:"node_param",name:"tx",qualifier:["varying","float"],is_optional:false}],statements:[{type:"textline",tokens:["tx","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"],is_optional:false},{type:"node_param",name:"ty",qualifier:["varying","vec2"],is_optional:false}],statements:[{type:"textline",tokens:["ty","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"],is_optional:false},{type:"node_param",name:"tz",qualifier:["varying","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["tz","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","tA","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["eg","=","a_orco_tex_coord",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","tG","(","vec3","tC",",","float","tD",",","vec2","tE",")","{","vec2","tF",";","tF","=","vec2","(","(","tC",".","x","-","tE",".","x",")","/","tD",",","-","(","tC",".","z","-","tE",".","y",")","/","tD",")",";","return","fract","(","tF",")",";","}","vec2","tK","(","vec2","tH",",","float","tI",",","vec2","tJ",")","{","return","vec2","(","tH",".","x","*","tI",",","-","tH",".","y","*","tI",")","+","tJ",";","}","c","tL","(",")","{","return","c","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","c","ug","(","vec3","tM",",","vec3","tN",",","vec3","tO",",","vec3","tP",",","vec3","tQ",",","PRECISION","sampler2D","tR",",","sampler2D","tS",",","vec3","tT",",","float","tU",",","vec3","tV",",","vec4","tW",",","mat4","tX",")","{","mat4","tY",";","vec4","tZ",";","vec2","t_",",","ua",",","ub",";","float","uc",",","ud",";","vec3","ue",";","ue","=","i","(","tW",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","uc","=","-","ue",".","x",";","ud","=","-","ue",".","z",";","t_","=","vec2","(","tV",".","x","+","tU","*","(","-","1.0","-","uc",")","/","2.0",",","tV",".","z","+","tU","*","(","1.0","-","ud",")","/","2.0",")",";","ua","=","tG","(","tQ",",","tU",",","t_",")",";","ud","=","tU","/","2.0",";","ub","=","abs","(","tK","(","ua","-","vec2","(","0.5",")",",","tU",",","vec2","(","0.0",")",")",")",";","ud","=","ud","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","ub",")",">","ud",")","return","tL","(",")",";","ud","=","tU","/","tT",".","z",";","ub","=","(","ua","-","vec2","(","0.5",")",")","*","ud","+","vec2","(","0.5",")",";","ue","=","ue","*","(","tU","/","tT",".","z","-","1.0",")","/","2.0",";","ub",".","x","+=","ue",".","x",";","ub",".","y","-=","ue",".","z",";","tZ","=","texture2D","(","tS",",","ub",")",";","ud","=","tZ",".","r",";","if","(","ud","<","u_scale_threshold",")","return","tL","(",")",";","uc","=","tT",".","y","-","tT",".","x",";","uc","=","tT",".","y","-","texture2D","(","tR",",","ub",")",".","r","*","uc",";","ub","=","tM",".","xz","-","tQ",".","xz",";","tQ",".","xz","=","tK","(","ua",",","tU",",","t_",")",";","tQ",".","y","=","uc",";","tM",".","xz","=","tQ",".","xz","+","ub",";","tM",".","y","*=","ud",";","tM",".","y","+=","uc",";","ue","=","tZ",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["tM","-=","tQ",";","tY","=","ru","(","tV",",","tQ",",","tX",")",";","c","uf","=","rH","(","tM",",","tQ",",","tN",",","tO",",","tP",",","tY",")",";","uf",".","b","=","tQ",";","uf",".","f","=","ue",";","return","E","(","uf",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","E","(","c","(","tM",",","tQ",",","tN",",","tO",",","tP",",","ue",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/halo_color.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","NUM_LINES",{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["const","int","uk","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","uk","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","um","(","float","ul",")","{","return","ul","-","floor","(","ul","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","uv","(","inout","float","un",",","in","float","uo","[","uk","]",",","in","float","up",")","{","float","uq",",","ur",",","us",",","ut",";","for","(","int","uu","=","0",";","uu","<","NUM_RINGS",";","uu","++",")","{","uq","=","40.0","*","uo","[","uu","]",";","ur","=","300.0","*","(","um","(","uq",")","-","0.005",")",";","us","=","uq",";","ut","=","abs","(","us","*","(","u_halo_size","*","ur","-","up",")",")",";","un","+=","1.0","-","min","(","ut",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","uE","(","inout","float","uw",",","in","float","ux","[","uk","]",",","in","float","uy",")","{","float","uz",",","uA",",","uB",",","uC",";","for","(","int","uD","=","0",";","uD","<","NUM_LINES",";","uD","++",")","{","uz","=","ux","[","uD","]",";","uA","=","uz",";","uB","=","1000.0","*","(","um","(","uz",")","-","0.005",")",";","uC","=","20.0","*","abs","(","uA","*","bM",".","x","+","uB","*","bM",".","y",")",";","uw","+=","1.0","-","min","(","uC",",","1.0",")",";","}","uw","*=","uy",";","}"]}]}}]},{type:"textline",tokens:["void","uL","(","inout","float","uF",",","in","vec2","uG",")","{","float","uH",",","uI",",","uJ",",","uK",";","uI","=","atan","(","uG",".","y",",","uG",".","x",")",";","uI","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","uJ","=","cos","(","uI",")",";","uK","=","sin","(","uI",")",";","uI","=","(","uJ","*","uG",".","x","+","uK","*","uG",".","y",")","*","(","uJ","*","uG",".","y","-","uK","*","uG",".","x",")",";","uH","=","abs","(","uI",")",";","if","(","uH","<","1.0",")","{","uH","=","(","0.01","*","u_halo_size",")","/","(","uH",")",";","uF","*=","sqrt","(","min","(","uH",",","1.0",")",")",";","}","}","vec4","uU","(",")","{","vec4","uM",";","vec3","uN",";","float","uO",",","uP",",","uQ",",","uR",";","uO","=","(","bM",".","x","*","bM",".","x","+","bM",".","y","*","bM",".","y",")",";","uP","=","sqrt","(","uO",")",";","uO","=","max","(","1.0","-","uO",",","0.0",")",";","uO","=","pow","(","uO",",","u_halo_hardness",")",";","uQ","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","NUM_LINES",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["float","uS","[","uk","]",";","for","(","int","uT","=","0",";","uT","<","uk",";","uT","++",")","{","uS","[","uT","]","=","fract","(","uj","/","float","(","uT","+","1",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["uR","=","0.0",";","uv","(","uR",",","uS",",","uP",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["uP","=","0.0",";","uE","(","uP",",","uS",",","uO",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uL","(","uO",",","bM",")",";"]}]}}]},{type:"textline",tokens:["uO","*=","uQ",";","uN","=","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["uR","*=","uO",";","uN","+=","u_halo_rings_color","*","uR",";","uO","+=","uR",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["uP","*=","uQ",";","uN","+=","u_halo_lines_color","*","uP",";","uO","+=","uP",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uO","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","DISABLE_FOG",{type:"logic_negative_expr",places:1},{type:"logical_and_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uP","=","u_halo_stars_blend","*","(","ui",".","y","-","u_halo_stars_height",")",";","uO","*=","clamp","(","uP",",","0.0",",","1.0",")",";","uO","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["uM","=","vec4","(","uN",",","uO",")",";","return","uM",";","}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["void","va","(","inout","vec3","uV",",","in","float","uW",",","in","float","uX",",","in","vec4","uY",")","{","float","uZ",",","u_",";","uZ","=","clamp","(","(","uW","-","u_fog_params",".","z",")","/","u_fog_params",".","y",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOG_TYPE","QUADRATIC",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uZ","*=","uZ",";"]}]}},{type:"elif",expression:["FOG_TYPE","LINEAR",{type:"equal_expr",places:2}],group:{type:"group",parts:[]}},{type:"elif",expression:["FOG_TYPE","INVERSE_QUADRATIC",{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["uZ","=","sqrt","(","uZ",")",";"]}]}}]},{type:"textline",tokens:["if","(","u_fog_params",".","w",">","0.0",")","{","if","(","uX",">","u_fog_params",".","w",")","uZ","=","0.0",";","else","{","u_","=","(","u_fog_params",".","w","-","max","(","uX",",","0.0",")",")","/","u_fog_params",".","w",";","uZ","*=","u_","*","u_",";","}","}","uY",".","a","=","1.0","-","(","1.0","-","uZ",")","*","(","1.0","-","u_fog_params",".","x",")",";","uV","=","mix","(","uV",",","uY",".","rgb",",","uY",".","a",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","vg","(","in","mat4","vb",",","in","vec3","vc",")","{","vec3","vd",",","ve",",","vf",";","vd","=","mix","(","vb","[","0","]",".","rgb",",","vb","[","1","]",".","rgb",",","max","(","sign","(","vc",".","x",")",",","0.0",")",")",";","ve","=","mix","(","vb","[","2","]",".","rgb",",","vb","[","3","]",".","rgb",",","max","(","sign","(","vc",".","z",")",",","0.0",")",")",";","vf","=","vec3","(","vb","[","0","]",".","a",",","vb","[","1","]",".","a",",","vb","[","2","]",".","a",")",";","ve","=","mix","(","vd",",","ve",",","abs","(","vc",".","z",")",")",";","ve","=","mix","(","ve",",","vf",",","abs","(","vc",".","y",")",")",";","br","(","ve",")",";","return","ve",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","vi","(","inout","float","vh",")","{","vh","-=","0.5",";","vh","=","4.0","*","(","vh","*","vh","*","vh",")","+","0.5",";","}"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","vt","(","inout","vec3","vj",",","in","float","vk",",","in","vec3","vl",",","in","float","vm",",","in","vec4","vn",",","in","float","vo",")","{","vec3","vp",",","vq",";","float","vr",",","vs",";","vr","=","max","(","vl",".","y",",","0.0",")",";","vs","=","max","(","vk","-","max","(","vm","/","vr",",","0.0",")",",","0.0",")",";","vs","=","vn",".","w","*","vs",";","vp","=","vec3","(","0.0",",","0.02",",","0.05",")",";","vq","=","vn",".","rgb",";","vs","=","min","(","vs",",","1.0",")",";","vi","(","vs",")",";","vs","*=","clamp","(","2.0","-","vo",",","0.0",",","1.0",")",";","vp","=","mix","(","vq",",","vp",",","min","(","vr",",","1.0",")",")",";","vm","=","clamp","(","-","vm","*","0.03",",","0.0",",","0.8",")",";","vp","*=","1.0","-","vm",";","vj","=","mix","(","vj",",","vp",",","vs",")",";","}"]}]}}]}]}}]},{type:"textline",tokens:["void","vA","(","inout","vec3","vu",",","float","vv",",","vec3","vw",",","float","vx",")","{","vec4","vy",";","vec3","vz",";"]},{type:"condition",parts:[{type:"if",expression:["USE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vz","=","vg","(","u_cube_fog",",","vw",")",";","vy","=","vec4","(","vz",",","u_fog_color_density",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vy","=","u_fog_color_density",";"]}]}}]},{type:"textline",tokens:["va","(","vu",",","vv",",","bC",".","y",",","vy",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vt","(","vu",",","vv",",","vw",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","vx",")",";"]}]}},{type:"else",group:{type:"group",parts:[]}}]},{type:"textline",tokens:["}"]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{type:"equal_expr",places:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","vJ","(","mat4","vD",",","vec4","vE",",","mat4","vF",")","{","vec4","vG",";","float","vH",";","vec2","vI",";","vI","=","(","vD","*","vF","[","3","]",")",".","xy",";","vH","=","SHADOW_TEX_RES","/","2.0",";","vI","=","floor","(","vI","*","vH","+","0.5",")","/","vH","-","vI",";","vG","=","vD","*","vE",";","vG",".","xy","+=","vI",";","vG",".","xyz","=","0.5","*","(","vG",".","xyz","+","vG",".","w",")",";","return","vG",";","}","void","vO","(","vec3","vK",",","vec3","vL",")","{","vec4","vM",";","mat4","vN",";"]},{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["vN","=","O","(","u_v_light_tsr","[","0","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vN","=","O","(","mat3","(","u_v_light_ts","[","0","]",",","u_v_light_r","[","0","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vM","=","vN","*","vec4","(","vK","+","u_normal_offset","*","vL",",","1.0",")",";","bI","=","vJ","(","u_p_light_matrix0",",","vM",",","vN",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["vN","=","O","(","u_v_light_tsr","[","1","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vN","=","O","(","mat3","(","u_v_light_ts","[","1","]",",","u_v_light_r","[","1","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vM","=","vN","*","vec4","(","vK","+","u_normal_offset","*","vL",",","1.0",")",";","bJ","=","vJ","(","u_p_light_matrix1",",","vM",",","vN",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["vN","=","O","(","u_v_light_tsr","[","2","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vN","=","O","(","mat3","(","u_v_light_ts","[","2","]",",","u_v_light_r","[","2","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vM","=","vN","*","vec4","(","vK","+","u_normal_offset","*","vL",",","1.0",")",";","bK","=","vJ","(","u_p_light_matrix2",",","vM",",","vN",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_CAST_LAMPS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAC_OS_SHADOW_HACK"],group:{type:"group",parts:[{type:"textline",tokens:["vN","=","O","(","u_v_light_tsr","[","3","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vN","=","O","(","mat3","(","u_v_light_ts","[","3","]",",","u_v_light_r","[","3","]",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vM","=","vN","*","vec4","(","vK","+","u_normal_offset","*","vL",",","1.0",")",";","bL","=","vJ","(","u_p_light_matrix3",",","vM",",","vN",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["bJ","=","vJ","(","u_p_light_matrix1",",","vM",",","vN",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["bK","=","vJ","(","u_p_light_matrix2",",","vM",",","vN",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["bL","=","vJ","(","u_p_light_matrix3",",","vM",",","vN",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/lighting_nodes.glslf"] = {type:"group",parts:[{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","vP","=","0.5",";"]},{type:"node",name:"LIGHTING_BEGIN",declarations:[{type:"node_out",name:"wm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wo",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wp",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"wq",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"wr",qualifier:["vec2"],is_optional:true},{type:"node_out",name:"ws",qualifier:["vec2"],is_optional:true},{type:"node_out",name:"wt",qualifier:["vec4"],is_optional:true},{type:"node_out",name:"wu",qualifier:["float"],is_optional:true},{type:"node_out",name:"wv",qualifier:["vec4"],is_optional:true}],statements:[{type:"textline",tokens:["wm","=","vQ",";","wn","=","vR",";","wo","=","vS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wp"],statements:[{type:"textline",tokens:["wp","=","vT",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wq"],statements:[{type:"textline",tokens:["wq","=","vV",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ws"],statements:[{type:"textline",tokens:["ws","=","vX",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wr"],statements:[{type:"textline",tokens:["wr","=","vY",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wt"],statements:[{type:"textline",tokens:["wt","=","vZ",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wu"],statements:[{type:"textline",tokens:["wu","=","v_",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_wv"],statements:[{type:"textline",tokens:["wv","=","wa",";"]}]}]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"ww",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wy",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wz",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"wA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["wz","=","vec4","(","ww","+","wy","*","wx",",","ZERO_VALUE_NODES",")",";","wA","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"wB",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"wC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wD",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"wF",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wD","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["wF","=","vP",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["wF","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["wE","=","u_light_color_intensities","[","LAMP_IND","]",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_SHADOW_MAP_IND",1,{type:"negative_expr",places:1},{type:"non_equal_expr",places:2}],statements:[{type:"textline",tokens:["wE","*=","wB","[","LAMP_SHADOW_MAP_IND","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["wk","=","u_light_positions","[","LAMP_IND","]",";","wC","=","wk","-","vU",";"]},{type:"textline",tokens:["wd","=","length","(","wC",")",";","wE","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","wd","*","wd",")",";","wC","=","normalize","(","wC",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["wk","=","u_light_directions","[","LAMP_IND","]",";","wd","=","dot","(","wC",",","wk",")",";","wd","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","wd","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","wE","*=","wd",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["wC","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"wG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wH",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"wK",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wL","=","ZERO_VALUE_NODES",";","if","(","wH",".","r","!=","ZERO_VALUE_NODES",")","{","wd","=","(","UNITY_VALUE_NODES","-","wJ",")","*","dot","(","wI",",","wG",")","+","wJ",";","if","(","wK","[","0","]","==","ZERO_VALUE_NODES",")","{","wL","=","UNITY_VALUE_NODES",";","}","else","{","wd","=","UNITY_VALUE_NODES","+","abs","(","wd",")",";","wd","=","wK","[","1","]","+","(","UNITY_VALUE_NODES","-","wK","[","1","]",")","*","pow","(","wd",",","wK","[","0","]",")",";","wL","=","clamp","(","wd",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","wL","=","max","(","wL",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"wM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wN",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wP",qualifier:["float"],is_optional:false},{type:"node_out",name:"wQ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wQ","=","ZERO_VALUE_NODES",";","if","(","wN",".","r","!=","ZERO_VALUE_NODES",")","{","wd","=","(","UNITY_VALUE_NODES","-","wP",")","*","dot","(","wO",",","wM",")","+","wP",";","wQ","=","max","(","wd",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"wR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wS",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wU",qualifier:["float"],is_optional:false},{type:"node_in",name:"wV",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"wW",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["wW","=","ZERO_VALUE_NODES",";","if","(","wS",".","r","!=","ZERO_VALUE_NODES",")","{","wd","=","(","UNITY_VALUE_NODES","-","wU",")","*","dot","(","wT",",","wR",")","+","wU",";","if","(","wV","[","0","]",">","ZERO_VALUE_NODES",")","{","we","=","max","(","dot","(","wT",",","vW",")",",","ZERO_VALUE_NODES",")",";","wf","=","wV","[","0","]","*","wV","[","0","]",";","wg","=","UNITY_VALUE_NODES","-","vP","*","(","wf","/","(","wf","+","0.33",")",")",";","wk","=","wR","-","wd","*","wT",";","wl","=","vW","-","we","*","wT",";"]},{type:"textline",tokens:["if","(","length","(","wk",")","==","ZERO_VALUE_NODES","||","length","(","wl",")","==","ZERO_VALUE_NODES","||","abs","(","wd",")",">","UNITY_VALUE_NODES","||","abs","(","we",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["wW","=","wd","*","wg",";","else","{","wh","=","acos","(","wd",")",";","we","=","acos","(","we",")",";","wk","=","normalize","(","wk",")",";","wl","=","normalize","(","wl",")",";","wi","=","max","(","wh",",","we",")",";","wj","=","min","(","wh",",","we",")",";","wj","*=","0.95",";","we","=","max","(","dot","(","wk",",","wl",")",",","ZERO_VALUE_NODES",")",";","wf","=","0.45","*","(","wf","/","(","wf","+","0.09",")",")",";","wW","=","wd","*","(","wg","+","(","wf","*","we","*","sin","(","wi",")","*","tan","(","wj",")",")",")",";","}","}","else","wW","=","wd",";","wW","=","max","(","wW",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"wX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"wY",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"wZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"w_",qualifier:["float"],is_optional:false},{type:"node_in",name:"xa",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xb",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xb","=","ZERO_VALUE_NODES",";","if","(","wY",".","r","!=","ZERO_VALUE_NODES",")","{","wd","=","(","UNITY_VALUE_NODES","-","w_",")","*","dot","(","wZ",",","wX",")","+","w_",";","wj","=","max","(","dot","(","wZ",",","vW",")",",","ZERO_VALUE_NODES",")",";","if","(","xa","[","0","]","<=","UNITY_VALUE_NODES",")","xb","=","wd","*","pow","(","max","(","wj","*","wd",",","0.1",")",",","xa","[","0","]","-","UNITY_VALUE_NODES",")",";","else","xb","=","wd","*","pow","(","1.0001","-","wj",",","xa","[","0","]","-","UNITY_VALUE_NODES",")",";","xb","=","max","(","xb",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"xc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xd",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"xe",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xf",qualifier:["float"],is_optional:false},{type:"node_in",name:"xg",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xh",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xh","=","ZERO_VALUE_NODES",";","if","(","xd",".","r","!=","ZERO_VALUE_NODES",")","{","wj","=","(","UNITY_VALUE_NODES","-","xf",")","*","dot","(","xe",",","xc",")","+","xf",";","wj","=","acos","(","wj",")",";","if","(","wj","<","xg","[","0","]",")","xh","=","UNITY_VALUE_NODES",";","else","if","(","wj",">","(","xg","[","0","]","+","xg","[","1","]",")","||","xg","[","1","]","==","ZERO_VALUE_NODES",")","xh","=","ZERO_VALUE_NODES",";","else","xh","=","UNITY_VALUE_NODES","-","(","(","wj","-","xg","[","0","]",")","/","xg","[","1","]",")",";","xh","=","max","(","xh",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"xi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xj",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"xk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xl",qualifier:["float"],is_optional:false},{type:"node_in",name:"xm",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xn",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xn","=","ZERO_VALUE_NODES",";","if","(","xj",".","g","!=","ZERO_VALUE_NODES",")","{","wl","=","normalize","(","xi","+","vW",")",";","xn","=","(","UNITY_VALUE_NODES","-","xl",")","*","max","(","dot","(","xk",",","wl",")",",","ZERO_VALUE_NODES",")","+","xl",";","xn","=","pow","(","xn",",","xm","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"xo",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xp",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"xq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xr",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xs",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xs","=","ZERO_VALUE_NODES",";","if","(","xp",".","g","!=","ZERO_VALUE_NODES",")","{","wl","=","normalize","(","xo","+","vW",")",";","wj","=","max","(","dot","(","xq",",","wl",")",",","0.001",")",";"]},{type:"textline",tokens:["wd","=","max","(","dot","(","xq",",","vW",")",",","0.01",")",";","wi","=","max","(","dot","(","xq",",","xo",")",",","0.01",")",";","wj","=","tan","(","acos","(","wj",")",")",";","we","=","max","(","xr","[","0","]",",","0.001",")",";","xs","=","wi","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","we","*","we",")",")","*","(","exp","(","-","(","wj","*","wj",")","/","(","we","*","we",")",")","/","(","sqrt","(","wd","*","wi",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"xt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xu",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"xv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xw",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xx",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xx","=","ZERO_VALUE_NODES",";","if","(","xu",".","g","!=","ZERO_VALUE_NODES",")","{","wl","=","normalize","(","xt","+","vW",")",";","wi","=","acos","(","dot","(","wl",",","xv",")",")",";","if","(","wi","<","xw","[","0","]",")","xx","=","UNITY_VALUE_NODES",";","else","if","(","wi",">=","xw","[","0","]","+","xw","[","1","]","||","xw","[","1","]","==","ZERO_VALUE_NODES",")","xx","=","ZERO_VALUE_NODES",";","else","xx","=","UNITY_VALUE_NODES","-","(","wi","-","xw","[","0","]",")","/","xw","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"xy",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xz",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"xA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xB",qualifier:["float"],is_optional:false},{type:"node_in",name:"xC",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"xD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["xD","=","ZERO_VALUE_NODES",";","if","(","xz",".","g","!=","ZERO_VALUE_NODES",")","{","if","(","xC","[","0","]","<","1.0","||","xC","[","1","]","==","ZERO_VALUE_NODES",")","xD","=","ZERO_VALUE_NODES",";","else","{","if","(","xC","[","1","]","<","100.0",")","xC","[","1","]","=","sqrt","(","1.0","/","xC","[","1","]",")",";","else","xC","[","1","]","=","10.0","/","xC","[","1","]",";","wl","=","normalize","(","vW","+","xy",")",";","wi","=","(","UNITY_VALUE_NODES","-","xB",")","*","max","(","dot","(","xA",",","wl",")",",","ZERO_VALUE_NODES",")","+","xB",";","if","(","wi","<","ZERO_VALUE_NODES",")","xD","=","ZERO_VALUE_NODES",";","else","{","wd","=","max","(","dot","(","xA",",","vW",")",",","0.01",")",";","we","=","dot","(","xA",",","xy",")",";","if","(","we","<=","0.01",")","xD","=","ZERO_VALUE_NODES",";","else","{","wj","=","max","(","dot","(","vW",",","wl",")",",","0.01",")",";","wf","=","UNITY_VALUE_NODES",";","wd","=","(","2.0","*","wi","*","wd",")","/","wj",";","we","=","(","2.0","*","wi","*","we",")","/","wj",";","we","=","min","(","min","(","wf",",","wd",")",",","we",")",";","wd","=","sqrt","(","pow","(","xC","[","0","]",",","2.0",")","+","pow","(","wj",",","2.0",")","-","UNITY_VALUE_NODES",")",";","wj","=","pow","(","wd","-","wj",",","2.0",")","/","pow","(","wd","+","wj",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","wj","*","(","wd","+","wj",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","wj","*","(","wd","-","wj",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","wi","=","acos","(","wi",")",";","xD","=","max","(","wj","*","we","*","exp","(","-","pow","(","wi",",","2.0",")","/","(","2.0","*","pow","(","xC","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"xE",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"xF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xG",qualifier:["float"],is_optional:false},{type:"node_in",name:"xH",qualifier:["float"],is_optional:false},{type:"node_in",name:"xI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xK",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"xL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"xO",qualifier:["float"],is_optional:false},{type:"node_out",name:"xP",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"xQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["xQ","=","xF","+","xN","*","xM","*","xH",";","xP","=","xE","+","vec4","(","xN","*","xL","*","xG",",","xH",")",";"]}]},{type:"node",name:"LIGHTING_END",declarations:[{type:"node_in",name:"xR",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"xS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["wb","=","xR",".","rgb",";","wc","=","xS",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","xT","(","vec3","vQ",",","vec3","vR",",","vec3","vS",",","vec3","vT",",","vec3","vU",",","vec3","vV",",","vec3","vW",",","vec2","vX",",","vec2","vY",",","vec4","vZ",",","float","v_",",","vec4","wa",",","out","vec3","wb",",","out","vec3","wc",")","{","float","wd",",","we",",","wf",",","wg",",","wh",",","wi",",","wj",";","vec3","wk",",","wl",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/particles_nodes.glslf"] = {type:"group",parts:[{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NODE_TEX_ROW",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","float","xU","=","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","xZ","(","vec3","xV",")","{","float","xW",",","xX",";","vec4","xY",";","xY","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","xY","=","mix","(","vec4","(","xV",".","bg",",","xY",".","wz",")",",","vec4","(","xV",".","gb",",","xY",".","xy",")",",","step","(","xV",".","b",",","xV",".","g",")",")",";","xY","=","mix","(","vec4","(","xY",".","xyw",",","xV",".","r",")",",","vec4","(","xV",".","r",",","xY",".","yzx",")",",","step","(","xY",".","x",",","xV",".","r",")",")",";","xW","=","xY",".","x","-","min","(","xY",".","w",",","xY",".","y",")",";","xX","=","1.0e-10",";","return","vec3","(","abs","(","xY",".","z","+","(","xY",".","w","-","xY",".","y",")","/","(","6.0","*","xW","+","xX",")",")",",","xW","/","(","xY",".","x","+","xX",")",",","xY",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{type:"logical_or_expr",places:6}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","yc","(","vec3","x_",")","{","vec3","ya",";","vec4","yb",";","yb","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","ya","=","abs","(","fract","(","vec3","(","x_",".","r",",","x_",".","r",",","x_",".","r",")","+","yb",".","xyz",")","*","6.0","-","yb",".","www",")",";","return","x_",".","b","*","mix","(","yb",".","xxx",",","clamp","(","ya","-","yb",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","x_",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ye","(","vec2","yd",")","{","return","vec3","(","yd","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{type:"logical_or_expr",places:3}],group:{type:"group",parts:[{type:"textline",tokens:["vec2","yg","(","vec3","yf",")","{","return","vec2","(","yf",".","xy","*","xU","+","vec2","(","xU",",","xU",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"yV",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"yW",qualifier:["float"],is_optional:true},{type:"node_out",name:"yX",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yV"],statements:[{type:"textline",tokens:["yV","=","normalize","(","yM",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yW"],statements:[{type:"textline",tokens:["yW","=","abs","(","yM",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_yX"],statements:[{type:"textline",tokens:["yX","=","length","(","yM",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"yY",qualifier:["float"],is_optional:false},{type:"node_in",name:"yZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"y_",qualifier:["float"],is_optional:false},{type:"node_out",name:"za",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["za","=","vec3","(","yY",",","yZ",",","y_",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"zb",qualifier:["float"],is_optional:false},{type:"node_in",name:"zc",qualifier:["float"],is_optional:false},{type:"node_in",name:"zd",qualifier:["float"],is_optional:false},{type:"node_out",name:"ze",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ze","=","yc","(","vec3","(","zb",",","zc",",","zd",")",")",";"]}]},{type:"node",name:"EMPTY_UV",declarations:[{type:"node_out",name:"zf",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zf","=","vec3","(","-","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"EMPTY_VC",declarations:[{type:"node_out",name:"zg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zg","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"zh",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zh","=","ye","(","bM",")",";"]}]},{type:"node",name:"GEOMETRY_OR",declarations:[{type:"node_out",name:"zi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zi","=","2.0","*","vec3","(","bM",",","ZERO_VALUE_NODES",")","-","vec3","(","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"zj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zj","=","vec3","(","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"zk",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["zk","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"zl",qualifier:["float"],is_optional:false},{type:"node_out",name:"zm",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["zl","=","UNITY_VALUE_NODES",";","zm","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"zn",qualifier:["float"],is_optional:false},{type:"node_out",name:"zo",qualifier:["float"],is_optional:false},{type:"node_out",name:"zp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["zn","=","UNITY_VALUE_NODES",";","zo","=","UNITY_VALUE_NODES",";","zp","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"zq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zq","=","yP",".","xzy",";","zq",".","y","*=","-","1.0",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"zr",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["INVERT_FRONTFACING"],statements:[{type:"textline",tokens:["zr","=","(","gl_FrontFacing",")","?","ZERO_VALUE_NODES",":","UNITY_VALUE_NODES",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["zr","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"zs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zs","=","-","(","yr","*","vec4","(","yq",",","0.0",")",")",".","xyz",";"]}]},{type:"node",name:"GEOMETRY_LO",declarations:[{type:"node_out",name:"zt",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zt","[","0","]","=","yM","[","0","]",";","zt","[","1","]","=","yM","[","1","]",";","zt","[","2","]","=","yM","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"zu",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zu","=","vec3","(","yQ",".","r",",","-","yQ",".","b",",","yQ",".","g",")",";"]}]},{type:"node",name:"NEW_GEOMETRY",declarations:[{type:"node_out",name:"zv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zy",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zB",qualifier:["float"],is_optional:false},{type:"node_out",name:"zC",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["zv","=","vec3","(","ZERO_VALUE_NODES",")",";","zw","=","vec3","(","ZERO_VALUE_NODES",")",";","zx","=","vec3","(","ZERO_VALUE_NODES",")",";","zy","=","vec3","(","ZERO_VALUE_NODES",")",";","zz","=","vec3","(","ZERO_VALUE_NODES",")",";","zA","=","vec3","(","ZERO_VALUE_NODES",")",";","zB","=","ZERO_VALUE_NODES",";","zC","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"zD",qualifier:["float"],is_optional:false},{type:"node_in",name:"zE",qualifier:["float"],is_optional:false},{type:"node_in",name:"zF",qualifier:["float"],is_optional:false},{type:"node_in",name:"zG",qualifier:["float"],is_optional:false},{type:"node_in",name:"zH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yS","=","xZ","(","zH",")",";","yS","[","0","]","+=","(","zD","-","xU",")",";","if","(","yS","[","0","]",">","UNITY_VALUE_NODES",")","yS","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","yS","[","0","]","<","ZERO_VALUE_NODES",")","yS","[","0","]","+=","UNITY_VALUE_NODES",";","yS","*=","vec3","(","UNITY_VALUE_NODES",",","zE",",","zF",")",";","yS","=","mix","(","vec3","(","UNITY_VALUE_NODES",")",",","mix","(","vec3","(","ZERO_VALUE_NODES",")",",","yS",",","step","(","vec3","(","ZERO_VALUE_NODES",")",",","yS",")",")",",","step","(","yS",",","vec3","(","UNITY_VALUE_NODES",")",")",")",";","zI","=","mix","(","zH",",","yc","(","yS",")",",","zG",")",";"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"zJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"zK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zL","=","mix","(","zK",",","vec3","(","UNITY_VALUE_NODES",")","-","zK",",","zJ",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"zM",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"zN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zO",qualifier:["float"],is_optional:false},{type:"node_out",name:"zP",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zM"],statements:[{type:"textline",tokens:["zM","=","u_lamp_light_color_intensities","[","LAMP_INDEX","]",";"]}]}]},{type:"textline",tokens:["yN","=","u_lamp_light_factors","[","LAMP_INDEX","]",";","yS","=","u_lamp_light_directions","[","LAMP_INDEX","]",";","yT","=","u_lamp_light_positions","[","LAMP_INDEX","]",";","yF","=","yN",".","z",";","if","(","yF","!=","-","UNITY_VALUE_NODES",")","{"]},{type:"textline",tokens:["zN","=","bC","-","yT",";","zO","=","length","(","zN",")",";","zN","=","normalize","(","zN",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zP"],statements:[{type:"textline",tokens:["zP","=","yF","/","(","yF","+","zO","*","zO",")",";","yF","=","yN",".","x",";","yG","=","yN",".","y",";","if","(","yF",">","-","UNITY_VALUE_NODES",")","{","yH","=","dot","(","-","zN",",","yS",")",";","yH","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","yH","-","yF",")","/","yG",")",";","zP","*=","yH",";","}"]}]}]},{type:"textline",tokens:["}","else","{"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zN"],statements:[{type:"textline",tokens:["zN","=","yS",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zO"],statements:[{type:"textline",tokens:["zO","=","length","(","yT","-","bC",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zP"],statements:[{type:"textline",tokens:["zP","=","UNITY_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["}"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zN"],statements:[{type:"textline",tokens:["zN",".","yz","=","vec2","(","-","zN",".","z",",","zN",".","y",")",";"]}]}]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"zQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zR",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"zS",qualifier:["float"],is_optional:true},{type:"node_param",name:"yh",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zR"],statements:[{type:"textline",tokens:["zR","=","yh",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_zS"],statements:[{type:"textline",tokens:["zS","=","-","dot","(","zQ",",","yh",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"zT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"zU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["zU","=","-","(","ys","*","vec4","(","zT",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"BSDF_ANISOTROPIC",declarations:[{type:"node_in",name:"zV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"zW",qualifier:["float"],is_optional:false},{type:"node_in",name:"zX",qualifier:["float"],is_optional:false},{type:"node_in",name:"zY",qualifier:["float"],is_optional:false},{type:"node_in",name:"zZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"z_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Aa",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Aa","=","zV",";"]},{type:"textline",tokens:["zW",";","zX",";","zY",";","zZ",";","z_",";"]}]},{type:"node",name:"BSDF_DIFFUSE",declarations:[{type:"node_in",name:"Ab",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ac",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ad",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ae",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Ae","=","Ab",";"]},{type:"textline",tokens:["Ac",";","Ad",";"]}]},{type:"node",name:"BSDF_GLASS",declarations:[{type:"node_in",name:"Af",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ag",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ah",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ai",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Aj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Aj","=","Af",";"]},{type:"textline",tokens:["Ag",";","Ah",";","Ai",";"]}]},{type:"node",name:"BSDF_GLOSSY",declarations:[{type:"node_in",name:"Ak",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Al",qualifier:["float"],is_optional:false},{type:"node_in",name:"Am",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"An",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["An","=","Ak",";"]},{type:"textline",tokens:["Al",";","Am",";"]}]},{type:"node",name:"BSDF_HAIR",declarations:[{type:"node_in",name:"Ao",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ap",qualifier:["float"],is_optional:false},{type:"node_in",name:"Aq",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ar",qualifier:["float"],is_optional:false},{type:"node_out",name:"As",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["As","=","Ao",";"]},{type:"textline",tokens:["Ap",";","Aq",";","Ar",";"]}]},{type:"node",name:"BSDF_TRANSPARENT",declarations:[{type:"node_in",name:"At",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Au",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Au","=","At",";"]}]},{type:"node",name:"BSDF_TRANSLUCENT",declarations:[{type:"node_in",name:"Av",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Aw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ax",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Ax","=","Av",";"]},{type:"textline",tokens:["Aw",";"]}]},{type:"node",name:"BSDF_REFRACTION",declarations:[{type:"node_in",name:"Ay",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Az",qualifier:["float"],is_optional:false},{type:"node_in",name:"AA",qualifier:["float"],is_optional:false},{type:"node_in",name:"AB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AC",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AC","[","0","]","=","AC","[","1","]","=","AC","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Ay",";","Az",";","AA",";","AB",";"]}]},{type:"node",name:"BSDF_TOON",declarations:[{type:"node_in",name:"AD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AE",qualifier:["float"],is_optional:false},{type:"node_in",name:"AF",qualifier:["float"],is_optional:false},{type:"node_in",name:"AG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AH","=","AD",";"]},{type:"textline",tokens:["AE",";","AF",";","AG",";"]}]},{type:"node",name:"BSDF_VELVET",declarations:[{type:"node_in",name:"AI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"AK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AL","=","AI",";"]},{type:"textline",tokens:["AJ",";","AK",";"]}]},{type:"node",name:"SUBSURFACE_SCATTERING",declarations:[{type:"node_in",name:"AM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AN",qualifier:["float"],is_optional:false},{type:"node_in",name:"AO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AP",qualifier:["float"],is_optional:false},{type:"node_in",name:"AQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"AR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AS","[","0","]","=","AS","[","1","]","=","AS","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["AM",";","AO",";","AP",";","AQ",";","AR",";","AN",";"]}]},{type:"node",name:"EMISSION",declarations:[{type:"node_in",name:"AT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"AU",qualifier:["float"],is_optional:false},{type:"node_out",name:"AV",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AV","=","AT",";"]},{type:"textline",tokens:["AU",";"]}]},{type:"node",name:"AMBIENT_OCCLUSION",declarations:[{type:"node_in",name:"AW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"AX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AX","[","0","]","=","AX","[","1","]","=","AX","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["AW",";"]}]},{type:"node",name:"HOLDOUT",declarations:[{type:"node_out",name:"AY",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["AY","[","0","]","=","AY","[","1","]","=","AY","[","2","]","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"VOLUME_ABSORPTION",declarations:[{type:"node_in",name:"AZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"A_",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ba",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Ba","[","0","]","=","Ba","[","1","]","=","Ba","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["AZ",";","A_",";"]}]},{type:"node",name:"VOLUME_SCATTER",declarations:[{type:"node_in",name:"Bb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Bc",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bd",qualifier:["float"],is_optional:false},{type:"node_out",name:"Be",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Be","[","0","]","=","Be","[","1","]","=","Be","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Bb",";","Bc",";","Bd",";"]}]},{type:"node",name:"BUMP",declarations:[{type:"node_in",name:"Bf",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bg",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bh",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Bj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Bj","=","Bi",";"]},{type:"textline",tokens:["Bf",";","Bg",";","Bh",";"]}]},{type:"node",name:"NORMAL_MAP",declarations:[{type:"node_in",name:"Bk",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Bm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Bm","=","Bl",";"]},{type:"textline",tokens:["Bk",";"]}]},{type:"node",name:"VECT_TRANSFORM",declarations:[{type:"node_in",name:"Bn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Bo",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["CONVERT_TYPE","VT_WORLD_TO_WORLD",{type:"equal_expr",places:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",{type:"equal_expr",places:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",{type:"equal_expr",places:2},{type:"logical_or_expr",places:3}],statements:[{type:"textline",tokens:["Bo","=","Bn",";"]}]},{type:"node_else",statements:[{type:"node_condition",parts:[{type:"node_if",expression:["VECTOR_TYPE","VT_POINT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["yN","=","vec4","(","Bn",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["yN","=","vec4","(","Bn",",","ZERO_VALUE_NODES",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["Bo","=","(","ys","*","yN",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["Bo","=","(","yv","*","yN",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["Bo","=","(","yu","*","yN",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["Bo","=","(","ys","*","yu","*","yN",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["Bo","=","(","yt","*","yN",")",".","xyz",";"]}]},{type:"node_elif",expression:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["Bo","=","(","yv","*","yt","*","yN",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["VECTOR_TYPE","VT_NORMAL",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["Bo","=","normalize","(","Bo",")",";"]}]}]}]}]}]},{type:"node",name:"BLACKBODY",declarations:[{type:"node_in",name:"Bp",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Bq","[","0","]","=","Bq","[","1","]","=","Bq","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Bp",";"]}]},{type:"node",name:"WAVELENGTH",declarations:[{type:"node_in",name:"Br",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bs",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Bs","[","0","]","=","Bs","[","1","]","=","Bs","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Br",";"]}]},{type:"node",name:"SEPXYZ",declarations:[{type:"node_in",name:"Bt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Bu",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bv",qualifier:["float"],is_optional:false},{type:"node_out",name:"Bw",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Bu","=","Bt","[","0","]",";","Bv","=","Bt","[","1","]",";","Bw","=","Bt","[","2","]",";"]}]},{type:"node",name:"COMBXYZ",declarations:[{type:"node_in",name:"Bx",qualifier:["float"],is_optional:false},{type:"node_in",name:"By",qualifier:["float"],is_optional:false},{type:"node_in",name:"Bz",qualifier:["float"],is_optional:false},{type:"node_out",name:"BA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["BA","[","0","]","=","Bx",";","BA","[","1","]","=","By",";","BA","[","2","]","=","Bz",";"]}]},{type:"node",name:"BRIGHTCONTRAST",declarations:[{type:"node_in",name:"BB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"BC",qualifier:["float"],is_optional:false},{type:"node_in",name:"BD",qualifier:["float"],is_optional:false},{type:"node_out",name:"BE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yH","=","BC","-","BD","*","xU",";","BE","=","max","(","(","UNITY_VALUE_NODES","+","BD",")","*","BB","+","yH",",","vec3","(","ZERO_VALUE_NODES",")",")",";"]}]},{type:"node",name:"LIGHT_FALLOFF",declarations:[{type:"node_in",name:"BF",qualifier:["float"],is_optional:false},{type:"node_in",name:"BG",qualifier:["float"],is_optional:false},{type:"node_out",name:"BH",qualifier:["float"],is_optional:false},{type:"node_out",name:"BI",qualifier:["float"],is_optional:false},{type:"node_out",name:"BJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["BH","=","BI","=","BJ","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["BF",";","BG",";"]}]},{type:"node",name:"TEX_IMAGE",declarations:[{type:"node_in",name:"BK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["BL","[","0","]","=","BL","[","1","]","=","BL","[","2","]","=","ZERO_VALUE_NODES",";","BM","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["BK",";"]}]},{type:"node",name:"TEX_ENVIRONMENT",declarations:[{type:"node_in",name:"BN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["BO","[","0","]","=","BO","[","1","]","=","BO","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["BN",";"]}]},{type:"node",name:"TEX_SKY",declarations:[{type:"node_in",name:"BP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["BQ","[","0","]","=","BQ","[","1","]","=","BQ","[","2","]","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["BP",";"]}]},{type:"node",name:"TEX_NOISE",declarations:[{type:"node_in",name:"BR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"BS",qualifier:["float"],is_optional:false},{type:"node_in",name:"BT",qualifier:["float"],is_optional:false},{type:"node_in",name:"BU",qualifier:["float"],is_optional:false},{type:"node_out",name:"BV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"BW",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["BV","[","0","]","=","BV","[","1","]","=","BV","[","2","]","=","ZERO_VALUE_NODES",";","BW","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["BR",";","BS",";","BT",";","BU",";"]}]},{type:"node",name:"TEX_WAVE",declarations:[{type:"node_in",name:"BX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"BY",qualifier:["float"],is_optional:false},{type:"node_in",name:"BZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"B_",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ca",qualifier:["float"],is_optional:false},{type:"node_out",name:"Cb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Cc",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Cb","[","0","]","=","Cb","[","1","]","=","Cb","[","2","]","=","ZERO_VALUE_NODES",";","Cc","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["BX",";","BY",";","BZ",";","B_",";","Ca",";"]}]},{type:"node",name:"TEX_VORONOI",declarations:[{type:"node_in",name:"Cd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ce",qualifier:["float"],is_optional:false},{type:"node_out",name:"Cf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Cg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Cf","[","0","]","=","Cf","[","1","]","=","Cf","[","2","]","=","ZERO_VALUE_NODES",";","Cg","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Cd",";","Ce",";"]}]},{type:"node",name:"TEX_MUSGRAVE",declarations:[{type:"node_in",name:"Ch",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ci",qualifier:["float"],is_optional:false},{type:"node_in",name:"Cj",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ck",qualifier:["float"],is_optional:false},{type:"node_in",name:"Cl",qualifier:["float"],is_optional:false},{type:"node_in",name:"Cm",qualifier:["float"],is_optional:false},{type:"node_in",name:"Cn",qualifier:["float"],is_optional:false},{type:"node_out",name:"Co",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Cp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Co","[","0","]","=","Co","[","1","]","=","Co","[","2","]","=","ZERO_VALUE_NODES",";","Cp","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Ch",";","Ci",";","Cj",";","Ck",";","Cl",";","Cm",";","Cn",";"]}]},{type:"node",name:"TEX_GRADIENT",declarations:[{type:"node_in",name:"Cq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Cr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Cs",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Cr","[","0","]","=","Cr","[","1","]","=","Cr","[","2","]","=","ZERO_VALUE_NODES",";","Cs","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Cq",";"]}]},{type:"node",name:"TEX_MAGIC",declarations:[{type:"node_in",name:"Ct",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cu",qualifier:["float"],is_optional:false},{type:"node_in",name:"Cv",qualifier:["float"],is_optional:false},{type:"node_out",name:"Cw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Cx",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Cw","[","0","]","=","Cw","[","1","]","=","Cw","[","2","]","=","ZERO_VALUE_NODES",";","Cx","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Ct",";","Cu",";","Cv",";"]}]},{type:"node",name:"TEX_CHECKER",declarations:[{type:"node_in",name:"Cy",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Cz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"CA",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"CB",qualifier:["float"],is_optional:false},{type:"node_out",name:"CC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["CC","[","0","]","=","CC","[","1","]","=","CC","[","2","]","=","ZERO_VALUE_NODES",";","CD","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["Cy",";","Cz",";","CA",";","CB",";"]}]},{type:"node",name:"TEX_BRICK",declarations:[{type:"node_in",name:"CE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"CF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"CG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"CH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"CI",qualifier:["float"],is_optional:false},{type:"node_in",name:"CJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"CK",qualifier:["float"],is_optional:false},{type:"node_in",name:"CL",qualifier:["float"],is_optional:false},{type:"node_in",name:"CM",qualifier:["float"],is_optional:false},{type:"node_out",name:"CN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["CN","[","0","]","=","CN","[","1","]","=","CN","[","2","]","=","ZERO_VALUE_NODES",";","CO","=","UNITY_VALUE_NODES",";"]},{type:"textline",tokens:["CE",";","CF",";","CG",";","CH",";","CI",";","CJ",";","CK",";","CL",";","CM",";"]}]},{type:"node",name:"ADD_SHADER",declarations:[{type:"node_in",name:"CP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"CQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CR","=","clamp","(","CP","+","CQ",",","vec3","(","ZERO_VALUE_NODES",")",",","vec3","(","UNITY_VALUE_NODES",")",")",";"]}]},{type:"node",name:"MIX_SHADER",declarations:[{type:"node_in",name:"CS",qualifier:["float"],is_optional:false},{type:"node_in",name:"CT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"CU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CV",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yH","=","clamp","(","CS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","CV","=","yH","*","CT","+","(","UNITY_VALUE_NODES","-","yH",")","*","CU",";"]}]},{type:"node",name:"UV_MERGED",declarations:[{type:"node_out",name:"CW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"CX",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CW"],statements:[{type:"textline",tokens:["CW","=","ye","(","bM",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_CX"],statements:[{type:"textline",tokens:["CX","=","vec3","(","bM",",","ZERO_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"TEX_COORD_UV",declarations:[{type:"node_out",name:"CY",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CY","=","vec3","(","bM",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_NO",declarations:[{type:"node_out",name:"CZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["CZ","=","yR",";"]}]},{type:"node",name:"TEX_COORD_GE",declarations:[{type:"node_out",name:"C_",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["C_","=","vec3","(","bM",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"TEX_COORD_OB",declarations:[{type:"node_out",name:"Da",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Da","[","0","]","=","Da","[","1","]","=","Da","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_CA",declarations:[{type:"node_out",name:"Db",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Db","[","0","]","=","yM","[","0","]",";","Db","[","1","]","=","yM","[","1","]",";","Db","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_WI",declarations:[{type:"node_out",name:"Dc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Dc","[","0","]","=","Dc","[","1","]","=","Dc","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"TEX_COORD_RE",declarations:[{type:"node_out",name:"Dd",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Dd","[","0","]","=","Dd","[","1","]","=","Dd","[","2","]","=","UNITY_VALUE_NODES",";"]}]},{type:"node",name:"UVMAP",declarations:[{type:"node_out",name:"De",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["De","=","vec3","(","bM",",","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_out",name:"Df",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dg",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dh",qualifier:["float"],is_optional:false},{type:"node_out",name:"Di",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Dj",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Dl",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"yi",qualifier:["varying","vec4"],is_optional:true},{type:"node_param",name:"yj",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"yk",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"yl",qualifier:["varying","vec3"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["PARTICLE_BATCH"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Df"],statements:[{type:"textline",tokens:["Df","=","yi","[","0","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Dg"],statements:[{type:"textline",tokens:["Dg","=","yi","[","1","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Dh"],statements:[{type:"textline",tokens:["Dh","=","yi","[","2","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Di"],statements:[{type:"textline",tokens:["Di","=","vec3","(","yj",".","r",",","-","yj",".","b",",","yj",".","g",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Dj"],statements:[{type:"textline",tokens:["Dj","=","yi","[","3","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Dk"],statements:[{type:"textline",tokens:["Dk","=","vec3","(","yk",".","r",",","-","yk",".","b",",","yk",".","g",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Dl"],statements:[{type:"textline",tokens:["Dl","=","vec3","(","yl",".","r",",","-","yl",".","b",",","yl",".","g",")",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["Df","=","ZERO_VALUE_NODES",";","Dg","=","ZERO_VALUE_NODES",";","Dh","=","ZERO_VALUE_NODES",";","Di","=","vec3","(","ZERO_VALUE_NODES",")",";","Dj","=","ZERO_VALUE_NODES",";","Dk","=","Di",";","Dl","=","Di",";"]}]}]}]},{type:"node",name:"HAIR_INFO",declarations:[{type:"node_out",name:"Dm",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dn",qualifier:["float"],is_optional:false},{type:"node_out",name:"Do",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Dm","=","ZERO_VALUE_NODES",";","Dn","=","ZERO_VALUE_NODES",";","Do","=","ZERO_VALUE_NODES",";","Dp","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"OBJECT_INFO",declarations:[{type:"node_out",name:"Dq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Dr",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ds",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dt",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Dr","=","ZERO_VALUE_NODES",";","Ds","=","ZERO_VALUE_NODES",";","Dt","=","ZERO_VALUE_NODES",";","Dq","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"WIREFRAME",declarations:[{type:"node_in",name:"Du",qualifier:["float"],is_optional:false},{type:"node_out",name:"Dv",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Dv","=","Du",";"]}]},{type:"node",name:"TANGENT",declarations:[{type:"node_out",name:"Dw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Dw","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LAYER_WEIGHT",declarations:[{type:"node_in",name:"Dx",qualifier:["float"],is_optional:false},{type:"node_in",name:"Dy",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Dz",qualifier:["float"],is_optional:false},{type:"node_out",name:"DA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Dz","=","DA","=","ZERO_VALUE_NODES",";"]},{type:"textline",tokens:["Dy",";","Dx",";"]}]},{type:"node",name:"LIGHT_PATH",declarations:[{type:"node_out",name:"DB",qualifier:["float"],is_optional:false},{type:"node_out",name:"DC",qualifier:["float"],is_optional:false},{type:"node_out",name:"DD",qualifier:["float"],is_optional:false},{type:"node_out",name:"DE",qualifier:["float"],is_optional:false},{type:"node_out",name:"DF",qualifier:["float"],is_optional:false},{type:"node_out",name:"DG",qualifier:["float"],is_optional:false},{type:"node_out",name:"DH",qualifier:["float"],is_optional:false},{type:"node_out",name:"DI",qualifier:["float"],is_optional:false},{type:"node_out",name:"DJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"DK",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["DB","=","DC","=","DD","=","ZERO_VALUE_NODES",";","DE","=","DF","=","DG","=","ZERO_VALUE_NODES",";","DH","=","DH","=","DJ","=","DK","=","ZERO_VALUE_NODES",";","DI","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"ATTRIBUTE",declarations:[{type:"node_out",name:"DL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DN",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["DL","=","DM","=","vec3","(","ZERO_VALUE_NODES",")",";","DN","=","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"SCRIPT",declarations:[],statements:[]},{type:"node",name:"CURVE_VEC",declarations:[{type:"node_in",name:"DO",qualifier:["float"],is_optional:false},{type:"node_in",name:"DP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["DQ","=","DP",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_R"],statements:[{type:"textline",tokens:["DQ",".","r","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","DP",".","r","+","0.5",",","NODE_TEX_ROW",")",")",".","r","-","0.5",")","*","2.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_G"],statements:[{type:"textline",tokens:["DQ",".","g","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","DP",".","g","+","0.5",",","NODE_TEX_ROW",")",")",".","g","-","0.5",")","*","2.0",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_B"],statements:[{type:"textline",tokens:["DQ",".","b","=","(","texture2D","(","u_nodes_texture",",","vec2","(","0.5","*","DP",".","b","+","0.5",",","NODE_TEX_ROW",")",")",".","b","-","0.5",")","*","2.0",";"]}]}]},{type:"textline",tokens:["DQ","=","mix","(","DP",",","DQ",",","DO",")",";"]}]},{type:"node",name:"CURVE_RGB",declarations:[{type:"node_in",name:"DR",qualifier:["float"],is_optional:false},{type:"node_in",name:"DS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DT",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["READ_A"],statements:[{type:"textline",tokens:["yH","=","texture2D","(","u_nodes_texture",",","vec2","(","DS",".","r",",","NODE_TEX_ROW",")",")",".","a",";","yG","=","texture2D","(","u_nodes_texture",",","vec2","(","DS",".","g",",","NODE_TEX_ROW",")",")",".","a",";","yF","=","texture2D","(","u_nodes_texture",",","vec2","(","DS",".","b",",","NODE_TEX_ROW",")",")",".","a",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["yH","=","DS",".","r",";","yG","=","DS",".","g",";","yF","=","DS",".","b",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_R"],statements:[{type:"textline",tokens:["DT",".","r","=","texture2D","(","u_nodes_texture",",","vec2","(","yH",",","NODE_TEX_ROW",")",")",".","r",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["DT",".","r","=","yH",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_G"],statements:[{type:"textline",tokens:["DT",".","g","=","texture2D","(","u_nodes_texture",",","vec2","(","yG",",","NODE_TEX_ROW",")",")",".","g",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["DT",".","g","=","yG",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["READ_B"],statements:[{type:"textline",tokens:["DT",".","b","=","texture2D","(","u_nodes_texture",",","vec2","(","yF",",","NODE_TEX_ROW",")",")",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["DT",".","b","=","yF",";"]}]}]},{type:"textline",tokens:["DT","=","mix","(","DS",",","DT",",","DR",")",";"]}]},{type:"node",name:"VALTORGB",declarations:[{type:"node_in",name:"DU",qualifier:["float"],is_optional:false},{type:"node_out",name:"DV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DW",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["yN","=","texture2D","(","u_nodes_texture",",","vec2","(","DU",",","NODE_TEX_ROW",")",")",";","DV","=","yN",".","rgb",";","DW","=","yN",".","a",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"DX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"DY",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["DY","=","DX",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["DY","=","(","MAPPING_TRS_MATRIX","*","vec4","(","DY",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["DY","=","DY","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["DY","=","DY","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["DY","=","max","(","DY",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["DY","=","min","(","DY",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["DY","=","normalize","(","DY",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"DZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"D_",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ea",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ea","=","DZ","+","D_",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Ea","=","clamp","(","Ea",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"Eb",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ec",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ed",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ed","=","Eb","-","Ec",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Ed","=","clamp","(","Ed",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"Ee",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ef",qualifier:["float"],is_optional:false},{type:"node_out",name:"Eg",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Eg","=","Ee","*","Ef",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Eg","=","clamp","(","Eg",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"Eh",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ei",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ej",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ej","=","(","Ei","!=","ZERO_VALUE_NODES",")","?","Eh","/","Ei",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Ej","=","clamp","(","Ej",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"Ek",qualifier:["float"],is_optional:false},{type:"node_in",name:"El",qualifier:["float"],is_optional:false},{type:"node_out",name:"Em",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Em","=","sin","(","Ek",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Em","=","clamp","(","Em",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["El",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"En",qualifier:["float"],is_optional:false},{type:"node_in",name:"Eo",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ep",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ep","=","cos","(","En",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Ep","=","clamp","(","Ep",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Eo",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"Eq",qualifier:["float"],is_optional:false},{type:"node_in",name:"Er",qualifier:["float"],is_optional:false},{type:"node_out",name:"Es",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Es","=","tan","(","Eq",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Es","=","clamp","(","Es",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Er",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"Et",qualifier:["float"],is_optional:false},{type:"node_in",name:"Eu",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ev",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ev","=","(","Et","<=","UNITY_VALUE_NODES","&&","Et",">=","-","UNITY_VALUE_NODES",")","?","asin","(","Et",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Ev","=","clamp","(","Ev",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Eu",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"Ew",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ex",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ey",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ey","=","(","Ew","<=","UNITY_VALUE_NODES","&&","Ew",">=","-","UNITY_VALUE_NODES",")","?","acos","(","Ew",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Ey","=","clamp","(","Ey",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Ex",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"Ez",qualifier:["float"],is_optional:false},{type:"node_in",name:"EA",qualifier:["float"],is_optional:false},{type:"node_out",name:"EB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EB","=","atan","(","Ez",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EB","=","clamp","(","EB",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["EA",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"EC",qualifier:["float"],is_optional:false},{type:"node_in",name:"ED",qualifier:["float"],is_optional:false},{type:"node_out",name:"EE",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","EC","<","ZERO_VALUE_NODES","&&","ED","!=","floor","(","ED",")",")","EE","=","ZERO_VALUE_NODES",";","else","if","(","ED","==","ZERO_VALUE_NODES",")"]},{type:"textline",tokens:["EE","=","UNITY_VALUE_NODES",";","else","if","(","EC","<","ZERO_VALUE_NODES",")","EE","=","mix","(","UNITY_VALUE_NODES",",","-","UNITY_VALUE_NODES",",","sign","(","mod","(","-","ED",",","2.0",")",")",")","*","pow","(","-","EC",",","ED",")",";","else","if","(","EC","==","ZERO_VALUE_NODES",")","EE","=","ZERO_VALUE_NODES",";","else","EE","=","pow","(","EC",",","ED",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EE","=","clamp","(","EE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"EF",qualifier:["float"],is_optional:false},{type:"node_in",name:"EG",qualifier:["float"],is_optional:false},{type:"node_out",name:"EH",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EH","=","(","EF",">","ZERO_VALUE_NODES","&&","EG",">","ZERO_VALUE_NODES",")","?","log2","(","EF",")","/","log2","(","EG",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EH","=","clamp","(","EH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"EI",qualifier:["float"],is_optional:false},{type:"node_in",name:"EJ",qualifier:["float"],is_optional:false},{type:"node_out",name:"EK",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EK","=","min","(","EI",",","EJ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EK","=","clamp","(","EK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"EL",qualifier:["float"],is_optional:false},{type:"node_in",name:"EM",qualifier:["float"],is_optional:false},{type:"node_out",name:"EN",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EN","=","max","(","EL",",","EM",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EN","=","clamp","(","EN",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"EO",qualifier:["float"],is_optional:false},{type:"node_in",name:"EP",qualifier:["float"],is_optional:false},{type:"node_out",name:"EQ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EQ","=","floor","(","EO","+","xU",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EQ","=","clamp","(","EQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["EP",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"ER",qualifier:["float"],is_optional:false},{type:"node_in",name:"ES",qualifier:["float"],is_optional:false},{type:"node_out",name:"ET",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ET","=","(","ER","<","ES",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ET","=","clamp","(","ET",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"EU",qualifier:["float"],is_optional:false},{type:"node_in",name:"EV",qualifier:["float"],is_optional:false},{type:"node_out",name:"EW",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EW","=","(","EU",">","EV",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EW","=","clamp","(","EW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"EX",qualifier:["float"],is_optional:false},{type:"node_in",name:"EY",qualifier:["float"],is_optional:false},{type:"node_out",name:"EZ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["EZ","=","abs","(","EY",")",">","0.000001","?","mod","(","EX",",","EY",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["EZ","=","clamp","(","EZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"E_",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fa",qualifier:["float"],is_optional:false},{type:"node_out",name:"Fb",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Fb","=","abs","(","E_",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["Fb","=","clamp","(","Fb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["Fa",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"Fc",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fe",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ff",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","Fc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Ff","=","mix","(","Fd",",","Fe",",","yF",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Ff","=","clamp","(","Ff",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"Fg",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","Fg",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Fj","=","mix","(","Fh",",","Fh","+","Fi",",","yF",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fj","=","clamp","(","Fj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"Fk",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fl",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fn",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","Fk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Fn","=","mix","(","Fl",",","Fl","*","Fm",",","yF",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fn","=","clamp","(","Fn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"Fo",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","Fo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Fr","=","mix","(","Fp",",","Fp","-","Fq",",","yF",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fr","=","clamp","(","Fr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"Fs",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ft",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","Fs",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yG","=","UNITY_VALUE_NODES","-","yF",";","Fv","=","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","yG",")","+","yF","*","(","vec3","(","UNITY_VALUE_NODES",")","-","Fu",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","Ft",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fv","=","clamp","(","Fv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"Fw",qualifier:["float"],is_optional:false},{type:"node_in",name:"Fx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Fy",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Fz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","Fw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yG","=","UNITY_VALUE_NODES","-","yF",";","Fy","+=","step","(","Fy",",","vec3","(","ZERO_VALUE_NODES",")",")",";","Fz","=","yG","*","Fx","+","yF","*","Fx","/","Fy",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Fz","=","clamp","(","Fz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"FA",qualifier:["float"],is_optional:false},{type:"node_in",name:"FB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FD",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","FA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FD","=","mix","(","FB",",","abs","(","FB","-","FC",")",",","yF",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FD","=","clamp","(","FD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"FE",qualifier:["float"],is_optional:false},{type:"node_in",name:"FF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","FE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FH","=","min","(","FF",".","rgb",",","FG",".","rgb","*","yF",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FH","=","clamp","(","FH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"FI",qualifier:["float"],is_optional:false},{type:"node_in",name:"FJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","FI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FL","=","max","(","FJ",".","rgb",",","FK",".","rgb","*","yF",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FL","=","clamp","(","FL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"FM",qualifier:["float"],is_optional:false},{type:"node_in",name:"FN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","FM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yT","=","vec3","(","UNITY_VALUE_NODES","-","yF",")",";","FP","=","mix","(","FN","*","(","yT","+","2.0","*","yF","*","FO",")",",","vec3","(","UNITY_VALUE_NODES",")","-","(","yT","+","2.0","*","yF","*","(","vec3","(","UNITY_VALUE_NODES",")","-","FO",")",")","*","(","vec3","(","UNITY_VALUE_NODES",")","-","FN",")",",","step","(","xU",",","FN",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FP","=","clamp","(","FP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"FQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"FR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","FQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yT","=","vec3","(","UNITY_VALUE_NODES",")","-","yF","*","FS",";","yS","=","clamp","(","FR","/","yT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FT","=","mix","(","mix","(","yS",",","vec3","(","UNITY_VALUE_NODES",")",",","step","(","yT",",","vec3","(","ZERO_VALUE_NODES",")",")",")",",","FR",",","step","(","FR",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FT","=","clamp","(","FT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"FU",qualifier:["float"],is_optional:false},{type:"node_in",name:"FV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"FW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"FX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","FU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yT","=","vec3","(","UNITY_VALUE_NODES","-","yF",")",";","yT","=","yT","+","yF","*","FW",";","yS","=","clamp","(","vec3","(","UNITY_VALUE_NODES",")","-","(","vec3","(","UNITY_VALUE_NODES",")","-","FV",")","/","yT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","FX","=","mix","(","yS",",","vec3","(","ZERO_VALUE_NODES",")",",","step","(","yT",",","vec3","(","ZERO_VALUE_NODES",")",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["FX","=","clamp","(","FX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"FY",qualifier:["float"],is_optional:false},{type:"node_in",name:"FZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"F_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ga",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","FY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Ga","=","FZ",";","yS","=","xZ","(","F_",")",";","if","(","yS",".","y","!=","ZERO_VALUE_NODES",")","{","yT","=","xZ","(","Ga",")",";","yT",".","x","=","yS",".","x",";","yU","=","yc","(","yT",")",";","Ga","=","mix","(","Ga",",","yU",",","yF",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Ga","=","clamp","(","Ga",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"Gb",qualifier:["float"],is_optional:false},{type:"node_in",name:"Gc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ge",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","Gb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yG","=","UNITY_VALUE_NODES","-","yF",";","Ge","=","Gc",";","yU","=","xZ","(","Ge",")",";","if","(","yU",".","y","!=","ZERO_VALUE_NODES",")","{","yT","=","xZ","(","Gd",")",";","yU",".","y","=","yG","*","yU",".","y","+","yF","*","yT",".","y",";","Ge","=","yc","(","yU",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Ge","=","clamp","(","Ge",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"Gf",qualifier:["float"],is_optional:false},{type:"node_in",name:"Gg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gi",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","Gf",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yG","=","UNITY_VALUE_NODES","-","yF",";","yU","=","xZ","(","Gg",")",";","yT","=","xZ","(","Gh",")",";","yU",".","z","=","yG","*","yU",".","z","+","yF","*","yT",".","z",";","Gi","=","yc","(","yU",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Gi","=","clamp","(","Gi",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"Gj",qualifier:["float"],is_optional:false},{type:"node_in",name:"Gk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","Gj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Gm","=","Gk",";","yT","=","xZ","(","Gl",")",";","if","(","yT",".","y","!=","ZERO_VALUE_NODES",")","{","yU","=","xZ","(","Gm",")",";","yU",".","x","=","yT",".","x",";","yU",".","y","=","yT",".","y",";","yS","=","yc","(","yU",")",";","Gm","=","mix","(","Gm",",","yS",",","yF",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Gm","=","clamp","(","Gm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"Gn",qualifier:["float"],is_optional:false},{type:"node_in",name:"Go",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gp",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gq",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","Gn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yG","=","UNITY_VALUE_NODES","-","yF",";","yS","=","Gp","+","Go","-","Gp","*","Go",";","Gq","=","Go","*","(","vec3","(","yG",")","+","vec3","(","yF",")","*","(","(","vec3","(","UNITY_VALUE_NODES",")","-","Go",")","*","Gp","+","yS",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Gq","=","clamp","(","Gq",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"Gr",qualifier:["float"],is_optional:false},{type:"node_in",name:"Gs",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Gu",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yF","=","clamp","(","Gr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","Gu","=","Gs","+","yF","*","(","2.0","*","Gt","-","vec3","(","UNITY_VALUE_NODES",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["Gu","=","clamp","(","Gu",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"Gv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gw",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["yw","=","Gv",";","yA","=","Gw",";"]}]},{type:"node",name:"MATERIAL_BEGIN",declarations:[{type:"node_in",name:"Gx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gy",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Gz",qualifier:["float"],is_optional:false},{type:"node_in",name:"GA",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"GB",qualifier:["float"],is_optional:true},{type:"node_out",name:"GC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"GD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"GE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"GF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"GG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"GH",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"GI",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"GJ",qualifier:["vec4"],is_optional:false},{type:"node_param",name:"ym",qualifier:["const","vec2"],is_optional:true},{type:"node_param",name:"yn",qualifier:["const","vec3"],is_optional:false}],statements:[{type:"textline",tokens:["GE","=","clamp","(","Gx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["GF","=","yn","[","0","]","*","clamp","(","Gy",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["GG","=","normalize","(","GA",")",";"]},{type:"textline",tokens:["GG",".","yz","=","vec2","(","GG",".","z",",","-","GG",".","y",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["GG","=","yR",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["SHADELESS_MAT",{type:"logic_negative_expr",places:1}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"textline",tokens:["GC","=","GB","*","GE",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["GC","=","yD","*","GE",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["GE","*=","Gz",";"]}]}]},{type:"textline",tokens:["GD","=","yE","*","u_environment_energy","*","dS","(","GG",")",";","GJ","=","vec4","(","1.0",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",0,{type:"g_expr",places:2}],statements:[{type:"textline",tokens:["GH","=","vec2","(","ym","[","0","]",",","ym","[","1","]",")",";"]},{type:"textline",tokens:["GI","=","vec2","(","yn","[","1","]",",","yn","[","2","]",")",";"]}]}]},{type:"textline",tokens:["yz","=","GJ",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["GC","=","vec3","(","ZERO_VALUE_NODES",")",";","GD","=","vec3","(","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATERIAL_END",declarations:[{type:"node_in",name:"GK",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"GL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GN",qualifier:["float"],is_optional:true},{type:"node_in",name:"GO",qualifier:["float"],is_optional:true},{type:"node_in",name:"GP",qualifier:["float"],is_optional:true},{type:"node_out",name:"GQ",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"GR",qualifier:["float"],is_optional:true},{type:"node_out",name:"GS",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"GT",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"GU",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"yo",qualifier:["float"],is_optional:false},{type:"node_param",name:"yp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["GN",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GQ"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["GQ","=","GK",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["GQ","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["GQ","+=","GL",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GS"],statements:[{type:"textline",tokens:["GS","=","GM",";"]},{type:"textline",tokens:["GS",".","yz","=","vec2","(","-","GS",".","z",",","GS",".","y",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MATERIAL_EXT"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GT"],statements:[{type:"textline",tokens:["GT","=","GK",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GU"],statements:[{type:"textline",tokens:["GU","=","GL",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GR"],statements:[{type:"textline",tokens:["GR","=","clamp","(","GP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["yF","=","max","(","max","(","GL",".","r",",","GL",".","g",")",",","GL",".","b",")","*","GO",";","GR","=","clamp","(","GP","*","(","UNITY_VALUE_NODES","-","yF",")","+","yF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]}]},{type:"node_else",statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_GR"],statements:[{type:"textline",tokens:["GR","=","clamp","(","yo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["yF","=","max","(","max","(","GL",".","r",",","GL",".","g",")",",","GL",".","b",")","*","yp",";","GR","=","yo","*","(","UNITY_VALUE_NODES","-","yF",")","+","yF",";"]}]}]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["yx","=","GL",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["yx","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["yy","=","GM",";"]}]},{type:"node",name:"LIGHTING_AMBIENT",declarations:[{type:"node_in",name:"GV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GW",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"GX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"GY",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"GZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["GY","=","vec4","(","GV","+","GX","*","GW",",","ZERO_VALUE_NODES",")",";","GZ","=","vec3","(","ZERO_VALUE_NODES",")",";"]}]},{type:"node",name:"LIGHTING_LAMP",declarations:[{type:"node_in",name:"G_",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"Ha",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Hb",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Hc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Hd",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Hb","=","u_light_factors","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","HEMI",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["Hd","=","xU",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["Hd","=","ZERO_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["Hc","=","u_light_color_intensities","[","LAMP_IND","]",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_SHADOW_MAP_IND",1,{type:"negative_expr",places:1},{type:"non_equal_expr",places:2}],statements:[{type:"textline",tokens:["Hc","*=","G_","[","LAMP_SHADOW_MAP_IND","]",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2},"LAMP_TYPE","POINT",{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],statements:[{type:"textline",tokens:["yS","=","u_light_positions","[","LAMP_IND","]",";","Ha","=","yS","-","yQ",";"]},{type:"textline",tokens:["yF","=","length","(","Ha",")",";","Hc","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","yF","*","yF",")",";","Ha","=","normalize","(","Ha",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["LAMP_TYPE","SPOT",{type:"equal_expr",places:2}],statements:[{type:"textline",tokens:["yS","=","u_light_directions","[","LAMP_IND","]",";","yF","=","dot","(","Ha",",","yS",")",";","yF","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","yF","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","Hc","*=","yF",";"]}]}]}]},{type:"node_else",statements:[{type:"textline",tokens:["Ha","=","u_light_directions","[","LAMP_IND","]",";"]}]}]}]},{type:"node",name:"DIFFUSE_FRESNEL",declarations:[{type:"node_in",name:"He",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hf",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Hg",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hh",qualifier:["float"],is_optional:false},{type:"node_in",name:"Hi",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Hj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Hj","=","ZERO_VALUE_NODES",";","if","(","Hf",".","r","!=","ZERO_VALUE_NODES",")","{","yF","=","(","UNITY_VALUE_NODES","-","Hh",")","*","dot","(","Hg",",","He",")","+","Hh",";","if","(","Hi","[","0","]","==","ZERO_VALUE_NODES",")","{","Hj","=","UNITY_VALUE_NODES",";","}","else","{","yF","=","UNITY_VALUE_NODES","+","abs","(","yF",")",";","yF","=","Hi","[","1","]","+","(","UNITY_VALUE_NODES","-","Hi","[","1","]",")","*","pow","(","yF",",","Hi","[","0","]",")",";","Hj","=","clamp","(","yF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}","Hj","=","max","(","Hj",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_LAMBERT",declarations:[{type:"node_in",name:"Hk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hl",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Hm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hn",qualifier:["float"],is_optional:false},{type:"node_out",name:"Ho",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ho","=","ZERO_VALUE_NODES",";","if","(","Hl",".","r","!=","ZERO_VALUE_NODES",")","{","yF","=","(","UNITY_VALUE_NODES","-","Hn",")","*","dot","(","Hm",",","Hk",")","+","Hn",";","Ho","=","max","(","yF",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_OREN_NAYAR",declarations:[{type:"node_in",name:"Hp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hq",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Hr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hs",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ht",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Hu",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Hu","=","ZERO_VALUE_NODES",";","if","(","Hq",".","r","!=","ZERO_VALUE_NODES",")","{","yF","=","(","UNITY_VALUE_NODES","-","Hs",")","*","dot","(","Hr",",","Hp",")","+","Hs",";","if","(","Ht","[","0","]",">","ZERO_VALUE_NODES",")","{","yG","=","max","(","dot","(","Hr",",","yq",")",",","ZERO_VALUE_NODES",")",";","yH","=","Ht","[","0","]","*","Ht","[","0","]",";","yI","=","UNITY_VALUE_NODES","-","xU","*","(","yH","/","(","yH","+","0.33",")",")",";","yS","=","Hp","-","yF","*","Hr",";","yU","=","yq","-","yG","*","Hr",";"]},{type:"textline",tokens:["if","(","length","(","yS",")","==","ZERO_VALUE_NODES","||","length","(","yU",")","==","ZERO_VALUE_NODES","||","abs","(","yF",")",">","UNITY_VALUE_NODES","||","abs","(","yG",")",">","UNITY_VALUE_NODES",")"]},{type:"textline",tokens:["Hu","=","yF","*","yI",";","else","{","yJ","=","acos","(","yF",")",";","yG","=","acos","(","yG",")",";","yS","=","normalize","(","yS",")",";","yU","=","normalize","(","yU",")",";","yK","=","max","(","yJ",",","yG",")",";","yL","=","min","(","yJ",",","yG",")",";","yL","*=","0.95",";","yG","=","max","(","dot","(","yS",",","yU",")",",","ZERO_VALUE_NODES",")",";","yH","=","0.45","*","(","yH","/","(","yH","+","0.09",")",")",";","Hu","=","yF","*","(","yI","+","(","yH","*","yG","*","sin","(","yK",")","*","tan","(","yL",")",")",")",";","}","}","else","Hu","=","yF",";","Hu","=","max","(","Hu",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_MINNAERT",declarations:[{type:"node_in",name:"Hv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hw",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"Hx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Hy",qualifier:["float"],is_optional:false},{type:"node_in",name:"Hz",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"HA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["HA","=","ZERO_VALUE_NODES",";","if","(","Hw",".","r","!=","ZERO_VALUE_NODES",")","{","yF","=","(","UNITY_VALUE_NODES","-","Hy",")","*","dot","(","Hx",",","Hv",")","+","Hy",";","yL","=","max","(","dot","(","Hx",",","yq",")",",","ZERO_VALUE_NODES",")",";","if","(","Hz","[","0","]","<=","UNITY_VALUE_NODES",")","HA","=","yF","*","pow","(","max","(","yL","*","yF",",","0.1",")",",","Hz","[","0","]","-","UNITY_VALUE_NODES",")",";","else","HA","=","yF","*","pow","(","1.0001","-","yL",",","Hz","[","0","]","-","UNITY_VALUE_NODES",")",";","HA","=","max","(","HA",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"DIFFUSE_TOON",declarations:[{type:"node_in",name:"HB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HC",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"HD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HE",qualifier:["float"],is_optional:false},{type:"node_in",name:"HF",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"HG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["HG","=","ZERO_VALUE_NODES",";","if","(","HC",".","r","!=","ZERO_VALUE_NODES",")","{","yL","=","(","UNITY_VALUE_NODES","-","HE",")","*","dot","(","HD",",","HB",")","+","HE",";","yL","=","acos","(","yL",")",";","if","(","yL","<","HF","[","0","]",")","HG","=","UNITY_VALUE_NODES",";","else","if","(","yL",">","(","HF","[","0","]","+","HF","[","1","]",")","||","HF","[","1","]","==","ZERO_VALUE_NODES",")","HG","=","ZERO_VALUE_NODES",";","else","HG","=","UNITY_VALUE_NODES","-","(","(","yL","-","HF","[","0","]",")","/","HF","[","1","]",")",";","HG","=","max","(","HG",",","ZERO_VALUE_NODES",")",";","}"]}]},{type:"node",name:"SPECULAR_PHONG",declarations:[{type:"node_in",name:"HH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HI",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"HJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HK",qualifier:["float"],is_optional:false},{type:"node_in",name:"HL",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"HM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["HM","=","ZERO_VALUE_NODES",";","if","(","HI",".","g","==","UNITY_VALUE_NODES",")","{","yU","=","normalize","(","HH","+","yq",")",";","HM","=","(","UNITY_VALUE_NODES","-","HK",")","*","max","(","dot","(","HJ",",","yU",")",",","ZERO_VALUE_NODES",")","+","HK",";","HM","=","pow","(","HM",",","HL","[","0","]",")",";","}"]}]},{type:"node",name:"SPECULAR_WARDISO",declarations:[{type:"node_in",name:"HN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HO",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"HP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HQ",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"HR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["HR","=","ZERO_VALUE_NODES",";","if","(","HO",".","g","==","UNITY_VALUE_NODES",")","{","yU","=","normalize","(","HN","+","yq",")",";","yL","=","max","(","dot","(","HP",",","yU",")",",","0.001",")",";"]},{type:"textline",tokens:["yF","=","max","(","dot","(","HP",",","yq",")",",","0.01",")",";","yK","=","max","(","dot","(","HP",",","HN",")",",","0.01",")",";","yL","=","tan","(","acos","(","yL",")",")",";","yG","=","max","(","HQ","[","0","]",",","0.001",")",";","HR","=","yK","*","(","UNITY_VALUE_NODES","/","(","4.0","*","M_PI","*","yG","*","yG",")",")","*","(","exp","(","-","(","yL","*","yL",")","/","(","yG","*","yG",")",")","/","(","sqrt","(","yF","*","yK",")",")",")",";","}"]}]},{type:"node",name:"SPECULAR_TOON",declarations:[{type:"node_in",name:"HS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HT",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"HU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HV",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"HW",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["HW","=","ZERO_VALUE_NODES",";","if","(","HT",".","g","==","UNITY_VALUE_NODES",")","{","yU","=","normalize","(","HS","+","yq",")",";","yK","=","acos","(","dot","(","yU",",","HU",")",")",";","if","(","yK","<","HV","[","0","]",")","HW","=","UNITY_VALUE_NODES",";","else","if","(","yK",">=","HV","[","0","]","+","HV","[","1","]","||","HV","[","1","]","==","ZERO_VALUE_NODES",")","HW","=","ZERO_VALUE_NODES",";","else","HW","=","UNITY_VALUE_NODES","-","(","yK","-","HV","[","0","]",")","/","HV","[","1","]",";","}"]}]},{type:"node",name:"SPECULAR_BLINN",declarations:[{type:"node_in",name:"HX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"HY",qualifier:["vec2"],is_optional:false},{type:"node_in",name:"HZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"H_",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ia",qualifier:["vec2"],is_optional:false},{type:"node_out",name:"Ib",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ib","=","ZERO_VALUE_NODES",";","if","(","HY",".","g","==","UNITY_VALUE_NODES",")","{","if","(","Ia","[","0","]","<","UNITY_VALUE_NODES","||","Ia","[","1","]","==","ZERO_VALUE_NODES",")","Ib","=","ZERO_VALUE_NODES",";","else","{","if","(","Ia","[","1","]","<","100.0",")","Ia","[","1","]","=","sqrt","(","UNITY_VALUE_NODES","/","Ia","[","1","]",")",";","else","Ia","[","1","]","=","10.0","/","Ia","[","1","]",";","yU","=","normalize","(","yq","+","HX",")",";","yK","=","(","UNITY_VALUE_NODES","-","H_",")","*","max","(","dot","(","HZ",",","yU",")",",","ZERO_VALUE_NODES",")","+","H_",";","if","(","yK","<","ZERO_VALUE_NODES",")","Ib","=","ZERO_VALUE_NODES",";","else","{","yF","=","max","(","dot","(","HZ",",","yq",")",",","0.01",")",";","yG","=","dot","(","HZ",",","HX",")",";","if","(","yG","<=","0.01",")","Ib","=","ZERO_VALUE_NODES",";","else","{","yL","=","max","(","dot","(","yq",",","yU",")",",","0.01",")",";","yH","=","UNITY_VALUE_NODES",";","yF","=","(","2.0","*","yK","*","yF",")","/","yL",";","yG","=","(","2.0","*","yK","*","yG",")","/","yL",";","yG","=","min","(","min","(","yH",",","yF",")",",","yG",")",";","yF","=","sqrt","(","pow","(","Ia","[","0","]",",","2.0",")","+","pow","(","yL",",","2.0",")","-","UNITY_VALUE_NODES",")",";","yL","=","pow","(","yF","-","yL",",","2.0",")","/","pow","(","yF","+","yL",",","2.0",")","*","(","UNITY_VALUE_NODES","+","pow","(","yL","*","(","yF","+","yL",")","-","UNITY_VALUE_NODES",",","2.0",")","/","pow","(","yL","*","(","yF","-","yL",")","+","UNITY_VALUE_NODES",",","2.0",")",")",";","yK","=","acos","(","yK",")",";","Ib","=","max","(","yL","*","yG","*","exp","(","-","pow","(","yK",",","2.0",")","/","(","2.0","*","pow","(","Ia","[","1","]",",","2.0",")",")",")",",","ZERO_VALUE_NODES",")",";","}","}","}","}"]}]},{type:"node",name:"LIGHTING_APPLY",declarations:[{type:"node_in",name:"Ic",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"Id",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ie",qualifier:["float"],is_optional:false},{type:"node_in",name:"If",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ig",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ih",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ii",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"Ij",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ik",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Il",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Im",qualifier:["float"],is_optional:false},{type:"node_out",name:"In",qualifier:["vec4"],is_optional:false},{type:"node_out",name:"Io",qualifier:["vec3"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_NODE_B4W_TRANSLUCENCY"],statements:[{type:"textline",tokens:["if","(","dot","(","Ig",",","Ih",")","*","dot","(","yq",",","Ih",")","<","ZERO_VALUE_NODES",")","{","yK","=","Ii",".","x",";","yG","=","Ii",".","y",";","yL","=","Ii",".","z",";","yF","=","Ii",".","w",";"]},{type:"textline",tokens:["yH","=","clamp","(","abs","(","dot","(","Ig",",","Ih",")",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yI","=","clamp","(","dot","(","yq",",","-","Ig",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yG","=","pow","(","yI",",","yG",")",";"]},{type:"textline",tokens:["In","=","Ic","+","Im","*","vec4","(","Il","*","yH","*","pow","(","Ij",",","vec3","(","yK",")",")",",","UNITY_VALUE_NODES",")",";"]},{type:"textline",tokens:["In","+=","yL","*","mix","(","vec4","(","Ij",",","UNITY_VALUE_NODES",")",",","vec4","(","UNITY_VALUE_NODES",")",",","yF",")","*","Im","*","vec4","(","Il","*","yH","*","vec3","(","yG",")",",","UNITY_VALUE_NODES",")",";","Io","=","Id",";","}","else","{"]},{type:"textline",tokens:["Io","=","Id","+","Il","*","Ik","*","If",";","In","=","Ic","+","vec4","(","Il","*","Ij","*","Ie",",","If",")",";","}"]}]},{type:"node_else",statements:[{type:"textline",tokens:["Io","=","Id","+","Il","*","Ik","*","If",";","In","=","Ic","+","vec4","(","Il","*","Ij","*","Ie",",","If",")",";"]}]}]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"Ip",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Ip","=","u_node_rgbs","[","RGB_IND","]",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"Iq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ir",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Ir","=","dot","(","Iq",",","vec3","(","0.35",",","0.45",",","0.2",")",")",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"Is",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"It",qualifier:["float"],is_optional:true},{type:"node_out",name:"Iu",qualifier:["float"],is_optional:true},{type:"node_out",name:"Iv",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_It"],statements:[{type:"textline",tokens:["It","=","Is",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Iu"],statements:[{type:"textline",tokens:["Iu","=","Is",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Iv"],statements:[{type:"textline",tokens:["Iv","=","Is",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"Iw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Ix",qualifier:["float"],is_optional:true},{type:"node_out",name:"Iy",qualifier:["float"],is_optional:true},{type:"node_out",name:"Iz",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["yU","=","xZ","(","Iw",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ix"],statements:[{type:"textline",tokens:["Ix","=","yU",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Iy"],statements:[{type:"textline",tokens:["Iy","=","yU",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Iz"],statements:[{type:"textline",tokens:["Iz","=","yU",".","b",";"]}]}]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"IA",qualifier:["float"],is_optional:false},{type:"node_in",name:"IB",qualifier:["float"],is_optional:false},{type:"node_in",name:"IC",qualifier:["float"],is_optional:false},{type:"node_out",name:"ID",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ID","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","IA","-","IC",")","*","IB",")",")",";"]}]},{type:"node",name:"GAMMA",declarations:[{type:"node_in",name:"IE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"IF",qualifier:["float"],is_optional:false},{type:"node_out",name:"IG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["IG","=","IE",";","if","(","IG",".","x",">","ZERO_VALUE_NODES",")","IG",".","x","=","pow","(","IE",".","x",",","IF",")",";","if","(","IG",".","y",">","ZERO_VALUE_NODES",")","IG",".","y","=","pow","(","IE",".","y",",","IF",")",";","if","(","IG",".","z",">","ZERO_VALUE_NODES",")","IG",".","z","=","pow","(","IE",".","z",",","IF",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"IH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"II",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["II","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","IH",")",";","II","=","pow","(","II",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"IJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"IK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["IK","=","max","(","vec3","(","ZERO_VALUE_NODES",")",",","IJ",")",";","IK","=","pow","(","IK",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_EMPTY",declarations:[{type:"node_out",name:"IL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"IM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"IN",qualifier:["float"],is_optional:false}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IL"],statements:[{type:"textline",tokens:["IL","[","2","]","=","IL","[","1","]","=","IL","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IM"],statements:[{type:"textline",tokens:["IM","[","2","]","=","IM","[","1","]","=","IM","[","0","]","=","ZERO_VALUE_NODES",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IN"],statements:[{type:"textline",tokens:["IN","=","ZERO_VALUE_NODES",";"]}]}]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"IO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"IP",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IQ",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"],is_optional:false}],statements:[{type:"textline",tokens:["yU","=","vec3","(","IO",".","x",",","IO",".","z",",","-","IO",".","y",")",";","yN","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","yU",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IP"],statements:[{type:"textline",tokens:["IP","=","yN",".","xyz",";","br","(","IP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IQ"],statements:[{type:"textline",tokens:["IQ","=","yN",".","w",";"]}]}]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"IR",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"IS",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"IT",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"IU",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IV",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IW",qualifier:["float"],is_optional:true},{type:"node_out",name:"IX",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"IY",qualifier:["float"],is_optional:true},{type:"node_out",name:"IZ",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"I_",qualifier:["float"],is_optional:true},{type:"node_out",name:"Ja",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"Jb",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["yN","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","yg","(","IR",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IV"],statements:[{type:"textline",tokens:["IV","=","yN",".","xyz",";","br","(","IV",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IW"],statements:[{type:"textline",tokens:["IW","=","yN",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["yN","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","yg","(","IS",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IX"],statements:[{type:"textline",tokens:["IX","=","yN",".","xyz",";","br","(","IX",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IY"],statements:[{type:"textline",tokens:["IY","=","yN",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["yN","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","yg","(","IT",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_IZ"],statements:[{type:"textline",tokens:["IZ","=","yN",".","xyz",";","br","(","IZ",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_I_"],statements:[{type:"textline",tokens:["I_","=","yN",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["yN","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","yg","(","IU",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ja"],statements:[{type:"textline",tokens:["Ja","=","yN",".","xyz",";","br","(","Ja",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jb"],statements:[{type:"textline",tokens:["Jb","=","yN",".","w",";"]}]}]}]}]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"Jc",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"Jd",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"Je",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"Jf",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"Jg",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"Jh",qualifier:["float"],is_optional:true},{type:"node_out",name:"Ji",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"Jj",qualifier:["float"],is_optional:true},{type:"node_out",name:"Jk",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"Jl",qualifier:["float"],is_optional:true},{type:"node_out",name:"Jm",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"Jn",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["yN","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","yg","(","Jc",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jg"],statements:[{type:"textline",tokens:["Jg","=","normalize","(","yO","*","(","yN",".","xyz","-","xU",")",")",";"]},{type:"textline",tokens:["Jg",".","yz","=","vec2","(","-","Jg",".","z",",","Jg",".","y",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jh"],statements:[{type:"textline",tokens:["Jh","=","yN",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["yN","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","yg","(","Jd",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ji"],statements:[{type:"textline",tokens:["Ji","=","normalize","(","yO","*","(","yN",".","xyz","-","xU",")",")",";"]},{type:"textline",tokens:["Ji",".","yz","=","vec2","(","-","Ji",".","z",",","Ji",".","y",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jj"],statements:[{type:"textline",tokens:["Jj","=","yN",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["yN","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","yg","(","Je",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jk"],statements:[{type:"textline",tokens:["Jk","=","normalize","(","yO","*","(","yN",".","xyz","-","xU",")",")",";"]},{type:"textline",tokens:["Jk",".","yz","=","vec2","(","-","Jk",".","z",",","Jk",".","y",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jl"],statements:[{type:"textline",tokens:["Jl","=","yN",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["yN","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","yg","(","Jf",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jm"],statements:[{type:"textline",tokens:["Jm","=","normalize","(","yO","*","(","yN",".","xyz","-","xU",")",")",";"]},{type:"textline",tokens:["Jm",".","yz","=","vec2","(","-","Jm",".","z",",","Jm",".","y",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jn"],statements:[{type:"textline",tokens:["Jn","=","yN",".","w",";"]}]}]}]}]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"Jo",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Jo","=","u_node_values","[","VALUE_IND","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"Jp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Jq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Js",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["Jr","=","Jp","+","Jq",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Js"],statements:[{type:"textline",tokens:["Js","=","(","abs","(","Jr","[","0","]",")","+","abs","(","Jr","[","1","]",")","+","abs","(","Jr","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"Jt",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ju",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jw",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["Jv","=","Jt","-","Ju",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jw"],statements:[{type:"textline",tokens:["Jw","=","(","abs","(","Jv","[","0","]",")","+","abs","(","Jv","[","1","]",")","+","abs","(","Jv","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"Jx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Jy",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Jz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JA",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["Jz","=","Jx","+","Jy",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_JA"],statements:[{type:"textline",tokens:["JA","=","length","(","Jz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Jz"],statements:[{type:"textline",tokens:["Jz","=","normalize","(","Jz",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"JB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"JC",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JE",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["JD","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_JE"],statements:[{type:"textline",tokens:["JE","=","dot","(","JB",",","JC",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"JF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"JG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JI",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["JH","=","cross","(","JF",",","JG",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_JI"],statements:[{type:"textline",tokens:["JI","=","length","(","JH",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"JJ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"JK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JM",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["JL","=","normalize","(","JJ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_JM"],statements:[{type:"textline",tokens:["JM","=","length","(","JJ",")",";"]}]}]},{type:"textline",tokens:["JK",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"JN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"JO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["JP","=","reflect","(","(","yt","*","vec4","(","JN",",","0.0",")",")",".","xyz",",","JO",")",";"]}]},{type:"node",name:"B4W_REFLECT_WORLD",declarations:[{type:"node_in",name:"JQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["yU","=","vec3","(","-","yq",".","x",",","yq",".","z",",","-","yq",".","y",")",";","JR","=","reflect","(","yU",",","JQ",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"JS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"JT",qualifier:["float"],is_optional:false},{type:"node_in",name:"JU",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"JV",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"JW",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"],is_optional:false}],statements:[{type:"textline",tokens:["yG","=","length","(","yM",")",";","if","(","yG","<","JV",")","{","yB","=","yg","(","JS",")",";","yG","=","clamp","(","xU","*","(","JV","-","yG",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","yG","=","JT","*","yG",";"]},{type:"textline",tokens:["yU","=","normalize","(","yq","*","yO",")",";"]},{type:"textline",tokens:["yH","=","UNITY_VALUE_NODES","/","JU",";"]},{type:"textline",tokens:["yC","=","yU",".","xy","*","yG","/","(","JU","*","yU",".","z",")",";","yG","=","UNITY_VALUE_NODES",";","yF","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","yB",")",".","a",";"]},{type:"textline",tokens:["for","(","float","JX","=","1.0",";","JX","<=","JU",";","JX","++",")","{","if","(","yF","<","yG",")","{","yG","-=","yH",";","yB","-=","yC",";","yF","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","yB",")",".","a",";","}","}"]},{type:"textline",tokens:["yC","=","yB","+","yC",";","yH","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","yC",")",".","a","-","(","yG","+","yH",")",";","yG","=","yF","-","yG",";","yH","=","yG","/","(","yG","-","yH",")",";"]},{type:"textline",tokens:["yB","=","yH","*","yC","+","(","UNITY_VALUE_NODES","-","yH",")","*","yB",";","JW","=","ye","(","yB",")",";","}","else","JW","=","JS",";"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"JY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"JZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["JZ","=","clamp","(","JY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"J_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Ka",qualifier:["float"],is_optional:false},{type:"node_out",name:"Kb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Kb","=","J_",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"Kc",qualifier:["float"],is_optional:false},{type:"node_in",name:"Kd",qualifier:["float"],is_optional:false},{type:"node_in",name:"Ke",qualifier:["float"],is_optional:false},{type:"node_in",name:"Kf",qualifier:["float"],is_optional:false},{type:"node_in",name:"Kg",qualifier:["float"],is_optional:false},{type:"node_out",name:"Kh",qualifier:["float"],is_optional:true},{type:"node_out",name:"Ki",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Kh"],statements:[{type:"textline",tokens:["Kh","=","Kc",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_Ki"],statements:[{type:"textline",tokens:["Ki","=","vec4","(","Kd",",","Ke",",","Kf",",","Kg",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"Kj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Kj","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"Kk",qualifier:["float"],is_optional:false},{type:"node_in",name:"Kl",qualifier:["float"],is_optional:false},{type:"node_in",name:"Km",qualifier:["float"],is_optional:false},{type:"node_out",name:"Kn",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Kn","=","smoothstep","(","Kl",",","Km",",","Kk",")",";"]}]},{type:"node",name:"B4W_GLOW_OUTPUT",declarations:[{type:"node_in",name:"Ko",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"Kp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["yw","=","Ko",";","yA","=","Kp",";"]}]},{type:"node",name:"B4W_VECTOSCAL",declarations:[{type:"node_in",name:"Kq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"Kr",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["Kr","=","(","Kq",".","r","+","Kq",".","g","+","Kq",".","b",")","/","3.0",";"]}]},{type:"node",name:"B4W_SCALTOVEC",declarations:[{type:"node_in",name:"Ks",qualifier:["float"],is_optional:false},{type:"node_out",name:"Kt",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["Kt","[","0","]","=","Ks",";","Kt","[","1","]","=","Ks",";","Kt","[","2","]","=","Ks",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","Ku","(","in","vec3","yq",",","in","mat4","yr",",","in","mat4","ys",",","in","mat4","yt",",","in","mat4","yu",",","in","mat4","yv",",","out","vec3","yw",",","out","vec3","yx",",","out","vec3","yy",",","out","vec4","yz",",","out","float","yA",")","{","vec2","yB",",","yC",";","float","yD",",","yE",",","yF",",","yG",",","yH",",","yI",",","yJ",",","yK",",","yL",";","vec4","yM",",","yN",";","mat3","yO",";","vec3","yP",",","yQ",",","yR",",","yS",",","yT",",","yU",";","yw","=","vec3","(","ZERO_VALUE_NODES",")",";","yx","=","vec3","(","ZERO_VALUE_NODES",")",";","yy","=","vec3","(","ZERO_VALUE_NODES",")",";","yz","=","vec4","(","ZERO_VALUE_NODES",")",";","yA","=","ZERO_VALUE_NODES",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO",{type:"logical_or_expr",places:5}],group:{type:"group",parts:[{type:"textline",tokens:["yP","=","normalize","(","bE",")",";","yQ","=","yP",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["INVERT_FRONTFACING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")"]}]}}]},{type:"textline",tokens:["yQ","=","yQ",";","else","yQ","=","-","yQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["yR","=","yQ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["yR","=","yP",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["yP","=","yQ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["yS","=","cross","(","yQ",",","bF",".","xyz",")","*","bF",".","w",";","yO","=","mat3","(","bF",".","xyz",",","yS",",","yQ",")",";","yO","=","yO",";"]}]}}]},{type:"textline",tokens:["yQ","=","bC",";","yM","=","bD",";","yD","=","u_emit",";","yE","=","u_ambient",";"]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","Kw","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","vec3","f",";","vec3","g",";","float","h",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["void","KC","(","inout","vec3","Kx",",","float","Ky",",","vec4","Kz",",","vec4","KA",")","{","float","KB",";","KB","=","KA",".","x","-","Kz",".","x",";","KB","=","(","Ky","-","Kz",".","x",")","/","KB",";","Kx","=","mix","(","Kx",",","KA",".","yzw",",","clamp","(","KB",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec3","KI","(","float","KD",",","float","KE",",","vec4","KF","[","COLOR_RAMP_LENGTH","]",")","{","vec3","KG",";","float","KH",";","KH","=","KD","/","KE",";","KG","=","KF","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",1,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KC","(","KG",",","KH",",","KF","[","0","]",",","KF","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",2,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KC","(","KG",",","KH",",","KF","[","1","]",",","KF","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KC","(","KG",",","KH",",","KF","[","2","]",",","KF","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","KG",";","}"]}]}}]},{type:"textline",tokens:["float","KQ","(","float","KJ",",","float","KK",",","float","KL",",","float","KM",")","{","float","KN",",","KO",",","KP",";","KN","=","max","(","0.01",",","min","(","KK",",","KL",")",")",";","KO","=","max","(","0.01",",","min","(","KK",",","KM",")",")",";","KP","=","KK","-","KO",";","KO","=","clamp","(","KJ","/","KN",",","0.0",",","1.0",")","-","step","(","KP",",","KJ",")","*","(","KJ","-","KP",")","/","KO",";","return","KO",";","}","Kw","KY","(",")","{","mat4","KR",";","vec3","KS",",","KT",";","float","KU",",","KV",",","KW",";","Kw","KX",";","KV","=","a_p_data","[","0","]",";","KW","=","a_p_data","[","1","]",";","if","(","u_p_cyclic","==","1",")","{","KU","=","mod","(","u_p_time",",","u_p_length",")","-","KW",";","if","(","KU","<","0.0",")","KU","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","KU","=","u_p_time","-","KW",";","}","if","(","KU","<","0.0","||","KU",">=","KV",")","{","KX",".","a","=","0.0001",";","KX",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","KU","<","0.0","||","KU",">=","KV",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["KS","=","a_position",";","KT","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KR","=","O","(","u_model_tsr",")",";","KS","=","(","KR","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","KT","=","(","KR","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";"]}]}}]},{type:"textline",tokens:["KT","=","u_p_nfactor","*","KT",";","KT","+=","a_p_vels",".","xyz",";","KT",".","y","-=","u_p_gravity","*","KU","/","2.0",";","KV","=","max","(","u_p_mass",",","EPSILON",")",";","KT","+=","(","u_p_wind_fac","*","u_wind","/","KV",")","*","KU","/","2.0",";","KX",".","h","=","KU",";","KX",".","f","=","KT",";","KX",".","g","=","a_normal","*","a_p_vels",".","w",";","KX",".","b","=","KS","+","KT","*","KU",";","KX",".","e","=","a_p_vels",".","w","*","KU",";"]},{type:"condition",parts:[{type:"if",expression:["USE_COLOR_RAMP"],group:{type:"group",parts:[{type:"textline",tokens:["KX",".","a","=","texture2D","(","u_color_ramp_tex",",","vec2","(","KU","/","u_p_max_lifetime",",","0.5",")",")",".","g",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KX",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",0,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["KX",".","d","=","KI","(","KU",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["KX",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["KX",".","c","=","KQ","(","KU",",","a_p_data","[","0","]",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","KX",";","}"]}]},exports["include/particles_nodes.glslv"] = {type:"group",parts:[{type:"node",name:"TEX_COORD_UV",declarations:[],statements:[{type:"textline",tokens:["bM","=","Ld","+","0.5",";"]}]},{type:"node",name:"UV_MERGED",declarations:[],statements:[{type:"textline",tokens:["bM","=","Ld","+","0.5",";"]}]},{type:"node",name:"UVMAP",declarations:[],statements:[{type:"textline",tokens:["bM","=","Ld","+","0.5",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[],statements:[{type:"textline",tokens:["bM","=","Ld","+","0.5",";"]}]},{type:"node",name:"PARTICLE_INFO",declarations:[{type:"node_param",name:"yi",qualifier:["varying","vec4"],is_optional:true},{type:"node_param",name:"yj",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"yk",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"yl",qualifier:["varying","vec3"],is_optional:true},{type:"node_param",name:"node_PARTICLE_INFO_var_a_p_indices",qualifier:["attribute","float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_SIZE"],statements:[{type:"textline",tokens:["yi","[","3","]","=","Lc",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_AGE"],statements:[{type:"textline",tokens:["yi","[","1","]","=","Lb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_LT"],statements:[{type:"textline",tokens:["yi","[","2","]","=","Le",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_LOC"],statements:[{type:"textline",tokens:["yj","=","KZ",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_IND"],statements:[{type:"textline",tokens:["yi","[","0","]","=","node_PARTICLE_INFO_var_a_p_indices",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_VEL"],statements:[{type:"textline",tokens:["yk","=","K_",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["PART_INFO_A_VEL"],statements:[{type:"textline",tokens:["yl","=","La",";"]}]}]}]},{type:"nodes_global"},{type:"textline",tokens:["void","Lf","(","in","vec3","KZ",",","in","vec3","K_",",","in","vec3","La",",","in","float","Lb",",","in","float","Lc",",","in","vec2","Ld",",","in","float","Le",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["bM","=","Ld","+","0.5",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["}"]}]},exports["include/blending.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","Lh","=","0.0",";","float","Li","=","1.0",";","vec3","Ln","(","vec3","Lj",")","{","float","Lk",",","Ll",";","vec4","Lm",";","Lm","=","vec4","(","Lh",",","-","Li","/","3.0",",","2.0","/","3.0",",","-","Li",")",";","Lm","=","mix","(","vec4","(","Lj",".","bg",",","Lm",".","wz",")",",","vec4","(","Lj",".","gb",",","Lm",".","xy",")",",","step","(","Lj",".","b",",","Lj",".","g",")",")",";","Lm","=","mix","(","vec4","(","Lm",".","xyw",",","Lj",".","r",")",",","vec4","(","Lj",".","r",",","Lm",".","yzx",")",",","step","(","Lm",".","x",",","Lj",".","r",")",")",";","Lk","=","Lm",".","x","-","min","(","Lm",".","w",",","Lm",".","y",")",";","Ll","=","1.0e-10",";","return","vec3","(","abs","(","Lm",".","z","+","(","Lm",".","w","-","Lm",".","y",")","/","(","6.0","*","Lk","+","Ll",")",")",",","Lk","/","(","Lm",".","x","+","Ll",")",",","Lm",".","x",")",";","}","vec3","Lr","(","vec3","Lo",")","{","vec3","Lp",";","vec4","Lq",";","Lq","=","vec4","(","Li",",","2.0","/","3.0",",","Li","/","3.0",",","3.0",")",";","Lp","=","abs","(","fract","(","vec3","(","Lo",".","r",",","Lo",".","r",",","Lo",".","r",")","+","Lq",".","xyz",")","*","6.0","-","Lq",".","www",")",";","return","Lo",".","b","*","mix","(","Lq",".","xxx",",","clamp","(","Lp","-","Lq",".","xxx",",","Lh",",","Li",")",",","Lo",".","g",")",";","}","vec3","Lv","(","vec3","Ls",",","vec3","Lt",",","float","Lu",")","{","return","mix","(","Ls",",","Lt",",","Lu",")",";","}","vec3","Lz","(","vec3","Lw",",","vec3","Lx",",","float","Ly",")","{","return","Ly","*","Lw","+","Lx",";","}","vec3","LD","(","vec3","LA",",","vec3","LB",",","float","LC",")","{","return","LB","-","LC","*","LA",";","}","vec3","LI","(","vec3","LE",",","vec3","LF",",","float","LG",")","{","float","LH",";","LH","=","Li","-","LG",";","return","(","vec3","(","LH",")","+","LG","*","LE",")","*","LF",";","}","vec3","LN","(","vec3","LJ",",","vec3","LK",",","float","LL",")","{","vec3","LM",";","LM","=","vec3","(","Li","-","LL",")",";","return","vec3","(","Li",")","-","(","LM","+","LL","*","(","vec3","(","Li",")","-","LJ",")",")","*","(","vec3","(","Li",")","-","LK",")",";","}","vec3","LS","(","vec3","LO",",","vec3","LP",",","float","LQ",")","{","vec3","LR",";","LR","=","vec3","(","Li","-","LQ",")",";","return","mix","(","LP","*","(","LR","+","2.0","*","LQ","*","LO",")",",","vec3","(","Li",")","-","(","LR","+","2.0","*","LQ","*","(","vec3","(","Li",")","-","LO",")",")","*","(","vec3","(","Li",")","-","LP",")",",","step","(","0.5",",","LP",")",")",";","}","vec3","LW","(","vec3","LT",",","vec3","LU",",","float","LV",")","{","return","mix","(","LU",",","abs","(","LT","-","LU",")",",","LV",")",";","}","vec3","L_","(","vec3","LX",",","vec3","LY",",","float","LZ",")","{","return","mix","(","LY",",","LY","/","(","LX","+","step","(","LX",",","vec3","(","Lh",")",")",")",",","LZ",")",";","}","vec3","Md","(","vec3","Ma",",","vec3","Mb",",","float","Mc",")","{","return","mix","(","Mb",",","min","(","Ma",",","Mb",")",",","Mc",")",";","}","vec3","Mh","(","vec3","Me",",","vec3","Mf",",","float","Mg",")","{","return","max","(","Mg","*","Me",",","Mf",")",";","}","vec3","Mn","(","vec3","Mi",",","vec3","Mj",",","float","Mk",")","{","vec3","Ml",",","Mm",";","Ml","=","Ln","(","Mj",")",";","if","(","Ml",".","y","!=","Lh",")","{","Mm","=","Ln","(","Mi",")",";","Mm","=","Lr","(","vec3","(","Ml",".","x",",","Mm",".","yz",")",")",";","return","mix","(","Mi",",","Mm",",","Mk",")",";","}","return","Mi",";","}","vec3","Mt","(","vec3","Mo",",","vec3","Mp",",","float","Mq",")","{","vec3","Mr",",","Ms",";","Mr","=","Ln","(","Mo",")",";","if","(","Mr",".","y","!=","Lh",")","{","Ms","=","Ln","(","Mp",")",";","return","Lr","(","vec3","(","Mr",".","x",",","mix","(","Mr",".","y",",","Ms",".","y",",","Mq",")",",","Mr",".","z",")",")",";","}","return","Mo",";","}","vec3","Mz","(","vec3","Mu",",","vec3","Mv",",","float","Mw",")","{","vec3","Mx",",","My",";","Mx","=","Ln","(","Mu",")",";","My","=","Ln","(","Mv",")",";","return","Lr","(","vec3","(","Mx",".","xy",",","mix","(","Mx",".","z",",","My",".","z",",","Mw",")",")",")",";","}","vec3","MF","(","vec3","MA",",","vec3","MB",",","float","MC",")","{","vec3","MD",",","ME",";","MD","=","Ln","(","MB",")",";","if","(","MD",".","y","!=","Lh",")","{","ME","=","Ln","(","MA",")",";","ME","=","Lr","(","vec3","(","MD",".","xy",",","ME",".","z",")",")",";","return","mix","(","MA",",","ME",",","MC",")",";","}","return","MA",";","}","vec3","MK","(","vec3","MG",",","vec3","MH",",","float","MI",")","{","vec3","MJ",";","MJ","=","vec3","(","Li",")","-","(","vec3","(","Li",")","-","MH",")","*","(","vec3","(","Li",")","-","MG",")",";","return","mix","(","MG",",","(","(","vec3","(","Li",")","-","MG",")","*","MH","*","MG",")","+","MG","*","MJ",",","MI",")",";","}","vec3","MO","(","vec3","ML",",","vec3","MM",",","float","MN",")","{","return","ML","+","MN","*","(","2.0","*","MM","-","Li",")",";","}","float","MU","(","float","MP",",","float","MQ",",","float","MR",",","float","MS",")","{","float","MT",";","MT","=","Li","-","MS",";","return","(","MT","+","MR","*","MP",")","*","MQ",";","}","float","M_","(","float","MV",",","float","MW",",","float","MX",",","float","MY",")","{","float","MZ",";","MZ","=","Li","-","MY",";","return","Li","-","(","MZ","+","MX","*","(","Li","-","MV",")",")","*","(","Li","-","MW",")",";","}","float","Nf","(","float","Na",",","float","Nb",",","float","Nc",",","float","Nd",")","{","float","Ne",";","Ne","=","Li","-","Nd",";","return","mix","(","Nb","*","(","Ne","+","2.0","*","Nc","*","Na",")",",","Li","-","(","Ne","+","2.0","*","Nc","*","(","Li","-","Na",")",")","*","(","Li","-","Nb",")",",","step","(","0.5",",","Nb",")",")",";","}"]}]},exports["include/fxaa.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"ifndef",name:"FXAA_PS3",group:{type:"group",parts:[{type:"define",name:"FXAA_PS3",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_360",group:{type:"group",parts:[{type:"define",name:"FXAA_360",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_360_OPT",group:{type:"group",parts:[{type:"define",name:"FXAA_360_OPT",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_PC",group:{type:"group",parts:[{type:"define",name:"FXAA_PC",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_PC_CONSOLE",group:{type:"group",parts:[{type:"define",name:"FXAA_PC_CONSOLE",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GLSL_120",group:{type:"group",parts:[{type:"define",name:"FXAA_GLSL_120",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GLSL_130",group:{type:"group",parts:[{type:"define",name:"FXAA_GLSL_130",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_3",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_3",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_4",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_4",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_HLSL_5",group:{type:"group",parts:[{type:"define",name:"FXAA_HLSL_5",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GREEN_AS_LUMA",group:{type:"group",parts:[{type:"define",name:"FXAA_GREEN_AS_LUMA",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_EARLY_EXIT",group:{type:"group",parts:[{type:"define",name:"FXAA_EARLY_EXIT",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_DISCARD",group:{type:"group",parts:[{type:"define",name:"FXAA_DISCARD",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_FAST_PIXEL_OFFSET",group:{type:"group",parts:[{type:"condition",parts:[{type:"ifdef",name:"GL_EXT_gpu_shader4",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_NV_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_ARB_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_FAST_PIXEL_OFFSET",group:{type:"group",parts:[{type:"define",name:"FXAA_FAST_PIXEL_OFFSET",tokens:["0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GATHER4_ALPHA",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FXAA_HLSL_5",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_ARB_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifdef",name:"GL_NV_gpu_shader5",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_GATHER4_ALPHA",group:{type:"group",parts:[{type:"define",name:"FXAA_GATHER4_ALPHA",tokens:["0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:[0],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["4.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:[0],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",tokens:["2.0"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:[1],group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",tokens:["0.125"]}]}},{type:"else",group:{type:"group",parts:[{type:"define",name:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",tokens:["0.25"]}]}}]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"FXAA_QUALITY_PRESET",group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PRESET",tokens:["12"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",10,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["3"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",11,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["4"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",12,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["5"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",13,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["6"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",14,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["7"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",15,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["8"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["12.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",20,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["3"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",21,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["4"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",22,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["5"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",23,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["6"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",24,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["7"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["3.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",25,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["8"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",26,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["9"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",27,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["10"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",28,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["11"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",29,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P11",tokens:["8.0"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PRESET",39,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"define",name:"FXAA_QUALITY_PS",tokens:["12"]},{type:"define",name:"FXAA_QUALITY_P0",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P1",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P2",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P3",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P4",tokens:["1.0"]},{type:"define",name:"FXAA_QUALITY_P5",tokens:["1.5"]},{type:"define",name:"FXAA_QUALITY_P6",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P7",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P8",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P9",tokens:["2.0"]},{type:"define",name:"FXAA_QUALITY_P10",tokens:["4.0"]},{type:"define",name:"FXAA_QUALITY_P11",tokens:["8.0"]}]}}]},{type:"var",name:"FXAA_QUALITY_P12",tokens:["0.0"]},{type:"textline",tokens:["float","NB","(","float","NA",")","{","return","clamp","(","NA",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["FXAA_BLEND4WEB",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["vec4","NE","(","sampler2D","NC",",","vec2","ND",")","{","return","texture2D","(","NC",",","ND",")",";","}","vec4","NJ","(","sampler2D","NF",",","vec2","NG",",","vec2","NH",",","vec2","NI",")","{","return","texture2D","(","NF",",","NG","+","(","NH","*","NI",")",")",";","}"]}]}}]},{type:"textline",tokens:["vec4","Op","(","vec2","NK",",","sampler2D","NL",",","vec2","NM",",","float","NN",",","float","NO",",","float","NP",")","{","bool","NQ",",","NR",",","NS",",","NT",",","NU",";","float","NV",",","NW",",","NX",",","NY",",","NZ",",","N_",",","Oa",",","Ob",",","Oc",",","Od",",","Oe",",","Of",",","Og",",","Oh",",","Oi",";","vec4","Oj",";","vec2","Ok",",","Ol",",","Om",",","On",",","Oo",";","Ok",".","x","=","NK",".","x",";","Ok",".","y","=","NK",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_GATHER4_ALPHA",1,{type:"equal_expr",places:2}],group:{type:"group",parts:[]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["Oj","=","NE","(","NL",",","Ok",")",";","NV","=","bB","(","Oj",")",";","NW","=","bB","(","NJ","(","NL",",","Ok",",","vec2","(","0",",","1",")",",","NM",".","xy",")",")",";","NX","=","bB","(","NJ","(","NL",",","Ok",",","vec2","(","1",",","0",")",",","NM",".","xy",")",")",";","NY","=","bB","(","NJ","(","NL",",","Ok",",","vec2","(","0",",","-","1",")",",","NM",".","xy",")",")",";","NZ","=","bB","(","NJ","(","NL",",","Ok",",","vec2","(","-","1",",","0",")",",","NM",".","xy",")",")",";"]}]}}]},{type:"textline",tokens:["N_","=","max","(","NW",",","NV",")",";","Oa","=","min","(","NW",",","NV",")",";","N_","=","max","(","NX",",","N_",")",";","Oa","=","min","(","NX",",","Oa",")",";","Ob","=","max","(","NY",",","NZ",")",";","Oc","=","min","(","NY",",","NZ",")",";","N_","=","max","(","Ob",",","N_",")",";","Oa","=","min","(","Oc",",","Oa",")",";","Oc","=","N_","*","NO",";","Oa","=","N_","-","Oa",";","Oc","=","max","(","NP",",","Oc",")",";","NQ","=","Oa","<","Oc",";","if","(","NQ",")","return","Oj",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_GATHER4_ALPHA",0,{type:"equal_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["Oc","=","bB","(","NJ","(","NL",",","Ok",",","vec2","(","-","1",",","-","1",")",",","NM",".","xy",")",")",";","N_","=","bB","(","NJ","(","NL",",","Ok",",","vec2","(","1",",","1",")",",","NM",".","xy",")",")",";","Ob","=","bB","(","NJ","(","NL",",","Ok",",","vec2","(","1",",","-","1",")",",","NM",".","xy",")",")",";","Od","=","bB","(","NJ","(","NL",",","Ok",",","vec2","(","-","1",",","1",")",",","NM",".","xy",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[]}}]},{type:"textline",tokens:["Oe","=","NY","+","NW",";","Of","=","NZ","+","NX",";","Oa","=","1.0","/","Oa",";","Og","=","Oe","+","Of",";","Oe","=","(","-","2.0","*","NV",")","+","Oe",";","Of","=","(","-","2.0","*","NV",")","+","Of",";","Oh","=","Ob","+","N_",";","Ob","=","Oc","+","Ob",";","Oi","=","(","-","2.0","*","NX",")","+","Oh",";","Ob","=","(","-","2.0","*","NY",")","+","Ob",";","Oc","=","Oc","+","Od",";","N_","=","Od","+","N_",";","Oi","=","(","abs","(","Oe",")","*","2.0",")","+","abs","(","Oi",")",";","Ob","=","(","abs","(","Of",")","*","2.0",")","+","abs","(","Ob",")",";","Of","=","(","-","2.0","*","NZ",")","+","Oc",";","N_","=","(","-","2.0","*","NW",")","+","N_",";","Oi","=","abs","(","Of",")","+","Oi",";","Ob","=","abs","(","N_",")","+","Ob",";","Oh","=","Oc","+","Oh",";","Oc","=","NM",".","x",";","NQ","=","Oi",">=","Ob",";","Oh","=","Og","*","2.0","+","Oh",";","if","(","!","NQ",")","NY","=","NZ",";","if","(","!","NQ",")","NW","=","NX",";","if","(","NQ",")","Oc","=","NM",".","y",";","Oh","=","(","Oh","*","(","1.0","/","12.0",")",")","-","NV",";","NX","=","NY","-","NV",";","NZ","=","NW","-","NV",";","NY","=","NY","+","NV",";","NW","=","NW","+","NV",";","NR","=","abs","(","NX",")",">=","abs","(","NZ",")",";","NZ","=","max","(","abs","(","NX",")",",","abs","(","NZ",")",")",";","if","(","NR",")","Oc","=","-","Oc",";","Oa","=","NB","(","abs","(","Oh",")","*","Oa",")",";","Ol",".","x","=","Ok",".","x",";","Ol",".","y","=","Ok",".","y",";","Om",".","x","=","(","!","NQ",")","?","0.0",":","NM",".","x",";","Om",".","y","=","(","NQ",")","?","0.0",":","NM",".","y",";","if","(","!","NQ",")","Ol",".","x","+=","Oc","*","0.5",";","if","(","NQ",")","Ol",".","y","+=","Oc","*","0.5",";","On",".","x","=","Ol",".","x","-","Om",".","x","*","FXAA_QUALITY_P0",";","On",".","y","=","Ol",".","y","-","Om",".","y","*","FXAA_QUALITY_P0",";","Oo",".","x","=","Ol",".","x","+","Om",".","x","*","FXAA_QUALITY_P0",";","Oo",".","y","=","Ol",".","y","+","Om",".","y","*","FXAA_QUALITY_P0",";","Oh","=","(","(","-","2.0",")","*","Oa",")","+","3.0",";","NX","=","bB","(","NE","(","NL",",","On",")",")",";","Oa","=","Oa","*","Oa",";","Og","=","bB","(","NE","(","NL",",","Oo",")",")",";","if","(","!","NR",")","NY","=","NW",";","NZ","=","NZ","*","1.0","/","4.0",";","NW","=","NV","-","NY","*","0.5",";","Oa","=","Oh","*","Oa",";","NR","=","NW","<","0.0",";","NX","-=","NY","*","0.5",";","Og","-=","NY","*","0.5",";","NS","=","abs","(","NX",")",">=","NZ",";","NT","=","abs","(","Og",")",">=","NZ",";","if","(","!","NS",")","On",".","x","-=","Om",".","x","*","FXAA_QUALITY_P1",";","if","(","!","NS",")","On",".","y","-=","Om",".","y","*","FXAA_QUALITY_P1",";","NU","=","(","!","NS",")","||","(","!","NT",")",";","if","(","!","NT",")","Oo",".","x","+=","Om",".","x","*","FXAA_QUALITY_P1",";","if","(","!","NT",")","Oo",".","y","+=","Om",".","y","*","FXAA_QUALITY_P1",";","if","(","NU",")","{","if","(","!","NS",")","NX","=","bB","(","NE","(","NL",",","On",".","xy",")",")",";","if","(","!","NT",")","Og","=","bB","(","NE","(","NL",",","Oo",".","xy",")",")",";","if","(","!","NS",")","NX","=","NX","-","NY","*","0.5",";","if","(","!","NT",")","Og","=","Og","-","NY","*","0.5",";","NS","=","abs","(","NX",")",">=","NZ",";","NT","=","abs","(","Og",")",">=","NZ",";","if","(","!","NS",")","On",".","x","-=","Om",".","x","*","FXAA_QUALITY_P2",";","if","(","!","NS",")","On",".","y","-=","Om",".","y","*","FXAA_QUALITY_P2",";","NU","=","(","!","NS",")","||","(","!","NT",")",";","if","(","!","NT",")","Oo",".","x","+=","Om",".","x","*","FXAA_QUALITY_P2",";","if","(","!","NT",")","Oo",".","y","+=","Om",".","y","*","FXAA_QUALITY_P2",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",3,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NU",")","{","if","(","!","NS",")","NX","=","bB","(","NE","(","NL",",","On",".","xy",")",")",";","if","(","!","NT",")","Og","=","bB","(","NE","(","NL",",","Oo",".","xy",")",")",";","if","(","!","NS",")","NX","=","NX","-","NY","*","0.5",";","if","(","!","NT",")","Og","=","Og","-","NY","*","0.5",";","NS","=","abs","(","NX",")",">=","NZ",";","NT","=","abs","(","Og",")",">=","NZ",";","if","(","!","NS",")","On",".","x","-=","Om",".","x","*","FXAA_QUALITY_P3",";","if","(","!","NS",")","On",".","y","-=","Om",".","y","*","FXAA_QUALITY_P3",";","NU","=","(","!","NS",")","||","(","!","NT",")",";","if","(","!","NT",")","Oo",".","x","+=","Om",".","x","*","FXAA_QUALITY_P3",";","if","(","!","NT",")","Oo",".","y","+=","Om",".","y","*","FXAA_QUALITY_P3",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",4,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NU",")","{","if","(","!","NS",")","NX","=","bB","(","NE","(","NL",",","On",".","xy",")",")",";","if","(","!","NT",")","Og","=","bB","(","NE","(","NL",",","Oo",".","xy",")",")",";","if","(","!","NS",")","NX","=","NX","-","NY","*","0.5",";","if","(","!","NT",")","Og","=","Og","-","NY","*","0.5",";","NS","=","abs","(","NX",")",">=","NZ",";","NT","=","abs","(","Og",")",">=","NZ",";","if","(","!","NS",")","On",".","x","-=","Om",".","x","*","FXAA_QUALITY_P4",";","if","(","!","NS",")","On",".","y","-=","Om",".","y","*","FXAA_QUALITY_P4",";","NU","=","(","!","NS",")","||","(","!","NT",")",";","if","(","!","NT",")","Oo",".","x","+=","Om",".","x","*","FXAA_QUALITY_P4",";","if","(","!","NT",")","Oo",".","y","+=","Om",".","y","*","FXAA_QUALITY_P4",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",5,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NU",")","{","if","(","!","NS",")","NX","=","bB","(","NE","(","NL",",","On",".","xy",")",")",";","if","(","!","NT",")","Og","=","bB","(","NE","(","NL",",","Oo",".","xy",")",")",";","if","(","!","NS",")","NX","=","NX","-","NY","*","0.5",";","if","(","!","NT",")","Og","=","Og","-","NY","*","0.5",";","NS","=","abs","(","NX",")",">=","NZ",";","NT","=","abs","(","Og",")",">=","NZ",";","if","(","!","NS",")","On",".","x","-=","Om",".","x","*","FXAA_QUALITY_P5",";","if","(","!","NS",")","On",".","y","-=","Om",".","y","*","FXAA_QUALITY_P5",";","NU","=","(","!","NS",")","||","(","!","NT",")",";","if","(","!","NT",")","Oo",".","x","+=","Om",".","x","*","FXAA_QUALITY_P5",";","if","(","!","NT",")","Oo",".","y","+=","Om",".","y","*","FXAA_QUALITY_P5",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",6,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NU",")","{","if","(","!","NS",")","NX","=","bB","(","NE","(","NL",",","On",".","xy",")",")",";","if","(","!","NT",")","Og","=","bB","(","NE","(","NL",",","Oo",".","xy",")",")",";","if","(","!","NS",")","NX","=","NX","-","NY","*","0.5",";","if","(","!","NT",")","Og","=","Og","-","NY","*","0.5",";","NS","=","abs","(","NX",")",">=","NZ",";","NT","=","abs","(","Og",")",">=","NZ",";","if","(","!","NS",")","On",".","x","-=","Om",".","x","*","FXAA_QUALITY_P6",";","if","(","!","NS",")","On",".","y","-=","Om",".","y","*","FXAA_QUALITY_P6",";","NU","=","(","!","NS",")","||","(","!","NT",")",";","if","(","!","NT",")","Oo",".","x","+=","Om",".","x","*","FXAA_QUALITY_P6",";","if","(","!","NT",")","Oo",".","y","+=","Om",".","y","*","FXAA_QUALITY_P6",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",7,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NU",")","{","if","(","!","NS",")","NX","=","bB","(","NE","(","NL",",","On",".","xy",")",")",";","if","(","!","NT",")","Og","=","bB","(","NE","(","NL",",","Oo",".","xy",")",")",";","if","(","!","NS",")","NX","=","NX","-","NY","*","0.5",";","if","(","!","NT",")","Og","=","Og","-","NY","*","0.5",";","NS","=","abs","(","NX",")",">=","NZ",";","NT","=","abs","(","Og",")",">=","NZ",";","if","(","!","NS",")","On",".","x","-=","Om",".","x","*","FXAA_QUALITY_P7",";","if","(","!","NS",")","On",".","y","-=","Om",".","y","*","FXAA_QUALITY_P7",";","NU","=","(","!","NS",")","||","(","!","NT",")",";","if","(","!","NT",")","Oo",".","x","+=","Om",".","x","*","FXAA_QUALITY_P7",";","if","(","!","NT",")","Oo",".","y","+=","Om",".","y","*","FXAA_QUALITY_P7",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",8,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NU",")","{","if","(","!","NS",")","NX","=","bB","(","NE","(","NL",",","On",".","xy",")",")",";","if","(","!","NT",")","Og","=","bB","(","NE","(","NL",",","Oo",".","xy",")",")",";","if","(","!","NS",")","NX","=","NX","-","NY","*","0.5",";","if","(","!","NT",")","Og","=","Og","-","NY","*","0.5",";","NS","=","abs","(","NX",")",">=","NZ",";","NT","=","abs","(","Og",")",">=","NZ",";","if","(","!","NS",")","On",".","x","-=","Om",".","x","*","FXAA_QUALITY_P8",";","if","(","!","NS",")","On",".","y","-=","Om",".","y","*","FXAA_QUALITY_P8",";","NU","=","(","!","NS",")","||","(","!","NT",")",";","if","(","!","NT",")","Oo",".","x","+=","Om",".","x","*","FXAA_QUALITY_P8",";","if","(","!","NT",")","Oo",".","y","+=","Om",".","y","*","FXAA_QUALITY_P8",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",9,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NU",")","{","if","(","!","NS",")","NX","=","bB","(","NE","(","NL",",","On",".","xy",")",")",";","if","(","!","NT",")","Og","=","bB","(","NE","(","NL",",","Oo",".","xy",")",")",";","if","(","!","NS",")","NX","=","NX","-","NY","*","0.5",";","if","(","!","NT",")","Og","=","Og","-","NY","*","0.5",";","NS","=","abs","(","NX",")",">=","NZ",";","NT","=","abs","(","Og",")",">=","NZ",";","if","(","!","NS",")","On",".","x","-=","Om",".","x","*","FXAA_QUALITY_P9",";","if","(","!","NS",")","On",".","y","-=","Om",".","y","*","FXAA_QUALITY_P9",";","NU","=","(","!","NS",")","||","(","!","NT",")",";","if","(","!","NT",")","Oo",".","x","+=","Om",".","x","*","FXAA_QUALITY_P9",";","if","(","!","NT",")","Oo",".","y","+=","Om",".","y","*","FXAA_QUALITY_P9",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",10,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NU",")","{","if","(","!","NS",")","NX","=","bB","(","NE","(","NL",",","On",".","xy",")",")",";","if","(","!","NT",")","Og","=","bB","(","NE","(","NL",",","Oo",".","xy",")",")",";","if","(","!","NS",")","NX","=","NX","-","NY","*","0.5",";","if","(","!","NT",")","Og","=","Og","-","NY","*","0.5",";","NS","=","abs","(","NX",")",">=","NZ",";","NT","=","abs","(","Og",")",">=","NZ",";","if","(","!","NS",")","On",".","x","-=","Om",".","x","*","FXAA_QUALITY_P10",";","if","(","!","NS",")","On",".","y","-=","Om",".","y","*","FXAA_QUALITY_P10",";","NU","=","(","!","NS",")","||","(","!","NT",")",";","if","(","!","NT",")","Oo",".","x","+=","Om",".","x","*","FXAA_QUALITY_P10",";","if","(","!","NT",")","Oo",".","y","+=","Om",".","y","*","FXAA_QUALITY_P10",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",11,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NU",")","{","if","(","!","NS",")","NX","=","bB","(","NE","(","NL",",","On",".","xy",")",")",";","if","(","!","NT",")","Og","=","bB","(","NE","(","NL",",","Oo",".","xy",")",")",";","if","(","!","NS",")","NX","=","NX","-","NY","*","0.5",";","if","(","!","NT",")","Og","=","Og","-","NY","*","0.5",";","NS","=","abs","(","NX",")",">=","NZ",";","NT","=","abs","(","Og",")",">=","NZ",";","if","(","!","NS",")","On",".","x","-=","Om",".","x","*","FXAA_QUALITY_P11",";","if","(","!","NS",")","On",".","y","-=","Om",".","y","*","FXAA_QUALITY_P11",";","NU","=","(","!","NS",")","||","(","!","NT",")",";","if","(","!","NT",")","Oo",".","x","+=","Om",".","x","*","FXAA_QUALITY_P11",";","if","(","!","NT",")","Oo",".","y","+=","Om",".","y","*","FXAA_QUALITY_P11",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_QUALITY_PS",12,{type:"g_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["if","(","NU",")","{","if","(","!","NS",")","NX","=","bB","(","NE","(","NL",",","On",".","xy",")",")",";","if","(","!","NT",")","Og","=","bB","(","NE","(","NL",",","Oo",".","xy",")",")",";","if","(","!","NS",")","NX","=","NX","-","NY","*","0.5",";","if","(","!","NT",")","Og","=","Og","-","NY","*","0.5",";","NS","=","abs","(","NX",")",">=","NZ",";","NT","=","abs","(","Og",")",">=","NZ",";","if","(","!","NS",")","On",".","x","-=","Om",".","x","*","FXAA_QUALITY_P12",";","if","(","!","NS",")","On",".","y","-=","Om",".","y","*","FXAA_QUALITY_P12",";","NU","=","(","!","NS",")","||","(","!","NT",")",";","if","(","!","NT",")","Oo",".","x","+=","Om",".","x","*","FXAA_QUALITY_P12",";","if","(","!","NT",")","Oo",".","y","+=","Om",".","y","*","FXAA_QUALITY_P12",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}","NZ","=","Ok",".","x","-","On",".","x",";","NY","=","Oo",".","x","-","Ok",".","x",";","if","(","!","NQ",")","NZ","=","Ok",".","y","-","On",".","y",";","if","(","!","NQ",")","NY","=","Oo",".","y","-","Ok",".","y",";","NT","=","(","NX","<","0.0",")","!=","NR",";","NX","=","(","NY","+","NZ",")",";","NR","=","(","Og","<","0.0",")","!=","NR",";","NX","=","1.0","/","NX",";","NS","=","NZ","<","NY",";","NY","=","min","(","NZ",",","NY",")",";","NR","=","NS","?","NT",":","NR",";","Oa","=","Oa","*","Oa",";","NX","=","(","NY","*","(","-","NX",")",")","+","0.5",";","Oa","=","Oa","*","NN",";","NX","=","NR","?","NX",":","0.0",";","Oa","=","max","(","NX",",","Oa",")",";","if","(","!","NQ",")","Ok",".","x","+=","Oa","*","Oc",";","if","(","NQ",")","Ok",".","y","+=","Oa","*","Oc",";"]},{type:"condition",parts:[{type:"if",expression:["FXAA_DISCARD",1,{type:"equal_expr",places:2},"FXAA_BLEND4WEB",1,{type:"equal_expr",places:2},{type:"logical_or_expr",places:2}],group:{type:"group",parts:[{type:"textline",tokens:["return","NE","(","NL",",","Ok",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec4","(","NE","(","NL",",","Ok",")",".","xyz",",","NV",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","Ow","(","in","sampler2D","Oq",",","in","vec2","Or",",","in","vec2","Os",")","{","float","Ot",",","Ou",",","Ov",";","Ot","=","texture2D","(","Oq",",","Or",")",".","r",";","Ou","=","Os",".","x",";","Ov","=","Os",".","y",";","Ou","=","2.0","*","Ou","/","(","Ou","+","Ov","-","(","2.0","*","Ot","-","1.0",")","*","(","Ov","-","Ou",")",")",";","return","Ou",";","}"]}]}}